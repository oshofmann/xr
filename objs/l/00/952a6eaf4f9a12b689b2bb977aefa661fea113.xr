var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Framebuffer driver for EFI/UEFI based system</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * (c) 2006 Edgar Hucek &lt;gimli@dark-green.com&gt;</span>", 
"<span class=\"comment\"> * Original efi driver written by Gerd Knorr &lt;kraxel@goldbach.in-berlin.de&gt;</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kernel\">kernel</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#errno\">errno</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#fb\">fb</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#platform_device\">platform_device</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#dmi\">dmi</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#pci\">pci</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#video\">video</a>/<a class=\"id\" href=\"#vga\">vga</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"static struct <a class=\"id\" href=\"#fb_var_screeninfo\">fb_var_screeninfo</a> <a class=\"id\" href=\"#efifb_defined\">efifb_defined</a> <a class=\"id\" href=\"#__devinitdata\">__devinitdata</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#activate\">activate</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#FB_ACTIVATE_NOW\">FB_ACTIVATE_NOW</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#height\">height</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>= -1,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#width\">width</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>= -1,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#right_margin\">right_margin</a><span class=\"ts\"/><span class=\"ts\"/>= 32,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#upper_margin\">upper_margin</a><span class=\"ts\"/><span class=\"ts\"/>= 16,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#lower_margin\">lower_margin</a><span class=\"ts\"/><span class=\"ts\"/>= 4,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#vsync_len\">vsync_len</a><span class=\"ts\"/><span class=\"ts\"/>= 4,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#vmode\">vmode</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#FB_VMODE_NONINTERLACED\">FB_VMODE_NONINTERLACED</a>,", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#fb_fix_screeninfo\">fb_fix_screeninfo</a> <a class=\"id\" href=\"#efifb_fix\">efifb_fix</a> <a class=\"id\" href=\"#__devinitdata\">__devinitdata</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#id\">id</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>= \"EFI VGA\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#type\">type</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#FB_TYPE_PACKED_PIXELS\">FB_TYPE_PACKED_PIXELS</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#accel\">accel</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#FB_ACCEL_NONE\">FB_ACCEL_NONE</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#visual\">visual</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#FB_VISUAL_TRUECOLOR\">FB_VISUAL_TRUECOLOR</a>,", 
"};", 
"", 
"enum {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_I17\">M_I17</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* 17-Inch iMac */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_I20\">M_I20</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* 20-Inch iMac */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_I20_SR\">M_I20_SR</a>,<span class=\"ts\"/><span class=\"comment\">/* 20-Inch iMac (Santa Rosa) */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_I24\">M_I24</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* 24-Inch iMac */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_I24_8_1\">M_I24_8_1</a>,<span class=\"ts\"/><span class=\"comment\">/* 24-Inch iMac, 8,1th gen */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_I24_10_1\">M_I24_10_1</a>,<span class=\"ts\"/><span class=\"comment\">/* 24-Inch iMac, 10,1th gen */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_I27_11_1\">M_I27_11_1</a>,<span class=\"ts\"/><span class=\"comment\">/* 27-Inch iMac, 11,1th gen */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MINI\">M_MINI</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Mac Mini */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MINI_3_1\">M_MINI_3_1</a>,<span class=\"ts\"/><span class=\"comment\">/* Mac Mini, 3,1th gen */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MINI_4_1\">M_MINI_4_1</a>,<span class=\"ts\"/><span class=\"comment\">/* Mac Mini, 4,1th gen */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MB\">M_MB</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* MacBook */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MB_2\">M_MB_2</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* MacBook, 2nd rev. */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MB_3\">M_MB_3</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* MacBook, 3rd rev. */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MB_5_1\">M_MB_5_1</a>,<span class=\"ts\"/><span class=\"comment\">/* MacBook, 5th rev. */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MB_6_1\">M_MB_6_1</a>,<span class=\"ts\"/><span class=\"comment\">/* MacBook, 6th rev. */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MB_7_1\">M_MB_7_1</a>,<span class=\"ts\"/><span class=\"comment\">/* MacBook, 7th rev. */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MB_SR\">M_MB_SR</a>,<span class=\"ts\"/><span class=\"comment\">/* MacBook, 2nd gen, (Santa Rosa) */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MBA\">M_MBA</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* MacBook Air */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MBP\">M_MBP</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* MacBook Pro */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MBP_2\">M_MBP_2</a>,<span class=\"ts\"/><span class=\"comment\">/* MacBook Pro 2nd gen */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MBP_2_2\">M_MBP_2_2</a>,<span class=\"ts\"/><span class=\"comment\">/* MacBook Pro 2,2nd gen */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MBP_SR\">M_MBP_SR</a>,<span class=\"ts\"/><span class=\"comment\">/* MacBook Pro (Santa Rosa) */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MBP_4\">M_MBP_4</a>,<span class=\"ts\"/><span class=\"comment\">/* MacBook Pro, 4th gen */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MBP_5_1\">M_MBP_5_1</a>,    <span class=\"comment\">/* MacBook Pro, 5,1th gen */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MBP_5_2\">M_MBP_5_2</a>,<span class=\"ts\"/><span class=\"comment\">/* MacBook Pro, 5,2th gen */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MBP_5_3\">M_MBP_5_3</a>,<span class=\"ts\"/><span class=\"comment\">/* MacBook Pro, 5,3rd gen */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MBP_6_1\">M_MBP_6_1</a>,<span class=\"ts\"/><span class=\"comment\">/* MacBook Pro, 6,1th gen */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MBP_6_2\">M_MBP_6_2</a>,<span class=\"ts\"/><span class=\"comment\">/* MacBook Pro, 6,2th gen */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_MBP_7_1\">M_MBP_7_1</a>,<span class=\"ts\"/><span class=\"comment\">/* MacBook Pro, 7,1th gen */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#M_UNKNOWN\">M_UNKNOWN</a><span class=\"ts\"/><span class=\"comment\">/* placeholder */</span>", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#efifb_dmi_info\">efifb_dmi_info</a> {", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#optname\">optname</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#base\">base</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#stride\">stride</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#width\">width</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#height\">height</a>;", 
"} <a class=\"id\" href=\"#dmi_list\">dmi_list</a>[] <a class=\"id\" href=\"#__initdata\">__initdata</a> = {", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_I17\">M_I17</a>] = { \"i17\", 0x80010000, 1472 * 4, 1440, 900 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_I20\">M_I20</a>] = { \"i20\", 0x80010000, 1728 * 4, 1680, 1050 }, <span class=\"comment\">/* guess */</span>", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_I20_SR\">M_I20_SR</a>] = { \"imac7\", 0x40010000, 1728 * 4, 1680, 1050 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_I24\">M_I24</a>] = { \"i24\", 0x80010000, 2048 * 4, 1920, 1200 }, <span class=\"comment\">/* guess */</span>", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_I24_8_1\">M_I24_8_1</a>] = { \"imac8\", 0xc0060000, 2048 * 4, 1920, 1200 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_I24_10_1\">M_I24_10_1</a>] = { \"imac10\", 0xc0010000, 2048 * 4, 1920, 1080 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_I27_11_1\">M_I27_11_1</a>] = { \"imac11\", 0xc0010000, 2560 * 4, 2560, 1440 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_MINI\">M_MINI</a>]= { \"mini\", 0x80000000, 2048 * 4, 1024, 768 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_MINI_3_1\">M_MINI_3_1</a>] = { \"mini31\", 0x40010000, 1024 * 4, 1024, 768 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_MINI_4_1\">M_MINI_4_1</a>] = { \"mini41\", 0xc0010000, 2048 * 4, 1920, 1200 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_MB\">M_MB</a>] = { \"macbook\", 0x80000000, 2048 * 4, 1280, 800 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_MB_5_1\">M_MB_5_1</a>] = { \"macbook51\", 0x80010000, 2048 * 4, 1280, 800 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_MB_6_1\">M_MB_6_1</a>] = { \"macbook61\", 0x80010000, 2048 * 4, 1280, 800 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_MB_7_1\">M_MB_7_1</a>] = { \"macbook71\", 0x80010000, 2048 * 4, 1280, 800 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_MBA\">M_MBA</a>] = { \"mba\", 0x80000000, 2048 * 4, 1280, 800 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_MBP\">M_MBP</a>] = { \"mbp\", 0x80010000, 1472 * 4, 1440, 900 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_MBP_2\">M_MBP_2</a>] = { \"mbp2\", 0, 0, 0, 0 }, <span class=\"comment\">/* placeholder */</span>", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_MBP_2_2\">M_MBP_2_2</a>] = { \"mbp22\", 0x80010000, 1472 * 4, 1440, 900 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_MBP_SR\">M_MBP_SR</a>] = { \"mbp3\", 0x80030000, 2048 * 4, 1440, 900 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_MBP_4\">M_MBP_4</a>] = { \"mbp4\", 0xc0060000, 2048 * 4, 1920, 1200 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_MBP_5_1\">M_MBP_5_1</a>] = { \"mbp51\", 0xc0010000, 2048 * 4, 1440, 900 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_MBP_5_2\">M_MBP_5_2</a>] = { \"mbp52\", 0xc0010000, 2048 * 4, 1920, 1200 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_MBP_5_3\">M_MBP_5_3</a>] = { \"mbp53\", 0xd0010000, 2048 * 4, 1440, 900 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_MBP_6_1\">M_MBP_6_1</a>] = { \"mbp61\", 0x90030000, 2048 * 4, 1920, 1200 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_MBP_6_2\">M_MBP_6_2</a>] = { \"mbp62\", 0x90030000, 2048 * 4, 1680, 1050 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_MBP_7_1\">M_MBP_7_1</a>] = { \"mbp71\", 0xc0010000, 2048 * 4, 1280, 800 },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#M_UNKNOWN\">M_UNKNOWN</a>] = { <a class=\"id\" href=\"#NULL\">NULL</a>, 0, 0, 0, 0 }", 
"};", 
"", 
"static int <a class=\"id\" href=\"#set_system\">set_system</a>(const struct <a class=\"id\" href=\"#dmi_system_id\">dmi_system_id</a> *<a class=\"id\" href=\"#id\">id</a>);", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(<a class=\"id\" href=\"#vendor\">vendor</a>, <a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#enumid\">enumid</a>)<span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#set_system\">set_system</a>, <a class=\"id\" href=\"#name\">name</a>, {<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#DMI_MATCH\">DMI_MATCH</a>(<a class=\"id\" href=\"#DMI_BIOS_VENDOR\">DMI_BIOS_VENDOR</a>, <a class=\"id\" href=\"#vendor\">vendor</a>),<span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#DMI_MATCH\">DMI_MATCH</a>(<a class=\"id\" href=\"#DMI_PRODUCT_NAME\">DMI_PRODUCT_NAME</a>, <a class=\"id\" href=\"#name\">name</a>) },<span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/>  &amp;<a class=\"id\" href=\"#dmi_list\">dmi_list</a>[<a class=\"id\" href=\"#enumid\">enumid</a>] }", 
"", 
"static const struct <a class=\"id\" href=\"#dmi_system_id\">dmi_system_id</a> <a class=\"id\" href=\"#dmi_system_table\">dmi_system_table</a>[] <a class=\"id\" href=\"#__initconst\">__initconst</a> = {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Computer, Inc.\", \"iMac4,1\", <a class=\"id\" href=\"#M_I17\">M_I17</a>),", 
"<span class=\"ts\"/><span class=\"comment\">/* At least one of these two will be right; maybe both? */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Computer, Inc.\", \"iMac5,1\", <a class=\"id\" href=\"#M_I20\">M_I20</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"iMac5,1\", <a class=\"id\" href=\"#M_I20\">M_I20</a>),", 
"<span class=\"ts\"/><span class=\"comment\">/* At least one of these two will be right; maybe both? */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Computer, Inc.\", \"iMac6,1\", <a class=\"id\" href=\"#M_I24\">M_I24</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"iMac6,1\", <a class=\"id\" href=\"#M_I24\">M_I24</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"iMac7,1\", <a class=\"id\" href=\"#M_I20_SR\">M_I20_SR</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"iMac8,1\", <a class=\"id\" href=\"#M_I24_8_1\">M_I24_8_1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"iMac10,1\", <a class=\"id\" href=\"#M_I24_10_1\">M_I24_10_1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"iMac11,1\", <a class=\"id\" href=\"#M_I27_11_1\">M_I27_11_1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Computer, Inc.\", \"Macmini1,1\", <a class=\"id\" href=\"#M_MINI\">M_MINI</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"Macmini3,1\", <a class=\"id\" href=\"#M_MINI_3_1\">M_MINI_3_1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"Macmini4,1\", <a class=\"id\" href=\"#M_MINI_4_1\">M_MINI_4_1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Computer, Inc.\", \"MacBook1,1\", <a class=\"id\" href=\"#M_MB\">M_MB</a>),", 
"<span class=\"ts\"/><span class=\"comment\">/* At least one of these two will be right; maybe both? */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Computer, Inc.\", \"MacBook2,1\", <a class=\"id\" href=\"#M_MB\">M_MB</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"MacBook2,1\", <a class=\"id\" href=\"#M_MB\">M_MB</a>),", 
"<span class=\"ts\"/><span class=\"comment\">/* At least one of these two will be right; maybe both? */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Computer, Inc.\", \"MacBook3,1\", <a class=\"id\" href=\"#M_MB\">M_MB</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"MacBook3,1\", <a class=\"id\" href=\"#M_MB\">M_MB</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"MacBook4,1\", <a class=\"id\" href=\"#M_MB\">M_MB</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"MacBook5,1\", <a class=\"id\" href=\"#M_MB_5_1\">M_MB_5_1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"MacBook6,1\", <a class=\"id\" href=\"#M_MB_6_1\">M_MB_6_1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"MacBook7,1\", <a class=\"id\" href=\"#M_MB_7_1\">M_MB_7_1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"MacBookAir1,1\", <a class=\"id\" href=\"#M_MBA\">M_MBA</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Computer, Inc.\", \"MacBookPro1,1\", <a class=\"id\" href=\"#M_MBP\">M_MBP</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Computer, Inc.\", \"MacBookPro2,1\", <a class=\"id\" href=\"#M_MBP_2\">M_MBP_2</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Computer, Inc.\", \"MacBookPro2,2\", <a class=\"id\" href=\"#M_MBP_2_2\">M_MBP_2_2</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"MacBookPro2,1\", <a class=\"id\" href=\"#M_MBP_2\">M_MBP_2</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Computer, Inc.\", \"MacBookPro3,1\", <a class=\"id\" href=\"#M_MBP_SR\">M_MBP_SR</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"MacBookPro3,1\", <a class=\"id\" href=\"#M_MBP_SR\">M_MBP_SR</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"MacBookPro4,1\", <a class=\"id\" href=\"#M_MBP_4\">M_MBP_4</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"MacBookPro5,1\", <a class=\"id\" href=\"#M_MBP_5_1\">M_MBP_5_1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"MacBookPro5,2\", <a class=\"id\" href=\"#M_MBP_5_2\">M_MBP_5_2</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"MacBookPro5,3\", <a class=\"id\" href=\"#M_MBP_5_3\">M_MBP_5_3</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"MacBookPro6,1\", <a class=\"id\" href=\"#M_MBP_6_1\">M_MBP_6_1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"MacBookPro6,2\", <a class=\"id\" href=\"#M_MBP_6_2\">M_MBP_6_2</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EFIFB_DMI_SYSTEM_ID\">EFIFB_DMI_SYSTEM_ID</a>(\"Apple Inc.\", \"MacBookPro7,1\", <a class=\"id\" href=\"#M_MBP_7_1\">M_MBP_7_1</a>),", 
"<span class=\"ts\"/>{},", 
"};", 
"", 
"static int <a class=\"id\" href=\"#set_system\">set_system</a>(const struct <a class=\"id\" href=\"#dmi_system_id\">dmi_system_id</a> *<a class=\"id\" href=\"#id\">id</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#efifb_dmi_info\">efifb_dmi_info</a> *<a class=\"id\" href=\"#info\">info</a> = <a class=\"id\" href=\"#id\">id</a>-><a class=\"id\" href=\"#driver_data\">driver_data</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#base\">base</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"efifb: dmi detected %s - framebuffer at %p \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> \"(%dx%d, stride %d)\\n\", <a class=\"id\" href=\"#id\">id</a>-><a class=\"id\" href=\"#ident\">ident</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> (void *)<a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#base\">base</a>, <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#width\">width</a>, <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#height\">height</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#stride\">stride</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Trust the bootloader over the DMI tables */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_base\">lfb_base</a> == 0) {", 
"#if <a class=\"id\" href=\"#defined\">defined</a>(<a class=\"id\" href=\"#CONFIG_PCI\">CONFIG_PCI</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#found_bar\">found_bar</a> = 0;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_base\">lfb_base</a> = <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#base\">base</a>;", 
"", 
"#if <a class=\"id\" href=\"#defined\">defined</a>(<a class=\"id\" href=\"#CONFIG_PCI\">CONFIG_PCI</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* make sure that the address in the table is actually on a</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * VGA device's PCI BAR */</span>", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#for_each_pci_dev\">for_each_pci_dev</a>(<a class=\"id\" href=\"#dev\">dev</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if ((<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#class\">class</a> >> 8) != <a class=\"id\" href=\"#PCI_CLASS_DISPLAY_VGA\">PCI_CLASS_DISPLAY_VGA</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#DEVICE_COUNT_RESOURCE\">DEVICE_COUNT_RESOURCE</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#resource_size_t\">resource_size_t</a> <a class=\"id\" href=\"#start\">start</a>, <a class=\"id\" href=\"#end\">end</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#start\">start</a> = <a class=\"id\" href=\"#pci_resource_start\">pci_resource_start</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#i\">i</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#start\">start</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#end\">end</a> = <a class=\"id\" href=\"#pci_resource_end\">pci_resource_end</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#i\">i</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_base\">lfb_base</a> >= <a class=\"id\" href=\"#start\">start</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_base\">lfb_base</a> &lt; <a class=\"id\" href=\"#end\">end</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#found_bar\">found_bar</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#found_bar\">found_bar</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_base\">lfb_base</a> = 0;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_base\">lfb_base</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_linelength\">lfb_linelength</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_linelength\">lfb_linelength</a> = <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#stride\">stride</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_width\">lfb_width</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_width\">lfb_width</a> = <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#width\">width</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_height\">lfb_height</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_height\">lfb_height</a> = <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#height\">height</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#orig_video_isVGA\">orig_video_isVGA</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#orig_video_isVGA\">orig_video_isVGA</a> = <a class=\"id\" href=\"#VIDEO_TYPE_EFI\">VIDEO_TYPE_EFI</a>;", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_linelength\">lfb_linelength</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_width\">lfb_width</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_height\">lfb_height</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#orig_video_isVGA\">orig_video_isVGA</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 1;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#efifb_setcolreg\">efifb_setcolreg</a>(unsigned <a class=\"id\" href=\"#regno\">regno</a>, unsigned <a class=\"id\" href=\"#red\">red</a>, unsigned <a class=\"id\" href=\"#green\">green</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   unsigned <a class=\"id\" href=\"#blue\">blue</a>, unsigned <a class=\"id\" href=\"#transp\">transp</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   struct <a class=\"id\" href=\"#fb_info\">fb_info</a> *<a class=\"id\" href=\"#info\">info</a>)", 
"{", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *  Set a single color register. The values supplied are</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *  already rounded down to the hardware's capabilities</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *  (according to the entries in the `var' structure). Return</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *  != 0 for invalid regno.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#regno\">regno</a> >= <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#cmap\">cmap</a>.<a class=\"id\" href=\"#len\">len</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#regno\">regno</a> &lt; 16) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#red\">red</a>   >>= 8;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#green\">green</a> >>= 8;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blue\">blue</a>  >>= 8;", 
"<span class=\"ts\"/><span class=\"ts\"/>((<a class=\"id\" href=\"#u32\">u32</a> *)(<a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#pseudo_palette\">pseudo_palette</a>))[<a class=\"id\" href=\"#regno\">regno</a>] =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#red\">red</a>   << <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#var\">var</a>.<a class=\"id\" href=\"#red\">red</a>.<a class=\"id\" href=\"#offset\">offset</a>)   |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#green\">green</a> << <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#var\">var</a>.<a class=\"id\" href=\"#green\">green</a>.<a class=\"id\" href=\"#offset\">offset</a>) |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#blue\">blue</a>  << <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#var\">var</a>.<a class=\"id\" href=\"#blue\">blue</a>.<a class=\"id\" href=\"#offset\">offset</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#efifb_destroy\">efifb_destroy</a>(struct <a class=\"id\" href=\"#fb_info\">fb_info</a> *<a class=\"id\" href=\"#info\">info</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#screen_base\">screen_base</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#iounmap\">iounmap</a>(<a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#screen_base\">screen_base</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#release_mem_region\">release_mem_region</a>(<a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#apertures\">apertures</a>-><a class=\"id\" href=\"#ranges\">ranges</a>[0].<a class=\"id\" href=\"#base\">base</a>, <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#apertures\">apertures</a>-><a class=\"id\" href=\"#ranges\">ranges</a>[0].<a class=\"id\" href=\"#size\">size</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#framebuffer_release\">framebuffer_release</a>(<a class=\"id\" href=\"#info\">info</a>);", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#fb_ops\">fb_ops</a> <a class=\"id\" href=\"#efifb_ops\">efifb_ops</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#owner\">owner</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#THIS_MODULE\">THIS_MODULE</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#fb_destroy\">fb_destroy</a><span class=\"ts\"/>= <a class=\"id\" href=\"#efifb_destroy\">efifb_destroy</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#fb_setcolreg\">fb_setcolreg</a><span class=\"ts\"/>= <a class=\"id\" href=\"#efifb_setcolreg\">efifb_setcolreg</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#fb_fillrect\">fb_fillrect</a><span class=\"ts\"/>= <a class=\"id\" href=\"#cfb_fillrect\">cfb_fillrect</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#fb_copyarea\">fb_copyarea</a><span class=\"ts\"/>= <a class=\"id\" href=\"#cfb_copyarea\">cfb_copyarea</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#fb_imageblit\">fb_imageblit</a><span class=\"ts\"/>= <a class=\"id\" href=\"#cfb_imageblit\">cfb_imageblit</a>,", 
"};", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#efifb_setup\">efifb_setup</a>(char *<a class=\"id\" href=\"#options\">options</a>)", 
"{", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#this_opt\">this_opt</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#options\">options</a> || !*<a class=\"id\" href=\"#options\">options</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/>while ((<a class=\"id\" href=\"#this_opt\">this_opt</a> = <a class=\"id\" href=\"#strsep\">strsep</a>(&amp;<a class=\"id\" href=\"#options\">options</a>, \",\")) != <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!*<a class=\"id\" href=\"#this_opt\">this_opt</a>) continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#M_UNKNOWN\">M_UNKNOWN</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#strcmp\">strcmp</a>(<a class=\"id\" href=\"#this_opt\">this_opt</a>, <a class=\"id\" href=\"#dmi_list\">dmi_list</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#optname\">optname</a>) &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dmi_list\">dmi_list</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#base\">base</a> != 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_base\">lfb_base</a> = <a class=\"id\" href=\"#dmi_list\">dmi_list</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#base\">base</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_linelength\">lfb_linelength</a> = <a class=\"id\" href=\"#dmi_list\">dmi_list</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#stride\">stride</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_width\">lfb_width</a> = <a class=\"id\" href=\"#dmi_list\">dmi_list</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#width\">width</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_height\">lfb_height</a> = <a class=\"id\" href=\"#dmi_list\">dmi_list</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#height\">height</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#this_opt\">this_opt</a>, \"base:\", 5))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_base\">lfb_base</a> = <a class=\"id\" href=\"#simple_strtoul\">simple_strtoul</a>(<a class=\"id\" href=\"#this_opt\">this_opt</a>+5, <a class=\"id\" href=\"#NULL\">NULL</a>, 0);", 
"<span class=\"ts\"/><span class=\"ts\"/>else if (!<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#this_opt\">this_opt</a>, \"stride:\", 7))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_linelength\">lfb_linelength</a> = <a class=\"id\" href=\"#simple_strtoul\">simple_strtoul</a>(<a class=\"id\" href=\"#this_opt\">this_opt</a>+7, <a class=\"id\" href=\"#NULL\">NULL</a>, 0) * 4;", 
"<span class=\"ts\"/><span class=\"ts\"/>else if (!<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#this_opt\">this_opt</a>, \"height:\", 7))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_height\">lfb_height</a> = <a class=\"id\" href=\"#simple_strtoul\">simple_strtoul</a>(<a class=\"id\" href=\"#this_opt\">this_opt</a>+7, <a class=\"id\" href=\"#NULL\">NULL</a>, 0);", 
"<span class=\"ts\"/><span class=\"ts\"/>else if (!<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#this_opt\">this_opt</a>, \"width:\", 6))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_width\">lfb_width</a> = <a class=\"id\" href=\"#simple_strtoul\">simple_strtoul</a>(<a class=\"id\" href=\"#this_opt\">this_opt</a>+6, <a class=\"id\" href=\"#NULL\">NULL</a>, 0);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#__devinit\">__devinit</a> <a class=\"id\" href=\"#efifb_probe\">efifb_probe</a>(struct <a class=\"id\" href=\"#platform_device\">platform_device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#fb_info\">fb_info</a> *<a class=\"id\" href=\"#info\">info</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#size_vmode\">size_vmode</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#size_remap\">size_remap</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#size_total\">size_total</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#request_succeeded\">request_succeeded</a> = 0;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_depth\">lfb_depth</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_depth\">lfb_depth</a> = 32;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#pages\">pages</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#pages\">pages</a> = 1;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_base\">lfb_base</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a> \"efifb: invalid framebuffer address\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"efifb: probing for efifb\\n\");", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* just assume they're all unset if any are */</span>", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#blue_size\">blue_size</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#blue_size\">blue_size</a> = 8;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#blue_pos\">blue_pos</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#green_size\">green_size</a> = 8;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#green_pos\">green_pos</a> = 8;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#red_size\">red_size</a> = 8;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#red_pos\">red_pos</a> = 16;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#rsvd_size\">rsvd_size</a> = 8;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#rsvd_pos\">rsvd_pos</a> = 24;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_fix\">efifb_fix</a>.<a class=\"id\" href=\"#smem_start\">smem_start</a> = <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_base\">lfb_base</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#bits_per_pixel\">bits_per_pixel</a> = <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_depth\">lfb_depth</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#xres\">xres</a> = <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_width\">lfb_width</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#yres\">yres</a> = <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_height\">lfb_height</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_fix\">efifb_fix</a>.<a class=\"id\" href=\"#line_length\">line_length</a> = <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_linelength\">lfb_linelength</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*   size_vmode -- that is the amount of memory needed for the</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *                 used video mode, i.e. the minimum amount of</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *                 memory we need. */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#size_vmode\">size_vmode</a> = <a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#yres\">yres</a> * <a class=\"id\" href=\"#efifb_fix\">efifb_fix</a>.<a class=\"id\" href=\"#line_length\">line_length</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*   size_total -- all video memory we have. Used for</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *                 entries, ressource allocation and bounds</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *                 checking. */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#size_total\">size_total</a> = <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_size\">lfb_size</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#size_total\">size_total</a> &lt; <a class=\"id\" href=\"#size_vmode\">size_vmode</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#size_total\">size_total</a> = <a class=\"id\" href=\"#size_vmode\">size_vmode</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*   size_remap -- the amount of video memory we are going to</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *                 use for efifb.  With modern cards it is no</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *                 option to simply use size_total as that</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *                 wastes plenty of kernel address space. */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#size_remap\">size_remap</a>  = <a class=\"id\" href=\"#size_vmode\">size_vmode</a> * 2;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#size_remap\">size_remap</a> &gt; <a class=\"id\" href=\"#size_total\">size_total</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#size_remap\">size_remap</a> = <a class=\"id\" href=\"#size_total\">size_total</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#size_remap\">size_remap</a> % <a class=\"id\" href=\"#PAGE_SIZE\">PAGE_SIZE</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#size_remap\">size_remap</a> += <a class=\"id\" href=\"#PAGE_SIZE\">PAGE_SIZE</a> - (<a class=\"id\" href=\"#size_remap\">size_remap</a> % <a class=\"id\" href=\"#PAGE_SIZE\">PAGE_SIZE</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_fix\">efifb_fix</a>.<a class=\"id\" href=\"#smem_len\">smem_len</a> = <a class=\"id\" href=\"#size_remap\">size_remap</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#request_mem_region\">request_mem_region</a>(<a class=\"id\" href=\"#efifb_fix\">efifb_fix</a>.<a class=\"id\" href=\"#smem_start\">smem_start</a>, <a class=\"id\" href=\"#size_remap\">size_remap</a>, \"efifb\")) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#request_succeeded\">request_succeeded</a> = 1;", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* We cannot make this fatal. Sometimes this comes from magic</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/>   spaces our resource handlers simply don't know about */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a>", 
"<span class=\"ts\"/><span class=\"ts\"/>       \"efifb: cannot reserve video memory at 0x%lx\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#efifb_fix\">efifb_fix</a>.<a class=\"id\" href=\"#smem_start\">smem_start</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a> = <a class=\"id\" href=\"#framebuffer_alloc\">framebuffer_alloc</a>(sizeof(<a class=\"id\" href=\"#u32\">u32</a>) * 16, &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#info\">info</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"efifb: cannot allocate framebuffer\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err_release_mem\">err_release_mem</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#pseudo_palette\">pseudo_palette</a> = <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#par\">par</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#par\">par</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#apertures\">apertures</a> = <a class=\"id\" href=\"#alloc_apertures\">alloc_apertures</a>(1);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#apertures\">apertures</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err_release_fb\">err_release_fb</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#apertures\">apertures</a>-><a class=\"id\" href=\"#ranges\">ranges</a>[0].<a class=\"id\" href=\"#base\">base</a> = <a class=\"id\" href=\"#efifb_fix\">efifb_fix</a>.<a class=\"id\" href=\"#smem_start\">smem_start</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#apertures\">apertures</a>-><a class=\"id\" href=\"#ranges\">ranges</a>[0].<a class=\"id\" href=\"#size\">size</a> = <a class=\"id\" href=\"#size_remap\">size_remap</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#screen_base\">screen_base</a> = <a class=\"id\" href=\"#ioremap\">ioremap</a>(<a class=\"id\" href=\"#efifb_fix\">efifb_fix</a>.<a class=\"id\" href=\"#smem_start\">smem_start</a>, <a class=\"id\" href=\"#efifb_fix\">efifb_fix</a>.<a class=\"id\" href=\"#smem_len\">smem_len</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#screen_base\">screen_base</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"efifb: abort, cannot ioremap video memory \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"0x%x @ 0x%lx\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#efifb_fix\">efifb_fix</a>.<a class=\"id\" href=\"#smem_len\">smem_len</a>, <a class=\"id\" href=\"#efifb_fix\">efifb_fix</a>.<a class=\"id\" href=\"#smem_start\">smem_start</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err_release_fb\">err_release_fb</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"efifb: framebuffer at 0x%lx, mapped to 0x%p, \"", 
"<span class=\"ts\"/>       \"using %dk, total %dk\\n\",", 
"<span class=\"ts\"/>       <a class=\"id\" href=\"#efifb_fix\">efifb_fix</a>.<a class=\"id\" href=\"#smem_start\">smem_start</a>, <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#screen_base\">screen_base</a>,", 
"<span class=\"ts\"/>       <a class=\"id\" href=\"#size_remap\">size_remap</a>/1024, <a class=\"id\" href=\"#size_total\">size_total</a>/1024);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"efifb: mode is %dx%dx%d, linelength=%d, pages=%d\\n\",", 
"<span class=\"ts\"/>       <a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#xres\">xres</a>, <a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#yres\">yres</a>,", 
"<span class=\"ts\"/>       <a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#bits_per_pixel\">bits_per_pixel</a>, <a class=\"id\" href=\"#efifb_fix\">efifb_fix</a>.<a class=\"id\" href=\"#line_length\">line_length</a>,", 
"<span class=\"ts\"/>       <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#pages\">pages</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#xres_virtual\">xres_virtual</a> = <a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#xres\">xres</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#yres_virtual\">yres_virtual</a> = <a class=\"id\" href=\"#efifb_fix\">efifb_fix</a>.<a class=\"id\" href=\"#smem_len\">smem_len</a> /", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#efifb_fix\">efifb_fix</a>.<a class=\"id\" href=\"#line_length\">line_length</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"efifb: scrolling: redraw\\n\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#yres_virtual\">yres_virtual</a> = <a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#yres\">yres</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* some dummy values for timing to make fbset happy */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#pixclock\">pixclock</a>     = 10000000 / <a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#xres\">xres</a> *", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>1000 / <a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#yres\">yres</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#left_margin\">left_margin</a>  = (<a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#xres\">xres</a> / 8) &amp; 0xf8;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#hsync_len\">hsync_len</a>    = (<a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#xres\">xres</a> / 8) &amp; 0xf8;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#red\">red</a>.<a class=\"id\" href=\"#offset\">offset</a>    = <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#red_pos\">red_pos</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#red\">red</a>.<a class=\"id\" href=\"#length\">length</a>    = <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#red_size\">red_size</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#green\">green</a>.<a class=\"id\" href=\"#offset\">offset</a>  = <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#green_pos\">green_pos</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#green\">green</a>.<a class=\"id\" href=\"#length\">length</a>  = <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#green_size\">green_size</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#blue\">blue</a>.<a class=\"id\" href=\"#offset\">offset</a>   = <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#blue_pos\">blue_pos</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#blue\">blue</a>.<a class=\"id\" href=\"#length\">length</a>   = <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#blue_size\">blue_size</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#transp\">transp</a>.<a class=\"id\" href=\"#offset\">offset</a> = <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#rsvd_pos\">rsvd_pos</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>.<a class=\"id\" href=\"#transp\">transp</a>.<a class=\"id\" href=\"#length\">length</a> = <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#rsvd_size\">rsvd_size</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"efifb: %s: \"", 
"<span class=\"ts\"/>       \"size=%d:%d:%d:%d, shift=%d:%d:%d:%d\\n\",", 
"<span class=\"ts\"/>       \"Truecolor\",", 
"<span class=\"ts\"/>       <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#rsvd_size\">rsvd_size</a>,", 
"<span class=\"ts\"/>       <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#red_size\">red_size</a>,", 
"<span class=\"ts\"/>       <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#green_size\">green_size</a>,", 
"<span class=\"ts\"/>       <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#blue_size\">blue_size</a>,", 
"<span class=\"ts\"/>       <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#rsvd_pos\">rsvd_pos</a>,", 
"<span class=\"ts\"/>       <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#red_pos\">red_pos</a>,", 
"<span class=\"ts\"/>       <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#green_pos\">green_pos</a>,", 
"<span class=\"ts\"/>       <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#blue_pos\">blue_pos</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_fix\">efifb_fix</a>.<a class=\"id\" href=\"#ypanstep\">ypanstep</a>  = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_fix\">efifb_fix</a>.<a class=\"id\" href=\"#ywrapstep\">ywrapstep</a> = 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#fbops\">fbops</a> = &amp;<a class=\"id\" href=\"#efifb_ops\">efifb_ops</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#var\">var</a> = <a class=\"id\" href=\"#efifb_defined\">efifb_defined</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#fix\">fix</a> = <a class=\"id\" href=\"#efifb_fix\">efifb_fix</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#flags\">flags</a> = <a class=\"id\" href=\"#FBINFO_FLAG_DEFAULT\">FBINFO_FLAG_DEFAULT</a> | <a class=\"id\" href=\"#FBINFO_MISC_FIRMWARE\">FBINFO_MISC_FIRMWARE</a>;", 
"", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#fb_alloc_cmap\">fb_alloc_cmap</a>(&amp;<a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#cmap\">cmap</a>, 256, 0)) &lt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"efifb: cannot allocate colormap\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err_unmap\">err_unmap</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#register_framebuffer\">register_framebuffer</a>(<a class=\"id\" href=\"#info\">info</a>)) &lt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"efifb: cannot register framebuffer\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err_fb_dealoc\">err_fb_dealoc</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"fb%d: %s frame buffer device\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#node\">node</a>, <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#fix\">fix</a>.<a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/>return 0;", 
"", 
"<a class=\"id\" href=\"#err_fb_dealoc\">err_fb_dealoc</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fb_dealloc_cmap\">fb_dealloc_cmap</a>(&amp;<a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#cmap\">cmap</a>);", 
"<a class=\"id\" href=\"#err_unmap\">err_unmap</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#iounmap\">iounmap</a>(<a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#screen_base\">screen_base</a>);", 
"<a class=\"id\" href=\"#err_release_fb\">err_release_fb</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#framebuffer_release\">framebuffer_release</a>(<a class=\"id\" href=\"#info\">info</a>);", 
"<a class=\"id\" href=\"#err_release_mem\">err_release_mem</a>:", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#request_succeeded\">request_succeeded</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#release_mem_region\">release_mem_region</a>(<a class=\"id\" href=\"#efifb_fix\">efifb_fix</a>.<a class=\"id\" href=\"#smem_start\">smem_start</a>, <a class=\"id\" href=\"#size_total\">size_total</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#platform_driver\">platform_driver</a> <a class=\"id\" href=\"#efifb_driver\">efifb_driver</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#probe\">probe</a><span class=\"ts\"/>= <a class=\"id\" href=\"#efifb_probe\">efifb_probe</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#driver\">driver</a><span class=\"ts\"/>= {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a><span class=\"ts\"/>= \"efifb\",", 
"<span class=\"ts\"/>},", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#platform_device\">platform_device</a> <a class=\"id\" href=\"#efifb_device\">efifb_device</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a><span class=\"ts\"/>= \"efifb\",", 
"};", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#efifb_init\">efifb_init</a>(void)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#option\">option</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dmi_check_system\">dmi_check_system</a>(<a class=\"id\" href=\"#dmi_system_table\">dmi_system_table</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#orig_video_isVGA\">orig_video_isVGA</a> != <a class=\"id\" href=\"#VIDEO_TYPE_EFI\">VIDEO_TYPE_EFI</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#fb_get_options\">fb_get_options</a>(\"efifb\", &amp;<a class=\"id\" href=\"#option\">option</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efifb_setup\">efifb_setup</a>(<a class=\"id\" href=\"#option\">option</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* We don't get linelength from UGA Draw Protocol, only from</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * EFI Graphics Protocol.  So if it's not in DMI, and it's not</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * passed in from the user, we really can't use the framebuffer.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#lfb_linelength\">lfb_linelength</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#platform_driver_register\">platform_driver_register</a>(&amp;<a class=\"id\" href=\"#efifb_driver\">efifb_driver</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#ret\">ret</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#platform_device_register\">platform_device_register</a>(&amp;<a class=\"id\" href=\"#efifb_device\">efifb_device</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#platform_driver_unregister\">platform_driver_unregister</a>(&amp;<a class=\"id\" href=\"#efifb_driver\">efifb_driver</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"<a class=\"id\" href=\"#module_init\">module_init</a>(<a class=\"id\" href=\"#efifb_init\">efifb_init</a>);", 
"", 
"<a class=\"id\" href=\"#MODULE_LICENSE\">MODULE_LICENSE</a>(\"GPL\");", 
];
xr_frag_insert('l/00/952a6eaf4f9a12b689b2bb977aefa661fea113.xr', __xr_tmp);
