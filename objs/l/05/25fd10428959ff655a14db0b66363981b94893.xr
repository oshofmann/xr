var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Fixed MDIO bus (MDIO bus emulation with fixed PHYs)</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Author: Vitaly Bordug &lt;vbordug@ru.mvista.com&gt;</span>", 
"<span class=\"comment\"> *         Anton Vorontsov &lt;avorontsov@ru.mvista.com&gt;</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Copyright (c) 2006-2007 MontaVista Software, Inc.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This program is free software; you can redistribute  it and/or modify it</span>", 
"<span class=\"comment\"> * under  the terms of  the GNU General  Public License as published by the</span>", 
"<span class=\"comment\"> * Free Software Foundation;  either version 2 of the  License, or (at your</span>", 
"<span class=\"comment\"> * option) any later version.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kernel\">kernel</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#platform_device\">platform_device</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#list\">list</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#mii\">mii</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#phy\">phy</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#phy_fixed\">phy_fixed</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#err\">err</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#slab\">slab</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#MII_REGS_NUM\">MII_REGS_NUM</a> 29", 
"", 
"struct <a class=\"id\" href=\"#fixed_mdio_bus\">fixed_mdio_bus</a> {", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#irqs\">irqs</a>[<a class=\"id\" href=\"#PHY_MAX_ADDR\">PHY_MAX_ADDR</a>];", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mii_bus\">mii_bus</a> *<a class=\"id\" href=\"#mii_bus\">mii_bus</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#list_head\">list_head</a> <a class=\"id\" href=\"#phys\">phys</a>;", 
"};", 
"", 
"struct <a class=\"id\" href=\"#fixed_phy\">fixed_phy</a> {", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#id\">id</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#regs\">regs</a>[<a class=\"id\" href=\"#MII_REGS_NUM\">MII_REGS_NUM</a>];", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#phy_device\">phy_device</a> *<a class=\"id\" href=\"#phydev\">phydev</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#fixed_phy_status\">fixed_phy_status</a> <a class=\"id\" href=\"#status\">status</a>;", 
"<span class=\"ts\"/>int (*<a class=\"id\" href=\"#link_update\">link_update</a>)(struct <a class=\"id\" href=\"#net_device\">net_device</a> *, struct <a class=\"id\" href=\"#fixed_phy_status\">fixed_phy_status</a> *);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#list_head\">list_head</a> <a class=\"id\" href=\"#node\">node</a>;", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#platform_device\">platform_device</a> *<a class=\"id\" href=\"#pdev\">pdev</a>;", 
"static struct <a class=\"id\" href=\"#fixed_mdio_bus\">fixed_mdio_bus</a> <a class=\"id\" href=\"#platform_fmb\">platform_fmb</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#phys\">phys</a> = <a class=\"id\" href=\"#LIST_HEAD_INIT\">LIST_HEAD_INIT</a>(<a class=\"id\" href=\"#platform_fmb\">platform_fmb</a>.<a class=\"id\" href=\"#phys\">phys</a>),", 
"};", 
"", 
"static int <a class=\"id\" href=\"#fixed_phy_update_regs\">fixed_phy_update_regs</a>(struct <a class=\"id\" href=\"#fixed_phy\">fixed_phy</a> *<a class=\"id\" href=\"#fp\">fp</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#bmsr\">bmsr</a> = <a class=\"id\" href=\"#BMSR_ANEGCAPABLE\">BMSR_ANEGCAPABLE</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#bmcr\">bmcr</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#lpagb\">lpagb</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#lpa\">lpa</a> = 0;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#status\">status</a>.<a class=\"id\" href=\"#duplex\">duplex</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bmcr\">bmcr</a> |= <a class=\"id\" href=\"#BMCR_FULLDPLX\">BMCR_FULLDPLX</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>switch (<a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#status\">status</a>.<a class=\"id\" href=\"#speed\">speed</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>case 1000:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bmsr\">bmsr</a> |= <a class=\"id\" href=\"#BMSR_ESTATEN\">BMSR_ESTATEN</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bmcr\">bmcr</a> |= <a class=\"id\" href=\"#BMCR_SPEED1000\">BMCR_SPEED1000</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#lpagb\">lpagb</a> |= <a class=\"id\" href=\"#LPA_1000FULL\">LPA_1000FULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 100:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bmsr\">bmsr</a> |= <a class=\"id\" href=\"#BMSR_100FULL\">BMSR_100FULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bmcr\">bmcr</a> |= <a class=\"id\" href=\"#BMCR_SPEED100\">BMCR_SPEED100</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#lpa\">lpa</a> |= <a class=\"id\" href=\"#LPA_100FULL\">LPA_100FULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 10:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bmsr\">bmsr</a> |= <a class=\"id\" href=\"#BMSR_10FULL\">BMSR_10FULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#lpa\">lpa</a> |= <a class=\"id\" href=\"#LPA_10FULL\">LPA_10FULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> \"fixed phy: unknown speed\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/>switch (<a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#status\">status</a>.<a class=\"id\" href=\"#speed\">speed</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>case 1000:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bmsr\">bmsr</a> |= <a class=\"id\" href=\"#BMSR_ESTATEN\">BMSR_ESTATEN</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bmcr\">bmcr</a> |= <a class=\"id\" href=\"#BMCR_SPEED1000\">BMCR_SPEED1000</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#lpagb\">lpagb</a> |= <a class=\"id\" href=\"#LPA_1000HALF\">LPA_1000HALF</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 100:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bmsr\">bmsr</a> |= <a class=\"id\" href=\"#BMSR_100HALF\">BMSR_100HALF</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bmcr\">bmcr</a> |= <a class=\"id\" href=\"#BMCR_SPEED100\">BMCR_SPEED100</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#lpa\">lpa</a> |= <a class=\"id\" href=\"#LPA_100HALF\">LPA_100HALF</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 10:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bmsr\">bmsr</a> |= <a class=\"id\" href=\"#BMSR_10HALF\">BMSR_10HALF</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#lpa\">lpa</a> |= <a class=\"id\" href=\"#LPA_10HALF\">LPA_10HALF</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> \"fixed phy: unknown speed\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#status\">status</a>.<a class=\"id\" href=\"#link\">link</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bmsr\">bmsr</a> |= <a class=\"id\" href=\"#BMSR_LSTATUS\">BMSR_LSTATUS</a> | <a class=\"id\" href=\"#BMSR_ANEGCOMPLETE\">BMSR_ANEGCOMPLETE</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#status\">status</a>.<a class=\"id\" href=\"#pause\">pause</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#lpa\">lpa</a> |= <a class=\"id\" href=\"#LPA_PAUSE_CAP\">LPA_PAUSE_CAP</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#status\">status</a>.<a class=\"id\" href=\"#asym_pause\">asym_pause</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#lpa\">lpa</a> |= <a class=\"id\" href=\"#LPA_PAUSE_ASYM\">LPA_PAUSE_ASYM</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#regs\">regs</a>[<a class=\"id\" href=\"#MII_PHYSID1\">MII_PHYSID1</a>] = <a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#id\">id</a> >> 16;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#regs\">regs</a>[<a class=\"id\" href=\"#MII_PHYSID2\">MII_PHYSID2</a>] = <a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#id\">id</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#regs\">regs</a>[<a class=\"id\" href=\"#MII_BMSR\">MII_BMSR</a>] = <a class=\"id\" href=\"#bmsr\">bmsr</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#regs\">regs</a>[<a class=\"id\" href=\"#MII_BMCR\">MII_BMCR</a>] = <a class=\"id\" href=\"#bmcr\">bmcr</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#regs\">regs</a>[<a class=\"id\" href=\"#MII_LPA\">MII_LPA</a>] = <a class=\"id\" href=\"#lpa\">lpa</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#regs\">regs</a>[<a class=\"id\" href=\"#MII_STAT1000\">MII_STAT1000</a>] = <a class=\"id\" href=\"#lpagb\">lpagb</a>;", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#fixed_mdio_read\">fixed_mdio_read</a>(struct <a class=\"id\" href=\"#mii_bus\">mii_bus</a> *<a class=\"id\" href=\"#bus\">bus</a>, int <a class=\"id\" href=\"#phy_id\">phy_id</a>, int <a class=\"id\" href=\"#reg_num\">reg_num</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#fixed_mdio_bus\">fixed_mdio_bus</a> *<a class=\"id\" href=\"#fmb\">fmb</a> = <a class=\"id\" href=\"#bus\">bus</a>-><a class=\"id\" href=\"#priv\">priv</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#fixed_phy\">fixed_phy</a> *<a class=\"id\" href=\"#fp\">fp</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#reg_num\">reg_num</a> >= <a class=\"id\" href=\"#MII_REGS_NUM\">MII_REGS_NUM</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#fp\">fp</a>, &amp;<a class=\"id\" href=\"#fmb\">fmb</a>-><a class=\"id\" href=\"#phys\">phys</a>, <a class=\"id\" href=\"#node\">node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#id\">id</a> == <a class=\"id\" href=\"#phy_id\">phy_id</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Issue callback if user registered it. */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#link_update\">link_update</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#link_update\">link_update</a>(<a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#phydev\">phydev</a>-><a class=\"id\" href=\"#attached_dev\">attached_dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>&amp;<a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#status\">status</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#fixed_phy_update_regs\">fixed_phy_update_regs</a>(<a class=\"id\" href=\"#fp\">fp</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#regs\">regs</a>[<a class=\"id\" href=\"#reg_num\">reg_num</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return 0xFFFF;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#fixed_mdio_write\">fixed_mdio_write</a>(struct <a class=\"id\" href=\"#mii_bus\">mii_bus</a> *<a class=\"id\" href=\"#bus\">bus</a>, int <a class=\"id\" href=\"#phy_id\">phy_id</a>, int <a class=\"id\" href=\"#reg_num\">reg_num</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#val\">val</a>)", 
"{", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * If something weird is required to be done with link/speed,</span>", 
"<span class=\"comment\"> * network driver is able to assign a function to implement this.</span>", 
"<span class=\"comment\"> * May be useful for PHY's that need to be software-driven.</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#fixed_phy_set_link_update\">fixed_phy_set_link_update</a>(struct <a class=\"id\" href=\"#phy_device\">phy_device</a> *<a class=\"id\" href=\"#phydev\">phydev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      int (*<a class=\"id\" href=\"#link_update\">link_update</a>)(struct <a class=\"id\" href=\"#net_device\">net_device</a> *,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> struct <a class=\"id\" href=\"#fixed_phy_status\">fixed_phy_status</a> *))", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#fixed_mdio_bus\">fixed_mdio_bus</a> *<a class=\"id\" href=\"#fmb\">fmb</a> = &amp;<a class=\"id\" href=\"#platform_fmb\">platform_fmb</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#fixed_phy\">fixed_phy</a> *<a class=\"id\" href=\"#fp\">fp</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#link_update\">link_update</a> || !<a class=\"id\" href=\"#phydev\">phydev</a> || !<a class=\"id\" href=\"#phydev\">phydev</a>-><a class=\"id\" href=\"#bus\">bus</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#fp\">fp</a>, &amp;<a class=\"id\" href=\"#fmb\">fmb</a>-><a class=\"id\" href=\"#phys\">phys</a>, <a class=\"id\" href=\"#node\">node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#id\">id</a> == <a class=\"id\" href=\"#phydev\">phydev</a>-><a class=\"id\" href=\"#phy_id\">phy_id</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#link_update\">link_update</a> = <a class=\"id\" href=\"#link_update\">link_update</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#phydev\">phydev</a> = <a class=\"id\" href=\"#phydev\">phydev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOENT\">ENOENT</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#fixed_phy_set_link_update\">fixed_phy_set_link_update</a>);", 
"", 
"int <a class=\"id\" href=\"#fixed_phy_add\">fixed_phy_add</a>(unsigned int <a class=\"id\" href=\"#irq\">irq</a>, int <a class=\"id\" href=\"#phy_id\">phy_id</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>  struct <a class=\"id\" href=\"#fixed_phy_status\">fixed_phy_status</a> *<a class=\"id\" href=\"#status\">status</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#fixed_mdio_bus\">fixed_mdio_bus</a> *<a class=\"id\" href=\"#fmb\">fmb</a> = &amp;<a class=\"id\" href=\"#platform_fmb\">platform_fmb</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#fixed_phy\">fixed_phy</a> *<a class=\"id\" href=\"#fp\">fp</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fp\">fp</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof(*<a class=\"id\" href=\"#fp\">fp</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#fp\">fp</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(<a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#regs\">regs</a>, 0xFF,  sizeof(<a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#regs\">regs</a>[0]) * <a class=\"id\" href=\"#MII_REGS_NUM\">MII_REGS_NUM</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fmb\">fmb</a>-><a class=\"id\" href=\"#irqs\">irqs</a>[<a class=\"id\" href=\"#phy_id\">phy_id</a>] = <a class=\"id\" href=\"#irq\">irq</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#id\">id</a> = <a class=\"id\" href=\"#phy_id\">phy_id</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#status\">status</a> = *<a class=\"id\" href=\"#status\">status</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#fixed_phy_update_regs\">fixed_phy_update_regs</a>(<a class=\"id\" href=\"#fp\">fp</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err_regs\">err_regs</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_add_tail\">list_add_tail</a>(&amp;<a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#node\">node</a>, &amp;<a class=\"id\" href=\"#fmb\">fmb</a>-><a class=\"id\" href=\"#phys\">phys</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"", 
"<a class=\"id\" href=\"#err_regs\">err_regs</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#fp\">fp</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#fixed_phy_add\">fixed_phy_add</a>);", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#fixed_mdio_bus_init\">fixed_mdio_bus_init</a>(void)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#fixed_mdio_bus\">fixed_mdio_bus</a> *<a class=\"id\" href=\"#fmb\">fmb</a> = &amp;<a class=\"id\" href=\"#platform_fmb\">platform_fmb</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pdev\">pdev</a> = <a class=\"id\" href=\"#platform_device_register_simple\">platform_device_register_simple</a>(\"Fixed MDIO bus\", 0, <a class=\"id\" href=\"#NULL\">NULL</a>, 0);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#IS_ERR\">IS_ERR</a>(<a class=\"id\" href=\"#pdev\">pdev</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#PTR_ERR\">PTR_ERR</a>(<a class=\"id\" href=\"#pdev\">pdev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err_pdev\">err_pdev</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fmb\">fmb</a>-><a class=\"id\" href=\"#mii_bus\">mii_bus</a> = <a class=\"id\" href=\"#mdiobus_alloc\">mdiobus_alloc</a>();", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#fmb\">fmb</a>-><a class=\"id\" href=\"#mii_bus\">mii_bus</a> == <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err_mdiobus_reg\">err_mdiobus_reg</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#snprintf\">snprintf</a>(<a class=\"id\" href=\"#fmb\">fmb</a>-><a class=\"id\" href=\"#mii_bus\">mii_bus</a>-><a class=\"id\" href=\"#id\">id</a>, <a class=\"id\" href=\"#MII_BUS_ID_SIZE\">MII_BUS_ID_SIZE</a>, \"0\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fmb\">fmb</a>-><a class=\"id\" href=\"#mii_bus\">mii_bus</a>-><a class=\"id\" href=\"#name\">name</a> = \"Fixed MDIO Bus\";", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fmb\">fmb</a>-><a class=\"id\" href=\"#mii_bus\">mii_bus</a>-><a class=\"id\" href=\"#priv\">priv</a> = <a class=\"id\" href=\"#fmb\">fmb</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fmb\">fmb</a>-><a class=\"id\" href=\"#mii_bus\">mii_bus</a>-><a class=\"id\" href=\"#parent\">parent</a> = &amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fmb\">fmb</a>-><a class=\"id\" href=\"#mii_bus\">mii_bus</a>-><a class=\"id\" href=\"#read\">read</a> = &amp;<a class=\"id\" href=\"#fixed_mdio_read\">fixed_mdio_read</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fmb\">fmb</a>-><a class=\"id\" href=\"#mii_bus\">mii_bus</a>-><a class=\"id\" href=\"#write\">write</a> = &amp;<a class=\"id\" href=\"#fixed_mdio_write\">fixed_mdio_write</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fmb\">fmb</a>-><a class=\"id\" href=\"#mii_bus\">mii_bus</a>-><a class=\"id\" href=\"#irq\">irq</a> = <a class=\"id\" href=\"#fmb\">fmb</a>-><a class=\"id\" href=\"#irqs\">irqs</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#mdiobus_register\">mdiobus_register</a>(<a class=\"id\" href=\"#fmb\">fmb</a>-><a class=\"id\" href=\"#mii_bus\">mii_bus</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err_mdiobus_alloc\">err_mdiobus_alloc</a>;", 
"", 
"<span class=\"ts\"/>return 0;", 
"", 
"<a class=\"id\" href=\"#err_mdiobus_alloc\">err_mdiobus_alloc</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mdiobus_free\">mdiobus_free</a>(<a class=\"id\" href=\"#fmb\">fmb</a>-><a class=\"id\" href=\"#mii_bus\">mii_bus</a>);", 
"<a class=\"id\" href=\"#err_mdiobus_reg\">err_mdiobus_reg</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#platform_device_unregister\">platform_device_unregister</a>(<a class=\"id\" href=\"#pdev\">pdev</a>);", 
"<a class=\"id\" href=\"#err_pdev\">err_pdev</a>:", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"<a class=\"id\" href=\"#module_init\">module_init</a>(<a class=\"id\" href=\"#fixed_mdio_bus_init\">fixed_mdio_bus_init</a>);", 
"", 
"static void <a class=\"id\" href=\"#__exit\">__exit</a> <a class=\"id\" href=\"#fixed_mdio_bus_exit\">fixed_mdio_bus_exit</a>(void)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#fixed_mdio_bus\">fixed_mdio_bus</a> *<a class=\"id\" href=\"#fmb\">fmb</a> = &amp;<a class=\"id\" href=\"#platform_fmb\">platform_fmb</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#fixed_phy\">fixed_phy</a> *<a class=\"id\" href=\"#fp\">fp</a>, *<a class=\"id\" href=\"#tmp\">tmp</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mdiobus_unregister\">mdiobus_unregister</a>(<a class=\"id\" href=\"#fmb\">fmb</a>-><a class=\"id\" href=\"#mii_bus\">mii_bus</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mdiobus_free\">mdiobus_free</a>(<a class=\"id\" href=\"#fmb\">fmb</a>-><a class=\"id\" href=\"#mii_bus\">mii_bus</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#platform_device_unregister\">platform_device_unregister</a>(<a class=\"id\" href=\"#pdev\">pdev</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry_safe\">list_for_each_entry_safe</a>(<a class=\"id\" href=\"#fp\">fp</a>, <a class=\"id\" href=\"#tmp\">tmp</a>, &amp;<a class=\"id\" href=\"#fmb\">fmb</a>-><a class=\"id\" href=\"#phys\">phys</a>, <a class=\"id\" href=\"#node\">node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_del\">list_del</a>(&amp;<a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#node\">node</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#fp\">fp</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"<a class=\"id\" href=\"#module_exit\">module_exit</a>(<a class=\"id\" href=\"#fixed_mdio_bus_exit\">fixed_mdio_bus_exit</a>);", 
"", 
"<a class=\"id\" href=\"#MODULE_DESCRIPTION\">MODULE_DESCRIPTION</a>(\"Fixed MDIO bus (MDIO bus emulation with fixed PHYs)\");", 
"<a class=\"id\" href=\"#MODULE_AUTHOR\">MODULE_AUTHOR</a>(\"Vitaly Bordug\");", 
"<a class=\"id\" href=\"#MODULE_LICENSE\">MODULE_LICENSE</a>(\"GPL\");", 
];
xr_frag_insert('l/05/25fd10428959ff655a14db0b66363981b94893.xr', __xr_tmp);
