var __xr_tmp = [
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#ds\">ds</a> || !<a class=\"id\" href=\"#x86_pmu\">x86_pmu</a>.<a class=\"id\" href=\"#pebs\">pebs</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#at\">at</a>  = (struct <a class=\"id\" href=\"#pebs_record_nhm\">pebs_record_nhm</a> *)(unsigned long)<a class=\"id\" href=\"#ds\">ds</a>-><a class=\"id\" href=\"#pebs_buffer_base\">pebs_buffer_base</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#top\">top</a> = (struct <a class=\"id\" href=\"#pebs_record_nhm\">pebs_record_nhm</a> *)(unsigned long)<a class=\"id\" href=\"#ds\">ds</a>-><a class=\"id\" href=\"#pebs_index\">pebs_index</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ds\">ds</a>-><a class=\"id\" href=\"#pebs_index\">pebs_index</a> = <a class=\"id\" href=\"#ds\">ds</a>-><a class=\"id\" href=\"#pebs_buffer_base\">pebs_buffer_base</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#n\">n</a> = <a class=\"id\" href=\"#top\">top</a> - <a class=\"id\" href=\"#at\">at</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#n\">n</a> <= 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Should not happen, we program the threshold at 1 and do not</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * set a reset value.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON_ONCE\">WARN_ON_ONCE</a>(<a class=\"id\" href=\"#n\">n</a> &gt; <a class=\"id\" href=\"#MAX_PEBS_EVENTS\">MAX_PEBS_EVENTS</a>);", 
"", 
"<span class=\"ts\"/>for ( ; <a class=\"id\" href=\"#at\">at</a> &lt; <a class=\"id\" href=\"#top\">top</a>; <a class=\"id\" href=\"#at\">at</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#for_each_set_bit\">for_each_set_bit</a>(<a class=\"id\" href=\"#bit\">bit</a>, (unsigned long *)&amp;<a class=\"id\" href=\"#at\">at</a>-><a class=\"id\" href=\"#status\">status</a>, <a class=\"id\" href=\"#MAX_PEBS_EVENTS\">MAX_PEBS_EVENTS</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#event\">event</a> = <a class=\"id\" href=\"#cpuc\">cpuc</a>-><a class=\"id\" href=\"#events\">events</a>[<a class=\"id\" href=\"#bit\">bit</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#bit\">bit</a>, <a class=\"id\" href=\"#cpuc\">cpuc</a>-><a class=\"id\" href=\"#active_mask\">active_mask</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON_ONCE\">WARN_ON_ONCE</a>(!<a class=\"id\" href=\"#event\">event</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#attr\">attr</a>.<a class=\"id\" href=\"#precise_ip\">precise_ip</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#__test_and_set_bit\">__test_and_set_bit</a>(<a class=\"id\" href=\"#bit\">bit</a>, (unsigned long *)&amp;<a class=\"id\" href=\"#status\">status</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#event\">event</a> || <a class=\"id\" href=\"#bit\">bit</a> >= <a class=\"id\" href=\"#MAX_PEBS_EVENTS\">MAX_PEBS_EVENTS</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__intel_pmu_pebs_event\">__intel_pmu_pebs_event</a>(<a class=\"id\" href=\"#event\">event</a>, <a class=\"id\" href=\"#iregs\">iregs</a>, <a class=\"id\" href=\"#at\">at</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * BTS, PEBS probe and setup</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static void <a class=\"id\" href=\"#intel_ds_init\">intel_ds_init</a>(void)", 
"{", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * No support for 32bit formats</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#boot_cpu_has\">boot_cpu_has</a>(<a class=\"id\" href=\"#X86_FEATURE_DTES64\">X86_FEATURE_DTES64</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#x86_pmu\">x86_pmu</a>.<a class=\"id\" href=\"#bts\">bts</a>  = <a class=\"id\" href=\"#boot_cpu_has\">boot_cpu_has</a>(<a class=\"id\" href=\"#X86_FEATURE_BTS\">X86_FEATURE_BTS</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#x86_pmu\">x86_pmu</a>.<a class=\"id\" href=\"#pebs\">pebs</a> = <a class=\"id\" href=\"#boot_cpu_has\">boot_cpu_has</a>(<a class=\"id\" href=\"#X86_FEATURE_PEBS\">X86_FEATURE_PEBS</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#x86_pmu\">x86_pmu</a>.<a class=\"id\" href=\"#pebs\">pebs</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>char <a class=\"id\" href=\"#pebs_type\">pebs_type</a> = <a class=\"id\" href=\"#x86_pmu\">x86_pmu</a>.<a class=\"id\" href=\"#intel_cap\">intel_cap</a>.<a class=\"id\" href=\"#pebs_trap\">pebs_trap</a> ?  '+' : '-';", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#format\">format</a> = <a class=\"id\" href=\"#x86_pmu\">x86_pmu</a>.<a class=\"id\" href=\"#intel_cap\">intel_cap</a>.<a class=\"id\" href=\"#pebs_format\">pebs_format</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>switch (<a class=\"id\" href=\"#format\">format</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>case 0:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_CONT\">KERN_CONT</a> \"PEBS fmt0%c, \", <a class=\"id\" href=\"#pebs_type\">pebs_type</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#x86_pmu\">x86_pmu</a>.<a class=\"id\" href=\"#pebs_record_size\">pebs_record_size</a> = sizeof(struct <a class=\"id\" href=\"#pebs_record_core\">pebs_record_core</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#x86_pmu\">x86_pmu</a>.<a class=\"id\" href=\"#drain_pebs\">drain_pebs</a> = <a class=\"id\" href=\"#intel_pmu_drain_pebs_core\">intel_pmu_drain_pebs_core</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#x86_pmu\">x86_pmu</a>.<a class=\"id\" href=\"#pebs_constraints\">pebs_constraints</a> = <a class=\"id\" href=\"#intel_core_pebs_events\">intel_core_pebs_events</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>case 1:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_CONT\">KERN_CONT</a> \"PEBS fmt1%c, \", <a class=\"id\" href=\"#pebs_type\">pebs_type</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#x86_pmu\">x86_pmu</a>.<a class=\"id\" href=\"#pebs_record_size\">pebs_record_size</a> = sizeof(struct <a class=\"id\" href=\"#pebs_record_nhm\">pebs_record_nhm</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#x86_pmu\">x86_pmu</a>.<a class=\"id\" href=\"#drain_pebs\">drain_pebs</a> = <a class=\"id\" href=\"#intel_pmu_drain_pebs_nhm\">intel_pmu_drain_pebs_nhm</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#x86_pmu\">x86_pmu</a>.<a class=\"id\" href=\"#pebs_constraints\">pebs_constraints</a> = <a class=\"id\" href=\"#intel_nehalem_pebs_events\">intel_nehalem_pebs_events</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_CONT\">KERN_CONT</a> \"no PEBS fmt%d%c, \", <a class=\"id\" href=\"#format\">format</a>, <a class=\"id\" href=\"#pebs_type\">pebs_type</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#x86_pmu\">x86_pmu</a>.<a class=\"id\" href=\"#pebs\">pebs</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"#else <span class=\"comment\">/* CONFIG_CPU_SUP_INTEL */</span>", 
"", 
"static int <a class=\"id\" href=\"#reserve_ds_buffers\">reserve_ds_buffers</a>(void)", 
"{", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#release_ds_buffers\">release_ds_buffers</a>(void)", 
"{", 
"}", 
"", 
"#<a class=\"id\" href=\"#endif\">endif</a> <span class=\"comment\">/* CONFIG_CPU_SUP_INTEL */</span>", 
];
xr_frag_insert('l/09/7ec749978dc71f7f14d10f25b0219d03e3bfdc.xr', __xr_tmp);
