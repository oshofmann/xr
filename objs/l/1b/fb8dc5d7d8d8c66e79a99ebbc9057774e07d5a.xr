var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * LED Triggers Core</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Copyright 2005-2007 Openedhand Ltd.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Author: Richard Purdie &lt;rpurdie@openedhand.com&gt;</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This program is free software; you can redistribute it and/or modify</span>", 
"<span class=\"comment\"> * it under the terms of the GNU General Public License version 2 as</span>", 
"<span class=\"comment\"> * published by the Free Software Foundation.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kernel\">kernel</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#init\">init</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#list\">list</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#spinlock\">spinlock</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#device\">device</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#sysdev\">sysdev</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#timer\">timer</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#rwsem\">rwsem</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#leds\">leds</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#slab\">slab</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> \"leds.h\"", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Nests outside led_cdev-&gt;trigger_lock</span>", 
"<span class=\"comment\"> */</span>", 
"static <a class=\"id\" href=\"#DECLARE_RWSEM\">DECLARE_RWSEM</a>(<a class=\"id\" href=\"#triggers_list_lock\">triggers_list_lock</a>);", 
"static <a class=\"id\" href=\"#LIST_HEAD\">LIST_HEAD</a>(<a class=\"id\" href=\"#trigger_list\">trigger_list</a>);", 
"", 
" <span class=\"comment\">/* Used by LED Class */</span>", 
"", 
"<a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#led_trigger_store\">led_trigger_store</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>const char *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#led_classdev\">led_classdev</a> *<a class=\"id\" href=\"#led_cdev\">led_cdev</a> = <a class=\"id\" href=\"#dev_get_drvdata\">dev_get_drvdata</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#trigger_name\">trigger_name</a>[<a class=\"id\" href=\"#TRIG_NAME_MAX\">TRIG_NAME_MAX</a>];", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#led_trigger\">led_trigger</a> *<a class=\"id\" href=\"#trig\">trig</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#len\">len</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#trigger_name\">trigger_name</a>[sizeof(<a class=\"id\" href=\"#trigger_name\">trigger_name</a>) - 1] = '\\0';", 
"<span class=\"ts\"/><a class=\"id\" href=\"#strncpy\">strncpy</a>(<a class=\"id\" href=\"#trigger_name\">trigger_name</a>, <a class=\"id\" href=\"#buf\">buf</a>, sizeof(<a class=\"id\" href=\"#trigger_name\">trigger_name</a>) - 1);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a> = <a class=\"id\" href=\"#strlen\">strlen</a>(<a class=\"id\" href=\"#trigger_name\">trigger_name</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#len\">len</a> && <a class=\"id\" href=\"#trigger_name\">trigger_name</a>[<a class=\"id\" href=\"#len\">len</a> - 1] == '\\n')", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#trigger_name\">trigger_name</a>[<a class=\"id\" href=\"#len\">len</a> - 1] = '\\0';", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#strcmp\">strcmp</a>(<a class=\"id\" href=\"#trigger_name\">trigger_name</a>, \"none\")) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#led_trigger_remove\">led_trigger_remove</a>(<a class=\"id\" href=\"#led_cdev\">led_cdev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#count\">count</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#down_read\">down_read</a>(&amp;<a class=\"id\" href=\"#triggers_list_lock\">triggers_list_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#trig\">trig</a>, &amp;<a class=\"id\" href=\"#trigger_list\">trigger_list</a>, <a class=\"id\" href=\"#next_trig\">next_trig</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#strcmp\">strcmp</a>(<a class=\"id\" href=\"#trigger_name\">trigger_name</a>, <a class=\"id\" href=\"#trig\">trig</a>-><a class=\"id\" href=\"#name\">name</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#down_write\">down_write</a>(&amp;<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger_lock\">trigger_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#led_trigger_set\">led_trigger_set</a>(<a class=\"id\" href=\"#led_cdev\">led_cdev</a>, <a class=\"id\" href=\"#trig\">trig</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#up_write\">up_write</a>(&amp;<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger_lock\">trigger_lock</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#up_read\">up_read</a>(&amp;<a class=\"id\" href=\"#triggers_list_lock\">triggers_list_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#count\">count</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#up_read\">up_read</a>(&amp;<a class=\"id\" href=\"#triggers_list_lock\">triggers_list_lock</a>);", 
"", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#led_trigger_store\">led_trigger_store</a>);", 
"", 
"<a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#led_trigger_show\">led_trigger_show</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#led_classdev\">led_classdev</a> *<a class=\"id\" href=\"#led_cdev\">led_cdev</a> = <a class=\"id\" href=\"#dev_get_drvdata\">dev_get_drvdata</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#led_trigger\">led_trigger</a> *<a class=\"id\" href=\"#trig\">trig</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#len\">len</a> = 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#down_read\">down_read</a>(&amp;<a class=\"id\" href=\"#triggers_list_lock\">triggers_list_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#down_read\">down_read</a>(&amp;<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger_lock\">trigger_lock</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger\">trigger</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a> += <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>+<a class=\"id\" href=\"#len\">len</a>, \"[none] \");", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a> += <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>+<a class=\"id\" href=\"#len\">len</a>, \"none \");", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#trig\">trig</a>, &amp;<a class=\"id\" href=\"#trigger_list\">trigger_list</a>, <a class=\"id\" href=\"#next_trig\">next_trig</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger\">trigger</a> && !<a class=\"id\" href=\"#strcmp\">strcmp</a>(<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger\">trigger</a>-><a class=\"id\" href=\"#name\">name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#trig\">trig</a>-><a class=\"id\" href=\"#name\">name</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a> += <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>+<a class=\"id\" href=\"#len\">len</a>, \"[%s] \", <a class=\"id\" href=\"#trig\">trig</a>-><a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a> += <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>+<a class=\"id\" href=\"#len\">len</a>, \"%s \", <a class=\"id\" href=\"#trig\">trig</a>-><a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#up_read\">up_read</a>(&amp;<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger_lock\">trigger_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#up_read\">up_read</a>(&amp;<a class=\"id\" href=\"#triggers_list_lock\">triggers_list_lock</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a> += <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#len\">len</a>+<a class=\"id\" href=\"#buf\">buf</a>, \"\\n\");", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#len\">len</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#led_trigger_show\">led_trigger_show</a>);", 
"", 
"<span class=\"comment\">/* Caller must ensure led_cdev-&gt;trigger_lock held */</span>", 
"void <a class=\"id\" href=\"#led_trigger_set\">led_trigger_set</a>(struct <a class=\"id\" href=\"#led_classdev\">led_classdev</a> *<a class=\"id\" href=\"#led_cdev\">led_cdev</a>, struct <a class=\"id\" href=\"#led_trigger\">led_trigger</a> *<a class=\"id\" href=\"#trigger\">trigger</a>)", 
"{", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Remove any existing trigger */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger\">trigger</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#write_lock_irqsave\">write_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger\">trigger</a>-><a class=\"id\" href=\"#leddev_list_lock\">leddev_list_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_del\">list_del</a>(&amp;<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trig_list\">trig_list</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#write_unlock_irqrestore\">write_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger\">trigger</a>-><a class=\"id\" href=\"#leddev_list_lock\">leddev_list_lock</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger\">trigger</a>-><a class=\"id\" href=\"#deactivate\">deactivate</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger\">trigger</a>-><a class=\"id\" href=\"#deactivate\">deactivate</a>(<a class=\"id\" href=\"#led_cdev\">led_cdev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger\">trigger</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#led_set_brightness\">led_set_brightness</a>(<a class=\"id\" href=\"#led_cdev\">led_cdev</a>, <a class=\"id\" href=\"#LED_OFF\">LED_OFF</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#trigger\">trigger</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#write_lock_irqsave\">write_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#trigger\">trigger</a>-><a class=\"id\" href=\"#leddev_list_lock\">leddev_list_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_add_tail\">list_add_tail</a>(&amp;<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trig_list\">trig_list</a>, &amp;<a class=\"id\" href=\"#trigger\">trigger</a>-><a class=\"id\" href=\"#led_cdevs\">led_cdevs</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#write_unlock_irqrestore\">write_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#trigger\">trigger</a>-><a class=\"id\" href=\"#leddev_list_lock\">leddev_list_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger\">trigger</a> = <a class=\"id\" href=\"#trigger\">trigger</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#trigger\">trigger</a>-><a class=\"id\" href=\"#activate\">activate</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#trigger\">trigger</a>-><a class=\"id\" href=\"#activate\">activate</a>(<a class=\"id\" href=\"#led_cdev\">led_cdev</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#led_trigger_set\">led_trigger_set</a>);", 
"", 
"void <a class=\"id\" href=\"#led_trigger_remove\">led_trigger_remove</a>(struct <a class=\"id\" href=\"#led_classdev\">led_classdev</a> *<a class=\"id\" href=\"#led_cdev\">led_cdev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#down_write\">down_write</a>(&amp;<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger_lock\">trigger_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#led_trigger_set\">led_trigger_set</a>(<a class=\"id\" href=\"#led_cdev\">led_cdev</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#up_write\">up_write</a>(&amp;<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger_lock\">trigger_lock</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#led_trigger_remove\">led_trigger_remove</a>);", 
"", 
"void <a class=\"id\" href=\"#led_trigger_set_default\">led_trigger_set_default</a>(struct <a class=\"id\" href=\"#led_classdev\">led_classdev</a> *<a class=\"id\" href=\"#led_cdev\">led_cdev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#led_trigger\">led_trigger</a> *<a class=\"id\" href=\"#trig\">trig</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#default_trigger\">default_trigger</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#down_read\">down_read</a>(&amp;<a class=\"id\" href=\"#triggers_list_lock\">triggers_list_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#down_write\">down_write</a>(&amp;<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger_lock\">trigger_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#trig\">trig</a>, &amp;<a class=\"id\" href=\"#trigger_list\">trigger_list</a>, <a class=\"id\" href=\"#next_trig\">next_trig</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#strcmp\">strcmp</a>(<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#default_trigger\">default_trigger</a>, <a class=\"id\" href=\"#trig\">trig</a>-><a class=\"id\" href=\"#name\">name</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#led_trigger_set\">led_trigger_set</a>(<a class=\"id\" href=\"#led_cdev\">led_cdev</a>, <a class=\"id\" href=\"#trig\">trig</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#up_write\">up_write</a>(&amp;<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger_lock\">trigger_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#up_read\">up_read</a>(&amp;<a class=\"id\" href=\"#triggers_list_lock\">triggers_list_lock</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#led_trigger_set_default\">led_trigger_set_default</a>);", 
"", 
"<span class=\"comment\">/* LED Trigger Interface */</span>", 
"", 
"int <a class=\"id\" href=\"#led_trigger_register\">led_trigger_register</a>(struct <a class=\"id\" href=\"#led_trigger\">led_trigger</a> *<a class=\"id\" href=\"#trigger\">trigger</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#led_classdev\">led_classdev</a> *<a class=\"id\" href=\"#led_cdev\">led_cdev</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#led_trigger\">led_trigger</a> *<a class=\"id\" href=\"#trig\">trig</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rwlock_init\">rwlock_init</a>(&amp;<a class=\"id\" href=\"#trigger\">trigger</a>-><a class=\"id\" href=\"#leddev_list_lock\">leddev_list_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#INIT_LIST_HEAD\">INIT_LIST_HEAD</a>(&amp;<a class=\"id\" href=\"#trigger\">trigger</a>-><a class=\"id\" href=\"#led_cdevs\">led_cdevs</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#down_write\">down_write</a>(&amp;<a class=\"id\" href=\"#triggers_list_lock\">triggers_list_lock</a>);", 
"<span class=\"ts\"/><span class=\"comment\">/* Make sure the trigger's name isn't already in use */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#trig\">trig</a>, &amp;<a class=\"id\" href=\"#trigger_list\">trigger_list</a>, <a class=\"id\" href=\"#next_trig\">next_trig</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#strcmp\">strcmp</a>(<a class=\"id\" href=\"#trig\">trig</a>-><a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#trigger\">trigger</a>-><a class=\"id\" href=\"#name\">name</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#up_write\">up_write</a>(&amp;<a class=\"id\" href=\"#triggers_list_lock\">triggers_list_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EEXIST\">EEXIST</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"comment\">/* Add to the list of led triggers */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_add_tail\">list_add_tail</a>(&amp;<a class=\"id\" href=\"#trigger\">trigger</a>-><a class=\"id\" href=\"#next_trig\">next_trig</a>, &amp;<a class=\"id\" href=\"#trigger_list\">trigger_list</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#up_write\">up_write</a>(&amp;<a class=\"id\" href=\"#triggers_list_lock\">triggers_list_lock</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Register with any LEDs that have this as a default trigger */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#down_read\">down_read</a>(&amp;<a class=\"id\" href=\"#leds_list_lock\">leds_list_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#led_cdev\">led_cdev</a>, &amp;<a class=\"id\" href=\"#leds_list\">leds_list</a>, <a class=\"id\" href=\"#node\">node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#down_write\">down_write</a>(&amp;<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger_lock\">trigger_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger\">trigger</a> && <a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#default_trigger\">default_trigger</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    !<a class=\"id\" href=\"#strcmp\">strcmp</a>(<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#default_trigger\">default_trigger</a>, <a class=\"id\" href=\"#trigger\">trigger</a>-><a class=\"id\" href=\"#name\">name</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#led_trigger_set\">led_trigger_set</a>(<a class=\"id\" href=\"#led_cdev\">led_cdev</a>, <a class=\"id\" href=\"#trigger\">trigger</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#up_write\">up_write</a>(&amp;<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger_lock\">trigger_lock</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#up_read\">up_read</a>(&amp;<a class=\"id\" href=\"#leds_list_lock\">leds_list_lock</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#led_trigger_register\">led_trigger_register</a>);", 
"", 
"void <a class=\"id\" href=\"#led_trigger_unregister\">led_trigger_unregister</a>(struct <a class=\"id\" href=\"#led_trigger\">led_trigger</a> *<a class=\"id\" href=\"#trigger\">trigger</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#led_classdev\">led_classdev</a> *<a class=\"id\" href=\"#led_cdev\">led_cdev</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Remove from the list of led triggers */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#down_write\">down_write</a>(&amp;<a class=\"id\" href=\"#triggers_list_lock\">triggers_list_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_del\">list_del</a>(&amp;<a class=\"id\" href=\"#trigger\">trigger</a>-><a class=\"id\" href=\"#next_trig\">next_trig</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#up_write\">up_write</a>(&amp;<a class=\"id\" href=\"#triggers_list_lock\">triggers_list_lock</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Remove anyone actively using this trigger */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#down_read\">down_read</a>(&amp;<a class=\"id\" href=\"#leds_list_lock\">leds_list_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#led_cdev\">led_cdev</a>, &amp;<a class=\"id\" href=\"#leds_list\">leds_list</a>, <a class=\"id\" href=\"#node\">node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#down_write\">down_write</a>(&amp;<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger_lock\">trigger_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger\">trigger</a> == <a class=\"id\" href=\"#trigger\">trigger</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#led_trigger_set\">led_trigger_set</a>(<a class=\"id\" href=\"#led_cdev\">led_cdev</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#up_write\">up_write</a>(&amp;<a class=\"id\" href=\"#led_cdev\">led_cdev</a>-><a class=\"id\" href=\"#trigger_lock\">trigger_lock</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#up_read\">up_read</a>(&amp;<a class=\"id\" href=\"#leds_list_lock\">leds_list_lock</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#led_trigger_unregister\">led_trigger_unregister</a>);", 
"", 
"<span class=\"comment\">/* Simple LED Tigger Interface */</span>", 
"", 
"void <a class=\"id\" href=\"#led_trigger_event\">led_trigger_event</a>(struct <a class=\"id\" href=\"#led_trigger\">led_trigger</a> *<a class=\"id\" href=\"#trigger\">trigger</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>enum <a class=\"id\" href=\"#led_brightness\">led_brightness</a> <a class=\"id\" href=\"#brightness\">brightness</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#list_head\">list_head</a> *<a class=\"id\" href=\"#entry\">entry</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#trigger\">trigger</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#read_lock\">read_lock</a>(&amp;<a class=\"id\" href=\"#trigger\">trigger</a>-><a class=\"id\" href=\"#leddev_list_lock\">leddev_list_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each\">list_for_each</a>(<a class=\"id\" href=\"#entry\">entry</a>, &amp;<a class=\"id\" href=\"#trigger\">trigger</a>-><a class=\"id\" href=\"#led_cdevs\">led_cdevs</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#led_classdev\">led_classdev</a> *<a class=\"id\" href=\"#led_cdev\">led_cdev</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#led_cdev\">led_cdev</a> = <a class=\"id\" href=\"#list_entry\">list_entry</a>(<a class=\"id\" href=\"#entry\">entry</a>, struct <a class=\"id\" href=\"#led_classdev\">led_classdev</a>, <a class=\"id\" href=\"#trig_list\">trig_list</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#led_set_brightness\">led_set_brightness</a>(<a class=\"id\" href=\"#led_cdev\">led_cdev</a>, <a class=\"id\" href=\"#brightness\">brightness</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#read_unlock\">read_unlock</a>(&amp;<a class=\"id\" href=\"#trigger\">trigger</a>-><a class=\"id\" href=\"#leddev_list_lock\">leddev_list_lock</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#led_trigger_event\">led_trigger_event</a>);", 
"", 
"void <a class=\"id\" href=\"#led_trigger_register_simple\">led_trigger_register_simple</a>(const char *<a class=\"id\" href=\"#name\">name</a>, struct <a class=\"id\" href=\"#led_trigger\">led_trigger</a> **<a class=\"id\" href=\"#tp\">tp</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#led_trigger\">led_trigger</a> *<a class=\"id\" href=\"#trigger\">trigger</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#trigger\">trigger</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof(struct <a class=\"id\" href=\"#led_trigger\">led_trigger</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#trigger\">trigger</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#trigger\">trigger</a>-><a class=\"id\" href=\"#name\">name</a> = <a class=\"id\" href=\"#name\">name</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#led_trigger_register\">led_trigger_register</a>(<a class=\"id\" href=\"#trigger\">trigger</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> \"LED trigger %s failed to register\"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\" (%d)\\n\", <a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#err\">err</a>);", 
"<span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> \"LED trigger %s failed to register\"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\" (no memory)\\n\", <a class=\"id\" href=\"#name\">name</a>);", 
"", 
"<span class=\"ts\"/>*<a class=\"id\" href=\"#tp\">tp</a> = <a class=\"id\" href=\"#trigger\">trigger</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#led_trigger_register_simple\">led_trigger_register_simple</a>);", 
"", 
"void <a class=\"id\" href=\"#led_trigger_unregister_simple\">led_trigger_unregister_simple</a>(struct <a class=\"id\" href=\"#led_trigger\">led_trigger</a> *<a class=\"id\" href=\"#trigger\">trigger</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#trigger\">trigger</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#led_trigger_unregister\">led_trigger_unregister</a>(<a class=\"id\" href=\"#trigger\">trigger</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#trigger\">trigger</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#led_trigger_unregister_simple\">led_trigger_unregister_simple</a>);", 
"", 
"<a class=\"id\" href=\"#MODULE_AUTHOR\">MODULE_AUTHOR</a>(\"Richard Purdie\");", 
"<a class=\"id\" href=\"#MODULE_LICENSE\">MODULE_LICENSE</a>(\"GPL\");", 
"<a class=\"id\" href=\"#MODULE_DESCRIPTION\">MODULE_DESCRIPTION</a>(\"LED Triggers Core\");", 
];
xr_frag_insert('l/1b/fb8dc5d7d8d8c66e79a99ebbc9057774e07d5a.xr', __xr_tmp);
