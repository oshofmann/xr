var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> *  battery.c - ACPI Battery Driver (Revision: 2.0)</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *  Copyright (C) 2007 Alexey Starikovskiy &lt;astarikovskiy@suse.de&gt;</span>", 
"<span class=\"comment\"> *  Copyright (C) 2004-2007 Vladimir Lebedev &lt;vladimir.p.lebedev@intel.com&gt;</span>", 
"<span class=\"comment\"> *  Copyright (C) 2001, 2002 Andy Grover &lt;andrew.grover@intel.com&gt;</span>", 
"<span class=\"comment\"> *  Copyright (C) 2001, 2002 Paul Diefenbaugh &lt;paul.s.diefenbaugh@intel.com&gt;</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *  This program is free software; you can redistribute it and/or modify</span>", 
"<span class=\"comment\"> *  it under the terms of the GNU General Public License as published by</span>", 
"<span class=\"comment\"> *  the Free Software Foundation; either version 2 of the License, or (at</span>", 
"<span class=\"comment\"> *  your option) any later version.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *  This program is distributed in the hope that it will be useful, but</span>", 
"<span class=\"comment\"> *  WITHOUT ANY WARRANTY; without even the implied warranty of</span>", 
"<span class=\"comment\"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>", 
"<span class=\"comment\"> *  General Public License for more details.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *  You should have received a copy of the GNU General Public License along</span>", 
"<span class=\"comment\"> *  with this program; if not, write to the Free Software Foundation, Inc.,</span>", 
"<span class=\"comment\"> *  59 Temple Place, Suite 330, Boston, MA 02111-1307 USA.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kernel\">kernel</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#init\">init</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#types\">types</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#jiffies\">jiffies</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#async\">async</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#dmi\">dmi</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#slab\">slab</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_ACPI_PROCFS_POWER\">CONFIG_ACPI_PROCFS_POWER</a>", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#proc_fs\">proc_fs</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#seq_file\">seq_file</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#uaccess\">uaccess</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#acpi\">acpi</a>/<a class=\"id\" href=\"#acpi_bus\">acpi_bus</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#acpi\">acpi</a>/<a class=\"id\" href=\"#acpi_drivers\">acpi_drivers</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_ACPI_SYSFS_POWER\">CONFIG_ACPI_SYSFS_POWER</a>", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#power_supply\">power_supply</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"ACPI: \"", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ACPI_BATTERY_VALUE_UNKNOWN\">ACPI_BATTERY_VALUE_UNKNOWN</a> 0xFFFFFFFF", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ACPI_BATTERY_CLASS\">ACPI_BATTERY_CLASS</a><span class=\"ts\"/><span class=\"ts\"/>\"battery\"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ACPI_BATTERY_DEVICE_NAME\">ACPI_BATTERY_DEVICE_NAME</a><span class=\"ts\"/>\"Battery\"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ACPI_BATTERY_NOTIFY_STATUS\">ACPI_BATTERY_NOTIFY_STATUS</a><span class=\"ts\"/>0x80", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ACPI_BATTERY_NOTIFY_INFO\">ACPI_BATTERY_NOTIFY_INFO</a><span class=\"ts\"/>0x81", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ACPI_BATTERY_NOTIFY_THRESHOLD\">ACPI_BATTERY_NOTIFY_THRESHOLD</a>   0x82", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#_COMPONENT\">_COMPONENT</a><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ACPI_BATTERY_COMPONENT\">ACPI_BATTERY_COMPONENT</a>", 
"", 
"<a class=\"id\" href=\"#ACPI_MODULE_NAME\">ACPI_MODULE_NAME</a>(\"battery\");", 
"", 
"<a class=\"id\" href=\"#MODULE_AUTHOR\">MODULE_AUTHOR</a>(\"Paul Diefenbaugh\");", 
"<a class=\"id\" href=\"#MODULE_AUTHOR\">MODULE_AUTHOR</a>(\"Alexey Starikovskiy <astarikovskiy@suse.de>\");", 
"<a class=\"id\" href=\"#MODULE_DESCRIPTION\">MODULE_DESCRIPTION</a>(\"ACPI Battery Driver\");", 
"<a class=\"id\" href=\"#MODULE_LICENSE\">MODULE_LICENSE</a>(\"GPL\");", 
"", 
"static unsigned int <a class=\"id\" href=\"#cache_time\">cache_time</a> = 1000;", 
"<a class=\"id\" href=\"#module_param\">module_param</a>(<a class=\"id\" href=\"#cache_time\">cache_time</a>, <a class=\"id\" href=\"#uint\">uint</a>, 0644);", 
"<a class=\"id\" href=\"#MODULE_PARM_DESC\">MODULE_PARM_DESC</a>(<a class=\"id\" href=\"#cache_time\">cache_time</a>, \"cache time in milliseconds\");", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_ACPI_PROCFS_POWER\">CONFIG_ACPI_PROCFS_POWER</a>", 
"extern struct <a class=\"id\" href=\"#proc_dir_entry\">proc_dir_entry</a> *<a class=\"id\" href=\"#acpi_lock_battery_dir\">acpi_lock_battery_dir</a>(void);", 
"extern void *<a class=\"id\" href=\"#acpi_unlock_battery_dir\">acpi_unlock_battery_dir</a>(struct <a class=\"id\" href=\"#proc_dir_entry\">proc_dir_entry</a> *<a class=\"id\" href=\"#acpi_battery_dir\">acpi_battery_dir</a>);", 
"", 
"enum <a class=\"id\" href=\"#acpi_battery_files\">acpi_battery_files</a> {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#info_tag\">info_tag</a> = 0,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#state_tag\">state_tag</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#alarm_tag\">alarm_tag</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ACPI_BATTERY_NUMFILES\">ACPI_BATTERY_NUMFILES</a>,", 
"};", 
"", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"static const struct <a class=\"id\" href=\"#acpi_device_id\">acpi_device_id</a> <a class=\"id\" href=\"#battery_device_ids\">battery_device_ids</a>[] = {", 
"<span class=\"ts\"/>{\"PNP0C0A\", 0},", 
"<span class=\"ts\"/>{\"\", 0},", 
"};", 
"", 
"<a class=\"id\" href=\"#MODULE_DEVICE_TABLE\">MODULE_DEVICE_TABLE</a>(<a class=\"id\" href=\"#acpi\">acpi</a>, <a class=\"id\" href=\"#battery_device_ids\">battery_device_ids</a>);", 
"", 
"enum {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ACPI_BATTERY_ALARM_PRESENT\">ACPI_BATTERY_ALARM_PRESENT</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ACPI_BATTERY_XINFO_PRESENT\">ACPI_BATTERY_XINFO_PRESENT</a>,", 
"<span class=\"ts\"/><span class=\"comment\">/* For buggy DSDTs that report negative 16-bit values for either</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * charging or discharging current and/or report 0 as 65536</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * due to bad math.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ACPI_BATTERY_QUIRK_SIGNED16_CURRENT\">ACPI_BATTERY_QUIRK_SIGNED16_CURRENT</a>,", 
"};", 
"", 
"struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> {", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mutex\">mutex</a> <a class=\"id\" href=\"#lock\">lock</a>;", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_ACPI_SYSFS_POWER\">CONFIG_ACPI_SYSFS_POWER</a>", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#power_supply\">power_supply</a> <a class=\"id\" href=\"#bat\">bat</a>;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_device\">acpi_device</a> *<a class=\"id\" href=\"#device\">device</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#update_time\">update_time</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rate_now\">rate_now</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#capacity_now\">capacity_now</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#voltage_now\">voltage_now</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#design_capacity\">design_capacity</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#full_charge_capacity\">full_charge_capacity</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#technology\">technology</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#design_voltage\">design_voltage</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#design_capacity_warning\">design_capacity_warning</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#design_capacity_low\">design_capacity_low</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#cycle_count\">cycle_count</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#measurement_accuracy\">measurement_accuracy</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#max_sampling_time\">max_sampling_time</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#min_sampling_time\">min_sampling_time</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#max_averaging_interval\">max_averaging_interval</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#min_averaging_interval\">min_averaging_interval</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#capacity_granularity_1\">capacity_granularity_1</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#capacity_granularity_2\">capacity_granularity_2</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#alarm\">alarm</a>;", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#model_number\">model_number</a>[32];", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#serial_number\">serial_number</a>[32];", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#type\">type</a>[32];", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#oem_info\">oem_info</a>[32];", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#state\">state</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#power_unit\">power_unit</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"};", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#to_acpi_battery\">to_acpi_battery</a>(<a class=\"id\" href=\"#x\">x</a>) <a class=\"id\" href=\"#container_of\">container_of</a>(<a class=\"id\" href=\"#x\">x</a>, struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#bat\">bat</a>);", 
"", 
"<a class=\"id\" href=\"#inline\">inline</a> int <a class=\"id\" href=\"#acpi_battery_present\">acpi_battery_present</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#status\">status</a>.<a class=\"id\" href=\"#battery_present\">battery_present</a>;", 
"}", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_ACPI_SYSFS_POWER\">CONFIG_ACPI_SYSFS_POWER</a>", 
"static int <a class=\"id\" href=\"#acpi_battery_technology\">acpi_battery_technology</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a>)", 
"{", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#strcasecmp\">strcasecmp</a>(\"NiCd\", <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#type\">type</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#POWER_SUPPLY_TECHNOLOGY_NiCd\">POWER_SUPPLY_TECHNOLOGY_NiCd</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#strcasecmp\">strcasecmp</a>(\"NiMH\", <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#type\">type</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#POWER_SUPPLY_TECHNOLOGY_NiMH\">POWER_SUPPLY_TECHNOLOGY_NiMH</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#strcasecmp\">strcasecmp</a>(\"LION\", <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#type\">type</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#POWER_SUPPLY_TECHNOLOGY_LION\">POWER_SUPPLY_TECHNOLOGY_LION</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#strncasecmp\">strncasecmp</a>(\"LI-ION\", <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#type\">type</a>, 6))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#POWER_SUPPLY_TECHNOLOGY_LION\">POWER_SUPPLY_TECHNOLOGY_LION</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#strcasecmp\">strcasecmp</a>(\"LiP\", <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#type\">type</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#POWER_SUPPLY_TECHNOLOGY_LIPO\">POWER_SUPPLY_TECHNOLOGY_LIPO</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#POWER_SUPPLY_TECHNOLOGY_UNKNOWN\">POWER_SUPPLY_TECHNOLOGY_UNKNOWN</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#acpi_battery_get_state\">acpi_battery_get_state</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a>);", 
"", 
"static int <a class=\"id\" href=\"#acpi_battery_is_charged\">acpi_battery_is_charged</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a>)", 
"{", 
"<span class=\"ts\"/><span class=\"comment\">/* either charging or discharging */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#state\">state</a> != 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* battery not reporting charge */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#capacity_now\">capacity_now</a> == <a class=\"id\" href=\"#ACPI_BATTERY_VALUE_UNKNOWN\">ACPI_BATTERY_VALUE_UNKNOWN</a> ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#capacity_now\">capacity_now</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* good batteries update full_charge as the batteries degrade */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#full_charge_capacity\">full_charge_capacity</a> == <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#capacity_now\">capacity_now</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* fallback to using design values for broken batteries */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#design_capacity\">design_capacity</a> == <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#capacity_now\">capacity_now</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* we don't do any sort of metric based on percentages */</span>", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#acpi_battery_get_property\">acpi_battery_get_property</a>(struct <a class=\"id\" href=\"#power_supply\">power_supply</a> *<a class=\"id\" href=\"#psy\">psy</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     enum <a class=\"id\" href=\"#power_supply_property\">power_supply_property</a> <a class=\"id\" href=\"#psp\">psp</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     union <a class=\"id\" href=\"#power_supply_propval\">power_supply_propval</a> *<a class=\"id\" href=\"#val\">val</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a> = <a class=\"id\" href=\"#to_acpi_battery\">to_acpi_battery</a>(<a class=\"id\" href=\"#psy\">psy</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#acpi_battery_present\">acpi_battery_present</a>(<a class=\"id\" href=\"#battery\">battery</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* run battery update only if it is present */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#acpi_battery_get_state\">acpi_battery_get_state</a>(<a class=\"id\" href=\"#battery\">battery</a>);", 
"<span class=\"ts\"/>} else if (<a class=\"id\" href=\"#psp\">psp</a> != <a class=\"id\" href=\"#POWER_SUPPLY_PROP_PRESENT\">POWER_SUPPLY_PROP_PRESENT</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#psp\">psp</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#POWER_SUPPLY_PROP_STATUS\">POWER_SUPPLY_PROP_STATUS</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#state\">state</a> &amp; 0x01)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a>-><a class=\"id\" href=\"#intval\">intval</a> = <a class=\"id\" href=\"#POWER_SUPPLY_STATUS_DISCHARGING\">POWER_SUPPLY_STATUS_DISCHARGING</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#state\">state</a> &amp; 0x02)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a>-><a class=\"id\" href=\"#intval\">intval</a> = <a class=\"id\" href=\"#POWER_SUPPLY_STATUS_CHARGING\">POWER_SUPPLY_STATUS_CHARGING</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#acpi_battery_is_charged\">acpi_battery_is_charged</a>(<a class=\"id\" href=\"#battery\">battery</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a>-><a class=\"id\" href=\"#intval\">intval</a> = <a class=\"id\" href=\"#POWER_SUPPLY_STATUS_FULL\">POWER_SUPPLY_STATUS_FULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a>-><a class=\"id\" href=\"#intval\">intval</a> = <a class=\"id\" href=\"#POWER_SUPPLY_STATUS_UNKNOWN\">POWER_SUPPLY_STATUS_UNKNOWN</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#POWER_SUPPLY_PROP_PRESENT\">POWER_SUPPLY_PROP_PRESENT</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a>-><a class=\"id\" href=\"#intval\">intval</a> = <a class=\"id\" href=\"#acpi_battery_present\">acpi_battery_present</a>(<a class=\"id\" href=\"#battery\">battery</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#POWER_SUPPLY_PROP_TECHNOLOGY\">POWER_SUPPLY_PROP_TECHNOLOGY</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a>-><a class=\"id\" href=\"#intval\">intval</a> = <a class=\"id\" href=\"#acpi_battery_technology\">acpi_battery_technology</a>(<a class=\"id\" href=\"#battery\">battery</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#POWER_SUPPLY_PROP_CYCLE_COUNT\">POWER_SUPPLY_PROP_CYCLE_COUNT</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a>-><a class=\"id\" href=\"#intval\">intval</a> = <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#cycle_count\">cycle_count</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#POWER_SUPPLY_PROP_VOLTAGE_MIN_DESIGN\">POWER_SUPPLY_PROP_VOLTAGE_MIN_DESIGN</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a>-><a class=\"id\" href=\"#intval\">intval</a> = <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#design_voltage\">design_voltage</a> * 1000;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#POWER_SUPPLY_PROP_VOLTAGE_NOW\">POWER_SUPPLY_PROP_VOLTAGE_NOW</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a>-><a class=\"id\" href=\"#intval\">intval</a> = <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#voltage_now\">voltage_now</a> * 1000;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#POWER_SUPPLY_PROP_CURRENT_NOW\">POWER_SUPPLY_PROP_CURRENT_NOW</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#POWER_SUPPLY_PROP_POWER_NOW\">POWER_SUPPLY_PROP_POWER_NOW</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a>-><a class=\"id\" href=\"#intval\">intval</a> = <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#rate_now\">rate_now</a> * 1000;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#POWER_SUPPLY_PROP_CHARGE_FULL_DESIGN\">POWER_SUPPLY_PROP_CHARGE_FULL_DESIGN</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#POWER_SUPPLY_PROP_ENERGY_FULL_DESIGN\">POWER_SUPPLY_PROP_ENERGY_FULL_DESIGN</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a>-><a class=\"id\" href=\"#intval\">intval</a> = <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#design_capacity\">design_capacity</a> * 1000;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#POWER_SUPPLY_PROP_CHARGE_FULL\">POWER_SUPPLY_PROP_CHARGE_FULL</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#POWER_SUPPLY_PROP_ENERGY_FULL\">POWER_SUPPLY_PROP_ENERGY_FULL</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a>-><a class=\"id\" href=\"#intval\">intval</a> = <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#full_charge_capacity\">full_charge_capacity</a> * 1000;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#POWER_SUPPLY_PROP_CHARGE_NOW\">POWER_SUPPLY_PROP_CHARGE_NOW</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#POWER_SUPPLY_PROP_ENERGY_NOW\">POWER_SUPPLY_PROP_ENERGY_NOW</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a>-><a class=\"id\" href=\"#intval\">intval</a> = <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#capacity_now\">capacity_now</a> * 1000;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#POWER_SUPPLY_PROP_MODEL_NAME\">POWER_SUPPLY_PROP_MODEL_NAME</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a>-><a class=\"id\" href=\"#strval\">strval</a> = <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#model_number\">model_number</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#POWER_SUPPLY_PROP_MANUFACTURER\">POWER_SUPPLY_PROP_MANUFACTURER</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a>-><a class=\"id\" href=\"#strval\">strval</a> = <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#oem_info\">oem_info</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#POWER_SUPPLY_PROP_SERIAL_NUMBER\">POWER_SUPPLY_PROP_SERIAL_NUMBER</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a>-><a class=\"id\" href=\"#strval\">strval</a> = <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#serial_number\">serial_number</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static enum <a class=\"id\" href=\"#power_supply_property\">power_supply_property</a> <a class=\"id\" href=\"#charge_battery_props\">charge_battery_props</a>[] = {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_STATUS\">POWER_SUPPLY_PROP_STATUS</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_PRESENT\">POWER_SUPPLY_PROP_PRESENT</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_TECHNOLOGY\">POWER_SUPPLY_PROP_TECHNOLOGY</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_CYCLE_COUNT\">POWER_SUPPLY_PROP_CYCLE_COUNT</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_VOLTAGE_MIN_DESIGN\">POWER_SUPPLY_PROP_VOLTAGE_MIN_DESIGN</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_VOLTAGE_NOW\">POWER_SUPPLY_PROP_VOLTAGE_NOW</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_CURRENT_NOW\">POWER_SUPPLY_PROP_CURRENT_NOW</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_CHARGE_FULL_DESIGN\">POWER_SUPPLY_PROP_CHARGE_FULL_DESIGN</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_CHARGE_FULL\">POWER_SUPPLY_PROP_CHARGE_FULL</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_CHARGE_NOW\">POWER_SUPPLY_PROP_CHARGE_NOW</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_MODEL_NAME\">POWER_SUPPLY_PROP_MODEL_NAME</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_MANUFACTURER\">POWER_SUPPLY_PROP_MANUFACTURER</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_SERIAL_NUMBER\">POWER_SUPPLY_PROP_SERIAL_NUMBER</a>,", 
"};", 
"", 
"static enum <a class=\"id\" href=\"#power_supply_property\">power_supply_property</a> <a class=\"id\" href=\"#energy_battery_props\">energy_battery_props</a>[] = {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_STATUS\">POWER_SUPPLY_PROP_STATUS</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_PRESENT\">POWER_SUPPLY_PROP_PRESENT</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_TECHNOLOGY\">POWER_SUPPLY_PROP_TECHNOLOGY</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_CYCLE_COUNT\">POWER_SUPPLY_PROP_CYCLE_COUNT</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_VOLTAGE_MIN_DESIGN\">POWER_SUPPLY_PROP_VOLTAGE_MIN_DESIGN</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_VOLTAGE_NOW\">POWER_SUPPLY_PROP_VOLTAGE_NOW</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_POWER_NOW\">POWER_SUPPLY_PROP_POWER_NOW</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_ENERGY_FULL_DESIGN\">POWER_SUPPLY_PROP_ENERGY_FULL_DESIGN</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_ENERGY_FULL\">POWER_SUPPLY_PROP_ENERGY_FULL</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_ENERGY_NOW\">POWER_SUPPLY_PROP_ENERGY_NOW</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_MODEL_NAME\">POWER_SUPPLY_PROP_MODEL_NAME</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_MANUFACTURER\">POWER_SUPPLY_PROP_MANUFACTURER</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#POWER_SUPPLY_PROP_SERIAL_NUMBER\">POWER_SUPPLY_PROP_SERIAL_NUMBER</a>,", 
"};", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_ACPI_PROCFS_POWER\">CONFIG_ACPI_PROCFS_POWER</a>", 
"<a class=\"id\" href=\"#inline\">inline</a> char *<a class=\"id\" href=\"#acpi_battery_units\">acpi_battery_units</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a>)", 
"{", 
"<span class=\"ts\"/>return (<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#power_unit\">power_unit</a>)?\"mA\":\"mW\";", 
"}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"<span class=\"comment\">/* --------------------------------------------------------------------------</span>", 
"<span class=\"comment\">                               Battery Management</span>", 
"<span class=\"comment\">   -------------------------------------------------------------------------- */</span>", 
"struct <a class=\"id\" href=\"#acpi_offsets\">acpi_offsets</a> {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#offset\">offset</a>;<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* offset inside struct acpi_sbs_battery */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#mode\">mode</a>;<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* int or string? */</span>", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#acpi_offsets\">acpi_offsets</a> <a class=\"id\" href=\"#state_offsets\">state_offsets</a>[] = {", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#state\">state</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#rate_now\">rate_now</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#capacity_now\">capacity_now</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#voltage_now\">voltage_now</a>), 0},", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#acpi_offsets\">acpi_offsets</a> <a class=\"id\" href=\"#info_offsets\">info_offsets</a>[] = {", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#power_unit\">power_unit</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#design_capacity\">design_capacity</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#full_charge_capacity\">full_charge_capacity</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#technology\">technology</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#design_voltage\">design_voltage</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#design_capacity_warning\">design_capacity_warning</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#design_capacity_low\">design_capacity_low</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#capacity_granularity_1\">capacity_granularity_1</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#capacity_granularity_2\">capacity_granularity_2</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#model_number\">model_number</a>), 1},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#serial_number\">serial_number</a>), 1},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#type\">type</a>), 1},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#oem_info\">oem_info</a>), 1},", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#acpi_offsets\">acpi_offsets</a> <a class=\"id\" href=\"#extended_info_offsets\">extended_info_offsets</a>[] = {", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#power_unit\">power_unit</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#design_capacity\">design_capacity</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#full_charge_capacity\">full_charge_capacity</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#technology\">technology</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#design_voltage\">design_voltage</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#design_capacity_warning\">design_capacity_warning</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#design_capacity_low\">design_capacity_low</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#cycle_count\">cycle_count</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#measurement_accuracy\">measurement_accuracy</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#max_sampling_time\">max_sampling_time</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#min_sampling_time\">min_sampling_time</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#max_averaging_interval\">max_averaging_interval</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#min_averaging_interval\">min_averaging_interval</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#capacity_granularity_1\">capacity_granularity_1</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#capacity_granularity_2\">capacity_granularity_2</a>), 0},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#model_number\">model_number</a>), 1},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#serial_number\">serial_number</a>), 1},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#type\">type</a>), 1},", 
"<span class=\"ts\"/>{<a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a>, <a class=\"id\" href=\"#oem_info\">oem_info</a>), 1},", 
"};", 
"", 
"static int <a class=\"id\" href=\"#extract_package\">extract_package</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   union <a class=\"id\" href=\"#acpi_object\">acpi_object</a> *<a class=\"id\" href=\"#package\">package</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   struct <a class=\"id\" href=\"#acpi_offsets\">acpi_offsets</a> *<a class=\"id\" href=\"#offsets\">offsets</a>, int <a class=\"id\" href=\"#num\">num</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"<span class=\"ts\"/>union <a class=\"id\" href=\"#acpi_object\">acpi_object</a> *<a class=\"id\" href=\"#element\">element</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#package\">package</a>-><a class=\"id\" href=\"#type\">type</a> != <a class=\"id\" href=\"#ACPI_TYPE_PACKAGE\">ACPI_TYPE_PACKAGE</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#num\">num</a>; ++<a class=\"id\" href=\"#i\">i</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#package\">package</a>-><a class=\"id\" href=\"#package\">package</a>.<a class=\"id\" href=\"#count\">count</a> <= <a class=\"id\" href=\"#i\">i</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#element\">element</a> = &amp;<a class=\"id\" href=\"#package\">package</a>-><a class=\"id\" href=\"#package\">package</a>.<a class=\"id\" href=\"#elements\">elements</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#offsets\">offsets</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#mode\">mode</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> *<a class=\"id\" href=\"#ptr\">ptr</a> = (<a class=\"id\" href=\"#u8\">u8</a> *)<a class=\"id\" href=\"#battery\">battery</a> + <a class=\"id\" href=\"#offsets\">offsets</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#offset\">offset</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#element\">element</a>-><a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#ACPI_TYPE_STRING\">ACPI_TYPE_STRING</a> ||", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#element\">element</a>-><a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#ACPI_TYPE_BUFFER\">ACPI_TYPE_BUFFER</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#strncpy\">strncpy</a>(<a class=\"id\" href=\"#ptr\">ptr</a>, <a class=\"id\" href=\"#element\">element</a>-><a class=\"id\" href=\"#string\">string</a>.<a class=\"id\" href=\"#pointer\">pointer</a>, 32);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#element\">element</a>-><a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#ACPI_TYPE_INTEGER\">ACPI_TYPE_INTEGER</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#strncpy\">strncpy</a>(<a class=\"id\" href=\"#ptr\">ptr</a>, (<a class=\"id\" href=\"#u8\">u8</a> *)&amp;<a class=\"id\" href=\"#element\">element</a>-><a class=\"id\" href=\"#integer\">integer</a>.<a class=\"id\" href=\"#value\">value</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>sizeof(<a class=\"id\" href=\"#u64\">u64</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ptr\">ptr</a>[sizeof(<a class=\"id\" href=\"#u64\">u64</a>)] = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#ptr\">ptr</a> = 0; <span class=\"comment\">/* don't have value */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>int *<a class=\"id\" href=\"#x\">x</a> = (int *)((<a class=\"id\" href=\"#u8\">u8</a> *)<a class=\"id\" href=\"#battery\">battery</a> + <a class=\"id\" href=\"#offsets\">offsets</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#offset\">offset</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#x\">x</a> = (<a class=\"id\" href=\"#element\">element</a>-><a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#ACPI_TYPE_INTEGER\">ACPI_TYPE_INTEGER</a>) ?", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#element\">element</a>-><a class=\"id\" href=\"#integer\">integer</a>.<a class=\"id\" href=\"#value\">value</a> : -1;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#acpi_battery_get_status\">acpi_battery_get_status</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#acpi_bus_get_status\">acpi_bus_get_status</a>(<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#device\">device</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ACPI_EXCEPTION\">ACPI_EXCEPTION</a>((<a class=\"id\" href=\"#AE_INFO\">AE_INFO</a>, <a class=\"id\" href=\"#AE_ERROR\">AE_ERROR</a>, \"Evaluating _STA\"));", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#acpi_battery_get_info\">acpi_battery_get_info</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#result\">result</a> = -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_status\">acpi_status</a> <a class=\"id\" href=\"#status\">status</a> = 0;", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#name\">name</a> = <a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#ACPI_BATTERY_XINFO_PRESENT\">ACPI_BATTERY_XINFO_PRESENT</a>, &amp;<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#flags\">flags</a>)?", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"_BIX\" : \"_BIF\";", 
"", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_buffer\">acpi_buffer</a> <a class=\"id\" href=\"#buffer\">buffer</a> = { <a class=\"id\" href=\"#ACPI_ALLOCATE_BUFFER\">ACPI_ALLOCATE_BUFFER</a>, <a class=\"id\" href=\"#NULL\">NULL</a> };", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#acpi_battery_present\">acpi_battery_present</a>(<a class=\"id\" href=\"#battery\">battery</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#lock\">lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#acpi_evaluate_object\">acpi_evaluate_object</a>(<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#handle\">handle</a>, <a class=\"id\" href=\"#name\">name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#NULL\">NULL</a>, &amp;<a class=\"id\" href=\"#buffer\">buffer</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#lock\">lock</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ACPI_FAILURE\">ACPI_FAILURE</a>(<a class=\"id\" href=\"#status\">status</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ACPI_EXCEPTION\">ACPI_EXCEPTION</a>((<a class=\"id\" href=\"#AE_INFO\">AE_INFO</a>, <a class=\"id\" href=\"#status\">status</a>, \"Evaluating %s\", <a class=\"id\" href=\"#name\">name</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#ACPI_BATTERY_XINFO_PRESENT\">ACPI_BATTERY_XINFO_PRESENT</a>, &amp;<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#flags\">flags</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#extract_package\">extract_package</a>(<a class=\"id\" href=\"#battery\">battery</a>, <a class=\"id\" href=\"#buffer\">buffer</a>.<a class=\"id\" href=\"#pointer\">pointer</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#extended_info_offsets\">extended_info_offsets</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#extended_info_offsets\">extended_info_offsets</a>));", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#extract_package\">extract_package</a>(<a class=\"id\" href=\"#battery\">battery</a>, <a class=\"id\" href=\"#buffer\">buffer</a>.<a class=\"id\" href=\"#pointer\">pointer</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#info_offsets\">info_offsets</a>, <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#info_offsets\">info_offsets</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#buffer\">buffer</a>.<a class=\"id\" href=\"#pointer\">pointer</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#result\">result</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#acpi_battery_get_state\">acpi_battery_get_state</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#result\">result</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_status\">acpi_status</a> <a class=\"id\" href=\"#status\">status</a> = 0;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_buffer\">acpi_buffer</a> <a class=\"id\" href=\"#buffer\">buffer</a> = { <a class=\"id\" href=\"#ACPI_ALLOCATE_BUFFER\">ACPI_ALLOCATE_BUFFER</a>, <a class=\"id\" href=\"#NULL\">NULL</a> };", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#acpi_battery_present\">acpi_battery_present</a>(<a class=\"id\" href=\"#battery\">battery</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#update_time\">update_time</a> &&", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#time_before\">time_before</a>(<a class=\"id\" href=\"#jiffies\">jiffies</a>, <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#update_time\">update_time</a> +", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#msecs_to_jiffies\">msecs_to_jiffies</a>(<a class=\"id\" href=\"#cache_time\">cache_time</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#lock\">lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#acpi_evaluate_object\">acpi_evaluate_object</a>(<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#handle\">handle</a>, \"_BST\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#NULL\">NULL</a>, &amp;<a class=\"id\" href=\"#buffer\">buffer</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#lock\">lock</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ACPI_FAILURE\">ACPI_FAILURE</a>(<a class=\"id\" href=\"#status\">status</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ACPI_EXCEPTION\">ACPI_EXCEPTION</a>((<a class=\"id\" href=\"#AE_INFO\">AE_INFO</a>, <a class=\"id\" href=\"#status\">status</a>, \"Evaluating _BST\"));", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#extract_package\">extract_package</a>(<a class=\"id\" href=\"#battery\">battery</a>, <a class=\"id\" href=\"#buffer\">buffer</a>.<a class=\"id\" href=\"#pointer\">pointer</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#state_offsets\">state_offsets</a>, <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#state_offsets\">state_offsets</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#update_time\">update_time</a> = <a class=\"id\" href=\"#jiffies\">jiffies</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#buffer\">buffer</a>.<a class=\"id\" href=\"#pointer\">pointer</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#ACPI_BATTERY_QUIRK_SIGNED16_CURRENT\">ACPI_BATTERY_QUIRK_SIGNED16_CURRENT</a>, &amp;<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#flags\">flags</a>) &&", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#rate_now\">rate_now</a> != -1)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#rate_now\">rate_now</a> = <a class=\"id\" href=\"#abs\">abs</a>((<a class=\"id\" href=\"#s16\">s16</a>)<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#rate_now\">rate_now</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#result\">result</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#acpi_battery_set_alarm\">acpi_battery_set_alarm</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_status\">acpi_status</a> <a class=\"id\" href=\"#status\">status</a> = 0;", 
"<span class=\"ts\"/>union <a class=\"id\" href=\"#acpi_object\">acpi_object</a> <a class=\"id\" href=\"#arg0\">arg0</a> = { .<a class=\"id\" href=\"#type\">type</a> = <a class=\"id\" href=\"#ACPI_TYPE_INTEGER\">ACPI_TYPE_INTEGER</a> };", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_object_list\">acpi_object_list</a> <a class=\"id\" href=\"#arg_list\">arg_list</a> = { 1, &amp;<a class=\"id\" href=\"#arg0\">arg0</a> };", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#acpi_battery_present\">acpi_battery_present</a>(<a class=\"id\" href=\"#battery\">battery</a>) ||", 
"<span class=\"ts\"/>    !<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#ACPI_BATTERY_ALARM_PRESENT\">ACPI_BATTERY_ALARM_PRESENT</a>, &amp;<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#flags\">flags</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#arg0\">arg0</a>.<a class=\"id\" href=\"#integer\">integer</a>.<a class=\"id\" href=\"#value\">value</a> = <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#alarm\">alarm</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#lock\">lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#acpi_evaluate_object\">acpi_evaluate_object</a>(<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#handle\">handle</a>, \"_BTP\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> &amp;<a class=\"id\" href=\"#arg_list\">arg_list</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#lock\">lock</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ACPI_FAILURE\">ACPI_FAILURE</a>(<a class=\"id\" href=\"#status\">status</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ACPI_DEBUG_PRINT\">ACPI_DEBUG_PRINT</a>((<a class=\"id\" href=\"#ACPI_DB_INFO\">ACPI_DB_INFO</a>, \"Alarm set to %d\\n\", <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#alarm\">alarm</a>));", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#acpi_battery_init_alarm\">acpi_battery_init_alarm</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_status\">acpi_status</a> <a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#AE_OK\">AE_OK</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_handle\">acpi_handle</a> <a class=\"id\" href=\"#handle\">handle</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* See if alarms are supported, and if so, set default */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#acpi_get_handle\">acpi_get_handle</a>(<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#handle\">handle</a>, \"_BTP\", &amp;<a class=\"id\" href=\"#handle\">handle</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ACPI_FAILURE\">ACPI_FAILURE</a>(<a class=\"id\" href=\"#status\">status</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#clear_bit\">clear_bit</a>(<a class=\"id\" href=\"#ACPI_BATTERY_ALARM_PRESENT\">ACPI_BATTERY_ALARM_PRESENT</a>, &amp;<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#set_bit\">set_bit</a>(<a class=\"id\" href=\"#ACPI_BATTERY_ALARM_PRESENT\">ACPI_BATTERY_ALARM_PRESENT</a>, &amp;<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#alarm\">alarm</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#alarm\">alarm</a> = <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#design_capacity_warning\">design_capacity_warning</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#acpi_battery_set_alarm\">acpi_battery_set_alarm</a>(<a class=\"id\" href=\"#battery\">battery</a>);", 
"}", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_ACPI_SYSFS_POWER\">CONFIG_ACPI_SYSFS_POWER</a>", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#acpi_battery_alarm_show\">acpi_battery_alarm_show</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a> = <a class=\"id\" href=\"#to_acpi_battery\">to_acpi_battery</a>(<a class=\"id\" href=\"#dev_get_drvdata\">dev_get_drvdata</a>(<a class=\"id\" href=\"#dev\">dev</a>));", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%d\\n\", <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#alarm\">alarm</a> * 1000);", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#acpi_battery_alarm_store\">acpi_battery_alarm_store</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>const char *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>)", 
"{", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#x\">x</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a> = <a class=\"id\" href=\"#to_acpi_battery\">to_acpi_battery</a>(<a class=\"id\" href=\"#dev_get_drvdata\">dev_get_drvdata</a>(<a class=\"id\" href=\"#dev\">dev</a>));", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sscanf\">sscanf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%ld\\n\", &amp;<a class=\"id\" href=\"#x\">x</a>) == 1)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#alarm\">alarm</a> = <a class=\"id\" href=\"#x\">x</a>/1000;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#acpi_battery_present\">acpi_battery_present</a>(<a class=\"id\" href=\"#battery\">battery</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#acpi_battery_set_alarm\">acpi_battery_set_alarm</a>(<a class=\"id\" href=\"#battery\">battery</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#count\">count</a>;", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> <a class=\"id\" href=\"#alarm_attr\">alarm_attr</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#attr\">attr</a> = {.<a class=\"id\" href=\"#name\">name</a> = \"alarm\", .<a class=\"id\" href=\"#mode\">mode</a> = 0644},", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#show\">show</a> = <a class=\"id\" href=\"#acpi_battery_alarm_show\">acpi_battery_alarm_show</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#store\">store</a> = <a class=\"id\" href=\"#acpi_battery_alarm_store\">acpi_battery_alarm_store</a>,", 
"};", 
"", 
"static int <a class=\"id\" href=\"#sysfs_add_battery\">sysfs_add_battery</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#result\">result</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#power_unit\">power_unit</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#bat\">bat</a>.<a class=\"id\" href=\"#properties\">properties</a> = <a class=\"id\" href=\"#charge_battery_props\">charge_battery_props</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#bat\">bat</a>.<a class=\"id\" href=\"#num_properties\">num_properties</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#charge_battery_props\">charge_battery_props</a>);", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#bat\">bat</a>.<a class=\"id\" href=\"#properties\">properties</a> = <a class=\"id\" href=\"#energy_battery_props\">energy_battery_props</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#bat\">bat</a>.<a class=\"id\" href=\"#num_properties\">num_properties</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#energy_battery_props\">energy_battery_props</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#bat\">bat</a>.<a class=\"id\" href=\"#name\">name</a> = <a class=\"id\" href=\"#acpi_device_bid\">acpi_device_bid</a>(<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#device\">device</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#bat\">bat</a>.<a class=\"id\" href=\"#type\">type</a> = <a class=\"id\" href=\"#POWER_SUPPLY_TYPE_BATTERY\">POWER_SUPPLY_TYPE_BATTERY</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#bat\">bat</a>.<a class=\"id\" href=\"#get_property\">get_property</a> = <a class=\"id\" href=\"#acpi_battery_get_property\">acpi_battery_get_property</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#power_supply_register\">power_supply_register</a>(&amp;<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#bat\">bat</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#result\">result</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#device_create_file\">device_create_file</a>(<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#bat\">bat</a>.<a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#alarm_attr\">alarm_attr</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#sysfs_remove_battery\">sysfs_remove_battery</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a>)", 
"{", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#bat\">bat</a>.<a class=\"id\" href=\"#dev\">dev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device_remove_file\">device_remove_file</a>(<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#bat\">bat</a>.<a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#alarm_attr\">alarm_attr</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#power_supply_unregister\">power_supply_unregister</a>(&amp;<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#bat\">bat</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#bat\">bat</a>.<a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"static void <a class=\"id\" href=\"#acpi_battery_quirks\">acpi_battery_quirks</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#dmi_name_in_vendors\">dmi_name_in_vendors</a>(\"Acer\") && <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#power_unit\">power_unit</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_bit\">set_bit</a>(<a class=\"id\" href=\"#ACPI_BATTERY_QUIRK_SIGNED16_CURRENT\">ACPI_BATTERY_QUIRK_SIGNED16_CURRENT</a>, &amp;<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static int <a class=\"id\" href=\"#acpi_battery_update\">acpi_battery_update</a>(struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#result\">result</a>, <a class=\"id\" href=\"#old_present\">old_present</a> = <a class=\"id\" href=\"#acpi_battery_present\">acpi_battery_present</a>(<a class=\"id\" href=\"#battery\">battery</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#acpi_battery_get_status\">acpi_battery_get_status</a>(<a class=\"id\" href=\"#battery\">battery</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#result\">result</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#acpi_battery_present\">acpi_battery_present</a>(<a class=\"id\" href=\"#battery\">battery</a>)) {", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_ACPI_SYSFS_POWER\">CONFIG_ACPI_SYSFS_POWER</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sysfs_remove_battery\">sysfs_remove_battery</a>(<a class=\"id\" href=\"#battery\">battery</a>);", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#update_time\">update_time</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#update_time\">update_time</a> ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#old_present\">old_present</a> != <a class=\"id\" href=\"#acpi_battery_present\">acpi_battery_present</a>(<a class=\"id\" href=\"#battery\">battery</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#acpi_battery_get_info\">acpi_battery_get_info</a>(<a class=\"id\" href=\"#battery\">battery</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#result\">result</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#acpi_battery_quirks\">acpi_battery_quirks</a>(<a class=\"id\" href=\"#battery\">battery</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#acpi_battery_init_alarm\">acpi_battery_init_alarm</a>(<a class=\"id\" href=\"#battery\">battery</a>);", 
"<span class=\"ts\"/>}", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_ACPI_SYSFS_POWER\">CONFIG_ACPI_SYSFS_POWER</a>", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#bat\">bat</a>.<a class=\"id\" href=\"#dev\">dev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sysfs_add_battery\">sysfs_add_battery</a>(<a class=\"id\" href=\"#battery\">battery</a>);", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#acpi_battery_get_state\">acpi_battery_get_state</a>(<a class=\"id\" href=\"#battery\">battery</a>);", 
"}", 
"", 
"<span class=\"comment\">/* --------------------------------------------------------------------------</span>", 
"<span class=\"comment\">                              FS Interface (/proc)</span>", 
"<span class=\"comment\">   -------------------------------------------------------------------------- */</span>", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_ACPI_PROCFS_POWER\">CONFIG_ACPI_PROCFS_POWER</a>", 
"static struct <a class=\"id\" href=\"#proc_dir_entry\">proc_dir_entry</a> *<a class=\"id\" href=\"#acpi_battery_dir\">acpi_battery_dir</a>;", 
"", 
"static int <a class=\"id\" href=\"#acpi_battery_print_info\">acpi_battery_print_info</a>(struct <a class=\"id\" href=\"#seq_file\">seq_file</a> *<a class=\"id\" href=\"#seq\">seq</a>, int <a class=\"id\" href=\"#result\">result</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a> = <a class=\"id\" href=\"#seq\">seq</a>-><a class=\"id\" href=\"#private\">private</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#end\">end</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"present:                 %s\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#acpi_battery_present\">acpi_battery_present</a>(<a class=\"id\" href=\"#battery\">battery</a>)?\"yes\":\"no\");", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#acpi_battery_present\">acpi_battery_present</a>(<a class=\"id\" href=\"#battery\">battery</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#end\">end</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#design_capacity\">design_capacity</a> == <a class=\"id\" href=\"#ACPI_BATTERY_VALUE_UNKNOWN\">ACPI_BATTERY_VALUE_UNKNOWN</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"design capacity:         unknown\\n\");", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"design capacity:         %d %sh\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#design_capacity\">design_capacity</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#acpi_battery_units\">acpi_battery_units</a>(<a class=\"id\" href=\"#battery\">battery</a>));", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#full_charge_capacity\">full_charge_capacity</a> == <a class=\"id\" href=\"#ACPI_BATTERY_VALUE_UNKNOWN\">ACPI_BATTERY_VALUE_UNKNOWN</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"last full capacity:      unknown\\n\");", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"last full capacity:      %d %sh\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#full_charge_capacity\">full_charge_capacity</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#acpi_battery_units\">acpi_battery_units</a>(<a class=\"id\" href=\"#battery\">battery</a>));", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"battery technology:      %srechargeable\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/>   (!<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#technology\">technology</a>)?\"non-\":\"\");", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#design_voltage\">design_voltage</a> == <a class=\"id\" href=\"#ACPI_BATTERY_VALUE_UNKNOWN\">ACPI_BATTERY_VALUE_UNKNOWN</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"design voltage:          unknown\\n\");", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"design voltage:          %d mV\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#design_voltage\">design_voltage</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"design capacity warning: %d %sh\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#design_capacity_warning\">design_capacity_warning</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#acpi_battery_units\">acpi_battery_units</a>(<a class=\"id\" href=\"#battery\">battery</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"design capacity low:     %d %sh\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#design_capacity_low\">design_capacity_low</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#acpi_battery_units\">acpi_battery_units</a>(<a class=\"id\" href=\"#battery\">battery</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"cycle count:    %i\\n\", <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#cycle_count\">cycle_count</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"capacity granularity 1:  %d %sh\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#capacity_granularity_1\">capacity_granularity_1</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#acpi_battery_units\">acpi_battery_units</a>(<a class=\"id\" href=\"#battery\">battery</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"capacity granularity 2:  %d %sh\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#capacity_granularity_2\">capacity_granularity_2</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#acpi_battery_units\">acpi_battery_units</a>(<a class=\"id\" href=\"#battery\">battery</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"model number:            %s\\n\", <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#model_number\">model_number</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"serial number:           %s\\n\", <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#serial_number\">serial_number</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"battery type:            %s\\n\", <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#type\">type</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"OEM info:                %s\\n\", <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#oem_info\">oem_info</a>);", 
"      <a class=\"id\" href=\"#end\">end</a>:", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"ERROR: Unable to read battery info\\n\");", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#result\">result</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#acpi_battery_print_state\">acpi_battery_print_state</a>(struct <a class=\"id\" href=\"#seq_file\">seq_file</a> *<a class=\"id\" href=\"#seq\">seq</a>, int <a class=\"id\" href=\"#result\">result</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a> = <a class=\"id\" href=\"#seq\">seq</a>-><a class=\"id\" href=\"#private\">private</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#end\">end</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"present:                 %s\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#acpi_battery_present\">acpi_battery_present</a>(<a class=\"id\" href=\"#battery\">battery</a>)?\"yes\":\"no\");", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#acpi_battery_present\">acpi_battery_present</a>(<a class=\"id\" href=\"#battery\">battery</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#end\">end</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"capacity state:          %s\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#state\">state</a> &amp; 0x04)?\"critical\":\"ok\");", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#state\">state</a> &amp; 0x01) && (<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#state\">state</a> &amp; 0x02))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   \"charging state:          charging/discharging\\n\");", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#state\">state</a> &amp; 0x01)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"charging state:          discharging\\n\");", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#state\">state</a> &amp; 0x02)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"charging state:          charging\\n\");", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"charging state:          charged\\n\");", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#rate_now\">rate_now</a> == <a class=\"id\" href=\"#ACPI_BATTERY_VALUE_UNKNOWN\">ACPI_BATTERY_VALUE_UNKNOWN</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"present rate:            unknown\\n\");", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"present rate:            %d %s\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#rate_now\">rate_now</a>, <a class=\"id\" href=\"#acpi_battery_units\">acpi_battery_units</a>(<a class=\"id\" href=\"#battery\">battery</a>));", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#capacity_now\">capacity_now</a> == <a class=\"id\" href=\"#ACPI_BATTERY_VALUE_UNKNOWN\">ACPI_BATTERY_VALUE_UNKNOWN</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"remaining capacity:      unknown\\n\");", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"remaining capacity:      %d %sh\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#capacity_now\">capacity_now</a>, <a class=\"id\" href=\"#acpi_battery_units\">acpi_battery_units</a>(<a class=\"id\" href=\"#battery\">battery</a>));", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#voltage_now\">voltage_now</a> == <a class=\"id\" href=\"#ACPI_BATTERY_VALUE_UNKNOWN\">ACPI_BATTERY_VALUE_UNKNOWN</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"present voltage:         unknown\\n\");", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"present voltage:         %d mV\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#voltage_now\">voltage_now</a>);", 
"      <a class=\"id\" href=\"#end\">end</a>:", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"ERROR: Unable to read battery state\\n\");", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#result\">result</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#acpi_battery_print_alarm\">acpi_battery_print_alarm</a>(struct <a class=\"id\" href=\"#seq_file\">seq_file</a> *<a class=\"id\" href=\"#seq\">seq</a>, int <a class=\"id\" href=\"#result\">result</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a> = <a class=\"id\" href=\"#seq\">seq</a>-><a class=\"id\" href=\"#private\">private</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#end\">end</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#acpi_battery_present\">acpi_battery_present</a>(<a class=\"id\" href=\"#battery\">battery</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"present:                 no\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#end\">end</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"alarm:                   \");", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#alarm\">alarm</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"unsupported\\n\");", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"%u %sh\\n\", <a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#alarm\">alarm</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#acpi_battery_units\">acpi_battery_units</a>(<a class=\"id\" href=\"#battery\">battery</a>));", 
"      <a class=\"id\" href=\"#end\">end</a>:", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"ERROR: Unable to read battery alarm\\n\");", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#result\">result</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#acpi_battery_write_alarm\">acpi_battery_write_alarm</a>(struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>const char <a class=\"id\" href=\"#__user\">__user</a> * <a class=\"id\" href=\"#buffer\">buffer</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>, <a class=\"id\" href=\"#loff_t\">loff_t</a> * <a class=\"id\" href=\"#ppos\">ppos</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#result\">result</a> = 0;", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#alarm_string\">alarm_string</a>[12] = { '\\0' };", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#seq_file\">seq_file</a> *<a class=\"id\" href=\"#m\">m</a> = <a class=\"id\" href=\"#file\">file</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a> = <a class=\"id\" href=\"#m\">m</a>-><a class=\"id\" href=\"#private\">private</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#battery\">battery</a> || (<a class=\"id\" href=\"#count\">count</a> &gt; sizeof(<a class=\"id\" href=\"#alarm_string\">alarm_string</a>) - 1))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#acpi_battery_present\">acpi_battery_present</a>(<a class=\"id\" href=\"#battery\">battery</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#end\">end</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(<a class=\"id\" href=\"#alarm_string\">alarm_string</a>, <a class=\"id\" href=\"#buffer\">buffer</a>, <a class=\"id\" href=\"#count\">count</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#end\">end</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#alarm_string\">alarm_string</a>[<a class=\"id\" href=\"#count\">count</a>] = '\\0';", 
"<span class=\"ts\"/><a class=\"id\" href=\"#battery\">battery</a>-><a class=\"id\" href=\"#alarm\">alarm</a> = <a class=\"id\" href=\"#simple_strtol\">simple_strtol</a>(<a class=\"id\" href=\"#alarm_string\">alarm_string</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, 0);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#acpi_battery_set_alarm\">acpi_battery_set_alarm</a>(<a class=\"id\" href=\"#battery\">battery</a>);", 
"      <a class=\"id\" href=\"#end\">end</a>:", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#count\">count</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#result\">result</a>;", 
"}", 
"", 
"typedef int(*<a class=\"id\" href=\"#print_func\">print_func</a>)(struct <a class=\"id\" href=\"#seq_file\">seq_file</a> *<a class=\"id\" href=\"#seq\">seq</a>, int <a class=\"id\" href=\"#result\">result</a>);", 
"", 
"static <a class=\"id\" href=\"#print_func\">print_func</a> <a class=\"id\" href=\"#acpi_print_funcs\">acpi_print_funcs</a>[<a class=\"id\" href=\"#ACPI_BATTERY_NUMFILES\">ACPI_BATTERY_NUMFILES</a>] = {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_battery_print_info\">acpi_battery_print_info</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_battery_print_state\">acpi_battery_print_state</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_battery_print_alarm\">acpi_battery_print_alarm</a>,", 
"};", 
"", 
"static int <a class=\"id\" href=\"#acpi_battery_read\">acpi_battery_read</a>(int <a class=\"id\" href=\"#fid\">fid</a>, struct <a class=\"id\" href=\"#seq_file\">seq_file</a> *<a class=\"id\" href=\"#seq\">seq</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a> = <a class=\"id\" href=\"#seq\">seq</a>-><a class=\"id\" href=\"#private\">private</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#acpi_battery_update\">acpi_battery_update</a>(<a class=\"id\" href=\"#battery\">battery</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#acpi_print_funcs\">acpi_print_funcs</a>[<a class=\"id\" href=\"#fid\">fid</a>](<a class=\"id\" href=\"#seq\">seq</a>, <a class=\"id\" href=\"#result\">result</a>);", 
"}", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#DECLARE_FILE_FUNCTIONS\">DECLARE_FILE_FUNCTIONS</a>(<a class=\"id\" href=\"#_name\">_name</a>) \\", 
"static int <a class=\"id\" href=\"#acpi_battery_read_\">acpi_battery_read_</a>##<a class=\"id\" href=\"#_name\">_name</a>(struct <a class=\"id\" href=\"#seq_file\">seq_file</a> *<a class=\"id\" href=\"#seq\">seq</a>, void *<a class=\"id\" href=\"#offset\">offset</a>) \\", 
"{ \\", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#acpi_battery_read\">acpi_battery_read</a>(<a class=\"id\" href=\"#_name\">_name</a>##<a class=\"id\" href=\"#_tag\">_tag</a>, <a class=\"id\" href=\"#seq\">seq</a>); \\", 
"} \\", 
"static int <a class=\"id\" href=\"#acpi_battery_\">acpi_battery_</a>##<a class=\"id\" href=\"#_name\">_name</a>##<a class=\"id\" href=\"#_open_fs\">_open_fs</a>(struct <a class=\"id\" href=\"#inode\">inode</a> *<a class=\"id\" href=\"#inode\">inode</a>, struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>) \\", 
"{ \\", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#single_open\">single_open</a>(<a class=\"id\" href=\"#file\">file</a>, <a class=\"id\" href=\"#acpi_battery_read_\">acpi_battery_read_</a>##<a class=\"id\" href=\"#_name\">_name</a>, <a class=\"id\" href=\"#PDE\">PDE</a>(<a class=\"id\" href=\"#inode\">inode</a>)-><a class=\"id\" href=\"#data\">data</a>); \\", 
"}", 
"", 
"<a class=\"id\" href=\"#DECLARE_FILE_FUNCTIONS\">DECLARE_FILE_FUNCTIONS</a>(<a class=\"id\" href=\"#info\">info</a>);", 
"<a class=\"id\" href=\"#DECLARE_FILE_FUNCTIONS\">DECLARE_FILE_FUNCTIONS</a>(<a class=\"id\" href=\"#state\">state</a>);", 
"<a class=\"id\" href=\"#DECLARE_FILE_FUNCTIONS\">DECLARE_FILE_FUNCTIONS</a>(<a class=\"id\" href=\"#alarm\">alarm</a>);", 
"", 
"#<a class=\"id\" href=\"#undef\">undef</a> <a class=\"id\" href=\"#DECLARE_FILE_FUNCTIONS\">DECLARE_FILE_FUNCTIONS</a>", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#FILE_DESCRIPTION_RO\">FILE_DESCRIPTION_RO</a>(<a class=\"id\" href=\"#_name\">_name</a>) \\", 
"<span class=\"ts\"/>{ \\", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a> = <a class=\"id\" href=\"#__stringify\">__stringify</a>(<a class=\"id\" href=\"#_name\">_name</a>), \\", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#mode\">mode</a> = <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>, \\", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#ops\">ops</a> = { \\", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#open\">open</a> = <a class=\"id\" href=\"#acpi_battery_\">acpi_battery_</a>##<a class=\"id\" href=\"#_name\">_name</a>##<a class=\"id\" href=\"#_open_fs\">_open_fs</a>, \\", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#read\">read</a> = <a class=\"id\" href=\"#seq_read\">seq_read</a>, \\", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#llseek\">llseek</a> = <a class=\"id\" href=\"#seq_lseek\">seq_lseek</a>, \\", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#release\">release</a> = <a class=\"id\" href=\"#single_release\">single_release</a>, \\", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#owner\">owner</a> = <a class=\"id\" href=\"#THIS_MODULE\">THIS_MODULE</a>, \\", 
"<span class=\"ts\"/><span class=\"ts\"/>}, \\", 
"<span class=\"ts\"/>}", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#FILE_DESCRIPTION_RW\">FILE_DESCRIPTION_RW</a>(<a class=\"id\" href=\"#_name\">_name</a>) \\", 
"<span class=\"ts\"/>{ \\", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a> = <a class=\"id\" href=\"#__stringify\">__stringify</a>(<a class=\"id\" href=\"#_name\">_name</a>), \\", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#mode\">mode</a> = <a class=\"id\" href=\"#S_IFREG\">S_IFREG</a> | <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a> | <a class=\"id\" href=\"#S_IWUSR\">S_IWUSR</a>, \\", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#ops\">ops</a> = { \\", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#open\">open</a> = <a class=\"id\" href=\"#acpi_battery_\">acpi_battery_</a>##<a class=\"id\" href=\"#_name\">_name</a>##<a class=\"id\" href=\"#_open_fs\">_open_fs</a>, \\", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#read\">read</a> = <a class=\"id\" href=\"#seq_read\">seq_read</a>, \\", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#llseek\">llseek</a> = <a class=\"id\" href=\"#seq_lseek\">seq_lseek</a>, \\", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#write\">write</a> = <a class=\"id\" href=\"#acpi_battery_write_\">acpi_battery_write_</a>##<a class=\"id\" href=\"#_name\">_name</a>, \\", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#release\">release</a> = <a class=\"id\" href=\"#single_release\">single_release</a>, \\", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#owner\">owner</a> = <a class=\"id\" href=\"#THIS_MODULE\">THIS_MODULE</a>, \\", 
"<span class=\"ts\"/><span class=\"ts\"/>}, \\", 
"<span class=\"ts\"/>}", 
"", 
"static struct <a class=\"id\" href=\"#battery_file\">battery_file</a> {", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#file_operations\">file_operations</a> <a class=\"id\" href=\"#ops\">ops</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mode_t\">mode_t</a> <a class=\"id\" href=\"#mode\">mode</a>;", 
"<span class=\"ts\"/>const char *<a class=\"id\" href=\"#name\">name</a>;", 
"} <a class=\"id\" href=\"#acpi_battery_file\">acpi_battery_file</a>[] = {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#FILE_DESCRIPTION_RO\">FILE_DESCRIPTION_RO</a>(<a class=\"id\" href=\"#info\">info</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#FILE_DESCRIPTION_RO\">FILE_DESCRIPTION_RO</a>(<a class=\"id\" href=\"#state\">state</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#FILE_DESCRIPTION_RW\">FILE_DESCRIPTION_RW</a>(<a class=\"id\" href=\"#alarm\">alarm</a>),", 
"};", 
"", 
"#<a class=\"id\" href=\"#undef\">undef</a> <a class=\"id\" href=\"#FILE_DESCRIPTION_RO\">FILE_DESCRIPTION_RO</a>", 
"#<a class=\"id\" href=\"#undef\">undef</a> <a class=\"id\" href=\"#FILE_DESCRIPTION_RW\">FILE_DESCRIPTION_RW</a>", 
"", 
"static int <a class=\"id\" href=\"#acpi_battery_add_fs\">acpi_battery_add_fs</a>(struct <a class=\"id\" href=\"#acpi_device\">acpi_device</a> *<a class=\"id\" href=\"#device\">device</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#proc_dir_entry\">proc_dir_entry</a> *<a class=\"id\" href=\"#entry\">entry</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#acpi_device_dir\">acpi_device_dir</a>(<a class=\"id\" href=\"#device\">device</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#acpi_device_dir\">acpi_device_dir</a>(<a class=\"id\" href=\"#device\">device</a>) = <a class=\"id\" href=\"#proc_mkdir\">proc_mkdir</a>(<a class=\"id\" href=\"#acpi_device_bid\">acpi_device_bid</a>(<a class=\"id\" href=\"#device\">device</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     <a class=\"id\" href=\"#acpi_battery_dir\">acpi_battery_dir</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#acpi_device_dir\">acpi_device_dir</a>(<a class=\"id\" href=\"#device\">device</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#ACPI_BATTERY_NUMFILES\">ACPI_BATTERY_NUMFILES</a>; ++<a class=\"id\" href=\"#i\">i</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#entry\">entry</a> = <a class=\"id\" href=\"#proc_create_data\">proc_create_data</a>(<a class=\"id\" href=\"#acpi_battery_file\">acpi_battery_file</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#name\">name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#acpi_battery_file\">acpi_battery_file</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#mode\">mode</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#acpi_device_dir\">acpi_device_dir</a>(<a class=\"id\" href=\"#device\">device</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> &amp;<a class=\"id\" href=\"#acpi_battery_file\">acpi_battery_file</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#ops\">ops</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#acpi_driver_data\">acpi_driver_data</a>(<a class=\"id\" href=\"#device\">device</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#entry\">entry</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#acpi_battery_remove_fs\">acpi_battery_remove_fs</a>(struct <a class=\"id\" href=\"#acpi_device\">acpi_device</a> *<a class=\"id\" href=\"#device\">device</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#acpi_device_dir\">acpi_device_dir</a>(<a class=\"id\" href=\"#device\">device</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#ACPI_BATTERY_NUMFILES\">ACPI_BATTERY_NUMFILES</a>; ++<a class=\"id\" href=\"#i\">i</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#remove_proc_entry\">remove_proc_entry</a>(<a class=\"id\" href=\"#acpi_battery_file\">acpi_battery_file</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#name\">name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#acpi_device_dir\">acpi_device_dir</a>(<a class=\"id\" href=\"#device\">device</a>));", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#remove_proc_entry\">remove_proc_entry</a>(<a class=\"id\" href=\"#acpi_device_bid\">acpi_device_bid</a>(<a class=\"id\" href=\"#device\">device</a>), <a class=\"id\" href=\"#acpi_battery_dir\">acpi_battery_dir</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_device_dir\">acpi_device_dir</a>(<a class=\"id\" href=\"#device\">device</a>) = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"}", 
"", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"<span class=\"comment\">/* --------------------------------------------------------------------------</span>", 
"<span class=\"comment\">                                 Driver Interface</span>", 
"<span class=\"comment\">   -------------------------------------------------------------------------- */</span>", 
"", 
"static void <a class=\"id\" href=\"#acpi_battery_notify\">acpi_battery_notify</a>(struct <a class=\"id\" href=\"#acpi_device\">acpi_device</a> *<a class=\"id\" href=\"#device\">device</a>, <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#event\">event</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_battery\">acpi_battery</a> *<a class=\"id\" href=\"#battery\">battery</a> = <a class=\"id\" href=\"#acpi_driver_data\">acpi_driver_data</a>(<a class=\"id\" href=\"#device\">device</a>);", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_ACPI_SYSFS_POWER\">CONFIG_ACPI_SYSFS_POWER</a>", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#old\">old</a>;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#battery\">battery</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_ACPI_SYSFS_POWER\">CONFIG_ACPI_SYSFS_POWER</a>", 
];
xr_frag_insert('l/20/71e16b4923926131c65065e5eea7c3bb0c8979.xr', __xr_tmp);
