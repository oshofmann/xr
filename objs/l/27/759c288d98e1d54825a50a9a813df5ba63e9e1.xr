var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * 8237A DMA controller suspend functions.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Written by Pierre Ossman, 2005.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This program is free software; you can redistribute it and/or modify</span>", 
"<span class=\"comment\"> * it under the terms of the GNU General Public License as published by</span>", 
"<span class=\"comment\"> * the Free Software Foundation; either version 2 of the License, or (at</span>", 
"<span class=\"comment\"> * your option) any later version.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#init\">init</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#sysdev\">sysdev</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#dma\">dma</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * This module just handles suspend/resume issues with the</span>", 
"<span class=\"comment\"> * 8237A DMA controller (used for ISA and LPC).</span>", 
"<span class=\"comment\"> * Allocation is handled in kernel/dma.c and normal usage is</span>", 
"<span class=\"comment\"> * in asm/dma.h.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static int <a class=\"id\" href=\"#i8237A_resume\">i8237A_resume</a>(struct <a class=\"id\" href=\"#sys_device\">sys_device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#flags\">flags</a> = <a class=\"id\" href=\"#claim_dma_lock\">claim_dma_lock</a>();", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dma_outb\">dma_outb</a>(0, <a class=\"id\" href=\"#DMA1_RESET_REG\">DMA1_RESET_REG</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dma_outb\">dma_outb</a>(0, <a class=\"id\" href=\"#DMA2_RESET_REG\">DMA2_RESET_REG</a>);", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; 8; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_dma_addr\">set_dma_addr</a>(<a class=\"id\" href=\"#i\">i</a>, 0x000000);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* DMA count is a bit weird so this is not 0 */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_dma_count\">set_dma_count</a>(<a class=\"id\" href=\"#i\">i</a>, 1);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Enable cascade DMA or channel 0-3 won't work */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#enable_dma\">enable_dma</a>(4);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#release_dma_lock\">release_dma_lock</a>(<a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#i8237A_suspend\">i8237A_suspend</a>(struct <a class=\"id\" href=\"#sys_device\">sys_device</a> *<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#pm_message_t\">pm_message_t</a> <a class=\"id\" href=\"#state\">state</a>)", 
"{", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#sysdev_class\">sysdev_class</a> <a class=\"id\" href=\"#i8237_sysdev_class\">i8237_sysdev_class</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a><span class=\"ts\"/><span class=\"ts\"/>= \"i8237\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#suspend\">suspend</a><span class=\"ts\"/>= <a class=\"id\" href=\"#i8237A_suspend\">i8237A_suspend</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#resume\">resume</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#i8237A_resume\">i8237A_resume</a>,", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#sys_device\">sys_device</a> <a class=\"id\" href=\"#device_i8237A\">device_i8237A</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#id\">id</a><span class=\"ts\"/><span class=\"ts\"/>= 0,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#cls\">cls</a><span class=\"ts\"/><span class=\"ts\"/>= &amp;<a class=\"id\" href=\"#i8237_sysdev_class\">i8237_sysdev_class</a>,", 
"};", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#i8237A_init_sysfs\">i8237A_init_sysfs</a>(void)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#sysdev_class_register\">sysdev_class_register</a>(&amp;<a class=\"id\" href=\"#i8237_sysdev_class\">i8237_sysdev_class</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#error\">error</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#sysdev_register\">sysdev_register</a>(&amp;<a class=\"id\" href=\"#device_i8237A\">device_i8237A</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"}", 
"<a class=\"id\" href=\"#device_initcall\">device_initcall</a>(<a class=\"id\" href=\"#i8237A_init_sysfs\">i8237A_init_sysfs</a>);", 
];
xr_frag_insert('l/27/759c288d98e1d54825a50a9a813df5ba63e9e1.xr', __xr_tmp);
