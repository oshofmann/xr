var __xr_tmp = [
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock\">spin_unlock</a>(&amp;<a class=\"id\" href=\"#dcache_lock\">dcache_lock</a>);", 
"}", 
"", 
"<span class=\"comment\">/* Notify this dentry's parent about a child's events. */</span>", 
"void <a class=\"id\" href=\"#__fsnotify_parent\">__fsnotify_parent</a>(struct <a class=\"id\" href=\"#path\">path</a> *<a class=\"id\" href=\"#path\">path</a>, struct <a class=\"id\" href=\"#dentry\">dentry</a> *<a class=\"id\" href=\"#dentry\">dentry</a>, <a class=\"id\" href=\"#__u32\">__u32</a> <a class=\"id\" href=\"#mask\">mask</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#dentry\">dentry</a> *<a class=\"id\" href=\"#parent\">parent</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#inode\">inode</a> *<a class=\"id\" href=\"#p_inode\">p_inode</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#send\">send</a> = <a class=\"id\" href=\"#false\">false</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#should_update_children\">should_update_children</a> = <a class=\"id\" href=\"#false\">false</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#dentry\">dentry</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dentry\">dentry</a> = <a class=\"id\" href=\"#path\">path</a>-><a class=\"id\" href=\"#dentry\">dentry</a>;", 
"", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#dentry\">dentry</a>-><a class=\"id\" href=\"#d_flags\">d_flags</a> &amp; <a class=\"id\" href=\"#DCACHE_FSNOTIFY_PARENT_WATCHED\">DCACHE_FSNOTIFY_PARENT_WATCHED</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock\">spin_lock</a>(&amp;<a class=\"id\" href=\"#dentry\">dentry</a>-><a class=\"id\" href=\"#d_lock\">d_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#parent\">parent</a> = <a class=\"id\" href=\"#dentry\">dentry</a>-><a class=\"id\" href=\"#d_parent\">d_parent</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#p_inode\">p_inode</a> = <a class=\"id\" href=\"#parent\">parent</a>-><a class=\"id\" href=\"#d_inode\">d_inode</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#fsnotify_inode_watches_children\">fsnotify_inode_watches_children</a>(<a class=\"id\" href=\"#p_inode\">p_inode</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#p_inode\">p_inode</a>-><a class=\"id\" href=\"#i_fsnotify_mask\">i_fsnotify_mask</a> &amp; <a class=\"id\" href=\"#mask\">mask</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dget\">dget</a>(<a class=\"id\" href=\"#parent\">parent</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#send\">send</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * The parent doesn't care about events on it's children but</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * at least one child thought it did.  We need to run all the</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * children and update their d_flags to let them know p_inode</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * doesn't care about them any more.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dget\">dget</a>(<a class=\"id\" href=\"#parent\">parent</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#should_update_children\">should_update_children</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock\">spin_unlock</a>(&amp;<a class=\"id\" href=\"#dentry\">dentry</a>-><a class=\"id\" href=\"#d_lock\">d_lock</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#send\">send</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* we are notifying a parent so come up with the new mask which</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * specifies these are events which came from a child. */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mask\">mask</a> |= <a class=\"id\" href=\"#FS_EVENT_ON_CHILD\">FS_EVENT_ON_CHILD</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#path\">path</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#fsnotify\">fsnotify</a>(<a class=\"id\" href=\"#p_inode\">p_inode</a>, <a class=\"id\" href=\"#mask\">mask</a>, <a class=\"id\" href=\"#path\">path</a>, <a class=\"id\" href=\"#FSNOTIFY_EVENT_PATH\">FSNOTIFY_EVENT_PATH</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#dentry\">dentry</a>-><a class=\"id\" href=\"#d_name\">d_name</a>.<a class=\"id\" href=\"#name\">name</a>, 0);", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#fsnotify\">fsnotify</a>(<a class=\"id\" href=\"#p_inode\">p_inode</a>, <a class=\"id\" href=\"#mask\">mask</a>, <a class=\"id\" href=\"#dentry\">dentry</a>-><a class=\"id\" href=\"#d_inode\">d_inode</a>, <a class=\"id\" href=\"#FSNOTIFY_EVENT_INODE\">FSNOTIFY_EVENT_INODE</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#dentry\">dentry</a>-><a class=\"id\" href=\"#d_name\">d_name</a>.<a class=\"id\" href=\"#name\">name</a>, 0);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dput\">dput</a>(<a class=\"id\" href=\"#parent\">parent</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(<a class=\"id\" href=\"#should_update_children\">should_update_children</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__fsnotify_update_child_dentry_flags\">__fsnotify_update_child_dentry_flags</a>(<a class=\"id\" href=\"#p_inode\">p_inode</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dput\">dput</a>(<a class=\"id\" href=\"#parent\">parent</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#__fsnotify_parent\">__fsnotify_parent</a>);", 
"", 
"static int <a class=\"id\" href=\"#send_to_group\">send_to_group</a>(struct <a class=\"id\" href=\"#inode\">inode</a> *<a class=\"id\" href=\"#to_tell\">to_tell</a>, struct <a class=\"id\" href=\"#vfsmount\">vfsmount</a> *<a class=\"id\" href=\"#mnt\">mnt</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> struct <a class=\"id\" href=\"#fsnotify_mark\">fsnotify_mark</a> *<a class=\"id\" href=\"#inode_mark\">inode_mark</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> struct <a class=\"id\" href=\"#fsnotify_mark\">fsnotify_mark</a> *<a class=\"id\" href=\"#vfsmount_mark\">vfsmount_mark</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#__u32\">__u32</a> <a class=\"id\" href=\"#mask\">mask</a>, void *<a class=\"id\" href=\"#data\">data</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> int <a class=\"id\" href=\"#data_is\">data_is</a>, <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#cookie\">cookie</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> const unsigned char *<a class=\"id\" href=\"#file_name\">file_name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> struct <a class=\"id\" href=\"#fsnotify_event\">fsnotify_event</a> **<a class=\"id\" href=\"#event\">event</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#fsnotify_group\">fsnotify_group</a> *<a class=\"id\" href=\"#group\">group</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__u32\">__u32</a> <a class=\"id\" href=\"#inode_test_mask\">inode_test_mask</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__u32\">__u32</a> <a class=\"id\" href=\"#vfsmount_test_mask\">vfsmount_test_mask</a> = 0;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(!<a class=\"id\" href=\"#inode_mark\">inode_mark</a> && !<a class=\"id\" href=\"#vfsmount_mark\">vfsmount_mark</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BUG\">BUG</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* clear ignored on inode modification */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#mask\">mask</a> &amp; <a class=\"id\" href=\"#FS_MODIFY\">FS_MODIFY</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#inode_mark\">inode_mark</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/>    !(<a class=\"id\" href=\"#inode_mark\">inode_mark</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#FSNOTIFY_MARK_FLAG_IGNORED_SURV_MODIFY\">FSNOTIFY_MARK_FLAG_IGNORED_SURV_MODIFY</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#inode_mark\">inode_mark</a>-><a class=\"id\" href=\"#ignored_mask\">ignored_mask</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vfsmount_mark\">vfsmount_mark</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/>    !(<a class=\"id\" href=\"#vfsmount_mark\">vfsmount_mark</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#FSNOTIFY_MARK_FLAG_IGNORED_SURV_MODIFY\">FSNOTIFY_MARK_FLAG_IGNORED_SURV_MODIFY</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vfsmount_mark\">vfsmount_mark</a>-><a class=\"id\" href=\"#ignored_mask\">ignored_mask</a> = 0;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* does the inode mark tell us to do something? */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#inode_mark\">inode_mark</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#group\">group</a> = <a class=\"id\" href=\"#inode_mark\">inode_mark</a>-><a class=\"id\" href=\"#group\">group</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#inode_test_mask\">inode_test_mask</a> = (<a class=\"id\" href=\"#mask\">mask</a> &amp; ~<a class=\"id\" href=\"#FS_EVENT_ON_CHILD\">FS_EVENT_ON_CHILD</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#inode_test_mask\">inode_test_mask</a> &= <a class=\"id\" href=\"#inode_mark\">inode_mark</a>-><a class=\"id\" href=\"#mask\">mask</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#inode_test_mask\">inode_test_mask</a> &= ~<a class=\"id\" href=\"#inode_mark\">inode_mark</a>-><a class=\"id\" href=\"#ignored_mask\">ignored_mask</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* does the vfsmount_mark tell us to do something? */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#vfsmount_mark\">vfsmount_mark</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vfsmount_test_mask\">vfsmount_test_mask</a> = (<a class=\"id\" href=\"#mask\">mask</a> &amp; ~<a class=\"id\" href=\"#FS_EVENT_ON_CHILD\">FS_EVENT_ON_CHILD</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#group\">group</a> = <a class=\"id\" href=\"#vfsmount_mark\">vfsmount_mark</a>-><a class=\"id\" href=\"#group\">group</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vfsmount_test_mask\">vfsmount_test_mask</a> &= <a class=\"id\" href=\"#vfsmount_mark\">vfsmount_mark</a>-><a class=\"id\" href=\"#mask\">mask</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vfsmount_test_mask\">vfsmount_test_mask</a> &= ~<a class=\"id\" href=\"#vfsmount_mark\">vfsmount_mark</a>-><a class=\"id\" href=\"#ignored_mask\">ignored_mask</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#inode_mark\">inode_mark</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vfsmount_test_mask\">vfsmount_test_mask</a> &= ~<a class=\"id\" href=\"#inode_mark\">inode_mark</a>-><a class=\"id\" href=\"#ignored_mask\">ignored_mask</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pr_debug\">pr_debug</a>(\"%s: group=%p to_tell=%p mnt=%p mask=%x inode_mark=%p\"", 
"<span class=\"ts\"/><span class=\"ts\"/> \" inode_test_mask=%x vfsmount_mark=%p vfsmount_test_mask=%x\"", 
"<span class=\"ts\"/><span class=\"ts\"/> \" data=%p data_is=%d cookie=%d event=%p\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#group\">group</a>, <a class=\"id\" href=\"#to_tell\">to_tell</a>, <a class=\"id\" href=\"#mnt\">mnt</a>, <a class=\"id\" href=\"#mask\">mask</a>, <a class=\"id\" href=\"#inode_mark\">inode_mark</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#inode_test_mask\">inode_test_mask</a>, <a class=\"id\" href=\"#vfsmount_mark\">vfsmount_mark</a>, <a class=\"id\" href=\"#vfsmount_test_mask\">vfsmount_test_mask</a>, <a class=\"id\" href=\"#data\">data</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#data_is\">data_is</a>, <a class=\"id\" href=\"#cookie\">cookie</a>, *<a class=\"id\" href=\"#event\">event</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#inode_test_mask\">inode_test_mask</a> && !<a class=\"id\" href=\"#vfsmount_test_mask\">vfsmount_test_mask</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#group\">group</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#should_send_event\">should_send_event</a>(<a class=\"id\" href=\"#group\">group</a>, <a class=\"id\" href=\"#to_tell\">to_tell</a>, <a class=\"id\" href=\"#inode_mark\">inode_mark</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#vfsmount_mark\">vfsmount_mark</a>, <a class=\"id\" href=\"#mask\">mask</a>, <a class=\"id\" href=\"#data\">data</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#data_is\">data_is</a>) == <a class=\"id\" href=\"#false\">false</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/>if (!*<a class=\"id\" href=\"#event\">event</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#event\">event</a> = <a class=\"id\" href=\"#fsnotify_create_event\">fsnotify_create_event</a>(<a class=\"id\" href=\"#to_tell\">to_tell</a>, <a class=\"id\" href=\"#mask\">mask</a>, <a class=\"id\" href=\"#data\">data</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#data_is\">data_is</a>, <a class=\"id\" href=\"#file_name\">file_name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cookie\">cookie</a>, <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!*<a class=\"id\" href=\"#event\">event</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#group\">group</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#handle_event\">handle_event</a>(<a class=\"id\" href=\"#group\">group</a>, <a class=\"id\" href=\"#inode_mark\">inode_mark</a>, <a class=\"id\" href=\"#vfsmount_mark\">vfsmount_mark</a>, *<a class=\"id\" href=\"#event\">event</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * This is the main call to fsnotify.  The VFS calls into hook specific functions</span>", 
"<span class=\"comment\"> * in linux/fsnotify.h.  Those functions then in turn call here.  Here will call</span>", 
"<span class=\"comment\"> * out to all of the registered fsnotify_group.  Those groups can then use the</span>", 
"<span class=\"comment\"> * notification event in whatever means they feel necessary.</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#fsnotify\">fsnotify</a>(struct <a class=\"id\" href=\"#inode\">inode</a> *<a class=\"id\" href=\"#to_tell\">to_tell</a>, <a class=\"id\" href=\"#__u32\">__u32</a> <a class=\"id\" href=\"#mask\">mask</a>, void *<a class=\"id\" href=\"#data\">data</a>, int <a class=\"id\" href=\"#data_is\">data_is</a>,", 
"<span class=\"ts\"/>     const unsigned char *<a class=\"id\" href=\"#file_name\">file_name</a>, <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#cookie\">cookie</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#hlist_node\">hlist_node</a> *<a class=\"id\" href=\"#inode_node\">inode_node</a> = <a class=\"id\" href=\"#NULL\">NULL</a>, *<a class=\"id\" href=\"#vfsmount_node\">vfsmount_node</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#fsnotify_mark\">fsnotify_mark</a> *<a class=\"id\" href=\"#inode_mark\">inode_mark</a> = <a class=\"id\" href=\"#NULL\">NULL</a>, *<a class=\"id\" href=\"#vfsmount_mark\">vfsmount_mark</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#fsnotify_group\">fsnotify_group</a> *<a class=\"id\" href=\"#inode_group\">inode_group</a>, *<a class=\"id\" href=\"#vfsmount_group\">vfsmount_group</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#fsnotify_event\">fsnotify_event</a> *<a class=\"id\" href=\"#event\">event</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#vfsmount\">vfsmount</a> *<a class=\"id\" href=\"#mnt\">mnt</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#idx\">idx</a>, <a class=\"id\" href=\"#ret\">ret</a> = 0;", 
"<span class=\"ts\"/><span class=\"comment\">/* global tests shouldn't care about events on child only the specific event */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__u32\">__u32</a> <a class=\"id\" href=\"#test_mask\">test_mask</a> = (<a class=\"id\" href=\"#mask\">mask</a> &amp; ~<a class=\"id\" href=\"#FS_EVENT_ON_CHILD\">FS_EVENT_ON_CHILD</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#data_is\">data_is</a> == <a class=\"id\" href=\"#FSNOTIFY_EVENT_PATH\">FSNOTIFY_EVENT_PATH</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mnt\">mnt</a> = ((struct <a class=\"id\" href=\"#path\">path</a> *)<a class=\"id\" href=\"#data\">data</a>)-><a class=\"id\" href=\"#mnt\">mnt</a>;", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mnt\">mnt</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * if this is a modify event we may need to clear the ignored masks</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * otherwise return if neither the inode nor the vfsmount care about</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * this type of event.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#mask\">mask</a> &amp; <a class=\"id\" href=\"#FS_MODIFY\">FS_MODIFY</a>) &&", 
"<span class=\"ts\"/>    !(<a class=\"id\" href=\"#test_mask\">test_mask</a> &amp; <a class=\"id\" href=\"#to_tell\">to_tell</a>-><a class=\"id\" href=\"#i_fsnotify_mask\">i_fsnotify_mask</a>) &&", 
"<span class=\"ts\"/>    !(<a class=\"id\" href=\"#mnt\">mnt</a> && <a class=\"id\" href=\"#test_mask\">test_mask</a> &amp; <a class=\"id\" href=\"#mnt\">mnt</a>-><a class=\"id\" href=\"#mnt_fsnotify_mask\">mnt_fsnotify_mask</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#idx\">idx</a> = <a class=\"id\" href=\"#srcu_read_lock\">srcu_read_lock</a>(&amp;<a class=\"id\" href=\"#fsnotify_mark_srcu\">fsnotify_mark_srcu</a>);", 
"", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#mask\">mask</a> &amp; <a class=\"id\" href=\"#FS_MODIFY\">FS_MODIFY</a>) ||", 
"<span class=\"ts\"/>    (<a class=\"id\" href=\"#test_mask\">test_mask</a> &amp; <a class=\"id\" href=\"#to_tell\">to_tell</a>-><a class=\"id\" href=\"#i_fsnotify_mask\">i_fsnotify_mask</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#inode_node\">inode_node</a> = <a class=\"id\" href=\"#srcu_dereference\">srcu_dereference</a>(<a class=\"id\" href=\"#to_tell\">to_tell</a>-><a class=\"id\" href=\"#i_fsnotify_marks\">i_fsnotify_marks</a>.<a class=\"id\" href=\"#first\">first</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      &amp;<a class=\"id\" href=\"#fsnotify_mark_srcu\">fsnotify_mark_srcu</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#mnt\">mnt</a> && ((<a class=\"id\" href=\"#mask\">mask</a> &amp; <a class=\"id\" href=\"#FS_MODIFY\">FS_MODIFY</a>) ||", 
"<span class=\"ts\"/><span class=\"ts\"/>    (<a class=\"id\" href=\"#test_mask\">test_mask</a> &amp; <a class=\"id\" href=\"#mnt\">mnt</a>-><a class=\"id\" href=\"#mnt_fsnotify_mask\">mnt_fsnotify_mask</a>))) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vfsmount_node\">vfsmount_node</a> = <a class=\"id\" href=\"#srcu_dereference\">srcu_dereference</a>(<a class=\"id\" href=\"#mnt\">mnt</a>-><a class=\"id\" href=\"#mnt_fsnotify_marks\">mnt_fsnotify_marks</a>.<a class=\"id\" href=\"#first\">first</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> &amp;<a class=\"id\" href=\"#fsnotify_mark_srcu\">fsnotify_mark_srcu</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#inode_node\">inode_node</a> = <a class=\"id\" href=\"#srcu_dereference\">srcu_dereference</a>(<a class=\"id\" href=\"#to_tell\">to_tell</a>-><a class=\"id\" href=\"#i_fsnotify_marks\">i_fsnotify_marks</a>.<a class=\"id\" href=\"#first\">first</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      &amp;<a class=\"id\" href=\"#fsnotify_mark_srcu\">fsnotify_mark_srcu</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#inode_node\">inode_node</a> || <a class=\"id\" href=\"#vfsmount_node\">vfsmount_node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#inode_group\">inode_group</a> = <a class=\"id\" href=\"#vfsmount_group\">vfsmount_group</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#inode_node\">inode_node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#inode_mark\">inode_mark</a> = <a class=\"id\" href=\"#hlist_entry\">hlist_entry</a>(<a class=\"id\" href=\"#srcu_dereference\">srcu_dereference</a>(<a class=\"id\" href=\"#inode_node\">inode_node</a>, &amp;<a class=\"id\" href=\"#fsnotify_mark_srcu\">fsnotify_mark_srcu</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> struct <a class=\"id\" href=\"#fsnotify_mark\">fsnotify_mark</a>, <a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#i_list\">i_list</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#inode_group\">inode_group</a> = <a class=\"id\" href=\"#inode_mark\">inode_mark</a>-><a class=\"id\" href=\"#group\">group</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vfsmount_node\">vfsmount_node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vfsmount_mark\">vfsmount_mark</a> = <a class=\"id\" href=\"#hlist_entry\">hlist_entry</a>(<a class=\"id\" href=\"#srcu_dereference\">srcu_dereference</a>(<a class=\"id\" href=\"#vfsmount_node\">vfsmount_node</a>, &amp;<a class=\"id\" href=\"#fsnotify_mark_srcu\">fsnotify_mark_srcu</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#fsnotify_mark\">fsnotify_mark</a>, <a class=\"id\" href=\"#m\">m</a>.<a class=\"id\" href=\"#m_list\">m_list</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vfsmount_group\">vfsmount_group</a> = <a class=\"id\" href=\"#vfsmount_mark\">vfsmount_mark</a>-><a class=\"id\" href=\"#group\">group</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#inode_group\">inode_group</a> &gt; <a class=\"id\" href=\"#vfsmount_group\">vfsmount_group</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* handle inode */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#send_to_group\">send_to_group</a>(<a class=\"id\" href=\"#to_tell\">to_tell</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#inode_mark\">inode_mark</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#mask\">mask</a>, <a class=\"id\" href=\"#data\">data</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#data_is\">data_is</a>, <a class=\"id\" href=\"#cookie\">cookie</a>, <a class=\"id\" href=\"#file_name\">file_name</a>, &amp;<a class=\"id\" href=\"#event\">event</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* we didn't use the vfsmount_mark */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vfsmount_group\">vfsmount_group</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>} else if (<a class=\"id\" href=\"#vfsmount_group\">vfsmount_group</a> &gt; <a class=\"id\" href=\"#inode_group\">inode_group</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#send_to_group\">send_to_group</a>(<a class=\"id\" href=\"#to_tell\">to_tell</a>, <a class=\"id\" href=\"#mnt\">mnt</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#vfsmount_mark\">vfsmount_mark</a>, <a class=\"id\" href=\"#mask\">mask</a>, <a class=\"id\" href=\"#data\">data</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#data_is\">data_is</a>, <a class=\"id\" href=\"#cookie\">cookie</a>, <a class=\"id\" href=\"#file_name\">file_name</a>, &amp;<a class=\"id\" href=\"#event\">event</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#inode_group\">inode_group</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#send_to_group\">send_to_group</a>(<a class=\"id\" href=\"#to_tell\">to_tell</a>, <a class=\"id\" href=\"#mnt\">mnt</a>, <a class=\"id\" href=\"#inode_mark\">inode_mark</a>, <a class=\"id\" href=\"#vfsmount_mark\">vfsmount_mark</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#mask\">mask</a>, <a class=\"id\" href=\"#data\">data</a>, <a class=\"id\" href=\"#data_is\">data_is</a>, <a class=\"id\" href=\"#cookie\">cookie</a>, <a class=\"id\" href=\"#file_name\">file_name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      &amp;<a class=\"id\" href=\"#event\">event</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#inode_group\">inode_group</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#inode_node\">inode_node</a> = <a class=\"id\" href=\"#srcu_dereference\">srcu_dereference</a>(<a class=\"id\" href=\"#inode_node\">inode_node</a>-><a class=\"id\" href=\"#next\">next</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      &amp;<a class=\"id\" href=\"#fsnotify_mark_srcu\">fsnotify_mark_srcu</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vfsmount_group\">vfsmount_group</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vfsmount_node\">vfsmount_node</a> = <a class=\"id\" href=\"#srcu_dereference\">srcu_dereference</a>(<a class=\"id\" href=\"#vfsmount_node\">vfsmount_node</a>-><a class=\"id\" href=\"#next\">next</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> &amp;<a class=\"id\" href=\"#fsnotify_mark_srcu\">fsnotify_mark_srcu</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#srcu_read_unlock\">srcu_read_unlock</a>(&amp;<a class=\"id\" href=\"#fsnotify_mark_srcu\">fsnotify_mark_srcu</a>, <a class=\"id\" href=\"#idx\">idx</a>);", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * fsnotify_create_event() took a reference so the event can't be cleaned</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * up while we are still trying to add it to lists, drop that one.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#event\">event</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#fsnotify_put_event\">fsnotify_put_event</a>(<a class=\"id\" href=\"#event\">event</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#fsnotify\">fsnotify</a>);", 
"", 
"static <a class=\"id\" href=\"#__init\">__init</a> int <a class=\"id\" href=\"#fsnotify_init\">fsnotify_init</a>(void)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#BUG_ON\">BUG_ON</a>(<a class=\"id\" href=\"#hweight32\">hweight32</a>(<a class=\"id\" href=\"#ALL_FSNOTIFY_EVENTS\">ALL_FSNOTIFY_EVENTS</a>) != 23);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#init_srcu_struct\">init_srcu_struct</a>(&amp;<a class=\"id\" href=\"#fsnotify_mark_srcu\">fsnotify_mark_srcu</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#panic\">panic</a>(\"initializing fsnotify_mark_srcu\");", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"<a class=\"id\" href=\"#core_initcall\">core_initcall</a>(<a class=\"id\" href=\"#fsnotify_init\">fsnotify_init</a>);", 
];
xr_frag_insert('l/2e/b2d76d48833f1b78ba6a2ac6690e25b987a38d.xr', __xr_tmp);
