var __xr_tmp = [
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Anybody can rename anything with this: the permission checks are left to the</span>", 
"<span class=\"comment\"> * higher-level routines.</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#ext3_rename\">ext3_rename</a> (struct <a class=\"id\" href=\"#inode\">inode</a> * <a class=\"id\" href=\"#old_dir\">old_dir</a>, struct <a class=\"id\" href=\"#dentry\">dentry</a> *<a class=\"id\" href=\"#old_dentry\">old_dentry</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   struct <a class=\"id\" href=\"#inode\">inode</a> * <a class=\"id\" href=\"#new_dir\">new_dir</a>,struct <a class=\"id\" href=\"#dentry\">dentry</a> *<a class=\"id\" href=\"#new_dentry\">new_dentry</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#handle_t\">handle_t</a> *<a class=\"id\" href=\"#handle\">handle</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#inode\">inode</a> * <a class=\"id\" href=\"#old_inode\">old_inode</a>, * <a class=\"id\" href=\"#new_inode\">new_inode</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#buffer_head\">buffer_head</a> * <a class=\"id\" href=\"#old_bh\">old_bh</a>, * <a class=\"id\" href=\"#new_bh\">new_bh</a>, * <a class=\"id\" href=\"#dir_bh\">dir_bh</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ext3_dir_entry_2\">ext3_dir_entry_2</a> * <a class=\"id\" href=\"#old_de\">old_de</a>, * <a class=\"id\" href=\"#new_de\">new_de</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a>, <a class=\"id\" href=\"#flush_file\">flush_file</a> = 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dquot_initialize\">dquot_initialize</a>(<a class=\"id\" href=\"#old_dir\">old_dir</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dquot_initialize\">dquot_initialize</a>(<a class=\"id\" href=\"#new_dir\">new_dir</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#old_bh\">old_bh</a> = <a class=\"id\" href=\"#new_bh\">new_bh</a> = <a class=\"id\" href=\"#dir_bh\">dir_bh</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Initialize quotas before so that eventual writes go</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * in separate transaction */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#new_dentry\">new_dentry</a>-><a class=\"id\" href=\"#d_inode\">d_inode</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dquot_initialize\">dquot_initialize</a>(<a class=\"id\" href=\"#new_dentry\">new_dentry</a>-><a class=\"id\" href=\"#d_inode\">d_inode</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#handle\">handle</a> = <a class=\"id\" href=\"#ext3_journal_start\">ext3_journal_start</a>(<a class=\"id\" href=\"#old_dir\">old_dir</a>, 2 *", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#EXT3_DATA_TRANS_BLOCKS\">EXT3_DATA_TRANS_BLOCKS</a>(<a class=\"id\" href=\"#old_dir\">old_dir</a>-><a class=\"id\" href=\"#i_sb\">i_sb</a>) +", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#EXT3_INDEX_EXTRA_TRANS_BLOCKS\">EXT3_INDEX_EXTRA_TRANS_BLOCKS</a> + 2);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#IS_ERR\">IS_ERR</a>(<a class=\"id\" href=\"#handle\">handle</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#PTR_ERR\">PTR_ERR</a>(<a class=\"id\" href=\"#handle\">handle</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#IS_DIRSYNC\">IS_DIRSYNC</a>(<a class=\"id\" href=\"#old_dir\">old_dir</a>) || <a class=\"id\" href=\"#IS_DIRSYNC\">IS_DIRSYNC</a>(<a class=\"id\" href=\"#new_dir\">new_dir</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#handle\">handle</a>-><a class=\"id\" href=\"#h_sync\">h_sync</a> = 1;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#old_bh\">old_bh</a> = <a class=\"id\" href=\"#ext3_find_entry\">ext3_find_entry</a>(<a class=\"id\" href=\"#old_dir\">old_dir</a>, &amp;<a class=\"id\" href=\"#old_dentry\">old_dentry</a>-><a class=\"id\" href=\"#d_name\">d_name</a>, &amp;<a class=\"id\" href=\"#old_de\">old_de</a>);", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *  Check for inode number is _not_ due to possible IO errors.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *  We might rmdir the source, keep it as pwd of some process</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *  and merrily kill the link to whatever was created under the</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *  same name. Goodbye sticky bit ;-&lt;</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#old_inode\">old_inode</a> = <a class=\"id\" href=\"#old_dentry\">old_dentry</a>-><a class=\"id\" href=\"#d_inode\">d_inode</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = -<a class=\"id\" href=\"#ENOENT\">ENOENT</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#old_bh\">old_bh</a> || <a class=\"id\" href=\"#le32_to_cpu\">le32_to_cpu</a>(<a class=\"id\" href=\"#old_de\">old_de</a>-><a class=\"id\" href=\"#inode\">inode</a>) != <a class=\"id\" href=\"#old_inode\">old_inode</a>-><a class=\"id\" href=\"#i_ino\">i_ino</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#end_rename\">end_rename</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#new_inode\">new_inode</a> = <a class=\"id\" href=\"#new_dentry\">new_dentry</a>-><a class=\"id\" href=\"#d_inode\">d_inode</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#new_bh\">new_bh</a> = <a class=\"id\" href=\"#ext3_find_entry\">ext3_find_entry</a>(<a class=\"id\" href=\"#new_dir\">new_dir</a>, &amp;<a class=\"id\" href=\"#new_dentry\">new_dentry</a>-><a class=\"id\" href=\"#d_name\">d_name</a>, &amp;<a class=\"id\" href=\"#new_de\">new_de</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#new_bh\">new_bh</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#new_inode\">new_inode</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#brelse\">brelse</a> (<a class=\"id\" href=\"#new_bh\">new_bh</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_bh\">new_bh</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#S_ISDIR\">S_ISDIR</a>(<a class=\"id\" href=\"#old_inode\">old_inode</a>-><a class=\"id\" href=\"#i_mode\">i_mode</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#new_inode\">new_inode</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = -<a class=\"id\" href=\"#ENOTEMPTY\">ENOTEMPTY</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#empty_dir\">empty_dir</a> (<a class=\"id\" href=\"#new_inode\">new_inode</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#end_rename\">end_rename</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dir_bh\">dir_bh</a> = <a class=\"id\" href=\"#ext3_bread\">ext3_bread</a> (<a class=\"id\" href=\"#handle\">handle</a>, <a class=\"id\" href=\"#old_inode\">old_inode</a>, 0, 0, &amp;<a class=\"id\" href=\"#retval\">retval</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#dir_bh\">dir_bh</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#end_rename\">end_rename</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#le32_to_cpu\">le32_to_cpu</a>(<a class=\"id\" href=\"#PARENT_INO\">PARENT_INO</a>(<a class=\"id\" href=\"#dir_bh\">dir_bh</a>-><a class=\"id\" href=\"#b_data\">b_data</a>)) != <a class=\"id\" href=\"#old_dir\">old_dir</a>-><a class=\"id\" href=\"#i_ino\">i_ino</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#end_rename\">end_rename</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = -<a class=\"id\" href=\"#EMLINK\">EMLINK</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#new_inode\">new_inode</a> && <a class=\"id\" href=\"#new_dir\">new_dir</a>!=<a class=\"id\" href=\"#old_dir\">old_dir</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_dir\">new_dir</a>-><a class=\"id\" href=\"#i_nlink\">i_nlink</a> >= <a class=\"id\" href=\"#EXT3_LINK_MAX\">EXT3_LINK_MAX</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#end_rename\">end_rename</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#new_bh\">new_bh</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#ext3_add_entry\">ext3_add_entry</a> (<a class=\"id\" href=\"#handle\">handle</a>, <a class=\"id\" href=\"#new_dentry\">new_dentry</a>, <a class=\"id\" href=\"#old_inode\">old_inode</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#end_rename\">end_rename</a>;", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BUFFER_TRACE\">BUFFER_TRACE</a>(<a class=\"id\" href=\"#new_bh\">new_bh</a>, \"get write access\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ext3_journal_get_write_access\">ext3_journal_get_write_access</a>(<a class=\"id\" href=\"#handle\">handle</a>, <a class=\"id\" href=\"#new_bh\">new_bh</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_de\">new_de</a>-><a class=\"id\" href=\"#inode\">inode</a> = <a class=\"id\" href=\"#cpu_to_le32\">cpu_to_le32</a>(<a class=\"id\" href=\"#old_inode\">old_inode</a>-><a class=\"id\" href=\"#i_ino\">i_ino</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#EXT3_HAS_INCOMPAT_FEATURE\">EXT3_HAS_INCOMPAT_FEATURE</a>(<a class=\"id\" href=\"#new_dir\">new_dir</a>-><a class=\"id\" href=\"#i_sb\">i_sb</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#EXT3_FEATURE_INCOMPAT_FILETYPE\">EXT3_FEATURE_INCOMPAT_FILETYPE</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_de\">new_de</a>-><a class=\"id\" href=\"#file_type\">file_type</a> = <a class=\"id\" href=\"#old_de\">old_de</a>-><a class=\"id\" href=\"#file_type\">file_type</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_dir\">new_dir</a>-><a class=\"id\" href=\"#i_version\">i_version</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_dir\">new_dir</a>-><a class=\"id\" href=\"#i_ctime\">i_ctime</a> = <a class=\"id\" href=\"#new_dir\">new_dir</a>-><a class=\"id\" href=\"#i_mtime\">i_mtime</a> = <a class=\"id\" href=\"#CURRENT_TIME_SEC\">CURRENT_TIME_SEC</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ext3_mark_inode_dirty\">ext3_mark_inode_dirty</a>(<a class=\"id\" href=\"#handle\">handle</a>, <a class=\"id\" href=\"#new_dir\">new_dir</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BUFFER_TRACE\">BUFFER_TRACE</a>(<a class=\"id\" href=\"#new_bh\">new_bh</a>, \"call ext3_journal_dirty_metadata\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ext3_journal_dirty_metadata\">ext3_journal_dirty_metadata</a>(<a class=\"id\" href=\"#handle\">handle</a>, <a class=\"id\" href=\"#new_bh\">new_bh</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#brelse\">brelse</a>(<a class=\"id\" href=\"#new_bh\">new_bh</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_bh\">new_bh</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Like most other Unix systems, set the ctime for inodes on a</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * rename.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#old_inode\">old_inode</a>-><a class=\"id\" href=\"#i_ctime\">i_ctime</a> = <a class=\"id\" href=\"#CURRENT_TIME_SEC\">CURRENT_TIME_SEC</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ext3_mark_inode_dirty\">ext3_mark_inode_dirty</a>(<a class=\"id\" href=\"#handle\">handle</a>, <a class=\"id\" href=\"#old_inode\">old_inode</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * ok, that's it</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#le32_to_cpu\">le32_to_cpu</a>(<a class=\"id\" href=\"#old_de\">old_de</a>-><a class=\"id\" href=\"#inode\">inode</a>) != <a class=\"id\" href=\"#old_inode\">old_inode</a>-><a class=\"id\" href=\"#i_ino\">i_ino</a> ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#old_de\">old_de</a>-><a class=\"id\" href=\"#name_len\">name_len</a> != <a class=\"id\" href=\"#old_dentry\">old_dentry</a>-><a class=\"id\" href=\"#d_name\">d_name</a>.<a class=\"id\" href=\"#len\">len</a> ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#old_de\">old_de</a>-><a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#old_dentry\">old_dentry</a>-><a class=\"id\" href=\"#d_name\">d_name</a>.<a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#old_de\">old_de</a>-><a class=\"id\" href=\"#name_len\">name_len</a>) ||", 
"<span class=\"ts\"/>    (<a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#ext3_delete_entry\">ext3_delete_entry</a>(<a class=\"id\" href=\"#handle\">handle</a>, <a class=\"id\" href=\"#old_dir\">old_dir</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#old_de\">old_de</a>, <a class=\"id\" href=\"#old_bh\">old_bh</a>)) == -<a class=\"id\" href=\"#ENOENT\">ENOENT</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* old_de could have moved from under us during htree split, so</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * make sure that we are deleting the right entry.  We might</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * also be pointing to a stale entry in the unused part of</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * old_bh so just checking inum and the name isn't enough. */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#buffer_head\">buffer_head</a> *<a class=\"id\" href=\"#old_bh2\">old_bh2</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#ext3_dir_entry_2\">ext3_dir_entry_2</a> *<a class=\"id\" href=\"#old_de2\">old_de2</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#old_bh2\">old_bh2</a> = <a class=\"id\" href=\"#ext3_find_entry\">ext3_find_entry</a>(<a class=\"id\" href=\"#old_dir\">old_dir</a>, &amp;<a class=\"id\" href=\"#old_dentry\">old_dentry</a>-><a class=\"id\" href=\"#d_name\">d_name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  &amp;<a class=\"id\" href=\"#old_de2\">old_de2</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#old_bh2\">old_bh2</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#ext3_delete_entry\">ext3_delete_entry</a>(<a class=\"id\" href=\"#handle\">handle</a>, <a class=\"id\" href=\"#old_dir\">old_dir</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#old_de2\">old_de2</a>, <a class=\"id\" href=\"#old_bh2\">old_bh2</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#brelse\">brelse</a>(<a class=\"id\" href=\"#old_bh2\">old_bh2</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ext3_warning\">ext3_warning</a>(<a class=\"id\" href=\"#old_dir\">old_dir</a>-><a class=\"id\" href=\"#i_sb\">i_sb</a>, \"ext3_rename\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"Deleting old file (%lu), %d, error=%d\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#old_dir\">old_dir</a>-><a class=\"id\" href=\"#i_ino\">i_ino</a>, <a class=\"id\" href=\"#old_dir\">old_dir</a>-><a class=\"id\" href=\"#i_nlink\">i_nlink</a>, <a class=\"id\" href=\"#retval\">retval</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#new_inode\">new_inode</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#drop_nlink\">drop_nlink</a>(<a class=\"id\" href=\"#new_inode\">new_inode</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_inode\">new_inode</a>-><a class=\"id\" href=\"#i_ctime\">i_ctime</a> = <a class=\"id\" href=\"#CURRENT_TIME_SEC\">CURRENT_TIME_SEC</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#old_dir\">old_dir</a>-><a class=\"id\" href=\"#i_ctime\">i_ctime</a> = <a class=\"id\" href=\"#old_dir\">old_dir</a>-><a class=\"id\" href=\"#i_mtime\">i_mtime</a> = <a class=\"id\" href=\"#CURRENT_TIME_SEC\">CURRENT_TIME_SEC</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ext3_update_dx_flag\">ext3_update_dx_flag</a>(<a class=\"id\" href=\"#old_dir\">old_dir</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#dir_bh\">dir_bh</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BUFFER_TRACE\">BUFFER_TRACE</a>(<a class=\"id\" href=\"#dir_bh\">dir_bh</a>, \"get_write_access\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ext3_journal_get_write_access\">ext3_journal_get_write_access</a>(<a class=\"id\" href=\"#handle\">handle</a>, <a class=\"id\" href=\"#dir_bh\">dir_bh</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#PARENT_INO\">PARENT_INO</a>(<a class=\"id\" href=\"#dir_bh\">dir_bh</a>-><a class=\"id\" href=\"#b_data\">b_data</a>) = <a class=\"id\" href=\"#cpu_to_le32\">cpu_to_le32</a>(<a class=\"id\" href=\"#new_dir\">new_dir</a>-><a class=\"id\" href=\"#i_ino\">i_ino</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BUFFER_TRACE\">BUFFER_TRACE</a>(<a class=\"id\" href=\"#dir_bh\">dir_bh</a>, \"call ext3_journal_dirty_metadata\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ext3_journal_dirty_metadata\">ext3_journal_dirty_metadata</a>(<a class=\"id\" href=\"#handle\">handle</a>, <a class=\"id\" href=\"#dir_bh\">dir_bh</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#drop_nlink\">drop_nlink</a>(<a class=\"id\" href=\"#old_dir\">old_dir</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#new_inode\">new_inode</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#drop_nlink\">drop_nlink</a>(<a class=\"id\" href=\"#new_inode\">new_inode</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#inc_nlink\">inc_nlink</a>(<a class=\"id\" href=\"#new_dir\">new_dir</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ext3_update_dx_flag\">ext3_update_dx_flag</a>(<a class=\"id\" href=\"#new_dir\">new_dir</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ext3_mark_inode_dirty\">ext3_mark_inode_dirty</a>(<a class=\"id\" href=\"#handle\">handle</a>, <a class=\"id\" href=\"#new_dir\">new_dir</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ext3_mark_inode_dirty\">ext3_mark_inode_dirty</a>(<a class=\"id\" href=\"#handle\">handle</a>, <a class=\"id\" href=\"#old_dir\">old_dir</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#new_inode\">new_inode</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ext3_mark_inode_dirty\">ext3_mark_inode_dirty</a>(<a class=\"id\" href=\"#handle\">handle</a>, <a class=\"id\" href=\"#new_inode\">new_inode</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#new_inode\">new_inode</a>-><a class=\"id\" href=\"#i_nlink\">i_nlink</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ext3_orphan_add\">ext3_orphan_add</a>(<a class=\"id\" href=\"#handle\">handle</a>, <a class=\"id\" href=\"#new_inode\">new_inode</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ext3_should_writeback_data\">ext3_should_writeback_data</a>(<a class=\"id\" href=\"#new_inode\">new_inode</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#flush_file\">flush_file</a> = 1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = 0;", 
"", 
"<a class=\"id\" href=\"#end_rename\">end_rename</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#brelse\">brelse</a> (<a class=\"id\" href=\"#dir_bh\">dir_bh</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#brelse\">brelse</a> (<a class=\"id\" href=\"#old_bh\">old_bh</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#brelse\">brelse</a> (<a class=\"id\" href=\"#new_bh\">new_bh</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ext3_journal_stop\">ext3_journal_stop</a>(<a class=\"id\" href=\"#handle\">handle</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a> == 0 && <a class=\"id\" href=\"#flush_file\">flush_file</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#filemap_flush\">filemap_flush</a>(<a class=\"id\" href=\"#old_inode\">old_inode</a>-><a class=\"id\" href=\"#i_mapping\">i_mapping</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * directories can handle most operations...</span>", 
"<span class=\"comment\"> */</span>", 
"const struct <a class=\"id\" href=\"#inode_operations\">inode_operations</a> <a class=\"id\" href=\"#ext3_dir_inode_operations\">ext3_dir_inode_operations</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#create\">create</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ext3_create\">ext3_create</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#lookup\">lookup</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ext3_lookup\">ext3_lookup</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#link\">link</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ext3_link\">ext3_link</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#unlink\">unlink</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ext3_unlink\">ext3_unlink</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#symlink\">symlink</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ext3_symlink\">ext3_symlink</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#mkdir\">mkdir</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ext3_mkdir\">ext3_mkdir</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#rmdir\">rmdir</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ext3_rmdir\">ext3_rmdir</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#mknod\">mknod</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ext3_mknod\">ext3_mknod</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#rename\">rename</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ext3_rename\">ext3_rename</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#setattr\">setattr</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ext3_setattr\">ext3_setattr</a>,", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_EXT3_FS_XATTR\">CONFIG_EXT3_FS_XATTR</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#setxattr\">setxattr</a><span class=\"ts\"/>= <a class=\"id\" href=\"#generic_setxattr\">generic_setxattr</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#getxattr\">getxattr</a><span class=\"ts\"/>= <a class=\"id\" href=\"#generic_getxattr\">generic_getxattr</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#listxattr\">listxattr</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ext3_listxattr\">ext3_listxattr</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#removexattr\">removexattr</a><span class=\"ts\"/>= <a class=\"id\" href=\"#generic_removexattr\">generic_removexattr</a>,", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#check_acl\">check_acl</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ext3_check_acl\">ext3_check_acl</a>,", 
"};", 
"", 
"const struct <a class=\"id\" href=\"#inode_operations\">inode_operations</a> <a class=\"id\" href=\"#ext3_special_inode_operations\">ext3_special_inode_operations</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#setattr\">setattr</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ext3_setattr\">ext3_setattr</a>,", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_EXT3_FS_XATTR\">CONFIG_EXT3_FS_XATTR</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#setxattr\">setxattr</a><span class=\"ts\"/>= <a class=\"id\" href=\"#generic_setxattr\">generic_setxattr</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#getxattr\">getxattr</a><span class=\"ts\"/>= <a class=\"id\" href=\"#generic_getxattr\">generic_getxattr</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#listxattr\">listxattr</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ext3_listxattr\">ext3_listxattr</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#removexattr\">removexattr</a><span class=\"ts\"/>= <a class=\"id\" href=\"#generic_removexattr\">generic_removexattr</a>,", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#check_acl\">check_acl</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ext3_check_acl\">ext3_check_acl</a>,", 
"};", 
];
xr_frag_insert('l/2f/53a23f4e5ae6607fd0550bfc7b82ff2fbe0cd4.xr', __xr_tmp);
