var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * drivers/pci/slot.c</span>", 
"<span class=\"comment\"> * Copyright (C) 2006 Matthew Wilcox &lt;matthew@wil.cx&gt;</span>", 
"<span class=\"comment\"> * Copyright (C) 2006-2009 Hewlett-Packard Development Company, L.P.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Alex Chiang &lt;achiang@hp.com&gt;</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kobject\">kobject</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#slab\">slab</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#pci\">pci</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#err\">err</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> \"pci.h\"", 
"", 
"struct <a class=\"id\" href=\"#kset\">kset</a> *<a class=\"id\" href=\"#pci_slots_kset\">pci_slots_kset</a>;", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#pci_slots_kset\">pci_slots_kset</a>);", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#pci_slot_attr_show\">pci_slot_attr_show</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#attribute\">attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_slot\">pci_slot</a> *<a class=\"id\" href=\"#slot\">slot</a> = <a class=\"id\" href=\"#to_pci_slot\">to_pci_slot</a>(<a class=\"id\" href=\"#kobj\">kobj</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_slot_attribute\">pci_slot_attribute</a> *<a class=\"id\" href=\"#attribute\">attribute</a> = <a class=\"id\" href=\"#to_pci_slot_attr\">to_pci_slot_attr</a>(<a class=\"id\" href=\"#attr\">attr</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#attribute\">attribute</a>-><a class=\"id\" href=\"#show\">show</a> ? <a class=\"id\" href=\"#attribute\">attribute</a>-><a class=\"id\" href=\"#show\">show</a>(<a class=\"id\" href=\"#slot\">slot</a>, <a class=\"id\" href=\"#buf\">buf</a>) : -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#pci_slot_attr_store\">pci_slot_attr_store</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#attribute\">attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, const char *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#len\">len</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_slot\">pci_slot</a> *<a class=\"id\" href=\"#slot\">slot</a> = <a class=\"id\" href=\"#to_pci_slot\">to_pci_slot</a>(<a class=\"id\" href=\"#kobj\">kobj</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_slot_attribute\">pci_slot_attribute</a> *<a class=\"id\" href=\"#attribute\">attribute</a> = <a class=\"id\" href=\"#to_pci_slot_attr\">to_pci_slot_attr</a>(<a class=\"id\" href=\"#attr\">attr</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#attribute\">attribute</a>-><a class=\"id\" href=\"#store\">store</a> ? <a class=\"id\" href=\"#attribute\">attribute</a>-><a class=\"id\" href=\"#store\">store</a>(<a class=\"id\" href=\"#slot\">slot</a>, <a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#len\">len</a>) : -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"}", 
"", 
"static const struct <a class=\"id\" href=\"#sysfs_ops\">sysfs_ops</a> <a class=\"id\" href=\"#pci_slot_sysfs_ops\">pci_slot_sysfs_ops</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#show\">show</a> = <a class=\"id\" href=\"#pci_slot_attr_show\">pci_slot_attr_show</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#store\">store</a> = <a class=\"id\" href=\"#pci_slot_attr_store\">pci_slot_attr_store</a>,", 
"};", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#address_read_file\">address_read_file</a>(struct <a class=\"id\" href=\"#pci_slot\">pci_slot</a> *<a class=\"id\" href=\"#slot\">slot</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#number\">number</a> == 0xff)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%04x:%02x\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pci_domain_nr\">pci_domain_nr</a>(<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#bus\">bus</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#bus\">bus</a>-><a class=\"id\" href=\"#number\">number</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%04x:%02x:%02x\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pci_domain_nr\">pci_domain_nr</a>(<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#bus\">bus</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#bus\">bus</a>-><a class=\"id\" href=\"#number\">number</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#number\">number</a>);", 
"}", 
"", 
"<span class=\"comment\">/* these strings match up with the values in pci_bus_speed */</span>", 
"static const char *<a class=\"id\" href=\"#pci_bus_speed_strings\">pci_bus_speed_strings</a>[] = {", 
"<span class=\"ts\"/>\"33 MHz PCI\",<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* 0x00 */</span>", 
"<span class=\"ts\"/>\"66 MHz PCI\",<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* 0x01 */</span>", 
"<span class=\"ts\"/>\"66 MHz PCI-X\", <span class=\"ts\"/><span class=\"comment\">/* 0x02 */</span>", 
"<span class=\"ts\"/>\"100 MHz PCI-X\",<span class=\"ts\"/><span class=\"comment\">/* 0x03 */</span>", 
"<span class=\"ts\"/>\"133 MHz PCI-X\",<span class=\"ts\"/><span class=\"comment\">/* 0x04 */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#NULL\">NULL</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* 0x05 */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#NULL\">NULL</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* 0x06 */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#NULL\">NULL</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* 0x07 */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#NULL\">NULL</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* 0x08 */</span>", 
"<span class=\"ts\"/>\"66 MHz PCI-X 266\",<span class=\"ts\"/><span class=\"comment\">/* 0x09 */</span>", 
"<span class=\"ts\"/>\"100 MHz PCI-X 266\",<span class=\"ts\"/><span class=\"comment\">/* 0x0a */</span>", 
"<span class=\"ts\"/>\"133 MHz PCI-X 266\",<span class=\"ts\"/><span class=\"comment\">/* 0x0b */</span>", 
"<span class=\"ts\"/>\"Unknown AGP\",<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* 0x0c */</span>", 
"<span class=\"ts\"/>\"1x AGP\",<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* 0x0d */</span>", 
"<span class=\"ts\"/>\"2x AGP\",<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* 0x0e */</span>", 
"<span class=\"ts\"/>\"4x AGP\",<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* 0x0f */</span>", 
"<span class=\"ts\"/>\"8x AGP\",<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* 0x10 */</span>", 
"<span class=\"ts\"/>\"66 MHz PCI-X 533\",<span class=\"ts\"/><span class=\"comment\">/* 0x11 */</span>", 
"<span class=\"ts\"/>\"100 MHz PCI-X 533\",<span class=\"ts\"/><span class=\"comment\">/* 0x12 */</span>", 
"<span class=\"ts\"/>\"133 MHz PCI-X 533\",<span class=\"ts\"/><span class=\"comment\">/* 0x13 */</span>", 
"<span class=\"ts\"/>\"2.5 GT/s PCIe\",<span class=\"ts\"/><span class=\"comment\">/* 0x14 */</span>", 
"<span class=\"ts\"/>\"5.0 GT/s PCIe\",<span class=\"ts\"/><span class=\"comment\">/* 0x15 */</span>", 
"<span class=\"ts\"/>\"8.0 GT/s PCIe\",<span class=\"ts\"/><span class=\"comment\">/* 0x16 */</span>", 
"};", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#bus_speed_read\">bus_speed_read</a>(enum <a class=\"id\" href=\"#pci_bus_speed\">pci_bus_speed</a> <a class=\"id\" href=\"#speed\">speed</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>const char *<a class=\"id\" href=\"#speed_string\">speed_string</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#speed\">speed</a> &lt; <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#pci_bus_speed_strings\">pci_bus_speed_strings</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#speed_string\">speed_string</a> = <a class=\"id\" href=\"#pci_bus_speed_strings\">pci_bus_speed_strings</a>[<a class=\"id\" href=\"#speed\">speed</a>];", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#speed_string\">speed_string</a> = \"Unknown\";", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%s\\n\", <a class=\"id\" href=\"#speed_string\">speed_string</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#max_speed_read_file\">max_speed_read_file</a>(struct <a class=\"id\" href=\"#pci_slot\">pci_slot</a> *<a class=\"id\" href=\"#slot\">slot</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#bus_speed_read\">bus_speed_read</a>(<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#bus\">bus</a>-><a class=\"id\" href=\"#max_bus_speed\">max_bus_speed</a>, <a class=\"id\" href=\"#buf\">buf</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#cur_speed_read_file\">cur_speed_read_file</a>(struct <a class=\"id\" href=\"#pci_slot\">pci_slot</a> *<a class=\"id\" href=\"#slot\">slot</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#bus_speed_read\">bus_speed_read</a>(<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#bus\">bus</a>-><a class=\"id\" href=\"#cur_bus_speed\">cur_bus_speed</a>, <a class=\"id\" href=\"#buf\">buf</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#pci_slot_release\">pci_slot_release</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_slot\">pci_slot</a> *<a class=\"id\" href=\"#slot\">slot</a> = <a class=\"id\" href=\"#to_pci_slot\">to_pci_slot</a>(<a class=\"id\" href=\"#kobj\">kobj</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_dbg\">dev_dbg</a>(&amp;<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#bus\">bus</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"dev %02x, released physical slot %s\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#number\">number</a>, <a class=\"id\" href=\"#pci_slot_name\">pci_slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>));", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#bus\">bus</a>-><a class=\"id\" href=\"#devices\">devices</a>, <a class=\"id\" href=\"#bus_list\">bus_list</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#PCI_SLOT\">PCI_SLOT</a>(<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#devfn\">devfn</a>) == <a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#number\">number</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#slot\">slot</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_del\">list_del</a>(&amp;<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#list\">list</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#slot\">slot</a>);", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#pci_slot_attribute\">pci_slot_attribute</a> <a class=\"id\" href=\"#pci_slot_attr_address\">pci_slot_attr_address</a> =", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__ATTR\">__ATTR</a>(<a class=\"id\" href=\"#address\">address</a>, (<a class=\"id\" href=\"#S_IFREG\">S_IFREG</a> | <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>), <a class=\"id\" href=\"#address_read_file\">address_read_file</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"static struct <a class=\"id\" href=\"#pci_slot_attribute\">pci_slot_attribute</a> <a class=\"id\" href=\"#pci_slot_attr_max_speed\">pci_slot_attr_max_speed</a> =", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__ATTR\">__ATTR</a>(<a class=\"id\" href=\"#max_bus_speed\">max_bus_speed</a>, (<a class=\"id\" href=\"#S_IFREG\">S_IFREG</a> | <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>), <a class=\"id\" href=\"#max_speed_read_file\">max_speed_read_file</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"static struct <a class=\"id\" href=\"#pci_slot_attribute\">pci_slot_attribute</a> <a class=\"id\" href=\"#pci_slot_attr_cur_speed\">pci_slot_attr_cur_speed</a> =", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__ATTR\">__ATTR</a>(<a class=\"id\" href=\"#cur_bus_speed\">cur_bus_speed</a>, (<a class=\"id\" href=\"#S_IFREG\">S_IFREG</a> | <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>), <a class=\"id\" href=\"#cur_speed_read_file\">cur_speed_read_file</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"", 
"static struct <a class=\"id\" href=\"#attribute\">attribute</a> *<a class=\"id\" href=\"#pci_slot_default_attrs\">pci_slot_default_attrs</a>[] = {", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#pci_slot_attr_address\">pci_slot_attr_address</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#pci_slot_attr_max_speed\">pci_slot_attr_max_speed</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#pci_slot_attr_cur_speed\">pci_slot_attr_cur_speed</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#NULL\">NULL</a>,", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#kobj_type\">kobj_type</a> <a class=\"id\" href=\"#pci_slot_ktype\">pci_slot_ktype</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#sysfs_ops\">sysfs_ops</a> = &amp;<a class=\"id\" href=\"#pci_slot_sysfs_ops\">pci_slot_sysfs_ops</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#release\">release</a> = &amp;<a class=\"id\" href=\"#pci_slot_release\">pci_slot_release</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#default_attrs\">default_attrs</a> = <a class=\"id\" href=\"#pci_slot_default_attrs\">pci_slot_default_attrs</a>,", 
"};", 
"", 
"static char *<a class=\"id\" href=\"#make_slot_name\">make_slot_name</a>(const char *<a class=\"id\" href=\"#name\">name</a>)", 
"{", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#new_name\">new_name</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#len\">len</a>, <a class=\"id\" href=\"#max\">max</a>, <a class=\"id\" href=\"#dup\">dup</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#new_name\">new_name</a> = <a class=\"id\" href=\"#kstrdup\">kstrdup</a>(<a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#new_name\">new_name</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Make sure we hit the realloc case the first time through the</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * loop.  'len' will be strlen(name) + 3 at that point which is</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * enough space for \"name-X\" and the trailing NUL.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a> = <a class=\"id\" href=\"#strlen\">strlen</a>(<a class=\"id\" href=\"#name\">name</a>) + 2;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#max\">max</a> = 1;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dup\">dup</a> = 1;", 
"", 
"<span class=\"ts\"/>for (;;) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#dup_slot\">dup_slot</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dup_slot\">dup_slot</a> = <a class=\"id\" href=\"#kset_find_obj\">kset_find_obj</a>(<a class=\"id\" href=\"#pci_slots_kset\">pci_slots_kset</a>, <a class=\"id\" href=\"#new_name\">new_name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#dup_slot\">dup_slot</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kobject_put\">kobject_put</a>(<a class=\"id\" href=\"#dup_slot\">dup_slot</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#dup\">dup</a> == <a class=\"id\" href=\"#max\">max</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#max\">max</a> *= 10;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#new_name\">new_name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_name\">new_name</a> = <a class=\"id\" href=\"#kmalloc\">kmalloc</a>(<a class=\"id\" href=\"#len\">len</a>, <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#new_name\">new_name</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#new_name\">new_name</a>, \"%s-%d\", <a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#dup\">dup</a>++);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#new_name\">new_name</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#rename_slot\">rename_slot</a>(struct <a class=\"id\" href=\"#pci_slot\">pci_slot</a> *<a class=\"id\" href=\"#slot\">slot</a>, const char *<a class=\"id\" href=\"#name\">name</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#result\">result</a> = 0;", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#slot_name\">slot_name</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#strcmp\">strcmp</a>(<a class=\"id\" href=\"#pci_slot_name\">pci_slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>), <a class=\"id\" href=\"#name\">name</a>) == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#result\">result</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#slot_name\">slot_name</a> = <a class=\"id\" href=\"#make_slot_name\">make_slot_name</a>(<a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#slot_name\">slot_name</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#kobject_rename\">kobject_rename</a>(&amp;<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#kobj\">kobj</a>, <a class=\"id\" href=\"#slot_name\">slot_name</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#slot_name\">slot_name</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#result\">result</a>;", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#pci_slot\">pci_slot</a> *<a class=\"id\" href=\"#get_slot\">get_slot</a>(struct <a class=\"id\" href=\"#pci_bus\">pci_bus</a> *<a class=\"id\" href=\"#parent\">parent</a>, int <a class=\"id\" href=\"#slot_nr\">slot_nr</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_slot\">pci_slot</a> *<a class=\"id\" href=\"#slot\">slot</a>;", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * We already hold pci_bus_sem so don't worry</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#slot\">slot</a>, &amp;<a class=\"id\" href=\"#parent\">parent</a>-><a class=\"id\" href=\"#slots\">slots</a>, <a class=\"id\" href=\"#list\">list</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#number\">number</a> == <a class=\"id\" href=\"#slot_nr\">slot_nr</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kobject_get\">kobject_get</a>(&amp;<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#kobj\">kobj</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#slot\">slot</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * pci_create_slot - create or increment refcount for physical PCI slot</span>", 
"<span class=\"comment\"> * @parent: struct pci_bus of parent bridge</span>", 
"<span class=\"comment\"> * @slot_nr: PCI_SLOT(pci_dev-&gt;devfn) or -1 for placeholder</span>", 
"<span class=\"comment\"> * @name: user visible string presented in /sys/bus/pci/slots/&lt;name&gt;</span>", 
"<span class=\"comment\"> * @hotplug: set if caller is hotplug driver, NULL otherwise</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * PCI slots have first class attributes such as address, speed, width,</span>", 
"<span class=\"comment\"> * and a &amp;struct pci_slot is used to manage them. This interface will</span>", 
"<span class=\"comment\"> * either return a new &amp;struct pci_slot to the caller, or if the pci_slot</span>", 
"<span class=\"comment\"> * already exists, its refcount will be incremented.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Slots are uniquely identified by a @pci_bus, @slot_nr tuple.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * There are known platforms with broken firmware that assign the same</span>", 
"<span class=\"comment\"> * name to multiple slots. Workaround these broken platforms by renaming</span>", 
"<span class=\"comment\"> * the slots on behalf of the caller. If firmware assigns name N to</span>", 
"<span class=\"comment\"> * multiple slots:</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * The first slot is assigned N</span>", 
"<span class=\"comment\"> * The second slot is assigned N-1</span>", 
"<span class=\"comment\"> * The third slot is assigned N-2</span>", 
"<span class=\"comment\"> * etc.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Placeholder slots:</span>", 
"<span class=\"comment\"> * In most cases, @pci_bus, @slot_nr will be sufficient to uniquely identify</span>", 
"<span class=\"comment\"> * a slot. There is one notable exception - pSeries (rpaphp), where the</span>", 
"<span class=\"comment\"> * @slot_nr cannot be determined until a device is actually inserted into</span>", 
"<span class=\"comment\"> * the slot. In this scenario, the caller may pass -1 for @slot_nr.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * The following semantics are imposed when the caller passes @slot_nr ==</span>", 
"<span class=\"comment\"> * -1. First, we no longer check for an existing %struct pci_slot, as there</span>", 
"<span class=\"comment\"> * may be many slots with @slot_nr of -1.  The other change in semantics is</span>", 
"<span class=\"comment\"> * user-visible, which is the 'address' parameter presented in sysfs will</span>", 
"<span class=\"comment\"> * consist solely of a dddd:bb tuple, where dddd is the PCI domain of the</span>", 
"<span class=\"comment\"> * %struct pci_bus and bb is the bus number. In other words, the devfn of</span>", 
"<span class=\"comment\"> * the 'placeholder' slot will not be displayed.</span>", 
"<span class=\"comment\"> */</span>", 
"struct <a class=\"id\" href=\"#pci_slot\">pci_slot</a> *<a class=\"id\" href=\"#pci_create_slot\">pci_create_slot</a>(struct <a class=\"id\" href=\"#pci_bus\">pci_bus</a> *<a class=\"id\" href=\"#parent\">parent</a>, int <a class=\"id\" href=\"#slot_nr\">slot_nr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> const char *<a class=\"id\" href=\"#name\">name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> struct <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a> *<a class=\"id\" href=\"#hotplug\">hotplug</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_slot\">pci_slot</a> *<a class=\"id\" href=\"#slot\">slot</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a> = 0;", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#slot_name\">slot_name</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#down_write\">down_write</a>(&amp;<a class=\"id\" href=\"#pci_bus_sem\">pci_bus_sem</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#slot_nr\">slot_nr</a> == -1)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#placeholder\">placeholder</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Hotplug drivers are allowed to rename an existing slot,</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * but only if not already claimed.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#slot\">slot</a> = <a class=\"id\" href=\"#get_slot\">get_slot</a>(<a class=\"id\" href=\"#parent\">parent</a>, <a class=\"id\" href=\"#slot_nr\">slot_nr</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#slot\">slot</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#hotplug\">hotplug</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if ((<a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#hotplug\">hotplug</a> ? -<a class=\"id\" href=\"#EBUSY\">EBUSY</a> : 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     || (<a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#rename_slot\">rename_slot</a>(<a class=\"id\" href=\"#slot\">slot</a>, <a class=\"id\" href=\"#name\">name</a>))) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kobject_put\">kobject_put</a>(&amp;<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#kobj\">kobj</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#slot\">slot</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<a class=\"id\" href=\"#placeholder\">placeholder</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#slot\">slot</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof(*<a class=\"id\" href=\"#slot\">slot</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#slot\">slot</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#bus\">bus</a> = <a class=\"id\" href=\"#parent\">parent</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#number\">number</a> = <a class=\"id\" href=\"#slot_nr\">slot_nr</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#kobj\">kobj</a>.<a class=\"id\" href=\"#kset\">kset</a> = <a class=\"id\" href=\"#pci_slots_kset\">pci_slots_kset</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#slot_name\">slot_name</a> = <a class=\"id\" href=\"#make_slot_name\">make_slot_name</a>(<a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#slot_name\">slot_name</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#kobject_init_and_add\">kobject_init_and_add</a>(&amp;<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#kobj\">kobj</a>, &amp;<a class=\"id\" href=\"#pci_slot_ktype\">pci_slot_ktype</a>, <a class=\"id\" href=\"#NULL\">NULL</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   \"%s\", <a class=\"id\" href=\"#slot_name\">slot_name</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#INIT_LIST_HEAD\">INIT_LIST_HEAD</a>(&amp;<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#list\">list</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_add\">list_add</a>(&amp;<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#list\">list</a>, &amp;<a class=\"id\" href=\"#parent\">parent</a>-><a class=\"id\" href=\"#slots\">slots</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#parent\">parent</a>-><a class=\"id\" href=\"#devices\">devices</a>, <a class=\"id\" href=\"#bus_list\">bus_list</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#PCI_SLOT\">PCI_SLOT</a>(<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#devfn\">devfn</a>) == <a class=\"id\" href=\"#slot_nr\">slot_nr</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#slot\">slot</a> = <a class=\"id\" href=\"#slot\">slot</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_dbg\">dev_dbg</a>(&amp;<a class=\"id\" href=\"#parent\">parent</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"dev %02x, created physical slot %s\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#slot_nr\">slot_nr</a>, <a class=\"id\" href=\"#pci_slot_name\">pci_slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>));", 
"", 
"<a class=\"id\" href=\"#out\">out</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#slot_name\">slot_name</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#up_write\">up_write</a>(&amp;<a class=\"id\" href=\"#pci_bus_sem\">pci_bus_sem</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#slot\">slot</a>;", 
"<a class=\"id\" href=\"#err\">err</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#slot\">slot</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#slot\">slot</a> = <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(<a class=\"id\" href=\"#err\">err</a>);", 
];
xr_frag_insert('l/2f/7cfa27cf39a7d8467b47ec4a4f570a02528df8.xr', __xr_tmp);
