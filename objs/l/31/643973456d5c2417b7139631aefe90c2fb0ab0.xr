var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * fs/sysfs/symlink.c - sysfs symlink implementation</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Copyright (c) 2001-3 Patrick Mochel</span>", 
"<span class=\"comment\"> * Copyright (c) 2007 SUSE Linux Products GmbH</span>", 
"<span class=\"comment\"> * Copyright (c) 2007 Tejun Heo &lt;teheo@suse.de&gt;</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This file is released under the GPLv2.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Please see Documentation/filesystems/sysfs.txt for more information.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#fs\">fs</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#gfp\">gfp</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#mount\">mount</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kobject\">kobject</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#namei\">namei</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#mutex\">mutex</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#security\">security</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> \"sysfs.h\"", 
"", 
"static int <a class=\"id\" href=\"#sysfs_do_create_link\">sysfs_do_create_link</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>, struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#target\">target</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>const char *<a class=\"id\" href=\"#name\">name</a>, int <a class=\"id\" href=\"#warn\">warn</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#parent_sd\">parent_sd</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#target_sd\">target_sd</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_addrm_cxt\">sysfs_addrm_cxt</a> <a class=\"id\" href=\"#acxt\">acxt</a>;", 
"<span class=\"ts\"/>enum <a class=\"id\" href=\"#kobj_ns_type\">kobj_ns_type</a> <a class=\"id\" href=\"#ns_type\">ns_type</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#BUG_ON\">BUG_ON</a>(!<a class=\"id\" href=\"#name\">name</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#kobj\">kobj</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#parent_sd\">parent_sd</a> = &amp;<a class=\"id\" href=\"#sysfs_root\">sysfs_root</a>;", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#parent_sd\">parent_sd</a> = <a class=\"id\" href=\"#kobj\">kobj</a>-><a class=\"id\" href=\"#sd\">sd</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#parent_sd\">parent_sd</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out_put\">out_put</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* target-&gt;sd can go away beneath us but is protected with</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * sysfs_assoc_lock.  Fetch target_sd from it.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock\">spin_lock</a>(&amp;<a class=\"id\" href=\"#sysfs_assoc_lock\">sysfs_assoc_lock</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#target\">target</a>-><a class=\"id\" href=\"#sd\">sd</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#target_sd\">target_sd</a> = <a class=\"id\" href=\"#sysfs_get\">sysfs_get</a>(<a class=\"id\" href=\"#target\">target</a>-><a class=\"id\" href=\"#sd\">sd</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock\">spin_unlock</a>(&amp;<a class=\"id\" href=\"#sysfs_assoc_lock\">sysfs_assoc_lock</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = -<a class=\"id\" href=\"#ENOENT\">ENOENT</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#target_sd\">target_sd</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out_put\">out_put</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#sysfs_new_dirent\">sysfs_new_dirent</a>(<a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#S_IFLNK\">S_IFLNK</a>|<a class=\"id\" href=\"#S_IRWXUGO\">S_IRWXUGO</a>, <a class=\"id\" href=\"#SYSFS_KOBJ_LINK\">SYSFS_KOBJ_LINK</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#sd\">sd</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out_put\">out_put</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ns_type\">ns_type</a> = <a class=\"id\" href=\"#sysfs_ns_type\">sysfs_ns_type</a>(<a class=\"id\" href=\"#parent_sd\">parent_sd</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ns_type\">ns_type</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_ns\">s_ns</a> = <a class=\"id\" href=\"#target\">target</a>-><a class=\"id\" href=\"#ktype\">ktype</a>-><a class=\"id\" href=\"#namespace\">namespace</a>(<a class=\"id\" href=\"#target\">target</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_symlink\">s_symlink</a>.<a class=\"id\" href=\"#target_sd\">target_sd</a> = <a class=\"id\" href=\"#target_sd\">target_sd</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#target_sd\">target_sd</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;<span class=\"ts\"/><span class=\"comment\">/* reference is now owned by the symlink */</span>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_addrm_start\">sysfs_addrm_start</a>(&amp;<a class=\"id\" href=\"#acxt\">acxt</a>, <a class=\"id\" href=\"#parent_sd\">parent_sd</a>);", 
"<span class=\"ts\"/><span class=\"comment\">/* Symlinks must be between directories with the same ns_type */</span>", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#ns_type\">ns_type</a> ||", 
"<span class=\"ts\"/>    (<a class=\"id\" href=\"#ns_type\">ns_type</a> == <a class=\"id\" href=\"#sysfs_ns_type\">sysfs_ns_type</a>(<a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_symlink\">s_symlink</a>.<a class=\"id\" href=\"#target_sd\">target_sd</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a>))) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#warn\">warn</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#sysfs_add_one\">sysfs_add_one</a>(&amp;<a class=\"id\" href=\"#acxt\">acxt</a>, <a class=\"id\" href=\"#sd\">sd</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#__sysfs_add_one\">__sysfs_add_one</a>(&amp;<a class=\"id\" href=\"#acxt\">acxt</a>, <a class=\"id\" href=\"#sd\">sd</a>);", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#WARN\">WARN</a>(1, <a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"sysfs: symlink across ns_types %s/%s -> %s/%s\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#parent_sd\">parent_sd</a>-><a class=\"id\" href=\"#s_name\">s_name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_name\">s_name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_symlink\">s_symlink</a>.<a class=\"id\" href=\"#target_sd\">target_sd</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a>-><a class=\"id\" href=\"#s_name\">s_name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_symlink\">s_symlink</a>.<a class=\"id\" href=\"#target_sd\">target_sd</a>-><a class=\"id\" href=\"#s_name\">s_name</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_addrm_finish\">sysfs_addrm_finish</a>(&amp;<a class=\"id\" href=\"#acxt\">acxt</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out_put\">out_put</a>;", 
"", 
"<span class=\"ts\"/>return 0;", 
"", 
" <a class=\"id\" href=\"#out_put\">out_put</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_put\">sysfs_put</a>(<a class=\"id\" href=\"#target_sd\">target_sd</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_put\">sysfs_put</a>(<a class=\"id\" href=\"#sd\">sd</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>sysfs_create_link - create symlink between two objects.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@kobj:<span class=\"ts\"/>object whose directory we're creating the link in.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@target:<span class=\"ts\"/>object we're pointing to.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@name:<span class=\"ts\"/><span class=\"ts\"/>name of the symlink.</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#sysfs_create_link\">sysfs_create_link</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>, struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#target\">target</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>      const char *<a class=\"id\" href=\"#name\">name</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sysfs_do_create_link\">sysfs_do_create_link</a>(<a class=\"id\" href=\"#kobj\">kobj</a>, <a class=\"id\" href=\"#target\">target</a>, <a class=\"id\" href=\"#name\">name</a>, 1);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>sysfs_create_link_nowarn - create symlink between two objects.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@kobj:<span class=\"ts\"/>object whose directory we're creating the link in.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@target:<span class=\"ts\"/>object we're pointing to.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@name:<span class=\"ts\"/><span class=\"ts\"/>name of the symlink.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>This function does the same as sysf_create_link(), but it</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>doesn't warn if the link already exists.</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#sysfs_create_link_nowarn\">sysfs_create_link_nowarn</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>, struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#target\">target</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     const char *<a class=\"id\" href=\"#name\">name</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sysfs_do_create_link\">sysfs_do_create_link</a>(<a class=\"id\" href=\"#kobj\">kobj</a>, <a class=\"id\" href=\"#target\">target</a>, <a class=\"id\" href=\"#name\">name</a>, 0);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>sysfs_delete_link - remove symlink in object's directory.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@kobj:<span class=\"ts\"/>object we're acting for.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@targ:<span class=\"ts\"/>object we're pointing to.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@name:<span class=\"ts\"/>name of the symlink to remove.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Unlike sysfs_remove_link sysfs_delete_link has enough information</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>to successfully delete symlinks in tagged directories.</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#sysfs_delete_link\">sysfs_delete_link</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>, struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#targ\">targ</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>const char *<a class=\"id\" href=\"#name\">name</a>)", 
"{", 
"<span class=\"ts\"/>const void *<a class=\"id\" href=\"#ns\">ns</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock\">spin_lock</a>(&amp;<a class=\"id\" href=\"#sysfs_assoc_lock\">sysfs_assoc_lock</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#targ\">targ</a>-><a class=\"id\" href=\"#sd\">sd</a> && <a class=\"id\" href=\"#sysfs_ns_type\">sysfs_ns_type</a>(<a class=\"id\" href=\"#kobj\">kobj</a>-><a class=\"id\" href=\"#sd\">sd</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ns\">ns</a> = <a class=\"id\" href=\"#targ\">targ</a>-><a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_ns\">s_ns</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock\">spin_unlock</a>(&amp;<a class=\"id\" href=\"#sysfs_assoc_lock\">sysfs_assoc_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_hash_and_remove\">sysfs_hash_and_remove</a>(<a class=\"id\" href=\"#kobj\">kobj</a>-><a class=\"id\" href=\"#sd\">sd</a>, <a class=\"id\" href=\"#ns\">ns</a>, <a class=\"id\" href=\"#name\">name</a>);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>sysfs_remove_link - remove symlink in object's directory.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@kobj:<span class=\"ts\"/>object we're acting for.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@name:<span class=\"ts\"/>name of the symlink to remove.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"void <a class=\"id\" href=\"#sysfs_remove_link\">sysfs_remove_link</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> * <a class=\"id\" href=\"#kobj\">kobj</a>, const char * <a class=\"id\" href=\"#name\">name</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#parent_sd\">parent_sd</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#kobj\">kobj</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#parent_sd\">parent_sd</a> = &amp;<a class=\"id\" href=\"#sysfs_root\">sysfs_root</a>;", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#parent_sd\">parent_sd</a> = <a class=\"id\" href=\"#kobj\">kobj</a>-><a class=\"id\" href=\"#sd\">sd</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_hash_and_remove\">sysfs_hash_and_remove</a>(<a class=\"id\" href=\"#parent_sd\">parent_sd</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#name\">name</a>);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>sysfs_rename_link - rename symlink in object's directory.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@kobj:<span class=\"ts\"/>object we're acting for.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@targ:<span class=\"ts\"/>object we're pointing to.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@old:<span class=\"ts\"/>previous name of the symlink.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@new:<span class=\"ts\"/>new name of the symlink.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>A helper function for the common rename symlink idiom.</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#sysfs_rename_link\">sysfs_rename_link</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>, struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#targ\">targ</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>const char *<a class=\"id\" href=\"#old\">old</a>, const char *<a class=\"id\" href=\"#new\">new</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#parent_sd\">parent_sd</a>, *<a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>const void *<a class=\"id\" href=\"#old_ns\">old_ns</a> = <a class=\"id\" href=\"#NULL\">NULL</a>, *<a class=\"id\" href=\"#new_ns\">new_ns</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#result\">result</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#kobj\">kobj</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#parent_sd\">parent_sd</a> = &amp;<a class=\"id\" href=\"#sysfs_root\">sysfs_root</a>;", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#parent_sd\">parent_sd</a> = <a class=\"id\" href=\"#kobj\">kobj</a>-><a class=\"id\" href=\"#sd\">sd</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#targ\">targ</a>-><a class=\"id\" href=\"#sd\">sd</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#old_ns\">old_ns</a> = <a class=\"id\" href=\"#targ\">targ</a>-><a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_ns\">s_ns</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = -<a class=\"id\" href=\"#ENOENT\">ENOENT</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#sysfs_get_dirent\">sysfs_get_dirent</a>(<a class=\"id\" href=\"#parent_sd\">parent_sd</a>, <a class=\"id\" href=\"#old_ns\">old_ns</a>, <a class=\"id\" href=\"#old\">old</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#sd\">sd</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sysfs_type\">sysfs_type</a>(<a class=\"id\" href=\"#sd\">sd</a>) != <a class=\"id\" href=\"#SYSFS_KOBJ_LINK\">SYSFS_KOBJ_LINK</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_symlink\">s_symlink</a>.<a class=\"id\" href=\"#target_sd\">target_sd</a>-><a class=\"id\" href=\"#s_dir\">s_dir</a>.<a class=\"id\" href=\"#kobj\">kobj</a> != <a class=\"id\" href=\"#targ\">targ</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sysfs_ns_type\">sysfs_ns_type</a>(<a class=\"id\" href=\"#parent_sd\">parent_sd</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_ns\">new_ns</a> = <a class=\"id\" href=\"#targ\">targ</a>-><a class=\"id\" href=\"#ktype\">ktype</a>-><a class=\"id\" href=\"#namespace\">namespace</a>(<a class=\"id\" href=\"#targ\">targ</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#sysfs_rename\">sysfs_rename</a>(<a class=\"id\" href=\"#sd\">sd</a>, <a class=\"id\" href=\"#parent_sd\">parent_sd</a>, <a class=\"id\" href=\"#new_ns\">new_ns</a>, <a class=\"id\" href=\"#new\">new</a>);", 
"", 
"<a class=\"id\" href=\"#out\">out</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_put\">sysfs_put</a>(<a class=\"id\" href=\"#sd\">sd</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#result\">result</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#sysfs_get_target_path\">sysfs_get_target_path</a>(struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#parent_sd\">parent_sd</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#target_sd\">target_sd</a>, char *<a class=\"id\" href=\"#path\">path</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#base\">base</a>, *<a class=\"id\" href=\"#sd\">sd</a>;", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#s\">s</a> = <a class=\"id\" href=\"#path\">path</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#len\">len</a> = 0;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* go up to the root, stop at the base */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#base\">base</a> = <a class=\"id\" href=\"#parent_sd\">parent_sd</a>;", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#base\">base</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#target_sd\">target_sd</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>while (<a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a> && <a class=\"id\" href=\"#base\">base</a> != <a class=\"id\" href=\"#sd\">sd</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#base\">base</a> == <a class=\"id\" href=\"#sd\">sd</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#strcpy\">strcpy</a>(<a class=\"id\" href=\"#s\">s</a>, \"../\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#s\">s</a> += 3;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#base\">base</a> = <a class=\"id\" href=\"#base\">base</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* determine end of target string for reverse fillup */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#target_sd\">target_sd</a>;", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a> && <a class=\"id\" href=\"#sd\">sd</a> != <a class=\"id\" href=\"#base\">base</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a> += <a class=\"id\" href=\"#strlen\">strlen</a>(<a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_name\">s_name</a>) + 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* check limits */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#len\">len</a> &lt; 2)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a>--;", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#s\">s</a> - <a class=\"id\" href=\"#path\">path</a>) + <a class=\"id\" href=\"#len\">len</a> &gt; <a class=\"id\" href=\"#PATH_MAX\">PATH_MAX</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENAMETOOLONG\">ENAMETOOLONG</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* reverse fillup of target string from target to base */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#target_sd\">target_sd</a>;", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a> && <a class=\"id\" href=\"#sd\">sd</a> != <a class=\"id\" href=\"#base\">base</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#slen\">slen</a> = <a class=\"id\" href=\"#strlen\">strlen</a>(<a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_name\">s_name</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a> -= <a class=\"id\" href=\"#slen\">slen</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#strncpy\">strncpy</a>(<a class=\"id\" href=\"#s\">s</a> + <a class=\"id\" href=\"#len\">len</a>, <a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_name\">s_name</a>, <a class=\"id\" href=\"#slen\">slen</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#len\">len</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#s\">s</a>[--<a class=\"id\" href=\"#len\">len</a>] = '/';", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#sysfs_getlink\">sysfs_getlink</a>(struct <a class=\"id\" href=\"#dentry\">dentry</a> *<a class=\"id\" href=\"#dentry\">dentry</a>, char * <a class=\"id\" href=\"#path\">path</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#dentry\">dentry</a>-><a class=\"id\" href=\"#d_fsdata\">d_fsdata</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#parent_sd\">parent_sd</a> = <a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#target_sd\">target_sd</a> = <a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_symlink\">s_symlink</a>.<a class=\"id\" href=\"#target_sd\">target_sd</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#sysfs_mutex\">sysfs_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#sysfs_get_target_path\">sysfs_get_target_path</a>(<a class=\"id\" href=\"#parent_sd\">parent_sd</a>, <a class=\"id\" href=\"#target_sd\">target_sd</a>, <a class=\"id\" href=\"#path\">path</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#sysfs_mutex\">sysfs_mutex</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"}", 
"", 
"static void *<a class=\"id\" href=\"#sysfs_follow_link\">sysfs_follow_link</a>(struct <a class=\"id\" href=\"#dentry\">dentry</a> *<a class=\"id\" href=\"#dentry\">dentry</a>, struct <a class=\"id\" href=\"#nameidata\">nameidata</a> *<a class=\"id\" href=\"#nd\">nd</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#page\">page</a> = <a class=\"id\" href=\"#get_zeroed_page\">get_zeroed_page</a>(<a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#page\">page</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#sysfs_getlink\">sysfs_getlink</a>(<a class=\"id\" href=\"#dentry\">dentry</a>, (char *) <a class=\"id\" href=\"#page\">page</a>); ", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#free_page\">free_page</a>((unsigned long)<a class=\"id\" href=\"#page\">page</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#nd_set_link\">nd_set_link</a>(<a class=\"id\" href=\"#nd\">nd</a>, <a class=\"id\" href=\"#error\">error</a> ? <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(<a class=\"id\" href=\"#error\">error</a>) : (char *)<a class=\"id\" href=\"#page\">page</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#sysfs_put_link\">sysfs_put_link</a>(struct <a class=\"id\" href=\"#dentry\">dentry</a> *<a class=\"id\" href=\"#dentry\">dentry</a>, struct <a class=\"id\" href=\"#nameidata\">nameidata</a> *<a class=\"id\" href=\"#nd\">nd</a>, void *<a class=\"id\" href=\"#cookie\">cookie</a>)", 
"{", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#page\">page</a> = <a class=\"id\" href=\"#nd_get_link\">nd_get_link</a>(<a class=\"id\" href=\"#nd\">nd</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#IS_ERR\">IS_ERR</a>(<a class=\"id\" href=\"#page\">page</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#free_page\">free_page</a>((unsigned long)<a class=\"id\" href=\"#page\">page</a>);", 
"}", 
"", 
"const struct <a class=\"id\" href=\"#inode_operations\">inode_operations</a> <a class=\"id\" href=\"#sysfs_symlink_inode_operations\">sysfs_symlink_inode_operations</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#setxattr\">setxattr</a><span class=\"ts\"/>= <a class=\"id\" href=\"#sysfs_setxattr\">sysfs_setxattr</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#readlink\">readlink</a><span class=\"ts\"/>= <a class=\"id\" href=\"#generic_readlink\">generic_readlink</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#follow_link\">follow_link</a><span class=\"ts\"/>= <a class=\"id\" href=\"#sysfs_follow_link\">sysfs_follow_link</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#put_link\">put_link</a><span class=\"ts\"/>= <a class=\"id\" href=\"#sysfs_put_link\">sysfs_put_link</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#setattr\">setattr</a><span class=\"ts\"/>= <a class=\"id\" href=\"#sysfs_setattr\">sysfs_setattr</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#getattr\">getattr</a><span class=\"ts\"/>= <a class=\"id\" href=\"#sysfs_getattr\">sysfs_getattr</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#permission\">permission</a><span class=\"ts\"/>= <a class=\"id\" href=\"#sysfs_permission\">sysfs_permission</a>,", 
"};", 
"", 
"", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#sysfs_create_link\">sysfs_create_link</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#sysfs_remove_link\">sysfs_remove_link</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#sysfs_rename_link\">sysfs_rename_link</a>);", 
];
xr_frag_insert('l/31/643973456d5c2417b7139631aefe90c2fb0ab0.xr', __xr_tmp);
