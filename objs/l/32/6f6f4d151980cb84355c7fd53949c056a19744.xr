var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Input driver to ExplorerPS/2 device driver module.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Copyright (c) 1999-2002 Vojtech Pavlik</span>", 
"<span class=\"comment\"> * Copyright (c) 2004      Dmitry Torokhov</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This program is free software; you can redistribute it and/or modify</span>", 
"<span class=\"comment\"> * it under the terms of the GNU General Public License version 2 as published by</span>", 
"<span class=\"comment\"> * the Free Software Foundation.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#MOUSEDEV_MINOR_BASE\">MOUSEDEV_MINOR_BASE</a><span class=\"ts\"/>32", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#MOUSEDEV_MINORS\">MOUSEDEV_MINORS</a><span class=\"ts\"/><span class=\"ts\"/>32", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#MOUSEDEV_MIX\">MOUSEDEV_MIX</a><span class=\"ts\"/><span class=\"ts\"/>31", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#sched\">sched</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#slab\">slab</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#poll\">poll</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#init\">init</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#input\">input</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#random\">random</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#major\">major</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#device\">device</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kernel\">kernel</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_INPUT_MOUSEDEV_PSAUX\">CONFIG_INPUT_MOUSEDEV_PSAUX</a>", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#miscdevice\">miscdevice</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"<a class=\"id\" href=\"#MODULE_AUTHOR\">MODULE_AUTHOR</a>(\"Vojtech Pavlik <vojtech@ucw.cz>\");", 
"<a class=\"id\" href=\"#MODULE_DESCRIPTION\">MODULE_DESCRIPTION</a>(\"Mouse (ExplorerPS/2) device interfaces\");", 
"<a class=\"id\" href=\"#MODULE_LICENSE\">MODULE_LICENSE</a>(\"GPL\");", 
"", 
"#<a class=\"id\" href=\"#ifndef\">ifndef</a> <a class=\"id\" href=\"#CONFIG_INPUT_MOUSEDEV_SCREEN_X\">CONFIG_INPUT_MOUSEDEV_SCREEN_X</a>", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#CONFIG_INPUT_MOUSEDEV_SCREEN_X\">CONFIG_INPUT_MOUSEDEV_SCREEN_X</a><span class=\"ts\"/>1024", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"#<a class=\"id\" href=\"#ifndef\">ifndef</a> <a class=\"id\" href=\"#CONFIG_INPUT_MOUSEDEV_SCREEN_Y\">CONFIG_INPUT_MOUSEDEV_SCREEN_Y</a>", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#CONFIG_INPUT_MOUSEDEV_SCREEN_Y\">CONFIG_INPUT_MOUSEDEV_SCREEN_Y</a><span class=\"ts\"/>768", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"static int <a class=\"id\" href=\"#xres\">xres</a> = <a class=\"id\" href=\"#CONFIG_INPUT_MOUSEDEV_SCREEN_X\">CONFIG_INPUT_MOUSEDEV_SCREEN_X</a>;", 
"<a class=\"id\" href=\"#module_param\">module_param</a>(<a class=\"id\" href=\"#xres\">xres</a>, <a class=\"id\" href=\"#uint\">uint</a>, 0644);", 
"<a class=\"id\" href=\"#MODULE_PARM_DESC\">MODULE_PARM_DESC</a>(<a class=\"id\" href=\"#xres\">xres</a>, \"Horizontal screen resolution\");", 
"", 
"static int <a class=\"id\" href=\"#yres\">yres</a> = <a class=\"id\" href=\"#CONFIG_INPUT_MOUSEDEV_SCREEN_Y\">CONFIG_INPUT_MOUSEDEV_SCREEN_Y</a>;", 
"<a class=\"id\" href=\"#module_param\">module_param</a>(<a class=\"id\" href=\"#yres\">yres</a>, <a class=\"id\" href=\"#uint\">uint</a>, 0644);", 
"<a class=\"id\" href=\"#MODULE_PARM_DESC\">MODULE_PARM_DESC</a>(<a class=\"id\" href=\"#yres\">yres</a>, \"Vertical screen resolution\");", 
"", 
"static unsigned <a class=\"id\" href=\"#tap_time\">tap_time</a> = 200;", 
"<a class=\"id\" href=\"#module_param\">module_param</a>(<a class=\"id\" href=\"#tap_time\">tap_time</a>, <a class=\"id\" href=\"#uint\">uint</a>, 0644);", 
"<a class=\"id\" href=\"#MODULE_PARM_DESC\">MODULE_PARM_DESC</a>(<a class=\"id\" href=\"#tap_time\">tap_time</a>, \"Tap time for touchpads in absolute mode (msecs)\");", 
"", 
"struct <a class=\"id\" href=\"#mousedev_hw_data\">mousedev_hw_data</a> {", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#dx\">dx</a>, <a class=\"id\" href=\"#dy\">dy</a>, <a class=\"id\" href=\"#dz\">dz</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#x\">x</a>, <a class=\"id\" href=\"#y\">y</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#abs_event\">abs_event</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#buttons\">buttons</a>;", 
"};", 
"", 
"struct <a class=\"id\" href=\"#mousedev\">mousedev</a> {", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#open\">open</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#minor\">minor</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#input_handle\">input_handle</a> <a class=\"id\" href=\"#handle\">handle</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#wait_queue_head_t\">wait_queue_head_t</a> <a class=\"id\" href=\"#wait\">wait</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#list_head\">list_head</a> <a class=\"id\" href=\"#client_list\">client_list</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spinlock_t\">spinlock_t</a> <a class=\"id\" href=\"#client_lock\">client_lock</a>; <span class=\"comment\">/* protects client_list */</span>", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mutex\">mutex</a> <a class=\"id\" href=\"#mutex\">mutex</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#device\">device</a> <a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#exist\">exist</a>;", 
"", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#list_head\">list_head</a> <a class=\"id\" href=\"#mixdev_node\">mixdev_node</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#mixdev_open\">mixdev_open</a>;", 
"", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev_hw_data\">mousedev_hw_data</a> <a class=\"id\" href=\"#packet\">packet</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#pkt_count\">pkt_count</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#old_x\">old_x</a>[4], <a class=\"id\" href=\"#old_y\">old_y</a>[4];", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#frac_dx\">frac_dx</a>, <a class=\"id\" href=\"#frac_dy\">frac_dy</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#touch\">touch</a>;", 
"};", 
"", 
"enum <a class=\"id\" href=\"#mousedev_emul\">mousedev_emul</a> {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#MOUSEDEV_EMUL_PS2\">MOUSEDEV_EMUL_PS2</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#MOUSEDEV_EMUL_IMPS\">MOUSEDEV_EMUL_IMPS</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#MOUSEDEV_EMUL_EXPS\">MOUSEDEV_EMUL_EXPS</a>", 
"};", 
"", 
"struct <a class=\"id\" href=\"#mousedev_motion\">mousedev_motion</a> {", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#dx\">dx</a>, <a class=\"id\" href=\"#dy\">dy</a>, <a class=\"id\" href=\"#dz\">dz</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#buttons\">buttons</a>;", 
"};", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#PACKET_QUEUE_LEN\">PACKET_QUEUE_LEN</a><span class=\"ts\"/>16", 
"struct <a class=\"id\" href=\"#mousedev_client\">mousedev_client</a> {", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#fasync_struct\">fasync_struct</a> *<a class=\"id\" href=\"#fasync\">fasync</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#list_head\">list_head</a> <a class=\"id\" href=\"#node\">node</a>;", 
"", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev_motion\">mousedev_motion</a> <a class=\"id\" href=\"#packets\">packets</a>[<a class=\"id\" href=\"#PACKET_QUEUE_LEN\">PACKET_QUEUE_LEN</a>];", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#head\">head</a>, <a class=\"id\" href=\"#tail\">tail</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spinlock_t\">spinlock_t</a> <a class=\"id\" href=\"#packet_lock\">packet_lock</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#pos_x\">pos_x</a>, <a class=\"id\" href=\"#pos_y\">pos_y</a>;", 
"", 
"<span class=\"ts\"/>signed char <a class=\"id\" href=\"#ps2\">ps2</a>[6];", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#ready\">ready</a>, <a class=\"id\" href=\"#buffer\">buffer</a>, <a class=\"id\" href=\"#bufsiz\">bufsiz</a>;", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#imexseq\">imexseq</a>, <a class=\"id\" href=\"#impsseq\">impsseq</a>;", 
"<span class=\"ts\"/>enum <a class=\"id\" href=\"#mousedev_emul\">mousedev_emul</a> <a class=\"id\" href=\"#mode\">mode</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#last_buttons\">last_buttons</a>;", 
"};", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#MOUSEDEV_SEQ_LEN\">MOUSEDEV_SEQ_LEN</a><span class=\"ts\"/>6", 
"", 
"static unsigned char <a class=\"id\" href=\"#mousedev_imps_seq\">mousedev_imps_seq</a>[] = { 0xf3, 200, 0xf3, 100, 0xf3, 80 };", 
"static unsigned char <a class=\"id\" href=\"#mousedev_imex_seq\">mousedev_imex_seq</a>[] = { 0xf3, 200, 0xf3, 200, 0xf3, 80 };", 
"", 
"static struct <a class=\"id\" href=\"#input_handler\">input_handler</a> <a class=\"id\" href=\"#mousedev_handler\">mousedev_handler</a>;", 
"", 
"static struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev_table\">mousedev_table</a>[<a class=\"id\" href=\"#MOUSEDEV_MINORS\">MOUSEDEV_MINORS</a>];", 
"static <a class=\"id\" href=\"#DEFINE_MUTEX\">DEFINE_MUTEX</a>(<a class=\"id\" href=\"#mousedev_table_mutex\">mousedev_table_mutex</a>);", 
"static struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev_mix\">mousedev_mix</a>;", 
"static <a class=\"id\" href=\"#LIST_HEAD\">LIST_HEAD</a>(<a class=\"id\" href=\"#mousedev_mix_list\">mousedev_mix_list</a>);", 
"", 
"static void <a class=\"id\" href=\"#mixdev_open_devices\">mixdev_open_devices</a>(void);", 
"static void <a class=\"id\" href=\"#mixdev_close_devices\">mixdev_close_devices</a>(void);", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#fx\">fx</a>(<a class=\"id\" href=\"#i\">i</a>)  (<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#old_x\">old_x</a>[(<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#pkt_count\">pkt_count</a> - (<a class=\"id\" href=\"#i\">i</a>)) &amp; 03])", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#fy\">fy</a>(<a class=\"id\" href=\"#i\">i</a>)  (<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#old_y\">old_y</a>[(<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#pkt_count\">pkt_count</a> - (<a class=\"id\" href=\"#i\">i</a>)) &amp; 03])", 
"", 
"static void <a class=\"id\" href=\"#mousedev_touchpad_event\">mousedev_touchpad_event</a>(struct <a class=\"id\" href=\"#input_dev\">input_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    unsigned int <a class=\"id\" href=\"#code\">code</a>, int <a class=\"id\" href=\"#value\">value</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#size\">size</a>, <a class=\"id\" href=\"#tmp\">tmp</a>;", 
"<span class=\"ts\"/>enum { <a class=\"id\" href=\"#FRACTION_DENOM\">FRACTION_DENOM</a> = 128 };", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#code\">code</a>) {", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ABS_X\">ABS_X</a>:", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#fx\">fx</a>(0) = <a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#touch\">touch</a> && <a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#pkt_count\">pkt_count</a> >= 2) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#size\">size</a> = <a class=\"id\" href=\"#input_abs_get_max\">input_abs_get_max</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#ABS_X\">ABS_X</a>) -", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_abs_get_min\">input_abs_get_min</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#ABS_X\">ABS_X</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#size\">size</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#size\">size</a> = 256 * 2;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> = ((<a class=\"id\" href=\"#value\">value</a> - <a class=\"id\" href=\"#fx\">fx</a>(2)) * 256 * <a class=\"id\" href=\"#FRACTION_DENOM\">FRACTION_DENOM</a>) / <a class=\"id\" href=\"#size\">size</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> += <a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#frac_dx\">frac_dx</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#dx\">dx</a> = <a class=\"id\" href=\"#tmp\">tmp</a> / <a class=\"id\" href=\"#FRACTION_DENOM\">FRACTION_DENOM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#frac_dx\">frac_dx</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> - <a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#dx\">dx</a> * <a class=\"id\" href=\"#FRACTION_DENOM\">FRACTION_DENOM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ABS_Y\">ABS_Y</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#fy\">fy</a>(0) = <a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#touch\">touch</a> && <a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#pkt_count\">pkt_count</a> >= 2) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* use X size for ABS_Y to keep the same scale */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#size\">size</a> = <a class=\"id\" href=\"#input_abs_get_max\">input_abs_get_max</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#ABS_X\">ABS_X</a>) -", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_abs_get_min\">input_abs_get_min</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#ABS_X\">ABS_X</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#size\">size</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#size\">size</a> = 256 * 2;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> = -((<a class=\"id\" href=\"#value\">value</a> - <a class=\"id\" href=\"#fy\">fy</a>(2)) * 256 * <a class=\"id\" href=\"#FRACTION_DENOM\">FRACTION_DENOM</a>) / <a class=\"id\" href=\"#size\">size</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> += <a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#frac_dy\">frac_dy</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#dy\">dy</a> = <a class=\"id\" href=\"#tmp\">tmp</a> / <a class=\"id\" href=\"#FRACTION_DENOM\">FRACTION_DENOM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#frac_dy\">frac_dy</a> = <a class=\"id\" href=\"#tmp\">tmp</a> -", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#dy\">dy</a> * <a class=\"id\" href=\"#FRACTION_DENOM\">FRACTION_DENOM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static void <a class=\"id\" href=\"#mousedev_abs_event\">mousedev_abs_event</a>(struct <a class=\"id\" href=\"#input_dev\">input_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#code\">code</a>, int <a class=\"id\" href=\"#value\">value</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#min\">min</a>, <a class=\"id\" href=\"#max\">max</a>, <a class=\"id\" href=\"#size\">size</a>;", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#code\">code</a>) {", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ABS_X\">ABS_X</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#min\">min</a> = <a class=\"id\" href=\"#input_abs_get_min\">input_abs_get_min</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#ABS_X\">ABS_X</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#max\">max</a> = <a class=\"id\" href=\"#input_abs_get_max\">input_abs_get_max</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#ABS_X\">ABS_X</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#size\">size</a> = <a class=\"id\" href=\"#max\">max</a> - <a class=\"id\" href=\"#min\">min</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#size\">size</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#size\">size</a> = <a class=\"id\" href=\"#xres\">xres</a> ? : 1;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#clamp\">clamp</a>(<a class=\"id\" href=\"#value\">value</a>, <a class=\"id\" href=\"#min\">min</a>, <a class=\"id\" href=\"#max\">max</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#x\">x</a> = ((<a class=\"id\" href=\"#value\">value</a> - <a class=\"id\" href=\"#min\">min</a>) * <a class=\"id\" href=\"#xres\">xres</a>) / <a class=\"id\" href=\"#size\">size</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#abs_event\">abs_event</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ABS_Y\">ABS_Y</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#min\">min</a> = <a class=\"id\" href=\"#input_abs_get_min\">input_abs_get_min</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#ABS_Y\">ABS_Y</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#max\">max</a> = <a class=\"id\" href=\"#input_abs_get_max\">input_abs_get_max</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#ABS_Y\">ABS_Y</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#size\">size</a> = <a class=\"id\" href=\"#max\">max</a> - <a class=\"id\" href=\"#min\">min</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#size\">size</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#size\">size</a> = <a class=\"id\" href=\"#yres\">yres</a> ? : 1;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#clamp\">clamp</a>(<a class=\"id\" href=\"#value\">value</a>, <a class=\"id\" href=\"#min\">min</a>, <a class=\"id\" href=\"#max\">max</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#y\">y</a> = <a class=\"id\" href=\"#yres\">yres</a> - ((<a class=\"id\" href=\"#value\">value</a> - <a class=\"id\" href=\"#min\">min</a>) * <a class=\"id\" href=\"#yres\">yres</a>) / <a class=\"id\" href=\"#size\">size</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#abs_event\">abs_event</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static void <a class=\"id\" href=\"#mousedev_rel_event\">mousedev_rel_event</a>(struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#code\">code</a>, int <a class=\"id\" href=\"#value\">value</a>)", 
"{", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#code\">code</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#REL_X\">REL_X</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#dx\">dx</a> += <a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#REL_Y\">REL_Y</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#dy\">dy</a> -= <a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#REL_WHEEL\">REL_WHEEL</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#dz\">dz</a> -= <a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static void <a class=\"id\" href=\"#mousedev_key_event\">mousedev_key_event</a>(struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#code\">code</a>, int <a class=\"id\" href=\"#value\">value</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#index\">index</a>;", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#code\">code</a>) {", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#BTN_TOUCH\">BTN_TOUCH</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#BTN_0\">BTN_0</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#BTN_LEFT\">BTN_LEFT</a>:<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#index\">index</a> = 0; break;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#BTN_STYLUS\">BTN_STYLUS</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#BTN_1\">BTN_1</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#BTN_RIGHT\">BTN_RIGHT</a>:<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#index\">index</a> = 1; break;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#BTN_2\">BTN_2</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#BTN_FORWARD\">BTN_FORWARD</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#BTN_STYLUS2\">BTN_STYLUS2</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#BTN_MIDDLE\">BTN_MIDDLE</a>:<span class=\"ts\"/><a class=\"id\" href=\"#index\">index</a> = 2; break;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#BTN_3\">BTN_3</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#BTN_BACK\">BTN_BACK</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#BTN_SIDE\">BTN_SIDE</a>:<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#index\">index</a> = 3; break;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#BTN_4\">BTN_4</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#BTN_EXTRA\">BTN_EXTRA</a>:<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#index\">index</a> = 4; break;", 
"", 
"<span class=\"ts\"/>default:<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#value\">value</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_bit\">set_bit</a>(<a class=\"id\" href=\"#index\">index</a>, &amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#buttons\">buttons</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_bit\">set_bit</a>(<a class=\"id\" href=\"#index\">index</a>, &amp;<a class=\"id\" href=\"#mousedev_mix\">mousedev_mix</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#buttons\">buttons</a>);", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#clear_bit\">clear_bit</a>(<a class=\"id\" href=\"#index\">index</a>, &amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#buttons\">buttons</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#clear_bit\">clear_bit</a>(<a class=\"id\" href=\"#index\">index</a>, &amp;<a class=\"id\" href=\"#mousedev_mix\">mousedev_mix</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#buttons\">buttons</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static void <a class=\"id\" href=\"#mousedev_notify_readers\">mousedev_notify_readers</a>(struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    struct <a class=\"id\" href=\"#mousedev_hw_data\">mousedev_hw_data</a> *<a class=\"id\" href=\"#packet\">packet</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev_client\">mousedev_client</a> *<a class=\"id\" href=\"#client\">client</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev_motion\">mousedev_motion</a> *<a class=\"id\" href=\"#p\">p</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#new_head\">new_head</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#wake_readers\">wake_readers</a> = 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rcu_read_lock\">rcu_read_lock</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry_rcu\">list_for_each_entry_rcu</a>(<a class=\"id\" href=\"#client\">client</a>, &amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#client_list\">client_list</a>, <a class=\"id\" href=\"#node\">node</a>) {", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Just acquire the lock, interrupts already disabled */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_lock\">spin_lock</a>(&amp;<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#packet_lock\">packet_lock</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a> = &amp;<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#packets\">packets</a>[<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#head\">head</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#ready\">ready</a> && <a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#buttons\">buttons</a> != <a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#buttons\">buttons</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_head\">new_head</a> = (<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#head\">head</a> + 1) % <a class=\"id\" href=\"#PACKET_QUEUE_LEN\">PACKET_QUEUE_LEN</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#new_head\">new_head</a> != <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#tail\">tail</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a> = &amp;<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#packets\">packets</a>[<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#head\">head</a> = <a class=\"id\" href=\"#new_head\">new_head</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(<a class=\"id\" href=\"#p\">p</a>, 0, sizeof(struct <a class=\"id\" href=\"#mousedev_motion\">mousedev_motion</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#packet\">packet</a>-><a class=\"id\" href=\"#abs_event\">abs_event</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dx\">dx</a> += <a class=\"id\" href=\"#packet\">packet</a>-><a class=\"id\" href=\"#x\">x</a> - <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#pos_x\">pos_x</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dy\">dy</a> += <a class=\"id\" href=\"#packet\">packet</a>-><a class=\"id\" href=\"#y\">y</a> - <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#pos_y\">pos_y</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#pos_x\">pos_x</a> = <a class=\"id\" href=\"#packet\">packet</a>-><a class=\"id\" href=\"#x\">x</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#pos_y\">pos_y</a> = <a class=\"id\" href=\"#packet\">packet</a>-><a class=\"id\" href=\"#y\">y</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#pos_x\">pos_x</a> += <a class=\"id\" href=\"#packet\">packet</a>-><a class=\"id\" href=\"#dx\">dx</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#pos_x\">pos_x</a> = <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#pos_x\">pos_x</a> &lt; 0 ?", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>0 : (<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#pos_x\">pos_x</a> >= <a class=\"id\" href=\"#xres\">xres</a> ? <a class=\"id\" href=\"#xres\">xres</a> : <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#pos_x\">pos_x</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#pos_y\">pos_y</a> += <a class=\"id\" href=\"#packet\">packet</a>-><a class=\"id\" href=\"#dy\">dy</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#pos_y\">pos_y</a> = <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#pos_y\">pos_y</a> &lt; 0 ?", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>0 : (<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#pos_y\">pos_y</a> >= <a class=\"id\" href=\"#yres\">yres</a> ? <a class=\"id\" href=\"#yres\">yres</a> : <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#pos_y\">pos_y</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dx\">dx</a> += <a class=\"id\" href=\"#packet\">packet</a>-><a class=\"id\" href=\"#dx\">dx</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dy\">dy</a> += <a class=\"id\" href=\"#packet\">packet</a>-><a class=\"id\" href=\"#dy\">dy</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dz\">dz</a> += <a class=\"id\" href=\"#packet\">packet</a>-><a class=\"id\" href=\"#dz\">dz</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#buttons\">buttons</a> = <a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#buttons\">buttons</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dx\">dx</a> || <a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dy\">dy</a> || <a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dz\">dz</a> ||", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#buttons\">buttons</a> != <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#last_buttons\">last_buttons</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#ready\">ready</a> = 1;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock\">spin_unlock</a>(&amp;<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#packet_lock\">packet_lock</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#ready\">ready</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kill_fasync\">kill_fasync</a>(&amp;<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#fasync\">fasync</a>, <a class=\"id\" href=\"#SIGIO\">SIGIO</a>, <a class=\"id\" href=\"#POLL_IN\">POLL_IN</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#wake_readers\">wake_readers</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rcu_read_unlock\">rcu_read_unlock</a>();", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#wake_readers\">wake_readers</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#wake_up_interruptible\">wake_up_interruptible</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#wait\">wait</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#mousedev_touchpad_touch\">mousedev_touchpad_touch</a>(struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>, int <a class=\"id\" href=\"#value\">value</a>)", 
"{", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#value\">value</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#touch\">touch</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#time_before\">time_before</a>(<a class=\"id\" href=\"#jiffies\">jiffies</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#touch\">touch</a> + <a class=\"id\" href=\"#msecs_to_jiffies\">msecs_to_jiffies</a>(<a class=\"id\" href=\"#tap_time\">tap_time</a>))) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * Toggle left button to emulate tap.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * We rely on the fact that mousedev_mix always has 0</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * motion packet so we won't mess current position.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_bit\">set_bit</a>(0, &amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#buttons\">buttons</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_bit\">set_bit</a>(0, &amp;<a class=\"id\" href=\"#mousedev_mix\">mousedev_mix</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#buttons\">buttons</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev_notify_readers\">mousedev_notify_readers</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>, &amp;<a class=\"id\" href=\"#mousedev_mix\">mousedev_mix</a>-><a class=\"id\" href=\"#packet\">packet</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev_notify_readers\">mousedev_notify_readers</a>(<a class=\"id\" href=\"#mousedev_mix\">mousedev_mix</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>&amp;<a class=\"id\" href=\"#mousedev_mix\">mousedev_mix</a>-><a class=\"id\" href=\"#packet\">packet</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#clear_bit\">clear_bit</a>(0, &amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#buttons\">buttons</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#clear_bit\">clear_bit</a>(0, &amp;<a class=\"id\" href=\"#mousedev_mix\">mousedev_mix</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#buttons\">buttons</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#touch\">touch</a> = <a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#pkt_count\">pkt_count</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#frac_dx\">frac_dx</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#frac_dy\">frac_dy</a> = 0;", 
"", 
"<span class=\"ts\"/>} else if (!<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#touch\">touch</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#touch\">touch</a> = <a class=\"id\" href=\"#jiffies\">jiffies</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#mousedev_event\">mousedev_event</a>(struct <a class=\"id\" href=\"#input_handle\">input_handle</a> *<a class=\"id\" href=\"#handle\">handle</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   unsigned int <a class=\"id\" href=\"#type\">type</a>, unsigned int <a class=\"id\" href=\"#code\">code</a>, int <a class=\"id\" href=\"#value\">value</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a> = <a class=\"id\" href=\"#handle\">handle</a>-><a class=\"id\" href=\"#private\">private</a>;", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#type\">type</a>) {", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#EV_ABS\">EV_ABS</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Ignore joysticks */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#BTN_TRIGGER\">BTN_TRIGGER</a>, <a class=\"id\" href=\"#handle\">handle</a>-><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#keybit\">keybit</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#BTN_TOOL_FINGER\">BTN_TOOL_FINGER</a>, <a class=\"id\" href=\"#handle\">handle</a>-><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#keybit\">keybit</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev_touchpad_event\">mousedev_touchpad_event</a>(<a class=\"id\" href=\"#handle\">handle</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>, <a class=\"id\" href=\"#code\">code</a>, <a class=\"id\" href=\"#value\">value</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev_abs_event\">mousedev_abs_event</a>(<a class=\"id\" href=\"#handle\">handle</a>-><a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#mousedev\">mousedev</a>, <a class=\"id\" href=\"#code\">code</a>, <a class=\"id\" href=\"#value\">value</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#EV_REL\">EV_REL</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev_rel_event\">mousedev_rel_event</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>, <a class=\"id\" href=\"#code\">code</a>, <a class=\"id\" href=\"#value\">value</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#EV_KEY\">EV_KEY</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#value\">value</a> != 2) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#code\">code</a> == <a class=\"id\" href=\"#BTN_TOUCH\">BTN_TOUCH</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#BTN_TOOL_FINGER\">BTN_TOOL_FINGER</a>, <a class=\"id\" href=\"#handle\">handle</a>-><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#keybit\">keybit</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev_touchpad_touch\">mousedev_touchpad_touch</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>, <a class=\"id\" href=\"#value\">value</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev_key_event\">mousedev_key_event</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>, <a class=\"id\" href=\"#code\">code</a>, <a class=\"id\" href=\"#value\">value</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#EV_SYN\">EV_SYN</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#code\">code</a> == <a class=\"id\" href=\"#SYN_REPORT\">SYN_REPORT</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#touch\">touch</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#pkt_count\">pkt_count</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * Input system eats duplicate events,</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * but we need all of them to do correct</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * averaging so apply present one forward</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#fx\">fx</a>(0) = <a class=\"id\" href=\"#fx\">fx</a>(1);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#fy\">fy</a>(0) = <a class=\"id\" href=\"#fy\">fy</a>(1);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev_notify_readers\">mousedev_notify_readers</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>, &amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev_notify_readers\">mousedev_notify_readers</a>(<a class=\"id\" href=\"#mousedev_mix\">mousedev_mix</a>, &amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#dx\">dx</a> = <a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#dy\">dy</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#dz\">dz</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#packet\">packet</a>.<a class=\"id\" href=\"#abs_event\">abs_event</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static int <a class=\"id\" href=\"#mousedev_fasync\">mousedev_fasync</a>(int <a class=\"id\" href=\"#fd\">fd</a>, struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>, int <a class=\"id\" href=\"#on\">on</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev_client\">mousedev_client</a> *<a class=\"id\" href=\"#client\">client</a> = <a class=\"id\" href=\"#file\">file</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#fasync_helper\">fasync_helper</a>(<a class=\"id\" href=\"#fd\">fd</a>, <a class=\"id\" href=\"#file\">file</a>, <a class=\"id\" href=\"#on\">on</a>, &amp;<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#fasync\">fasync</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#mousedev_free\">mousedev_free</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a> = <a class=\"id\" href=\"#container_of\">container_of</a>(<a class=\"id\" href=\"#dev\">dev</a>, struct <a class=\"id\" href=\"#mousedev\">mousedev</a>, <a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#input_put_device\">input_put_device</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#handle\">handle</a>.<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#mousedev_open_device\">mousedev_open_device</a>(struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#mutex_lock_interruptible\">mutex_lock_interruptible</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#mutex\">mutex</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#minor\">minor</a> == <a class=\"id\" href=\"#MOUSEDEV_MIX\">MOUSEDEV_MIX</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mixdev_open_devices\">mixdev_open_devices</a>();", 
"<span class=\"ts\"/>else if (!<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#exist\">exist</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/>else if (!<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#open\">open</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#input_open_device\">input_open_device</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#handle\">handle</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#open\">open</a>--;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#mutex\">mutex</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#mousedev_close_device\">mousedev_close_device</a>(struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#mutex\">mutex</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#minor\">minor</a> == <a class=\"id\" href=\"#MOUSEDEV_MIX\">MOUSEDEV_MIX</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mixdev_close_devices\">mixdev_close_devices</a>();", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#exist\">exist</a> && !--<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#open\">open</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_close_device\">input_close_device</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#handle\">handle</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#mutex\">mutex</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Open all available devices so they can all be multiplexed in one.</span>", 
"<span class=\"comment\"> * stream. Note that this function is called with mousedev_mix-&gt;mutex</span>", 
"<span class=\"comment\"> * held.</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#mixdev_open_devices\">mixdev_open_devices</a>(void)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#mousedev_mix\">mousedev_mix</a>-><a class=\"id\" href=\"#open\">open</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>, &amp;<a class=\"id\" href=\"#mousedev_mix_list\">mousedev_mix_list</a>, <a class=\"id\" href=\"#mixdev_node\">mixdev_node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#mixdev_open\">mixdev_open</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#mousedev_open_device\">mousedev_open_device</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#mixdev_open\">mixdev_open</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Close all devices that were opened as part of multiplexed</span>", 
"<span class=\"comment\"> * device. Note that this function is called with mousedev_mix-&gt;mutex</span>", 
"<span class=\"comment\"> * held.</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#mixdev_close_devices\">mixdev_close_devices</a>(void)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>;", 
"", 
"<span class=\"ts\"/>if (--<a class=\"id\" href=\"#mousedev_mix\">mousedev_mix</a>-><a class=\"id\" href=\"#open\">open</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>, &amp;<a class=\"id\" href=\"#mousedev_mix_list\">mousedev_mix_list</a>, <a class=\"id\" href=\"#mixdev_node\">mixdev_node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#mixdev_open\">mixdev_open</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#mixdev_open\">mixdev_open</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev_close_device\">mousedev_close_device</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"", 
"static void <a class=\"id\" href=\"#mousedev_attach_client\">mousedev_attach_client</a>(struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   struct <a class=\"id\" href=\"#mousedev_client\">mousedev_client</a> *<a class=\"id\" href=\"#client\">client</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock\">spin_lock</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#client_lock\">client_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_add_tail_rcu\">list_add_tail_rcu</a>(&amp;<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#node\">node</a>, &amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#client_list\">client_list</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock\">spin_unlock</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#client_lock\">client_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#synchronize_rcu\">synchronize_rcu</a>();", 
"}", 
"", 
"static void <a class=\"id\" href=\"#mousedev_detach_client\">mousedev_detach_client</a>(struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   struct <a class=\"id\" href=\"#mousedev_client\">mousedev_client</a> *<a class=\"id\" href=\"#client\">client</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock\">spin_lock</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#client_lock\">client_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_del_rcu\">list_del_rcu</a>(&amp;<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#node\">node</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock\">spin_unlock</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#client_lock\">client_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#synchronize_rcu\">synchronize_rcu</a>();", 
"}", 
"", 
"static int <a class=\"id\" href=\"#mousedev_release\">mousedev_release</a>(struct <a class=\"id\" href=\"#inode\">inode</a> *<a class=\"id\" href=\"#inode\">inode</a>, struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev_client\">mousedev_client</a> *<a class=\"id\" href=\"#client\">client</a> = <a class=\"id\" href=\"#file\">file</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a> = <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#mousedev\">mousedev</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev_detach_client\">mousedev_detach_client</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>, <a class=\"id\" href=\"#client\">client</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#client\">client</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev_close_device\">mousedev_close_device</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#put_device\">put_device</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#mousedev_open\">mousedev_open</a>(struct <a class=\"id\" href=\"#inode\">inode</a> *<a class=\"id\" href=\"#inode\">inode</a>, struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev_client\">mousedev_client</a> *<a class=\"id\" href=\"#client\">client</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_INPUT_MOUSEDEV_PSAUX\">CONFIG_INPUT_MOUSEDEV_PSAUX</a>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#imajor\">imajor</a>(<a class=\"id\" href=\"#inode\">inode</a>) == <a class=\"id\" href=\"#MISC_MAJOR\">MISC_MAJOR</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#i\">i</a> = <a class=\"id\" href=\"#MOUSEDEV_MIX\">MOUSEDEV_MIX</a>;", 
"<span class=\"ts\"/>else", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#i\">i</a> = <a class=\"id\" href=\"#iminor\">iminor</a>(<a class=\"id\" href=\"#inode\">inode</a>) - <a class=\"id\" href=\"#MOUSEDEV_MINOR_BASE\">MOUSEDEV_MINOR_BASE</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#i\">i</a> >= <a class=\"id\" href=\"#MOUSEDEV_MINORS\">MOUSEDEV_MINORS</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#mutex_lock_interruptible\">mutex_lock_interruptible</a>(&amp;<a class=\"id\" href=\"#mousedev_table_mutex\">mousedev_table_mutex</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a> = <a class=\"id\" href=\"#mousedev_table\">mousedev_table</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#mousedev\">mousedev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#get_device\">get_device</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#mousedev_table_mutex\">mousedev_table_mutex</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#mousedev\">mousedev</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof(struct <a class=\"id\" href=\"#mousedev_client\">mousedev_client</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#client\">client</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err_put_mousedev\">err_put_mousedev</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_init\">spin_lock_init</a>(&amp;<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#packet_lock\">packet_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#pos_x\">pos_x</a> = <a class=\"id\" href=\"#xres\">xres</a> / 2;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#pos_y\">pos_y</a> = <a class=\"id\" href=\"#yres\">yres</a> / 2;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#mousedev\">mousedev</a> = <a class=\"id\" href=\"#mousedev\">mousedev</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev_attach_client\">mousedev_attach_client</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>, <a class=\"id\" href=\"#client\">client</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#mousedev_open_device\">mousedev_open_device</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err_free_client\">err_free_client</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#file\">file</a>-><a class=\"id\" href=\"#private_data\">private_data</a> = <a class=\"id\" href=\"#client\">client</a>;", 
"<span class=\"ts\"/>return 0;", 
"", 
" <a class=\"id\" href=\"#err_free_client\">err_free_client</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev_detach_client\">mousedev_detach_client</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>, <a class=\"id\" href=\"#client\">client</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#client\">client</a>);", 
" <a class=\"id\" href=\"#err_put_mousedev\">err_put_mousedev</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#put_device\">put_device</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> int <a class=\"id\" href=\"#mousedev_limit_delta\">mousedev_limit_delta</a>(int <a class=\"id\" href=\"#delta\">delta</a>, int <a class=\"id\" href=\"#limit\">limit</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#delta\">delta</a> &gt; <a class=\"id\" href=\"#limit\">limit</a> ? <a class=\"id\" href=\"#limit\">limit</a> : (<a class=\"id\" href=\"#delta\">delta</a> &lt; -<a class=\"id\" href=\"#limit\">limit</a> ? -<a class=\"id\" href=\"#limit\">limit</a> : <a class=\"id\" href=\"#delta\">delta</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#mousedev_packet\">mousedev_packet</a>(struct <a class=\"id\" href=\"#mousedev_client\">mousedev_client</a> *<a class=\"id\" href=\"#client\">client</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    signed char *<a class=\"id\" href=\"#ps2_data\">ps2_data</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev_motion\">mousedev_motion</a> *<a class=\"id\" href=\"#p\">p</a> = &amp;<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#packets\">packets</a>[<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#tail\">tail</a>];", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ps2_data\">ps2_data</a>[0] = 0x08 |", 
"<span class=\"ts\"/><span class=\"ts\"/>((<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dx\">dx</a> &lt; 0) << 4) | ((<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dy\">dy</a> &lt; 0) << 5) | (<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#buttons\">buttons</a> &amp; 0x07);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ps2_data\">ps2_data</a>[1] = <a class=\"id\" href=\"#mousedev_limit_delta\">mousedev_limit_delta</a>(<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dx\">dx</a>, 127);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ps2_data\">ps2_data</a>[2] = <a class=\"id\" href=\"#mousedev_limit_delta\">mousedev_limit_delta</a>(<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dy\">dy</a>, 127);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dx\">dx</a> -= <a class=\"id\" href=\"#ps2_data\">ps2_data</a>[1];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dy\">dy</a> -= <a class=\"id\" href=\"#ps2_data\">ps2_data</a>[2];", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#mode\">mode</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#MOUSEDEV_EMUL_EXPS\">MOUSEDEV_EMUL_EXPS</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ps2_data\">ps2_data</a>[3] = <a class=\"id\" href=\"#mousedev_limit_delta\">mousedev_limit_delta</a>(<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dz\">dz</a>, 7);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dz\">dz</a> -= <a class=\"id\" href=\"#ps2_data\">ps2_data</a>[3];", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ps2_data\">ps2_data</a>[3] = (<a class=\"id\" href=\"#ps2_data\">ps2_data</a>[3] &amp; 0x0f) | ((<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#buttons\">buttons</a> &amp; 0x18) << 1);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#bufsiz\">bufsiz</a> = 4;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#MOUSEDEV_EMUL_IMPS\">MOUSEDEV_EMUL_IMPS</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ps2_data\">ps2_data</a>[0] |=", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>((<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#buttons\">buttons</a> &amp; 0x10) >> 3) | ((<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#buttons\">buttons</a> &amp; 0x08) >> 1);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ps2_data\">ps2_data</a>[3] = <a class=\"id\" href=\"#mousedev_limit_delta\">mousedev_limit_delta</a>(<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dz\">dz</a>, 127);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dz\">dz</a> -= <a class=\"id\" href=\"#ps2_data\">ps2_data</a>[3];", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#bufsiz\">bufsiz</a> = 4;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#MOUSEDEV_EMUL_PS2\">MOUSEDEV_EMUL_PS2</a>:", 
"<span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ps2_data\">ps2_data</a>[0] |=", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>((<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#buttons\">buttons</a> &amp; 0x10) >> 3) | ((<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#buttons\">buttons</a> &amp; 0x08) >> 1);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dz\">dz</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#bufsiz\">bufsiz</a> = 3;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dx\">dx</a> && !<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dy\">dy</a> && !<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#dz\">dz</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#tail\">tail</a> == <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#head\">head</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#ready\">ready</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#last_buttons\">last_buttons</a> = <a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#buttons\">buttons</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#tail\">tail</a> = (<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#tail\">tail</a> + 1) % <a class=\"id\" href=\"#PACKET_QUEUE_LEN\">PACKET_QUEUE_LEN</a>;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static void <a class=\"id\" href=\"#mousedev_generate_response\">mousedev_generate_response</a>(struct <a class=\"id\" href=\"#mousedev_client\">mousedev_client</a> *<a class=\"id\" href=\"#client\">client</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#command\">command</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#ps2\">ps2</a>[0] = 0xfa; <span class=\"comment\">/* ACK */</span>", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#command\">command</a>) {", 
"", 
"<span class=\"ts\"/>case 0xeb: <span class=\"comment\">/* Poll */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev_packet\">mousedev_packet</a>(<a class=\"id\" href=\"#client\">client</a>, &amp;<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#ps2\">ps2</a>[1]);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#bufsiz\">bufsiz</a>++; <span class=\"comment\">/* account for leading ACK */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>case 0xf2: <span class=\"comment\">/* Get ID */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>switch (<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#mode\">mode</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#MOUSEDEV_EMUL_PS2\">MOUSEDEV_EMUL_PS2</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#ps2\">ps2</a>[1] = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#MOUSEDEV_EMUL_IMPS\">MOUSEDEV_EMUL_IMPS</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#ps2\">ps2</a>[1] = 3;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#MOUSEDEV_EMUL_EXPS\">MOUSEDEV_EMUL_EXPS</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#ps2\">ps2</a>[1] = 4;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#bufsiz\">bufsiz</a> = 2;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>case 0xe9: <span class=\"comment\">/* Get info */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#ps2\">ps2</a>[1] = 0x60; <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#ps2\">ps2</a>[2] = 3; <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#ps2\">ps2</a>[3] = 200;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#bufsiz\">bufsiz</a> = 4;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>case 0xff: <span class=\"comment\">/* Reset */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#impsseq\">impsseq</a> = <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#imexseq\">imexseq</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#mode\">mode</a> = <a class=\"id\" href=\"#MOUSEDEV_EMUL_PS2\">MOUSEDEV_EMUL_PS2</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#ps2\">ps2</a>[1] = 0xaa; <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#ps2\">ps2</a>[2] = 0x00;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#bufsiz\">bufsiz</a> = 3;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#bufsiz\">bufsiz</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#buffer\">buffer</a> = <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#bufsiz\">bufsiz</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#mousedev_write\">mousedev_write</a>(struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>, const char <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#buffer\">buffer</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>, <a class=\"id\" href=\"#loff_t\">loff_t</a> *<a class=\"id\" href=\"#ppos\">ppos</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev_client\">mousedev_client</a> *<a class=\"id\" href=\"#client\">client</a> = <a class=\"id\" href=\"#file\">file</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#c\">c</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#count\">count</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#get_user\">get_user</a>(<a class=\"id\" href=\"#c\">c</a>, <a class=\"id\" href=\"#buffer\">buffer</a> + <a class=\"id\" href=\"#i\">i</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irq\">spin_lock_irq</a>(&amp;<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#packet_lock\">packet_lock</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#c\">c</a> == <a class=\"id\" href=\"#mousedev_imex_seq\">mousedev_imex_seq</a>[<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#imexseq\">imexseq</a>]) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (++<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#imexseq\">imexseq</a> == <a class=\"id\" href=\"#MOUSEDEV_SEQ_LEN\">MOUSEDEV_SEQ_LEN</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#imexseq\">imexseq</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#mode\">mode</a> = <a class=\"id\" href=\"#MOUSEDEV_EMUL_EXPS\">MOUSEDEV_EMUL_EXPS</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#imexseq\">imexseq</a> = 0;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#c\">c</a> == <a class=\"id\" href=\"#mousedev_imps_seq\">mousedev_imps_seq</a>[<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#impsseq\">impsseq</a>]) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (++<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#impsseq\">impsseq</a> == <a class=\"id\" href=\"#MOUSEDEV_SEQ_LEN\">MOUSEDEV_SEQ_LEN</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#impsseq\">impsseq</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#mode\">mode</a> = <a class=\"id\" href=\"#MOUSEDEV_EMUL_IMPS\">MOUSEDEV_EMUL_IMPS</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#impsseq\">impsseq</a> = 0;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev_generate_response\">mousedev_generate_response</a>(<a class=\"id\" href=\"#client\">client</a>, <a class=\"id\" href=\"#c\">c</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irq\">spin_unlock_irq</a>(&amp;<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#packet_lock\">packet_lock</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kill_fasync\">kill_fasync</a>(&amp;<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#fasync\">fasync</a>, <a class=\"id\" href=\"#SIGIO\">SIGIO</a>, <a class=\"id\" href=\"#POLL_IN\">POLL_IN</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#wake_up_interruptible\">wake_up_interruptible</a>(&amp;<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#wait\">wait</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#count\">count</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#mousedev_read\">mousedev_read</a>(struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>, char <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#buffer\">buffer</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>, <a class=\"id\" href=\"#loff_t\">loff_t</a> *<a class=\"id\" href=\"#ppos\">ppos</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev_client\">mousedev_client</a> *<a class=\"id\" href=\"#client\">client</a> = <a class=\"id\" href=\"#file\">file</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a> = <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#mousedev\">mousedev</a>;", 
"<span class=\"ts\"/>signed char <a class=\"id\" href=\"#data\">data</a>[sizeof(<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#ps2\">ps2</a>)];", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a> = 0;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#ready\">ready</a> && !<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#buffer\">buffer</a> && <a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#exist\">exist</a> &&", 
"<span class=\"ts\"/>    (<a class=\"id\" href=\"#file\">file</a>-><a class=\"id\" href=\"#f_flags\">f_flags</a> &amp; <a class=\"id\" href=\"#O_NONBLOCK\">O_NONBLOCK</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EAGAIN\">EAGAIN</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#wait_event_interruptible\">wait_event_interruptible</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#wait\">wait</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>!<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#exist\">exist</a> || <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#ready\">ready</a> || <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#buffer\">buffer</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#exist\">exist</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irq\">spin_lock_irq</a>(&amp;<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#packet_lock\">packet_lock</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#buffer\">buffer</a> && <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#ready\">ready</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev_packet\">mousedev_packet</a>(<a class=\"id\" href=\"#client\">client</a>, <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#ps2\">ps2</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#buffer\">buffer</a> = <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#bufsiz\">bufsiz</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#count\">count</a> &gt; <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#buffer\">buffer</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#count\">count</a> = <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#buffer\">buffer</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>(<a class=\"id\" href=\"#data\">data</a>, <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#ps2\">ps2</a> + <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#bufsiz\">bufsiz</a> - <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#buffer\">buffer</a>, <a class=\"id\" href=\"#count\">count</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#buffer\">buffer</a> -= <a class=\"id\" href=\"#count\">count</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irq\">spin_unlock_irq</a>(&amp;<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#packet_lock\">packet_lock</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#buffer\">buffer</a>, <a class=\"id\" href=\"#data\">data</a>, <a class=\"id\" href=\"#count\">count</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#count\">count</a>;", 
"}", 
"", 
"<span class=\"comment\">/* No kernel lock - fine */</span>", 
"static unsigned int <a class=\"id\" href=\"#mousedev_poll\">mousedev_poll</a>(struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>, <a class=\"id\" href=\"#poll_table\">poll_table</a> *<a class=\"id\" href=\"#wait\">wait</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev_client\">mousedev_client</a> *<a class=\"id\" href=\"#client\">client</a> = <a class=\"id\" href=\"#file\">file</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a> = <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#mousedev\">mousedev</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#mask\">mask</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#poll_wait\">poll_wait</a>(<a class=\"id\" href=\"#file\">file</a>, &amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#wait\">wait</a>, <a class=\"id\" href=\"#wait\">wait</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mask\">mask</a> = <a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#exist\">exist</a> ? <a class=\"id\" href=\"#POLLOUT\">POLLOUT</a> | <a class=\"id\" href=\"#POLLWRNORM\">POLLWRNORM</a> : <a class=\"id\" href=\"#POLLHUP\">POLLHUP</a> | <a class=\"id\" href=\"#POLLERR\">POLLERR</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#ready\">ready</a> || <a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#buffer\">buffer</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mask\">mask</a> |= <a class=\"id\" href=\"#POLLIN\">POLLIN</a> | <a class=\"id\" href=\"#POLLRDNORM\">POLLRDNORM</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#mask\">mask</a>;", 
"}", 
"", 
"static const struct <a class=\"id\" href=\"#file_operations\">file_operations</a> <a class=\"id\" href=\"#mousedev_fops\">mousedev_fops</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#owner\">owner</a> =<span class=\"ts\"/><a class=\"id\" href=\"#THIS_MODULE\">THIS_MODULE</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#read\">read</a> =<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev_read\">mousedev_read</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#write\">write</a> =<span class=\"ts\"/><a class=\"id\" href=\"#mousedev_write\">mousedev_write</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#poll\">poll</a> =<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev_poll\">mousedev_poll</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#open\">open</a> =<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev_open\">mousedev_open</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#release\">release</a> =<span class=\"ts\"/><a class=\"id\" href=\"#mousedev_release\">mousedev_release</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#fasync\">fasync</a> =<span class=\"ts\"/><a class=\"id\" href=\"#mousedev_fasync\">mousedev_fasync</a>,", 
"};", 
"", 
"static int <a class=\"id\" href=\"#mousedev_install_chrdev\">mousedev_install_chrdev</a>(struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev_table\">mousedev_table</a>[<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#minor\">minor</a>] = <a class=\"id\" href=\"#mousedev\">mousedev</a>;", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#mousedev_remove_chrdev\">mousedev_remove_chrdev</a>(struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#mousedev_table_mutex\">mousedev_table_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev_table\">mousedev_table</a>[<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#minor\">minor</a>] = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#mousedev_table_mutex\">mousedev_table_mutex</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Mark device non-existent. This disables writes, ioctls and</span>", 
"<span class=\"comment\"> * prevents new users from opening the device. Already posted</span>", 
"<span class=\"comment\"> * blocking reads will stay, however new ones will fail.</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#mousedev_mark_dead\">mousedev_mark_dead</a>(struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#mutex\">mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#exist\">exist</a> = <a class=\"id\" href=\"#false\">false</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#mutex\">mutex</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Wake up users waiting for IO so they can disconnect from</span>", 
"<span class=\"comment\"> * dead device.</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#mousedev_hangup\">mousedev_hangup</a>(struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev_client\">mousedev_client</a> *<a class=\"id\" href=\"#client\">client</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock\">spin_lock</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#client_lock\">client_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#client\">client</a>, &amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#client_list\">client_list</a>, <a class=\"id\" href=\"#node\">node</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kill_fasync\">kill_fasync</a>(&amp;<a class=\"id\" href=\"#client\">client</a>-><a class=\"id\" href=\"#fasync\">fasync</a>, <a class=\"id\" href=\"#SIGIO\">SIGIO</a>, <a class=\"id\" href=\"#POLL_HUP\">POLL_HUP</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock\">spin_unlock</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#client_lock\">client_lock</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#wake_up_interruptible\">wake_up_interruptible</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#wait\">wait</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#mousedev_cleanup\">mousedev_cleanup</a>(struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#input_handle\">input_handle</a> *<a class=\"id\" href=\"#handle\">handle</a> = &amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#handle\">handle</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev_mark_dead\">mousedev_mark_dead</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev_hangup\">mousedev_hangup</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev_remove_chrdev\">mousedev_remove_chrdev</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* mousedev is marked dead so no one else accesses mousedev-&gt;open */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#open\">open</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_close_device\">input_close_device</a>(<a class=\"id\" href=\"#handle\">handle</a>);", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev_create\">mousedev_create</a>(struct <a class=\"id\" href=\"#input_dev\">input_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#input_handler\">input_handler</a> *<a class=\"id\" href=\"#handler\">handler</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#minor\">minor</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof(struct <a class=\"id\" href=\"#mousedev\">mousedev</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#mousedev\">mousedev</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err_out\">err_out</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#INIT_LIST_HEAD\">INIT_LIST_HEAD</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#client_list\">client_list</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#INIT_LIST_HEAD\">INIT_LIST_HEAD</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#mixdev_node\">mixdev_node</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_init\">spin_lock_init</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#client_lock\">client_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_init\">mutex_init</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#mutex\">mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#lockdep_set_subclass\">lockdep_set_subclass</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#mutex\">mutex</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     <a class=\"id\" href=\"#minor\">minor</a> == <a class=\"id\" href=\"#MOUSEDEV_MIX\">MOUSEDEV_MIX</a> ? <a class=\"id\" href=\"#MOUSEDEV_MIX\">MOUSEDEV_MIX</a> : 0);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#init_waitqueue_head\">init_waitqueue_head</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#wait\">wait</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#minor\">minor</a> == <a class=\"id\" href=\"#MOUSEDEV_MIX\">MOUSEDEV_MIX</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_set_name\">dev_set_name</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"mice\");", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_set_name\">dev_set_name</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"mouse%d\", <a class=\"id\" href=\"#minor\">minor</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#minor\">minor</a> = <a class=\"id\" href=\"#minor\">minor</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#exist\">exist</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#handle\">handle</a>.<a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#input_get_device\">input_get_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#handle\">handle</a>.<a class=\"id\" href=\"#name\">name</a> = <a class=\"id\" href=\"#dev_name\">dev_name</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#handle\">handle</a>.<a class=\"id\" href=\"#handler\">handler</a> = <a class=\"id\" href=\"#handler\">handler</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#handle\">handle</a>.<a class=\"id\" href=\"#private\">private</a> = <a class=\"id\" href=\"#mousedev\">mousedev</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#class\">class</a> = &amp;<a class=\"id\" href=\"#input_class\">input_class</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#dev\">dev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#parent\">parent</a> = &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#devt\">devt</a> = <a class=\"id\" href=\"#MKDEV\">MKDEV</a>(<a class=\"id\" href=\"#INPUT_MAJOR\">INPUT_MAJOR</a>, <a class=\"id\" href=\"#MOUSEDEV_MINOR_BASE\">MOUSEDEV_MINOR_BASE</a> + <a class=\"id\" href=\"#minor\">minor</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#release\">release</a> = <a class=\"id\" href=\"#mousedev_free\">mousedev_free</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device_initialize\">device_initialize</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#minor\">minor</a> != <a class=\"id\" href=\"#MOUSEDEV_MIX\">MOUSEDEV_MIX</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#input_register_handle\">input_register_handle</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#handle\">handle</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err_free_mousedev\">err_free_mousedev</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#mousedev_install_chrdev\">mousedev_install_chrdev</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err_unregister_handle\">err_unregister_handle</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#device_add\">device_add</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err_cleanup_mousedev\">err_cleanup_mousedev</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#mousedev\">mousedev</a>;", 
"", 
" <a class=\"id\" href=\"#err_cleanup_mousedev\">err_cleanup_mousedev</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev_cleanup\">mousedev_cleanup</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>);", 
" <a class=\"id\" href=\"#err_unregister_handle\">err_unregister_handle</a>:", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#minor\">minor</a> != <a class=\"id\" href=\"#MOUSEDEV_MIX\">MOUSEDEV_MIX</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_unregister_handle\">input_unregister_handle</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#handle\">handle</a>);", 
" <a class=\"id\" href=\"#err_free_mousedev\">err_free_mousedev</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#put_device\">put_device</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
" <a class=\"id\" href=\"#err_out\">err_out</a>:", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(<a class=\"id\" href=\"#error\">error</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#mousedev_destroy\">mousedev_destroy</a>(struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device_del\">device_del</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev_cleanup\">mousedev_cleanup</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#minor\">minor</a> != <a class=\"id\" href=\"#MOUSEDEV_MIX\">MOUSEDEV_MIX</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_unregister_handle\">input_unregister_handle</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#handle\">handle</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#put_device\">put_device</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#mixdev_add_device\">mixdev_add_device</a>(struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#mutex_lock_interruptible\">mutex_lock_interruptible</a>(&amp;<a class=\"id\" href=\"#mousedev_mix\">mousedev_mix</a>-><a class=\"id\" href=\"#mutex\">mutex</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#mousedev_mix\">mousedev_mix</a>-><a class=\"id\" href=\"#open\">open</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#mousedev_open_device\">mousedev_open_device</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#mixdev_open\">mixdev_open</a> = 1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#get_device\">get_device</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_add_tail\">list_add_tail</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#mixdev_node\">mixdev_node</a>, &amp;<a class=\"id\" href=\"#mousedev_mix_list\">mousedev_mix_list</a>);", 
"", 
" <a class=\"id\" href=\"#out\">out</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#mousedev_mix\">mousedev_mix</a>-><a class=\"id\" href=\"#mutex\">mutex</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#mixdev_remove_device\">mixdev_remove_device</a>(struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#mousedev_mix\">mousedev_mix</a>-><a class=\"id\" href=\"#mutex\">mutex</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#mixdev_open\">mixdev_open</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#mixdev_open\">mixdev_open</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev_close_device\">mousedev_close_device</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_del_init\">list_del_init</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#mixdev_node\">mixdev_node</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#mousedev_mix\">mousedev_mix</a>-><a class=\"id\" href=\"#mutex\">mutex</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#put_device\">put_device</a>(&amp;<a class=\"id\" href=\"#mousedev\">mousedev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#mousedev_connect\">mousedev_connect</a>(struct <a class=\"id\" href=\"#input_handler\">input_handler</a> *<a class=\"id\" href=\"#handler\">handler</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    struct <a class=\"id\" href=\"#input_dev\">input_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    const struct <a class=\"id\" href=\"#input_device_id\">input_device_id</a> *<a class=\"id\" href=\"#id\">id</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#minor\">minor</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#minor\">minor</a> = 0; <a class=\"id\" href=\"#minor\">minor</a> &lt; <a class=\"id\" href=\"#MOUSEDEV_MINORS\">MOUSEDEV_MINORS</a>; <a class=\"id\" href=\"#minor\">minor</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#mousedev_table\">mousedev_table</a>[<a class=\"id\" href=\"#minor\">minor</a>])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#minor\">minor</a> == <a class=\"id\" href=\"#MOUSEDEV_MINORS\">MOUSEDEV_MINORS</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"mousedev: no more free mousedev devices\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENFILE\">ENFILE</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev\">mousedev</a> = <a class=\"id\" href=\"#mousedev_create\">mousedev_create</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#handler\">handler</a>, <a class=\"id\" href=\"#minor\">minor</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#IS_ERR\">IS_ERR</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#PTR_ERR\">PTR_ERR</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#mixdev_add_device\">mixdev_add_device</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev_destroy\">mousedev_destroy</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#mousedev_disconnect\">mousedev_disconnect</a>(struct <a class=\"id\" href=\"#input_handle\">input_handle</a> *<a class=\"id\" href=\"#handle\">handle</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mousedev\">mousedev</a> *<a class=\"id\" href=\"#mousedev\">mousedev</a> = <a class=\"id\" href=\"#handle\">handle</a>-><a class=\"id\" href=\"#private\">private</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mixdev_remove_device\">mixdev_remove_device</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev_destroy\">mousedev_destroy</a>(<a class=\"id\" href=\"#mousedev\">mousedev</a>);", 
"}", 
"", 
"static const struct <a class=\"id\" href=\"#input_device_id\">input_device_id</a> <a class=\"id\" href=\"#mousedev_ids\">mousedev_ids</a>[] = {", 
"<span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#flags\">flags</a> = <a class=\"id\" href=\"#INPUT_DEVICE_ID_MATCH_EVBIT\">INPUT_DEVICE_ID_MATCH_EVBIT</a> |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#INPUT_DEVICE_ID_MATCH_KEYBIT\">INPUT_DEVICE_ID_MATCH_KEYBIT</a> |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#INPUT_DEVICE_ID_MATCH_RELBIT\">INPUT_DEVICE_ID_MATCH_RELBIT</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#evbit\">evbit</a> = { <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#EV_KEY\">EV_KEY</a>) | <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#EV_REL\">EV_REL</a>) },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#keybit\">keybit</a> = { [<a class=\"id\" href=\"#BIT_WORD\">BIT_WORD</a>(<a class=\"id\" href=\"#BTN_LEFT\">BTN_LEFT</a>)] = <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#BTN_LEFT\">BTN_LEFT</a>) },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#relbit\">relbit</a> = { <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#REL_X\">REL_X</a>) | <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#REL_Y\">REL_Y</a>) },", 
"<span class=\"ts\"/>},<span class=\"ts\"/><span class=\"comment\">/* A mouse like device, at least one button,</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/>   two relative axes */</span>", 
"<span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#flags\">flags</a> = <a class=\"id\" href=\"#INPUT_DEVICE_ID_MATCH_EVBIT\">INPUT_DEVICE_ID_MATCH_EVBIT</a> |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#INPUT_DEVICE_ID_MATCH_RELBIT\">INPUT_DEVICE_ID_MATCH_RELBIT</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#evbit\">evbit</a> = { <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#EV_KEY\">EV_KEY</a>) | <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#EV_REL\">EV_REL</a>) },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#relbit\">relbit</a> = { <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#REL_WHEEL\">REL_WHEEL</a>) },", 
"<span class=\"ts\"/>},<span class=\"ts\"/><span class=\"comment\">/* A separate scrollwheel */</span>", 
"<span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#flags\">flags</a> = <a class=\"id\" href=\"#INPUT_DEVICE_ID_MATCH_EVBIT\">INPUT_DEVICE_ID_MATCH_EVBIT</a> |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#INPUT_DEVICE_ID_MATCH_KEYBIT\">INPUT_DEVICE_ID_MATCH_KEYBIT</a> |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#INPUT_DEVICE_ID_MATCH_ABSBIT\">INPUT_DEVICE_ID_MATCH_ABSBIT</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#evbit\">evbit</a> = { <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#EV_KEY\">EV_KEY</a>) | <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#EV_ABS\">EV_ABS</a>) },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#keybit\">keybit</a> = { [<a class=\"id\" href=\"#BIT_WORD\">BIT_WORD</a>(<a class=\"id\" href=\"#BTN_TOUCH\">BTN_TOUCH</a>)] = <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#BTN_TOUCH\">BTN_TOUCH</a>) },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#absbit\">absbit</a> = { <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#ABS_X\">ABS_X</a>) | <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#ABS_Y\">ABS_Y</a>) },", 
"<span class=\"ts\"/>},<span class=\"ts\"/><span class=\"comment\">/* A tablet like device, at least touch detection,</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/>   two absolute axes */</span>", 
"<span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#flags\">flags</a> = <a class=\"id\" href=\"#INPUT_DEVICE_ID_MATCH_EVBIT\">INPUT_DEVICE_ID_MATCH_EVBIT</a> |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#INPUT_DEVICE_ID_MATCH_KEYBIT\">INPUT_DEVICE_ID_MATCH_KEYBIT</a> |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#INPUT_DEVICE_ID_MATCH_ABSBIT\">INPUT_DEVICE_ID_MATCH_ABSBIT</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#evbit\">evbit</a> = { <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#EV_KEY\">EV_KEY</a>) | <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#EV_ABS\">EV_ABS</a>) },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#keybit\">keybit</a> = { [<a class=\"id\" href=\"#BIT_WORD\">BIT_WORD</a>(<a class=\"id\" href=\"#BTN_TOOL_FINGER\">BTN_TOOL_FINGER</a>)] =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#BTN_TOOL_FINGER\">BTN_TOOL_FINGER</a>) },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#absbit\">absbit</a> = { <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#ABS_X\">ABS_X</a>) | <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#ABS_Y\">ABS_Y</a>) |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#ABS_PRESSURE\">ABS_PRESSURE</a>) |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#ABS_TOOL_WIDTH\">ABS_TOOL_WIDTH</a>) },", 
"<span class=\"ts\"/>},<span class=\"ts\"/><span class=\"comment\">/* A touchpad */</span>", 
"<span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#flags\">flags</a> = <a class=\"id\" href=\"#INPUT_DEVICE_ID_MATCH_EVBIT\">INPUT_DEVICE_ID_MATCH_EVBIT</a> |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#INPUT_DEVICE_ID_MATCH_KEYBIT\">INPUT_DEVICE_ID_MATCH_KEYBIT</a> |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#INPUT_DEVICE_ID_MATCH_ABSBIT\">INPUT_DEVICE_ID_MATCH_ABSBIT</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#evbit\">evbit</a> = { <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#EV_KEY\">EV_KEY</a>) | <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#EV_ABS\">EV_ABS</a>) },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#keybit\">keybit</a> = { [<a class=\"id\" href=\"#BIT_WORD\">BIT_WORD</a>(<a class=\"id\" href=\"#BTN_LEFT\">BTN_LEFT</a>)] = <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#BTN_LEFT\">BTN_LEFT</a>) },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#absbit\">absbit</a> = { <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#ABS_X\">ABS_X</a>) | <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#ABS_Y\">ABS_Y</a>) },", 
"<span class=\"ts\"/>},<span class=\"ts\"/><span class=\"comment\">/* Mouse-like device with absolute X and Y but ordinary</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/>   clicks, like hp ILO2 High Performance mouse */</span>", 
"", 
"<span class=\"ts\"/>{ },<span class=\"ts\"/><span class=\"comment\">/* Terminating entry */</span>", 
"};", 
"", 
"<a class=\"id\" href=\"#MODULE_DEVICE_TABLE\">MODULE_DEVICE_TABLE</a>(<a class=\"id\" href=\"#input\">input</a>, <a class=\"id\" href=\"#mousedev_ids\">mousedev_ids</a>);", 
"", 
"static struct <a class=\"id\" href=\"#input_handler\">input_handler</a> <a class=\"id\" href=\"#mousedev_handler\">mousedev_handler</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#event\">event</a> =<span class=\"ts\"/><a class=\"id\" href=\"#mousedev_event\">mousedev_event</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#connect\">connect</a> =<span class=\"ts\"/><a class=\"id\" href=\"#mousedev_connect\">mousedev_connect</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#disconnect\">disconnect</a> =<span class=\"ts\"/><a class=\"id\" href=\"#mousedev_disconnect\">mousedev_disconnect</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#fops\">fops</a> =<span class=\"ts\"/><span class=\"ts\"/>&amp;<a class=\"id\" href=\"#mousedev_fops\">mousedev_fops</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#minor\">minor</a> =<span class=\"ts\"/><a class=\"id\" href=\"#MOUSEDEV_MINOR_BASE\">MOUSEDEV_MINOR_BASE</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a> =<span class=\"ts\"/><span class=\"ts\"/>\"mousedev\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#id_table\">id_table</a> =<span class=\"ts\"/><a class=\"id\" href=\"#mousedev_ids\">mousedev_ids</a>,", 
"};", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_INPUT_MOUSEDEV_PSAUX\">CONFIG_INPUT_MOUSEDEV_PSAUX</a>", 
"static struct <a class=\"id\" href=\"#miscdevice\">miscdevice</a> <a class=\"id\" href=\"#psaux_mouse\">psaux_mouse</a> = {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#PSMOUSE_MINOR\">PSMOUSE_MINOR</a>, \"psaux\", &amp;<a class=\"id\" href=\"#mousedev_fops\">mousedev_fops</a>", 
"};", 
"static int <a class=\"id\" href=\"#psaux_registered\">psaux_registered</a>;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#mousedev_init\">mousedev_init</a>(void)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev_mix\">mousedev_mix</a> = <a class=\"id\" href=\"#mousedev_create\">mousedev_create</a>(<a class=\"id\" href=\"#NULL\">NULL</a>, &amp;<a class=\"id\" href=\"#mousedev_handler\">mousedev_handler</a>, <a class=\"id\" href=\"#MOUSEDEV_MIX\">MOUSEDEV_MIX</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#IS_ERR\">IS_ERR</a>(<a class=\"id\" href=\"#mousedev_mix\">mousedev_mix</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#PTR_ERR\">PTR_ERR</a>(<a class=\"id\" href=\"#mousedev_mix\">mousedev_mix</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#input_register_handler\">input_register_handler</a>(&amp;<a class=\"id\" href=\"#mousedev_handler\">mousedev_handler</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mousedev_destroy\">mousedev_destroy</a>(<a class=\"id\" href=\"#mousedev_mix\">mousedev_mix</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"<span class=\"ts\"/>}", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_INPUT_MOUSEDEV_PSAUX\">CONFIG_INPUT_MOUSEDEV_PSAUX</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#misc_register\">misc_register</a>(&amp;<a class=\"id\" href=\"#psaux_mouse\">psaux_mouse</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> \"mice: could not register psaux device, \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"error: %d\\n\", <a class=\"id\" href=\"#error\">error</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#psaux_registered\">psaux_registered</a> = 1;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"mice: PS/2 mouse device common for all mice\\n\");", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#__exit\">__exit</a> <a class=\"id\" href=\"#mousedev_exit\">mousedev_exit</a>(void)", 
"{", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_INPUT_MOUSEDEV_PSAUX\">CONFIG_INPUT_MOUSEDEV_PSAUX</a>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#psaux_registered\">psaux_registered</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#misc_deregister\">misc_deregister</a>(&amp;<a class=\"id\" href=\"#psaux_mouse\">psaux_mouse</a>);", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#input_unregister_handler\">input_unregister_handler</a>(&amp;<a class=\"id\" href=\"#mousedev_handler\">mousedev_handler</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mousedev_destroy\">mousedev_destroy</a>(<a class=\"id\" href=\"#mousedev_mix\">mousedev_mix</a>);", 
"}", 
"", 
"<a class=\"id\" href=\"#module_init\">module_init</a>(<a class=\"id\" href=\"#mousedev_init\">mousedev_init</a>);", 
"<a class=\"id\" href=\"#module_exit\">module_exit</a>(<a class=\"id\" href=\"#mousedev_exit\">mousedev_exit</a>);", 
];
xr_frag_insert('l/32/6f6f4d151980cb84355c7fd53949c056a19744.xr', __xr_tmp);
