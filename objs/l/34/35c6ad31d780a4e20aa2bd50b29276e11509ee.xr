var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * fs/sysfs/group.c - Operations for adding/removing multiple files at once.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Copyright (c) 2003 Patrick Mochel</span>", 
"<span class=\"comment\"> * Copyright (c) 2003 Open Source Development Lab</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This file is released undert the GPL v2. </span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kobject\">kobject</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#dcache\">dcache</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#namei\">namei</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#err\">err</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> \"sysfs.h\"", 
"", 
"", 
"static void <a class=\"id\" href=\"#remove_files\">remove_files</a>(struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#dir_sd\">dir_sd</a>, struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> const struct <a class=\"id\" href=\"#attribute_group\">attribute_group</a> *<a class=\"id\" href=\"#grp\">grp</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#attribute\">attribute</a> *const* <a class=\"id\" href=\"#attr\">attr</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0, <a class=\"id\" href=\"#attr\">attr</a> = <a class=\"id\" href=\"#grp\">grp</a>-><a class=\"id\" href=\"#attrs\">attrs</a>; *<a class=\"id\" href=\"#attr\">attr</a>; <a class=\"id\" href=\"#i\">i</a>++, <a class=\"id\" href=\"#attr\">attr</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sysfs_hash_and_remove\">sysfs_hash_and_remove</a>(<a class=\"id\" href=\"#dir_sd\">dir_sd</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, (*<a class=\"id\" href=\"#attr\">attr</a>)-><a class=\"id\" href=\"#name\">name</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#create_files\">create_files</a>(struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#dir_sd\">dir_sd</a>, struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>const struct <a class=\"id\" href=\"#attribute_group\">attribute_group</a> *<a class=\"id\" href=\"#grp\">grp</a>, int <a class=\"id\" href=\"#update\">update</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#attribute\">attribute</a> *const* <a class=\"id\" href=\"#attr\">attr</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a> = 0, <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0, <a class=\"id\" href=\"#attr\">attr</a> = <a class=\"id\" href=\"#grp\">grp</a>-><a class=\"id\" href=\"#attrs\">attrs</a>; *<a class=\"id\" href=\"#attr\">attr</a> && !<a class=\"id\" href=\"#error\">error</a>; <a class=\"id\" href=\"#i\">i</a>++, <a class=\"id\" href=\"#attr\">attr</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mode_t\">mode_t</a> <a class=\"id\" href=\"#mode\">mode</a> = 0;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* in update mode, we're changing the permissions or</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * visibility.  Do this by first removing then</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * re-adding (if required) the file */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#update\">update</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sysfs_hash_and_remove\">sysfs_hash_and_remove</a>(<a class=\"id\" href=\"#dir_sd\">dir_sd</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, (*<a class=\"id\" href=\"#attr\">attr</a>)-><a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#grp\">grp</a>-><a class=\"id\" href=\"#is_visible\">is_visible</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mode\">mode</a> = <a class=\"id\" href=\"#grp\">grp</a>-><a class=\"id\" href=\"#is_visible\">is_visible</a>(<a class=\"id\" href=\"#kobj\">kobj</a>, *<a class=\"id\" href=\"#attr\">attr</a>, <a class=\"id\" href=\"#i\">i</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#mode\">mode</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#sysfs_add_file_mode\">sysfs_add_file_mode</a>(<a class=\"id\" href=\"#dir_sd\">dir_sd</a>, *<a class=\"id\" href=\"#attr\">attr</a>, <a class=\"id\" href=\"#SYSFS_KOBJ_ATTR\">SYSFS_KOBJ_ATTR</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    (*<a class=\"id\" href=\"#attr\">attr</a>)-><a class=\"id\" href=\"#mode\">mode</a> | <a class=\"id\" href=\"#mode\">mode</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(<a class=\"id\" href=\"#error\">error</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#remove_files\">remove_files</a>(<a class=\"id\" href=\"#dir_sd\">dir_sd</a>, <a class=\"id\" href=\"#kobj\">kobj</a>, <a class=\"id\" href=\"#grp\">grp</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"}", 
"", 
"", 
"static int <a class=\"id\" href=\"#internal_create_group\">internal_create_group</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>, int <a class=\"id\" href=\"#update\">update</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> const struct <a class=\"id\" href=\"#attribute_group\">attribute_group</a> *<a class=\"id\" href=\"#grp\">grp</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#sd\">sd</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#BUG_ON\">BUG_ON</a>(!<a class=\"id\" href=\"#kobj\">kobj</a> || (!<a class=\"id\" href=\"#update\">update</a> && !<a class=\"id\" href=\"#kobj\">kobj</a>-><a class=\"id\" href=\"#sd\">sd</a>));", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Updates may happen before the object has been instantiated */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(<a class=\"id\" href=\"#update\">update</a> && !<a class=\"id\" href=\"#kobj\">kobj</a>-><a class=\"id\" href=\"#sd\">sd</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#grp\">grp</a>-><a class=\"id\" href=\"#name\">name</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#sysfs_create_subdir\">sysfs_create_subdir</a>(<a class=\"id\" href=\"#kobj\">kobj</a>, <a class=\"id\" href=\"#grp\">grp</a>-><a class=\"id\" href=\"#name\">name</a>, &amp;<a class=\"id\" href=\"#sd\">sd</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"<span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#kobj\">kobj</a>-><a class=\"id\" href=\"#sd\">sd</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_get\">sysfs_get</a>(<a class=\"id\" href=\"#sd\">sd</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#create_files\">create_files</a>(<a class=\"id\" href=\"#sd\">sd</a>, <a class=\"id\" href=\"#kobj\">kobj</a>, <a class=\"id\" href=\"#grp\">grp</a>, <a class=\"id\" href=\"#update\">update</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#grp\">grp</a>-><a class=\"id\" href=\"#name\">name</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sysfs_remove_subdir\">sysfs_remove_subdir</a>(<a class=\"id\" href=\"#sd\">sd</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_put\">sysfs_put</a>(<a class=\"id\" href=\"#sd\">sd</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * sysfs_create_group - given a directory kobject, create an attribute group</span>", 
"<span class=\"comment\"> * @kobj:<span class=\"ts\"/>The kobject to create the group on</span>", 
"<span class=\"comment\"> * @grp:<span class=\"ts\"/>The attribute group to create</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This function creates a group for the first time.  It will explicitly</span>", 
"<span class=\"comment\"> * warn and error if any of the attribute files being created already exist.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Returns 0 on success or error.</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#sysfs_create_group\">sysfs_create_group</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>       const struct <a class=\"id\" href=\"#attribute_group\">attribute_group</a> *<a class=\"id\" href=\"#grp\">grp</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#internal_create_group\">internal_create_group</a>(<a class=\"id\" href=\"#kobj\">kobj</a>, 0, <a class=\"id\" href=\"#grp\">grp</a>);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * sysfs_update_group - given a directory kobject, create an attribute group</span>", 
"<span class=\"comment\"> * @kobj:<span class=\"ts\"/>The kobject to create the group on</span>", 
"<span class=\"comment\"> * @grp:<span class=\"ts\"/>The attribute group to create</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This function updates an attribute group.  Unlike</span>", 
"<span class=\"comment\"> * sysfs_create_group(), it will explicitly not warn or error if any</span>", 
"<span class=\"comment\"> * of the attribute files being created already exist.  Furthermore,</span>", 
"<span class=\"comment\"> * if the visibility of the files has changed through the is_visible()</span>", 
"<span class=\"comment\"> * callback, it will update the permissions and add or remove the</span>", 
"<span class=\"comment\"> * relevant files.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * The primary use for this function is to call it after making a change</span>", 
"<span class=\"comment\"> * that affects group visibility.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Returns 0 on success or error.</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#sysfs_update_group\">sysfs_update_group</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>       const struct <a class=\"id\" href=\"#attribute_group\">attribute_group</a> *<a class=\"id\" href=\"#grp\">grp</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#internal_create_group\">internal_create_group</a>(<a class=\"id\" href=\"#kobj\">kobj</a>, 1, <a class=\"id\" href=\"#grp\">grp</a>);", 
"}", 
"", 
"", 
"", 
"void <a class=\"id\" href=\"#sysfs_remove_group\">sysfs_remove_group</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> * <a class=\"id\" href=\"#kobj\">kobj</a>, ", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>const struct <a class=\"id\" href=\"#attribute_group\">attribute_group</a> * <a class=\"id\" href=\"#grp\">grp</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#dir_sd\">dir_sd</a> = <a class=\"id\" href=\"#kobj\">kobj</a>-><a class=\"id\" href=\"#sd\">sd</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#sd\">sd</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#grp\">grp</a>-><a class=\"id\" href=\"#name\">name</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#sysfs_get_dirent\">sysfs_get_dirent</a>(<a class=\"id\" href=\"#dir_sd\">dir_sd</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#grp\">grp</a>-><a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#sd\">sd</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#WARN\">WARN</a>(!<a class=\"id\" href=\"#sd\">sd</a>, <a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> \"sysfs group %p not found for \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"kobject '%s'\\n\", <a class=\"id\" href=\"#grp\">grp</a>, <a class=\"id\" href=\"#kobject_name\">kobject_name</a>(<a class=\"id\" href=\"#kobj\">kobj</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#sysfs_get\">sysfs_get</a>(<a class=\"id\" href=\"#dir_sd\">dir_sd</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#remove_files\">remove_files</a>(<a class=\"id\" href=\"#sd\">sd</a>, <a class=\"id\" href=\"#kobj\">kobj</a>, <a class=\"id\" href=\"#grp\">grp</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#grp\">grp</a>-><a class=\"id\" href=\"#name\">name</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sysfs_remove_subdir\">sysfs_remove_subdir</a>(<a class=\"id\" href=\"#sd\">sd</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_put\">sysfs_put</a>(<a class=\"id\" href=\"#sd\">sd</a>);", 
"}", 
"", 
"", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#sysfs_create_group\">sysfs_create_group</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#sysfs_update_group\">sysfs_update_group</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#sysfs_remove_group\">sysfs_remove_group</a>);", 
];
xr_frag_insert('l/34/35c6ad31d780a4e20aa2bd50b29276e11509ee.xr', __xr_tmp);
