var __xr_tmp = [
"<span class=\"ts\"/><span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"entering CDROM_SELECT_DISC\\n\");", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#CDROM_CAN\">CDROM_CAN</a>(<a class=\"id\" href=\"#CDC_SELECT_DISC\">CDC_SELECT_DISC</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOSYS\">ENOSYS</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#arg\">arg</a> != <a class=\"id\" href=\"#CDSL_CURRENT\">CDSL_CURRENT</a> && <a class=\"id\" href=\"#arg\">arg</a> != <a class=\"id\" href=\"#CDSL_NONE\">CDSL_NONE</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((int)<a class=\"id\" href=\"#arg\">arg</a> >= <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#capacity\">capacity</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * -&gt;select_disc is a hook to allow a driver-specific way of</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * seleting disc.  However, since there is no equivalent hook for</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * cdrom_slot_status this may not actually be useful...</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#select_disc\">select_disc</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#select_disc\">select_disc</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#arg\">arg</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_CHANGER\">CD_CHANGER</a>, \"Using generic cdrom_select_disc()\\n\");", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_select_disc\">cdrom_select_disc</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#arg\">arg</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#cdrom_ioctl_reset\">cdrom_ioctl_reset</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#block_device\">block_device</a> *<a class=\"id\" href=\"#bdev\">bdev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"entering CDROM_RESET\\n\");", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#capable\">capable</a>(<a class=\"id\" href=\"#CAP_SYS_ADMIN\">CAP_SYS_ADMIN</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EACCES\">EACCES</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#CDROM_CAN\">CDROM_CAN</a>(<a class=\"id\" href=\"#CDC_RESET\">CDC_RESET</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOSYS\">ENOSYS</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#invalidate_bdev\">invalidate_bdev</a>(<a class=\"id\" href=\"#bdev\">bdev</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#reset\">reset</a>(<a class=\"id\" href=\"#cdi\">cdi</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#cdrom_ioctl_lock_door\">cdrom_ioctl_lock_door</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"%socking door.\\n\", <a class=\"id\" href=\"#arg\">arg</a> ? \"L\" : \"Unl\");", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#CDROM_CAN\">CDROM_CAN</a>(<a class=\"id\" href=\"#CDC_LOCK\">CDC_LOCK</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EDRIVE_CANT_DO_THIS\">EDRIVE_CANT_DO_THIS</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#keeplocked\">keeplocked</a> = <a class=\"id\" href=\"#arg\">arg</a> ? 1 : 0;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Don't unlock the door on multiple opens by default, but allow</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * root to do so.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#use_count\">use_count</a> != 1 && !<a class=\"id\" href=\"#arg\">arg</a> && !<a class=\"id\" href=\"#capable\">capable</a>(<a class=\"id\" href=\"#CAP_SYS_ADMIN\">CAP_SYS_ADMIN</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EBUSY\">EBUSY</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#lock_door\">lock_door</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#arg\">arg</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#cdrom_ioctl_debug\">cdrom_ioctl_debug</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"%sabling debug.\\n\", <a class=\"id\" href=\"#arg\">arg</a> ? \"En\" : \"Dis\");", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#capable\">capable</a>(<a class=\"id\" href=\"#CAP_SYS_ADMIN\">CAP_SYS_ADMIN</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EACCES\">EACCES</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#debug\">debug</a> = <a class=\"id\" href=\"#arg\">arg</a> ? 1 : 0;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#debug\">debug</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#cdrom_ioctl_get_capability\">cdrom_ioctl_get_capability</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"entering CDROM_GET_CAPABILITY\\n\");", 
"<span class=\"ts\"/>return (<a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#capability\">capability</a> &amp; ~<a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#mask\">mask</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * The following function is implemented, although very few audio</span>", 
"<span class=\"comment\"> * discs give Universal Product Code information, which should just be</span>", 
"<span class=\"comment\"> * the Medium Catalog Number on the box.  Note, that the way the code</span>", 
"<span class=\"comment\"> * is written on the CD is /not/ uniform across all discs!</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#cdrom_ioctl_get_mcn\">cdrom_ioctl_get_mcn</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#argp\">argp</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_mcn\">cdrom_mcn</a> <a class=\"id\" href=\"#mcn\">mcn</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"entering CDROM_GET_MCN\\n\");", 
"", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#capability\">capability</a> &amp; <a class=\"id\" href=\"#CDC_MCN\">CDC_MCN</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOSYS\">ENOSYS</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#get_mcn\">get_mcn</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, &amp;<a class=\"id\" href=\"#mcn\">mcn</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#argp\">argp</a>, &amp;<a class=\"id\" href=\"#mcn\">mcn</a>, sizeof(<a class=\"id\" href=\"#mcn\">mcn</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"CDROM_GET_MCN successful\\n\");", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#cdrom_ioctl_drive_status\">cdrom_ioctl_drive_status</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"entering CDROM_DRIVE_STATUS\\n\");", 
"", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#capability\">capability</a> &amp; <a class=\"id\" href=\"#CDC_DRIVE_STATUS\">CDC_DRIVE_STATUS</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOSYS\">ENOSYS</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#CDROM_CAN\">CDROM_CAN</a>(<a class=\"id\" href=\"#CDC_SELECT_DISC\">CDC_SELECT_DISC</a>) ||", 
"<span class=\"ts\"/>    (<a class=\"id\" href=\"#arg\">arg</a> == <a class=\"id\" href=\"#CDSL_CURRENT\">CDSL_CURRENT</a> || <a class=\"id\" href=\"#arg\">arg</a> == <a class=\"id\" href=\"#CDSL_NONE\">CDSL_NONE</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#drive_status\">drive_status</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#CDSL_CURRENT\">CDSL_CURRENT</a>);", 
"<span class=\"ts\"/>if (((int)<a class=\"id\" href=\"#arg\">arg</a> >= <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#capacity\">capacity</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_slot_status\">cdrom_slot_status</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#arg\">arg</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Ok, this is where problems start.  The current interface for the</span>", 
"<span class=\"comment\"> * CDROM_DISC_STATUS ioctl is flawed.  It makes the false assumption that</span>", 
"<span class=\"comment\"> * CDs are all CDS_DATA_1 or all CDS_AUDIO, etc.  Unfortunatly, while this</span>", 
"<span class=\"comment\"> * is often the case, it is also very common for CDs to have some tracks</span>", 
"<span class=\"comment\"> * with data, and some tracks with audio.  Just because I feel like it,</span>", 
"<span class=\"comment\"> * I declare the following to be the best way to cope.  If the CD has ANY</span>", 
"<span class=\"comment\"> * data tracks on it, it will be returned as a data CD.  If it has any XA</span>", 
"<span class=\"comment\"> * tracks, I will return it as that.  Now I could simplify this interface</span>", 
"<span class=\"comment\"> * by combining these  returns with the above, but this more clearly</span>", 
"<span class=\"comment\"> * demonstrates the problem with the current interface.  Too bad this</span>", 
"<span class=\"comment\"> * wasn't designed to use bitmasks...         -Erik</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Well, now we have the option CDS_MIXED: a mixed-type CD.</span>", 
"<span class=\"comment\"> * User level programmers might feel the ioctl is not very useful.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>---david</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#cdrom_ioctl_disc_status\">cdrom_ioctl_disc_status</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tracktype\">tracktype</a> <a class=\"id\" href=\"#tracks\">tracks</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"entering CDROM_DISC_STATUS\\n\");", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdrom_count_tracks\">cdrom_count_tracks</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, &amp;<a class=\"id\" href=\"#tracks\">tracks</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tracks\">tracks</a>.<a class=\"id\" href=\"#error\">error</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#tracks\">tracks</a>.<a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Policy mode on */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tracks\">tracks</a>.<a class=\"id\" href=\"#audio\">audio</a> &gt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#tracks\">tracks</a>.<a class=\"id\" href=\"#data\">data</a> && !<a class=\"id\" href=\"#tracks\">tracks</a>.<a class=\"id\" href=\"#cdi\">cdi</a> && !<a class=\"id\" href=\"#tracks\">tracks</a>.<a class=\"id\" href=\"#xa\">xa</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#CDS_AUDIO\">CDS_AUDIO</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#CDS_MIXED\">CDS_MIXED</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tracks\">tracks</a>.<a class=\"id\" href=\"#cdi\">cdi</a> &gt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#CDS_XA_2_2\">CDS_XA_2_2</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tracks\">tracks</a>.<a class=\"id\" href=\"#xa\">xa</a> &gt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#CDS_XA_2_1\">CDS_XA_2_1</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tracks\">tracks</a>.<a class=\"id\" href=\"#data\">data</a> &gt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#CDS_DATA_1\">CDS_DATA_1</a>;", 
"<span class=\"ts\"/><span class=\"comment\">/* Policy mode off */</span>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_WARNING\">CD_WARNING</a>,\"This disc doesn't have any tracks I recognize!\\n\");", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#CDS_NO_INFO\">CDS_NO_INFO</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#cdrom_ioctl_changer_nslots\">cdrom_ioctl_changer_nslots</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"entering CDROM_CHANGER_NSLOTS\\n\");", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#capacity\">capacity</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#cdrom_ioctl_get_subchnl\">cdrom_ioctl_get_subchnl</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#argp\">argp</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_subchnl\">cdrom_subchnl</a> <a class=\"id\" href=\"#q\">q</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#requested\">requested</a>, <a class=\"id\" href=\"#back\">back</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* cdinfo(CD_DO_IOCTL,\"entering CDROMSUBCHNL\\n\");*/</span>", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(&amp;<a class=\"id\" href=\"#q\">q</a>, <a class=\"id\" href=\"#argp\">argp</a>, sizeof(<a class=\"id\" href=\"#q\">q</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#requested\">requested</a> = <a class=\"id\" href=\"#q\">q</a>.<a class=\"id\" href=\"#cdsc_format\">cdsc_format</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#requested\">requested</a> != <a class=\"id\" href=\"#CDROM_MSF\">CDROM_MSF</a> && <a class=\"id\" href=\"#requested\">requested</a> != <a class=\"id\" href=\"#CDROM_LBA\">CDROM_LBA</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#q\">q</a>.<a class=\"id\" href=\"#cdsc_format\">cdsc_format</a> = <a class=\"id\" href=\"#CDROM_MSF\">CDROM_MSF</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#audio_ioctl\">audio_ioctl</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#CDROMSUBCHNL\">CDROMSUBCHNL</a>, &amp;<a class=\"id\" href=\"#q\">q</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#back\">back</a> = <a class=\"id\" href=\"#q\">q</a>.<a class=\"id\" href=\"#cdsc_format\">cdsc_format</a>; <span class=\"comment\">/* local copy */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sanitize_format\">sanitize_format</a>(&amp;<a class=\"id\" href=\"#q\">q</a>.<a class=\"id\" href=\"#cdsc_absaddr\">cdsc_absaddr</a>, &amp;<a class=\"id\" href=\"#back\">back</a>, <a class=\"id\" href=\"#requested\">requested</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sanitize_format\">sanitize_format</a>(&amp;<a class=\"id\" href=\"#q\">q</a>.<a class=\"id\" href=\"#cdsc_reladdr\">cdsc_reladdr</a>, &amp;<a class=\"id\" href=\"#q\">q</a>.<a class=\"id\" href=\"#cdsc_format\">cdsc_format</a>, <a class=\"id\" href=\"#requested\">requested</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#argp\">argp</a>, &amp;<a class=\"id\" href=\"#q\">q</a>, sizeof(<a class=\"id\" href=\"#q\">q</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"comment\">/* cdinfo(CD_DO_IOCTL, \"CDROMSUBCHNL successful\\n\"); */</span>", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#cdrom_ioctl_read_tochdr\">cdrom_ioctl_read_tochdr</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#argp\">argp</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_tochdr\">cdrom_tochdr</a> <a class=\"id\" href=\"#header\">header</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* cdinfo(CD_DO_IOCTL, \"entering CDROMREADTOCHDR\\n\"); */</span>", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(&amp;<a class=\"id\" href=\"#header\">header</a>, <a class=\"id\" href=\"#argp\">argp</a>, sizeof(<a class=\"id\" href=\"#header\">header</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#audio_ioctl\">audio_ioctl</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#CDROMREADTOCHDR\">CDROMREADTOCHDR</a>, &amp;<a class=\"id\" href=\"#header\">header</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#argp\">argp</a>, &amp;<a class=\"id\" href=\"#header\">header</a>, sizeof(<a class=\"id\" href=\"#header\">header</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"comment\">/* cdinfo(CD_DO_IOCTL, \"CDROMREADTOCHDR successful\\n\"); */</span>", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#cdrom_ioctl_read_tocentry\">cdrom_ioctl_read_tocentry</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#argp\">argp</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_tocentry\">cdrom_tocentry</a> <a class=\"id\" href=\"#entry\">entry</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#requested_format\">requested_format</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* cdinfo(CD_DO_IOCTL, \"entering CDROMREADTOCENTRY\\n\"); */</span>", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(&amp;<a class=\"id\" href=\"#entry\">entry</a>, <a class=\"id\" href=\"#argp\">argp</a>, sizeof(<a class=\"id\" href=\"#entry\">entry</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#requested_format\">requested_format</a> = <a class=\"id\" href=\"#entry\">entry</a>.<a class=\"id\" href=\"#cdte_format\">cdte_format</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#requested_format\">requested_format</a> != <a class=\"id\" href=\"#CDROM_MSF\">CDROM_MSF</a> && <a class=\"id\" href=\"#requested_format\">requested_format</a> != <a class=\"id\" href=\"#CDROM_LBA\">CDROM_LBA</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/><span class=\"comment\">/* make interface to low-level uniform */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#entry\">entry</a>.<a class=\"id\" href=\"#cdte_format\">cdte_format</a> = <a class=\"id\" href=\"#CDROM_MSF\">CDROM_MSF</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#audio_ioctl\">audio_ioctl</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#CDROMREADTOCENTRY\">CDROMREADTOCENTRY</a>, &amp;<a class=\"id\" href=\"#entry\">entry</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sanitize_format\">sanitize_format</a>(&amp;<a class=\"id\" href=\"#entry\">entry</a>.<a class=\"id\" href=\"#cdte_addr\">cdte_addr</a>, &amp;<a class=\"id\" href=\"#entry\">entry</a>.<a class=\"id\" href=\"#cdte_format\">cdte_format</a>, <a class=\"id\" href=\"#requested_format\">requested_format</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#argp\">argp</a>, &amp;<a class=\"id\" href=\"#entry\">entry</a>, sizeof(<a class=\"id\" href=\"#entry\">entry</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"comment\">/* cdinfo(CD_DO_IOCTL, \"CDROMREADTOCENTRY successful\\n\"); */</span>", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#cdrom_ioctl_play_msf\">cdrom_ioctl_play_msf</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#argp\">argp</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_msf\">cdrom_msf</a> <a class=\"id\" href=\"#msf\">msf</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"entering CDROMPLAYMSF\\n\");", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#CDROM_CAN\">CDROM_CAN</a>(<a class=\"id\" href=\"#CDC_PLAY_AUDIO\">CDC_PLAY_AUDIO</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOSYS\">ENOSYS</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(&amp;<a class=\"id\" href=\"#msf\">msf</a>, <a class=\"id\" href=\"#argp\">argp</a>, sizeof(<a class=\"id\" href=\"#msf\">msf</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#audio_ioctl\">audio_ioctl</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#CDROMPLAYMSF\">CDROMPLAYMSF</a>, &amp;<a class=\"id\" href=\"#msf\">msf</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#cdrom_ioctl_play_trkind\">cdrom_ioctl_play_trkind</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#argp\">argp</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_ti\">cdrom_ti</a> <a class=\"id\" href=\"#ti\">ti</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"entering CDROMPLAYTRKIND\\n\");", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#CDROM_CAN\">CDROM_CAN</a>(<a class=\"id\" href=\"#CDC_PLAY_AUDIO\">CDC_PLAY_AUDIO</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOSYS\">ENOSYS</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(&amp;<a class=\"id\" href=\"#ti\">ti</a>, <a class=\"id\" href=\"#argp\">argp</a>, sizeof(<a class=\"id\" href=\"#ti\">ti</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#check_for_audio_disc\">check_for_audio_disc</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#audio_ioctl\">audio_ioctl</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#CDROMPLAYTRKIND\">CDROMPLAYTRKIND</a>, &amp;<a class=\"id\" href=\"#ti\">ti</a>);", 
"}", 
"static int <a class=\"id\" href=\"#cdrom_ioctl_volctrl\">cdrom_ioctl_volctrl</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#argp\">argp</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_volctrl\">cdrom_volctrl</a> <a class=\"id\" href=\"#volume\">volume</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"entering CDROMVOLCTRL\\n\");", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#CDROM_CAN\">CDROM_CAN</a>(<a class=\"id\" href=\"#CDC_PLAY_AUDIO\">CDC_PLAY_AUDIO</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOSYS\">ENOSYS</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(&amp;<a class=\"id\" href=\"#volume\">volume</a>, <a class=\"id\" href=\"#argp\">argp</a>, sizeof(<a class=\"id\" href=\"#volume\">volume</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#audio_ioctl\">audio_ioctl</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#CDROMVOLCTRL\">CDROMVOLCTRL</a>, &amp;<a class=\"id\" href=\"#volume\">volume</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#cdrom_ioctl_volread\">cdrom_ioctl_volread</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#argp\">argp</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_volctrl\">cdrom_volctrl</a> <a class=\"id\" href=\"#volume\">volume</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"entering CDROMVOLREAD\\n\");", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#CDROM_CAN\">CDROM_CAN</a>(<a class=\"id\" href=\"#CDC_PLAY_AUDIO\">CDC_PLAY_AUDIO</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOSYS\">ENOSYS</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#audio_ioctl\">audio_ioctl</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#CDROMVOLREAD\">CDROMVOLREAD</a>, &amp;<a class=\"id\" href=\"#volume\">volume</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#argp\">argp</a>, &amp;<a class=\"id\" href=\"#volume\">volume</a>, sizeof(<a class=\"id\" href=\"#volume\">volume</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#cdrom_ioctl_audioctl\">cdrom_ioctl_audioctl</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#cmd\">cmd</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"doing audio ioctl (start/stop/pause/resume)\\n\");", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#CDROM_CAN\">CDROM_CAN</a>(<a class=\"id\" href=\"#CDC_PLAY_AUDIO\">CDC_PLAY_AUDIO</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOSYS\">ENOSYS</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#check_for_audio_disc\">check_for_audio_disc</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#audio_ioctl\">audio_ioctl</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#cmd\">cmd</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Just about every imaginable ioctl is supported in the Uniform layer</span>", 
"<span class=\"comment\"> * these days.</span>", 
"<span class=\"comment\"> * ATAPI / SCSI specific code now mainly resides in mmc_ioctl().</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#cdrom_ioctl\">cdrom_ioctl</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>, struct <a class=\"id\" href=\"#block_device\">block_device</a> *<a class=\"id\" href=\"#bdev\">bdev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#fmode_t\">fmode_t</a> <a class=\"id\" href=\"#mode\">mode</a>, unsigned int <a class=\"id\" href=\"#cmd\">cmd</a>, unsigned long <a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#argp\">argp</a> = (void <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#arg\">arg</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#gendisk\">gendisk</a> *<a class=\"id\" href=\"#disk\">disk</a> = <a class=\"id\" href=\"#bdev\">bdev</a>-><a class=\"id\" href=\"#bd_disk\">bd_disk</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Try the generic SCSI command ioctl's first.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#scsi_cmd_ioctl\">scsi_cmd_ioctl</a>(<a class=\"id\" href=\"#disk\">disk</a>-><a class=\"id\" href=\"#queue\">queue</a>, <a class=\"id\" href=\"#disk\">disk</a>, <a class=\"id\" href=\"#mode\">mode</a>, <a class=\"id\" href=\"#cmd\">cmd</a>, <a class=\"id\" href=\"#argp\">argp</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> != -<a class=\"id\" href=\"#ENOTTY\">ENOTTY</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#cmd\">cmd</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMMULTISESSION\">CDROMMULTISESSION</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_multisession\">cdrom_ioctl_multisession</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#argp\">argp</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMEJECT\">CDROMEJECT</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_eject\">cdrom_ioctl_eject</a>(<a class=\"id\" href=\"#cdi\">cdi</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMCLOSETRAY\">CDROMCLOSETRAY</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_closetray\">cdrom_ioctl_closetray</a>(<a class=\"id\" href=\"#cdi\">cdi</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMEJECT_SW\">CDROMEJECT_SW</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_eject_sw\">cdrom_ioctl_eject_sw</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROM_MEDIA_CHANGED\">CDROM_MEDIA_CHANGED</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_media_changed\">cdrom_ioctl_media_changed</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROM_SET_OPTIONS\">CDROM_SET_OPTIONS</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_set_options\">cdrom_ioctl_set_options</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROM_CLEAR_OPTIONS\">CDROM_CLEAR_OPTIONS</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_clear_options\">cdrom_ioctl_clear_options</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROM_SELECT_SPEED\">CDROM_SELECT_SPEED</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_select_speed\">cdrom_ioctl_select_speed</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROM_SELECT_DISC\">CDROM_SELECT_DISC</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_select_disc\">cdrom_ioctl_select_disc</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMRESET\">CDROMRESET</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_reset\">cdrom_ioctl_reset</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#bdev\">bdev</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROM_LOCKDOOR\">CDROM_LOCKDOOR</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_lock_door\">cdrom_ioctl_lock_door</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROM_DEBUG\">CDROM_DEBUG</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_debug\">cdrom_ioctl_debug</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROM_GET_CAPABILITY\">CDROM_GET_CAPABILITY</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_get_capability\">cdrom_ioctl_get_capability</a>(<a class=\"id\" href=\"#cdi\">cdi</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROM_GET_MCN\">CDROM_GET_MCN</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_get_mcn\">cdrom_ioctl_get_mcn</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#argp\">argp</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROM_DRIVE_STATUS\">CDROM_DRIVE_STATUS</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_drive_status\">cdrom_ioctl_drive_status</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROM_DISC_STATUS\">CDROM_DISC_STATUS</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_disc_status\">cdrom_ioctl_disc_status</a>(<a class=\"id\" href=\"#cdi\">cdi</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROM_CHANGER_NSLOTS\">CDROM_CHANGER_NSLOTS</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_changer_nslots\">cdrom_ioctl_changer_nslots</a>(<a class=\"id\" href=\"#cdi\">cdi</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Use the ioctls that are implemented through the generic_packet()</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * interface. this may look at bit funny, but if -ENOTTY is</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * returned that particular ioctl is not implemented and we</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * let it go through the device specific ones.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#CDROM_CAN\">CDROM_CAN</a>(<a class=\"id\" href=\"#CDC_GENERIC_PACKET\">CDC_GENERIC_PACKET</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#mmc_ioctl\">mmc_ioctl</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#cmd\">cmd</a>, <a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> != -<a class=\"id\" href=\"#ENOTTY\">ENOTTY</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Note: most of the cdinfo() calls are commented out here,</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * because they fill up the sys log when CD players poll</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * the drive.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#cmd\">cmd</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMSUBCHNL\">CDROMSUBCHNL</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_get_subchnl\">cdrom_ioctl_get_subchnl</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#argp\">argp</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMREADTOCHDR\">CDROMREADTOCHDR</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_read_tochdr\">cdrom_ioctl_read_tochdr</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#argp\">argp</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMREADTOCENTRY\">CDROMREADTOCENTRY</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_read_tocentry\">cdrom_ioctl_read_tocentry</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#argp\">argp</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMPLAYMSF\">CDROMPLAYMSF</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_play_msf\">cdrom_ioctl_play_msf</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#argp\">argp</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMPLAYTRKIND\">CDROMPLAYTRKIND</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_play_trkind\">cdrom_ioctl_play_trkind</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#argp\">argp</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMVOLCTRL\">CDROMVOLCTRL</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_volctrl\">cdrom_ioctl_volctrl</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#argp\">argp</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMVOLREAD\">CDROMVOLREAD</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_volread\">cdrom_ioctl_volread</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#argp\">argp</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMSTART\">CDROMSTART</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMSTOP\">CDROMSTOP</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMPAUSE\">CDROMPAUSE</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMRESUME\">CDROMRESUME</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_ioctl_audioctl\">cdrom_ioctl_audioctl</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#cmd\">cmd</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOSYS\">ENOSYS</a>;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Required when we need to use READ_10 to issue other than 2048 block</span>", 
"<span class=\"comment\"> * reads</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#cdrom_switch_blocksize\">cdrom_switch_blocksize</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>, int <a class=\"id\" href=\"#size\">size</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_device_ops\">cdrom_device_ops</a> *<a class=\"id\" href=\"#cdo\">cdo</a> = <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#packet_command\">packet_command</a> <a class=\"id\" href=\"#cgc\">cgc</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#modesel_head\">modesel_head</a> <a class=\"id\" href=\"#mh\">mh</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(&amp;<a class=\"id\" href=\"#mh\">mh</a>, 0, sizeof(<a class=\"id\" href=\"#mh\">mh</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mh\">mh</a>.<a class=\"id\" href=\"#block_desc_length\">block_desc_length</a> = 0x08;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mh\">mh</a>.<a class=\"id\" href=\"#block_length_med\">block_length_med</a> = (<a class=\"id\" href=\"#size\">size</a> >> 8) &amp; 0xff;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mh\">mh</a>.<a class=\"id\" href=\"#block_length_lo\">block_length_lo</a> = <a class=\"id\" href=\"#size\">size</a> &amp; 0xff;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(&amp;<a class=\"id\" href=\"#cgc\">cgc</a>, 0, sizeof(<a class=\"id\" href=\"#cgc\">cgc</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[0] = 0x15;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[1] = 1 << 4;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[4] = 12;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#buflen\">buflen</a> = sizeof(<a class=\"id\" href=\"#mh\">mh</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#buffer\">buffer</a> = (char *) &amp;<a class=\"id\" href=\"#mh\">mh</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#data_direction\">data_direction</a> = <a class=\"id\" href=\"#CGC_DATA_WRITE\">CGC_DATA_WRITE</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mh\">mh</a>.<a class=\"id\" href=\"#block_desc_length\">block_desc_length</a> = 0x08;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mh\">mh</a>.<a class=\"id\" href=\"#block_length_med\">block_length_med</a> = (<a class=\"id\" href=\"#size\">size</a> >> 8) &amp; 0xff;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mh\">mh</a>.<a class=\"id\" href=\"#block_length_lo\">block_length_lo</a> = <a class=\"id\" href=\"#size\">size</a> &amp; 0xff;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#cdo\">cdo</a>-><a class=\"id\" href=\"#generic_packet\">generic_packet</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, &amp;<a class=\"id\" href=\"#cgc\">cgc</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#noinline\">noinline</a> int <a class=\"id\" href=\"#mmc_ioctl_cdrom_read_data\">mmc_ioctl_cdrom_read_data</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#arg\">arg</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#packet_command\">packet_command</a> *<a class=\"id\" href=\"#cgc\">cgc</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#cmd\">cmd</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#request_sense\">request_sense</a> <a class=\"id\" href=\"#sense\">sense</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_msf\">cdrom_msf</a> <a class=\"id\" href=\"#msf\">msf</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#blocksize\">blocksize</a> = 0, <a class=\"id\" href=\"#format\">format</a> = 0, <a class=\"id\" href=\"#lba\">lba</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#cmd\">cmd</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMREADRAW\">CDROMREADRAW</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blocksize\">blocksize</a> = <a class=\"id\" href=\"#CD_FRAMESIZE_RAW\">CD_FRAMESIZE_RAW</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMREADMODE1\">CDROMREADMODE1</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blocksize\">blocksize</a> = <a class=\"id\" href=\"#CD_FRAMESIZE\">CD_FRAMESIZE</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#format\">format</a> = 2;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMREADMODE2\">CDROMREADMODE2</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blocksize\">blocksize</a> = <a class=\"id\" href=\"#CD_FRAMESIZE_RAW0\">CD_FRAMESIZE_RAW0</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#IOCTL_IN\">IOCTL_IN</a>(<a class=\"id\" href=\"#arg\">arg</a>, struct <a class=\"id\" href=\"#cdrom_msf\">cdrom_msf</a>, <a class=\"id\" href=\"#msf\">msf</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#lba\">lba</a> = <a class=\"id\" href=\"#msf_to_lba\">msf_to_lba</a>(<a class=\"id\" href=\"#msf\">msf</a>.<a class=\"id\" href=\"#cdmsf_min0\">cdmsf_min0</a>, <a class=\"id\" href=\"#msf\">msf</a>.<a class=\"id\" href=\"#cdmsf_sec0\">cdmsf_sec0</a>, <a class=\"id\" href=\"#msf\">msf</a>.<a class=\"id\" href=\"#cdmsf_frame0\">cdmsf_frame0</a>);", 
"<span class=\"ts\"/><span class=\"comment\">/* FIXME: we need upper bound checking, too!! */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#lba\">lba</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#buffer\">buffer</a> = <a class=\"id\" href=\"#kmalloc\">kmalloc</a>(<a class=\"id\" href=\"#blocksize\">blocksize</a>, <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#buffer\">buffer</a> == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(&amp;<a class=\"id\" href=\"#sense\">sense</a>, 0, sizeof(<a class=\"id\" href=\"#sense\">sense</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#sense\">sense</a> = &amp;<a class=\"id\" href=\"#sense\">sense</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#data_direction\">data_direction</a> = <a class=\"id\" href=\"#CGC_DATA_READ\">CGC_DATA_READ</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdrom_read_block\">cdrom_read_block</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#cgc\">cgc</a>, <a class=\"id\" href=\"#lba\">lba</a>, 1, <a class=\"id\" href=\"#format\">format</a>, <a class=\"id\" href=\"#blocksize\">blocksize</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> && <a class=\"id\" href=\"#sense\">sense</a>.<a class=\"id\" href=\"#sense_key\">sense_key</a> == 0x05 &&", 
"<span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#sense\">sense</a>.<a class=\"id\" href=\"#asc\">asc</a> == 0x20 &&", 
"<span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#sense\">sense</a>.<a class=\"id\" href=\"#ascq\">ascq</a> == 0x00) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * SCSI-II devices are not required to support</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * READ_CD, so let's try switching block size</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* FIXME: switch back again... */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdrom_switch_blocksize\">cdrom_switch_blocksize</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#blocksize\">blocksize</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#sense\">sense</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdrom_read_cd\">cdrom_read_cd</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#cgc\">cgc</a>, <a class=\"id\" href=\"#lba\">lba</a>, <a class=\"id\" href=\"#blocksize\">blocksize</a>, 1);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> |= <a class=\"id\" href=\"#cdrom_switch_blocksize\">cdrom_switch_blocksize</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#blocksize\">blocksize</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#ret\">ret</a> && <a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#arg\">arg</a>, <a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#buffer\">buffer</a>, <a class=\"id\" href=\"#blocksize\">blocksize</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<a class=\"id\" href=\"#out\">out</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#buffer\">buffer</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#noinline\">noinline</a> int <a class=\"id\" href=\"#mmc_ioctl_cdrom_read_audio\">mmc_ioctl_cdrom_read_audio</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_read_audio\">cdrom_read_audio</a> <a class=\"id\" href=\"#ra\">ra</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#lba\">lba</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#IOCTL_IN\">IOCTL_IN</a>(<a class=\"id\" href=\"#arg\">arg</a>, struct <a class=\"id\" href=\"#cdrom_read_audio\">cdrom_read_audio</a>, <a class=\"id\" href=\"#ra\">ra</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ra\">ra</a>.<a class=\"id\" href=\"#addr_format\">addr_format</a> == <a class=\"id\" href=\"#CDROM_MSF\">CDROM_MSF</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#lba\">lba</a> = <a class=\"id\" href=\"#msf_to_lba\">msf_to_lba</a>(<a class=\"id\" href=\"#ra\">ra</a>.<a class=\"id\" href=\"#addr\">addr</a>.<a class=\"id\" href=\"#msf\">msf</a>.<a class=\"id\" href=\"#minute\">minute</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#ra\">ra</a>.<a class=\"id\" href=\"#addr\">addr</a>.<a class=\"id\" href=\"#msf\">msf</a>.<a class=\"id\" href=\"#second\">second</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#ra\">ra</a>.<a class=\"id\" href=\"#addr\">addr</a>.<a class=\"id\" href=\"#msf\">msf</a>.<a class=\"id\" href=\"#frame\">frame</a>);", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#ra\">ra</a>.<a class=\"id\" href=\"#addr_format\">addr_format</a> == <a class=\"id\" href=\"#CDROM_LBA\">CDROM_LBA</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#lba\">lba</a> = <a class=\"id\" href=\"#ra\">ra</a>.<a class=\"id\" href=\"#addr\">addr</a>.<a class=\"id\" href=\"#lba\">lba</a>;", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* FIXME: we need upper bound checking, too!! */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#lba\">lba</a> &lt; 0 || <a class=\"id\" href=\"#ra\">ra</a>.<a class=\"id\" href=\"#nframes\">nframes</a> <= 0 || <a class=\"id\" href=\"#ra\">ra</a>.<a class=\"id\" href=\"#nframes\">nframes</a> &gt; <a class=\"id\" href=\"#CD_FRAMES\">CD_FRAMES</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_read_cdda\">cdrom_read_cdda</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#ra\">ra</a>.<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#lba\">lba</a>, <a class=\"id\" href=\"#ra\">ra</a>.<a class=\"id\" href=\"#nframes\">nframes</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#noinline\">noinline</a> int <a class=\"id\" href=\"#mmc_ioctl_cdrom_subchannel\">mmc_ioctl_cdrom_subchannel</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_subchnl\">cdrom_subchnl</a> <a class=\"id\" href=\"#q\">q</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u_char\">u_char</a> <a class=\"id\" href=\"#requested\">requested</a>, <a class=\"id\" href=\"#back\">back</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#IOCTL_IN\">IOCTL_IN</a>(<a class=\"id\" href=\"#arg\">arg</a>, struct <a class=\"id\" href=\"#cdrom_subchnl\">cdrom_subchnl</a>, <a class=\"id\" href=\"#q\">q</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#requested\">requested</a> = <a class=\"id\" href=\"#q\">q</a>.<a class=\"id\" href=\"#cdsc_format\">cdsc_format</a>;", 
"<span class=\"ts\"/>if (!((<a class=\"id\" href=\"#requested\">requested</a> == <a class=\"id\" href=\"#CDROM_MSF\">CDROM_MSF</a>) ||", 
"<span class=\"ts\"/>      (<a class=\"id\" href=\"#requested\">requested</a> == <a class=\"id\" href=\"#CDROM_LBA\">CDROM_LBA</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#q\">q</a>.<a class=\"id\" href=\"#cdsc_format\">cdsc_format</a> = <a class=\"id\" href=\"#CDROM_MSF\">CDROM_MSF</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdrom_read_subchannel\">cdrom_read_subchannel</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, &amp;<a class=\"id\" href=\"#q\">q</a>, 0);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#back\">back</a> = <a class=\"id\" href=\"#q\">q</a>.<a class=\"id\" href=\"#cdsc_format\">cdsc_format</a>; <span class=\"comment\">/* local copy */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sanitize_format\">sanitize_format</a>(&amp;<a class=\"id\" href=\"#q\">q</a>.<a class=\"id\" href=\"#cdsc_absaddr\">cdsc_absaddr</a>, &amp;<a class=\"id\" href=\"#back\">back</a>, <a class=\"id\" href=\"#requested\">requested</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sanitize_format\">sanitize_format</a>(&amp;<a class=\"id\" href=\"#q\">q</a>.<a class=\"id\" href=\"#cdsc_reladdr\">cdsc_reladdr</a>, &amp;<a class=\"id\" href=\"#q\">q</a>.<a class=\"id\" href=\"#cdsc_format\">cdsc_format</a>, <a class=\"id\" href=\"#requested\">requested</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#IOCTL_OUT\">IOCTL_OUT</a>(<a class=\"id\" href=\"#arg\">arg</a>, struct <a class=\"id\" href=\"#cdrom_subchnl\">cdrom_subchnl</a>, <a class=\"id\" href=\"#q\">q</a>);", 
"<span class=\"ts\"/><span class=\"comment\">/* cdinfo(CD_DO_IOCTL, \"CDROMSUBCHNL successful\\n\"); */</span>", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#noinline\">noinline</a> int <a class=\"id\" href=\"#mmc_ioctl_cdrom_play_msf\">mmc_ioctl_cdrom_play_msf</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#arg\">arg</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#packet_command\">packet_command</a> *<a class=\"id\" href=\"#cgc\">cgc</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_device_ops\">cdrom_device_ops</a> *<a class=\"id\" href=\"#cdo\">cdo</a> = <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_msf\">cdrom_msf</a> <a class=\"id\" href=\"#msf\">msf</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"entering CDROMPLAYMSF\\n\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#IOCTL_IN\">IOCTL_IN</a>(<a class=\"id\" href=\"#arg\">arg</a>, struct <a class=\"id\" href=\"#cdrom_msf\">cdrom_msf</a>, <a class=\"id\" href=\"#msf\">msf</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#cmd\">cmd</a>[0] = <a class=\"id\" href=\"#GPCMD_PLAY_AUDIO_MSF\">GPCMD_PLAY_AUDIO_MSF</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#cmd\">cmd</a>[3] = <a class=\"id\" href=\"#msf\">msf</a>.<a class=\"id\" href=\"#cdmsf_min0\">cdmsf_min0</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#cmd\">cmd</a>[4] = <a class=\"id\" href=\"#msf\">msf</a>.<a class=\"id\" href=\"#cdmsf_sec0\">cdmsf_sec0</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#cmd\">cmd</a>[5] = <a class=\"id\" href=\"#msf\">msf</a>.<a class=\"id\" href=\"#cdmsf_frame0\">cdmsf_frame0</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#cmd\">cmd</a>[6] = <a class=\"id\" href=\"#msf\">msf</a>.<a class=\"id\" href=\"#cdmsf_min1\">cdmsf_min1</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#cmd\">cmd</a>[7] = <a class=\"id\" href=\"#msf\">msf</a>.<a class=\"id\" href=\"#cdmsf_sec1\">cdmsf_sec1</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#cmd\">cmd</a>[8] = <a class=\"id\" href=\"#msf\">msf</a>.<a class=\"id\" href=\"#cdmsf_frame1\">cdmsf_frame1</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#data_direction\">data_direction</a> = <a class=\"id\" href=\"#CGC_DATA_NONE\">CGC_DATA_NONE</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#cdo\">cdo</a>-><a class=\"id\" href=\"#generic_packet\">generic_packet</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#cgc\">cgc</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#noinline\">noinline</a> int <a class=\"id\" href=\"#mmc_ioctl_cdrom_play_blk\">mmc_ioctl_cdrom_play_blk</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#arg\">arg</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#packet_command\">packet_command</a> *<a class=\"id\" href=\"#cgc\">cgc</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_device_ops\">cdrom_device_ops</a> *<a class=\"id\" href=\"#cdo\">cdo</a> = <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_blk\">cdrom_blk</a> <a class=\"id\" href=\"#blk\">blk</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"entering CDROMPLAYBLK\\n\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#IOCTL_IN\">IOCTL_IN</a>(<a class=\"id\" href=\"#arg\">arg</a>, struct <a class=\"id\" href=\"#cdrom_blk\">cdrom_blk</a>, <a class=\"id\" href=\"#blk\">blk</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#cmd\">cmd</a>[0] = <a class=\"id\" href=\"#GPCMD_PLAY_AUDIO_10\">GPCMD_PLAY_AUDIO_10</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#cmd\">cmd</a>[2] = (<a class=\"id\" href=\"#blk\">blk</a>.<a class=\"id\" href=\"#from\">from</a> >> 24) &amp; 0xff;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#cmd\">cmd</a>[3] = (<a class=\"id\" href=\"#blk\">blk</a>.<a class=\"id\" href=\"#from\">from</a> >> 16) &amp; 0xff;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#cmd\">cmd</a>[4] = (<a class=\"id\" href=\"#blk\">blk</a>.<a class=\"id\" href=\"#from\">from</a> >>  8) &amp; 0xff;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#cmd\">cmd</a>[5] = <a class=\"id\" href=\"#blk\">blk</a>.<a class=\"id\" href=\"#from\">from</a> &amp; 0xff;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#cmd\">cmd</a>[7] = (<a class=\"id\" href=\"#blk\">blk</a>.<a class=\"id\" href=\"#len\">len</a> >> 8) &amp; 0xff;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#cmd\">cmd</a>[8] = <a class=\"id\" href=\"#blk\">blk</a>.<a class=\"id\" href=\"#len\">len</a> &amp; 0xff;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#data_direction\">data_direction</a> = <a class=\"id\" href=\"#CGC_DATA_NONE\">CGC_DATA_NONE</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#cdo\">cdo</a>-><a class=\"id\" href=\"#generic_packet\">generic_packet</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#cgc\">cgc</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#noinline\">noinline</a> int <a class=\"id\" href=\"#mmc_ioctl_cdrom_volume\">mmc_ioctl_cdrom_volume</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#arg\">arg</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#packet_command\">packet_command</a> *<a class=\"id\" href=\"#cgc\">cgc</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#cmd\">cmd</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_volctrl\">cdrom_volctrl</a> <a class=\"id\" href=\"#volctrl\">volctrl</a>;", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#buffer\">buffer</a>[32];", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#mask\">mask</a>[sizeof(<a class=\"id\" href=\"#buffer\">buffer</a>)];", 
"<span class=\"ts\"/>unsigned short <a class=\"id\" href=\"#offset\">offset</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"entering CDROMVOLUME\\n\");", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#IOCTL_IN\">IOCTL_IN</a>(<a class=\"id\" href=\"#arg\">arg</a>, struct <a class=\"id\" href=\"#cdrom_volctrl\">cdrom_volctrl</a>, <a class=\"id\" href=\"#volctrl\">volctrl</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#buffer\">buffer</a> = <a class=\"id\" href=\"#buffer\">buffer</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#buflen\">buflen</a> = 24;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdrom_mode_sense\">cdrom_mode_sense</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#cgc\">cgc</a>, <a class=\"id\" href=\"#GPMODE_AUDIO_CTL_PAGE\">GPMODE_AUDIO_CTL_PAGE</a>, 0);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>", 
"<span class=\"ts\"/><span class=\"comment\">/* originally the code depended on buffer[1] to determine</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   how much data is available for transfer. buffer[1] is</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   unfortunately ambigious and the only reliable way seem</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   to be to simply skip over the block descriptor... */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#offset\">offset</a> = 8 + <a class=\"id\" href=\"#be16_to_cpu\">be16_to_cpu</a>(*(<a class=\"id\" href=\"#__be16\">__be16</a> *)(<a class=\"id\" href=\"#buffer\">buffer</a> + 6));", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#offset\">offset</a> + 16 &gt; sizeof(<a class=\"id\" href=\"#buffer\">buffer</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#E2BIG\">E2BIG</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#offset\">offset</a> + 16 &gt; <a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#buflen\">buflen</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#buflen\">buflen</a> = <a class=\"id\" href=\"#offset\">offset</a> + 16;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdrom_mode_sense\">cdrom_mode_sense</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#cgc\">cgc</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#GPMODE_AUDIO_CTL_PAGE\">GPMODE_AUDIO_CTL_PAGE</a>, 0);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* sanity check */</span>", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#buffer\">buffer</a>[<a class=\"id\" href=\"#offset\">offset</a>] &amp; 0x3f) != <a class=\"id\" href=\"#GPMODE_AUDIO_CTL_PAGE\">GPMODE_AUDIO_CTL_PAGE</a> ||", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#buffer\">buffer</a>[<a class=\"id\" href=\"#offset\">offset</a> + 1] &lt; 14)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* now we have the current volume settings. if it was only</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   a CDROMVOLREAD, return these values */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cmd\">cmd</a> == <a class=\"id\" href=\"#CDROMVOLREAD\">CDROMVOLREAD</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#volctrl\">volctrl</a>.<a class=\"id\" href=\"#channel0\">channel0</a> = <a class=\"id\" href=\"#buffer\">buffer</a>[<a class=\"id\" href=\"#offset\">offset</a>+9];", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#volctrl\">volctrl</a>.<a class=\"id\" href=\"#channel1\">channel1</a> = <a class=\"id\" href=\"#buffer\">buffer</a>[<a class=\"id\" href=\"#offset\">offset</a>+11];", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#volctrl\">volctrl</a>.<a class=\"id\" href=\"#channel2\">channel2</a> = <a class=\"id\" href=\"#buffer\">buffer</a>[<a class=\"id\" href=\"#offset\">offset</a>+13];", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#volctrl\">volctrl</a>.<a class=\"id\" href=\"#channel3\">channel3</a> = <a class=\"id\" href=\"#buffer\">buffer</a>[<a class=\"id\" href=\"#offset\">offset</a>+15];", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#IOCTL_OUT\">IOCTL_OUT</a>(<a class=\"id\" href=\"#arg\">arg</a>, struct <a class=\"id\" href=\"#cdrom_volctrl\">cdrom_volctrl</a>, <a class=\"id\" href=\"#volctrl\">volctrl</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>", 
"<span class=\"ts\"/><span class=\"comment\">/* get the volume mask */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#buffer\">buffer</a> = <a class=\"id\" href=\"#mask\">mask</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdrom_mode_sense\">cdrom_mode_sense</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#cgc\">cgc</a>, <a class=\"id\" href=\"#GPMODE_AUDIO_CTL_PAGE\">GPMODE_AUDIO_CTL_PAGE</a>, 1);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#buffer\">buffer</a>[<a class=\"id\" href=\"#offset\">offset</a> + 9]  = <a class=\"id\" href=\"#volctrl\">volctrl</a>.<a class=\"id\" href=\"#channel0\">channel0</a> &amp; <a class=\"id\" href=\"#mask\">mask</a>[<a class=\"id\" href=\"#offset\">offset</a> + 9];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#buffer\">buffer</a>[<a class=\"id\" href=\"#offset\">offset</a> + 11] = <a class=\"id\" href=\"#volctrl\">volctrl</a>.<a class=\"id\" href=\"#channel1\">channel1</a> &amp; <a class=\"id\" href=\"#mask\">mask</a>[<a class=\"id\" href=\"#offset\">offset</a> + 11];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#buffer\">buffer</a>[<a class=\"id\" href=\"#offset\">offset</a> + 13] = <a class=\"id\" href=\"#volctrl\">volctrl</a>.<a class=\"id\" href=\"#channel2\">channel2</a> &amp; <a class=\"id\" href=\"#mask\">mask</a>[<a class=\"id\" href=\"#offset\">offset</a> + 13];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#buffer\">buffer</a>[<a class=\"id\" href=\"#offset\">offset</a> + 15] = <a class=\"id\" href=\"#volctrl\">volctrl</a>.<a class=\"id\" href=\"#channel3\">channel3</a> &amp; <a class=\"id\" href=\"#mask\">mask</a>[<a class=\"id\" href=\"#offset\">offset</a> + 15];", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* set volume */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#buffer\">buffer</a> = <a class=\"id\" href=\"#buffer\">buffer</a> + <a class=\"id\" href=\"#offset\">offset</a> - 8;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(<a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#buffer\">buffer</a>, 0, 8);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#cdrom_mode_select\">cdrom_mode_select</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#cgc\">cgc</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#noinline\">noinline</a> int <a class=\"id\" href=\"#mmc_ioctl_cdrom_start_stop\">mmc_ioctl_cdrom_start_stop</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#packet_command\">packet_command</a> *<a class=\"id\" href=\"#cgc\">cgc</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#cmd\">cmd</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_device_ops\">cdrom_device_ops</a> *<a class=\"id\" href=\"#cdo\">cdo</a> = <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"entering CDROMSTART/CDROMSTOP\\n\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#cmd\">cmd</a>[0] = <a class=\"id\" href=\"#GPCMD_START_STOP_UNIT\">GPCMD_START_STOP_UNIT</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#cmd\">cmd</a>[1] = 1;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#cmd\">cmd</a>[4] = (<a class=\"id\" href=\"#cmd\">cmd</a> == <a class=\"id\" href=\"#CDROMSTART\">CDROMSTART</a>) ? 1 : 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#data_direction\">data_direction</a> = <a class=\"id\" href=\"#CGC_DATA_NONE\">CGC_DATA_NONE</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#cdo\">cdo</a>-><a class=\"id\" href=\"#generic_packet\">generic_packet</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#cgc\">cgc</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#noinline\">noinline</a> int <a class=\"id\" href=\"#mmc_ioctl_cdrom_pause_resume\">mmc_ioctl_cdrom_pause_resume</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#packet_command\">packet_command</a> *<a class=\"id\" href=\"#cgc\">cgc</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#cmd\">cmd</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_device_ops\">cdrom_device_ops</a> *<a class=\"id\" href=\"#cdo\">cdo</a> = <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"entering CDROMPAUSE/CDROMRESUME\\n\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#cmd\">cmd</a>[0] = <a class=\"id\" href=\"#GPCMD_PAUSE_RESUME\">GPCMD_PAUSE_RESUME</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#cmd\">cmd</a>[8] = (<a class=\"id\" href=\"#cmd\">cmd</a> == <a class=\"id\" href=\"#CDROMRESUME\">CDROMRESUME</a>) ? 1 : 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>-><a class=\"id\" href=\"#data_direction\">data_direction</a> = <a class=\"id\" href=\"#CGC_DATA_NONE\">CGC_DATA_NONE</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#cdo\">cdo</a>-><a class=\"id\" href=\"#generic_packet\">generic_packet</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#cgc\">cgc</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#noinline\">noinline</a> int <a class=\"id\" href=\"#mmc_ioctl_dvd_read_struct\">mmc_ioctl_dvd_read_struct</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#arg\">arg</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#packet_command\">packet_command</a> *<a class=\"id\" href=\"#cgc\">cgc</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dvd_struct\">dvd_struct</a> *<a class=\"id\" href=\"#s\">s</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#size\">size</a> = sizeof(<a class=\"id\" href=\"#dvd_struct\">dvd_struct</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#CDROM_CAN\">CDROM_CAN</a>(<a class=\"id\" href=\"#CDC_DVD\">CDC_DVD</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOSYS\">ENOSYS</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#s\">s</a> = <a class=\"id\" href=\"#kmalloc\">kmalloc</a>(<a class=\"id\" href=\"#size\">size</a>, <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#s\">s</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"entering DVD_READ_STRUCT\\n\");", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(<a class=\"id\" href=\"#s\">s</a>, <a class=\"id\" href=\"#arg\">arg</a>, <a class=\"id\" href=\"#size\">size</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#s\">s</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#dvd_read_struct\">dvd_read_struct</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#s\">s</a>, <a class=\"id\" href=\"#cgc\">cgc</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#arg\">arg</a>, <a class=\"id\" href=\"#s\">s</a>, <a class=\"id\" href=\"#size\">size</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<a class=\"id\" href=\"#out\">out</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#s\">s</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#noinline\">noinline</a> int <a class=\"id\" href=\"#mmc_ioctl_dvd_auth\">mmc_ioctl_dvd_auth</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dvd_authinfo\">dvd_authinfo</a> <a class=\"id\" href=\"#ai\">ai</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#CDROM_CAN\">CDROM_CAN</a>(<a class=\"id\" href=\"#CDC_DVD\">CDC_DVD</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOSYS\">ENOSYS</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"entering DVD_AUTH\\n\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#IOCTL_IN\">IOCTL_IN</a>(<a class=\"id\" href=\"#arg\">arg</a>, <a class=\"id\" href=\"#dvd_authinfo\">dvd_authinfo</a>, <a class=\"id\" href=\"#ai\">ai</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#dvd_do_auth\">dvd_do_auth</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, &amp;<a class=\"id\" href=\"#ai\">ai</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#IOCTL_OUT\">IOCTL_OUT</a>(<a class=\"id\" href=\"#arg\">arg</a>, <a class=\"id\" href=\"#dvd_authinfo\">dvd_authinfo</a>, <a class=\"id\" href=\"#ai\">ai</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#noinline\">noinline</a> int <a class=\"id\" href=\"#mmc_ioctl_cdrom_next_writable\">mmc_ioctl_cdrom_next_writable</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>long <a class=\"id\" href=\"#next\">next</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"entering CDROM_NEXT_WRITABLE\\n\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdrom_get_next_writable\">cdrom_get_next_writable</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, &amp;<a class=\"id\" href=\"#next\">next</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#IOCTL_OUT\">IOCTL_OUT</a>(<a class=\"id\" href=\"#arg\">arg</a>, long, <a class=\"id\" href=\"#next\">next</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#noinline\">noinline</a> int <a class=\"id\" href=\"#mmc_ioctl_cdrom_last_written\">mmc_ioctl_cdrom_last_written</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>long <a class=\"id\" href=\"#last\">last</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdinfo\">cdinfo</a>(<a class=\"id\" href=\"#CD_DO_IOCTL\">CD_DO_IOCTL</a>, \"entering CDROM_LAST_WRITTEN\\n\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdrom_get_last_written\">cdrom_get_last_written</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, &amp;<a class=\"id\" href=\"#last\">last</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#IOCTL_OUT\">IOCTL_OUT</a>(<a class=\"id\" href=\"#arg\">arg</a>, long, <a class=\"id\" href=\"#last\">last</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#mmc_ioctl\">mmc_ioctl</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>, unsigned int <a class=\"id\" href=\"#cmd\">cmd</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>     unsigned long <a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#packet_command\">packet_command</a> <a class=\"id\" href=\"#cgc\">cgc</a>;", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#userptr\">userptr</a> = (void <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#arg\">arg</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(&amp;<a class=\"id\" href=\"#cgc\">cgc</a>, 0, sizeof(<a class=\"id\" href=\"#cgc\">cgc</a>));", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* build a unified command and queue it through</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   cdo-&gt;generic_packet() */</span>", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#cmd\">cmd</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMREADRAW\">CDROMREADRAW</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMREADMODE1\">CDROMREADMODE1</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMREADMODE2\">CDROMREADMODE2</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#mmc_ioctl_cdrom_read_data\">mmc_ioctl_cdrom_read_data</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#userptr\">userptr</a>, &amp;<a class=\"id\" href=\"#cgc\">cgc</a>, <a class=\"id\" href=\"#cmd\">cmd</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMREADAUDIO\">CDROMREADAUDIO</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#mmc_ioctl_cdrom_read_audio\">mmc_ioctl_cdrom_read_audio</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#userptr\">userptr</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMSUBCHNL\">CDROMSUBCHNL</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#mmc_ioctl_cdrom_subchannel\">mmc_ioctl_cdrom_subchannel</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#userptr\">userptr</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMPLAYMSF\">CDROMPLAYMSF</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#mmc_ioctl_cdrom_play_msf\">mmc_ioctl_cdrom_play_msf</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#userptr\">userptr</a>, &amp;<a class=\"id\" href=\"#cgc\">cgc</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMPLAYBLK\">CDROMPLAYBLK</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#mmc_ioctl_cdrom_play_blk\">mmc_ioctl_cdrom_play_blk</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#userptr\">userptr</a>, &amp;<a class=\"id\" href=\"#cgc\">cgc</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMVOLCTRL\">CDROMVOLCTRL</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMVOLREAD\">CDROMVOLREAD</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#mmc_ioctl_cdrom_volume\">mmc_ioctl_cdrom_volume</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#userptr\">userptr</a>, &amp;<a class=\"id\" href=\"#cgc\">cgc</a>, <a class=\"id\" href=\"#cmd\">cmd</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMSTART\">CDROMSTART</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMSTOP\">CDROMSTOP</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#mmc_ioctl_cdrom_start_stop\">mmc_ioctl_cdrom_start_stop</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, &amp;<a class=\"id\" href=\"#cgc\">cgc</a>, <a class=\"id\" href=\"#cmd\">cmd</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMPAUSE\">CDROMPAUSE</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROMRESUME\">CDROMRESUME</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#mmc_ioctl_cdrom_pause_resume\">mmc_ioctl_cdrom_pause_resume</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, &amp;<a class=\"id\" href=\"#cgc\">cgc</a>, <a class=\"id\" href=\"#cmd\">cmd</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#DVD_READ_STRUCT\">DVD_READ_STRUCT</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#mmc_ioctl_dvd_read_struct\">mmc_ioctl_dvd_read_struct</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#userptr\">userptr</a>, &amp;<a class=\"id\" href=\"#cgc\">cgc</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#DVD_AUTH\">DVD_AUTH</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#mmc_ioctl_dvd_auth\">mmc_ioctl_dvd_auth</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#userptr\">userptr</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROM_NEXT_WRITABLE\">CDROM_NEXT_WRITABLE</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#mmc_ioctl_cdrom_next_writable\">mmc_ioctl_cdrom_next_writable</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#userptr\">userptr</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#CDROM_LAST_WRITTEN\">CDROM_LAST_WRITTEN</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#mmc_ioctl_cdrom_last_written\">mmc_ioctl_cdrom_last_written</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#userptr\">userptr</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOTTY\">ENOTTY</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#cdrom_get_track_info\">cdrom_get_track_info</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#__u16\">__u16</a> <a class=\"id\" href=\"#track\">track</a>, <a class=\"id\" href=\"#__u8\">__u8</a> <a class=\"id\" href=\"#type\">type</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#track_information\">track_information</a> *<a class=\"id\" href=\"#ti\">ti</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_device_ops\">cdrom_device_ops</a> *<a class=\"id\" href=\"#cdo\">cdo</a> = <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#packet_command\">packet_command</a> <a class=\"id\" href=\"#cgc\">cgc</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>, <a class=\"id\" href=\"#buflen\">buflen</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#init_cdrom_command\">init_cdrom_command</a>(&amp;<a class=\"id\" href=\"#cgc\">cgc</a>, <a class=\"id\" href=\"#ti\">ti</a>, 8, <a class=\"id\" href=\"#CGC_DATA_READ\">CGC_DATA_READ</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[0] = <a class=\"id\" href=\"#GPCMD_READ_TRACK_RZONE_INFO\">GPCMD_READ_TRACK_RZONE_INFO</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[1] = <a class=\"id\" href=\"#type\">type</a> &amp; 3;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[4] = (<a class=\"id\" href=\"#track\">track</a> &amp; 0xff00) >> 8;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[5] = <a class=\"id\" href=\"#track\">track</a> &amp; 0xff;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[8] = 8;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#quiet\">quiet</a> = 1;", 
"", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdo\">cdo</a>-><a class=\"id\" href=\"#generic_packet\">generic_packet</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, &amp;<a class=\"id\" href=\"#cgc\">cgc</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#buflen\">buflen</a> = <a class=\"id\" href=\"#be16_to_cpu\">be16_to_cpu</a>(<a class=\"id\" href=\"#ti\">ti</a>-><a class=\"id\" href=\"#track_information_length\">track_information_length</a>) +", 
"<span class=\"ts\"/><span class=\"ts\"/>     sizeof(<a class=\"id\" href=\"#ti\">ti</a>-><a class=\"id\" href=\"#track_information_length\">track_information_length</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#buflen\">buflen</a> &gt; sizeof(<a class=\"id\" href=\"#track_information\">track_information</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#buflen\">buflen</a> = sizeof(<a class=\"id\" href=\"#track_information\">track_information</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[8] = <a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#buflen\">buflen</a> = <a class=\"id\" href=\"#buflen\">buflen</a>;", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdo\">cdo</a>-><a class=\"id\" href=\"#generic_packet\">generic_packet</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, &amp;<a class=\"id\" href=\"#cgc\">cgc</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* return actual fill size */</span>", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#buflen\">buflen</a>;", 
"}", 
"", 
"<span class=\"comment\">/* requires CD R/RW */</span>", 
"static int <a class=\"id\" href=\"#cdrom_get_disc_info\">cdrom_get_disc_info</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#disc_information\">disc_information</a> *<a class=\"id\" href=\"#di\">di</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_device_ops\">cdrom_device_ops</a> *<a class=\"id\" href=\"#cdo\">cdo</a> = <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#packet_command\">packet_command</a> <a class=\"id\" href=\"#cgc\">cgc</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>, <a class=\"id\" href=\"#buflen\">buflen</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* set up command and get the disc info */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#init_cdrom_command\">init_cdrom_command</a>(&amp;<a class=\"id\" href=\"#cgc\">cgc</a>, <a class=\"id\" href=\"#di\">di</a>, sizeof(*<a class=\"id\" href=\"#di\">di</a>), <a class=\"id\" href=\"#CGC_DATA_READ\">CGC_DATA_READ</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[0] = <a class=\"id\" href=\"#GPCMD_READ_DISC_INFO\">GPCMD_READ_DISC_INFO</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[8] = <a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#buflen\">buflen</a> = 2;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#quiet\">quiet</a> = 1;", 
"", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdo\">cdo</a>-><a class=\"id\" href=\"#generic_packet\">generic_packet</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, &amp;<a class=\"id\" href=\"#cgc\">cgc</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* not all drives have the same disc_info length, so requeue</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * packet with the length the drive tells us it can supply</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#buflen\">buflen</a> = <a class=\"id\" href=\"#be16_to_cpu\">be16_to_cpu</a>(<a class=\"id\" href=\"#di\">di</a>-><a class=\"id\" href=\"#disc_information_length\">disc_information_length</a>) +", 
"<span class=\"ts\"/><span class=\"ts\"/>     sizeof(<a class=\"id\" href=\"#di\">di</a>-><a class=\"id\" href=\"#disc_information_length\">disc_information_length</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#buflen\">buflen</a> &gt; sizeof(<a class=\"id\" href=\"#disc_information\">disc_information</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#buflen\">buflen</a> = sizeof(<a class=\"id\" href=\"#disc_information\">disc_information</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[8] = <a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#buflen\">buflen</a> = <a class=\"id\" href=\"#buflen\">buflen</a>;", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdo\">cdo</a>-><a class=\"id\" href=\"#generic_packet\">generic_packet</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, &amp;<a class=\"id\" href=\"#cgc\">cgc</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* return actual fill size */</span>", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#buflen\">buflen</a>;", 
"}", 
"", 
"<span class=\"comment\">/* return the last written block on the CD-R media. this is for the udf</span>", 
"<span class=\"comment\">   file system. */</span>", 
"int <a class=\"id\" href=\"#cdrom_get_last_written\">cdrom_get_last_written</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>, long *<a class=\"id\" href=\"#last_written\">last_written</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_tocentry\">cdrom_tocentry</a> <a class=\"id\" href=\"#toc\">toc</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#disc_information\">disc_information</a> <a class=\"id\" href=\"#di\">di</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#track_information\">track_information</a> <a class=\"id\" href=\"#ti\">ti</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__u32\">__u32</a> <a class=\"id\" href=\"#last_track\">last_track</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a> = -1, <a class=\"id\" href=\"#ti_size\">ti_size</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#CDROM_CAN\">CDROM_CAN</a>(<a class=\"id\" href=\"#CDC_GENERIC_PACKET\">CDC_GENERIC_PACKET</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#use_toc\">use_toc</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdrom_get_disc_info\">cdrom_get_disc_info</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, &amp;<a class=\"id\" href=\"#di\">di</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> &lt; (int)(<a class=\"id\" href=\"#offsetof\">offsetof</a>(<a class=\"id\" href=\"#typeof\">typeof</a>(<a class=\"id\" href=\"#di\">di</a>), <a class=\"id\" href=\"#last_track_lsb\">last_track_lsb</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>+ sizeof(<a class=\"id\" href=\"#di\">di</a>.<a class=\"id\" href=\"#last_track_lsb\">last_track_lsb</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#use_toc\">use_toc</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* if unit didn't return msb, it's zeroed by cdrom_get_disc_info */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#last_track\">last_track</a> = (<a class=\"id\" href=\"#di\">di</a>.<a class=\"id\" href=\"#last_track_msb\">last_track_msb</a> << 8) | <a class=\"id\" href=\"#di\">di</a>.<a class=\"id\" href=\"#last_track_lsb\">last_track_lsb</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ti_size\">ti_size</a> = <a class=\"id\" href=\"#cdrom_get_track_info\">cdrom_get_track_info</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#last_track\">last_track</a>, 1, &amp;<a class=\"id\" href=\"#ti\">ti</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ti_size\">ti_size</a> &lt; (int)<a class=\"id\" href=\"#offsetof\">offsetof</a>(<a class=\"id\" href=\"#typeof\">typeof</a>(<a class=\"id\" href=\"#ti\">ti</a>), <a class=\"id\" href=\"#track_start\">track_start</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#use_toc\">use_toc</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* if this track is blank, try the previous. */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ti\">ti</a>.<a class=\"id\" href=\"#blank\">blank</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#last_track\">last_track</a>==1)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#use_toc\">use_toc</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#last_track\">last_track</a>--;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ti_size\">ti_size</a> = <a class=\"id\" href=\"#cdrom_get_track_info\">cdrom_get_track_info</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#last_track\">last_track</a>, 1, &amp;<a class=\"id\" href=\"#ti\">ti</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ti_size\">ti_size</a> &lt; (int)(<a class=\"id\" href=\"#offsetof\">offsetof</a>(<a class=\"id\" href=\"#typeof\">typeof</a>(<a class=\"id\" href=\"#ti\">ti</a>), <a class=\"id\" href=\"#track_size\">track_size</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>+ sizeof(<a class=\"id\" href=\"#ti\">ti</a>.<a class=\"id\" href=\"#track_size\">track_size</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#use_toc\">use_toc</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* if last recorded field is valid, return it. */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ti\">ti</a>.<a class=\"id\" href=\"#lra_v\">lra_v</a> && <a class=\"id\" href=\"#ti_size\">ti_size</a> >= (int)(<a class=\"id\" href=\"#offsetof\">offsetof</a>(<a class=\"id\" href=\"#typeof\">typeof</a>(<a class=\"id\" href=\"#ti\">ti</a>), <a class=\"id\" href=\"#last_rec_address\">last_rec_address</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>+ sizeof(<a class=\"id\" href=\"#ti\">ti</a>.<a class=\"id\" href=\"#last_rec_address\">last_rec_address</a>))) {", 
"<span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#last_written\">last_written</a> = <a class=\"id\" href=\"#be32_to_cpu\">be32_to_cpu</a>(<a class=\"id\" href=\"#ti\">ti</a>.<a class=\"id\" href=\"#last_rec_address\">last_rec_address</a>);", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* make it up instead */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#last_written\">last_written</a> = <a class=\"id\" href=\"#be32_to_cpu\">be32_to_cpu</a>(<a class=\"id\" href=\"#ti\">ti</a>.<a class=\"id\" href=\"#track_start\">track_start</a>) +", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#be32_to_cpu\">be32_to_cpu</a>(<a class=\"id\" href=\"#ti\">ti</a>.<a class=\"id\" href=\"#track_size\">track_size</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ti\">ti</a>.<a class=\"id\" href=\"#free_blocks\">free_blocks</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#last_written\">last_written</a> -= (<a class=\"id\" href=\"#be32_to_cpu\">be32_to_cpu</a>(<a class=\"id\" href=\"#ti\">ti</a>.<a class=\"id\" href=\"#free_blocks\">free_blocks</a>) + 7);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* this is where we end up if the drive either can't do a</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   GPCMD_READ_DISC_INFO or GPCMD_READ_TRACK_RZONE_INFO or if</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   it doesn't give enough information or fails. then we return</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   the toc contents. */</span>", 
"<a class=\"id\" href=\"#use_toc\">use_toc</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#toc\">toc</a>.<a class=\"id\" href=\"#cdte_format\">cdte_format</a> = <a class=\"id\" href=\"#CDROM_MSF\">CDROM_MSF</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#toc\">toc</a>.<a class=\"id\" href=\"#cdte_track\">cdte_track</a> = <a class=\"id\" href=\"#CDROM_LEADOUT\">CDROM_LEADOUT</a>;", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#audio_ioctl\">audio_ioctl</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#CDROMREADTOCENTRY\">CDROMREADTOCENTRY</a>, &amp;<a class=\"id\" href=\"#toc\">toc</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sanitize_format\">sanitize_format</a>(&amp;<a class=\"id\" href=\"#toc\">toc</a>.<a class=\"id\" href=\"#cdte_addr\">cdte_addr</a>, &amp;<a class=\"id\" href=\"#toc\">toc</a>.<a class=\"id\" href=\"#cdte_format\">cdte_format</a>, <a class=\"id\" href=\"#CDROM_LBA\">CDROM_LBA</a>);", 
"<span class=\"ts\"/>*<a class=\"id\" href=\"#last_written\">last_written</a> = <a class=\"id\" href=\"#toc\">toc</a>.<a class=\"id\" href=\"#cdte_addr\">cdte_addr</a>.<a class=\"id\" href=\"#lba\">lba</a>;", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/* return the next writable block. also for udf file system. */</span>", 
"static int <a class=\"id\" href=\"#cdrom_get_next_writable\">cdrom_get_next_writable</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>, long *<a class=\"id\" href=\"#next_writable\">next_writable</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#disc_information\">disc_information</a> <a class=\"id\" href=\"#di\">di</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#track_information\">track_information</a> <a class=\"id\" href=\"#ti\">ti</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__u16\">__u16</a> <a class=\"id\" href=\"#last_track\">last_track</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>, <a class=\"id\" href=\"#ti_size\">ti_size</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#CDROM_CAN\">CDROM_CAN</a>(<a class=\"id\" href=\"#CDC_GENERIC_PACKET\">CDC_GENERIC_PACKET</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#use_last_written\">use_last_written</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdrom_get_disc_info\">cdrom_get_disc_info</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, &amp;<a class=\"id\" href=\"#di\">di</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> &lt; 0 || <a class=\"id\" href=\"#ret\">ret</a> &lt; <a class=\"id\" href=\"#offsetof\">offsetof</a>(<a class=\"id\" href=\"#typeof\">typeof</a>(<a class=\"id\" href=\"#di\">di</a>), <a class=\"id\" href=\"#last_track_lsb\">last_track_lsb</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>+ sizeof(<a class=\"id\" href=\"#di\">di</a>.<a class=\"id\" href=\"#last_track_lsb\">last_track_lsb</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#use_last_written\">use_last_written</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* if unit didn't return msb, it's zeroed by cdrom_get_disc_info */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#last_track\">last_track</a> = (<a class=\"id\" href=\"#di\">di</a>.<a class=\"id\" href=\"#last_track_msb\">last_track_msb</a> << 8) | <a class=\"id\" href=\"#di\">di</a>.<a class=\"id\" href=\"#last_track_lsb\">last_track_lsb</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ti_size\">ti_size</a> = <a class=\"id\" href=\"#cdrom_get_track_info\">cdrom_get_track_info</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#last_track\">last_track</a>, 1, &amp;<a class=\"id\" href=\"#ti\">ti</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ti_size\">ti_size</a> &lt; 0 || <a class=\"id\" href=\"#ti_size\">ti_size</a> &lt; <a class=\"id\" href=\"#offsetof\">offsetof</a>(<a class=\"id\" href=\"#typeof\">typeof</a>(<a class=\"id\" href=\"#ti\">ti</a>), <a class=\"id\" href=\"#track_start\">track_start</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#use_last_written\">use_last_written</a>;", 
"", 
"        <span class=\"comment\">/* if this track is blank, try the previous. */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ti\">ti</a>.<a class=\"id\" href=\"#blank\">blank</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#last_track\">last_track</a> == 1)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#use_last_written\">use_last_written</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#last_track\">last_track</a>--;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ti_size\">ti_size</a> = <a class=\"id\" href=\"#cdrom_get_track_info\">cdrom_get_track_info</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#last_track\">last_track</a>, 1, &amp;<a class=\"id\" href=\"#ti\">ti</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ti_size\">ti_size</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#use_last_written\">use_last_written</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* if next recordable address field is valid, use it. */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ti\">ti</a>.<a class=\"id\" href=\"#nwa_v\">nwa_v</a> && <a class=\"id\" href=\"#ti_size\">ti_size</a> >= <a class=\"id\" href=\"#offsetof\">offsetof</a>(<a class=\"id\" href=\"#typeof\">typeof</a>(<a class=\"id\" href=\"#ti\">ti</a>), <a class=\"id\" href=\"#next_writable\">next_writable</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>+ sizeof(<a class=\"id\" href=\"#ti\">ti</a>.<a class=\"id\" href=\"#next_writable\">next_writable</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#next_writable\">next_writable</a> = <a class=\"id\" href=\"#be32_to_cpu\">be32_to_cpu</a>(<a class=\"id\" href=\"#ti\">ti</a>.<a class=\"id\" href=\"#next_writable\">next_writable</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"", 
"<a class=\"id\" href=\"#use_last_written\">use_last_written</a>:", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#cdrom_get_last_written\">cdrom_get_last_written</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, <a class=\"id\" href=\"#next_writable\">next_writable</a>))) {", 
"<span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#next_writable\">next_writable</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#next_writable\">next_writable</a> += 7;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#cdrom_get_last_written\">cdrom_get_last_written</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#register_cdrom\">register_cdrom</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#unregister_cdrom\">unregister_cdrom</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#cdrom_open\">cdrom_open</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#cdrom_release\">cdrom_release</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#cdrom_ioctl\">cdrom_ioctl</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#cdrom_media_changed\">cdrom_media_changed</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#cdrom_number_of_slots\">cdrom_number_of_slots</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#cdrom_mode_select\">cdrom_mode_select</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#cdrom_mode_sense\">cdrom_mode_sense</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#init_cdrom_command\">init_cdrom_command</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#cdrom_get_media_event\">cdrom_get_media_event</a>);", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_SYSCTL\">CONFIG_SYSCTL</a>", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#CDROM_STR_SIZE\">CDROM_STR_SIZE</a> 1000", 
"", 
"static struct <a class=\"id\" href=\"#cdrom_sysctl_settings\">cdrom_sysctl_settings</a> {", 
"<span class=\"ts\"/>char<span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a>[<a class=\"id\" href=\"#CDROM_STR_SIZE\">CDROM_STR_SIZE</a>];<span class=\"ts\"/><span class=\"comment\">/* general info */</span>", 
"<span class=\"ts\"/>int<span class=\"ts\"/><a class=\"id\" href=\"#autoclose\">autoclose</a>;<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* close tray upon mount, etc */</span>", 
"<span class=\"ts\"/>int<span class=\"ts\"/><a class=\"id\" href=\"#autoeject\">autoeject</a>;<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* eject on umount */</span>", 
"<span class=\"ts\"/>int<span class=\"ts\"/><a class=\"id\" href=\"#debug\">debug</a>;<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* turn on debugging messages */</span>", 
"<span class=\"ts\"/>int<span class=\"ts\"/><a class=\"id\" href=\"#lock\">lock</a>;<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* lock the door on device open */</span>", 
"<span class=\"ts\"/>int<span class=\"ts\"/><a class=\"id\" href=\"#check\">check</a>;<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* check media type */</span>", 
"} <a class=\"id\" href=\"#cdrom_sysctl_settings\">cdrom_sysctl_settings</a>;", 
"", 
"enum <a class=\"id\" href=\"#cdrom_print_option\">cdrom_print_option</a> {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#CTL_NAME\">CTL_NAME</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#CTL_SPEED\">CTL_SPEED</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#CTL_SLOTS\">CTL_SLOTS</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#CTL_CAPABILITY\">CTL_CAPABILITY</a>", 
"};", 
"", 
"static int <a class=\"id\" href=\"#cdrom_print_info\">cdrom_print_info</a>(const char *<a class=\"id\" href=\"#header\">header</a>, int <a class=\"id\" href=\"#val\">val</a>, char *<a class=\"id\" href=\"#info\">info</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>int *<a class=\"id\" href=\"#pos\">pos</a>, enum <a class=\"id\" href=\"#cdrom_print_option\">cdrom_print_option</a> <a class=\"id\" href=\"#option\">option</a>)", 
"{", 
"<span class=\"ts\"/>const int <a class=\"id\" href=\"#max_size\">max_size</a> = sizeof(<a class=\"id\" href=\"#cdrom_sysctl_settings\">cdrom_sysctl_settings</a>.<a class=\"id\" href=\"#info\">info</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#scnprintf\">scnprintf</a>(<a class=\"id\" href=\"#info\">info</a> + *<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#max_size\">max_size</a> - *<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#header\">header</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"", 
"<span class=\"ts\"/>*<a class=\"id\" href=\"#pos\">pos</a> += <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#cdi\">cdi</a>, &amp;<a class=\"id\" href=\"#cdrom_list\">cdrom_list</a>, <a class=\"id\" href=\"#list\">list</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>switch (<a class=\"id\" href=\"#option\">option</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#CTL_NAME\">CTL_NAME</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#scnprintf\">scnprintf</a>(<a class=\"id\" href=\"#info\">info</a> + *<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#max_size\">max_size</a> - *<a class=\"id\" href=\"#pos\">pos</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"\\t%s\", <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#CTL_SPEED\">CTL_SPEED</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#scnprintf\">scnprintf</a>(<a class=\"id\" href=\"#info\">info</a> + *<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#max_size\">max_size</a> - *<a class=\"id\" href=\"#pos\">pos</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"\\t%d\", <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#speed\">speed</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#CTL_SLOTS\">CTL_SLOTS</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#scnprintf\">scnprintf</a>(<a class=\"id\" href=\"#info\">info</a> + *<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#max_size\">max_size</a> - *<a class=\"id\" href=\"#pos\">pos</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"\\t%d\", <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#capacity\">capacity</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#CTL_CAPABILITY\">CTL_CAPABILITY</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#scnprintf\">scnprintf</a>(<a class=\"id\" href=\"#info\">info</a> + *<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#max_size\">max_size</a> - *<a class=\"id\" href=\"#pos\">pos</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"\\t%d\", <a class=\"id\" href=\"#CDROM_CAN\">CDROM_CAN</a>(<a class=\"id\" href=\"#val\">val</a>) != 0);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_info\">pr_info</a>(\"invalid option%d\\n\", <a class=\"id\" href=\"#option\">option</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#pos\">pos</a> += <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#cdrom_sysctl_info\">cdrom_sysctl_info</a>(<a class=\"id\" href=\"#ctl_table\">ctl_table</a> *<a class=\"id\" href=\"#ctl\">ctl</a>, int <a class=\"id\" href=\"#write\">write</a>,", 
"                           void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#buffer\">buffer</a>, <a class=\"id\" href=\"#size_t\">size_t</a> *<a class=\"id\" href=\"#lenp\">lenp</a>, <a class=\"id\" href=\"#loff_t\">loff_t</a> *<a class=\"id\" href=\"#ppos\">ppos</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#pos\">pos</a>;", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#info\">info</a> = <a class=\"id\" href=\"#cdrom_sysctl_settings\">cdrom_sysctl_settings</a>.<a class=\"id\" href=\"#info\">info</a>;", 
"<span class=\"ts\"/>const int <a class=\"id\" href=\"#max_size\">max_size</a> = sizeof(<a class=\"id\" href=\"#cdrom_sysctl_settings\">cdrom_sysctl_settings</a>.<a class=\"id\" href=\"#info\">info</a>);", 
"<span class=\"ts\"/>", 
"<span class=\"ts\"/>if (!*<a class=\"id\" href=\"#lenp\">lenp</a> || (*<a class=\"id\" href=\"#ppos\">ppos</a> && !<a class=\"id\" href=\"#write\">write</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#lenp\">lenp</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#cdrom_mutex\">cdrom_mutex</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pos\">pos</a> = <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#info\">info</a>, \"CD-ROM information, \" <a class=\"id\" href=\"#VERSION\">VERSION</a> \"\\n\");", 
"<span class=\"ts\"/>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdrom_print_info\">cdrom_print_info</a>(\"\\ndrive name:\\t\", 0, <a class=\"id\" href=\"#info\">info</a>, &amp;<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#CTL_NAME\">CTL_NAME</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdrom_print_info\">cdrom_print_info</a>(\"\\ndrive speed:\\t\", 0, <a class=\"id\" href=\"#info\">info</a>, &amp;<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#CTL_SPEED\">CTL_SPEED</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdrom_print_info\">cdrom_print_info</a>(\"\\ndrive # of slots:\", 0, <a class=\"id\" href=\"#info\">info</a>, &amp;<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#CTL_SLOTS\">CTL_SLOTS</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdrom_print_info\">cdrom_print_info</a>(\"\\nCan close tray:\\t\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#CDC_CLOSE_TRAY\">CDC_CLOSE_TRAY</a>, <a class=\"id\" href=\"#info\">info</a>, &amp;<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#CTL_CAPABILITY\">CTL_CAPABILITY</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdrom_print_info\">cdrom_print_info</a>(\"\\nCan open tray:\\t\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#CDC_OPEN_TRAY\">CDC_OPEN_TRAY</a>, <a class=\"id\" href=\"#info\">info</a>, &amp;<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#CTL_CAPABILITY\">CTL_CAPABILITY</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdrom_print_info\">cdrom_print_info</a>(\"\\nCan lock tray:\\t\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#CDC_LOCK\">CDC_LOCK</a>, <a class=\"id\" href=\"#info\">info</a>, &amp;<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#CTL_CAPABILITY\">CTL_CAPABILITY</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdrom_print_info\">cdrom_print_info</a>(\"\\nCan change speed:\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#CDC_SELECT_SPEED\">CDC_SELECT_SPEED</a>, <a class=\"id\" href=\"#info\">info</a>, &amp;<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#CTL_CAPABILITY\">CTL_CAPABILITY</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdrom_print_info\">cdrom_print_info</a>(\"\\nCan select disk:\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#CDC_SELECT_DISC\">CDC_SELECT_DISC</a>, <a class=\"id\" href=\"#info\">info</a>, &amp;<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#CTL_CAPABILITY\">CTL_CAPABILITY</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdrom_print_info\">cdrom_print_info</a>(\"\\nCan read multisession:\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#CDC_MULTI_SESSION\">CDC_MULTI_SESSION</a>, <a class=\"id\" href=\"#info\">info</a>, &amp;<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#CTL_CAPABILITY\">CTL_CAPABILITY</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdrom_print_info\">cdrom_print_info</a>(\"\\nCan read MCN:\\t\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#CDC_MCN\">CDC_MCN</a>, <a class=\"id\" href=\"#info\">info</a>, &amp;<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#CTL_CAPABILITY\">CTL_CAPABILITY</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdrom_print_info\">cdrom_print_info</a>(\"\\nReports media changed:\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#CDC_MEDIA_CHANGED\">CDC_MEDIA_CHANGED</a>, <a class=\"id\" href=\"#info\">info</a>, &amp;<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#CTL_CAPABILITY\">CTL_CAPABILITY</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdrom_print_info\">cdrom_print_info</a>(\"\\nCan play audio:\\t\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#CDC_PLAY_AUDIO\">CDC_PLAY_AUDIO</a>, <a class=\"id\" href=\"#info\">info</a>, &amp;<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#CTL_CAPABILITY\">CTL_CAPABILITY</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdrom_print_info\">cdrom_print_info</a>(\"\\nCan write CD-R:\\t\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#CDC_CD_R\">CDC_CD_R</a>, <a class=\"id\" href=\"#info\">info</a>, &amp;<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#CTL_CAPABILITY\">CTL_CAPABILITY</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdrom_print_info\">cdrom_print_info</a>(\"\\nCan write CD-RW:\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#CDC_CD_RW\">CDC_CD_RW</a>, <a class=\"id\" href=\"#info\">info</a>, &amp;<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#CTL_CAPABILITY\">CTL_CAPABILITY</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdrom_print_info\">cdrom_print_info</a>(\"\\nCan read DVD:\\t\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#CDC_DVD\">CDC_DVD</a>, <a class=\"id\" href=\"#info\">info</a>, &amp;<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#CTL_CAPABILITY\">CTL_CAPABILITY</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdrom_print_info\">cdrom_print_info</a>(\"\\nCan write DVD-R:\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#CDC_DVD_R\">CDC_DVD_R</a>, <a class=\"id\" href=\"#info\">info</a>, &amp;<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#CTL_CAPABILITY\">CTL_CAPABILITY</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdrom_print_info\">cdrom_print_info</a>(\"\\nCan write DVD-RAM:\",", 
];
xr_frag_insert('l/34/f93ec5d02735ffba96b64a16a6aba209b920eb.xr', __xr_tmp);
