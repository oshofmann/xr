var __xr_tmp = [
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = -<a class=\"id\" href=\"#EPERM\">EPERM</a>;", 
"<span class=\"ts\"/>else {", 
"<span class=\"ts\"/><span class=\"ts\"/>long<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#value\">value</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#strict_strtol\">strict_strtol</a>(<a class=\"id\" href=\"#buf\">buf</a>, 0, &amp;<a class=\"id\" href=\"#value\">value</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a> == 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#FLAG_ACTIVE_LOW\">FLAG_ACTIVE_LOW</a>, &amp;<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#value\">value</a> = !<a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#gpio_set_value_cansleep\">gpio_set_value_cansleep</a>(<a class=\"id\" href=\"#gpio\">gpio</a>, <a class=\"id\" href=\"#value\">value</a> != 0);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#size\">size</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#sysfs_lock\">sysfs_lock</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"}", 
"", 
"static const <a class=\"id\" href=\"#DEVICE_ATTR\">DEVICE_ATTR</a>(<a class=\"id\" href=\"#value\">value</a>, 0644,", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#gpio_value_show\">gpio_value_show</a>, <a class=\"id\" href=\"#gpio_value_store\">gpio_value_store</a>);", 
"", 
"static <a class=\"id\" href=\"#irqreturn_t\">irqreturn_t</a> <a class=\"id\" href=\"#gpio_sysfs_irq\">gpio_sysfs_irq</a>(int <a class=\"id\" href=\"#irq\">irq</a>, void *<a class=\"id\" href=\"#priv\">priv</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a><span class=\"ts\"/>*<a class=\"id\" href=\"#value_sd\">value_sd</a> = <a class=\"id\" href=\"#priv\">priv</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_notify_dirent\">sysfs_notify_dirent</a>(<a class=\"id\" href=\"#value_sd\">value_sd</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#IRQ_HANDLED\">IRQ_HANDLED</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#gpio_setup_irq\">gpio_setup_irq</a>(struct <a class=\"id\" href=\"#gpio_desc\">gpio_desc</a> *<a class=\"id\" href=\"#desc\">desc</a>, struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#gpio_flags\">gpio_flags</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a><span class=\"ts\"/>*<a class=\"id\" href=\"#value_sd\">value_sd</a>;", 
"<span class=\"ts\"/>unsigned long<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irq_flags\">irq_flags</a>;", 
"<span class=\"ts\"/>int<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a>, <a class=\"id\" href=\"#irq\">irq</a>, <a class=\"id\" href=\"#id\">id</a>;", 
"", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#GPIO_TRIGGER_MASK\">GPIO_TRIGGER_MASK</a>) == <a class=\"id\" href=\"#gpio_flags\">gpio_flags</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#irq\">irq</a> = <a class=\"id\" href=\"#gpio_to_irq\">gpio_to_irq</a>(<a class=\"id\" href=\"#desc\">desc</a> - <a class=\"id\" href=\"#gpio_desc\">gpio_desc</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irq\">irq</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#id\">id</a> = <a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a> >> <a class=\"id\" href=\"#ID_SHIFT\">ID_SHIFT</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#value_sd\">value_sd</a> = <a class=\"id\" href=\"#idr_find\">idr_find</a>(&amp;<a class=\"id\" href=\"#dirent_idr\">dirent_idr</a>, <a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#value_sd\">value_sd</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#free_irq\">free_irq</a>(<a class=\"id\" href=\"#irq\">irq</a>, <a class=\"id\" href=\"#value_sd\">value_sd</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a> &= ~<a class=\"id\" href=\"#GPIO_TRIGGER_MASK\">GPIO_TRIGGER_MASK</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#gpio_flags\">gpio_flags</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#free_id\">free_id</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#irq_flags\">irq_flags</a> = <a class=\"id\" href=\"#IRQF_SHARED\">IRQF_SHARED</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#FLAG_TRIG_FALL\">FLAG_TRIG_FALL</a>, &amp;<a class=\"id\" href=\"#gpio_flags\">gpio_flags</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irq_flags\">irq_flags</a> |= <a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#FLAG_ACTIVE_LOW\">FLAG_ACTIVE_LOW</a>, &amp;<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a>) ?", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#IRQF_TRIGGER_RISING\">IRQF_TRIGGER_RISING</a> : <a class=\"id\" href=\"#IRQF_TRIGGER_FALLING\">IRQF_TRIGGER_FALLING</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#FLAG_TRIG_RISE\">FLAG_TRIG_RISE</a>, &amp;<a class=\"id\" href=\"#gpio_flags\">gpio_flags</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irq_flags\">irq_flags</a> |= <a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#FLAG_ACTIVE_LOW\">FLAG_ACTIVE_LOW</a>, &amp;<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a>) ?", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#IRQF_TRIGGER_FALLING\">IRQF_TRIGGER_FALLING</a> : <a class=\"id\" href=\"#IRQF_TRIGGER_RISING\">IRQF_TRIGGER_RISING</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#value_sd\">value_sd</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#value_sd\">value_sd</a> = <a class=\"id\" href=\"#sysfs_get_dirent\">sysfs_get_dirent</a>(<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#kobj\">kobj</a>.<a class=\"id\" href=\"#sd\">sd</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, \"value\");", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#value_sd\">value_sd</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err_out\">err_out</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>do {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#idr_pre_get\">idr_pre_get</a>(&amp;<a class=\"id\" href=\"#dirent_idr\">dirent_idr</a>, <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#idr_get_new_above\">idr_get_new_above</a>(&amp;<a class=\"id\" href=\"#dirent_idr\">dirent_idr</a>, <a class=\"id\" href=\"#value_sd\">value_sd</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>1, &amp;<a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>} while (<a class=\"id\" href=\"#ret\">ret</a> == -<a class=\"id\" href=\"#EAGAIN\">EAGAIN</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#free_sd\">free_sd</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a> &= <a class=\"id\" href=\"#GPIO_FLAGS_MASK\">GPIO_FLAGS_MASK</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a> |= (unsigned long)<a class=\"id\" href=\"#id\">id</a> << <a class=\"id\" href=\"#ID_SHIFT\">ID_SHIFT</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a> >> <a class=\"id\" href=\"#ID_SHIFT\">ID_SHIFT</a> != <a class=\"id\" href=\"#id\">id</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#ERANGE\">ERANGE</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#free_id\">free_id</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#request_any_context_irq\">request_any_context_irq</a>(<a class=\"id\" href=\"#irq\">irq</a>, <a class=\"id\" href=\"#gpio_sysfs_irq\">gpio_sysfs_irq</a>, <a class=\"id\" href=\"#irq_flags\">irq_flags</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"gpiolib\", <a class=\"id\" href=\"#value_sd\">value_sd</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#free_id\">free_id</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a> |= <a class=\"id\" href=\"#gpio_flags\">gpio_flags</a>;", 
"<span class=\"ts\"/>return 0;", 
"", 
"<a class=\"id\" href=\"#free_id\">free_id</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#idr_remove\">idr_remove</a>(&amp;<a class=\"id\" href=\"#dirent_idr\">dirent_idr</a>, <a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a> &= <a class=\"id\" href=\"#GPIO_FLAGS_MASK\">GPIO_FLAGS_MASK</a>;", 
"<a class=\"id\" href=\"#free_sd\">free_sd</a>:", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#value_sd\">value_sd</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sysfs_put\">sysfs_put</a>(<a class=\"id\" href=\"#value_sd\">value_sd</a>);", 
"<a class=\"id\" href=\"#err_out\">err_out</a>:", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"", 
"static const struct {", 
"<span class=\"ts\"/>const char *<a class=\"id\" href=\"#name\">name</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"} <a class=\"id\" href=\"#trigger_types\">trigger_types</a>[] = {", 
"<span class=\"ts\"/>{ \"none\",    0 },", 
"<span class=\"ts\"/>{ \"falling\", <a class=\"id\" href=\"#BIT\">BIT</a>(<a class=\"id\" href=\"#FLAG_TRIG_FALL\">FLAG_TRIG_FALL</a>) },", 
"<span class=\"ts\"/>{ \"rising\",  <a class=\"id\" href=\"#BIT\">BIT</a>(<a class=\"id\" href=\"#FLAG_TRIG_RISE\">FLAG_TRIG_RISE</a>) },", 
"<span class=\"ts\"/>{ \"both\",    <a class=\"id\" href=\"#BIT\">BIT</a>(<a class=\"id\" href=\"#FLAG_TRIG_FALL\">FLAG_TRIG_FALL</a>) | <a class=\"id\" href=\"#BIT\">BIT</a>(<a class=\"id\" href=\"#FLAG_TRIG_RISE\">FLAG_TRIG_RISE</a>) },", 
"};", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#gpio_edge_show\">gpio_edge_show</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>const struct <a class=\"id\" href=\"#gpio_desc\">gpio_desc</a><span class=\"ts\"/>*<a class=\"id\" href=\"#desc\">desc</a> = <a class=\"id\" href=\"#dev_get_drvdata\">dev_get_drvdata</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ssize_t\">ssize_t</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#sysfs_lock\">sysfs_lock</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#FLAG_EXPORT\">FLAG_EXPORT</a>, &amp;<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"<span class=\"ts\"/>else {", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#trigger_types\">trigger_types</a>); <a class=\"id\" href=\"#i\">i</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if ((<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#GPIO_TRIGGER_MASK\">GPIO_TRIGGER_MASK</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>== <a class=\"id\" href=\"#trigger_types\">trigger_types</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#flags\">flags</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%s\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#trigger_types\">trigger_types</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#sysfs_lock\">sysfs_lock</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#gpio_edge_store\">gpio_edge_store</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, const char *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#size\">size</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#gpio_desc\">gpio_desc</a><span class=\"ts\"/>*<a class=\"id\" href=\"#desc\">desc</a> = <a class=\"id\" href=\"#dev_get_drvdata\">dev_get_drvdata</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ssize_t\">ssize_t</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a>;", 
"<span class=\"ts\"/>int<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#trigger_types\">trigger_types</a>); <a class=\"id\" href=\"#i\">i</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#sysfs_streq\">sysfs_streq</a>(<a class=\"id\" href=\"#trigger_types\">trigger_types</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#buf\">buf</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#found\">found</a>;", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<a class=\"id\" href=\"#found\">found</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#sysfs_lock\">sysfs_lock</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#FLAG_EXPORT\">FLAG_EXPORT</a>, &amp;<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"<span class=\"ts\"/>else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#gpio_setup_irq\">gpio_setup_irq</a>(<a class=\"id\" href=\"#desc\">desc</a>, <a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#trigger_types\">trigger_types</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#status\">status</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#size\">size</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#sysfs_lock\">sysfs_lock</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#DEVICE_ATTR\">DEVICE_ATTR</a>(<a class=\"id\" href=\"#edge\">edge</a>, 0644, <a class=\"id\" href=\"#gpio_edge_show\">gpio_edge_show</a>, <a class=\"id\" href=\"#gpio_edge_store\">gpio_edge_store</a>);", 
"", 
"static int <a class=\"id\" href=\"#sysfs_set_active_low\">sysfs_set_active_low</a>(struct <a class=\"id\" href=\"#gpio_desc\">gpio_desc</a> *<a class=\"id\" href=\"#desc\">desc</a>, struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#value\">value</a>)", 
"{", 
"<span class=\"ts\"/>int<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = 0;", 
"", 
"<span class=\"ts\"/>if (!!<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#FLAG_ACTIVE_LOW\">FLAG_ACTIVE_LOW</a>, &amp;<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a>) == !!<a class=\"id\" href=\"#value\">value</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#value\">value</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_bit\">set_bit</a>(<a class=\"id\" href=\"#FLAG_ACTIVE_LOW\">FLAG_ACTIVE_LOW</a>, &amp;<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#clear_bit\">clear_bit</a>(<a class=\"id\" href=\"#FLAG_ACTIVE_LOW\">FLAG_ACTIVE_LOW</a>, &amp;<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* reconfigure poll(2) support if enabled on one edge only */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#dev\">dev</a> != <a class=\"id\" href=\"#NULL\">NULL</a> && (!!<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#FLAG_TRIG_RISE\">FLAG_TRIG_RISE</a>, &amp;<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a>) ^", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>!!<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#FLAG_TRIG_FALL\">FLAG_TRIG_FALL</a>, &amp;<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a>))) {", 
"<span class=\"ts\"/><span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#trigger_flags\">trigger_flags</a> = <a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#GPIO_TRIGGER_MASK\">GPIO_TRIGGER_MASK</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#gpio_setup_irq\">gpio_setup_irq</a>(<a class=\"id\" href=\"#desc\">desc</a>, <a class=\"id\" href=\"#dev\">dev</a>, 0);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#gpio_setup_irq\">gpio_setup_irq</a>(<a class=\"id\" href=\"#desc\">desc</a>, <a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#trigger_flags\">trigger_flags</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#gpio_active_low_show\">gpio_active_low_show</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>const struct <a class=\"id\" href=\"#gpio_desc\">gpio_desc</a><span class=\"ts\"/>*<a class=\"id\" href=\"#desc\">desc</a> = <a class=\"id\" href=\"#dev_get_drvdata\">dev_get_drvdata</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ssize_t\">ssize_t</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#sysfs_lock\">sysfs_lock</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#FLAG_EXPORT\">FLAG_EXPORT</a>, &amp;<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%d\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>!!<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#FLAG_ACTIVE_LOW\">FLAG_ACTIVE_LOW</a>, &amp;<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a>));", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#sysfs_lock\">sysfs_lock</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#gpio_active_low_store\">gpio_active_low_store</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, const char *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#size\">size</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#gpio_desc\">gpio_desc</a><span class=\"ts\"/>*<a class=\"id\" href=\"#desc\">desc</a> = <a class=\"id\" href=\"#dev_get_drvdata\">dev_get_drvdata</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ssize_t\">ssize_t</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#sysfs_lock\">sysfs_lock</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#FLAG_EXPORT\">FLAG_EXPORT</a>, &amp;<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/>long<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#value\">value</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#strict_strtol\">strict_strtol</a>(<a class=\"id\" href=\"#buf\">buf</a>, 0, &amp;<a class=\"id\" href=\"#value\">value</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#sysfs_set_active_low\">sysfs_set_active_low</a>(<a class=\"id\" href=\"#desc\">desc</a>, <a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#value\">value</a> != 0);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#sysfs_lock\">sysfs_lock</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a> ? : <a class=\"id\" href=\"#size\">size</a>;", 
"}", 
"", 
"static const <a class=\"id\" href=\"#DEVICE_ATTR\">DEVICE_ATTR</a>(<a class=\"id\" href=\"#active_low\">active_low</a>, 0644,", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#gpio_active_low_show\">gpio_active_low_show</a>, <a class=\"id\" href=\"#gpio_active_low_store\">gpio_active_low_store</a>);", 
"", 
"static const struct <a class=\"id\" href=\"#attribute\">attribute</a> *<a class=\"id\" href=\"#gpio_attrs\">gpio_attrs</a>[] = {", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_value\">dev_attr_value</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_active_low\">dev_attr_active_low</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#NULL\">NULL</a>,", 
"};", 
"", 
"static const struct <a class=\"id\" href=\"#attribute_group\">attribute_group</a> <a class=\"id\" href=\"#gpio_attr_group\">gpio_attr_group</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#attrs\">attrs</a> = (struct <a class=\"id\" href=\"#attribute\">attribute</a> **) <a class=\"id\" href=\"#gpio_attrs\">gpio_attrs</a>,", 
"};", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * /sys/class/gpio/gpiochipN/</span>", 
"<span class=\"comment\"> *   /base ... matching gpio_chip.base (N)</span>", 
"<span class=\"comment\"> *   /label ... matching gpio_chip.label</span>", 
"<span class=\"comment\"> *   /ngpio ... matching gpio_chip.ngpio</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#chip_base_show\">chip_base_show</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>const struct <a class=\"id\" href=\"#gpio_chip\">gpio_chip</a><span class=\"ts\"/>*<a class=\"id\" href=\"#chip\">chip</a> = <a class=\"id\" href=\"#dev_get_drvdata\">dev_get_drvdata</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%d\\n\", <a class=\"id\" href=\"#chip\">chip</a>-><a class=\"id\" href=\"#base\">base</a>);", 
"}", 
"static <a class=\"id\" href=\"#DEVICE_ATTR\">DEVICE_ATTR</a>(<a class=\"id\" href=\"#base\">base</a>, 0444, <a class=\"id\" href=\"#chip_base_show\">chip_base_show</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#chip_label_show\">chip_label_show</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>const struct <a class=\"id\" href=\"#gpio_chip\">gpio_chip</a><span class=\"ts\"/>*<a class=\"id\" href=\"#chip\">chip</a> = <a class=\"id\" href=\"#dev_get_drvdata\">dev_get_drvdata</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%s\\n\", <a class=\"id\" href=\"#chip\">chip</a>-><a class=\"id\" href=\"#label\">label</a> ? : \"\");", 
"}", 
"static <a class=\"id\" href=\"#DEVICE_ATTR\">DEVICE_ATTR</a>(<a class=\"id\" href=\"#label\">label</a>, 0444, <a class=\"id\" href=\"#chip_label_show\">chip_label_show</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#chip_ngpio_show\">chip_ngpio_show</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>const struct <a class=\"id\" href=\"#gpio_chip\">gpio_chip</a><span class=\"ts\"/>*<a class=\"id\" href=\"#chip\">chip</a> = <a class=\"id\" href=\"#dev_get_drvdata\">dev_get_drvdata</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%u\\n\", <a class=\"id\" href=\"#chip\">chip</a>-><a class=\"id\" href=\"#ngpio\">ngpio</a>);", 
"}", 
"static <a class=\"id\" href=\"#DEVICE_ATTR\">DEVICE_ATTR</a>(<a class=\"id\" href=\"#ngpio\">ngpio</a>, 0444, <a class=\"id\" href=\"#chip_ngpio_show\">chip_ngpio_show</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"", 
"static const struct <a class=\"id\" href=\"#attribute\">attribute</a> *<a class=\"id\" href=\"#gpiochip_attrs\">gpiochip_attrs</a>[] = {", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_base\">dev_attr_base</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_label\">dev_attr_label</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_ngpio\">dev_attr_ngpio</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#NULL\">NULL</a>,", 
"};", 
"", 
"static const struct <a class=\"id\" href=\"#attribute_group\">attribute_group</a> <a class=\"id\" href=\"#gpiochip_attr_group\">gpiochip_attr_group</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#attrs\">attrs</a> = (struct <a class=\"id\" href=\"#attribute\">attribute</a> **) <a class=\"id\" href=\"#gpiochip_attrs\">gpiochip_attrs</a>,", 
"};", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * /sys/class/gpio/export ... write-only</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>integer N ... number of GPIO to export (full access)</span>", 
"<span class=\"comment\"> * /sys/class/gpio/unexport ... write-only</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>integer N ... number of GPIO to unexport</span>", 
"<span class=\"comment\"> */</span>", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#export_store\">export_store</a>(struct <a class=\"id\" href=\"#class\">class</a> *<a class=\"id\" href=\"#class\">class</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#class_attribute\">class_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>const char *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#len\">len</a>)", 
"{", 
"<span class=\"ts\"/>long<span class=\"ts\"/><a class=\"id\" href=\"#gpio\">gpio</a>;", 
"<span class=\"ts\"/>int<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#strict_strtol\">strict_strtol</a>(<a class=\"id\" href=\"#buf\">buf</a>, 0, &amp;<a class=\"id\" href=\"#gpio\">gpio</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* No extra locking here; FLAG_SYSFS just signifies that the</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * request and export were done by on behalf of userspace, so</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * they may be undone on its behalf too.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#gpio_request\">gpio_request</a>(<a class=\"id\" href=\"#gpio\">gpio</a>, \"sysfs\");", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#gpio_export\">gpio_export</a>(<a class=\"id\" href=\"#gpio\">gpio</a>, <a class=\"id\" href=\"#true\">true</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#gpio_free\">gpio_free</a>(<a class=\"id\" href=\"#gpio\">gpio</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_bit\">set_bit</a>(<a class=\"id\" href=\"#FLAG_SYSFS\">FLAG_SYSFS</a>, &amp;<a class=\"id\" href=\"#gpio_desc\">gpio_desc</a>[<a class=\"id\" href=\"#gpio\">gpio</a>].<a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<a class=\"id\" href=\"#done\">done</a>:", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_debug\">pr_debug</a>(\"%s: status %d\\n\", <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#status\">status</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a> ? : <a class=\"id\" href=\"#len\">len</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#unexport_store\">unexport_store</a>(struct <a class=\"id\" href=\"#class\">class</a> *<a class=\"id\" href=\"#class\">class</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#class_attribute\">class_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>const char *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#len\">len</a>)", 
"{", 
"<span class=\"ts\"/>long<span class=\"ts\"/><a class=\"id\" href=\"#gpio\">gpio</a>;", 
"<span class=\"ts\"/>int<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#strict_strtol\">strict_strtol</a>(<a class=\"id\" href=\"#buf\">buf</a>, 0, &amp;<a class=\"id\" href=\"#gpio\">gpio</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* reject bogus commands (gpio_unexport ignores them) */</span>", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#gpio_is_valid\">gpio_is_valid</a>(<a class=\"id\" href=\"#gpio\">gpio</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* No extra locking here; FLAG_SYSFS just signifies that the</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * request and export were done by on behalf of userspace, so</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * they may be undone on its behalf too.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#test_and_clear_bit\">test_and_clear_bit</a>(<a class=\"id\" href=\"#FLAG_SYSFS\">FLAG_SYSFS</a>, &amp;<a class=\"id\" href=\"#gpio_desc\">gpio_desc</a>[<a class=\"id\" href=\"#gpio\">gpio</a>].<a class=\"id\" href=\"#flags\">flags</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#gpio_free\">gpio_free</a>(<a class=\"id\" href=\"#gpio\">gpio</a>);", 
"<span class=\"ts\"/>}", 
"<a class=\"id\" href=\"#done\">done</a>:", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_debug\">pr_debug</a>(\"%s: status %d\\n\", <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#status\">status</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a> ? : <a class=\"id\" href=\"#len\">len</a>;", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#class_attribute\">class_attribute</a> <a class=\"id\" href=\"#gpio_class_attrs\">gpio_class_attrs</a>[] = {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__ATTR\">__ATTR</a>(<a class=\"id\" href=\"#export\">export</a>, 0200, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#export_store\">export_store</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__ATTR\">__ATTR</a>(<a class=\"id\" href=\"#unexport\">unexport</a>, 0200, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#unexport_store\">unexport_store</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__ATTR_NULL\">__ATTR_NULL</a>,", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#class\">class</a> <a class=\"id\" href=\"#gpio_class\">gpio_class</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a> =<span class=\"ts\"/><span class=\"ts\"/>\"gpio\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#owner\">owner</a> =<span class=\"ts\"/><a class=\"id\" href=\"#THIS_MODULE\">THIS_MODULE</a>,", 
"", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#class_attrs\">class_attrs</a> =<span class=\"ts\"/><a class=\"id\" href=\"#gpio_class_attrs\">gpio_class_attrs</a>,", 
"};", 
"", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * gpio_export - export a GPIO through sysfs</span>", 
"<span class=\"comment\"> * @gpio: gpio to make available, already requested</span>", 
"<span class=\"comment\"> * @direction_may_change: true if userspace may change gpio direction</span>", 
"<span class=\"comment\"> * Context: arch_initcall or later</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * When drivers want to make a GPIO accessible to userspace after they</span>", 
"<span class=\"comment\"> * have requested it -- perhaps while debugging, or as part of their</span>", 
"<span class=\"comment\"> * public interface -- they may use this routine.  If the GPIO can</span>", 
"<span class=\"comment\"> * change direction (some can't) and the caller allows it, userspace</span>", 
"<span class=\"comment\"> * will see \"direction\" sysfs attribute which may be used to change</span>", 
"<span class=\"comment\"> * the gpio's direction.  A \"value\" attribute will always be provided.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Returns zero on success, else an error.</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#gpio_export\">gpio_export</a>(unsigned <a class=\"id\" href=\"#gpio\">gpio</a>, <a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#direction_may_change\">direction_may_change</a>)", 
"{", 
"<span class=\"ts\"/>unsigned long<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#flags\">flags</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#gpio_desc\">gpio_desc</a><span class=\"ts\"/>*<a class=\"id\" href=\"#desc\">desc</a>;", 
"<span class=\"ts\"/>int<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>const char<span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#ioname\">ioname</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* can't export until sysfs is available ... */</span>", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#gpio_class\">gpio_class</a>.<a class=\"id\" href=\"#p\">p</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_debug\">pr_debug</a>(\"%s: called too early!\\n\", <a class=\"id\" href=\"#__func__\">__func__</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOENT\">ENOENT</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#gpio_is_valid\">gpio_is_valid</a>(<a class=\"id\" href=\"#gpio\">gpio</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#sysfs_lock\">sysfs_lock</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irqsave\">spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#gpio_lock\">gpio_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#desc\">desc</a> = &amp;<a class=\"id\" href=\"#gpio_desc\">gpio_desc</a>[<a class=\"id\" href=\"#gpio\">gpio</a>];", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#FLAG_REQUESTED\">FLAG_REQUESTED</a>, &amp;<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>&& !<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#FLAG_EXPORT\">FLAG_EXPORT</a>, &amp;<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#chip\">chip</a>-><a class=\"id\" href=\"#direction_input\">direction_input</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>|| !<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#chip\">chip</a>-><a class=\"id\" href=\"#direction_output\">direction_output</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#direction_may_change\">direction_may_change</a> = <a class=\"id\" href=\"#false\">false</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irqrestore\">spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#gpio_lock\">gpio_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#chip\">chip</a>-><a class=\"id\" href=\"#names\">names</a> && <a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#chip\">chip</a>-><a class=\"id\" href=\"#names\">names</a>[<a class=\"id\" href=\"#gpio\">gpio</a> - <a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#chip\">chip</a>-><a class=\"id\" href=\"#base\">base</a>])", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ioname\">ioname</a> = <a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#chip\">chip</a>-><a class=\"id\" href=\"#names\">names</a>[<a class=\"id\" href=\"#gpio\">gpio</a> - <a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#chip\">chip</a>-><a class=\"id\" href=\"#base\">base</a>];", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a> == 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#device\">device</a><span class=\"ts\"/>*<a class=\"id\" href=\"#dev\">dev</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#device_create\">device_create</a>(&amp;<a class=\"id\" href=\"#gpio_class\">gpio_class</a>, <a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#chip\">chip</a>-><a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#MKDEV\">MKDEV</a>(0, 0),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#desc\">desc</a>, <a class=\"id\" href=\"#ioname\">ioname</a> ? <a class=\"id\" href=\"#ioname\">ioname</a> : \"gpio%u\", <a class=\"id\" href=\"#gpio\">gpio</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#IS_ERR\">IS_ERR</a>(<a class=\"id\" href=\"#dev\">dev</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#sysfs_create_group\">sysfs_create_group</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#kobj\">kobj</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>&amp;<a class=\"id\" href=\"#gpio_attr_group\">gpio_attr_group</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#status\">status</a> && <a class=\"id\" href=\"#direction_may_change\">direction_may_change</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#device_create_file\">device_create_file</a>(<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_direction\">dev_attr_direction</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#status\">status</a> && <a class=\"id\" href=\"#gpio_to_irq\">gpio_to_irq</a>(<a class=\"id\" href=\"#gpio\">gpio</a>) >= 0", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>&& (<a class=\"id\" href=\"#direction_may_change\">direction_may_change</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>|| !<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#FLAG_IS_OUT\">FLAG_IS_OUT</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>&amp;<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#device_create_file\">device_create_file</a>(<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_edge\">dev_attr_edge</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a> != 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#device_unregister\">device_unregister</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#PTR_ERR\">PTR_ERR</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_bit\">set_bit</a>(<a class=\"id\" href=\"#FLAG_EXPORT\">FLAG_EXPORT</a>, &amp;<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#sysfs_lock\">sysfs_lock</a>);", 
"", 
"<a class=\"id\" href=\"#done\">done</a>:", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_debug\">pr_debug</a>(\"%s: gpio%d status %d\\n\", <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#gpio\">gpio</a>, <a class=\"id\" href=\"#status\">status</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#gpio_export\">gpio_export</a>);", 
"", 
"static int <a class=\"id\" href=\"#match_export\">match_export</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, void *<a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#dev_get_drvdata\">dev_get_drvdata</a>(<a class=\"id\" href=\"#dev\">dev</a>) == <a class=\"id\" href=\"#data\">data</a>;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * gpio_export_link - create a sysfs link to an exported GPIO node</span>", 
"<span class=\"comment\"> * @dev: device under which to create symlink</span>", 
"<span class=\"comment\"> * @name: name of the symlink</span>", 
"<span class=\"comment\"> * @gpio: gpio to create symlink to, already exported</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Set up a symlink from /sys/.../dev/name to /sys/class/gpio/gpioN</span>", 
"<span class=\"comment\"> * node. Caller is responsible for unlinking.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Returns zero on success, else an error.</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#gpio_export_link\">gpio_export_link</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, const char *<a class=\"id\" href=\"#name\">name</a>, unsigned <a class=\"id\" href=\"#gpio\">gpio</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#gpio_desc\">gpio_desc</a><span class=\"ts\"/>*<a class=\"id\" href=\"#desc\">desc</a>;", 
"<span class=\"ts\"/>int<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#gpio_is_valid\">gpio_is_valid</a>(<a class=\"id\" href=\"#gpio\">gpio</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#sysfs_lock\">sysfs_lock</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#desc\">desc</a> = &amp;<a class=\"id\" href=\"#gpio_desc\">gpio_desc</a>[<a class=\"id\" href=\"#gpio\">gpio</a>];", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#FLAG_EXPORT\">FLAG_EXPORT</a>, &amp;<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#tdev\">tdev</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tdev\">tdev</a> = <a class=\"id\" href=\"#class_find_device\">class_find_device</a>(&amp;<a class=\"id\" href=\"#gpio_class\">gpio_class</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#desc\">desc</a>, <a class=\"id\" href=\"#match_export\">match_export</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#tdev\">tdev</a> != <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#sysfs_create_link\">sysfs_create_link</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#kobj\">kobj</a>, &amp;<a class=\"id\" href=\"#tdev\">tdev</a>-><a class=\"id\" href=\"#kobj\">kobj</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#sysfs_lock\">sysfs_lock</a>);", 
"", 
"<a class=\"id\" href=\"#done\">done</a>:", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_debug\">pr_debug</a>(\"%s: gpio%d status %d\\n\", <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#gpio\">gpio</a>, <a class=\"id\" href=\"#status\">status</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#gpio_export_link\">gpio_export_link</a>);", 
"", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * gpio_sysfs_set_active_low - set the polarity of gpio sysfs value</span>", 
"<span class=\"comment\"> * @gpio: gpio to change</span>", 
"<span class=\"comment\"> * @value: non-zero to use active low, i.e. inverted values</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Set the polarity of /sys/class/gpio/gpioN/value sysfs attribute.</span>", 
"<span class=\"comment\"> * The GPIO does not have to be exported yet.  If poll(2) support has</span>", 
"<span class=\"comment\"> * been enabled for either rising or falling edge, it will be</span>", 
"<span class=\"comment\"> * reconfigured to follow the new polarity.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Returns zero on success, else an error.</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#gpio_sysfs_set_active_low\">gpio_sysfs_set_active_low</a>(unsigned <a class=\"id\" href=\"#gpio\">gpio</a>, int <a class=\"id\" href=\"#value\">value</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#gpio_desc\">gpio_desc</a><span class=\"ts\"/>*<a class=\"id\" href=\"#desc\">desc</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#device\">device</a><span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>int<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#gpio_is_valid\">gpio_is_valid</a>(<a class=\"id\" href=\"#gpio\">gpio</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#sysfs_lock\">sysfs_lock</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#desc\">desc</a> = &amp;<a class=\"id\" href=\"#gpio_desc\">gpio_desc</a>[<a class=\"id\" href=\"#gpio\">gpio</a>];", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#FLAG_EXPORT\">FLAG_EXPORT</a>, &amp;<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#class_find_device\">class_find_device</a>(&amp;<a class=\"id\" href=\"#gpio_class\">gpio_class</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#desc\">desc</a>, <a class=\"id\" href=\"#match_export\">match_export</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#dev\">dev</a> == <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#unlock\">unlock</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#sysfs_set_active_low\">sysfs_set_active_low</a>(<a class=\"id\" href=\"#desc\">desc</a>, <a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#value\">value</a>);", 
"", 
"<a class=\"id\" href=\"#unlock\">unlock</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#sysfs_lock\">sysfs_lock</a>);", 
"", 
"<a class=\"id\" href=\"#done\">done</a>:", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_debug\">pr_debug</a>(\"%s: gpio%d status %d\\n\", <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#gpio\">gpio</a>, <a class=\"id\" href=\"#status\">status</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#gpio_sysfs_set_active_low\">gpio_sysfs_set_active_low</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * gpio_unexport - reverse effect of gpio_export()</span>", 
"<span class=\"comment\"> * @gpio: gpio to make unavailable</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This is implicit on gpio_free().</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#gpio_unexport\">gpio_unexport</a>(unsigned <a class=\"id\" href=\"#gpio\">gpio</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#gpio_desc\">gpio_desc</a><span class=\"ts\"/>*<a class=\"id\" href=\"#desc\">desc</a>;", 
"<span class=\"ts\"/>int<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = 0;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#gpio_is_valid\">gpio_is_valid</a>(<a class=\"id\" href=\"#gpio\">gpio</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#sysfs_lock\">sysfs_lock</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#desc\">desc</a> = &amp;<a class=\"id\" href=\"#gpio_desc\">gpio_desc</a>[<a class=\"id\" href=\"#gpio\">gpio</a>];", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#FLAG_EXPORT\">FLAG_EXPORT</a>, &amp;<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#device\">device</a><span class=\"ts\"/>*<a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#class_find_device\">class_find_device</a>(&amp;<a class=\"id\" href=\"#gpio_class\">gpio_class</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#desc\">desc</a>, <a class=\"id\" href=\"#match_export\">match_export</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#dev\">dev</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#gpio_setup_irq\">gpio_setup_irq</a>(<a class=\"id\" href=\"#desc\">desc</a>, <a class=\"id\" href=\"#dev\">dev</a>, 0);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#clear_bit\">clear_bit</a>(<a class=\"id\" href=\"#FLAG_EXPORT\">FLAG_EXPORT</a>, &amp;<a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#put_device\">put_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#device_unregister\">device_unregister</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#sysfs_lock\">sysfs_lock</a>);", 
"<a class=\"id\" href=\"#done\">done</a>:", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_debug\">pr_debug</a>(\"%s: gpio%d status %d\\n\", <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#gpio\">gpio</a>, <a class=\"id\" href=\"#status\">status</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#gpio_unexport\">gpio_unexport</a>);", 
"", 
"static int <a class=\"id\" href=\"#gpiochip_export\">gpiochip_export</a>(struct <a class=\"id\" href=\"#gpio_chip\">gpio_chip</a> *<a class=\"id\" href=\"#chip\">chip</a>)", 
"{", 
"<span class=\"ts\"/>int<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#device\">device</a><span class=\"ts\"/>*<a class=\"id\" href=\"#dev\">dev</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Many systems register gpio chips for SOC support very early,</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * before driver model support is available.  In those cases we</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * export this later, in gpiolib_sysfs_init() ... here we just</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * verify that _some_ field of gpio_class got initialized.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#gpio_class\">gpio_class</a>.<a class=\"id\" href=\"#p\">p</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* use chip-&gt;base for the ID; it's already known to be unique */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#sysfs_lock\">sysfs_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#device_create\">device_create</a>(&amp;<a class=\"id\" href=\"#gpio_class\">gpio_class</a>, <a class=\"id\" href=\"#chip\">chip</a>-><a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#MKDEV\">MKDEV</a>(0, 0), <a class=\"id\" href=\"#chip\">chip</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"gpiochip%d\", <a class=\"id\" href=\"#chip\">chip</a>-><a class=\"id\" href=\"#base\">base</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#IS_ERR\">IS_ERR</a>(<a class=\"id\" href=\"#dev\">dev</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#sysfs_create_group\">sysfs_create_group</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#kobj\">kobj</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>&amp;<a class=\"id\" href=\"#gpiochip_attr_group\">gpiochip_attr_group</a>);", 
"<span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#PTR_ERR\">PTR_ERR</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#chip\">chip</a>-><a class=\"id\" href=\"#exported\">exported</a> = (<a class=\"id\" href=\"#status\">status</a> == 0);", 
];
xr_frag_insert('l/35/1f22e3b05b9e215c3caadf6f1bd564cdbbd15c.xr', __xr_tmp);
