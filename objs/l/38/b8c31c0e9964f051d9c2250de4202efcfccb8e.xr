var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * module.c - module sysfs fun for drivers</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This file is released under the GPLv2</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> */</span>", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#device\">device</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#errno\">errno</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#slab\">slab</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#string\">string</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> \"base.h\"", 
"", 
"static char *<a class=\"id\" href=\"#make_driver_name\">make_driver_name</a>(struct <a class=\"id\" href=\"#device_driver\">device_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>)", 
"{", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#driver_name\">driver_name</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#driver_name\">driver_name</a> = <a class=\"id\" href=\"#kasprintf\">kasprintf</a>(<a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>, \"%s:%s\", <a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#bus\">bus</a>-><a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#driver_name\">driver_name</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#driver_name\">driver_name</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#module_create_drivers_dir\">module_create_drivers_dir</a>(struct <a class=\"id\" href=\"#module_kobject\">module_kobject</a> *<a class=\"id\" href=\"#mk\">mk</a>)", 
"{", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#mk\">mk</a> || <a class=\"id\" href=\"#mk\">mk</a>-><a class=\"id\" href=\"#drivers_dir\">drivers_dir</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mk\">mk</a>-><a class=\"id\" href=\"#drivers_dir\">drivers_dir</a> = <a class=\"id\" href=\"#kobject_create_and_add\">kobject_create_and_add</a>(\"drivers\", &amp;<a class=\"id\" href=\"#mk\">mk</a>-><a class=\"id\" href=\"#kobj\">kobj</a>);", 
"}", 
"", 
"void <a class=\"id\" href=\"#module_add_driver\">module_add_driver</a>(struct <a class=\"id\" href=\"#module\">module</a> *<a class=\"id\" href=\"#mod\">mod</a>, struct <a class=\"id\" href=\"#device_driver\">device_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>)", 
"{", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#driver_name\">driver_name</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#no_warn\">no_warn</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#module_kobject\">module_kobject</a> *<a class=\"id\" href=\"#mk\">mk</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#drv\">drv</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#mod\">mod</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mk\">mk</a> = &amp;<a class=\"id\" href=\"#mod\">mod</a>-><a class=\"id\" href=\"#mkobj\">mkobj</a>;", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#mod_name\">mod_name</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#mkobj\">mkobj</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Lookup built-in module entry in /sys/modules */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mkobj\">mkobj</a> = <a class=\"id\" href=\"#kset_find_obj\">kset_find_obj</a>(<a class=\"id\" href=\"#module_kset\">module_kset</a>, <a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#mod_name\">mod_name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#mkobj\">mkobj</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mk\">mk</a> = <a class=\"id\" href=\"#container_of\">container_of</a>(<a class=\"id\" href=\"#mkobj\">mkobj</a>, struct <a class=\"id\" href=\"#module_kobject\">module_kobject</a>, <a class=\"id\" href=\"#kobj\">kobj</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* remember our module structure */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#mkobj\">mkobj</a> = <a class=\"id\" href=\"#mk\">mk</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* kset_find_obj took a reference */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kobject_put\">kobject_put</a>(<a class=\"id\" href=\"#mkobj\">mkobj</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#mk\">mk</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Don't check return codes; these calls are idempotent */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#no_warn\">no_warn</a> = <a class=\"id\" href=\"#sysfs_create_link\">sysfs_create_link</a>(&amp;<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#kobj\">kobj</a>, &amp;<a class=\"id\" href=\"#mk\">mk</a>-><a class=\"id\" href=\"#kobj\">kobj</a>, \"module\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#driver_name\">driver_name</a> = <a class=\"id\" href=\"#make_driver_name\">make_driver_name</a>(<a class=\"id\" href=\"#drv\">drv</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#driver_name\">driver_name</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#module_create_drivers_dir\">module_create_drivers_dir</a>(<a class=\"id\" href=\"#mk\">mk</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#no_warn\">no_warn</a> = <a class=\"id\" href=\"#sysfs_create_link\">sysfs_create_link</a>(<a class=\"id\" href=\"#mk\">mk</a>-><a class=\"id\" href=\"#drivers_dir\">drivers_dir</a>, &amp;<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#kobj\">kobj</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#driver_name\">driver_name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#driver_name\">driver_name</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"void <a class=\"id\" href=\"#module_remove_driver\">module_remove_driver</a>(struct <a class=\"id\" href=\"#device_driver\">device_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#module_kobject\">module_kobject</a> *<a class=\"id\" href=\"#mk\">mk</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#driver_name\">driver_name</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#drv\">drv</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_remove_link\">sysfs_remove_link</a>(&amp;<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#kobj\">kobj</a>, \"module\");", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#owner\">owner</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mk\">mk</a> = &amp;<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#owner\">owner</a>-><a class=\"id\" href=\"#mkobj\">mkobj</a>;", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#mkobj\">mkobj</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mk\">mk</a> = <a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#mkobj\">mkobj</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#mk\">mk</a> && <a class=\"id\" href=\"#mk\">mk</a>-><a class=\"id\" href=\"#drivers_dir\">drivers_dir</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#driver_name\">driver_name</a> = <a class=\"id\" href=\"#make_driver_name\">make_driver_name</a>(<a class=\"id\" href=\"#drv\">drv</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#driver_name\">driver_name</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sysfs_remove_link\">sysfs_remove_link</a>(<a class=\"id\" href=\"#mk\">mk</a>-><a class=\"id\" href=\"#drivers_dir\">drivers_dir</a>, <a class=\"id\" href=\"#driver_name\">driver_name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#driver_name\">driver_name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"}", 
];
xr_frag_insert('l/38/b8c31c0e9964f051d9c2250de4202efcfccb8e.xr', __xr_tmp);
