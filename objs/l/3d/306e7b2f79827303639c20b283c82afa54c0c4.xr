var __xr_tmp = [
"#<a class=\"id\" href=\"#ifndef\">ifndef</a> <a class=\"id\" href=\"#_LINUX_PERCPU_COUNTER_H\">_LINUX_PERCPU_COUNTER_H</a>", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#_LINUX_PERCPU_COUNTER_H\">_LINUX_PERCPU_COUNTER_H</a>", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * A simple \"approximate counter\" for use in ext2 and ext3 superblocks.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * WARNING: these things are HUGE.  4 kbytes per counter on 32-way P4.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#spinlock\">spinlock</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#smp\">smp</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#list\">list</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#threads\">threads</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#percpu\">percpu</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#types\">types</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_SMP\">CONFIG_SMP</a>", 
"", 
"struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spinlock_t\">spinlock_t</a> <a class=\"id\" href=\"#lock\">lock</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#count\">count</a>;", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_HOTPLUG_CPU\">CONFIG_HOTPLUG_CPU</a>", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#list_head\">list_head</a> <a class=\"id\" href=\"#list\">list</a>;<span class=\"ts\"/><span class=\"comment\">/* All percpu_counters are on a list */</span>", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#s32\">s32</a> <a class=\"id\" href=\"#__percpu\">__percpu</a> *<a class=\"id\" href=\"#counters\">counters</a>;", 
"};", 
"", 
"extern int <a class=\"id\" href=\"#percpu_counter_batch\">percpu_counter_batch</a>;", 
"", 
"int <a class=\"id\" href=\"#__percpu_counter_init\">__percpu_counter_init</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>, <a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#amount\">amount</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  struct <a class=\"id\" href=\"#lock_class_key\">lock_class_key</a> *<a class=\"id\" href=\"#key\">key</a>);", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#percpu_counter_init\">percpu_counter_init</a>(<a class=\"id\" href=\"#fbc\">fbc</a>, <a class=\"id\" href=\"#value\">value</a>)<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/>({<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/><span class=\"ts\"/>static struct <a class=\"id\" href=\"#lock_class_key\">lock_class_key</a> <a class=\"id\" href=\"#__key\">__key</a>;<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__percpu_counter_init\">__percpu_counter_init</a>(<a class=\"id\" href=\"#fbc\">fbc</a>, <a class=\"id\" href=\"#value\">value</a>, &amp;<a class=\"id\" href=\"#__key\">__key</a>);<span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/>})", 
"", 
"void <a class=\"id\" href=\"#percpu_counter_destroy\">percpu_counter_destroy</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>);", 
"void <a class=\"id\" href=\"#percpu_counter_set\">percpu_counter_set</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>, <a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#amount\">amount</a>);", 
"void <a class=\"id\" href=\"#__percpu_counter_add\">__percpu_counter_add</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>, <a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#amount\">amount</a>, <a class=\"id\" href=\"#s32\">s32</a> <a class=\"id\" href=\"#batch\">batch</a>);", 
"<a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#__percpu_counter_sum\">__percpu_counter_sum</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>);", 
"int <a class=\"id\" href=\"#percpu_counter_compare\">percpu_counter_compare</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>, <a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#rhs\">rhs</a>);", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> void <a class=\"id\" href=\"#percpu_counter_add\">percpu_counter_add</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>, <a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#amount\">amount</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__percpu_counter_add\">__percpu_counter_add</a>(<a class=\"id\" href=\"#fbc\">fbc</a>, <a class=\"id\" href=\"#amount\">amount</a>, <a class=\"id\" href=\"#percpu_counter_batch\">percpu_counter_batch</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> <a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#percpu_counter_sum_positive\">percpu_counter_sum_positive</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#__percpu_counter_sum\">__percpu_counter_sum</a>(<a class=\"id\" href=\"#fbc\">fbc</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a> &lt; 0 ? 0 : <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> <a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#percpu_counter_sum\">percpu_counter_sum</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#__percpu_counter_sum\">__percpu_counter_sum</a>(<a class=\"id\" href=\"#fbc\">fbc</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> <a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#percpu_counter_read\">percpu_counter_read</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#fbc\">fbc</a>-><a class=\"id\" href=\"#count\">count</a>;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * It is possible for the percpu_counter_read() to return a small negative</span>", 
"<span class=\"comment\"> * number for some counter which should never be negative.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> */</span>", 
"static <a class=\"id\" href=\"#inline\">inline</a> <a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#percpu_counter_read_positive\">percpu_counter_read_positive</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#fbc\">fbc</a>-><a class=\"id\" href=\"#count\">count</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#barrier\">barrier</a>();<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Prevent reloads of fbc-&gt;count */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> >= 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>return 1;", 
"}", 
"", 
"#else", 
"", 
"struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#count\">count</a>;", 
"};", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> int <a class=\"id\" href=\"#percpu_counter_init\">percpu_counter_init</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>, <a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#amount\">amount</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fbc\">fbc</a>-><a class=\"id\" href=\"#count\">count</a> = <a class=\"id\" href=\"#amount\">amount</a>;", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> void <a class=\"id\" href=\"#percpu_counter_destroy\">percpu_counter_destroy</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>)", 
"{", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> void <a class=\"id\" href=\"#percpu_counter_set\">percpu_counter_set</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>, <a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#amount\">amount</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fbc\">fbc</a>-><a class=\"id\" href=\"#count\">count</a> = <a class=\"id\" href=\"#amount\">amount</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> int <a class=\"id\" href=\"#percpu_counter_compare\">percpu_counter_compare</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>, <a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#rhs\">rhs</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#fbc\">fbc</a>-><a class=\"id\" href=\"#count\">count</a> &gt; <a class=\"id\" href=\"#rhs\">rhs</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#fbc\">fbc</a>-><a class=\"id\" href=\"#count\">count</a> &lt; <a class=\"id\" href=\"#rhs\">rhs</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> void", 
"<a class=\"id\" href=\"#percpu_counter_add\">percpu_counter_add</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>, <a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#amount\">amount</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#preempt_disable\">preempt_disable</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fbc\">fbc</a>-><a class=\"id\" href=\"#count\">count</a> += <a class=\"id\" href=\"#amount\">amount</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#preempt_enable\">preempt_enable</a>();", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> void", 
"<a class=\"id\" href=\"#__percpu_counter_add\">__percpu_counter_add</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>, <a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#amount\">amount</a>, <a class=\"id\" href=\"#s32\">s32</a> <a class=\"id\" href=\"#batch\">batch</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#percpu_counter_add\">percpu_counter_add</a>(<a class=\"id\" href=\"#fbc\">fbc</a>, <a class=\"id\" href=\"#amount\">amount</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> <a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#percpu_counter_read\">percpu_counter_read</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#fbc\">fbc</a>-><a class=\"id\" href=\"#count\">count</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> <a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#percpu_counter_read_positive\">percpu_counter_read_positive</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#fbc\">fbc</a>-><a class=\"id\" href=\"#count\">count</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> <a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#percpu_counter_sum_positive\">percpu_counter_sum_positive</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#percpu_counter_read_positive\">percpu_counter_read_positive</a>(<a class=\"id\" href=\"#fbc\">fbc</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> <a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#percpu_counter_sum\">percpu_counter_sum</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#percpu_counter_read\">percpu_counter_read</a>(<a class=\"id\" href=\"#fbc\">fbc</a>);", 
"}", 
"", 
"#<a class=\"id\" href=\"#endif\">endif</a><span class=\"ts\"/><span class=\"comment\">/* CONFIG_SMP */</span>", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> void <a class=\"id\" href=\"#percpu_counter_inc\">percpu_counter_inc</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#percpu_counter_add\">percpu_counter_add</a>(<a class=\"id\" href=\"#fbc\">fbc</a>, 1);", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> void <a class=\"id\" href=\"#percpu_counter_dec\">percpu_counter_dec</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#percpu_counter_add\">percpu_counter_add</a>(<a class=\"id\" href=\"#fbc\">fbc</a>, -1);", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> void <a class=\"id\" href=\"#percpu_counter_sub\">percpu_counter_sub</a>(struct <a class=\"id\" href=\"#percpu_counter\">percpu_counter</a> *<a class=\"id\" href=\"#fbc\">fbc</a>, <a class=\"id\" href=\"#s64\">s64</a> <a class=\"id\" href=\"#amount\">amount</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#percpu_counter_add\">percpu_counter_add</a>(<a class=\"id\" href=\"#fbc\">fbc</a>, -<a class=\"id\" href=\"#amount\">amount</a>);", 
"}", 
"", 
"#<a class=\"id\" href=\"#endif\">endif</a> <span class=\"comment\">/* _LINUX_PERCPU_COUNTER_H */</span>", 
];
xr_frag_insert('l/3d/306e7b2f79827303639c20b283c82afa54c0c4.xr', __xr_tmp);
