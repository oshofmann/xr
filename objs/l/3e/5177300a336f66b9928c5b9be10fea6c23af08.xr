var __xr_tmp = [
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#for_each_sg\">for_each_sg</a>(<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#sg\">sg</a>, <a class=\"id\" href=\"#sg\">sg</a>, <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#n_elem\">n_elem</a>, <a class=\"id\" href=\"#si\">si</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dma_addr_t\">dma_addr_t</a> <a class=\"id\" href=\"#addr\">addr</a> = <a class=\"id\" href=\"#sg_dma_address\">sg_dma_address</a>(<a class=\"id\" href=\"#sg\">sg</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#sg_len\">sg_len</a> = <a class=\"id\" href=\"#sg_dma_len\">sg_dma_len</a>(<a class=\"id\" href=\"#sg\">sg</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ahci_sg\">ahci_sg</a>[<a class=\"id\" href=\"#si\">si</a>].<a class=\"id\" href=\"#addr\">addr</a> = <a class=\"id\" href=\"#cpu_to_le32\">cpu_to_le32</a>(<a class=\"id\" href=\"#addr\">addr</a> &amp; 0xffffffff);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ahci_sg\">ahci_sg</a>[<a class=\"id\" href=\"#si\">si</a>].<a class=\"id\" href=\"#addr_hi\">addr_hi</a> = <a class=\"id\" href=\"#cpu_to_le32\">cpu_to_le32</a>((<a class=\"id\" href=\"#addr\">addr</a> >> 16) >> 16);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ahci_sg\">ahci_sg</a>[<a class=\"id\" href=\"#si\">si</a>].<a class=\"id\" href=\"#flags_size\">flags_size</a> = <a class=\"id\" href=\"#cpu_to_le32\">cpu_to_le32</a>(<a class=\"id\" href=\"#sg_len\">sg_len</a> - 1);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#si\">si</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#ahci_pmp_qc_defer\">ahci_pmp_qc_defer</a>(struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#ap\">ap</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_port_priv\">ahci_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#sata_pmp_attached\">sata_pmp_attached</a>(<a class=\"id\" href=\"#ap\">ap</a>) || <a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#fbs_enabled\">fbs_enabled</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ata_std_qc_defer\">ata_std_qc_defer</a>(<a class=\"id\" href=\"#qc\">qc</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#sata_pmp_qc_defer_cmd_switch\">sata_pmp_qc_defer_cmd_switch</a>(<a class=\"id\" href=\"#qc\">qc</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#ahci_qc_prep\">ahci_qc_prep</a>(struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#ap\">ap</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_port_priv\">ahci_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#is_atapi\">is_atapi</a> = <a class=\"id\" href=\"#ata_is_atapi\">ata_is_atapi</a>(<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#protocol\">protocol</a>);", 
"<span class=\"ts\"/>void *<a class=\"id\" href=\"#cmd_tbl\">cmd_tbl</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#opts\">opts</a>;", 
"<span class=\"ts\"/>const <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#cmd_fis_len\">cmd_fis_len</a> = 5; <span class=\"comment\">/* five dwords */</span>", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#n_elem\">n_elem</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Fill in command table information.  First, the header,</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * a SATA Register - Host to Device command FIS.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmd_tbl\">cmd_tbl</a> = <a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#cmd_tbl\">cmd_tbl</a> + <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#tag\">tag</a> * <a class=\"id\" href=\"#AHCI_CMD_TBL_SZ\">AHCI_CMD_TBL_SZ</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_tf_to_fis\">ata_tf_to_fis</a>(&amp;<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#tf\">tf</a>, <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#pmp\">pmp</a>, 1, <a class=\"id\" href=\"#cmd_tbl\">cmd_tbl</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#is_atapi\">is_atapi</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(<a class=\"id\" href=\"#cmd_tbl\">cmd_tbl</a> + <a class=\"id\" href=\"#AHCI_CMD_TBL_CDB\">AHCI_CMD_TBL_CDB</a>, 0, 32);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>(<a class=\"id\" href=\"#cmd_tbl\">cmd_tbl</a> + <a class=\"id\" href=\"#AHCI_CMD_TBL_CDB\">AHCI_CMD_TBL_CDB</a>, <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#cdb\">cdb</a>, <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#cdb_len\">cdb_len</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#n_elem\">n_elem</a> = 0;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#ATA_QCFLAG_DMAMAP\">ATA_QCFLAG_DMAMAP</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#n_elem\">n_elem</a> = <a class=\"id\" href=\"#ahci_fill_sg\">ahci_fill_sg</a>(<a class=\"id\" href=\"#qc\">qc</a>, <a class=\"id\" href=\"#cmd_tbl\">cmd_tbl</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Fill in command slot information.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#opts\">opts</a> = <a class=\"id\" href=\"#cmd_fis_len\">cmd_fis_len</a> | <a class=\"id\" href=\"#n_elem\">n_elem</a> << 16 | (<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#pmp\">pmp</a> << 12);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#ATA_TFLAG_WRITE\">ATA_TFLAG_WRITE</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#opts\">opts</a> |= <a class=\"id\" href=\"#AHCI_CMD_WRITE\">AHCI_CMD_WRITE</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#is_atapi\">is_atapi</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#opts\">opts</a> |= <a class=\"id\" href=\"#AHCI_CMD_ATAPI\">AHCI_CMD_ATAPI</a> | <a class=\"id\" href=\"#AHCI_CMD_PREFETCH\">AHCI_CMD_PREFETCH</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ahci_fill_cmd_slot\">ahci_fill_cmd_slot</a>(<a class=\"id\" href=\"#pp\">pp</a>, <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#tag\">tag</a>, <a class=\"id\" href=\"#opts\">opts</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#ahci_fbs_dec_intr\">ahci_fbs_dec_intr</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_port_priv\">ahci_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port_mmio\">port_mmio</a> = <a class=\"id\" href=\"#ahci_port_base\">ahci_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#fbs\">fbs</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_FBS\">PORT_FBS</a>);", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retries\">retries</a> = 3;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#DPRINTK\">DPRINTK</a>(\"ENTER\\n\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#BUG_ON\">BUG_ON</a>(!<a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#fbs_enabled\">fbs_enabled</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* time to wait for DEC is not specified by AHCI spec,</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * add a retry loop for safety.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#fbs\">fbs</a> | <a class=\"id\" href=\"#PORT_FBS_DEC\">PORT_FBS_DEC</a>, <a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_FBS\">PORT_FBS</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fbs\">fbs</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_FBS\">PORT_FBS</a>);", 
"<span class=\"ts\"/>while ((<a class=\"id\" href=\"#fbs\">fbs</a> &amp; <a class=\"id\" href=\"#PORT_FBS_DEC\">PORT_FBS_DEC</a>) && <a class=\"id\" href=\"#retries\">retries</a>--) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#udelay\">udelay</a>(1);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#fbs\">fbs</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_FBS\">PORT_FBS</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#fbs\">fbs</a> &amp; <a class=\"id\" href=\"#PORT_FBS_DEC\">PORT_FBS_DEC</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a>, <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   \"failed to clear device error\\n\");", 
"}", 
"", 
"static void <a class=\"id\" href=\"#ahci_error_intr\">ahci_error_intr</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#irq_stat\">irq_stat</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_host_priv\">ahci_host_priv</a> *<a class=\"id\" href=\"#hpriv\">hpriv</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_port_priv\">ahci_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_eh_info\">ata_eh_info</a> *<a class=\"id\" href=\"#host_ehi\">host_ehi</a> = &amp;<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#link\">link</a>.<a class=\"id\" href=\"#eh_info\">eh_info</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#active_qc\">active_qc</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_eh_info\">ata_eh_info</a> *<a class=\"id\" href=\"#active_ehi\">active_ehi</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#fbs_need_dec\">fbs_need_dec</a> = <a class=\"id\" href=\"#false\">false</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#serror\">serror</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* determine active link with error */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#fbs_enabled\">fbs_enabled</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port_mmio\">port_mmio</a> = <a class=\"id\" href=\"#ahci_port_base\">ahci_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#fbs\">fbs</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_FBS\">PORT_FBS</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#pmp\">pmp</a> = <a class=\"id\" href=\"#fbs\">fbs</a> >> <a class=\"id\" href=\"#PORT_FBS_DWE_OFFSET\">PORT_FBS_DWE_OFFSET</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((<a class=\"id\" href=\"#fbs\">fbs</a> &amp; <a class=\"id\" href=\"#PORT_FBS_SDE\">PORT_FBS_SDE</a>) && (<a class=\"id\" href=\"#pmp\">pmp</a> &lt; <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#nr_pmp_links\">nr_pmp_links</a>) &&", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#ata_link_online\">ata_link_online</a>(&amp;<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#pmp_link\">pmp_link</a>[<a class=\"id\" href=\"#pmp\">pmp</a>])) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a> = &amp;<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#pmp_link\">pmp_link</a>[<a class=\"id\" href=\"#pmp\">pmp</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#fbs_need_dec\">fbs_need_dec</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_for_each_link\">ata_for_each_link</a>(<a class=\"id\" href=\"#link\">link</a>, <a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#EDGE\">EDGE</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ata_link_active\">ata_link_active</a>(<a class=\"id\" href=\"#link\">link</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#link\">link</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a> = &amp;<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#link\">link</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#active_qc\">active_qc</a> = <a class=\"id\" href=\"#ata_qc_from_tag\">ata_qc_from_tag</a>(<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#active_tag\">active_tag</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#active_ehi\">active_ehi</a> = &amp;<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#eh_info\">eh_info</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* record irq stat */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_ehi_clear_desc\">ata_ehi_clear_desc</a>(<a class=\"id\" href=\"#host_ehi\">host_ehi</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_ehi_push_desc\">ata_ehi_push_desc</a>(<a class=\"id\" href=\"#host_ehi\">host_ehi</a>, \"irq_stat 0x%08x\", <a class=\"id\" href=\"#irq_stat\">irq_stat</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* AHCI needs SError cleared; otherwise, it might lock up */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ahci_scr_read\">ahci_scr_read</a>(&amp;<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#link\">link</a>, <a class=\"id\" href=\"#SCR_ERROR\">SCR_ERROR</a>, &amp;<a class=\"id\" href=\"#serror\">serror</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ahci_scr_write\">ahci_scr_write</a>(&amp;<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#link\">link</a>, <a class=\"id\" href=\"#SCR_ERROR\">SCR_ERROR</a>, <a class=\"id\" href=\"#serror\">serror</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#host_ehi\">host_ehi</a>-><a class=\"id\" href=\"#serror\">serror</a> |= <a class=\"id\" href=\"#serror\">serror</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* some controllers set IRQ_IF_ERR on device errors, ignore it */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#AHCI_HFLAG_IGN_IRQ_IF_ERR\">AHCI_HFLAG_IGN_IRQ_IF_ERR</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irq_stat\">irq_stat</a> &= ~<a class=\"id\" href=\"#PORT_IRQ_IF_ERR\">PORT_IRQ_IF_ERR</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irq_stat\">irq_stat</a> &amp; <a class=\"id\" href=\"#PORT_IRQ_TF_ERR\">PORT_IRQ_TF_ERR</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* If qc is active, charge it; otherwise, the active</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * link.  There's no active qc on NCQ errors.  It will</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * be determined by EH by reading log page 10h.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#active_qc\">active_qc</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#active_qc\">active_qc</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_DEV\">AC_ERR_DEV</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#active_ehi\">active_ehi</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_DEV\">AC_ERR_DEV</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#AHCI_HFLAG_IGN_SERR_INTERNAL\">AHCI_HFLAG_IGN_SERR_INTERNAL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#host_ehi\">host_ehi</a>-><a class=\"id\" href=\"#serror\">serror</a> &= ~<a class=\"id\" href=\"#SERR_INTERNAL\">SERR_INTERNAL</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irq_stat\">irq_stat</a> &amp; <a class=\"id\" href=\"#PORT_IRQ_UNK_FIS\">PORT_IRQ_UNK_FIS</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> *<a class=\"id\" href=\"#unk\">unk</a> = (<a class=\"id\" href=\"#u32\">u32</a> *)(<a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#rx_fis\">rx_fis</a> + <a class=\"id\" href=\"#RX_FIS_UNK\">RX_FIS_UNK</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#active_ehi\">active_ehi</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_HSM\">AC_ERR_HSM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#active_ehi\">active_ehi</a>-><a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_ehi_push_desc\">ata_ehi_push_desc</a>(<a class=\"id\" href=\"#active_ehi\">active_ehi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  \"unknown FIS %08x %08x %08x %08x\" ,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#unk\">unk</a>[0], <a class=\"id\" href=\"#unk\">unk</a>[1], <a class=\"id\" href=\"#unk\">unk</a>[2], <a class=\"id\" href=\"#unk\">unk</a>[3]);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sata_pmp_attached\">sata_pmp_attached</a>(<a class=\"id\" href=\"#ap\">ap</a>) && (<a class=\"id\" href=\"#irq_stat\">irq_stat</a> &amp; <a class=\"id\" href=\"#PORT_IRQ_BAD_PMP\">PORT_IRQ_BAD_PMP</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#active_ehi\">active_ehi</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_HSM\">AC_ERR_HSM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#active_ehi\">active_ehi</a>-><a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_ehi_push_desc\">ata_ehi_push_desc</a>(<a class=\"id\" href=\"#active_ehi\">active_ehi</a>, \"incorrect PMP\");", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irq_stat\">irq_stat</a> &amp; (<a class=\"id\" href=\"#PORT_IRQ_HBUS_ERR\">PORT_IRQ_HBUS_ERR</a> | <a class=\"id\" href=\"#PORT_IRQ_HBUS_DATA_ERR\">PORT_IRQ_HBUS_DATA_ERR</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#host_ehi\">host_ehi</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_HOST_BUS\">AC_ERR_HOST_BUS</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#host_ehi\">host_ehi</a>-><a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_ehi_push_desc\">ata_ehi_push_desc</a>(<a class=\"id\" href=\"#host_ehi\">host_ehi</a>, \"host bus error\");", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irq_stat\">irq_stat</a> &amp; <a class=\"id\" href=\"#PORT_IRQ_IF_ERR\">PORT_IRQ_IF_ERR</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#fbs_need_dec\">fbs_need_dec</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#active_ehi\">active_ehi</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_DEV\">AC_ERR_DEV</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#host_ehi\">host_ehi</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_ATA_BUS\">AC_ERR_ATA_BUS</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#host_ehi\">host_ehi</a>-><a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_ehi_push_desc\">ata_ehi_push_desc</a>(<a class=\"id\" href=\"#host_ehi\">host_ehi</a>, \"interface fatal error\");", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irq_stat\">irq_stat</a> &amp; (<a class=\"id\" href=\"#PORT_IRQ_CONNECT\">PORT_IRQ_CONNECT</a> | <a class=\"id\" href=\"#PORT_IRQ_PHYRDY\">PORT_IRQ_PHYRDY</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_ehi_hotplugged\">ata_ehi_hotplugged</a>(<a class=\"id\" href=\"#host_ehi\">host_ehi</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_ehi_push_desc\">ata_ehi_push_desc</a>(<a class=\"id\" href=\"#host_ehi\">host_ehi</a>, \"%s\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irq_stat\">irq_stat</a> &amp; <a class=\"id\" href=\"#PORT_IRQ_CONNECT\">PORT_IRQ_CONNECT</a> ?", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"connection status changed\" : \"PHY RDY changed\");", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* okay, let's hand over to EH */</span>", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irq_stat\">irq_stat</a> &amp; <a class=\"id\" href=\"#PORT_IRQ_FREEZE\">PORT_IRQ_FREEZE</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_port_freeze\">ata_port_freeze</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#fbs_need_dec\">fbs_need_dec</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_link_abort\">ata_link_abort</a>(<a class=\"id\" href=\"#link\">link</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ahci_fbs_dec_intr\">ahci_fbs_dec_intr</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_port_abort\">ata_port_abort</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#ahci_port_intr\">ahci_port_intr</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port_mmio\">port_mmio</a> = <a class=\"id\" href=\"#ahci_port_base\">ahci_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_eh_info\">ata_eh_info</a> *<a class=\"id\" href=\"#ehi\">ehi</a> = &amp;<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#link\">link</a>.<a class=\"id\" href=\"#eh_info\">eh_info</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_port_priv\">ahci_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_host_priv\">ahci_host_priv</a> *<a class=\"id\" href=\"#hpriv\">hpriv</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#resetting\">resetting</a> = !!(<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#pflags\">pflags</a> &amp; <a class=\"id\" href=\"#ATA_PFLAG_RESETTING\">ATA_PFLAG_RESETTING</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#status\">status</a>, <a class=\"id\" href=\"#qc_active\">qc_active</a> = 0;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rc\">rc</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_IRQ_STAT\">PORT_IRQ_STAT</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#status\">status</a>, <a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_IRQ_STAT\">PORT_IRQ_STAT</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* ignore BAD_PMP while resetting */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(<a class=\"id\" href=\"#resetting\">resetting</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> &= ~<a class=\"id\" href=\"#PORT_IRQ_BAD_PMP\">PORT_IRQ_BAD_PMP</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* If we are getting PhyRdy, this is</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * just a power state change, we should</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * clear out this, plus the PhyRdy/Comm</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Wake bits from Serror</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#AHCI_HFLAG_NO_HOTPLUG\">AHCI_HFLAG_NO_HOTPLUG</a>) &&", 
"<span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#status\">status</a> &amp; <a class=\"id\" href=\"#PORT_IRQ_PHYRDY\">PORT_IRQ_PHYRDY</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> &= ~<a class=\"id\" href=\"#PORT_IRQ_PHYRDY\">PORT_IRQ_PHYRDY</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ahci_scr_write\">ahci_scr_write</a>(&amp;<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#link\">link</a>, <a class=\"id\" href=\"#SCR_ERROR\">SCR_ERROR</a>, ((1 << 16) | (1 << 18)));", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(<a class=\"id\" href=\"#status\">status</a> &amp; <a class=\"id\" href=\"#PORT_IRQ_ERROR\">PORT_IRQ_ERROR</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ahci_error_intr\">ahci_error_intr</a>(<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#status\">status</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a> &amp; <a class=\"id\" href=\"#PORT_IRQ_SDB_FIS\">PORT_IRQ_SDB_FIS</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* If SNotification is available, leave notification</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * handling to sata_async_notification().  If not,</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * emulate it by snooping SDB FIS RX area.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * Snooping FIS RX area is probably cheaper than</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * poking SNotification but some constrollers which</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * implement SNotification, ICH9 for example, don't</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * store AN SDB FIS into receive area.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_SNTF\">HOST_CAP_SNTF</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sata_async_notification\">sata_async_notification</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* If the 'N' bit in word 0 of the FIS is set,</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * we just received asynchronous notification.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * Tell libata about it.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * Lack of SNotification should not appear in</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * ahci 1.2, so the workaround is unnecessary</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * when FBS is enabled.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#fbs_enabled\">fbs_enabled</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON_ONCE\">WARN_ON_ONCE</a>(1);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>const <a class=\"id\" href=\"#__le32\">__le32</a> *<a class=\"id\" href=\"#f\">f</a> = <a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#rx_fis\">rx_fis</a> + <a class=\"id\" href=\"#RX_FIS_SDB\">RX_FIS_SDB</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#f0\">f0</a> = <a class=\"id\" href=\"#le32_to_cpu\">le32_to_cpu</a>(<a class=\"id\" href=\"#f\">f</a>[0]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#f0\">f0</a> &amp; (1 << 15))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sata_async_notification\">sata_async_notification</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* pp-&gt;active_link is not reliable once FBS is enabled, both</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * PORT_SCR_ACT and PORT_CMD_ISSUE should be checked because</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * NCQ and non-NCQ commands may be in flight at the same time.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#fbs_enabled\">fbs_enabled</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#qc_active\">qc_active</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc_active\">qc_active</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_SCR_ACT\">PORT_SCR_ACT</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc_active\">qc_active</a> |= <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_CMD_ISSUE\">PORT_CMD_ISSUE</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* pp-&gt;active_link is valid iff any command is in flight */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#qc_active\">qc_active</a> && <a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#active_link\">active_link</a>-><a class=\"id\" href=\"#sactive\">sactive</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc_active\">qc_active</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_SCR_ACT\">PORT_SCR_ACT</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc_active\">qc_active</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_CMD_ISSUE\">PORT_CMD_ISSUE</a>);", 
"<span class=\"ts\"/>}", 
"", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#ata_qc_complete_multiple\">ata_qc_complete_multiple</a>(<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#qc_active\">qc_active</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* while resetting, invalid completions are expected */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(<a class=\"id\" href=\"#rc\">rc</a> &lt; 0 && !<a class=\"id\" href=\"#resetting\">resetting</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehi\">ehi</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_HSM\">AC_ERR_HSM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehi\">ehi</a>-><a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_port_freeze\">ata_port_freeze</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"<a class=\"id\" href=\"#irqreturn_t\">irqreturn_t</a> <a class=\"id\" href=\"#ahci_interrupt\">ahci_interrupt</a>(int <a class=\"id\" href=\"#irq\">irq</a>, void *<a class=\"id\" href=\"#dev_instance\">dev_instance</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_host\">ata_host</a> *<a class=\"id\" href=\"#host\">host</a> = <a class=\"id\" href=\"#dev_instance\">dev_instance</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_host_priv\">ahci_host_priv</a> *<a class=\"id\" href=\"#hpriv\">hpriv</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#handled\">handled</a> = 0;", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#mmio\">mmio</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#irq_stat\">irq_stat</a>, <a class=\"id\" href=\"#irq_masked\">irq_masked</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#VPRINTK\">VPRINTK</a>(\"ENTER\\n\");", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#hpriv\">hpriv</a> = <a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mmio\">mmio</a> = <a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#mmio\">mmio</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* sigh.  0xffffffff is a valid return from h/w */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#irq_stat\">irq_stat</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#mmio\">mmio</a> + <a class=\"id\" href=\"#HOST_IRQ_STAT\">HOST_IRQ_STAT</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#irq_stat\">irq_stat</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#IRQ_NONE\">IRQ_NONE</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#irq_masked\">irq_masked</a> = <a class=\"id\" href=\"#irq_stat\">irq_stat</a> &amp; <a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#port_map\">port_map</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock\">spin_lock</a>(&amp;<a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#lock\">lock</a>);", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#n_ports\">n_ports</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!(<a class=\"id\" href=\"#irq_masked\">irq_masked</a> &amp; (1 << <a class=\"id\" href=\"#i\">i</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#ports\">ports</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ap\">ap</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ahci_port_intr\">ahci_port_intr</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#VPRINTK\">VPRINTK</a>(\"port %u\\n\", <a class=\"id\" href=\"#i\">i</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#VPRINTK\">VPRINTK</a>(\"port %u (no irq)\\n\", <a class=\"id\" href=\"#i\">i</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ata_ratelimit\">ata_ratelimit</a>())", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a>, <a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"interrupt on disabled port %u\\n\", <a class=\"id\" href=\"#i\">i</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#handled\">handled</a> = 1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* HOST_IRQ_STAT behaves as level triggered latch meaning that</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * it should be cleared after all the port events are cleared;</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * otherwise, it will raise a spurious interrupt after each</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * valid one.  Please read section 10.6.2 of ahci 1.1 for more</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * information.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Also, use the unmasked value to clear interrupt as spurious</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * pending event on a dummy port might cause screaming IRQ.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#irq_stat\">irq_stat</a>, <a class=\"id\" href=\"#mmio\">mmio</a> + <a class=\"id\" href=\"#HOST_IRQ_STAT\">HOST_IRQ_STAT</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock\">spin_unlock</a>(&amp;<a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#lock\">lock</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#VPRINTK\">VPRINTK</a>(\"EXIT\\n\");", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#IRQ_RETVAL\">IRQ_RETVAL</a>(<a class=\"id\" href=\"#handled\">handled</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#ahci_interrupt\">ahci_interrupt</a>);", 
"", 
"static unsigned int <a class=\"id\" href=\"#ahci_qc_issue\">ahci_qc_issue</a>(struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#ap\">ap</a>;", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port_mmio\">port_mmio</a> = <a class=\"id\" href=\"#ahci_port_base\">ahci_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_port_priv\">ahci_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Keep track of the currently active link.  It will be used</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * in completion path to determine whether NCQ phase is in</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * progress.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#active_link\">active_link</a> = <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#link\">link</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#protocol\">protocol</a> == <a class=\"id\" href=\"#ATA_PROT_NCQ\">ATA_PROT_NCQ</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(1 << <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#tag\">tag</a>, <a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_SCR_ACT\">PORT_SCR_ACT</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#fbs_enabled\">fbs_enabled</a> && <a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#fbs_last_dev\">fbs_last_dev</a> != <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#pmp\">pmp</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#fbs\">fbs</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_FBS\">PORT_FBS</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#fbs\">fbs</a> &= ~(<a class=\"id\" href=\"#PORT_FBS_DEV_MASK\">PORT_FBS_DEV_MASK</a> | <a class=\"id\" href=\"#PORT_FBS_DEC\">PORT_FBS_DEC</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#fbs\">fbs</a> |= <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#pmp\">pmp</a> << <a class=\"id\" href=\"#PORT_FBS_DEV_OFFSET\">PORT_FBS_DEV_OFFSET</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#fbs\">fbs</a>, <a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_FBS\">PORT_FBS</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#fbs_last_dev\">fbs_last_dev</a> = <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#pmp\">pmp</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(1 << <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#tag\">tag</a>, <a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_CMD_ISSUE\">PORT_CMD_ISSUE</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ahci_sw_activity\">ahci_sw_activity</a>(<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#link\">link</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#ahci_qc_fill_rtf\">ahci_qc_fill_rtf</a>(struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_port_priv\">ahci_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a> = <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> *<a class=\"id\" href=\"#d2h_fis\">d2h_fis</a> = <a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#rx_fis\">rx_fis</a> + <a class=\"id\" href=\"#RX_FIS_D2H_REG\">RX_FIS_D2H_REG</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#fbs_enabled\">fbs_enabled</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#d2h_fis\">d2h_fis</a> += <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#pmp\">pmp</a> * <a class=\"id\" href=\"#AHCI_RX_FIS_SZ\">AHCI_RX_FIS_SZ</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_tf_from_fis\">ata_tf_from_fis</a>(<a class=\"id\" href=\"#d2h_fis\">d2h_fis</a>, &amp;<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#result_tf\">result_tf</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#true\">true</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#ahci_freeze\">ahci_freeze</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port_mmio\">port_mmio</a> = <a class=\"id\" href=\"#ahci_port_base\">ahci_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* turn IRQ off */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(0, <a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_IRQ_MASK\">PORT_IRQ_MASK</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#ahci_thaw\">ahci_thaw</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_host_priv\">ahci_host_priv</a> *<a class=\"id\" href=\"#hpriv\">hpriv</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#mmio\">mmio</a> = <a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#mmio\">mmio</a>;", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port_mmio\">port_mmio</a> = <a class=\"id\" href=\"#ahci_port_base\">ahci_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#tmp\">tmp</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_port_priv\">ahci_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* clear IRQ */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_IRQ_STAT\">PORT_IRQ_STAT</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#tmp\">tmp</a>, <a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_IRQ_STAT\">PORT_IRQ_STAT</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(1 << <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#port_no\">port_no</a>, <a class=\"id\" href=\"#mmio\">mmio</a> + <a class=\"id\" href=\"#HOST_IRQ_STAT\">HOST_IRQ_STAT</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* turn IRQ back on */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#intr_mask\">intr_mask</a>, <a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_IRQ_MASK\">PORT_IRQ_MASK</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#ahci_error_handler\">ahci_error_handler</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#pflags\">pflags</a> &amp; <a class=\"id\" href=\"#ATA_PFLAG_FROZEN\">ATA_PFLAG_FROZEN</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* restart engine */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ahci_stop_engine\">ahci_stop_engine</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ahci_start_engine\">ahci_start_engine</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sata_pmp_error_handler\">sata_pmp_error_handler</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#ata_dev_enabled\">ata_dev_enabled</a>(<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#link\">link</a>.<a class=\"id\" href=\"#device\">device</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ahci_stop_engine\">ahci_stop_engine</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#ahci_post_internal_cmd\">ahci_post_internal_cmd</a>(struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#ap\">ap</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* make DMA engine forget about the failed command */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#ATA_QCFLAG_FAILED\">ATA_QCFLAG_FAILED</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ahci_kick_engine\">ahci_kick_engine</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#ahci_enable_fbs\">ahci_enable_fbs</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_port_priv\">ahci_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port_mmio\">port_mmio</a> = <a class=\"id\" href=\"#ahci_port_base\">ahci_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#fbs\">fbs</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rc\">rc</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#fbs_supported\">fbs_supported</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fbs\">fbs</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_FBS\">PORT_FBS</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#fbs\">fbs</a> &amp; <a class=\"id\" href=\"#PORT_FBS_EN\">PORT_FBS_EN</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#fbs_enabled\">fbs_enabled</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#fbs_last_dev\">fbs_last_dev</a> = -1; <span class=\"comment\">/* initialization */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#ahci_stop_engine\">ahci_stop_engine</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#fbs\">fbs</a> | <a class=\"id\" href=\"#PORT_FBS_EN\">PORT_FBS_EN</a>, <a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_FBS\">PORT_FBS</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fbs\">fbs</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_FBS\">PORT_FBS</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#fbs\">fbs</a> &amp; <a class=\"id\" href=\"#PORT_FBS_EN\">PORT_FBS_EN</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a>, <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"FBS is enabled.\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#fbs_enabled\">fbs_enabled</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#fbs_last_dev\">fbs_last_dev</a> = -1; <span class=\"comment\">/* initialization */</span>", 
"<span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a>, <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"Failed to enable FBS\\n\");", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ahci_start_engine\">ahci_start_engine</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#ahci_disable_fbs\">ahci_disable_fbs</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_port_priv\">ahci_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port_mmio\">port_mmio</a> = <a class=\"id\" href=\"#ahci_port_base\">ahci_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#fbs\">fbs</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rc\">rc</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#fbs_supported\">fbs_supported</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fbs\">fbs</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_FBS\">PORT_FBS</a>);", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#fbs\">fbs</a> &amp; <a class=\"id\" href=\"#PORT_FBS_EN\">PORT_FBS_EN</a>) == 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#fbs_enabled\">fbs_enabled</a> = <a class=\"id\" href=\"#false\">false</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#ahci_stop_engine\">ahci_stop_engine</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#fbs\">fbs</a> &amp; ~<a class=\"id\" href=\"#PORT_FBS_EN\">PORT_FBS_EN</a>, <a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_FBS\">PORT_FBS</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fbs\">fbs</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_FBS\">PORT_FBS</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#fbs\">fbs</a> &amp; <a class=\"id\" href=\"#PORT_FBS_EN\">PORT_FBS_EN</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a>, <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"Failed to disable FBS\\n\");", 
"<span class=\"ts\"/>else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a>, <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"FBS is disabled.\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#fbs_enabled\">fbs_enabled</a> = <a class=\"id\" href=\"#false\">false</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ahci_start_engine\">ahci_start_engine</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#ahci_pmp_attach\">ahci_pmp_attach</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port_mmio\">port_mmio</a> = <a class=\"id\" href=\"#ahci_port_base\">ahci_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_port_priv\">ahci_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#cmd\">cmd</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmd\">cmd</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_CMD\">PORT_CMD</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmd\">cmd</a> |= <a class=\"id\" href=\"#PORT_CMD_PMP\">PORT_CMD_PMP</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#cmd\">cmd</a>, <a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_CMD\">PORT_CMD</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ahci_enable_fbs\">ahci_enable_fbs</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#intr_mask\">intr_mask</a> |= <a class=\"id\" href=\"#PORT_IRQ_BAD_PMP\">PORT_IRQ_BAD_PMP</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#intr_mask\">intr_mask</a>, <a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_IRQ_MASK\">PORT_IRQ_MASK</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#ahci_pmp_detach\">ahci_pmp_detach</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port_mmio\">port_mmio</a> = <a class=\"id\" href=\"#ahci_port_base\">ahci_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_port_priv\">ahci_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#cmd\">cmd</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ahci_disable_fbs\">ahci_disable_fbs</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmd\">cmd</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_CMD\">PORT_CMD</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmd\">cmd</a> &= ~<a class=\"id\" href=\"#PORT_CMD_PMP\">PORT_CMD_PMP</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#cmd\">cmd</a>, <a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_CMD\">PORT_CMD</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#intr_mask\">intr_mask</a> &= ~<a class=\"id\" href=\"#PORT_IRQ_BAD_PMP\">PORT_IRQ_BAD_PMP</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#intr_mask\">intr_mask</a>, <a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_IRQ_MASK\">PORT_IRQ_MASK</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#ahci_port_resume\">ahci_port_resume</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ahci_power_up\">ahci_power_up</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ahci_start_port\">ahci_start_port</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sata_pmp_attached\">sata_pmp_attached</a>(<a class=\"id\" href=\"#ap\">ap</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ahci_pmp_attach\">ahci_pmp_attach</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ahci_pmp_detach\">ahci_pmp_detach</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_PM\">CONFIG_PM</a>", 
"static int <a class=\"id\" href=\"#ahci_port_suspend\">ahci_port_suspend</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#pm_message_t\">pm_message_t</a> <a class=\"id\" href=\"#mesg\">mesg</a>)", 
"{", 
"<span class=\"ts\"/>const char *<a class=\"id\" href=\"#emsg\">emsg</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rc\">rc</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#ahci_deinit_port\">ahci_deinit_port</a>(<a class=\"id\" href=\"#ap\">ap</a>, &amp;<a class=\"id\" href=\"#emsg\">emsg</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ahci_power_down\">ahci_power_down</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_port_printk\">ata_port_printk</a>(<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a>, \"%s (%d)\\n\", <a class=\"id\" href=\"#emsg\">emsg</a>, <a class=\"id\" href=\"#rc\">rc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ahci_start_port\">ahci_start_port</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#rc\">rc</a>;", 
"}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"static int <a class=\"id\" href=\"#ahci_port_start\">ahci_port_start</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_host_priv\">ahci_host_priv</a> *<a class=\"id\" href=\"#hpriv\">hpriv</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_port_priv\">ahci_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a>;", 
"<span class=\"ts\"/>void *<a class=\"id\" href=\"#mem\">mem</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dma_addr_t\">dma_addr_t</a> <a class=\"id\" href=\"#mem_dma\">mem_dma</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#dma_sz\">dma_sz</a>, <a class=\"id\" href=\"#rx_fis_sz\">rx_fis_sz</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a> = <a class=\"id\" href=\"#devm_kzalloc\">devm_kzalloc</a>(<a class=\"id\" href=\"#dev\">dev</a>, sizeof(*<a class=\"id\" href=\"#pp\">pp</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#pp\">pp</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* check FBS capability */</span>", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_FBS\">HOST_CAP_FBS</a>) && <a class=\"id\" href=\"#sata_pmp_supported\">sata_pmp_supported</a>(<a class=\"id\" href=\"#ap\">ap</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port_mmio\">port_mmio</a> = <a class=\"id\" href=\"#ahci_port_base\">ahci_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#cmd\">cmd</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_CMD\">PORT_CMD</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#cmd\">cmd</a> &amp; <a class=\"id\" href=\"#PORT_CMD_FBSCP\">PORT_CMD_FBSCP</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#fbs_supported\">fbs_supported</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#AHCI_HFLAG_YES_FBS\">AHCI_HFLAG_YES_FBS</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a>, <a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   \"port %d can do FBS, forcing FBSCP\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#port_no\">port_no</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#fbs_supported\">fbs_supported</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a>, <a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   \"port %d is not capable of FBS\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#port_no\">port_no</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#fbs_supported\">fbs_supported</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dma_sz\">dma_sz</a> = <a class=\"id\" href=\"#AHCI_PORT_PRIV_FBS_DMA_SZ\">AHCI_PORT_PRIV_FBS_DMA_SZ</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rx_fis_sz\">rx_fis_sz</a> = <a class=\"id\" href=\"#AHCI_RX_FIS_SZ\">AHCI_RX_FIS_SZ</a> * 16;", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dma_sz\">dma_sz</a> = <a class=\"id\" href=\"#AHCI_PORT_PRIV_DMA_SZ\">AHCI_PORT_PRIV_DMA_SZ</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rx_fis_sz\">rx_fis_sz</a> = <a class=\"id\" href=\"#AHCI_RX_FIS_SZ\">AHCI_RX_FIS_SZ</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mem\">mem</a> = <a class=\"id\" href=\"#dmam_alloc_coherent\">dmam_alloc_coherent</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#dma_sz\">dma_sz</a>, &amp;<a class=\"id\" href=\"#mem_dma\">mem_dma</a>, <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#mem\">mem</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(<a class=\"id\" href=\"#mem\">mem</a>, 0, <a class=\"id\" href=\"#dma_sz\">dma_sz</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * First item in chunk of DMA memory: 32-slot command table,</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * 32 bytes each in size</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#cmd_slot\">cmd_slot</a> = <a class=\"id\" href=\"#mem\">mem</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#cmd_slot_dma\">cmd_slot_dma</a> = <a class=\"id\" href=\"#mem_dma\">mem_dma</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mem\">mem</a> += <a class=\"id\" href=\"#AHCI_CMD_SLOT_SZ\">AHCI_CMD_SLOT_SZ</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mem_dma\">mem_dma</a> += <a class=\"id\" href=\"#AHCI_CMD_SLOT_SZ\">AHCI_CMD_SLOT_SZ</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Second item: Received-FIS area</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#rx_fis\">rx_fis</a> = <a class=\"id\" href=\"#mem\">mem</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#rx_fis_dma\">rx_fis_dma</a> = <a class=\"id\" href=\"#mem_dma\">mem_dma</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mem\">mem</a> += <a class=\"id\" href=\"#rx_fis_sz\">rx_fis_sz</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mem_dma\">mem_dma</a> += <a class=\"id\" href=\"#rx_fis_sz\">rx_fis_sz</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Third item: data area for storing a single command</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * and its scatter-gather table</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#cmd_tbl\">cmd_tbl</a> = <a class=\"id\" href=\"#mem\">mem</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#cmd_tbl_dma\">cmd_tbl_dma</a> = <a class=\"id\" href=\"#mem_dma\">mem_dma</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Save off initial list of interrupts to be enabled.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * This could be changed later</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#intr_mask\">intr_mask</a> = <a class=\"id\" href=\"#DEF_PORT_IRQ\">DEF_PORT_IRQ</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#private_data\">private_data</a> = <a class=\"id\" href=\"#pp\">pp</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* engage engines, captain */</span>", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ahci_port_resume\">ahci_port_resume</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#ahci_port_stop\">ahci_port_stop</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>const char *<a class=\"id\" href=\"#emsg\">emsg</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rc\">rc</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* de-initialize port */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#ahci_deinit_port\">ahci_deinit_port</a>(<a class=\"id\" href=\"#ap\">ap</a>, &amp;<a class=\"id\" href=\"#emsg\">emsg</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_port_printk\">ata_port_printk</a>(<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a>, \"%s (%d)\\n\", <a class=\"id\" href=\"#emsg\">emsg</a>, <a class=\"id\" href=\"#rc\">rc</a>);", 
"}", 
"", 
"void <a class=\"id\" href=\"#ahci_print_info\">ahci_print_info</a>(struct <a class=\"id\" href=\"#ata_host\">ata_host</a> *<a class=\"id\" href=\"#host\">host</a>, const char *<a class=\"id\" href=\"#scc_s\">scc_s</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_host_priv\">ahci_host_priv</a> *<a class=\"id\" href=\"#hpriv\">hpriv</a> = <a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#mmio\">mmio</a> = <a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#mmio\">mmio</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#vers\">vers</a>, <a class=\"id\" href=\"#cap\">cap</a>, <a class=\"id\" href=\"#cap2\">cap2</a>, <a class=\"id\" href=\"#impl\">impl</a>, <a class=\"id\" href=\"#speed\">speed</a>;", 
"<span class=\"ts\"/>const char *<a class=\"id\" href=\"#speed_s\">speed_s</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vers\">vers</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#mmio\">mmio</a> + <a class=\"id\" href=\"#HOST_VERSION\">HOST_VERSION</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> = <a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#cap\">cap</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cap2\">cap2</a> = <a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#cap2\">cap2</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#impl\">impl</a> = <a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#port_map\">port_map</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#speed\">speed</a> = (<a class=\"id\" href=\"#cap\">cap</a> >> 20) &amp; 0xf;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#speed\">speed</a> == 1)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#speed_s\">speed_s</a> = \"1.5\";", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#speed\">speed</a> == 2)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#speed_s\">speed_s</a> = \"3\";", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#speed\">speed</a> == 3)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#speed_s\">speed_s</a> = \"6\";", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#speed_s\">speed_s</a> = \"?\";", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_info\">dev_info</a>(<a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>\"AHCI %02x%02x.%02x%02x \"", 
"<span class=\"ts\"/><span class=\"ts\"/>\"%u slots %u ports %s Gbps 0x%x impl %s mode\\n\"", 
"<span class=\"ts\"/><span class=\"ts\"/>,", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#vers\">vers</a> >> 24) &amp; 0xff,", 
"<span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#vers\">vers</a> >> 16) &amp; 0xff,", 
"<span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#vers\">vers</a> >> 8) &amp; 0xff,", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vers\">vers</a> &amp; 0xff,", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>((<a class=\"id\" href=\"#cap\">cap</a> >> 8) &amp; 0x1f) + 1,", 
"<span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#cap\">cap</a> &amp; 0x1f) + 1,", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#speed_s\">speed_s</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#impl\">impl</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#scc_s\">scc_s</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_info\">dev_info</a>(<a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>\"flags: \"", 
"<span class=\"ts\"/><span class=\"ts\"/>\"%s%s%s%s%s%s%s\"", 
"<span class=\"ts\"/><span class=\"ts\"/>\"%s%s%s%s%s%s%s\"", 
"<span class=\"ts\"/><span class=\"ts\"/>\"%s%s%s%s%s%s\\n\"", 
"<span class=\"ts\"/><span class=\"ts\"/>,", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_64\">HOST_CAP_64</a> ? \"64bit \" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_NCQ\">HOST_CAP_NCQ</a> ? \"ncq \" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_SNTF\">HOST_CAP_SNTF</a> ? \"sntf \" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_MPS\">HOST_CAP_MPS</a> ? \"ilck \" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_SSS\">HOST_CAP_SSS</a> ? \"stag \" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_ALPM\">HOST_CAP_ALPM</a> ? \"pm \" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_LED\">HOST_CAP_LED</a> ? \"led \" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_CLO\">HOST_CAP_CLO</a> ? \"clo \" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_ONLY\">HOST_CAP_ONLY</a> ? \"only \" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_PMP\">HOST_CAP_PMP</a> ? \"pmp \" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_FBS\">HOST_CAP_FBS</a> ? \"fbs \" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_PIO_MULTI\">HOST_CAP_PIO_MULTI</a> ? \"pio \" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_SSC\">HOST_CAP_SSC</a> ? \"slum \" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_PART\">HOST_CAP_PART</a> ? \"part \" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_CCC\">HOST_CAP_CCC</a> ? \"ccc \" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_EMS\">HOST_CAP_EMS</a> ? \"ems \" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_SXS\">HOST_CAP_SXS</a> ? \"sxs \" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap2\">cap2</a> &amp; <a class=\"id\" href=\"#HOST_CAP2_APST\">HOST_CAP2_APST</a> ? \"apst \" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap2\">cap2</a> &amp; <a class=\"id\" href=\"#HOST_CAP2_NVMHCI\">HOST_CAP2_NVMHCI</a> ? \"nvmp \" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap2\">cap2</a> &amp; <a class=\"id\" href=\"#HOST_CAP2_BOH\">HOST_CAP2_BOH</a> ? \"boh \" : \"\"", 
"<span class=\"ts\"/><span class=\"ts\"/>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#ahci_print_info\">ahci_print_info</a>);", 
"", 
"void <a class=\"id\" href=\"#ahci_set_em_messages\">ahci_set_em_messages</a>(struct <a class=\"id\" href=\"#ahci_host_priv\">ahci_host_priv</a> *<a class=\"id\" href=\"#hpriv\">hpriv</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  struct <a class=\"id\" href=\"#ata_port_info\">ata_port_info</a> *<a class=\"id\" href=\"#pi\">pi</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#messages\">messages</a>;", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#mmio\">mmio</a> = <a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#mmio\">mmio</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#em_loc\">em_loc</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#mmio\">mmio</a> + <a class=\"id\" href=\"#HOST_EM_LOC\">HOST_EM_LOC</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#em_ctl\">em_ctl</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#mmio\">mmio</a> + <a class=\"id\" href=\"#HOST_EM_CTL\">HOST_EM_CTL</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#ahci_em_messages\">ahci_em_messages</a> || !(<a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_EMS\">HOST_CAP_EMS</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#messages\">messages</a> = (<a class=\"id\" href=\"#em_ctl\">em_ctl</a> &amp; <a class=\"id\" href=\"#EM_CTRL_MSG_TYPE\">EM_CTRL_MSG_TYPE</a>) >> 16;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#messages\">messages</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* store em_loc */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#em_loc\">em_loc</a> = ((<a class=\"id\" href=\"#em_loc\">em_loc</a> >> 16) * 4);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#em_buf_sz\">em_buf_sz</a> = ((<a class=\"id\" href=\"#em_loc\">em_loc</a> &amp; 0xff) * 4);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#em_msg_type\">em_msg_type</a> = <a class=\"id\" href=\"#messages\">messages</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pi\">pi</a>-><a class=\"id\" href=\"#flags\">flags</a> |= <a class=\"id\" href=\"#ATA_FLAG_EM\">ATA_FLAG_EM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!(<a class=\"id\" href=\"#em_ctl\">em_ctl</a> &amp; <a class=\"id\" href=\"#EM_CTL_ALHD\">EM_CTL_ALHD</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pi\">pi</a>-><a class=\"id\" href=\"#flags\">flags</a> |= <a class=\"id\" href=\"#ATA_FLAG_SW_ACTIVITY\">ATA_FLAG_SW_ACTIVITY</a>;", 
"<span class=\"ts\"/>}", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#ahci_set_em_messages\">ahci_set_em_messages</a>);", 
"", 
"<a class=\"id\" href=\"#MODULE_AUTHOR\">MODULE_AUTHOR</a>(\"Jeff Garzik\");", 
"<a class=\"id\" href=\"#MODULE_DESCRIPTION\">MODULE_DESCRIPTION</a>(\"Common AHCI SATA low-level routines\");", 
"<a class=\"id\" href=\"#MODULE_LICENSE\">MODULE_LICENSE</a>(\"GPL\");", 
];
xr_frag_insert('l/3e/5177300a336f66b9928c5b9be10fea6c23af08.xr', __xr_tmp);
