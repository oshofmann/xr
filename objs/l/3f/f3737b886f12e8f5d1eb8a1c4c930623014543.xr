var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * linux/drivers/char/selection.c</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This module exports the functions:</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *     'int set_selection(struct tiocl_selection __user *, struct tty_struct *)'</span>", 
"<span class=\"comment\"> *     'void clear_selection(void)'</span>", 
"<span class=\"comment\"> *     'int paste_selection(struct tty_struct *)'</span>", 
"<span class=\"comment\"> *     'int sel_loadlut(char __user *)'</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Now that /dev/vcs exists, most of this can disappear again.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#tty\">tty</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#sched\">sched</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#mm\">mm</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#slab\">slab</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#types\">types</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#uaccess\">uaccess</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kbd_kern\">kbd_kern</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#vt_kern\">vt_kern</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#consolemap\">consolemap</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#selection\">selection</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#tiocl\">tiocl</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#console\">console</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#smp_lock\">smp_lock</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"<span class=\"comment\">/* Don't take this from &lt;ctype.h&gt;: 011-015 on the screen aren't spaces */</span>", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#isspace\">isspace</a>(<a class=\"id\" href=\"#c\">c</a>)<span class=\"ts\"/>((<a class=\"id\" href=\"#c\">c</a>) == ' ')", 
"", 
"extern void <a class=\"id\" href=\"#poke_blanked_console\">poke_blanked_console</a>(void);", 
"", 
"<span class=\"comment\">/* Variables for selection control. */</span>", 
"<span class=\"comment\">/* Use a dynamic buffer, instead of static (Dec 1994) */</span>", 
"struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#sel_cons\">sel_cons</a>;<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* must not be deallocated */</span>", 
"static int <a class=\"id\" href=\"#use_unicode\">use_unicode</a>;", 
"static volatile int <a class=\"id\" href=\"#sel_start\">sel_start</a> = -1; <span class=\"ts\"/><span class=\"comment\">/* cleared by clear_selection */</span>", 
"static int <a class=\"id\" href=\"#sel_end\">sel_end</a>;", 
"static int <a class=\"id\" href=\"#sel_buffer_lth\">sel_buffer_lth</a>;", 
"static char *<a class=\"id\" href=\"#sel_buffer\">sel_buffer</a>;", 
"", 
"<span class=\"comment\">/* clear_selection, highlight and highlight_pointer can be called</span>", 
"<span class=\"comment\">   from interrupt (via scrollback/front) */</span>", 
"", 
"<span class=\"comment\">/* set reverse video on characters s-e of console with selection. */</span>", 
"static <a class=\"id\" href=\"#inline\">inline</a> void <a class=\"id\" href=\"#highlight\">highlight</a>(const int <a class=\"id\" href=\"#s\">s</a>, const int <a class=\"id\" href=\"#e\">e</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#invert_screen\">invert_screen</a>(<a class=\"id\" href=\"#sel_cons\">sel_cons</a>, <a class=\"id\" href=\"#s\">s</a>, <a class=\"id\" href=\"#e\">e</a>-<a class=\"id\" href=\"#s\">s</a>+2, 1);", 
"}", 
"", 
"<span class=\"comment\">/* use complementary color to show the pointer */</span>", 
"static <a class=\"id\" href=\"#inline\">inline</a> void <a class=\"id\" href=\"#highlight_pointer\">highlight_pointer</a>(const int <a class=\"id\" href=\"#where\">where</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#complement_pos\">complement_pos</a>(<a class=\"id\" href=\"#sel_cons\">sel_cons</a>, <a class=\"id\" href=\"#where\">where</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#u16\">u16</a>", 
"<a class=\"id\" href=\"#sel_pos\">sel_pos</a>(int <a class=\"id\" href=\"#n\">n</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#inverse_translate\">inverse_translate</a>(<a class=\"id\" href=\"#sel_cons\">sel_cons</a>, <a class=\"id\" href=\"#screen_glyph\">screen_glyph</a>(<a class=\"id\" href=\"#sel_cons\">sel_cons</a>, <a class=\"id\" href=\"#n\">n</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#use_unicode\">use_unicode</a>);", 
"}", 
"", 
"<span class=\"comment\">/* remove the current selection highlight, if any,</span>", 
"<span class=\"comment\">   from the console holding the selection. */</span>", 
"void", 
"<a class=\"id\" href=\"#clear_selection\">clear_selection</a>(void) {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#highlight_pointer\">highlight_pointer</a>(-1); <span class=\"comment\">/* hide the pointer */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sel_start\">sel_start</a> != -1) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#highlight\">highlight</a>(<a class=\"id\" href=\"#sel_start\">sel_start</a>, <a class=\"id\" href=\"#sel_end\">sel_end</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sel_start\">sel_start</a> = -1;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * User settable table: what characters are to be considered alphabetic?</span>", 
"<span class=\"comment\"> * 256 bits</span>", 
"<span class=\"comment\"> */</span>", 
"static <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#inwordLut\">inwordLut</a>[8]={", 
"  0x00000000, <span class=\"comment\">/* control chars     */</span>", 
"  0x03FF0000, <span class=\"comment\">/* digits            */</span>", 
"  0x87FFFFFE, <span class=\"comment\">/* uppercase and '_' */</span>", 
"  0x07FFFFFE, <span class=\"comment\">/* lowercase         */</span>", 
"  0x00000000,", 
"  0x00000000,", 
"  0xFF7FFFFF, <span class=\"comment\">/* latin-1 accented letters, not multiplication sign */</span>", 
"  0xFF7FFFFF  <span class=\"comment\">/* latin-1 accented letters, not division sign */</span>", 
"};", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> int <a class=\"id\" href=\"#inword\">inword</a>(const <a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#c\">c</a>) {", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#c\">c</a> &gt; 0xff || (( <a class=\"id\" href=\"#inwordLut\">inwordLut</a>[<a class=\"id\" href=\"#c\">c</a>>>5] >> (<a class=\"id\" href=\"#c\">c</a> &amp; 0x1F) ) &amp; 1);", 
"}", 
"", 
"<span class=\"comment\">/* set inwordLut contents. Invoked by ioctl(). */</span>", 
"int <a class=\"id\" href=\"#sel_loadlut\">sel_loadlut</a>(char <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#p\">p</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(<a class=\"id\" href=\"#inwordLut\">inwordLut</a>, (<a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#__user\">__user</a> *)(<a class=\"id\" href=\"#p\">p</a>+4), 32) ? -<a class=\"id\" href=\"#EFAULT\">EFAULT</a> : 0;", 
"}", 
"", 
"<span class=\"comment\">/* does screen address p correspond to character at LH/RH edge of screen? */</span>", 
"static <a class=\"id\" href=\"#inline\">inline</a> int <a class=\"id\" href=\"#atedge\">atedge</a>(const int <a class=\"id\" href=\"#p\">p</a>, int <a class=\"id\" href=\"#size_row\">size_row</a>)", 
"{", 
"<span class=\"ts\"/>return (!(<a class=\"id\" href=\"#p\">p</a> % <a class=\"id\" href=\"#size_row\">size_row</a>)<span class=\"ts\"/>|| !((<a class=\"id\" href=\"#p\">p</a> + 2) % <a class=\"id\" href=\"#size_row\">size_row</a>));", 
"}", 
"", 
"<span class=\"comment\">/* constrain v such that v &lt;= u */</span>", 
"static <a class=\"id\" href=\"#inline\">inline</a> unsigned short <a class=\"id\" href=\"#limit\">limit</a>(const unsigned short <a class=\"id\" href=\"#v\">v</a>, const unsigned short <a class=\"id\" href=\"#u\">u</a>)", 
"{", 
"<span class=\"ts\"/>return (<a class=\"id\" href=\"#v\">v</a> &gt; <a class=\"id\" href=\"#u\">u</a>) ? <a class=\"id\" href=\"#u\">u</a> : <a class=\"id\" href=\"#v\">v</a>;", 
"}", 
"", 
"<span class=\"comment\">/* stores the char in UTF8 and returns the number of bytes used (1-3) */</span>", 
"static int <a class=\"id\" href=\"#store_utf8\">store_utf8</a>(<a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#c\">c</a>, char *<a class=\"id\" href=\"#p\">p</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#c\">c</a> &lt; 0x80) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*  0******* */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a>[0] = <a class=\"id\" href=\"#c\">c</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>} else if (<a class=\"id\" href=\"#c\">c</a> &lt; 0x800) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* 110***** 10****** */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a>[0] = 0xc0 | (<a class=\"id\" href=\"#c\">c</a> >> 6);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a>[1] = 0x80 | (<a class=\"id\" href=\"#c\">c</a> &amp; 0x3f);", 
"<span class=\"ts\"/><span class=\"ts\"/>return 2;", 
"    <span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* 1110**** 10****** 10****** */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a>[0] = 0xe0 | (<a class=\"id\" href=\"#c\">c</a> >> 12);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a>[1] = 0x80 | ((<a class=\"id\" href=\"#c\">c</a> >> 6) &amp; 0x3f);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a>[2] = 0x80 | (<a class=\"id\" href=\"#c\">c</a> &amp; 0x3f);", 
"<span class=\"ts\"/><span class=\"ts\"/>return 3;", 
"    <span class=\"ts\"/>}", 
"}", 
"", 
"<span class=\"comment\">/* set the current selection. Invoked by ioctl() or by kernel code. */</span>", 
"int <a class=\"id\" href=\"#set_selection\">set_selection</a>(const struct <a class=\"id\" href=\"#tiocl_selection\">tiocl_selection</a> <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#sel\">sel</a>, struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#vc\">vc</a> = <a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#fg_console\">fg_console</a>].<a class=\"id\" href=\"#d\">d</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#sel_mode\">sel_mode</a>, <a class=\"id\" href=\"#new_sel_start\">new_sel_start</a>, <a class=\"id\" href=\"#new_sel_end\">new_sel_end</a>, <a class=\"id\" href=\"#spc\">spc</a>;", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#bp\">bp</a>, *<a class=\"id\" href=\"#obp\">obp</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#ps\">ps</a>, <a class=\"id\" href=\"#pe\">pe</a>, <a class=\"id\" href=\"#multiplier\">multiplier</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#c\">c</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#kbd_struct\">kbd_struct</a> *<a class=\"id\" href=\"#kbd\">kbd</a> = <a class=\"id\" href=\"#kbd_table\">kbd_table</a> + <a class=\"id\" href=\"#fg_console\">fg_console</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#poke_blanked_console\">poke_blanked_console</a>();", 
"", 
"<span class=\"ts\"/>{ unsigned short <a class=\"id\" href=\"#xs\">xs</a>, <a class=\"id\" href=\"#ys\">ys</a>, <a class=\"id\" href=\"#xe\">xe</a>, <a class=\"id\" href=\"#ye\">ye</a>;", 
"", 
"<span class=\"ts\"/>  if (!<a class=\"id\" href=\"#access_ok\">access_ok</a>(<a class=\"id\" href=\"#VERIFY_READ\">VERIFY_READ</a>, <a class=\"id\" href=\"#sel\">sel</a>, sizeof(*<a class=\"id\" href=\"#sel\">sel</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/>  <a class=\"id\" href=\"#__get_user\">__get_user</a>(<a class=\"id\" href=\"#xs\">xs</a>, &amp;<a class=\"id\" href=\"#sel\">sel</a>-><a class=\"id\" href=\"#xs\">xs</a>);", 
"<span class=\"ts\"/>  <a class=\"id\" href=\"#__get_user\">__get_user</a>(<a class=\"id\" href=\"#ys\">ys</a>, &amp;<a class=\"id\" href=\"#sel\">sel</a>-><a class=\"id\" href=\"#ys\">ys</a>);", 
"<span class=\"ts\"/>  <a class=\"id\" href=\"#__get_user\">__get_user</a>(<a class=\"id\" href=\"#xe\">xe</a>, &amp;<a class=\"id\" href=\"#sel\">sel</a>-><a class=\"id\" href=\"#xe\">xe</a>);", 
"<span class=\"ts\"/>  <a class=\"id\" href=\"#__get_user\">__get_user</a>(<a class=\"id\" href=\"#ye\">ye</a>, &amp;<a class=\"id\" href=\"#sel\">sel</a>-><a class=\"id\" href=\"#ye\">ye</a>);", 
"<span class=\"ts\"/>  <a class=\"id\" href=\"#__get_user\">__get_user</a>(<a class=\"id\" href=\"#sel_mode\">sel_mode</a>, &amp;<a class=\"id\" href=\"#sel\">sel</a>-><a class=\"id\" href=\"#sel_mode\">sel_mode</a>);", 
"<span class=\"ts\"/>  <a class=\"id\" href=\"#xs\">xs</a>--; <a class=\"id\" href=\"#ys\">ys</a>--; <a class=\"id\" href=\"#xe\">xe</a>--; <a class=\"id\" href=\"#ye\">ye</a>--;", 
"<span class=\"ts\"/>  <a class=\"id\" href=\"#xs\">xs</a> = <a class=\"id\" href=\"#limit\">limit</a>(<a class=\"id\" href=\"#xs\">xs</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_cols\">vc_cols</a> - 1);", 
"<span class=\"ts\"/>  <a class=\"id\" href=\"#ys\">ys</a> = <a class=\"id\" href=\"#limit\">limit</a>(<a class=\"id\" href=\"#ys\">ys</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_rows\">vc_rows</a> - 1);", 
"<span class=\"ts\"/>  <a class=\"id\" href=\"#xe\">xe</a> = <a class=\"id\" href=\"#limit\">limit</a>(<a class=\"id\" href=\"#xe\">xe</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_cols\">vc_cols</a> - 1);", 
"<span class=\"ts\"/>  <a class=\"id\" href=\"#ye\">ye</a> = <a class=\"id\" href=\"#limit\">limit</a>(<a class=\"id\" href=\"#ye\">ye</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_rows\">vc_rows</a> - 1);", 
"<span class=\"ts\"/>  <a class=\"id\" href=\"#ps\">ps</a> = <a class=\"id\" href=\"#ys\">ys</a> * <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_size_row\">vc_size_row</a> + (<a class=\"id\" href=\"#xs\">xs</a> << 1);", 
"<span class=\"ts\"/>  <a class=\"id\" href=\"#pe\">pe</a> = <a class=\"id\" href=\"#ye\">ye</a> * <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_size_row\">vc_size_row</a> + (<a class=\"id\" href=\"#xe\">xe</a> << 1);", 
"", 
"<span class=\"ts\"/>  if (<a class=\"id\" href=\"#sel_mode\">sel_mode</a> == <a class=\"id\" href=\"#TIOCL_SELCLEAR\">TIOCL_SELCLEAR</a>) {", 
"<span class=\"ts\"/>      <span class=\"comment\">/* useful for screendump without selection highlights */</span>", 
"<span class=\"ts\"/>      <a class=\"id\" href=\"#clear_selection\">clear_selection</a>();", 
"<span class=\"ts\"/>      return 0;", 
"<span class=\"ts\"/>  }", 
"", 
"<span class=\"ts\"/>  if (<a class=\"id\" href=\"#mouse_reporting\">mouse_reporting</a>() && (<a class=\"id\" href=\"#sel_mode\">sel_mode</a> &amp; <a class=\"id\" href=\"#TIOCL_SELMOUSEREPORT\">TIOCL_SELMOUSEREPORT</a>)) {", 
"<span class=\"ts\"/>      <a class=\"id\" href=\"#mouse_report\">mouse_report</a>(<a class=\"id\" href=\"#tty\">tty</a>, <a class=\"id\" href=\"#sel_mode\">sel_mode</a> &amp; <a class=\"id\" href=\"#TIOCL_SELBUTTONMASK\">TIOCL_SELBUTTONMASK</a>, <a class=\"id\" href=\"#xs\">xs</a>, <a class=\"id\" href=\"#ys\">ys</a>);", 
"<span class=\"ts\"/>      return 0;", 
"<span class=\"ts\"/>  }", 
"        }", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ps\">ps</a> &gt; <a class=\"id\" href=\"#pe\">pe</a>)<span class=\"ts\"/><span class=\"comment\">/* make sel_start &lt;= sel_end */</span>", 
"<span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#tmp\">tmp</a> = <a class=\"id\" href=\"#ps\">ps</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ps\">ps</a> = <a class=\"id\" href=\"#pe\">pe</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pe\">pe</a> = <a class=\"id\" href=\"#tmp\">tmp</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sel_cons\">sel_cons</a> != <a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#fg_console\">fg_console</a>].<a class=\"id\" href=\"#d\">d</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#clear_selection\">clear_selection</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sel_cons\">sel_cons</a> = <a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#fg_console\">fg_console</a>].<a class=\"id\" href=\"#d\">d</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#use_unicode\">use_unicode</a> = <a class=\"id\" href=\"#kbd\">kbd</a> && <a class=\"id\" href=\"#kbd\">kbd</a>-><a class=\"id\" href=\"#kbdmode\">kbdmode</a> == <a class=\"id\" href=\"#VC_UNICODE\">VC_UNICODE</a>;", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#sel_mode\">sel_mode</a>)", 
"<span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCL_SELCHAR\">TIOCL_SELCHAR</a>:<span class=\"ts\"/><span class=\"comment\">/* character-by-character selection */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_sel_start\">new_sel_start</a> = <a class=\"id\" href=\"#ps\">ps</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_sel_end\">new_sel_end</a> = <a class=\"id\" href=\"#pe\">pe</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCL_SELWORD\">TIOCL_SELWORD</a>:<span class=\"ts\"/><span class=\"comment\">/* word-by-word selection */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spc\">spc</a> = <a class=\"id\" href=\"#isspace\">isspace</a>(<a class=\"id\" href=\"#sel_pos\">sel_pos</a>(<a class=\"id\" href=\"#ps\">ps</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#new_sel_start\">new_sel_start</a> = <a class=\"id\" href=\"#ps\">ps</a>; ; <a class=\"id\" href=\"#ps\">ps</a> -= 2)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if ((<a class=\"id\" href=\"#spc\">spc</a> && !<a class=\"id\" href=\"#isspace\">isspace</a>(<a class=\"id\" href=\"#sel_pos\">sel_pos</a>(<a class=\"id\" href=\"#ps\">ps</a>))) ||", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    (!<a class=\"id\" href=\"#spc\">spc</a> && !<a class=\"id\" href=\"#inword\">inword</a>(<a class=\"id\" href=\"#sel_pos\">sel_pos</a>(<a class=\"id\" href=\"#ps\">ps</a>))))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_sel_start\">new_sel_start</a> = <a class=\"id\" href=\"#ps\">ps</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!(<a class=\"id\" href=\"#ps\">ps</a> % <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_size_row\">vc_size_row</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spc\">spc</a> = <a class=\"id\" href=\"#isspace\">isspace</a>(<a class=\"id\" href=\"#sel_pos\">sel_pos</a>(<a class=\"id\" href=\"#pe\">pe</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#new_sel_end\">new_sel_end</a> = <a class=\"id\" href=\"#pe\">pe</a>; ; <a class=\"id\" href=\"#pe\">pe</a> += 2)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if ((<a class=\"id\" href=\"#spc\">spc</a> && !<a class=\"id\" href=\"#isspace\">isspace</a>(<a class=\"id\" href=\"#sel_pos\">sel_pos</a>(<a class=\"id\" href=\"#pe\">pe</a>))) ||", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    (!<a class=\"id\" href=\"#spc\">spc</a> && !<a class=\"id\" href=\"#inword\">inword</a>(<a class=\"id\" href=\"#sel_pos\">sel_pos</a>(<a class=\"id\" href=\"#pe\">pe</a>))))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_sel_end\">new_sel_end</a> = <a class=\"id\" href=\"#pe\">pe</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!((<a class=\"id\" href=\"#pe\">pe</a> + 2) % <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_size_row\">vc_size_row</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCL_SELLINE\">TIOCL_SELLINE</a>:<span class=\"ts\"/><span class=\"comment\">/* line-by-line selection */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_sel_start\">new_sel_start</a> = <a class=\"id\" href=\"#ps\">ps</a> - <a class=\"id\" href=\"#ps\">ps</a> % <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_size_row\">vc_size_row</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_sel_end\">new_sel_end</a> = <a class=\"id\" href=\"#pe\">pe</a> + <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_size_row\">vc_size_row</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    - <a class=\"id\" href=\"#pe\">pe</a> % <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_size_row\">vc_size_row</a> - 2;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCL_SELPOINTER\">TIOCL_SELPOINTER</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#highlight_pointer\">highlight_pointer</a>(<a class=\"id\" href=\"#pe\">pe</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* remove the pointer */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#highlight_pointer\">highlight_pointer</a>(-1);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* select to end of line if on trailing space */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#new_sel_end\">new_sel_end</a> &gt; <a class=\"id\" href=\"#new_sel_start\">new_sel_start</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/>!<a class=\"id\" href=\"#atedge\">atedge</a>(<a class=\"id\" href=\"#new_sel_end\">new_sel_end</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_size_row\">vc_size_row</a>) &&", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#isspace\">isspace</a>(<a class=\"id\" href=\"#sel_pos\">sel_pos</a>(<a class=\"id\" href=\"#new_sel_end\">new_sel_end</a>))) {", 
"<span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#pe\">pe</a> = <a class=\"id\" href=\"#new_sel_end\">new_sel_end</a> + 2; ; <a class=\"id\" href=\"#pe\">pe</a> += 2)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#isspace\">isspace</a>(<a class=\"id\" href=\"#sel_pos\">sel_pos</a>(<a class=\"id\" href=\"#pe\">pe</a>)) ||", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#atedge\">atedge</a>(<a class=\"id\" href=\"#pe\">pe</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_size_row\">vc_size_row</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#isspace\">isspace</a>(<a class=\"id\" href=\"#sel_pos\">sel_pos</a>(<a class=\"id\" href=\"#pe\">pe</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_sel_end\">new_sel_end</a> = <a class=\"id\" href=\"#pe\">pe</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sel_start\">sel_start</a> == -1)<span class=\"ts\"/><span class=\"comment\">/* no current selection */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#highlight\">highlight</a>(<a class=\"id\" href=\"#new_sel_start\">new_sel_start</a>, <a class=\"id\" href=\"#new_sel_end\">new_sel_end</a>);", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#new_sel_start\">new_sel_start</a> == <a class=\"id\" href=\"#sel_start\">sel_start</a>)", 
"<span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#new_sel_end\">new_sel_end</a> == <a class=\"id\" href=\"#sel_end\">sel_end</a>)<span class=\"ts\"/><span class=\"comment\">/* no action required */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#new_sel_end\">new_sel_end</a> &gt; <a class=\"id\" href=\"#sel_end\">sel_end</a>)<span class=\"ts\"/><span class=\"comment\">/* extend to right */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#highlight\">highlight</a>(<a class=\"id\" href=\"#sel_end\">sel_end</a> + 2, <a class=\"id\" href=\"#new_sel_end\">new_sel_end</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>else<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* contract from right */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#highlight\">highlight</a>(<a class=\"id\" href=\"#new_sel_end\">new_sel_end</a> + 2, <a class=\"id\" href=\"#sel_end\">sel_end</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#new_sel_end\">new_sel_end</a> == <a class=\"id\" href=\"#sel_end\">sel_end</a>)", 
"<span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#new_sel_start\">new_sel_start</a> &lt; <a class=\"id\" href=\"#sel_start\">sel_start</a>)<span class=\"ts\"/><span class=\"comment\">/* extend to left */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#highlight\">highlight</a>(<a class=\"id\" href=\"#new_sel_start\">new_sel_start</a>, <a class=\"id\" href=\"#sel_start\">sel_start</a> - 2);", 
"<span class=\"ts\"/><span class=\"ts\"/>else<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* contract from left */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#highlight\">highlight</a>(<a class=\"id\" href=\"#sel_start\">sel_start</a>, <a class=\"id\" href=\"#new_sel_start\">new_sel_start</a> - 2);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>else<span class=\"ts\"/><span class=\"comment\">/* some other case; start selection from scratch */</span>", 
"<span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#clear_selection\">clear_selection</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#highlight\">highlight</a>(<a class=\"id\" href=\"#new_sel_start\">new_sel_start</a>, <a class=\"id\" href=\"#new_sel_end\">new_sel_end</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sel_start\">sel_start</a> = <a class=\"id\" href=\"#new_sel_start\">new_sel_start</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sel_end\">sel_end</a> = <a class=\"id\" href=\"#new_sel_end\">new_sel_end</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Allocate a new buffer before freeing the old one ... */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#multiplier\">multiplier</a> = <a class=\"id\" href=\"#use_unicode\">use_unicode</a> ? 3 : 1;  <span class=\"comment\">/* chars can take up to 3 bytes */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bp\">bp</a> = <a class=\"id\" href=\"#kmalloc\">kmalloc</a>(((<a class=\"id\" href=\"#sel_end\">sel_end</a>-<a class=\"id\" href=\"#sel_start\">sel_start</a>)/2+1)*<a class=\"id\" href=\"#multiplier\">multiplier</a>, <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#bp\">bp</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> \"selection: kmalloc() failed\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#clear_selection\">clear_selection</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#sel_buffer\">sel_buffer</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sel_buffer\">sel_buffer</a> = <a class=\"id\" href=\"#bp\">bp</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#obp\">obp</a> = <a class=\"id\" href=\"#bp\">bp</a>;", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = <a class=\"id\" href=\"#sel_start\">sel_start</a>; <a class=\"id\" href=\"#i\">i</a> <= <a class=\"id\" href=\"#sel_end\">sel_end</a>; <a class=\"id\" href=\"#i\">i</a> += 2) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#c\">c</a> = <a class=\"id\" href=\"#sel_pos\">sel_pos</a>(<a class=\"id\" href=\"#i\">i</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#use_unicode\">use_unicode</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bp\">bp</a> += <a class=\"id\" href=\"#store_utf8\">store_utf8</a>(<a class=\"id\" href=\"#c\">c</a>, <a class=\"id\" href=\"#bp\">bp</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#bp\">bp</a>++ = <a class=\"id\" href=\"#c\">c</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#isspace\">isspace</a>(<a class=\"id\" href=\"#c\">c</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#obp\">obp</a> = <a class=\"id\" href=\"#bp\">bp</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (! ((<a class=\"id\" href=\"#i\">i</a> + 2) % <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_size_row\">vc_size_row</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* strip trailing blanks from line and add newline,</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   unless non-space at end of line. */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#obp\">obp</a> != <a class=\"id\" href=\"#bp\">bp</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bp\">bp</a> = <a class=\"id\" href=\"#obp\">obp</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#bp\">bp</a>++ = '\\r';", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#obp\">obp</a> = <a class=\"id\" href=\"#bp\">bp</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sel_buffer_lth\">sel_buffer_lth</a> = <a class=\"id\" href=\"#bp\">bp</a> - <a class=\"id\" href=\"#sel_buffer\">sel_buffer</a>;", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/* Insert the contents of the selection buffer into the</span>", 
"<span class=\"comment\"> * queue of the tty associated with the current console.</span>", 
"<span class=\"comment\"> * Invoked by ioctl().</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#paste_selection\">paste_selection</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#vc\">vc</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#driver_data\">driver_data</a>;", 
"<span class=\"ts\"/>int<span class=\"ts\"/><a class=\"id\" href=\"#pasted\">pasted</a> = 0;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#count\">count</a>;", 
"<span class=\"ts\"/>struct  <a class=\"id\" href=\"#tty_ldisc\">tty_ldisc</a> *<a class=\"id\" href=\"#ld\">ld</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#DECLARE_WAITQUEUE\">DECLARE_WAITQUEUE</a>(<a class=\"id\" href=\"#wait\">wait</a>, <a class=\"id\" href=\"#current\">current</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* always called with BTM from vt_ioctl */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON\">WARN_ON</a>(!<a class=\"id\" href=\"#tty_locked\">tty_locked</a>());", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acquire_console_sem\">acquire_console_sem</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#poke_blanked_console\">poke_blanked_console</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#release_console_sem\">release_console_sem</a>();", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ld\">ld</a> = <a class=\"id\" href=\"#tty_ldisc_ref\">tty_ldisc_ref</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#ld\">ld</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty_unlock\">tty_unlock</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ld\">ld</a> = <a class=\"id\" href=\"#tty_ldisc_ref_wait\">tty_ldisc_ref_wait</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty_lock\">tty_lock</a>();", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#add_wait_queue\">add_wait_queue</a>(&amp;<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#paste_wait\">paste_wait</a>, &amp;<a class=\"id\" href=\"#wait\">wait</a>);", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#sel_buffer\">sel_buffer</a> && <a class=\"id\" href=\"#sel_buffer_lth\">sel_buffer_lth</a> &gt; <a class=\"id\" href=\"#pasted\">pasted</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_current_state\">set_current_state</a>(<a class=\"id\" href=\"#TASK_INTERRUPTIBLE\">TASK_INTERRUPTIBLE</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#TTY_THROTTLED\">TTY_THROTTLED</a>, &amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#flags\">flags</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#schedule\">schedule</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#count\">count</a> = <a class=\"id\" href=\"#sel_buffer_lth\">sel_buffer_lth</a> - <a class=\"id\" href=\"#pasted\">pasted</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#count\">count</a> = <a class=\"id\" href=\"#min\">min</a>(<a class=\"id\" href=\"#count\">count</a>, <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#receive_room\">receive_room</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#ldisc\">ldisc</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#receive_buf\">receive_buf</a>(<a class=\"id\" href=\"#tty\">tty</a>, <a class=\"id\" href=\"#sel_buffer\">sel_buffer</a> + <a class=\"id\" href=\"#pasted\">pasted</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#count\">count</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pasted\">pasted</a> += <a class=\"id\" href=\"#count\">count</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#remove_wait_queue\">remove_wait_queue</a>(&amp;<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#paste_wait\">paste_wait</a>, &amp;<a class=\"id\" href=\"#wait\">wait</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__set_current_state\">__set_current_state</a>(<a class=\"id\" href=\"#TASK_RUNNING\">TASK_RUNNING</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty_ldisc_deref\">tty_ldisc_deref</a>(<a class=\"id\" href=\"#ld\">ld</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
];
xr_frag_insert('l/3f/f3737b886f12e8f5d1eb8a1c4c930623014543.xr', __xr_tmp);
