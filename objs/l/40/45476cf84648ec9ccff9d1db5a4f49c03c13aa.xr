var __xr_tmp = [
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#BUG_ON\">BUG_ON</a>(<a class=\"id\" href=\"#start_pfn\">start_pfn</a> >= <a class=\"id\" href=\"#end_pfn\">end_pfn</a>);", 
"<span class=\"ts\"/><span class=\"comment\">/* at least, alignment against pageblock is necessary */</span>", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#IS_ALIGNED\">IS_ALIGNED</a>(<a class=\"id\" href=\"#start_pfn\">start_pfn</a>, <a class=\"id\" href=\"#pageblock_nr_pages\">pageblock_nr_pages</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#IS_ALIGNED\">IS_ALIGNED</a>(<a class=\"id\" href=\"#end_pfn\">end_pfn</a>, <a class=\"id\" href=\"#pageblock_nr_pages\">pageblock_nr_pages</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/><span class=\"comment\">/* This makes hotplug much easier...and readable.</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   we assume this for now. .*/</span>", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#test_pages_in_a_zone\">test_pages_in_a_zone</a>(<a class=\"id\" href=\"#start_pfn\">start_pfn</a>, <a class=\"id\" href=\"#end_pfn\">end_pfn</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#lock_system_sleep\">lock_system_sleep</a>();", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#zone\">zone</a> = <a class=\"id\" href=\"#page_zone\">page_zone</a>(<a class=\"id\" href=\"#pfn_to_page\">pfn_to_page</a>(<a class=\"id\" href=\"#start_pfn\">start_pfn</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#node\">node</a> = <a class=\"id\" href=\"#zone_to_nid\">zone_to_nid</a>(<a class=\"id\" href=\"#zone\">zone</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#nr_pages\">nr_pages</a> = <a class=\"id\" href=\"#end_pfn\">end_pfn</a> - <a class=\"id\" href=\"#start_pfn\">start_pfn</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* set above range as isolated */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#start_isolate_page_range\">start_isolate_page_range</a>(<a class=\"id\" href=\"#start_pfn\">start_pfn</a>, <a class=\"id\" href=\"#end_pfn\">end_pfn</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#arg\">arg</a>.<a class=\"id\" href=\"#start_pfn\">start_pfn</a> = <a class=\"id\" href=\"#start_pfn\">start_pfn</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#arg\">arg</a>.<a class=\"id\" href=\"#nr_pages\">nr_pages</a> = <a class=\"id\" href=\"#nr_pages\">nr_pages</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#arg\">arg</a>.<a class=\"id\" href=\"#status_change_nid\">status_change_nid</a> = -1;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#nr_pages\">nr_pages</a> >= <a class=\"id\" href=\"#node_present_pages\">node_present_pages</a>(<a class=\"id\" href=\"#node\">node</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#arg\">arg</a>.<a class=\"id\" href=\"#status_change_nid\">status_change_nid</a> = <a class=\"id\" href=\"#node\">node</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#memory_notify\">memory_notify</a>(<a class=\"id\" href=\"#MEM_GOING_OFFLINE\">MEM_GOING_OFFLINE</a>, &amp;<a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#notifier_to_errno\">notifier_to_errno</a>(<a class=\"id\" href=\"#ret\">ret</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#failed_removal\">failed_removal</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pfn\">pfn</a> = <a class=\"id\" href=\"#start_pfn\">start_pfn</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#expire\">expire</a> = <a class=\"id\" href=\"#jiffies\">jiffies</a> + <a class=\"id\" href=\"#timeout\">timeout</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#drain\">drain</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retry_max\">retry_max</a> = 5;", 
"<a class=\"id\" href=\"#repeat\">repeat</a>:", 
"<span class=\"ts\"/><span class=\"comment\">/* start memory hot removal */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EAGAIN\">EAGAIN</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#time_after\">time_after</a>(<a class=\"id\" href=\"#jiffies\">jiffies</a>, <a class=\"id\" href=\"#expire\">expire</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#failed_removal\">failed_removal</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EINTR\">EINTR</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#signal_pending\">signal_pending</a>(<a class=\"id\" href=\"#current\">current</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#failed_removal\">failed_removal</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = 0;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#drain\">drain</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#lru_add_drain_all\">lru_add_drain_all</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#flush_scheduled_work\">flush_scheduled_work</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cond_resched\">cond_resched</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#drain_all_pages\">drain_all_pages</a>();", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pfn\">pfn</a> = <a class=\"id\" href=\"#scan_lru_pages\">scan_lru_pages</a>(<a class=\"id\" href=\"#start_pfn\">start_pfn</a>, <a class=\"id\" href=\"#end_pfn\">end_pfn</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pfn\">pfn</a>) { <span class=\"comment\">/* We have page on LRU */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#do_migrate_range\">do_migrate_range</a>(<a class=\"id\" href=\"#pfn\">pfn</a>, <a class=\"id\" href=\"#end_pfn\">end_pfn</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#ret\">ret</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#drain\">drain</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#repeat\">repeat</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (--<a class=\"id\" href=\"#retry_max\">retry_max</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#failed_removal\">failed_removal</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#yield\">yield</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#drain\">drain</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#repeat\">repeat</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"comment\">/* drain all zone's lru pagevec, this is asyncronous... */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#lru_add_drain_all\">lru_add_drain_all</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#flush_scheduled_work\">flush_scheduled_work</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#yield\">yield</a>();", 
"<span class=\"ts\"/><span class=\"comment\">/* drain pcp pages , this is synchrouns. */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#drain_all_pages\">drain_all_pages</a>();", 
"<span class=\"ts\"/><span class=\"comment\">/* check again */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#offlined_pages\">offlined_pages</a> = <a class=\"id\" href=\"#check_pages_isolated\">check_pages_isolated</a>(<a class=\"id\" href=\"#start_pfn\">start_pfn</a>, <a class=\"id\" href=\"#end_pfn\">end_pfn</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#offlined_pages\">offlined_pages</a> &lt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EBUSY\">EBUSY</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#failed_removal\">failed_removal</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"Offlined Pages %ld\\n\", <a class=\"id\" href=\"#offlined_pages\">offlined_pages</a>);", 
"<span class=\"ts\"/><span class=\"comment\">/* Ok, all of our target is islaoted.</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   We cannot do rollback at this point. */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#offline_isolated_pages\">offline_isolated_pages</a>(<a class=\"id\" href=\"#start_pfn\">start_pfn</a>, <a class=\"id\" href=\"#end_pfn\">end_pfn</a>);", 
"<span class=\"ts\"/><span class=\"comment\">/* reset pagetype flags and makes migrate type to be MOVABLE */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#undo_isolate_page_range\">undo_isolate_page_range</a>(<a class=\"id\" href=\"#start_pfn\">start_pfn</a>, <a class=\"id\" href=\"#end_pfn\">end_pfn</a>);", 
"<span class=\"ts\"/><span class=\"comment\">/* removal success */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#zone\">zone</a>-><a class=\"id\" href=\"#present_pages\">present_pages</a> -= <a class=\"id\" href=\"#offlined_pages\">offlined_pages</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#zone\">zone</a>-><a class=\"id\" href=\"#zone_pgdat\">zone_pgdat</a>-><a class=\"id\" href=\"#node_present_pages\">node_present_pages</a> -= <a class=\"id\" href=\"#offlined_pages\">offlined_pages</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#totalram_pages\">totalram_pages</a> -= <a class=\"id\" href=\"#offlined_pages\">offlined_pages</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#setup_per_zone_wmarks\">setup_per_zone_wmarks</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#calculate_zone_inactive_ratio\">calculate_zone_inactive_ratio</a>(<a class=\"id\" href=\"#zone\">zone</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#node_present_pages\">node_present_pages</a>(<a class=\"id\" href=\"#node\">node</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#node_clear_state\">node_clear_state</a>(<a class=\"id\" href=\"#node\">node</a>, <a class=\"id\" href=\"#N_HIGH_MEMORY\">N_HIGH_MEMORY</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kswapd_stop\">kswapd_stop</a>(<a class=\"id\" href=\"#node\">node</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vm_total_pages\">vm_total_pages</a> = <a class=\"id\" href=\"#nr_free_pagecache_pages\">nr_free_pagecache_pages</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writeback_set_ratelimit\">writeback_set_ratelimit</a>();", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memory_notify\">memory_notify</a>(<a class=\"id\" href=\"#MEM_OFFLINE\">MEM_OFFLINE</a>, &amp;<a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unlock_system_sleep\">unlock_system_sleep</a>();", 
"<span class=\"ts\"/>return 0;", 
"", 
"<a class=\"id\" href=\"#failed_removal\">failed_removal</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"memory offlining %lx to %lx failed\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#start_pfn\">start_pfn</a>, <a class=\"id\" href=\"#end_pfn\">end_pfn</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memory_notify\">memory_notify</a>(<a class=\"id\" href=\"#MEM_CANCEL_OFFLINE\">MEM_CANCEL_OFFLINE</a>, &amp;<a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/><span class=\"comment\">/* pushback to free area */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#undo_isolate_page_range\">undo_isolate_page_range</a>(<a class=\"id\" href=\"#start_pfn\">start_pfn</a>, <a class=\"id\" href=\"#end_pfn\">end_pfn</a>);", 
"", 
"<a class=\"id\" href=\"#out\">out</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unlock_system_sleep\">unlock_system_sleep</a>();", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"", 
"int <a class=\"id\" href=\"#remove_memory\">remove_memory</a>(<a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#start\">start</a>, <a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#size\">size</a>)", 
"{", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#start_pfn\">start_pfn</a>, <a class=\"id\" href=\"#end_pfn\">end_pfn</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#start_pfn\">start_pfn</a> = <a class=\"id\" href=\"#PFN_DOWN\">PFN_DOWN</a>(<a class=\"id\" href=\"#start\">start</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#end_pfn\">end_pfn</a> = <a class=\"id\" href=\"#start_pfn\">start_pfn</a> + <a class=\"id\" href=\"#PFN_DOWN\">PFN_DOWN</a>(<a class=\"id\" href=\"#size\">size</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#offline_pages\">offline_pages</a>(<a class=\"id\" href=\"#start_pfn\">start_pfn</a>, <a class=\"id\" href=\"#end_pfn\">end_pfn</a>, 120 * <a class=\"id\" href=\"#HZ\">HZ</a>);", 
"}", 
"#else", 
"int <a class=\"id\" href=\"#remove_memory\">remove_memory</a>(<a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#start\">start</a>, <a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#size\">size</a>)", 
"{", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"}", 
"#<a class=\"id\" href=\"#endif\">endif</a> <span class=\"comment\">/* CONFIG_MEMORY_HOTREMOVE */</span>", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#remove_memory\">remove_memory</a>);", 
];
xr_frag_insert('l/40/45476cf84648ec9ccff9d1db5a4f49c03c13aa.xr', __xr_tmp);
