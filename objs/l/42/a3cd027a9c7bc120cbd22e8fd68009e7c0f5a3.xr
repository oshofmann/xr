var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * platform.c - platform 'pseudo' bus for legacy devices</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Copyright (c) 2002-3 Patrick Mochel</span>", 
"<span class=\"comment\"> * Copyright (c) 2002-3 Open Source Development Labs</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This file is released under the GPLv2</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Please see Documentation/driver-model/platform.txt for more</span>", 
"<span class=\"comment\"> * information.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#string\">string</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#platform_device\">platform_device</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#of_device\">of_device</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#init\">init</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#dma\">dma</a>-<a class=\"id\" href=\"#mapping\">mapping</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#bootmem\">bootmem</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#err\">err</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#slab\">slab</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#pm_runtime\">pm_runtime</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> \"base.h\"", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#to_platform_driver\">to_platform_driver</a>(<a class=\"id\" href=\"#drv\">drv</a>)<span class=\"ts\"/>(<a class=\"id\" href=\"#container_of\">container_of</a>((<a class=\"id\" href=\"#drv\">drv</a>), struct <a class=\"id\" href=\"#platform_driver\">platform_driver</a>, \\", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#driver\">driver</a>))", 
"", 
"struct <a class=\"id\" href=\"#device\">device</a> <a class=\"id\" href=\"#platform_bus\">platform_bus</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#init_name\">init_name</a><span class=\"ts\"/>= \"platform\",", 
"};", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#platform_bus\">platform_bus</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * platform_get_resource - get a resource for a device</span>", 
"<span class=\"comment\"> * @dev: platform device</span>", 
"<span class=\"comment\"> * @type: resource type</span>", 
"<span class=\"comment\"> * @num: resource index</span>", 
"<span class=\"comment\"> */</span>", 
"struct <a class=\"id\" href=\"#resource\">resource</a> *<a class=\"id\" href=\"#platform_get_resource\">platform_get_resource</a>(struct <a class=\"id\" href=\"#platform_device\">platform_device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       unsigned int <a class=\"id\" href=\"#type\">type</a>, unsigned int <a class=\"id\" href=\"#num\">num</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#num_resources\">num_resources</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#resource\">resource</a> *<a class=\"id\" href=\"#r\">r</a> = &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#resource\">resource</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#resource_type\">resource_type</a>(<a class=\"id\" href=\"#r\">r</a>) && <a class=\"id\" href=\"#num\">num</a>-- == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#r\">r</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#platform_get_resource\">platform_get_resource</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * platform_get_irq - get an IRQ for a device</span>", 
"<span class=\"comment\"> * @dev: platform device</span>", 
"<span class=\"comment\"> * @num: IRQ number index</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#platform_get_irq\">platform_get_irq</a>(struct <a class=\"id\" href=\"#platform_device\">platform_device</a> *<a class=\"id\" href=\"#dev\">dev</a>, unsigned int <a class=\"id\" href=\"#num\">num</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#resource\">resource</a> *<a class=\"id\" href=\"#r\">r</a> = <a class=\"id\" href=\"#platform_get_resource\">platform_get_resource</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#IORESOURCE_IRQ\">IORESOURCE_IRQ</a>, <a class=\"id\" href=\"#num\">num</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#r\">r</a> ? <a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#start\">start</a> : -<a class=\"id\" href=\"#ENXIO\">ENXIO</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#platform_get_irq\">platform_get_irq</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * platform_get_resource_byname - get a resource for a device by name</span>", 
"<span class=\"comment\"> * @dev: platform device</span>", 
"<span class=\"comment\"> * @type: resource type</span>", 
"<span class=\"comment\"> * @name: resource name</span>", 
"<span class=\"comment\"> */</span>", 
"struct <a class=\"id\" href=\"#resource\">resource</a> *<a class=\"id\" href=\"#platform_get_resource_byname\">platform_get_resource_byname</a>(struct <a class=\"id\" href=\"#platform_device\">platform_device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      unsigned int <a class=\"id\" href=\"#type\">type</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      const char *<a class=\"id\" href=\"#name\">name</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#num_resources\">num_resources</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#resource\">resource</a> *<a class=\"id\" href=\"#r\">r</a> = &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#resource\">resource</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#resource_type\">resource_type</a>(<a class=\"id\" href=\"#r\">r</a>) && !<a class=\"id\" href=\"#strcmp\">strcmp</a>(<a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#name\">name</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#r\">r</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#platform_get_resource_byname\">platform_get_resource_byname</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * platform_get_irq - get an IRQ for a device</span>", 
"<span class=\"comment\"> * @dev: platform device</span>", 
"<span class=\"comment\"> * @name: IRQ name</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#platform_get_irq_byname\">platform_get_irq_byname</a>(struct <a class=\"id\" href=\"#platform_device\">platform_device</a> *<a class=\"id\" href=\"#dev\">dev</a>, const char *<a class=\"id\" href=\"#name\">name</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#resource\">resource</a> *<a class=\"id\" href=\"#r\">r</a> = <a class=\"id\" href=\"#platform_get_resource_byname\">platform_get_resource_byname</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#IORESOURCE_IRQ\">IORESOURCE_IRQ</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#name\">name</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#r\">r</a> ? <a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#start\">start</a> : -<a class=\"id\" href=\"#ENXIO\">ENXIO</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#platform_get_irq_byname\">platform_get_irq_byname</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * platform_add_devices - add a numbers of platform devices</span>", 
"<span class=\"comment\"> * @devs: array of platform devices to add</span>", 
"<span class=\"comment\"> * @num: number of platform devices in array</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#platform_add_devices\">platform_add_devices</a>(struct <a class=\"id\" href=\"#platform_device\">platform_device</a> **<a class=\"id\" href=\"#devs\">devs</a>, int <a class=\"id\" href=\"#num\">num</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#ret\">ret</a> = 0;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#num\">num</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#platform_device_register\">platform_device_register</a>(<a class=\"id\" href=\"#devs\">devs</a>[<a class=\"id\" href=\"#i\">i</a>]);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>while (--<a class=\"id\" href=\"#i\">i</a> >= 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#platform_device_unregister\">platform_device_unregister</a>(<a class=\"id\" href=\"#devs\">devs</a>[<a class=\"id\" href=\"#i\">i</a>]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#platform_add_devices\">platform_add_devices</a>);", 
"", 
"struct <a class=\"id\" href=\"#platform_object\">platform_object</a> {", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#platform_device\">platform_device</a> <a class=\"id\" href=\"#pdev\">pdev</a>;", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#name\">name</a>[1];", 
"};", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * platform_device_put - destroy a platform device</span>", 
"<span class=\"comment\"> * @pdev: platform device to free</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Free all memory associated with a platform device.  This function must</span>", 
"<span class=\"comment\"> * _only_ be externally called in error cases.  All other usage is a bug.</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#platform_device_put\">platform_device_put</a>(struct <a class=\"id\" href=\"#platform_device\">platform_device</a> *<a class=\"id\" href=\"#pdev\">pdev</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pdev\">pdev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#put_device\">put_device</a>(&amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#platform_device_put\">platform_device_put</a>);", 
"", 
"static void <a class=\"id\" href=\"#platform_device_release\">platform_device_release</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#platform_object\">platform_object</a> *<a class=\"id\" href=\"#pa\">pa</a> = <a class=\"id\" href=\"#container_of\">container_of</a>(<a class=\"id\" href=\"#dev\">dev</a>, struct <a class=\"id\" href=\"#platform_object\">platform_object</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#pdev\">pdev</a>.<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#pa\">pa</a>-><a class=\"id\" href=\"#pdev\">pdev</a>.<a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#platform_data\">platform_data</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#pa\">pa</a>-><a class=\"id\" href=\"#pdev\">pdev</a>.<a class=\"id\" href=\"#resource\">resource</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#pa\">pa</a>);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * platform_device_alloc - create a platform device</span>", 
"<span class=\"comment\"> * @name: base name of the device we're adding</span>", 
"<span class=\"comment\"> * @id: instance id</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Create a platform device object which can have other objects attached</span>", 
"<span class=\"comment\"> * to it, and which will have attached objects freed when it is released.</span>", 
"<span class=\"comment\"> */</span>", 
"struct <a class=\"id\" href=\"#platform_device\">platform_device</a> *<a class=\"id\" href=\"#platform_device_alloc\">platform_device_alloc</a>(const char *<a class=\"id\" href=\"#name\">name</a>, int <a class=\"id\" href=\"#id\">id</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#platform_object\">platform_object</a> *<a class=\"id\" href=\"#pa\">pa</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pa\">pa</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof(struct <a class=\"id\" href=\"#platform_object\">platform_object</a>) + <a class=\"id\" href=\"#strlen\">strlen</a>(<a class=\"id\" href=\"#name\">name</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pa\">pa</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#strcpy\">strcpy</a>(<a class=\"id\" href=\"#pa\">pa</a>-><a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pa\">pa</a>-><a class=\"id\" href=\"#pdev\">pdev</a>.<a class=\"id\" href=\"#name\">name</a> = <a class=\"id\" href=\"#pa\">pa</a>-><a class=\"id\" href=\"#name\">name</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pa\">pa</a>-><a class=\"id\" href=\"#pdev\">pdev</a>.<a class=\"id\" href=\"#id\">id</a> = <a class=\"id\" href=\"#id\">id</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#device_initialize\">device_initialize</a>(&amp;<a class=\"id\" href=\"#pa\">pa</a>-><a class=\"id\" href=\"#pdev\">pdev</a>.<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pa\">pa</a>-><a class=\"id\" href=\"#pdev\">pdev</a>.<a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#release\">release</a> = <a class=\"id\" href=\"#platform_device_release\">platform_device_release</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#pa\">pa</a> ? &amp;<a class=\"id\" href=\"#pa\">pa</a>-><a class=\"id\" href=\"#pdev\">pdev</a> : <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#platform_device_alloc\">platform_device_alloc</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * platform_device_add_resources - add resources to a platform device</span>", 
"<span class=\"comment\"> * @pdev: platform device allocated by platform_device_alloc to add resources to</span>", 
"<span class=\"comment\"> * @res: set of resources that needs to be allocated for the device</span>", 
"<span class=\"comment\"> * @num: number of resources</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Add a copy of the resources to the platform device.  The memory</span>", 
"<span class=\"comment\"> * associated with the resources will be freed when the platform device is</span>", 
"<span class=\"comment\"> * released.</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#platform_device_add_resources\">platform_device_add_resources</a>(struct <a class=\"id\" href=\"#platform_device\">platform_device</a> *<a class=\"id\" href=\"#pdev\">pdev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  const struct <a class=\"id\" href=\"#resource\">resource</a> *<a class=\"id\" href=\"#res\">res</a>, unsigned int <a class=\"id\" href=\"#num\">num</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#resource\">resource</a> *<a class=\"id\" href=\"#r\">r</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a> = <a class=\"id\" href=\"#kmemdup\">kmemdup</a>(<a class=\"id\" href=\"#res\">res</a>, sizeof(struct <a class=\"id\" href=\"#resource\">resource</a>) * <a class=\"id\" href=\"#num\">num</a>, <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#r\">r</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#resource\">resource</a> = <a class=\"id\" href=\"#r\">r</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#num_resources\">num_resources</a> = <a class=\"id\" href=\"#num\">num</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#platform_device_add_resources\">platform_device_add_resources</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * platform_device_add_data - add platform-specific data to a platform device</span>", 
"<span class=\"comment\"> * @pdev: platform device allocated by platform_device_alloc to add resources to</span>", 
"<span class=\"comment\"> * @data: platform specific data for this platform device</span>", 
"<span class=\"comment\"> * @size: size of platform specific data</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Add a copy of platform specific data to the platform device's</span>", 
"<span class=\"comment\"> * platform_data pointer.  The memory associated with the platform data</span>", 
"<span class=\"comment\"> * will be freed when the platform device is released.</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#platform_device_add_data\">platform_device_add_data</a>(struct <a class=\"id\" href=\"#platform_device\">platform_device</a> *<a class=\"id\" href=\"#pdev\">pdev</a>, const void *<a class=\"id\" href=\"#data\">data</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#size\">size</a>)", 
"{", 
"<span class=\"ts\"/>void *<a class=\"id\" href=\"#d\">d</a> = <a class=\"id\" href=\"#kmemdup\">kmemdup</a>(<a class=\"id\" href=\"#data\">data</a>, <a class=\"id\" href=\"#size\">size</a>, <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#d\">d</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#platform_data\">platform_data</a> = <a class=\"id\" href=\"#d\">d</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#platform_device_add_data\">platform_device_add_data</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * platform_device_add - add a platform device to device hierarchy</span>", 
"<span class=\"comment\"> * @pdev: platform device we're adding</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This is part 2 of platform_device_register(), though may be called</span>", 
"<span class=\"comment\"> * separately _iff_ pdev was allocated by platform_device_alloc().</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#platform_device_add\">platform_device_add</a>(struct <a class=\"id\" href=\"#platform_device\">platform_device</a> *<a class=\"id\" href=\"#pdev\">pdev</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#ret\">ret</a> = 0;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#pdev\">pdev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#parent\">parent</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#parent\">parent</a> = &amp;<a class=\"id\" href=\"#platform_bus\">platform_bus</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#bus\">bus</a> = &amp;<a class=\"id\" href=\"#platform_bus_type\">platform_bus_type</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#id\">id</a> != -1)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_set_name\">dev_set_name</a>(&amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"%s.%d\", <a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#name\">name</a>,  <a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_set_name\">dev_set_name</a>(&amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"%s\", <a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#name\">name</a>);", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#num_resources\">num_resources</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#resource\">resource</a> *<a class=\"id\" href=\"#p\">p</a>, *<a class=\"id\" href=\"#r\">r</a> = &amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#resource\">resource</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a> == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a> = <a class=\"id\" href=\"#dev_name\">dev_name</a>(&amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a> = <a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#parent\">parent</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#p\">p</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#resource_type\">resource_type</a>(<a class=\"id\" href=\"#r\">r</a>) == <a class=\"id\" href=\"#IORESOURCE_MEM\">IORESOURCE_MEM</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a> = &amp;<a class=\"id\" href=\"#iomem_resource\">iomem_resource</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#resource_type\">resource_type</a>(<a class=\"id\" href=\"#r\">r</a>) == <a class=\"id\" href=\"#IORESOURCE_IO\">IORESOURCE_IO</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a> = &amp;<a class=\"id\" href=\"#ioport_resource\">ioport_resource</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#p\">p</a> && <a class=\"id\" href=\"#insert_resource\">insert_resource</a>(<a class=\"id\" href=\"#p\">p</a>, <a class=\"id\" href=\"#r\">r</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       \"%s: failed to claim resource %d\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#dev_name\">dev_name</a>(&amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>), <a class=\"id\" href=\"#i\">i</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EBUSY\">EBUSY</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#failed\">failed</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pr_debug\">pr_debug</a>(\"Registering platform device '%s'. Parent at %s\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#dev_name\">dev_name</a>(&amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>), <a class=\"id\" href=\"#dev_name\">dev_name</a>(<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#parent\">parent</a>));", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#device_add\">device_add</a>(&amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
" <a class=\"id\" href=\"#failed\">failed</a>:", 
"<span class=\"ts\"/>while (--<a class=\"id\" href=\"#i\">i</a> >= 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#resource\">resource</a> *<a class=\"id\" href=\"#r\">r</a> = &amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#resource\">resource</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#type\">type</a> = <a class=\"id\" href=\"#resource_type\">resource_type</a>(<a class=\"id\" href=\"#r\">r</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#IORESOURCE_MEM\">IORESOURCE_MEM</a> || <a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#IORESOURCE_IO\">IORESOURCE_IO</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#release_resource\">release_resource</a>(<a class=\"id\" href=\"#r\">r</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#platform_device_add\">platform_device_add</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * platform_device_del - remove a platform-level device</span>", 
"<span class=\"comment\"> * @pdev: platform device we're removing</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Note that this function will also release all memory- and port-based</span>", 
"<span class=\"comment\"> * resources owned by the device (@dev-&gt;resource).  This function must</span>", 
"<span class=\"comment\"> * _only_ be externally called in error cases.  All other usage is a bug.</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#platform_device_del\">platform_device_del</a>(struct <a class=\"id\" href=\"#platform_device\">platform_device</a> *<a class=\"id\" href=\"#pdev\">pdev</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pdev\">pdev</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#device_del\">device_del</a>(&amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#num_resources\">num_resources</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#resource\">resource</a> *<a class=\"id\" href=\"#r\">r</a> = &amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#resource\">resource</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#type\">type</a> = <a class=\"id\" href=\"#resource_type\">resource_type</a>(<a class=\"id\" href=\"#r\">r</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#IORESOURCE_MEM\">IORESOURCE_MEM</a> || <a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#IORESOURCE_IO\">IORESOURCE_IO</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#release_resource\">release_resource</a>(<a class=\"id\" href=\"#r\">r</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#platform_device_del\">platform_device_del</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * platform_device_register - add a platform-level device</span>", 
"<span class=\"comment\"> * @pdev: platform device we're adding</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#platform_device_register\">platform_device_register</a>(struct <a class=\"id\" href=\"#platform_device\">platform_device</a> *<a class=\"id\" href=\"#pdev\">pdev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device_initialize\">device_initialize</a>(&amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#platform_device_add\">platform_device_add</a>(<a class=\"id\" href=\"#pdev\">pdev</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#platform_device_register\">platform_device_register</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * platform_device_unregister - unregister a platform-level device</span>", 
"<span class=\"comment\"> * @pdev: platform device we're unregistering</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Unregistration is done in 2 steps. First we release all resources</span>", 
"<span class=\"comment\"> * and remove it from the subsystem, then we drop reference count by</span>", 
"<span class=\"comment\"> * calling platform_device_put().</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#platform_device_unregister\">platform_device_unregister</a>(struct <a class=\"id\" href=\"#platform_device\">platform_device</a> *<a class=\"id\" href=\"#pdev\">pdev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#platform_device_del\">platform_device_del</a>(<a class=\"id\" href=\"#pdev\">pdev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#platform_device_put\">platform_device_put</a>(<a class=\"id\" href=\"#pdev\">pdev</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#platform_device_unregister\">platform_device_unregister</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * platform_device_register_resndata - add a platform-level device with</span>", 
"<span class=\"comment\"> * resources and platform-specific data</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * @parent: parent device for the device we're adding</span>", 
"<span class=\"comment\"> * @name: base name of the device we're adding</span>", 
"<span class=\"comment\"> * @id: instance id</span>", 
"<span class=\"comment\"> * @res: set of resources that needs to be allocated for the device</span>", 
"<span class=\"comment\"> * @num: number of resources</span>", 
"<span class=\"comment\"> * @data: platform specific data for this platform device</span>", 
"<span class=\"comment\"> * @size: size of platform specific data</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Returns &amp;struct platform_device pointer on success, or ERR_PTR() on error.</span>", 
"<span class=\"comment\"> */</span>", 
"struct <a class=\"id\" href=\"#platform_device\">platform_device</a> *<a class=\"id\" href=\"#__init_or_module\">__init_or_module</a> <a class=\"id\" href=\"#platform_device_register_resndata\">platform_device_register_resndata</a>(", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#parent\">parent</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>const char *<a class=\"id\" href=\"#name\">name</a>, int <a class=\"id\" href=\"#id\">id</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>const struct <a class=\"id\" href=\"#resource\">resource</a> *<a class=\"id\" href=\"#res\">res</a>, unsigned int <a class=\"id\" href=\"#num\">num</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>const void *<a class=\"id\" href=\"#data\">data</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#size\">size</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#platform_device\">platform_device</a> *<a class=\"id\" href=\"#pdev\">pdev</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pdev\">pdev</a> = <a class=\"id\" href=\"#platform_device_alloc\">platform_device_alloc</a>(<a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#pdev\">pdev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#parent\">parent</a> = <a class=\"id\" href=\"#parent\">parent</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#res\">res</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#platform_device_add_resources\">platform_device_add_resources</a>(<a class=\"id\" href=\"#pdev\">pdev</a>, <a class=\"id\" href=\"#res\">res</a>, <a class=\"id\" href=\"#num\">num</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#data\">data</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#platform_device_add_data\">platform_device_add_data</a>(<a class=\"id\" href=\"#pdev\">pdev</a>, <a class=\"id\" href=\"#data\">data</a>, <a class=\"id\" href=\"#size\">size</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#platform_device_add\">platform_device_add</a>(<a class=\"id\" href=\"#pdev\">pdev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>) {", 
"<a class=\"id\" href=\"#err\">err</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#platform_device_put\">platform_device_put</a>(<a class=\"id\" href=\"#pdev\">pdev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(<a class=\"id\" href=\"#ret\">ret</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#pdev\">pdev</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#platform_device_register_resndata\">platform_device_register_resndata</a>);", 
"", 
"static int <a class=\"id\" href=\"#platform_drv_probe\">platform_drv_probe</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#_dev\">_dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#platform_driver\">platform_driver</a> *<a class=\"id\" href=\"#drv\">drv</a> = <a class=\"id\" href=\"#to_platform_driver\">to_platform_driver</a>(<a class=\"id\" href=\"#_dev\">_dev</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#platform_device\">platform_device</a> *<a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#to_platform_device\">to_platform_device</a>(<a class=\"id\" href=\"#_dev\">_dev</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#probe\">probe</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#platform_drv_probe_fail\">platform_drv_probe_fail</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#_dev\">_dev</a>)", 
"{", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#ENXIO\">ENXIO</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#platform_drv_remove\">platform_drv_remove</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#_dev\">_dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#platform_driver\">platform_driver</a> *<a class=\"id\" href=\"#drv\">drv</a> = <a class=\"id\" href=\"#to_platform_driver\">to_platform_driver</a>(<a class=\"id\" href=\"#_dev\">_dev</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#platform_device\">platform_device</a> *<a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#to_platform_device\">to_platform_device</a>(<a class=\"id\" href=\"#_dev\">_dev</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#remove\">remove</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#platform_drv_shutdown\">platform_drv_shutdown</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#_dev\">_dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#platform_driver\">platform_driver</a> *<a class=\"id\" href=\"#drv\">drv</a> = <a class=\"id\" href=\"#to_platform_driver\">to_platform_driver</a>(<a class=\"id\" href=\"#_dev\">_dev</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#platform_device\">platform_device</a> *<a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#to_platform_device\">to_platform_device</a>(<a class=\"id\" href=\"#_dev\">_dev</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#shutdown\">shutdown</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * platform_driver_register - register a driver for platform-level devices</span>", 
"<span class=\"comment\"> * @drv: platform driver structure</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#platform_driver_register\">platform_driver_register</a>(struct <a class=\"id\" href=\"#platform_driver\">platform_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>.<a class=\"id\" href=\"#bus\">bus</a> = &amp;<a class=\"id\" href=\"#platform_bus_type\">platform_bus_type</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#probe\">probe</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>.<a class=\"id\" href=\"#probe\">probe</a> = <a class=\"id\" href=\"#platform_drv_probe\">platform_drv_probe</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#remove\">remove</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>.<a class=\"id\" href=\"#remove\">remove</a> = <a class=\"id\" href=\"#platform_drv_remove\">platform_drv_remove</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#shutdown\">shutdown</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>.<a class=\"id\" href=\"#shutdown\">shutdown</a> = <a class=\"id\" href=\"#platform_drv_shutdown\">platform_drv_shutdown</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#driver_register\">driver_register</a>(&amp;<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#platform_driver_register\">platform_driver_register</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * platform_driver_unregister - unregister a driver for platform-level devices</span>", 
"<span class=\"comment\"> * @drv: platform driver structure</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#platform_driver_unregister\">platform_driver_unregister</a>(struct <a class=\"id\" href=\"#platform_driver\">platform_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>)", 
];
xr_frag_insert('l/42/a3cd027a9c7bc120cbd22e8fd68009e7c0f5a3.xr', __xr_tmp);
