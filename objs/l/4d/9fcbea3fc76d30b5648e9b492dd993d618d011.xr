var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * IOAPIC/IOxAPIC/IOSAPIC driver</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Copyright (C) 2009 Fujitsu Limited.</span>", 
"<span class=\"comment\"> * (c) Copyright 2009 Hewlett-Packard Development Company, L.P.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This program is free software; you can redistribute it and/or modify</span>", 
"<span class=\"comment\"> * it under the terms of the GNU General Public License version 2 as</span>", 
"<span class=\"comment\"> * published by the Free Software Foundation.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * This driver manages PCI I/O APICs added by hotplug after boot.  We try to</span>", 
"<span class=\"comment\"> * claim all I/O APIC PCI devices, but those present at boot were registered</span>", 
"<span class=\"comment\"> * when we parsed the ACPI MADT, so we'll fail when we try to re-register</span>", 
"<span class=\"comment\"> * them.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#pci\">pci</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#acpi\">acpi</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#slab\">slab</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#acpi\">acpi</a>/<a class=\"id\" href=\"#acpi_bus\">acpi_bus</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"struct <a class=\"id\" href=\"#ioapic\">ioapic</a> {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_handle\">acpi_handle</a><span class=\"ts\"/><a class=\"id\" href=\"#handle\">handle</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#gsi_base\">gsi_base</a>;", 
"};", 
"", 
"static int <a class=\"id\" href=\"#ioapic_probe\">ioapic_probe</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, const struct <a class=\"id\" href=\"#pci_device_id\">pci_device_id</a> *<a class=\"id\" href=\"#ent\">ent</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_handle\">acpi_handle</a> <a class=\"id\" href=\"#handle\">handle</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_status\">acpi_status</a> <a class=\"id\" href=\"#status\">status</a>;", 
"<span class=\"ts\"/>unsigned long long <a class=\"id\" href=\"#gsb\">gsb</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ioapic\">ioapic</a> *<a class=\"id\" href=\"#ioapic\">ioapic</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#type\">type</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#resource\">resource</a> *<a class=\"id\" href=\"#res\">res</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#handle\">handle</a> = <a class=\"id\" href=\"#DEVICE_ACPI_HANDLE\">DEVICE_ACPI_HANDLE</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#handle\">handle</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#acpi_evaluate_integer\">acpi_evaluate_integer</a>(<a class=\"id\" href=\"#handle\">handle</a>, \"_GSB\", <a class=\"id\" href=\"#NULL\">NULL</a>, &amp;<a class=\"id\" href=\"#gsb\">gsb</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ACPI_FAILURE\">ACPI_FAILURE</a>(<a class=\"id\" href=\"#status\">status</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * The previous code in acpiphp evaluated _MAT if _GSB failed, but</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * ACPI spec 4.0 sec 6.2.2 requires _GSB for hot-pluggable I/O APICs.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ioapic\">ioapic</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof(*<a class=\"id\" href=\"#ioapic\">ioapic</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#ioapic\">ioapic</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ioapic\">ioapic</a>-><a class=\"id\" href=\"#handle\">handle</a> = <a class=\"id\" href=\"#handle\">handle</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ioapic\">ioapic</a>-><a class=\"id\" href=\"#gsi_base\">gsi_base</a> = (<a class=\"id\" href=\"#u32\">u32</a>) <a class=\"id\" href=\"#gsb\">gsb</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#class\">class</a> == <a class=\"id\" href=\"#PCI_CLASS_SYSTEM_PIC_IOAPIC\">PCI_CLASS_SYSTEM_PIC_IOAPIC</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#type\">type</a> = \"IOAPIC\";", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#type\">type</a> = \"IOxAPIC\";", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#pci_enable_device\">pci_enable_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#exit_free\">exit_free</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_set_master\">pci_set_master</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pci_request_region\">pci_request_region</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0, <a class=\"id\" href=\"#type\">type</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#exit_disable\">exit_disable</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#res\">res</a> = &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#resource\">resource</a>[0];", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#acpi_register_ioapic\">acpi_register_ioapic</a>(<a class=\"id\" href=\"#ioapic\">ioapic</a>-><a class=\"id\" href=\"#handle\">handle</a>, <a class=\"id\" href=\"#res\">res</a>-><a class=\"id\" href=\"#start\">start</a>, <a class=\"id\" href=\"#ioapic\">ioapic</a>-><a class=\"id\" href=\"#gsi_base\">gsi_base</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#exit_release\">exit_release</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_set_drvdata\">pci_set_drvdata</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#ioapic\">ioapic</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_info\">dev_info</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"%s at %pR, GSI %u\\n\", <a class=\"id\" href=\"#type\">type</a>, <a class=\"id\" href=\"#res\">res</a>, <a class=\"id\" href=\"#ioapic\">ioapic</a>-><a class=\"id\" href=\"#gsi_base\">gsi_base</a>);", 
"<span class=\"ts\"/>return 0;", 
"", 
"<a class=\"id\" href=\"#exit_release\">exit_release</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_release_region\">pci_release_region</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0);", 
"<a class=\"id\" href=\"#exit_disable\">exit_disable</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_disable_device\">pci_disable_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<a class=\"id\" href=\"#exit_free\">exit_free</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#ioapic\">ioapic</a>);", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#ioapic_remove\">ioapic_remove</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ioapic\">ioapic</a> *<a class=\"id\" href=\"#ioapic\">ioapic</a> = <a class=\"id\" href=\"#pci_get_drvdata\">pci_get_drvdata</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_unregister_ioapic\">acpi_unregister_ioapic</a>(<a class=\"id\" href=\"#ioapic\">ioapic</a>-><a class=\"id\" href=\"#handle\">handle</a>, <a class=\"id\" href=\"#ioapic\">ioapic</a>-><a class=\"id\" href=\"#gsi_base\">gsi_base</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_release_region\">pci_release_region</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_disable_device\">pci_disable_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#ioapic\">ioapic</a>);", 
"}", 
"", 
"", 
"static struct <a class=\"id\" href=\"#pci_device_id\">pci_device_id</a> <a class=\"id\" href=\"#ioapic_devices\">ioapic_devices</a>[] = {", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_ANY_ID\">PCI_ANY_ID</a>, <a class=\"id\" href=\"#PCI_ANY_ID\">PCI_ANY_ID</a>, <a class=\"id\" href=\"#PCI_ANY_ID\">PCI_ANY_ID</a>, <a class=\"id\" href=\"#PCI_ANY_ID\">PCI_ANY_ID</a>,", 
"<span class=\"ts\"/>  <a class=\"id\" href=\"#PCI_CLASS_SYSTEM_PIC_IOAPIC\">PCI_CLASS_SYSTEM_PIC_IOAPIC</a> << 8, 0xffff00, },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_ANY_ID\">PCI_ANY_ID</a>, <a class=\"id\" href=\"#PCI_ANY_ID\">PCI_ANY_ID</a>, <a class=\"id\" href=\"#PCI_ANY_ID\">PCI_ANY_ID</a>, <a class=\"id\" href=\"#PCI_ANY_ID\">PCI_ANY_ID</a>,", 
"<span class=\"ts\"/>  <a class=\"id\" href=\"#PCI_CLASS_SYSTEM_PIC_IOXAPIC\">PCI_CLASS_SYSTEM_PIC_IOXAPIC</a> << 8, 0xffff00, },", 
"<span class=\"ts\"/>{ }", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#pci_driver\">pci_driver</a> <a class=\"id\" href=\"#ioapic_driver\">ioapic_driver</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a><span class=\"ts\"/><span class=\"ts\"/>= \"ioapic\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#id_table\">id_table</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ioapic_devices\">ioapic_devices</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#probe\">probe</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ioapic_probe\">ioapic_probe</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#remove\">remove</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#__devexit_p\">__devexit_p</a>(<a class=\"id\" href=\"#ioapic_remove\">ioapic_remove</a>),", 
"};", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#ioapic_init\">ioapic_init</a>(void)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#pci_register_driver\">pci_register_driver</a>(&amp;<a class=\"id\" href=\"#ioapic_driver\">ioapic_driver</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#__exit\">__exit</a> <a class=\"id\" href=\"#ioapic_exit\">ioapic_exit</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_unregister_driver\">pci_unregister_driver</a>(&amp;<a class=\"id\" href=\"#ioapic_driver\">ioapic_driver</a>);", 
"}", 
"", 
"<a class=\"id\" href=\"#module_init\">module_init</a>(<a class=\"id\" href=\"#ioapic_init\">ioapic_init</a>);", 
"<a class=\"id\" href=\"#module_exit\">module_exit</a>(<a class=\"id\" href=\"#ioapic_exit\">ioapic_exit</a>);", 
];
xr_frag_insert('l/4d/9fcbea3fc76d30b5648e9b492dd993d618d011.xr', __xr_tmp);
