var __xr_tmp = [
"<span class=\"ts\"/>}", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>sysfs_find_dirent - find sysfs_dirent with the given name</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@parent_sd: sysfs_dirent to search under</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@name: name to look for</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Look for sysfs_dirent with name @name under @parent_sd.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>LOCKING:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>mutex_lock(sysfs_mutex)</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>RETURNS:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Pointer to sysfs_dirent if found, NULL if not.</span>", 
"<span class=\"comment\"> */</span>", 
"struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#sysfs_find_dirent\">sysfs_find_dirent</a>(struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#parent_sd\">parent_sd</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       const void *<a class=\"id\" href=\"#ns\">ns</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       const unsigned char *<a class=\"id\" href=\"#name\">name</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#sd\">sd</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#parent_sd\">parent_sd</a>-><a class=\"id\" href=\"#s_dir\">s_dir</a>.<a class=\"id\" href=\"#children\">children</a>; <a class=\"id\" href=\"#sd\">sd</a>; <a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_sibling\">s_sibling</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ns\">ns</a> && <a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_ns\">s_ns</a> && (<a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_ns\">s_ns</a> != <a class=\"id\" href=\"#ns\">ns</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#strcmp\">strcmp</a>(<a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_name\">s_name</a>, <a class=\"id\" href=\"#name\">name</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#sd\">sd</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>sysfs_get_dirent - find and get sysfs_dirent with the given name</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@parent_sd: sysfs_dirent to search under</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@name: name to look for</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Look for sysfs_dirent with name @name under @parent_sd and get</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>it if found.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>LOCKING:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Kernel thread context (may sleep).  Grabs sysfs_mutex.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>RETURNS:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Pointer to sysfs_dirent if found, NULL if not.</span>", 
"<span class=\"comment\"> */</span>", 
"struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#sysfs_get_dirent\">sysfs_get_dirent</a>(struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#parent_sd\">parent_sd</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      const void *<a class=\"id\" href=\"#ns\">ns</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      const unsigned char *<a class=\"id\" href=\"#name\">name</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#sd\">sd</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#sysfs_mutex\">sysfs_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#sysfs_find_dirent\">sysfs_find_dirent</a>(<a class=\"id\" href=\"#parent_sd\">parent_sd</a>, <a class=\"id\" href=\"#ns\">ns</a>, <a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_get\">sysfs_get</a>(<a class=\"id\" href=\"#sd\">sd</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#sysfs_mutex\">sysfs_mutex</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sd\">sd</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#sysfs_get_dirent\">sysfs_get_dirent</a>);", 
"", 
"static int <a class=\"id\" href=\"#create_dir\">create_dir</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>, struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#parent_sd\">parent_sd</a>,", 
"<span class=\"ts\"/>enum <a class=\"id\" href=\"#kobj_ns_type\">kobj_ns_type</a> <a class=\"id\" href=\"#type\">type</a>, const void *<a class=\"id\" href=\"#ns\">ns</a>, const char *<a class=\"id\" href=\"#name\">name</a>,", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> **<a class=\"id\" href=\"#p_sd\">p_sd</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#umode_t\">umode_t</a> <a class=\"id\" href=\"#mode\">mode</a> = <a class=\"id\" href=\"#S_IFDIR\">S_IFDIR</a>| <a class=\"id\" href=\"#S_IRWXU\">S_IRWXU</a> | <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a> | <a class=\"id\" href=\"#S_IXUGO\">S_IXUGO</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_addrm_cxt\">sysfs_addrm_cxt</a> <a class=\"id\" href=\"#acxt\">acxt</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#sd\">sd</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rc\">rc</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* allocate */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#sysfs_new_dirent\">sysfs_new_dirent</a>(<a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#mode\">mode</a>, <a class=\"id\" href=\"#SYSFS_DIR\">SYSFS_DIR</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#sd\">sd</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_flags\">s_flags</a> |= (<a class=\"id\" href=\"#type\">type</a> << <a class=\"id\" href=\"#SYSFS_NS_TYPE_SHIFT\">SYSFS_NS_TYPE_SHIFT</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_ns\">s_ns</a> = <a class=\"id\" href=\"#ns\">ns</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_dir\">s_dir</a>.<a class=\"id\" href=\"#kobj\">kobj</a> = <a class=\"id\" href=\"#kobj\">kobj</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* link in */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_addrm_start\">sysfs_addrm_start</a>(&amp;<a class=\"id\" href=\"#acxt\">acxt</a>, <a class=\"id\" href=\"#parent_sd\">parent_sd</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#sysfs_add_one\">sysfs_add_one</a>(&amp;<a class=\"id\" href=\"#acxt\">acxt</a>, <a class=\"id\" href=\"#sd\">sd</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_addrm_finish\">sysfs_addrm_finish</a>(&amp;<a class=\"id\" href=\"#acxt\">acxt</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#p_sd\">p_sd</a> = <a class=\"id\" href=\"#sd\">sd</a>;", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sysfs_put\">sysfs_put</a>(<a class=\"id\" href=\"#sd\">sd</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#rc\">rc</a>;", 
"}", 
"", 
"int <a class=\"id\" href=\"#sysfs_create_subdir\">sysfs_create_subdir</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>, const char *<a class=\"id\" href=\"#name\">name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> **<a class=\"id\" href=\"#p_sd\">p_sd</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#create_dir\">create_dir</a>(<a class=\"id\" href=\"#kobj\">kobj</a>, <a class=\"id\" href=\"#kobj\">kobj</a>-><a class=\"id\" href=\"#sd\">sd</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#KOBJ_NS_TYPE_NONE\">KOBJ_NS_TYPE_NONE</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#p_sd\">p_sd</a>);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>sysfs_read_ns_type: return associated ns_type</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@kobj: the kobject being queried</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Each kobject can be tagged with exactly one namespace type</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>(i.e. network or user).  Return the ns_type associated with</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>this object if any</span>", 
"<span class=\"comment\"> */</span>", 
"static enum <a class=\"id\" href=\"#kobj_ns_type\">kobj_ns_type</a> <a class=\"id\" href=\"#sysfs_read_ns_type\">sysfs_read_ns_type</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>)", 
"{", 
"<span class=\"ts\"/>const struct <a class=\"id\" href=\"#kobj_ns_type_operations\">kobj_ns_type_operations</a> *<a class=\"id\" href=\"#ops\">ops</a>;", 
"<span class=\"ts\"/>enum <a class=\"id\" href=\"#kobj_ns_type\">kobj_ns_type</a> <a class=\"id\" href=\"#type\">type</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ops\">ops</a> = <a class=\"id\" href=\"#kobj_child_ns_ops\">kobj_child_ns_ops</a>(<a class=\"id\" href=\"#kobj\">kobj</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#ops\">ops</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#KOBJ_NS_TYPE_NONE\">KOBJ_NS_TYPE_NONE</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#type\">type</a> = <a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#type\">type</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#BUG_ON\">BUG_ON</a>(<a class=\"id\" href=\"#type\">type</a> <= <a class=\"id\" href=\"#KOBJ_NS_TYPE_NONE\">KOBJ_NS_TYPE_NONE</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#BUG_ON\">BUG_ON</a>(<a class=\"id\" href=\"#type\">type</a> >= <a class=\"id\" href=\"#KOBJ_NS_TYPES\">KOBJ_NS_TYPES</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#BUG_ON\">BUG_ON</a>(!<a class=\"id\" href=\"#kobj_ns_type_registered\">kobj_ns_type_registered</a>(<a class=\"id\" href=\"#type\">type</a>));", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#type\">type</a>;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>sysfs_create_dir - create a directory for an object.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@kobj:<span class=\"ts\"/><span class=\"ts\"/>object we're creating directory for. </span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#sysfs_create_dir\">sysfs_create_dir</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> * <a class=\"id\" href=\"#kobj\">kobj</a>)", 
"{", 
"<span class=\"ts\"/>enum <a class=\"id\" href=\"#kobj_ns_type\">kobj_ns_type</a> <a class=\"id\" href=\"#type\">type</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#parent_sd\">parent_sd</a>, *<a class=\"id\" href=\"#sd\">sd</a>;", 
"<span class=\"ts\"/>const void *<a class=\"id\" href=\"#ns\">ns</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a> = 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#BUG_ON\">BUG_ON</a>(!<a class=\"id\" href=\"#kobj\">kobj</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#kobj\">kobj</a>-><a class=\"id\" href=\"#parent\">parent</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#parent_sd\">parent_sd</a> = <a class=\"id\" href=\"#kobj\">kobj</a>-><a class=\"id\" href=\"#parent\">parent</a>-><a class=\"id\" href=\"#sd\">sd</a>;", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#parent_sd\">parent_sd</a> = &amp;<a class=\"id\" href=\"#sysfs_root\">sysfs_root</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sysfs_ns_type\">sysfs_ns_type</a>(<a class=\"id\" href=\"#parent_sd\">parent_sd</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ns\">ns</a> = <a class=\"id\" href=\"#kobj\">kobj</a>-><a class=\"id\" href=\"#ktype\">ktype</a>-><a class=\"id\" href=\"#namespace\">namespace</a>(<a class=\"id\" href=\"#kobj\">kobj</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#type\">type</a> = <a class=\"id\" href=\"#sysfs_read_ns_type\">sysfs_read_ns_type</a>(<a class=\"id\" href=\"#kobj\">kobj</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#create_dir\">create_dir</a>(<a class=\"id\" href=\"#kobj\">kobj</a>, <a class=\"id\" href=\"#parent_sd\">parent_sd</a>, <a class=\"id\" href=\"#type\">type</a>, <a class=\"id\" href=\"#ns\">ns</a>, <a class=\"id\" href=\"#kobject_name\">kobject_name</a>(<a class=\"id\" href=\"#kobj\">kobj</a>), &amp;<a class=\"id\" href=\"#sd\">sd</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#error\">error</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kobj\">kobj</a>-><a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#sd\">sd</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#dentry\">dentry</a> * <a class=\"id\" href=\"#sysfs_lookup\">sysfs_lookup</a>(struct <a class=\"id\" href=\"#inode\">inode</a> *<a class=\"id\" href=\"#dir\">dir</a>, struct <a class=\"id\" href=\"#dentry\">dentry</a> *<a class=\"id\" href=\"#dentry\">dentry</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#nameidata\">nameidata</a> *<a class=\"id\" href=\"#nd\">nd</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#dentry\">dentry</a> *<a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#dentry\">dentry</a> *<a class=\"id\" href=\"#parent\">parent</a> = <a class=\"id\" href=\"#dentry\">dentry</a>-><a class=\"id\" href=\"#d_parent\">d_parent</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#parent_sd\">parent_sd</a> = <a class=\"id\" href=\"#parent\">parent</a>-><a class=\"id\" href=\"#d_fsdata\">d_fsdata</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#sd\">sd</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#inode\">inode</a> *<a class=\"id\" href=\"#inode\">inode</a>;", 
"<span class=\"ts\"/>enum <a class=\"id\" href=\"#kobj_ns_type\">kobj_ns_type</a> <a class=\"id\" href=\"#type\">type</a>;", 
"<span class=\"ts\"/>const void *<a class=\"id\" href=\"#ns\">ns</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#sysfs_mutex\">sysfs_mutex</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#type\">type</a> = <a class=\"id\" href=\"#sysfs_ns_type\">sysfs_ns_type</a>(<a class=\"id\" href=\"#parent_sd\">parent_sd</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ns\">ns</a> = <a class=\"id\" href=\"#sysfs_info\">sysfs_info</a>(<a class=\"id\" href=\"#dir\">dir</a>-><a class=\"id\" href=\"#i_sb\">i_sb</a>)-><a class=\"id\" href=\"#ns\">ns</a>[<a class=\"id\" href=\"#type\">type</a>];", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#sysfs_find_dirent\">sysfs_find_dirent</a>(<a class=\"id\" href=\"#parent_sd\">parent_sd</a>, <a class=\"id\" href=\"#ns\">ns</a>, <a class=\"id\" href=\"#dentry\">dentry</a>-><a class=\"id\" href=\"#d_name\">d_name</a>.<a class=\"id\" href=\"#name\">name</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* no such entry */</span>", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#sd\">sd</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(-<a class=\"id\" href=\"#ENOENT\">ENOENT</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out_unlock\">out_unlock</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* attach dentry and inode */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#inode\">inode</a> = <a class=\"id\" href=\"#sysfs_get_inode\">sysfs_get_inode</a>(<a class=\"id\" href=\"#dir\">dir</a>-><a class=\"id\" href=\"#i_sb\">i_sb</a>, <a class=\"id\" href=\"#sd\">sd</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#inode\">inode</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(-<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out_unlock\">out_unlock</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* instantiate and hash dentry */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#d_find_alias\">d_find_alias</a>(<a class=\"id\" href=\"#inode\">inode</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#ret\">ret</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dentry\">dentry</a>-><a class=\"id\" href=\"#d_op\">d_op</a> = &amp;<a class=\"id\" href=\"#sysfs_dentry_ops\">sysfs_dentry_ops</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dentry\">dentry</a>-><a class=\"id\" href=\"#d_fsdata\">d_fsdata</a> = <a class=\"id\" href=\"#sysfs_get\">sysfs_get</a>(<a class=\"id\" href=\"#sd\">sd</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#d_add\">d_add</a>(<a class=\"id\" href=\"#dentry\">dentry</a>, <a class=\"id\" href=\"#inode\">inode</a>);", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#d_move\">d_move</a>(<a class=\"id\" href=\"#ret\">ret</a>, <a class=\"id\" href=\"#dentry\">dentry</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#iput\">iput</a>(<a class=\"id\" href=\"#inode\">inode</a>);", 
"<span class=\"ts\"/>}", 
"", 
" <a class=\"id\" href=\"#out_unlock\">out_unlock</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#sysfs_mutex\">sysfs_mutex</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"", 
"const struct <a class=\"id\" href=\"#inode_operations\">inode_operations</a> <a class=\"id\" href=\"#sysfs_dir_inode_operations\">sysfs_dir_inode_operations</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#lookup\">lookup</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sysfs_lookup\">sysfs_lookup</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#permission\">permission</a><span class=\"ts\"/>= <a class=\"id\" href=\"#sysfs_permission\">sysfs_permission</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#setattr\">setattr</a><span class=\"ts\"/>= <a class=\"id\" href=\"#sysfs_setattr\">sysfs_setattr</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#getattr\">getattr</a><span class=\"ts\"/>= <a class=\"id\" href=\"#sysfs_getattr\">sysfs_getattr</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#setxattr\">setxattr</a><span class=\"ts\"/>= <a class=\"id\" href=\"#sysfs_setxattr\">sysfs_setxattr</a>,", 
"};", 
"", 
"static void <a class=\"id\" href=\"#remove_dir\">remove_dir</a>(struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#sd\">sd</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_addrm_cxt\">sysfs_addrm_cxt</a> <a class=\"id\" href=\"#acxt\">acxt</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_addrm_start\">sysfs_addrm_start</a>(&amp;<a class=\"id\" href=\"#acxt\">acxt</a>, <a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_remove_one\">sysfs_remove_one</a>(&amp;<a class=\"id\" href=\"#acxt\">acxt</a>, <a class=\"id\" href=\"#sd\">sd</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_addrm_finish\">sysfs_addrm_finish</a>(&amp;<a class=\"id\" href=\"#acxt\">acxt</a>);", 
"}", 
"", 
"void <a class=\"id\" href=\"#sysfs_remove_subdir\">sysfs_remove_subdir</a>(struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#sd\">sd</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#remove_dir\">remove_dir</a>(<a class=\"id\" href=\"#sd\">sd</a>);", 
"}", 
"", 
"", 
"static void <a class=\"id\" href=\"#__sysfs_remove_dir\">__sysfs_remove_dir</a>(struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#dir_sd\">dir_sd</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_addrm_cxt\">sysfs_addrm_cxt</a> <a class=\"id\" href=\"#acxt\">acxt</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> **<a class=\"id\" href=\"#pos\">pos</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#dir_sd\">dir_sd</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pr_debug\">pr_debug</a>(\"sysfs %s: removing dir\\n\", <a class=\"id\" href=\"#dir_sd\">dir_sd</a>-><a class=\"id\" href=\"#s_name\">s_name</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_addrm_start\">sysfs_addrm_start</a>(&amp;<a class=\"id\" href=\"#acxt\">acxt</a>, <a class=\"id\" href=\"#dir_sd\">dir_sd</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pos\">pos</a> = &amp;<a class=\"id\" href=\"#dir_sd\">dir_sd</a>-><a class=\"id\" href=\"#s_dir\">s_dir</a>.<a class=\"id\" href=\"#children\">children</a>;", 
"<span class=\"ts\"/>while (*<a class=\"id\" href=\"#pos\">pos</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#sd\">sd</a> = *<a class=\"id\" href=\"#pos\">pos</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#sysfs_type\">sysfs_type</a>(<a class=\"id\" href=\"#sd\">sd</a>) != <a class=\"id\" href=\"#SYSFS_DIR\">SYSFS_DIR</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sysfs_remove_one\">sysfs_remove_one</a>(&amp;<a class=\"id\" href=\"#acxt\">acxt</a>, <a class=\"id\" href=\"#sd\">sd</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pos\">pos</a> = &amp;(*<a class=\"id\" href=\"#pos\">pos</a>)-><a class=\"id\" href=\"#s_sibling\">s_sibling</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_addrm_finish\">sysfs_addrm_finish</a>(&amp;<a class=\"id\" href=\"#acxt\">acxt</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#remove_dir\">remove_dir</a>(<a class=\"id\" href=\"#dir_sd\">dir_sd</a>);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>sysfs_remove_dir - remove an object's directory.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@kobj:<span class=\"ts\"/>object.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>The only thing special about this is that we remove any files in</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>the directory before we remove the directory, and we've inlined</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>what used to be sysfs_rmdir() below, instead of calling separately.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"void <a class=\"id\" href=\"#sysfs_remove_dir\">sysfs_remove_dir</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> * <a class=\"id\" href=\"#kobj\">kobj</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#kobj\">kobj</a>-><a class=\"id\" href=\"#sd\">sd</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock\">spin_lock</a>(&amp;<a class=\"id\" href=\"#sysfs_assoc_lock\">sysfs_assoc_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kobj\">kobj</a>-><a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock\">spin_unlock</a>(&amp;<a class=\"id\" href=\"#sysfs_assoc_lock\">sysfs_assoc_lock</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__sysfs_remove_dir\">__sysfs_remove_dir</a>(<a class=\"id\" href=\"#sd\">sd</a>);", 
"}", 
"", 
"int <a class=\"id\" href=\"#sysfs_rename\">sysfs_rename</a>(struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#sd\">sd</a>,", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#new_parent_sd\">new_parent_sd</a>, const void *<a class=\"id\" href=\"#new_ns\">new_ns</a>,", 
"<span class=\"ts\"/>const char *<a class=\"id\" href=\"#new_name\">new_name</a>)", 
"{", 
"<span class=\"ts\"/>const char *<a class=\"id\" href=\"#dup_name\">dup_name</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#sysfs_mutex\">sysfs_mutex</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = 0;", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a> == <a class=\"id\" href=\"#new_parent_sd\">new_parent_sd</a>) && (<a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_ns\">s_ns</a> == <a class=\"id\" href=\"#new_ns\">new_ns</a>) &&", 
"<span class=\"ts\"/>    (<a class=\"id\" href=\"#strcmp\">strcmp</a>(<a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_name\">s_name</a>, <a class=\"id\" href=\"#new_name\">new_name</a>) == 0))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;<span class=\"ts\"/><span class=\"comment\">/* nothing to rename */</span>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = -<a class=\"id\" href=\"#EEXIST\">EEXIST</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sysfs_find_dirent\">sysfs_find_dirent</a>(<a class=\"id\" href=\"#new_parent_sd\">new_parent_sd</a>, <a class=\"id\" href=\"#new_ns\">new_ns</a>, <a class=\"id\" href=\"#new_name\">new_name</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* rename sysfs_dirent */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#strcmp\">strcmp</a>(<a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_name\">s_name</a>, <a class=\"id\" href=\"#new_name\">new_name</a>) != 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_name\">new_name</a> = <a class=\"id\" href=\"#dup_name\">dup_name</a> = <a class=\"id\" href=\"#kstrdup\">kstrdup</a>(<a class=\"id\" href=\"#new_name\">new_name</a>, <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#new_name\">new_name</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dup_name\">dup_name</a> = <a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_name\">s_name</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_name\">s_name</a> = <a class=\"id\" href=\"#new_name\">new_name</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Remove from old parent's list and insert into new parent's list. */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a> != <a class=\"id\" href=\"#new_parent_sd\">new_parent_sd</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sysfs_unlink_sibling\">sysfs_unlink_sibling</a>(<a class=\"id\" href=\"#sd\">sd</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sysfs_get\">sysfs_get</a>(<a class=\"id\" href=\"#new_parent_sd\">new_parent_sd</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sysfs_put\">sysfs_put</a>(<a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a> = <a class=\"id\" href=\"#new_parent_sd\">new_parent_sd</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sysfs_link_sibling\">sysfs_link_sibling</a>(<a class=\"id\" href=\"#sd\">sd</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_ns\">s_ns</a> = <a class=\"id\" href=\"#new_ns\">new_ns</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = 0;", 
" <a class=\"id\" href=\"#out\">out</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#sysfs_mutex\">sysfs_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#dup_name\">dup_name</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"}", 
"", 
"int <a class=\"id\" href=\"#sysfs_rename_dir\">sysfs_rename_dir</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>, const char *<a class=\"id\" href=\"#new_name\">new_name</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#parent_sd\">parent_sd</a> = <a class=\"id\" href=\"#kobj\">kobj</a>-><a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a>;", 
"<span class=\"ts\"/>const void *<a class=\"id\" href=\"#new_ns\">new_ns</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sysfs_ns_type\">sysfs_ns_type</a>(<a class=\"id\" href=\"#parent_sd\">parent_sd</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_ns\">new_ns</a> = <a class=\"id\" href=\"#kobj\">kobj</a>-><a class=\"id\" href=\"#ktype\">ktype</a>-><a class=\"id\" href=\"#namespace\">namespace</a>(<a class=\"id\" href=\"#kobj\">kobj</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sysfs_rename\">sysfs_rename</a>(<a class=\"id\" href=\"#kobj\">kobj</a>-><a class=\"id\" href=\"#sd\">sd</a>, <a class=\"id\" href=\"#parent_sd\">parent_sd</a>, <a class=\"id\" href=\"#new_ns\">new_ns</a>, <a class=\"id\" href=\"#new_name\">new_name</a>);", 
"}", 
"", 
"int <a class=\"id\" href=\"#sysfs_move_dir\">sysfs_move_dir</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>, struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#new_parent_kobj\">new_parent_kobj</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#sd\">sd</a> = <a class=\"id\" href=\"#kobj\">kobj</a>-><a class=\"id\" href=\"#sd\">sd</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#new_parent_sd\">new_parent_sd</a>;", 
"<span class=\"ts\"/>const void *<a class=\"id\" href=\"#new_ns\">new_ns</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#BUG_ON\">BUG_ON</a>(!<a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sysfs_ns_type\">sysfs_ns_type</a>(<a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_ns\">new_ns</a> = <a class=\"id\" href=\"#kobj\">kobj</a>-><a class=\"id\" href=\"#ktype\">ktype</a>-><a class=\"id\" href=\"#namespace\">namespace</a>(<a class=\"id\" href=\"#kobj\">kobj</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#new_parent_sd\">new_parent_sd</a> = <a class=\"id\" href=\"#new_parent_kobj\">new_parent_kobj</a> && <a class=\"id\" href=\"#new_parent_kobj\">new_parent_kobj</a>-><a class=\"id\" href=\"#sd\">sd</a> ?", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_parent_kobj\">new_parent_kobj</a>-><a class=\"id\" href=\"#sd\">sd</a> : &amp;<a class=\"id\" href=\"#sysfs_root\">sysfs_root</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sysfs_rename\">sysfs_rename</a>(<a class=\"id\" href=\"#sd\">sd</a>, <a class=\"id\" href=\"#new_parent_sd\">new_parent_sd</a>, <a class=\"id\" href=\"#new_ns\">new_ns</a>, <a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_name\">s_name</a>);", 
"}", 
"", 
"<span class=\"comment\">/* Relationship between s_mode and the DT_xxx types */</span>", 
"static <a class=\"id\" href=\"#inline\">inline</a> unsigned char <a class=\"id\" href=\"#dt_type\">dt_type</a>(struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#sd\">sd</a>)", 
"{", 
"<span class=\"ts\"/>return (<a class=\"id\" href=\"#sd\">sd</a>-><a class=\"id\" href=\"#s_mode\">s_mode</a> >> 12) &amp; 15;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#sysfs_dir_release\">sysfs_dir_release</a>(struct <a class=\"id\" href=\"#inode\">inode</a> *<a class=\"id\" href=\"#inode\">inode</a>, struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#filp\">filp</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_put\">sysfs_put</a>(<a class=\"id\" href=\"#filp\">filp</a>-><a class=\"id\" href=\"#private_data\">private_data</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#sysfs_dir_pos\">sysfs_dir_pos</a>(const void *<a class=\"id\" href=\"#ns\">ns</a>,", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#parent_sd\">parent_sd</a>,<span class=\"ts\"/><a class=\"id\" href=\"#ino_t\">ino_t</a> <a class=\"id\" href=\"#ino\">ino</a>, struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#pos\">pos</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pos\">pos</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#valid\">valid</a> = !(<a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#s_flags\">s_flags</a> &amp; <a class=\"id\" href=\"#SYSFS_FLAG_REMOVED\">SYSFS_FLAG_REMOVED</a>) &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a> == <a class=\"id\" href=\"#parent_sd\">parent_sd</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ino\">ino</a> == <a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#s_ino\">s_ino</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sysfs_put\">sysfs_put</a>(<a class=\"id\" href=\"#pos\">pos</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#valid\">valid</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pos\">pos</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#pos\">pos</a> && (<a class=\"id\" href=\"#ino\">ino</a> &gt; 1) && (<a class=\"id\" href=\"#ino\">ino</a> &lt; <a class=\"id\" href=\"#INT_MAX\">INT_MAX</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pos\">pos</a> = <a class=\"id\" href=\"#parent_sd\">parent_sd</a>-><a class=\"id\" href=\"#s_dir\">s_dir</a>.<a class=\"id\" href=\"#children\">children</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>while (<a class=\"id\" href=\"#pos\">pos</a> && (<a class=\"id\" href=\"#ino\">ino</a> &gt; <a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#s_ino\">s_ino</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pos\">pos</a> = <a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#s_sibling\">s_sibling</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#pos\">pos</a> && <a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#s_ns\">s_ns</a> && <a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#s_ns\">s_ns</a> != <a class=\"id\" href=\"#ns\">ns</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pos\">pos</a> = <a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#s_sibling\">s_sibling</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#pos\">pos</a>;", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#sysfs_dir_next_pos\">sysfs_dir_next_pos</a>(const void *<a class=\"id\" href=\"#ns\">ns</a>,", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#parent_sd\">parent_sd</a>,<span class=\"ts\"/><a class=\"id\" href=\"#ino_t\">ino_t</a> <a class=\"id\" href=\"#ino\">ino</a>, struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#pos\">pos</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pos\">pos</a> = <a class=\"id\" href=\"#sysfs_dir_pos\">sysfs_dir_pos</a>(<a class=\"id\" href=\"#ns\">ns</a>, <a class=\"id\" href=\"#parent_sd\">parent_sd</a>, <a class=\"id\" href=\"#ino\">ino</a>, <a class=\"id\" href=\"#pos\">pos</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pos\">pos</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pos\">pos</a> = <a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#s_sibling\">s_sibling</a>;", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#pos\">pos</a> && <a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#s_ns\">s_ns</a> && <a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#s_ns\">s_ns</a> != <a class=\"id\" href=\"#ns\">ns</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pos\">pos</a> = <a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#s_sibling\">s_sibling</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#pos\">pos</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#sysfs_readdir\">sysfs_readdir</a>(struct <a class=\"id\" href=\"#file\">file</a> * <a class=\"id\" href=\"#filp\">filp</a>, void * <a class=\"id\" href=\"#dirent\">dirent</a>, <a class=\"id\" href=\"#filldir_t\">filldir_t</a> <a class=\"id\" href=\"#filldir\">filldir</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#dentry\">dentry</a> *<a class=\"id\" href=\"#dentry\">dentry</a> = <a class=\"id\" href=\"#filp\">filp</a>-><a class=\"id\" href=\"#f_path\">f_path</a>.<a class=\"id\" href=\"#dentry\">dentry</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> * <a class=\"id\" href=\"#parent_sd\">parent_sd</a> = <a class=\"id\" href=\"#dentry\">dentry</a>-><a class=\"id\" href=\"#d_fsdata\">d_fsdata</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysfs_dirent\">sysfs_dirent</a> *<a class=\"id\" href=\"#pos\">pos</a> = <a class=\"id\" href=\"#filp\">filp</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>enum <a class=\"id\" href=\"#kobj_ns_type\">kobj_ns_type</a> <a class=\"id\" href=\"#type\">type</a>;", 
"<span class=\"ts\"/>const void *<a class=\"id\" href=\"#ns\">ns</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ino_t\">ino_t</a> <a class=\"id\" href=\"#ino\">ino</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#type\">type</a> = <a class=\"id\" href=\"#sysfs_ns_type\">sysfs_ns_type</a>(<a class=\"id\" href=\"#parent_sd\">parent_sd</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ns\">ns</a> = <a class=\"id\" href=\"#sysfs_info\">sysfs_info</a>(<a class=\"id\" href=\"#dentry\">dentry</a>-><a class=\"id\" href=\"#d_sb\">d_sb</a>)-><a class=\"id\" href=\"#ns\">ns</a>[<a class=\"id\" href=\"#type\">type</a>];", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#filp\">filp</a>-><a class=\"id\" href=\"#f_pos\">f_pos</a> == 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ino\">ino</a> = <a class=\"id\" href=\"#parent_sd\">parent_sd</a>-><a class=\"id\" href=\"#s_ino\">s_ino</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#filldir\">filldir</a>(<a class=\"id\" href=\"#dirent\">dirent</a>, \".\", 1, <a class=\"id\" href=\"#filp\">filp</a>-><a class=\"id\" href=\"#f_pos\">f_pos</a>, <a class=\"id\" href=\"#ino\">ino</a>, <a class=\"id\" href=\"#DT_DIR\">DT_DIR</a>) == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#filp\">filp</a>-><a class=\"id\" href=\"#f_pos\">f_pos</a>++;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#filp\">filp</a>-><a class=\"id\" href=\"#f_pos\">f_pos</a> == 1) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#parent_sd\">parent_sd</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ino\">ino</a> = <a class=\"id\" href=\"#parent_sd\">parent_sd</a>-><a class=\"id\" href=\"#s_parent\">s_parent</a>-><a class=\"id\" href=\"#s_ino\">s_ino</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ino\">ino</a> = <a class=\"id\" href=\"#parent_sd\">parent_sd</a>-><a class=\"id\" href=\"#s_ino\">s_ino</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#filldir\">filldir</a>(<a class=\"id\" href=\"#dirent\">dirent</a>, \"..\", 2, <a class=\"id\" href=\"#filp\">filp</a>-><a class=\"id\" href=\"#f_pos\">f_pos</a>, <a class=\"id\" href=\"#ino\">ino</a>, <a class=\"id\" href=\"#DT_DIR\">DT_DIR</a>) == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#filp\">filp</a>-><a class=\"id\" href=\"#f_pos\">f_pos</a>++;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#sysfs_mutex\">sysfs_mutex</a>);", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#pos\">pos</a> = <a class=\"id\" href=\"#sysfs_dir_pos\">sysfs_dir_pos</a>(<a class=\"id\" href=\"#ns\">ns</a>, <a class=\"id\" href=\"#parent_sd\">parent_sd</a>, <a class=\"id\" href=\"#filp\">filp</a>-><a class=\"id\" href=\"#f_pos\">f_pos</a>, <a class=\"id\" href=\"#pos\">pos</a>);", 
"<span class=\"ts\"/>     <a class=\"id\" href=\"#pos\">pos</a>;", 
"<span class=\"ts\"/>     <a class=\"id\" href=\"#pos\">pos</a> = <a class=\"id\" href=\"#sysfs_dir_next_pos\">sysfs_dir_next_pos</a>(<a class=\"id\" href=\"#ns\">ns</a>, <a class=\"id\" href=\"#parent_sd\">parent_sd</a>, <a class=\"id\" href=\"#filp\">filp</a>-><a class=\"id\" href=\"#f_pos\">f_pos</a>, <a class=\"id\" href=\"#pos\">pos</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>const char * <a class=\"id\" href=\"#name\">name</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#type\">type</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#len\">len</a>, <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#name\">name</a> = <a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#s_name\">s_name</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a> = <a class=\"id\" href=\"#strlen\">strlen</a>(<a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ino\">ino</a> = <a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#s_ino\">s_ino</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#type\">type</a> = <a class=\"id\" href=\"#dt_type\">dt_type</a>(<a class=\"id\" href=\"#pos\">pos</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#filp\">filp</a>-><a class=\"id\" href=\"#f_pos\">f_pos</a> = <a class=\"id\" href=\"#ino\">ino</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#filp\">filp</a>-><a class=\"id\" href=\"#private_data\">private_data</a> = <a class=\"id\" href=\"#sysfs_get\">sysfs_get</a>(<a class=\"id\" href=\"#pos\">pos</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#sysfs_mutex\">sysfs_mutex</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#filldir\">filldir</a>(<a class=\"id\" href=\"#dirent\">dirent</a>, <a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#len\">len</a>, <a class=\"id\" href=\"#filp\">filp</a>-><a class=\"id\" href=\"#f_pos\">f_pos</a>, <a class=\"id\" href=\"#ino\">ino</a>, <a class=\"id\" href=\"#type\">type</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#sysfs_mutex\">sysfs_mutex</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#sysfs_mutex\">sysfs_mutex</a>);", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#filp\">filp</a>-><a class=\"id\" href=\"#f_pos\">f_pos</a> &gt; 1) && !<a class=\"id\" href=\"#pos\">pos</a>) { <span class=\"comment\">/* EOF */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#filp\">filp</a>-><a class=\"id\" href=\"#f_pos\">f_pos</a> = <a class=\"id\" href=\"#INT_MAX\">INT_MAX</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#filp\">filp</a>-><a class=\"id\" href=\"#private_data\">private_data</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"", 
"const struct <a class=\"id\" href=\"#file_operations\">file_operations</a> <a class=\"id\" href=\"#sysfs_dir_operations\">sysfs_dir_operations</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#read\">read</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#generic_read_dir\">generic_read_dir</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#readdir\">readdir</a><span class=\"ts\"/>= <a class=\"id\" href=\"#sysfs_readdir\">sysfs_readdir</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#release\">release</a><span class=\"ts\"/>= <a class=\"id\" href=\"#sysfs_dir_release\">sysfs_dir_release</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#llseek\">llseek</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#generic_file_llseek\">generic_file_llseek</a>,", 
"};", 
];
xr_frag_insert('l/53/8b368ef898b429a932c051d4df67013dfc0a7a.xr', __xr_tmp);
