var __xr_tmp = [
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * If seek is expensive, start searching for new cluster from</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * start of partition, to minimize the span of allocated swap.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * But if seek is cheap, search from our current position, so</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * that swap is allocated from all over the partition: if the</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * Flash Translation Layer only remaps within limited zones,</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * we don't want to wear out the first zone too quickly.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!(<a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#SWP_SOLIDSTATE\">SWP_SOLIDSTATE</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#scan_base\">scan_base</a> = <a class=\"id\" href=\"#offset\">offset</a> = <a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#lowest_bit\">lowest_bit</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#last_in_cluster\">last_in_cluster</a> = <a class=\"id\" href=\"#offset\">offset</a> + <a class=\"id\" href=\"#SWAPFILE_CLUSTER\">SWAPFILE_CLUSTER</a> - 1;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Locate the first empty (unaligned) cluster */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>for (; <a class=\"id\" href=\"#last_in_cluster\">last_in_cluster</a> <= <a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#highest_bit\">highest_bit</a>; <a class=\"id\" href=\"#offset\">offset</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#swap_map\">swap_map</a>[<a class=\"id\" href=\"#offset\">offset</a>])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#last_in_cluster\">last_in_cluster</a> = <a class=\"id\" href=\"#offset\">offset</a> + <a class=\"id\" href=\"#SWAPFILE_CLUSTER\">SWAPFILE_CLUSTER</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#offset\">offset</a> == <a class=\"id\" href=\"#last_in_cluster\">last_in_cluster</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_lock\">spin_lock</a>(&amp;<a class=\"id\" href=\"#swap_lock\">swap_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#offset\">offset</a> -= <a class=\"id\" href=\"#SWAPFILE_CLUSTER\">SWAPFILE_CLUSTER</a> - 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#cluster_next\">cluster_next</a> = <a class=\"id\" href=\"#offset\">offset</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#cluster_nr\">cluster_nr</a> = <a class=\"id\" href=\"#SWAPFILE_CLUSTER\">SWAPFILE_CLUSTER</a> - 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#found_free_cluster\">found_free_cluster</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#checks\">checks</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(--<a class=\"id\" href=\"#latency_ration\">latency_ration</a> &lt; 0)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cond_resched\">cond_resched</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#latency_ration\">latency_ration</a> = <a class=\"id\" href=\"#LATENCY_LIMIT\">LATENCY_LIMIT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#offset\">offset</a> = <a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#lowest_bit\">lowest_bit</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#last_in_cluster\">last_in_cluster</a> = <a class=\"id\" href=\"#offset\">offset</a> + <a class=\"id\" href=\"#SWAPFILE_CLUSTER\">SWAPFILE_CLUSTER</a> - 1;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Locate the first empty (unaligned) cluster */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>for (; <a class=\"id\" href=\"#last_in_cluster\">last_in_cluster</a> &lt; <a class=\"id\" href=\"#scan_base\">scan_base</a>; <a class=\"id\" href=\"#offset\">offset</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#swap_map\">swap_map</a>[<a class=\"id\" href=\"#offset\">offset</a>])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#last_in_cluster\">last_in_cluster</a> = <a class=\"id\" href=\"#offset\">offset</a> + <a class=\"id\" href=\"#SWAPFILE_CLUSTER\">SWAPFILE_CLUSTER</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#offset\">offset</a> == <a class=\"id\" href=\"#last_in_cluster\">last_in_cluster</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_lock\">spin_lock</a>(&amp;<a class=\"id\" href=\"#swap_lock\">swap_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#offset\">offset</a> -= <a class=\"id\" href=\"#SWAPFILE_CLUSTER\">SWAPFILE_CLUSTER</a> - 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#cluster_next\">cluster_next</a> = <a class=\"id\" href=\"#offset\">offset</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#cluster_nr\">cluster_nr</a> = <a class=\"id\" href=\"#SWAPFILE_CLUSTER\">SWAPFILE_CLUSTER</a> - 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#found_free_cluster\">found_free_cluster</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#checks\">checks</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(--<a class=\"id\" href=\"#latency_ration\">latency_ration</a> &lt; 0)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cond_resched\">cond_resched</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#latency_ration\">latency_ration</a> = <a class=\"id\" href=\"#LATENCY_LIMIT\">LATENCY_LIMIT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#offset\">offset</a> = <a class=\"id\" href=\"#scan_base\">scan_base</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_lock\">spin_lock</a>(&amp;<a class=\"id\" href=\"#swap_lock\">swap_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#cluster_nr\">cluster_nr</a> = <a class=\"id\" href=\"#SWAPFILE_CLUSTER\">SWAPFILE_CLUSTER</a> - 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#lowest_alloc\">lowest_alloc</a> = 0;", 
"<span class=\"ts\"/>}", 
"", 
"<a class=\"id\" href=\"#checks\">checks</a>:", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#SWP_WRITEOK\">SWP_WRITEOK</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#no_page\">no_page</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#highest_bit\">highest_bit</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#no_page\">no_page</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#offset\">offset</a> &gt; <a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#highest_bit\">highest_bit</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#scan_base\">scan_base</a> = <a class=\"id\" href=\"#offset\">offset</a> = <a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#lowest_bit\">lowest_bit</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* reuse swap entry of cache-only swap if not busy. */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#vm_swap_full\">vm_swap_full</a>() && <a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#swap_map\">swap_map</a>[<a class=\"id\" href=\"#offset\">offset</a>] == <a class=\"id\" href=\"#SWAP_HAS_CACHE\">SWAP_HAS_CACHE</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#swap_was_freed\">swap_was_freed</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock\">spin_unlock</a>(&amp;<a class=\"id\" href=\"#swap_lock\">swap_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#swap_was_freed\">swap_was_freed</a> = <a class=\"id\" href=\"#__try_to_reclaim_swap\">__try_to_reclaim_swap</a>(<a class=\"id\" href=\"#si\">si</a>, <a class=\"id\" href=\"#offset\">offset</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_lock\">spin_lock</a>(&amp;<a class=\"id\" href=\"#swap_lock\">swap_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* entry was freed successfully, try to use this again */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#swap_was_freed\">swap_was_freed</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#checks\">checks</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#scan\">scan</a>; <span class=\"comment\">/* check next one */</span>", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#swap_map\">swap_map</a>[<a class=\"id\" href=\"#offset\">offset</a>])", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#scan\">scan</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#offset\">offset</a> == <a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#lowest_bit\">lowest_bit</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#lowest_bit\">lowest_bit</a>++;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#offset\">offset</a> == <a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#highest_bit\">highest_bit</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#highest_bit\">highest_bit</a>--;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#inuse_pages\">inuse_pages</a>++;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#inuse_pages\">inuse_pages</a> == <a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#pages\">pages</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#lowest_bit\">lowest_bit</a> = <a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#max\">max</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#highest_bit\">highest_bit</a> = 0;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#swap_map\">swap_map</a>[<a class=\"id\" href=\"#offset\">offset</a>] = <a class=\"id\" href=\"#usage\">usage</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#si\">si</a>-><a class=\"id\" href=\"#cluster_next\">cluster_next</a> = <a class=\"id\" href=\"#offset\">offset</a> + 1;", 
];
xr_frag_insert('l/57/40e9447052aacf16be2df19249c01e53d3d805.xr', __xr_tmp);
