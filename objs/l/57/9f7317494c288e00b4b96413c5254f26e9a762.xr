var __xr_tmp = [
"<span class=\"ts\"/>.<a class=\"id\" href=\"#unmask\">unmask</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#unmask_msi_irq\">unmask_msi_irq</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#mask\">mask</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#mask_msi_irq\">mask_msi_irq</a>,", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_INTR_REMAP\">CONFIG_INTR_REMAP</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#ack\">ack</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ir_ack_apic_edge\">ir_ack_apic_edge</a>,", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_SMP\">CONFIG_SMP</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#set_affinity\">set_affinity</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ir_set_msi_irq_affinity\">ir_set_msi_irq_affinity</a>,", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#retrigger\">retrigger</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ioapic_retrigger_irq\">ioapic_retrigger_irq</a>,", 
"};", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Map the PCI dev to the corresponding remapping hardware unit</span>", 
"<span class=\"comment\"> * and allocate 'nvec' consecutive interrupt-remapping table entries</span>", 
"<span class=\"comment\"> * in it.</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#msi_alloc_irte\">msi_alloc_irte</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#irq\">irq</a>, int <a class=\"id\" href=\"#nvec\">nvec</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#intel_iommu\">intel_iommu</a> *<a class=\"id\" href=\"#iommu\">iommu</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#index\">index</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#iommu\">iommu</a> = <a class=\"id\" href=\"#map_dev_to_ir\">map_dev_to_ir</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#iommu\">iommu</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a>", 
"<span class=\"ts\"/><span class=\"ts\"/>       \"Unable to map PCI %s to iommu\\n\", <a class=\"id\" href=\"#pci_name\">pci_name</a>(<a class=\"id\" href=\"#dev\">dev</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOENT\">ENOENT</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#index\">index</a> = <a class=\"id\" href=\"#alloc_irte\">alloc_irte</a>(<a class=\"id\" href=\"#iommu\">iommu</a>, <a class=\"id\" href=\"#irq\">irq</a>, <a class=\"id\" href=\"#nvec\">nvec</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#index\">index</a> &lt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a>", 
"<span class=\"ts\"/><span class=\"ts\"/>       \"Unable to allocate %d IRTE for PCI %s\\n\", <a class=\"id\" href=\"#nvec\">nvec</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#pci_name\">pci_name</a>(<a class=\"id\" href=\"#dev\">dev</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOSPC\">ENOSPC</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#index\">index</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#setup_msi_irq\">setup_msi_irq</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, struct <a class=\"id\" href=\"#msi_desc\">msi_desc</a> *<a class=\"id\" href=\"#msidesc\">msidesc</a>, int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#msi_msg\">msi_msg</a> <a class=\"id\" href=\"#msg\">msg</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#msi_compose_msg\">msi_compose_msg</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#irq\">irq</a>, &amp;<a class=\"id\" href=\"#msg\">msg</a>, -1);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#set_irq_msi\">set_irq_msi</a>(<a class=\"id\" href=\"#irq\">irq</a>, <a class=\"id\" href=\"#msidesc\">msidesc</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#write_msi_msg\">write_msi_msg</a>(<a class=\"id\" href=\"#irq\">irq</a>, &amp;<a class=\"id\" href=\"#msg\">msg</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irq_remapped\">irq_remapped</a>(<a class=\"id\" href=\"#irq\">irq</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#irq_desc\">irq_desc</a> *<a class=\"id\" href=\"#desc\">desc</a> = <a class=\"id\" href=\"#irq_to_desc\">irq_to_desc</a>(<a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * irq migration in process context</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#status\">status</a> |= <a class=\"id\" href=\"#IRQ_MOVE_PCNTXT\">IRQ_MOVE_PCNTXT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_irq_chip_and_handler_name\">set_irq_chip_and_handler_name</a>(<a class=\"id\" href=\"#irq\">irq</a>, &amp;<a class=\"id\" href=\"#msi_ir_chip\">msi_ir_chip</a>, <a class=\"id\" href=\"#handle_edge_irq\">handle_edge_irq</a>, \"edge\");", 
"<span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_irq_chip_and_handler_name\">set_irq_chip_and_handler_name</a>(<a class=\"id\" href=\"#irq\">irq</a>, &amp;<a class=\"id\" href=\"#msi_chip\">msi_chip</a>, <a class=\"id\" href=\"#handle_edge_irq\">handle_edge_irq</a>, \"edge\");", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a>, &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"irq %d for MSI/MSI-X\\n\", <a class=\"id\" href=\"#irq\">irq</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"int <a class=\"id\" href=\"#arch_setup_msi_irqs\">arch_setup_msi_irqs</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#nvec\">nvec</a>, int <a class=\"id\" href=\"#type\">type</a>)", 
"{", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#irq\">irq</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>, <a class=\"id\" href=\"#sub_handle\">sub_handle</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#msi_desc\">msi_desc</a> *<a class=\"id\" href=\"#msidesc\">msidesc</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#irq_want\">irq_want</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#intel_iommu\">intel_iommu</a> *<a class=\"id\" href=\"#iommu\">iommu</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#index\">index</a> = 0;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#node\">node</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* x86 doesn't support multiple MSI yet */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#PCI_CAP_ID_MSI\">PCI_CAP_ID_MSI</a> && <a class=\"id\" href=\"#nvec\">nvec</a> &gt; 1)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#node\">node</a> = <a class=\"id\" href=\"#dev_to_node\">dev_to_node</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#irq_want\">irq_want</a> = <a class=\"id\" href=\"#nr_irqs_gsi\">nr_irqs_gsi</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sub_handle\">sub_handle</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#msidesc\">msidesc</a>, &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#msi_list\">msi_list</a>, <a class=\"id\" href=\"#list\">list</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irq\">irq</a> = <a class=\"id\" href=\"#create_irq_nr\">create_irq_nr</a>(<a class=\"id\" href=\"#irq_want\">irq_want</a>, <a class=\"id\" href=\"#node\">node</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#irq\">irq</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irq_want\">irq_want</a> = <a class=\"id\" href=\"#irq\">irq</a> + 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#intr_remapping_enabled\">intr_remapping_enabled</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#no_ir\">no_ir</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#sub_handle\">sub_handle</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * allocate the consecutive block of IRTE's</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * for 'nvec'</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#index\">index</a> = <a class=\"id\" href=\"#msi_alloc_irte\">msi_alloc_irte</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#irq\">irq</a>, <a class=\"id\" href=\"#nvec\">nvec</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#index\">index</a> &lt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#index\">index</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#error\">error</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#iommu\">iommu</a> = <a class=\"id\" href=\"#map_dev_to_ir\">map_dev_to_ir</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#iommu\">iommu</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#ENOENT\">ENOENT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#error\">error</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * setup the mapping between the irq and the IRTE</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * base index, the sub_handle pointing to the</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * appropriate interrupt remap table entry.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_irte_irq\">set_irte_irq</a>(<a class=\"id\" href=\"#irq\">irq</a>, <a class=\"id\" href=\"#iommu\">iommu</a>, <a class=\"id\" href=\"#index\">index</a>, <a class=\"id\" href=\"#sub_handle\">sub_handle</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<a class=\"id\" href=\"#no_ir\">no_ir</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#setup_msi_irq\">setup_msi_irq</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#msidesc\">msidesc</a>, <a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#error\">error</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sub_handle\">sub_handle</a>++;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"", 
"<a class=\"id\" href=\"#error\">error</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#destroy_irq\">destroy_irq</a>(<a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"", 
"void <a class=\"id\" href=\"#arch_teardown_msi_irq\">arch_teardown_msi_irq</a>(unsigned int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#destroy_irq\">destroy_irq</a>(<a class=\"id\" href=\"#irq\">irq</a>);", 
"}", 
"", 
"#if <a class=\"id\" href=\"#defined\">defined</a> (<a class=\"id\" href=\"#CONFIG_DMAR\">CONFIG_DMAR</a>) || <a class=\"id\" href=\"#defined\">defined</a> (<a class=\"id\" href=\"#CONFIG_INTR_REMAP\">CONFIG_INTR_REMAP</a>)", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_SMP\">CONFIG_SMP</a>", 
"static int <a class=\"id\" href=\"#dmar_msi_set_affinity\">dmar_msi_set_affinity</a>(unsigned int <a class=\"id\" href=\"#irq\">irq</a>, const struct <a class=\"id\" href=\"#cpumask\">cpumask</a> *<a class=\"id\" href=\"#mask\">mask</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#irq_desc\">irq_desc</a> *<a class=\"id\" href=\"#desc\">desc</a> = <a class=\"id\" href=\"#irq_to_desc\">irq_to_desc</a>(<a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#irq_cfg\">irq_cfg</a> *<a class=\"id\" href=\"#cfg\">cfg</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#msi_msg\">msi_msg</a> <a class=\"id\" href=\"#msg\">msg</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#dest\">dest</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#set_desc_affinity\">set_desc_affinity</a>(<a class=\"id\" href=\"#desc\">desc</a>, <a class=\"id\" href=\"#mask\">mask</a>, &amp;<a class=\"id\" href=\"#dest\">dest</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cfg\">cfg</a> = <a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#chip_data\">chip_data</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dmar_msi_read\">dmar_msi_read</a>(<a class=\"id\" href=\"#irq\">irq</a>, &amp;<a class=\"id\" href=\"#msg\">msg</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#msg\">msg</a>.<a class=\"id\" href=\"#data\">data</a> &= ~<a class=\"id\" href=\"#MSI_DATA_VECTOR_MASK\">MSI_DATA_VECTOR_MASK</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#msg\">msg</a>.<a class=\"id\" href=\"#data\">data</a> |= <a class=\"id\" href=\"#MSI_DATA_VECTOR\">MSI_DATA_VECTOR</a>(<a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#vector\">vector</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#msg\">msg</a>.<a class=\"id\" href=\"#address_lo\">address_lo</a> &= ~<a class=\"id\" href=\"#MSI_ADDR_DEST_ID_MASK\">MSI_ADDR_DEST_ID_MASK</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#msg\">msg</a>.<a class=\"id\" href=\"#address_lo\">address_lo</a> |= <a class=\"id\" href=\"#MSI_ADDR_DEST_ID\">MSI_ADDR_DEST_ID</a>(<a class=\"id\" href=\"#dest\">dest</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dmar_msi_write\">dmar_msi_write</a>(<a class=\"id\" href=\"#irq\">irq</a>, &amp;<a class=\"id\" href=\"#msg\">msg</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"#<a class=\"id\" href=\"#endif\">endif</a> <span class=\"comment\">/* CONFIG_SMP */</span>", 
"", 
"static struct <a class=\"id\" href=\"#irq_chip\">irq_chip</a> <a class=\"id\" href=\"#dmar_msi_type\">dmar_msi_type</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a> = \"DMAR_MSI\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#unmask\">unmask</a> = <a class=\"id\" href=\"#dmar_msi_unmask\">dmar_msi_unmask</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#mask\">mask</a> = <a class=\"id\" href=\"#dmar_msi_mask\">dmar_msi_mask</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#ack\">ack</a> = <a class=\"id\" href=\"#ack_apic_edge\">ack_apic_edge</a>,", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_SMP\">CONFIG_SMP</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#set_affinity\">set_affinity</a> = <a class=\"id\" href=\"#dmar_msi_set_affinity\">dmar_msi_set_affinity</a>,", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#retrigger\">retrigger</a> = <a class=\"id\" href=\"#ioapic_retrigger_irq\">ioapic_retrigger_irq</a>,", 
"};", 
"", 
"int <a class=\"id\" href=\"#arch_setup_dmar_msi\">arch_setup_dmar_msi</a>(unsigned int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#msi_msg\">msi_msg</a> <a class=\"id\" href=\"#msg\">msg</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#msi_compose_msg\">msi_compose_msg</a>(<a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#irq\">irq</a>, &amp;<a class=\"id\" href=\"#msg\">msg</a>, -1);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dmar_msi_write\">dmar_msi_write</a>(<a class=\"id\" href=\"#irq\">irq</a>, &amp;<a class=\"id\" href=\"#msg\">msg</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#set_irq_chip_and_handler_name\">set_irq_chip_and_handler_name</a>(<a class=\"id\" href=\"#irq\">irq</a>, &amp;<a class=\"id\" href=\"#dmar_msi_type\">dmar_msi_type</a>, <a class=\"id\" href=\"#handle_edge_irq\">handle_edge_irq</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>\"edge\");", 
"<span class=\"ts\"/>return 0;", 
"}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_HPET_TIMER\">CONFIG_HPET_TIMER</a>", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_SMP\">CONFIG_SMP</a>", 
"static int <a class=\"id\" href=\"#hpet_msi_set_affinity\">hpet_msi_set_affinity</a>(unsigned int <a class=\"id\" href=\"#irq\">irq</a>, const struct <a class=\"id\" href=\"#cpumask\">cpumask</a> *<a class=\"id\" href=\"#mask\">mask</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#irq_desc\">irq_desc</a> *<a class=\"id\" href=\"#desc\">desc</a> = <a class=\"id\" href=\"#irq_to_desc\">irq_to_desc</a>(<a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#irq_cfg\">irq_cfg</a> *<a class=\"id\" href=\"#cfg\">cfg</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#msi_msg\">msi_msg</a> <a class=\"id\" href=\"#msg\">msg</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#dest\">dest</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#set_desc_affinity\">set_desc_affinity</a>(<a class=\"id\" href=\"#desc\">desc</a>, <a class=\"id\" href=\"#mask\">mask</a>, &amp;<a class=\"id\" href=\"#dest\">dest</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cfg\">cfg</a> = <a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#chip_data\">chip_data</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#hpet_msi_read\">hpet_msi_read</a>(<a class=\"id\" href=\"#irq\">irq</a>, &amp;<a class=\"id\" href=\"#msg\">msg</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#msg\">msg</a>.<a class=\"id\" href=\"#data\">data</a> &= ~<a class=\"id\" href=\"#MSI_DATA_VECTOR_MASK\">MSI_DATA_VECTOR_MASK</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#msg\">msg</a>.<a class=\"id\" href=\"#data\">data</a> |= <a class=\"id\" href=\"#MSI_DATA_VECTOR\">MSI_DATA_VECTOR</a>(<a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#vector\">vector</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#msg\">msg</a>.<a class=\"id\" href=\"#address_lo\">address_lo</a> &= ~<a class=\"id\" href=\"#MSI_ADDR_DEST_ID_MASK\">MSI_ADDR_DEST_ID_MASK</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#msg\">msg</a>.<a class=\"id\" href=\"#address_lo\">address_lo</a> |= <a class=\"id\" href=\"#MSI_ADDR_DEST_ID\">MSI_ADDR_DEST_ID</a>(<a class=\"id\" href=\"#dest\">dest</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#hpet_msi_write\">hpet_msi_write</a>(<a class=\"id\" href=\"#irq\">irq</a>, &amp;<a class=\"id\" href=\"#msg\">msg</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"#<a class=\"id\" href=\"#endif\">endif</a> <span class=\"comment\">/* CONFIG_SMP */</span>", 
"", 
"static struct <a class=\"id\" href=\"#irq_chip\">irq_chip</a> <a class=\"id\" href=\"#ir_hpet_msi_type\">ir_hpet_msi_type</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a> = \"IR-HPET_MSI\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#unmask\">unmask</a> = <a class=\"id\" href=\"#hpet_msi_unmask\">hpet_msi_unmask</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#mask\">mask</a> = <a class=\"id\" href=\"#hpet_msi_mask\">hpet_msi_mask</a>,", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_INTR_REMAP\">CONFIG_INTR_REMAP</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#ack\">ack</a> = <a class=\"id\" href=\"#ir_ack_apic_edge\">ir_ack_apic_edge</a>,", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_SMP\">CONFIG_SMP</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#set_affinity\">set_affinity</a> = <a class=\"id\" href=\"#ir_set_msi_irq_affinity\">ir_set_msi_irq_affinity</a>,", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#retrigger\">retrigger</a> = <a class=\"id\" href=\"#ioapic_retrigger_irq\">ioapic_retrigger_irq</a>,", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#irq_chip\">irq_chip</a> <a class=\"id\" href=\"#hpet_msi_type\">hpet_msi_type</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a> = \"HPET_MSI\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#unmask\">unmask</a> = <a class=\"id\" href=\"#hpet_msi_unmask\">hpet_msi_unmask</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#mask\">mask</a> = <a class=\"id\" href=\"#hpet_msi_mask\">hpet_msi_mask</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#ack\">ack</a> = <a class=\"id\" href=\"#ack_apic_edge\">ack_apic_edge</a>,", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_SMP\">CONFIG_SMP</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#set_affinity\">set_affinity</a> = <a class=\"id\" href=\"#hpet_msi_set_affinity\">hpet_msi_set_affinity</a>,", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#retrigger\">retrigger</a> = <a class=\"id\" href=\"#ioapic_retrigger_irq\">ioapic_retrigger_irq</a>,", 
"};", 
"", 
"int <a class=\"id\" href=\"#arch_setup_hpet_msi\">arch_setup_hpet_msi</a>(unsigned int <a class=\"id\" href=\"#irq\">irq</a>, unsigned int <a class=\"id\" href=\"#id\">id</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#msi_msg\">msi_msg</a> <a class=\"id\" href=\"#msg\">msg</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#irq_desc\">irq_desc</a> *<a class=\"id\" href=\"#desc\">desc</a> = <a class=\"id\" href=\"#irq_to_desc\">irq_to_desc</a>(<a class=\"id\" href=\"#irq\">irq</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#intr_remapping_enabled\">intr_remapping_enabled</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#intel_iommu\">intel_iommu</a> *<a class=\"id\" href=\"#iommu\">iommu</a> = <a class=\"id\" href=\"#map_hpet_to_ir\">map_hpet_to_ir</a>(<a class=\"id\" href=\"#id\">id</a>);", 
];
xr_frag_insert('l/57/9f7317494c288e00b4b96413c5254f26e9a762.xr', __xr_tmp);
