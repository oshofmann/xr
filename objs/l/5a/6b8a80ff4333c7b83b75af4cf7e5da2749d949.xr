var __xr_tmp = [
"static void <a class=\"id\" href=\"#rtc_uie_task\">rtc_uie_task</a>(struct <a class=\"id\" href=\"#work_struct\">work_struct</a> *<a class=\"id\" href=\"#work\">work</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc\">rtc</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#container_of\">container_of</a>(<a class=\"id\" href=\"#work\">work</a>, struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a>, <a class=\"id\" href=\"#uie_task\">uie_task</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_time\">rtc_time</a> <a class=\"id\" href=\"#tm\">tm</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#num\">num</a> = 0;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#rtc_read_time\">rtc_read_time</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, &amp;<a class=\"id\" href=\"#tm\">tm</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irq\">spin_lock_irq</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_lock\">irq_lock</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#stop_uie_polling\">stop_uie_polling</a> || <a class=\"id\" href=\"#err\">err</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_task_active\">uie_task_active</a> = 0;", 
"<span class=\"ts\"/>} else if (<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#oldsecs\">oldsecs</a> != <a class=\"id\" href=\"#tm\">tm</a>.<a class=\"id\" href=\"#tm_sec\">tm_sec</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#num\">num</a> = (<a class=\"id\" href=\"#tm\">tm</a>.<a class=\"id\" href=\"#tm_sec\">tm_sec</a> + 60 - <a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#oldsecs\">oldsecs</a>) % 60;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#oldsecs\">oldsecs</a> = <a class=\"id\" href=\"#tm\">tm</a>.<a class=\"id\" href=\"#tm_sec\">tm_sec</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_timer\">uie_timer</a>.<a class=\"id\" href=\"#expires\">expires</a> = <a class=\"id\" href=\"#jiffies\">jiffies</a> + <a class=\"id\" href=\"#HZ\">HZ</a> - (<a class=\"id\" href=\"#HZ\">HZ</a>/10);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_timer_active\">uie_timer_active</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_task_active\">uie_task_active</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#add_timer\">add_timer</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_timer\">uie_timer</a>);", 
"<span class=\"ts\"/>} else if (<a class=\"id\" href=\"#schedule_work\">schedule_work</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_task\">uie_task</a>) == 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_task_active\">uie_task_active</a> = 0;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irq\">spin_unlock_irq</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_lock\">irq_lock</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#num\">num</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc_update_irq\">rtc_update_irq</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, <a class=\"id\" href=\"#num\">num</a>, <a class=\"id\" href=\"#RTC_UF\">RTC_UF</a> | <a class=\"id\" href=\"#RTC_IRQF\">RTC_IRQF</a>);", 
"}", 
"static void <a class=\"id\" href=\"#rtc_uie_timer\">rtc_uie_timer</a>(unsigned long <a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc\">rtc</a> = (struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *)<a class=\"id\" href=\"#data\">data</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irqsave\">spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_lock\">irq_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_timer_active\">uie_timer_active</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_task_active\">uie_task_active</a> = 1;", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#schedule_work\">schedule_work</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_task\">uie_task</a>) == 0))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_task_active\">uie_task_active</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irqrestore\">spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_lock\">irq_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#clear_uie\">clear_uie</a>(struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc\">rtc</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irq\">spin_lock_irq</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_lock\">irq_lock</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_irq_active\">uie_irq_active</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#stop_uie_polling\">stop_uie_polling</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_timer_active\">uie_timer_active</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irq\">spin_unlock_irq</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_lock\">irq_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#del_timer_sync\">del_timer_sync</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_timer\">uie_timer</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irq\">spin_lock_irq</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_lock\">irq_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_timer_active\">uie_timer_active</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_task_active\">uie_task_active</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irq\">spin_unlock_irq</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_lock\">irq_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#flush_scheduled_work\">flush_scheduled_work</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irq\">spin_lock_irq</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_lock\">irq_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_irq_active\">uie_irq_active</a> = 0;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irq\">spin_unlock_irq</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_lock\">irq_lock</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#set_uie\">set_uie</a>(struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc\">rtc</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_time\">rtc_time</a> <a class=\"id\" href=\"#tm\">tm</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#rtc_read_time\">rtc_read_time</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, &amp;<a class=\"id\" href=\"#tm\">tm</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irq\">spin_lock_irq</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_lock\">irq_lock</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_irq_active\">uie_irq_active</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_irq_active\">uie_irq_active</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#stop_uie_polling\">stop_uie_polling</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#oldsecs\">oldsecs</a> = <a class=\"id\" href=\"#tm\">tm</a>.<a class=\"id\" href=\"#tm_sec\">tm_sec</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_task_active\">uie_task_active</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#schedule_work\">schedule_work</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_task\">uie_task</a>) == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_task_active\">uie_task_active</a> = 0;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_data\">irq_data</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irq\">spin_unlock_irq</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_lock\">irq_lock</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"int <a class=\"id\" href=\"#rtc_dev_update_irq_enable_emul\">rtc_dev_update_irq_enable_emul</a>(struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc\">rtc</a>, unsigned int <a class=\"id\" href=\"#enabled\">enabled</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#enabled\">enabled</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#set_uie\">set_uie</a>(<a class=\"id\" href=\"#rtc\">rtc</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#clear_uie\">clear_uie</a>(<a class=\"id\" href=\"#rtc\">rtc</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#rtc_dev_update_irq_enable_emul\">rtc_dev_update_irq_enable_emul</a>);", 
"", 
"#<a class=\"id\" href=\"#endif\">endif</a> <span class=\"comment\">/* CONFIG_RTC_INTF_DEV_UIE_EMUL */</span>", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a>", 
"<a class=\"id\" href=\"#rtc_dev_read\">rtc_dev_read</a>(struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>, char <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>, <a class=\"id\" href=\"#loff_t\">loff_t</a> *<a class=\"id\" href=\"#ppos\">ppos</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc\">rtc</a> = <a class=\"id\" href=\"#file\">file</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#DECLARE_WAITQUEUE\">DECLARE_WAITQUEUE</a>(<a class=\"id\" href=\"#wait\">wait</a>, <a class=\"id\" href=\"#current\">current</a>);", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#data\">data</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#count\">count</a> != sizeof(unsigned int) && <a class=\"id\" href=\"#count\">count</a> &lt; sizeof(unsigned long))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#add_wait_queue\">add_wait_queue</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_queue\">irq_queue</a>, &amp;<a class=\"id\" href=\"#wait\">wait</a>);", 
"<span class=\"ts\"/>do {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__set_current_state\">__set_current_state</a>(<a class=\"id\" href=\"#TASK_INTERRUPTIBLE\">TASK_INTERRUPTIBLE</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irq\">spin_lock_irq</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_lock\">irq_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#data\">data</a> = <a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_data\">irq_data</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_data\">irq_data</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irq\">spin_unlock_irq</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_lock\">irq_lock</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#data\">data</a> != 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#file\">file</a>-><a class=\"id\" href=\"#f_flags\">f_flags</a> &amp; <a class=\"id\" href=\"#O_NONBLOCK\">O_NONBLOCK</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EAGAIN\">EAGAIN</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#signal_pending\">signal_pending</a>(<a class=\"id\" href=\"#current\">current</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#ERESTARTSYS\">ERESTARTSYS</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#schedule\">schedule</a>();", 
"<span class=\"ts\"/>} while (1);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#set_current_state\">set_current_state</a>(<a class=\"id\" href=\"#TASK_RUNNING\">TASK_RUNNING</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#remove_wait_queue\">remove_wait_queue</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_queue\">irq_queue</a>, &amp;<a class=\"id\" href=\"#wait\">wait</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> == 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Check for any data updates */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#read_callback\">read_callback</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#data\">data</a> = <a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#read_callback\">read_callback</a>(<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#parent\">parent</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#data\">data</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (sizeof(int) != sizeof(long) &&", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#count\">count</a> == sizeof(unsigned int))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#put_user\">put_user</a>(<a class=\"id\" href=\"#data\">data</a>, (unsigned int <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#buf\">buf</a>) ?:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>sizeof(unsigned int);", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#put_user\">put_user</a>(<a class=\"id\" href=\"#data\">data</a>, (unsigned long <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#buf\">buf</a>) ?:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>sizeof(unsigned long);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"", 
"static unsigned int <a class=\"id\" href=\"#rtc_dev_poll\">rtc_dev_poll</a>(struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>, <a class=\"id\" href=\"#poll_table\">poll_table</a> *<a class=\"id\" href=\"#wait\">wait</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc\">rtc</a> = <a class=\"id\" href=\"#file\">file</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#data\">data</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#poll_wait\">poll_wait</a>(<a class=\"id\" href=\"#file\">file</a>, &amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_queue\">irq_queue</a>, <a class=\"id\" href=\"#wait\">wait</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#data\">data</a> = <a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_data\">irq_data</a>;", 
"", 
"<span class=\"ts\"/>return (<a class=\"id\" href=\"#data\">data</a> != 0) ? (<a class=\"id\" href=\"#POLLIN\">POLLIN</a> | <a class=\"id\" href=\"#POLLRDNORM\">POLLRDNORM</a>) : 0;", 
"}", 
"", 
"static long <a class=\"id\" href=\"#rtc_dev_ioctl\">rtc_dev_ioctl</a>(struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#cmd\">cmd</a>, unsigned long <a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a> = 0;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc\">rtc</a> = <a class=\"id\" href=\"#file\">file</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>const struct <a class=\"id\" href=\"#rtc_class_ops\">rtc_class_ops</a> *<a class=\"id\" href=\"#ops\">ops</a> = <a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops\">ops</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_time\">rtc_time</a> <a class=\"id\" href=\"#tm\">tm</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_wkalrm\">rtc_wkalrm</a> <a class=\"id\" href=\"#alarm\">alarm</a>;", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#uarg\">uarg</a> = (void <a class=\"id\" href=\"#__user\">__user</a> *) <a class=\"id\" href=\"#arg\">arg</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#mutex_lock_interruptible\">mutex_lock_interruptible</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops_lock\">ops_lock</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* check that the calling task has appropriate permissions</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * for certain ioctls. doing this check here is useful</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * to avoid duplicate code in each driver.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#cmd\">cmd</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#RTC_EPOCH_SET\">RTC_EPOCH_SET</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#RTC_SET_TIME\">RTC_SET_TIME</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#capable\">capable</a>(<a class=\"id\" href=\"#CAP_SYS_TIME\">CAP_SYS_TIME</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#EACCES\">EACCES</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#RTC_IRQP_SET\">RTC_IRQP_SET</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#arg\">arg</a> &gt; <a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#max_user_freq\">max_user_freq</a> && !<a class=\"id\" href=\"#capable\">capable</a>(<a class=\"id\" href=\"#CAP_SYS_RESOURCE\">CAP_SYS_RESOURCE</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#EACCES\">EACCES</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#RTC_PIE_ON\">RTC_PIE_ON</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_freq\">irq_freq</a> &gt; <a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#max_user_freq\">max_user_freq</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>!<a class=\"id\" href=\"#capable\">capable</a>(<a class=\"id\" href=\"#CAP_SYS_RESOURCE\">CAP_SYS_RESOURCE</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#EACCES\">EACCES</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* try the driver's ioctl interface */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#ioctl\">ioctl</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#ioctl\">ioctl</a>(<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#parent\">parent</a>, <a class=\"id\" href=\"#cmd\">cmd</a>, <a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> != -<a class=\"id\" href=\"#ENOIOCTLCMD\">ENOIOCTLCMD</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops_lock\">ops_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* if the driver does not provide the ioctl interface</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * or if that particular ioctl was not implemented</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * (-ENOIOCTLCMD), we will try to emulate here.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Drivers *SHOULD NOT* provide ioctl implementations</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * for these requests.  Instead, provide methods to</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * support the following code, so that the RTC's main</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * features are accessible without using ioctls.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * RTC and alarm times will be in UTC, by preference,</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * but dual-booting with MS-Windows implies RTCs must</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * use the local wall clock time.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#cmd\">cmd</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#RTC_ALM_READ\">RTC_ALM_READ</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops_lock\">ops_lock</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#rtc_read_alarm\">rtc_read_alarm</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, &amp;<a class=\"id\" href=\"#alarm\">alarm</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#uarg\">uarg</a>, &amp;<a class=\"id\" href=\"#alarm\">alarm</a>.<a class=\"id\" href=\"#time\">time</a>, sizeof(<a class=\"id\" href=\"#tm\">tm</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#RTC_ALM_SET\">RTC_ALM_SET</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops_lock\">ops_lock</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(&amp;<a class=\"id\" href=\"#alarm\">alarm</a>.<a class=\"id\" href=\"#time\">time</a>, <a class=\"id\" href=\"#uarg\">uarg</a>, sizeof(<a class=\"id\" href=\"#tm\">tm</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#alarm\">alarm</a>.<a class=\"id\" href=\"#enabled\">enabled</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#alarm\">alarm</a>.<a class=\"id\" href=\"#pending\">pending</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#alarm\">alarm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_wday\">tm_wday</a> = -1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#alarm\">alarm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_yday\">tm_yday</a> = -1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#alarm\">alarm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_isdst\">tm_isdst</a> = -1;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* RTC_ALM_SET alarms may be up to 24 hours in the future.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * Rather than expecting every RTC to implement \"don't care\"</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * for day/month/year fields, just force the alarm to have</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * the right values for those fields.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * RTC_WKALM_SET should be used instead.  Not only does it</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * eliminate the need for a separate RTC_AIE_ON call, it</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * doesn't have the \"alarm 23:59:59 in the future\" race.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * NOTE:  some legacy code may have used invalid fields as</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * wildcards, exposing hardware \"periodic alarm\" capabilities.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * Not supported here.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#now\">now</a>, <a class=\"id\" href=\"#then\">then</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#rtc_read_time\">rtc_read_time</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, &amp;<a class=\"id\" href=\"#tm\">tm</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc_tm_to_time\">rtc_tm_to_time</a>(&amp;<a class=\"id\" href=\"#tm\">tm</a>, &amp;<a class=\"id\" href=\"#now\">now</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#alarm\">alarm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_mday\">tm_mday</a> = <a class=\"id\" href=\"#tm\">tm</a>.<a class=\"id\" href=\"#tm_mday\">tm_mday</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#alarm\">alarm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_mon\">tm_mon</a> = <a class=\"id\" href=\"#tm\">tm</a>.<a class=\"id\" href=\"#tm_mon\">tm_mon</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#alarm\">alarm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_year\">tm_year</a> = <a class=\"id\" href=\"#tm\">tm</a>.<a class=\"id\" href=\"#tm_year\">tm_year</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a>  = <a class=\"id\" href=\"#rtc_valid_tm\">rtc_valid_tm</a>(&amp;<a class=\"id\" href=\"#alarm\">alarm</a>.<a class=\"id\" href=\"#time\">time</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc_tm_to_time\">rtc_tm_to_time</a>(&amp;<a class=\"id\" href=\"#alarm\">alarm</a>.<a class=\"id\" href=\"#time\">time</a>, &amp;<a class=\"id\" href=\"#then\">then</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* alarm may need to wrap into tomorrow */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#then\">then</a> &lt; <a class=\"id\" href=\"#now\">now</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc_time_to_tm\">rtc_time_to_tm</a>(<a class=\"id\" href=\"#now\">now</a> + 24 * 60 * 60, &amp;<a class=\"id\" href=\"#tm\">tm</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#alarm\">alarm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_mday\">tm_mday</a> = <a class=\"id\" href=\"#tm\">tm</a>.<a class=\"id\" href=\"#tm_mday\">tm_mday</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#alarm\">alarm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_mon\">tm_mon</a> = <a class=\"id\" href=\"#tm\">tm</a>.<a class=\"id\" href=\"#tm_mon\">tm_mon</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#alarm\">alarm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_year\">tm_year</a> = <a class=\"id\" href=\"#tm\">tm</a>.<a class=\"id\" href=\"#tm_year\">tm_year</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#rtc_set_alarm\">rtc_set_alarm</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, &amp;<a class=\"id\" href=\"#alarm\">alarm</a>);", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#RTC_RD_TIME\">RTC_RD_TIME</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops_lock\">ops_lock</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#rtc_read_time\">rtc_read_time</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, &amp;<a class=\"id\" href=\"#tm\">tm</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#uarg\">uarg</a>, &amp;<a class=\"id\" href=\"#tm\">tm</a>, sizeof(<a class=\"id\" href=\"#tm\">tm</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#RTC_SET_TIME\">RTC_SET_TIME</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops_lock\">ops_lock</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(&amp;<a class=\"id\" href=\"#tm\">tm</a>, <a class=\"id\" href=\"#uarg\">uarg</a>, sizeof(<a class=\"id\" href=\"#tm\">tm</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#rtc_set_time\">rtc_set_time</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, &amp;<a class=\"id\" href=\"#tm\">tm</a>);", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#RTC_PIE_ON\">RTC_PIE_ON</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#rtc_irq_set_state\">rtc_irq_set_state</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, 1);", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#RTC_PIE_OFF\">RTC_PIE_OFF</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#rtc_irq_set_state\">rtc_irq_set_state</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, 0);", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#RTC_AIE_ON\">RTC_AIE_ON</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops_lock\">ops_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#rtc_alarm_irq_enable\">rtc_alarm_irq_enable</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, 1);", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#RTC_AIE_OFF\">RTC_AIE_OFF</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops_lock\">ops_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#rtc_alarm_irq_enable\">rtc_alarm_irq_enable</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, 0);", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#RTC_UIE_ON\">RTC_UIE_ON</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops_lock\">ops_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#rtc_update_irq_enable\">rtc_update_irq_enable</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, 1);", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#RTC_UIE_OFF\">RTC_UIE_OFF</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops_lock\">ops_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#rtc_update_irq_enable\">rtc_update_irq_enable</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, 0);", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#RTC_IRQP_SET\">RTC_IRQP_SET</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#rtc_irq_set_freq\">rtc_irq_set_freq</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#RTC_IRQP_READ\">RTC_IRQP_READ</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#put_user\">put_user</a>(<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_freq\">irq_freq</a>, (unsigned long <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#uarg\">uarg</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"#if 0", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#RTC_EPOCH_SET\">RTC_EPOCH_SET</a>:", 
"#<a class=\"id\" href=\"#ifndef\">ifndef</a> <a class=\"id\" href=\"#rtc_epoch\">rtc_epoch</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * There were no RTC clocks before 1900.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#arg\">arg</a> &lt; 1900) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc_epoch\">rtc_epoch</a> = <a class=\"id\" href=\"#arg\">arg</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = 0;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#RTC_EPOCH_READ\">RTC_EPOCH_READ</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#put_user\">put_user</a>(<a class=\"id\" href=\"#rtc_epoch\">rtc_epoch</a>, (unsigned long <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#uarg\">uarg</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#RTC_WKALM_SET\">RTC_WKALM_SET</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops_lock\">ops_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(&amp;<a class=\"id\" href=\"#alarm\">alarm</a>, <a class=\"id\" href=\"#uarg\">uarg</a>, sizeof(<a class=\"id\" href=\"#alarm\">alarm</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#rtc_set_alarm\">rtc_set_alarm</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, &amp;<a class=\"id\" href=\"#alarm\">alarm</a>);", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#RTC_WKALM_RD\">RTC_WKALM_RD</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops_lock\">ops_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#rtc_read_alarm\">rtc_read_alarm</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, &amp;<a class=\"id\" href=\"#alarm\">alarm</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#uarg\">uarg</a>, &amp;<a class=\"id\" href=\"#alarm\">alarm</a>, sizeof(<a class=\"id\" href=\"#alarm\">alarm</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#ENOTTY\">ENOTTY</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"", 
"<a class=\"id\" href=\"#done\">done</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops_lock\">ops_lock</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#rtc_dev_fasync\">rtc_dev_fasync</a>(int <a class=\"id\" href=\"#fd\">fd</a>, struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>, int <a class=\"id\" href=\"#on\">on</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc\">rtc</a> = <a class=\"id\" href=\"#file\">file</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#fasync_helper\">fasync_helper</a>(<a class=\"id\" href=\"#fd\">fd</a>, <a class=\"id\" href=\"#file\">file</a>, <a class=\"id\" href=\"#on\">on</a>, &amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#async_queue\">async_queue</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#rtc_dev_release\">rtc_dev_release</a>(struct <a class=\"id\" href=\"#inode\">inode</a> *<a class=\"id\" href=\"#inode\">inode</a>, struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc\">rtc</a> = <a class=\"id\" href=\"#file\">file</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* We shut down the repeating IRQs that userspace enabled,</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * since nothing is listening to them.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *  - Update (UIE) ... currently only managed through ioctls</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *  - Periodic (PIE) ... also used through rtc_*() interface calls</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Leave the alarm alone; it may be set to trigger a system wakeup</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * later, or be used by kernel code, and is a one-shot event anyway.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Keep ioctl until all drivers are converted */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc_dev_ioctl\">rtc_dev_ioctl</a>(<a class=\"id\" href=\"#file\">file</a>, <a class=\"id\" href=\"#RTC_UIE_OFF\">RTC_UIE_OFF</a>, 0);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc_update_irq_enable\">rtc_update_irq_enable</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, 0);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc_irq_set_state\">rtc_irq_set_state</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, 0);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#release\">release</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#release\">release</a>(<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#parent\">parent</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#clear_bit_unlock\">clear_bit_unlock</a>(<a class=\"id\" href=\"#RTC_DEV_BUSY\">RTC_DEV_BUSY</a>, &amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static const struct <a class=\"id\" href=\"#file_operations\">file_operations</a> <a class=\"id\" href=\"#rtc_dev_fops\">rtc_dev_fops</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#owner\">owner</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#THIS_MODULE\">THIS_MODULE</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#llseek\">llseek</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#no_llseek\">no_llseek</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#read\">read</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#rtc_dev_read\">rtc_dev_read</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#poll\">poll</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#rtc_dev_poll\">rtc_dev_poll</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#unlocked_ioctl\">unlocked_ioctl</a><span class=\"ts\"/>= <a class=\"id\" href=\"#rtc_dev_ioctl\">rtc_dev_ioctl</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#open\">open</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#rtc_dev_open\">rtc_dev_open</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#release\">release</a><span class=\"ts\"/>= <a class=\"id\" href=\"#rtc_dev_release\">rtc_dev_release</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#fasync\">fasync</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#rtc_dev_fasync\">rtc_dev_fasync</a>,", 
"};", 
"", 
"<span class=\"comment\">/* insertion/removal hooks */</span>", 
"", 
"void <a class=\"id\" href=\"#rtc_dev_prepare\">rtc_dev_prepare</a>(struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc\">rtc</a>)", 
"{", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#rtc_devt\">rtc_devt</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#id\">id</a> >= <a class=\"id\" href=\"#RTC_DEV_MAX\">RTC_DEV_MAX</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_debug\">pr_debug</a>(\"%s: too many RTC devices\\n\", <a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#devt\">devt</a> = <a class=\"id\" href=\"#MKDEV\">MKDEV</a>(<a class=\"id\" href=\"#MAJOR\">MAJOR</a>(<a class=\"id\" href=\"#rtc_devt\">rtc_devt</a>), <a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#id\">id</a>);", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_RTC_INTF_DEV_UIE_EMUL\">CONFIG_RTC_INTF_DEV_UIE_EMUL</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#INIT_WORK\">INIT_WORK</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_task\">uie_task</a>, <a class=\"id\" href=\"#rtc_uie_task\">rtc_uie_task</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#setup_timer\">setup_timer</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#uie_timer\">uie_timer</a>, <a class=\"id\" href=\"#rtc_uie_timer\">rtc_uie_timer</a>, (unsigned long)<a class=\"id\" href=\"#rtc\">rtc</a>);", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdev_init\">cdev_init</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#char_dev\">char_dev</a>, &amp;<a class=\"id\" href=\"#rtc_dev_fops\">rtc_dev_fops</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#char_dev\">char_dev</a>.<a class=\"id\" href=\"#owner\">owner</a> = <a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#owner\">owner</a>;", 
"}", 
"", 
"void <a class=\"id\" href=\"#rtc_dev_add_device\">rtc_dev_add_device</a>(struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc\">rtc</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdev_add\">cdev_add</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#char_dev\">char_dev</a>, <a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#devt\">devt</a>, 1))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> \"%s: failed to add char device %d:%d\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#MAJOR\">MAJOR</a>(<a class=\"id\" href=\"#rtc_devt\">rtc_devt</a>), <a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_debug\">pr_debug</a>(\"%s: dev (%d:%d)\\n\", <a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#name\">name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#MAJOR\">MAJOR</a>(<a class=\"id\" href=\"#rtc_devt\">rtc_devt</a>), <a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#id\">id</a>);", 
"}", 
"", 
"void <a class=\"id\" href=\"#rtc_dev_del_device\">rtc_dev_del_device</a>(struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc\">rtc</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#devt\">devt</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cdev_del\">cdev_del</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#char_dev\">char_dev</a>);", 
"}", 
"", 
"void <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#rtc_dev_init\">rtc_dev_init</a>(void)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#alloc_chrdev_region\">alloc_chrdev_region</a>(&amp;<a class=\"id\" href=\"#rtc_devt\">rtc_devt</a>, 0, <a class=\"id\" href=\"#RTC_DEV_MAX\">RTC_DEV_MAX</a>, \"rtc\");", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"%s: failed to allocate char dev region\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__FILE__\">__FILE__</a>);", 
"}", 
"", 
"void <a class=\"id\" href=\"#__exit\">__exit</a> <a class=\"id\" href=\"#rtc_dev_exit\">rtc_dev_exit</a>(void)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rtc_devt\">rtc_devt</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#unregister_chrdev_region\">unregister_chrdev_region</a>(<a class=\"id\" href=\"#rtc_devt\">rtc_devt</a>, <a class=\"id\" href=\"#RTC_DEV_MAX\">RTC_DEV_MAX</a>);", 
"}", 
];
xr_frag_insert('l/5a/6b8a80ff4333c7b83b75af4cf7e5da2749d949.xr', __xr_tmp);
