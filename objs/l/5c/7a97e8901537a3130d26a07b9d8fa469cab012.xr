var __xr_tmp = [
"<span class=\"ts\"/><a class=\"id\" href=\"#gotoxy\">gotoxy</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_saved_x\">vc_saved_x</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_saved_y\">vc_saved_y</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_intensity\">vc_intensity</a><span class=\"ts\"/>= <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_s_intensity\">vc_s_intensity</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_italic\">vc_italic</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_s_italic\">vc_s_italic</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_underline\">vc_underline</a><span class=\"ts\"/>= <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_s_underline\">vc_s_underline</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_blink\">vc_blink</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_s_blink\">vc_s_blink</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_reverse\">vc_reverse</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_s_reverse\">vc_s_reverse</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_charset\">vc_charset</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_s_charset\">vc_s_charset</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_color\">vc_color</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_s_color\">vc_s_color</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_G0_charset\">vc_G0_charset</a><span class=\"ts\"/>= <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_saved_G0\">vc_saved_G0</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_G1_charset\">vc_G1_charset</a><span class=\"ts\"/>= <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_saved_G1\">vc_saved_G1</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_translate\">vc_translate</a><span class=\"ts\"/>= <a class=\"id\" href=\"#set_translate\">set_translate</a>(<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_charset\">vc_charset</a> ? <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_G1_charset\">vc_G1_charset</a> : <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_G0_charset\">vc_G0_charset</a>, <a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#update_attr\">update_attr</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_need_wrap\">vc_need_wrap</a> = 0;", 
"}", 
"", 
"enum { <a class=\"id\" href=\"#ESnormal\">ESnormal</a>, <a class=\"id\" href=\"#ESesc\">ESesc</a>, <a class=\"id\" href=\"#ESsquare\">ESsquare</a>, <a class=\"id\" href=\"#ESgetpars\">ESgetpars</a>, <a class=\"id\" href=\"#ESgotpars\">ESgotpars</a>, <a class=\"id\" href=\"#ESfunckey\">ESfunckey</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#EShash\">EShash</a>, <a class=\"id\" href=\"#ESsetG0\">ESsetG0</a>, <a class=\"id\" href=\"#ESsetG1\">ESsetG1</a>, <a class=\"id\" href=\"#ESpercent\">ESpercent</a>, <a class=\"id\" href=\"#ESignore\">ESignore</a>, <a class=\"id\" href=\"#ESnonstd\">ESnonstd</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ESpalette\">ESpalette</a> };", 
"", 
"<span class=\"comment\">/* console_sem is held (except via vc_init()) */</span>", 
"static void <a class=\"id\" href=\"#reset_terminal\">reset_terminal</a>(struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#vc\">vc</a>, int <a class=\"id\" href=\"#do_clear\">do_clear</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_top\">vc_top</a><span class=\"ts\"/><span class=\"ts\"/>= 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_bottom\">vc_bottom</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_rows\">vc_rows</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ESnormal\">ESnormal</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_ques\">vc_ques</a><span class=\"ts\"/><span class=\"ts\"/>= 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_translate\">vc_translate</a><span class=\"ts\"/>= <a class=\"id\" href=\"#set_translate\">set_translate</a>(<a class=\"id\" href=\"#LAT1_MAP\">LAT1_MAP</a>, <a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_G0_charset\">vc_G0_charset</a><span class=\"ts\"/>= <a class=\"id\" href=\"#LAT1_MAP\">LAT1_MAP</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_G1_charset\">vc_G1_charset</a><span class=\"ts\"/>= <a class=\"id\" href=\"#GRAF_MAP\">GRAF_MAP</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_charset\">vc_charset</a><span class=\"ts\"/><span class=\"ts\"/>= 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_need_wrap\">vc_need_wrap</a><span class=\"ts\"/>= 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_report_mouse\">vc_report_mouse</a><span class=\"ts\"/>= 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf\">vc_utf</a>              = <a class=\"id\" href=\"#default_utf8\">default_utf8</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf_count\">vc_utf_count</a><span class=\"ts\"/>= 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_disp_ctrl\">vc_disp_ctrl</a><span class=\"ts\"/>= 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_toggle_meta\">vc_toggle_meta</a><span class=\"ts\"/>= 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_decscnm\">vc_decscnm</a><span class=\"ts\"/><span class=\"ts\"/>= 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_decom\">vc_decom</a><span class=\"ts\"/><span class=\"ts\"/>= 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_decawm\">vc_decawm</a><span class=\"ts\"/><span class=\"ts\"/>= 1;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_deccm\">vc_deccm</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#global_cursor_default\">global_cursor_default</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_decim\">vc_decim</a><span class=\"ts\"/><span class=\"ts\"/>= 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#set_kbd\">set_kbd</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#decarm\">decarm</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#clr_kbd\">clr_kbd</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#decckm\">decckm</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#clr_kbd\">clr_kbd</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#kbdapplic\">kbdapplic</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#clr_kbd\">clr_kbd</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#lnm\">lnm</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kbd_table\">kbd_table</a>[<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_num\">vc_num</a>].<a class=\"id\" href=\"#lockstate\">lockstate</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kbd_table\">kbd_table</a>[<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_num\">vc_num</a>].<a class=\"id\" href=\"#slockstate\">slockstate</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kbd_table\">kbd_table</a>[<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_num\">vc_num</a>].<a class=\"id\" href=\"#ledmode\">ledmode</a> = <a class=\"id\" href=\"#LED_SHOW_FLAGS\">LED_SHOW_FLAGS</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kbd_table\">kbd_table</a>[<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_num\">vc_num</a>].<a class=\"id\" href=\"#ledflagstate\">ledflagstate</a> = <a class=\"id\" href=\"#kbd_table\">kbd_table</a>[<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_num\">vc_num</a>].<a class=\"id\" href=\"#default_ledflagstate\">default_ledflagstate</a>;", 
"<span class=\"ts\"/><span class=\"comment\">/* do not do set_leds here because this causes an endless tasklet loop</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   when the keyboard hasn't been initialized yet */</span>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_cursor_type\">vc_cursor_type</a> = <a class=\"id\" href=\"#cur_default\">cur_default</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_complement_mask\">vc_complement_mask</a> = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_s_complement_mask\">vc_s_complement_mask</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#default_attr\">default_attr</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#update_attr\">update_attr</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_tab_stop\">vc_tab_stop</a>[0]<span class=\"ts\"/>= 0x01010100;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_tab_stop\">vc_tab_stop</a>[1]<span class=\"ts\"/>=", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_tab_stop\">vc_tab_stop</a>[2]<span class=\"ts\"/>=", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_tab_stop\">vc_tab_stop</a>[3]<span class=\"ts\"/>=", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_tab_stop\">vc_tab_stop</a>[4]<span class=\"ts\"/>=", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_tab_stop\">vc_tab_stop</a>[5]<span class=\"ts\"/>=", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_tab_stop\">vc_tab_stop</a>[6]<span class=\"ts\"/>=", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_tab_stop\">vc_tab_stop</a>[7]<span class=\"ts\"/>= 0x01010101;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_bell_pitch\">vc_bell_pitch</a> = <a class=\"id\" href=\"#DEFAULT_BELL_PITCH\">DEFAULT_BELL_PITCH</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_bell_duration\">vc_bell_duration</a> = <a class=\"id\" href=\"#DEFAULT_BELL_DURATION\">DEFAULT_BELL_DURATION</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#gotoxy\">gotoxy</a>(<a class=\"id\" href=\"#vc\">vc</a>, 0, 0);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#save_cur\">save_cur</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#do_clear\">do_clear</a>)", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#csi_J\">csi_J</a>(<a class=\"id\" href=\"#vc\">vc</a>, 2);", 
"}", 
"", 
"<span class=\"comment\">/* console_sem is held */</span>", 
"static void <a class=\"id\" href=\"#do_con_trol\">do_con_trol</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#vc\">vc</a>, int <a class=\"id\" href=\"#c\">c</a>)", 
"{", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *  Control characters can be used in the _middle_</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *  of an escape sequence.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#c\">c</a>) {", 
"<span class=\"ts\"/>case 0:", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case 7:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_bell_duration\">vc_bell_duration</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kd_mksound\">kd_mksound</a>(<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_bell_pitch\">vc_bell_pitch</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_bell_duration\">vc_bell_duration</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case 8:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bs\">bs</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case 9:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_pos\">vc_pos</a> -= (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a> << 1);", 
"<span class=\"ts\"/><span class=\"ts\"/>while (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a> &lt; <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_cols\">vc_cols</a> - 1) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_tab_stop\">vc_tab_stop</a>[<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a> >> 5] &amp; (1 << (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a> &amp; 31)))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_pos\">vc_pos</a> += (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a> << 1);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#notify_write\">notify_write</a>(<a class=\"id\" href=\"#vc\">vc</a>, '\\t');", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case 10: case 11: case 12:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#lf\">lf</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#is_kbd\">is_kbd</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#lnm\">lnm</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case 13:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cr\">cr</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case 14:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_charset\">vc_charset</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_translate\">vc_translate</a> = <a class=\"id\" href=\"#set_translate\">set_translate</a>(<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_G1_charset\">vc_G1_charset</a>, <a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_disp_ctrl\">vc_disp_ctrl</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case 15:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_charset\">vc_charset</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_translate\">vc_translate</a> = <a class=\"id\" href=\"#set_translate\">set_translate</a>(<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_G0_charset\">vc_G0_charset</a>, <a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_disp_ctrl\">vc_disp_ctrl</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case 24: case 26:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESnormal\">ESnormal</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case 27:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESesc\">ESesc</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case 127:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#del\">del</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case 128+27:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESsquare\">ESsquare</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>switch(<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ESesc\">ESesc</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESnormal\">ESnormal</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>switch (<a class=\"id\" href=\"#c\">c</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>case '[':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESsquare\">ESsquare</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case ']':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESnonstd\">ESnonstd</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case '%':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESpercent\">ESpercent</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'E':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cr\">cr</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#lf\">lf</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'M':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ri\">ri</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'D':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#lf\">lf</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'H':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_tab_stop\">vc_tab_stop</a>[<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a> >> 5] |= (1 << (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a> &amp; 31));", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'Z':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#respond_ID\">respond_ID</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case '7':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#save_cur\">save_cur</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case '8':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#restore_cur\">restore_cur</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case '(':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESsetG0\">ESsetG0</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case ')':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESsetG1\">ESsetG1</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case '#':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#EShash\">EShash</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'c':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#reset_terminal\">reset_terminal</a>(<a class=\"id\" href=\"#vc\">vc</a>, 1);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case '>':  <span class=\"comment\">/* Numeric keypad */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#clr_kbd\">clr_kbd</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#kbdapplic\">kbdapplic</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case '=':  <span class=\"comment\">/* Appl. keypad */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_kbd\">set_kbd</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#kbdapplic\">kbdapplic</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ESnonstd\">ESnonstd</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#c\">c</a>=='P') {   <span class=\"comment\">/* palette escape sequence */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_npar\">vc_npar</a> = 0; <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_npar\">vc_npar</a> &lt; <a class=\"id\" href=\"#NPAR\">NPAR</a>; <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_npar\">vc_npar</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_npar\">vc_npar</a>] = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_npar\">vc_npar</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESpalette\">ESpalette</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>} else if (<a class=\"id\" href=\"#c\">c</a>=='R') {   <span class=\"comment\">/* reset palette */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#reset_palette\">reset_palette</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESnormal\">ESnormal</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESnormal\">ESnormal</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ESpalette\">ESpalette</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#isxdigit\">isxdigit</a>(<a class=\"id\" href=\"#c\">c</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_npar\">vc_npar</a>++] = <a class=\"id\" href=\"#hex_to_bin\">hex_to_bin</a>(<a class=\"id\" href=\"#c\">c</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_npar\">vc_npar</a> == 7) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a> = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0] * 3, <a class=\"id\" href=\"#j\">j</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_palette\">vc_palette</a>[<a class=\"id\" href=\"#i\">i</a>] = 16 * <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[<a class=\"id\" href=\"#j\">j</a>++];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_palette\">vc_palette</a>[<a class=\"id\" href=\"#i\">i</a>++] += <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[<a class=\"id\" href=\"#j\">j</a>++];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_palette\">vc_palette</a>[<a class=\"id\" href=\"#i\">i</a>] = 16 * <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[<a class=\"id\" href=\"#j\">j</a>++];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_palette\">vc_palette</a>[<a class=\"id\" href=\"#i\">i</a>++] += <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[<a class=\"id\" href=\"#j\">j</a>++];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_palette\">vc_palette</a>[<a class=\"id\" href=\"#i\">i</a>] = 16 * <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[<a class=\"id\" href=\"#j\">j</a>++];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_palette\">vc_palette</a>[<a class=\"id\" href=\"#i\">i</a>] += <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[<a class=\"id\" href=\"#j\">j</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_palette\">set_palette</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESnormal\">ESnormal</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESnormal\">ESnormal</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ESsquare\">ESsquare</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_npar\">vc_npar</a> = 0; <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_npar\">vc_npar</a> &lt; <a class=\"id\" href=\"#NPAR\">NPAR</a>; <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_npar\">vc_npar</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_npar\">vc_npar</a>] = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_npar\">vc_npar</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESgetpars\">ESgetpars</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#c\">c</a> == '[') { <span class=\"comment\">/* Function key */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a>=<a class=\"id\" href=\"#ESfunckey\">ESfunckey</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_ques\">vc_ques</a> = (<a class=\"id\" href=\"#c\">c</a> == '?');", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_ques\">vc_ques</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ESgetpars\">ESgetpars</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#c\">c</a> == ';' && <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_npar\">vc_npar</a> &lt; <a class=\"id\" href=\"#NPAR\">NPAR</a> - 1) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_npar\">vc_npar</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>} else if (<a class=\"id\" href=\"#c\">c</a>>='0' && <a class=\"id\" href=\"#c\">c</a><='9') {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_npar\">vc_npar</a>] *= 10;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_npar\">vc_npar</a>] += <a class=\"id\" href=\"#c\">c</a> - '0';", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESgotpars\">ESgotpars</a>;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ESgotpars\">ESgotpars</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESnormal\">ESnormal</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>switch(<a class=\"id\" href=\"#c\">c</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'h':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_mode\">set_mode</a>(<a class=\"id\" href=\"#vc\">vc</a>, 1);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'l':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_mode\">set_mode</a>(<a class=\"id\" href=\"#vc\">vc</a>, 0);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'c':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_ques\">vc_ques</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_cursor_type\">vc_cursor_type</a> = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0] | (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[1] << 8) | (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[2] << 16);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_cursor_type\">vc_cursor_type</a> = <a class=\"id\" href=\"#cur_default\">cur_default</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'm':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_ques\">vc_ques</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#clear_selection\">clear_selection</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_complement_mask\">vc_complement_mask</a> = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0] << 8 | <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[1];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_complement_mask\">vc_complement_mask</a> = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_s_complement_mask\">vc_s_complement_mask</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'n':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_ques\">vc_ques</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0] == 5)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status_report\">status_report</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0] == 6)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cursor_report\">cursor_report</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_ques\">vc_ques</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_ques\">vc_ques</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>switch(<a class=\"id\" href=\"#c\">c</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'G': case '`':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]--;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#gotoxy\">gotoxy</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0], <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_y\">vc_y</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'A':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]++;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#gotoxy\">gotoxy</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_y\">vc_y</a> - <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'B': case 'e':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]++;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#gotoxy\">gotoxy</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_y\">vc_y</a> + <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'C': case 'a':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]++;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#gotoxy\">gotoxy</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a> + <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0], <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_y\">vc_y</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'D':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]++;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#gotoxy\">gotoxy</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a> - <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0], <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_y\">vc_y</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'E':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]++;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#gotoxy\">gotoxy</a>(<a class=\"id\" href=\"#vc\">vc</a>, 0, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_y\">vc_y</a> + <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'F':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]++;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#gotoxy\">gotoxy</a>(<a class=\"id\" href=\"#vc\">vc</a>, 0, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_y\">vc_y</a> - <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'd':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]--;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#gotoxay\">gotoxay</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a> ,<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'H': case 'f':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]--;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[1])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[1]--;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#gotoxay\">gotoxay</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[1], <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'J':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#csi_J\">csi_J</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'K':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#csi_K\">csi_K</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'L':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#csi_L\">csi_L</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'M':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#csi_M\">csi_M</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'P':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#csi_P\">csi_P</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'c':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#respond_ID\">respond_ID</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'g':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_tab_stop\">vc_tab_stop</a>[<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a> >> 5] &= ~(1 << (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a> &amp; 31));", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0] == 3) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_tab_stop\">vc_tab_stop</a>[0] =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_tab_stop\">vc_tab_stop</a>[1] =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_tab_stop\">vc_tab_stop</a>[2] =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_tab_stop\">vc_tab_stop</a>[3] =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_tab_stop\">vc_tab_stop</a>[4] =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_tab_stop\">vc_tab_stop</a>[5] =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_tab_stop\">vc_tab_stop</a>[6] =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_tab_stop\">vc_tab_stop</a>[7] = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'm':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#csi_m\">csi_m</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'q': <span class=\"comment\">/* DECLL - but only 3 leds */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* map 0,1,2,3 to 0,1,2,4 */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0] &lt; 4)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#setledstate\">setledstate</a>(<a class=\"id\" href=\"#kbd_table\">kbd_table</a> + <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_num\">vc_num</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0] &lt; 3) ? <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0] : 4);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'r':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]++;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[1])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[1] = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_rows\">vc_rows</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Minimum allowed region is 2 lines */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0] &lt; <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[1] &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[1] <= <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_rows\">vc_rows</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_top\">vc_top</a> = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0] - 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_bottom\">vc_bottom</a> = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[1];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#gotoxay\">gotoxay</a>(<a class=\"id\" href=\"#vc\">vc</a>, 0, 0);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 's':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#save_cur\">save_cur</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'u':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#restore_cur\">restore_cur</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'X':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#csi_X\">csi_X</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case '@':", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#csi_at\">csi_at</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_par\">vc_par</a>[0]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case ']': <span class=\"comment\">/* setterm functions */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#setterm_command\">setterm_command</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ESpercent\">ESpercent</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESnormal\">ESnormal</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>switch (<a class=\"id\" href=\"#c\">c</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>case '@':  <span class=\"comment\">/* defined in ISO 2022 */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf\">vc_utf</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>case 'G':  <span class=\"comment\">/* prelim official escape code */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>case '8':  <span class=\"comment\">/* retained for compatibility */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf\">vc_utf</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ESfunckey\">ESfunckey</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESnormal\">ESnormal</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#EShash\">EShash</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESnormal\">ESnormal</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#c\">c</a> == '8') {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* DEC screen alignment test. kludge :-) */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_video_erase_char\">vc_video_erase_char</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_video_erase_char\">vc_video_erase_char</a> &amp; 0xff00) | 'E';", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#csi_J\">csi_J</a>(<a class=\"id\" href=\"#vc\">vc</a>, 2);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_video_erase_char\">vc_video_erase_char</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_video_erase_char\">vc_video_erase_char</a> &amp; 0xff00) | ' ';", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#do_update_region\">do_update_region</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_origin\">vc_origin</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_screenbuf_size\">vc_screenbuf_size</a> / 2);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ESsetG0\">ESsetG0</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#c\">c</a> == '0')", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_G0_charset\">vc_G0_charset</a> = <a class=\"id\" href=\"#GRAF_MAP\">GRAF_MAP</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#c\">c</a> == 'B')", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_G0_charset\">vc_G0_charset</a> = <a class=\"id\" href=\"#LAT1_MAP\">LAT1_MAP</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#c\">c</a> == 'U')", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_G0_charset\">vc_G0_charset</a> = <a class=\"id\" href=\"#IBMPC_MAP\">IBMPC_MAP</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#c\">c</a> == 'K')", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_G0_charset\">vc_G0_charset</a> = <a class=\"id\" href=\"#USER_MAP\">USER_MAP</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_charset\">vc_charset</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_translate\">vc_translate</a> = <a class=\"id\" href=\"#set_translate\">set_translate</a>(<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_G0_charset\">vc_G0_charset</a>, <a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESnormal\">ESnormal</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ESsetG1\">ESsetG1</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#c\">c</a> == '0')", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_G1_charset\">vc_G1_charset</a> = <a class=\"id\" href=\"#GRAF_MAP\">GRAF_MAP</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#c\">c</a> == 'B')", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_G1_charset\">vc_G1_charset</a> = <a class=\"id\" href=\"#LAT1_MAP\">LAT1_MAP</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#c\">c</a> == 'U')", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_G1_charset\">vc_G1_charset</a> = <a class=\"id\" href=\"#IBMPC_MAP\">IBMPC_MAP</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#c\">c</a> == 'K')", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_G1_charset\">vc_G1_charset</a> = <a class=\"id\" href=\"#USER_MAP\">USER_MAP</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_charset\">vc_charset</a> == 1)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_translate\">vc_translate</a> = <a class=\"id\" href=\"#set_translate\">set_translate</a>(<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_G1_charset\">vc_G1_charset</a>, <a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESnormal\">ESnormal</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> = <a class=\"id\" href=\"#ESnormal\">ESnormal</a>;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"<span class=\"comment\">/* This is a temporary buffer used to prepare a tty console write</span>", 
"<span class=\"comment\"> * so that we can easily avoid touching user space while holding the</span>", 
"<span class=\"comment\"> * console spinlock.  It is allocated in con_init and is shared by</span>", 
"<span class=\"comment\"> * this code and the vc_screen read/write tty calls.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * We have to allocate this statically in the kernel data section</span>", 
"<span class=\"comment\"> * since console_init (and thus con_init) are called before any</span>", 
"<span class=\"comment\"> * kernel memory allocation is available.</span>", 
"<span class=\"comment\"> */</span>", 
"char <a class=\"id\" href=\"#con_buf\">con_buf</a>[<a class=\"id\" href=\"#CON_BUF_SIZE\">CON_BUF_SIZE</a>];", 
"<a class=\"id\" href=\"#DEFINE_MUTEX\">DEFINE_MUTEX</a>(<a class=\"id\" href=\"#con_buf_mtx\">con_buf_mtx</a>);", 
"", 
"<span class=\"comment\">/* is_double_width() is based on the wcwidth() implementation by</span>", 
"<span class=\"comment\"> * Markus Kuhn -- 2007-05-26 (Unicode 5.0)</span>", 
"<span class=\"comment\"> * Latest version: http://www.cl.cam.ac.uk/~mgk25/ucs/wcwidth.c</span>", 
"<span class=\"comment\"> */</span>", 
"struct <a class=\"id\" href=\"#interval\">interval</a> {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#uint32_t\">uint32_t</a> <a class=\"id\" href=\"#first\">first</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#uint32_t\">uint32_t</a> <a class=\"id\" href=\"#last\">last</a>;", 
"};", 
"", 
"static int <a class=\"id\" href=\"#bisearch\">bisearch</a>(<a class=\"id\" href=\"#uint32_t\">uint32_t</a> <a class=\"id\" href=\"#ucs\">ucs</a>, const struct <a class=\"id\" href=\"#interval\">interval</a> *<a class=\"id\" href=\"#table\">table</a>, int <a class=\"id\" href=\"#max\">max</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#min\">min</a> = 0;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#mid\">mid</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ucs\">ucs</a> &lt; <a class=\"id\" href=\"#table\">table</a>[0].<a class=\"id\" href=\"#first\">first</a> || <a class=\"id\" href=\"#ucs\">ucs</a> &gt; <a class=\"id\" href=\"#table\">table</a>[<a class=\"id\" href=\"#max\">max</a>].<a class=\"id\" href=\"#last\">last</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#max\">max</a> >= <a class=\"id\" href=\"#min\">min</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mid\">mid</a> = (<a class=\"id\" href=\"#min\">min</a> + <a class=\"id\" href=\"#max\">max</a>) / 2;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ucs\">ucs</a> &gt; <a class=\"id\" href=\"#table\">table</a>[<a class=\"id\" href=\"#mid\">mid</a>].<a class=\"id\" href=\"#last\">last</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#min\">min</a> = <a class=\"id\" href=\"#mid\">mid</a> + 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#ucs\">ucs</a> &lt; <a class=\"id\" href=\"#table\">table</a>[<a class=\"id\" href=\"#mid\">mid</a>].<a class=\"id\" href=\"#first\">first</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#max\">max</a> = <a class=\"id\" href=\"#mid\">mid</a> - 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#is_double_width\">is_double_width</a>(<a class=\"id\" href=\"#uint32_t\">uint32_t</a> <a class=\"id\" href=\"#ucs\">ucs</a>)", 
"{", 
"<span class=\"ts\"/>static const struct <a class=\"id\" href=\"#interval\">interval</a> <a class=\"id\" href=\"#double_width\">double_width</a>[] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>{ 0x1100, 0x115F }, { 0x2329, 0x232A }, { 0x2E80, 0x303E },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ 0x3040, 0xA4CF }, { 0xAC00, 0xD7A3 }, { 0xF900, 0xFAFF },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ 0xFE10, 0xFE19 }, { 0xFE30, 0xFE6F }, { 0xFF00, 0xFF60 },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ 0xFFE0, 0xFFE6 }, { 0x20000, 0x2FFFD }, { 0x30000, 0x3FFFD }", 
"<span class=\"ts\"/>};", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#bisearch\">bisearch</a>(<a class=\"id\" href=\"#ucs\">ucs</a>, <a class=\"id\" href=\"#double_width\">double_width</a>, <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#double_width\">double_width</a>) - 1);", 
"}", 
"", 
"<span class=\"comment\">/* acquires console_sem */</span>", 
"static int <a class=\"id\" href=\"#do_con_write\">do_con_write</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, const unsigned char *<a class=\"id\" href=\"#buf\">buf</a>, int <a class=\"id\" href=\"#count\">count</a>)", 
"{", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#VT_BUF_VRAM_ONLY\">VT_BUF_VRAM_ONLY</a>", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#FLUSH\">FLUSH</a> do { } while(0);", 
"#else", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#FLUSH\">FLUSH</a> if (<a class=\"id\" href=\"#draw_x\">draw_x</a> >= 0) { \\", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_sw\">vc_sw</a>-><a class=\"id\" href=\"#con_putcs\">con_putcs</a>(<a class=\"id\" href=\"#vc\">vc</a>, (<a class=\"id\" href=\"#u16\">u16</a> *)<a class=\"id\" href=\"#draw_from\">draw_from</a>, (<a class=\"id\" href=\"#u16\">u16</a> *)<a class=\"id\" href=\"#draw_to\">draw_to</a> - (<a class=\"id\" href=\"#u16\">u16</a> *)<a class=\"id\" href=\"#draw_from\">draw_from</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_y\">vc_y</a>, <a class=\"id\" href=\"#draw_x\">draw_x</a>); \\", 
"<span class=\"ts\"/><a class=\"id\" href=\"#draw_x\">draw_x</a> = -1; \\", 
"<span class=\"ts\"/>}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#c\">c</a>, <a class=\"id\" href=\"#tc\">tc</a>, <a class=\"id\" href=\"#ok\">ok</a>, <a class=\"id\" href=\"#n\">n</a> = 0, <a class=\"id\" href=\"#draw_x\">draw_x</a> = -1;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#currcons\">currcons</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#draw_from\">draw_from</a> = 0, <a class=\"id\" href=\"#draw_to\">draw_to</a> = 0;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#vc\">vc</a>;", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#vc_attr\">vc_attr</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#vt_notifier_param\">vt_notifier_param</a> <a class=\"id\" href=\"#param\">param</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#uint8_t\">uint8_t</a> <a class=\"id\" href=\"#rescan\">rescan</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#uint8_t\">uint8_t</a> <a class=\"id\" href=\"#inverse\">inverse</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#uint8_t\">uint8_t</a> <a class=\"id\" href=\"#width\">width</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#himask\">himask</a>, <a class=\"id\" href=\"#charmask\">charmask</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#in_interrupt\">in_interrupt</a>())", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#count\">count</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#might_sleep\">might_sleep</a>();", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acquire_console_sem\">acquire_console_sem</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#driver_data\">driver_data</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a> == <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"vt: argh, driver_data is NULL !\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#release_console_sem\">release_console_sem</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#currcons\">currcons</a> = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_num\">vc_num</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#vc_cons_allocated\">vc_cons_allocated</a>(<a class=\"id\" href=\"#currcons\">currcons</a>)) {", 
"<span class=\"ts\"/>    <span class=\"comment\">/* could this happen? */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk_once\">printk_once</a>(\"con_write: tty %d not allocated\\n\", <a class=\"id\" href=\"#currcons\">currcons</a>+1);", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#release_console_sem\">release_console_sem</a>();", 
"<span class=\"ts\"/>    return 0;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#himask\">himask</a> = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_hi_font_mask\">vc_hi_font_mask</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#charmask\">charmask</a> = <a class=\"id\" href=\"#himask\">himask</a> ? 0x1ff : 0xff;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* undraw cursor first */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#IS_FG\">IS_FG</a>(<a class=\"id\" href=\"#vc\">vc</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hide_cursor\">hide_cursor</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#param\">param</a>.<a class=\"id\" href=\"#vc\">vc</a> = <a class=\"id\" href=\"#vc\">vc</a>;", 
"", 
"<span class=\"ts\"/>while (!<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#stopped\">stopped</a> && <a class=\"id\" href=\"#count\">count</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#orig\">orig</a> = *<a class=\"id\" href=\"#buf\">buf</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#c\">c</a> = <a class=\"id\" href=\"#orig\">orig</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#buf\">buf</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#n\">n</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#count\">count</a>--;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rescan\">rescan</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#inverse\">inverse</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#width\">width</a> = 1;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Do no translation at all in control states */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> != <a class=\"id\" href=\"#ESnormal\">ESnormal</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tc\">tc</a> = <a class=\"id\" href=\"#c\">c</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>} else if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf\">vc_utf</a> && !<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_disp_ctrl\">vc_disp_ctrl</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>    <span class=\"comment\">/* Combine UTF-8 into Unicode in vc_utf_char.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/>     * vc_utf_count is the number of continuation bytes still</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/>     * expected to arrive.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/>     * vc_npar is the number of continuation bytes arrived so</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/>     * far</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/>     */</span>", 
"<a class=\"id\" href=\"#rescan_last_byte\">rescan_last_byte</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>    if ((<a class=\"id\" href=\"#c\">c</a> &amp; 0xc0) == 0x80) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Continuation byte received */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>static const <a class=\"id\" href=\"#uint32_t\">uint32_t</a> <a class=\"id\" href=\"#utf8_length_changes\">utf8_length_changes</a>[] = { 0x0000007f, 0x000007ff, 0x0000ffff, 0x001fffff, 0x03ffffff, 0x7fffffff };", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf_count\">vc_utf_count</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf_char\">vc_utf_char</a> = (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf_char\">vc_utf_char</a> << 6) | (<a class=\"id\" href=\"#c\">c</a> &amp; 0x3f);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_npar\">vc_npar</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    if (--<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf_count\">vc_utf_count</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Still need some bytes */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    }", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <span class=\"comment\">/* Got a whole character */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#c\">c</a> = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf_char\">vc_utf_char</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <span class=\"comment\">/* Reject overlong sequences */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    if (<a class=\"id\" href=\"#c\">c</a> <= <a class=\"id\" href=\"#utf8_length_changes\">utf8_length_changes</a>[<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_npar\">vc_npar</a> - 1] ||", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#c\">c</a> &gt; <a class=\"id\" href=\"#utf8_length_changes\">utf8_length_changes</a>[<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_npar\">vc_npar</a>])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#c\">c</a> = 0xfffd;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <span class=\"comment\">/* Unexpected continuation byte */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf_count\">vc_utf_count</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#c\">c</a> = 0xfffd;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>    } else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Single ASCII byte or first byte of a sequence received */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf_count\">vc_utf_count</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <span class=\"comment\">/* Continuation byte expected */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#rescan\">rescan</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf_count\">vc_utf_count</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#c\">c</a> = 0xfffd;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>} else if (<a class=\"id\" href=\"#c\">c</a> &gt; 0x7f) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <span class=\"comment\">/* First byte of a multibyte sequence received */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_npar\">vc_npar</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    if ((<a class=\"id\" href=\"#c\">c</a> &amp; 0xe0) == 0xc0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf_count\">vc_utf_count</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf_char\">vc_utf_char</a> = (<a class=\"id\" href=\"#c\">c</a> &amp; 0x1f);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    } else if ((<a class=\"id\" href=\"#c\">c</a> &amp; 0xf0) == 0xe0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf_count\">vc_utf_count</a> = 2;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf_char\">vc_utf_char</a> = (<a class=\"id\" href=\"#c\">c</a> &amp; 0x0f);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    } else if ((<a class=\"id\" href=\"#c\">c</a> &amp; 0xf8) == 0xf0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf_count\">vc_utf_count</a> = 3;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf_char\">vc_utf_char</a> = (<a class=\"id\" href=\"#c\">c</a> &amp; 0x07);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    } else if ((<a class=\"id\" href=\"#c\">c</a> &amp; 0xfc) == 0xf8) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf_count\">vc_utf_count</a> = 4;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf_char\">vc_utf_char</a> = (<a class=\"id\" href=\"#c\">c</a> &amp; 0x03);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    } else if ((<a class=\"id\" href=\"#c\">c</a> &amp; 0xfe) == 0xfc) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf_count\">vc_utf_count</a> = 5;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf_char\">vc_utf_char</a> = (<a class=\"id\" href=\"#c\">c</a> &amp; 0x01);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    } else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* 254 and 255 are invalid */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#c\">c</a> = 0xfffd;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    }", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf_count\">vc_utf_count</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Still need some bytes */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    }", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Nothing to do if an ASCII byte was received */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>    }", 
"<span class=\"ts\"/><span class=\"ts\"/>    <span class=\"comment\">/* End of UTF-8 decoding. */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>    <span class=\"comment\">/* c is the received character, or U+FFFD for invalid sequences. */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>    <span class=\"comment\">/* Replace invalid Unicode code points with U+FFFD too */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>    if ((<a class=\"id\" href=\"#c\">c</a> >= 0xd800 && <a class=\"id\" href=\"#c\">c</a> <= 0xdfff) || <a class=\"id\" href=\"#c\">c</a> == 0xfffe || <a class=\"id\" href=\"#c\">c</a> == 0xffff)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#c\">c</a> = 0xfffd;", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#tc\">tc</a> = <a class=\"id\" href=\"#c\">c</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>} else {<span class=\"ts\"/><span class=\"comment\">/* no utf or alternate charset mode */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#tc\">tc</a> = <a class=\"id\" href=\"#vc_translate\">vc_translate</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#c\">c</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#param\">param</a>.<a class=\"id\" href=\"#c\">c</a> = <a class=\"id\" href=\"#tc\">tc</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#atomic_notifier_call_chain\">atomic_notifier_call_chain</a>(&amp;<a class=\"id\" href=\"#vt_notifier_list\">vt_notifier_list</a>, <a class=\"id\" href=\"#VT_PREWRITE\">VT_PREWRITE</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>&amp;<a class=\"id\" href=\"#param\">param</a>) == <a class=\"id\" href=\"#NOTIFY_STOP\">NOTIFY_STOP</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"                <span class=\"comment\">/* If the original code was a control character we</span>", 
"<span class=\"comment\">                 * only allow a glyph to be displayed if the code is</span>", 
"<span class=\"comment\">                 * not normally used (such as for cursor movement) or</span>", 
"<span class=\"comment\">                 * if the disp_ctrl mode has been explicitly enabled.</span>", 
"<span class=\"comment\">                 * Certain characters (as given by the CTRL_ALWAYS</span>", 
"<span class=\"comment\">                 * bitmap) are always displayed as control characters,</span>", 
"<span class=\"comment\">                 * as the console would be pretty useless without</span>", 
"<span class=\"comment\">                 * them; to display an arbitrary font position use the</span>", 
"<span class=\"comment\">                 * direct-to-font zone in UTF-8 mode.</span>", 
"<span class=\"comment\">                 */</span>", 
"                <a class=\"id\" href=\"#ok\">ok</a> = <a class=\"id\" href=\"#tc\">tc</a> && (<a class=\"id\" href=\"#c\">c</a> >= 32 ||", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    !(<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_disp_ctrl\">vc_disp_ctrl</a> ? (<a class=\"id\" href=\"#CTRL_ALWAYS\">CTRL_ALWAYS</a> >> <a class=\"id\" href=\"#c\">c</a>) &amp; 1 :", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf\">vc_utf</a> || ((<a class=\"id\" href=\"#CTRL_ACTION\">CTRL_ACTION</a> >> <a class=\"id\" href=\"#c\">c</a>) &amp; 1)))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>&& (<a class=\"id\" href=\"#c\">c</a> != 127 || <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_disp_ctrl\">vc_disp_ctrl</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>&& (<a class=\"id\" href=\"#c\">c</a> != 128+27);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_state\">vc_state</a> == <a class=\"id\" href=\"#ESnormal\">ESnormal</a> && <a class=\"id\" href=\"#ok\">ok</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf\">vc_utf</a> && !<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_disp_ctrl\">vc_disp_ctrl</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#is_double_width\">is_double_width</a>(<a class=\"id\" href=\"#c\">c</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#width\">width</a> = 2;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Now try to find out how to display it */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tc\">tc</a> = <a class=\"id\" href=\"#conv_uni_to_pc\">conv_uni_to_pc</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#tc\">tc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#tc\">tc</a> &amp; ~<a class=\"id\" href=\"#charmask\">charmask</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#tc\">tc</a> == -1 || <a class=\"id\" href=\"#tc\">tc</a> == -2) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    continue; <span class=\"comment\">/* nothing to display */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Glyph not found */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if ((!(<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf\">vc_utf</a> && !<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_disp_ctrl\">vc_disp_ctrl</a>) || <a class=\"id\" href=\"#c\">c</a> &lt; 128) && !(<a class=\"id\" href=\"#c\">c</a> &amp; ~<a class=\"id\" href=\"#charmask\">charmask</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <span class=\"comment\">/* In legacy mode use the glyph we get by a 1:1 mapping.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       This would make absolutely no sense with Unicode in mind,</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       but do this for ASCII characters since a font may lack</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       Unicode mapping info and we don't want to end up with</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       having question marks only. */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#tc\">tc</a> = <a class=\"id\" href=\"#c\">c</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <span class=\"comment\">/* Display U+FFFD. If it's not found, display an inverse question mark. */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#tc\">tc</a> = <a class=\"id\" href=\"#conv_uni_to_pc\">conv_uni_to_pc</a>(<a class=\"id\" href=\"#vc\">vc</a>, 0xfffd);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    if (<a class=\"id\" href=\"#tc\">tc</a> &lt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#inverse\">inverse</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tc\">tc</a> = <a class=\"id\" href=\"#conv_uni_to_pc\">conv_uni_to_pc</a>(<a class=\"id\" href=\"#vc\">vc</a>, '?');", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#tc\">tc</a> &lt; 0) <a class=\"id\" href=\"#tc\">tc</a> = '?';", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    }", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#inverse\">inverse</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc_attr\">vc_attr</a> = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_attr\">vc_attr</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* invert vc_attr */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_can_do_color\">vc_can_do_color</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc_attr\">vc_attr</a> = (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_attr\">vc_attr</a>) ^ 0x08;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>} else if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_hi_font_mask\">vc_hi_font_mask</a> == 0x100) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc_attr\">vc_attr</a> = ((<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_attr\">vc_attr</a>) &amp; 0x11) | (((<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_attr\">vc_attr</a>) &amp; 0xe0) >> 4) | (((<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_attr\">vc_attr</a>) &amp; 0x0e) << 4);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc_attr\">vc_attr</a> = ((<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_attr\">vc_attr</a>) &amp; 0x88) | (((<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_attr\">vc_attr</a>) &amp; 0x70) >> 4) | (((<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_attr\">vc_attr</a>) &amp; 0x07) << 4);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#FLUSH\">FLUSH</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>while (1) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_need_wrap\">vc_need_wrap</a> || <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_decim\">vc_decim</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#FLUSH\">FLUSH</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_need_wrap\">vc_need_wrap</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cr\">cr</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#lf\">lf</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_decim\">vc_decim</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#insert_char\">insert_char</a>(<a class=\"id\" href=\"#vc\">vc</a>, 1);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#scr_writew\">scr_writew</a>(<a class=\"id\" href=\"#himask\">himask</a> ?", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     ((<a class=\"id\" href=\"#vc_attr\">vc_attr</a> << 8) &amp; ~<a class=\"id\" href=\"#himask\">himask</a>) + ((<a class=\"id\" href=\"#tc\">tc</a> &amp; 0x100) ? <a class=\"id\" href=\"#himask\">himask</a> : 0) + (<a class=\"id\" href=\"#tc\">tc</a> &amp; 0xff) :", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     (<a class=\"id\" href=\"#vc_attr\">vc_attr</a> << 8) + <a class=\"id\" href=\"#tc\">tc</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   (<a class=\"id\" href=\"#u16\">u16</a> *) <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_pos\">vc_pos</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#DO_UPDATE\">DO_UPDATE</a>(<a class=\"id\" href=\"#vc\">vc</a>) && <a class=\"id\" href=\"#draw_x\">draw_x</a> &lt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#draw_x\">draw_x</a> = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#draw_from\">draw_from</a> = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_pos\">vc_pos</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a> == <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_cols\">vc_cols</a> - 1) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_need_wrap\">vc_need_wrap</a> = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_decawm\">vc_decawm</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#draw_to\">draw_to</a> = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_pos\">vc_pos</a> + 2;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#draw_to\">draw_to</a> = (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_pos\">vc_pos</a> += 2);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!--<a class=\"id\" href=\"#width\">width</a>) break;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tc\">tc</a> = <a class=\"id\" href=\"#conv_uni_to_pc\">conv_uni_to_pc</a>(<a class=\"id\" href=\"#vc\">vc</a>, ' '); <span class=\"comment\">/* A space is printed in the second column */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#tc\">tc</a> &lt; 0) <a class=\"id\" href=\"#tc\">tc</a> = ' ';", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#notify_write\">notify_write</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#c\">c</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#inverse\">inverse</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#FLUSH\">FLUSH</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rescan\">rescan</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rescan\">rescan</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#inverse\">inverse</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#width\">width</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#c\">c</a> = <a class=\"id\" href=\"#orig\">orig</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#rescan_last_byte\">rescan_last_byte</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#FLUSH\">FLUSH</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#do_con_trol\">do_con_trol</a>(<a class=\"id\" href=\"#tty\">tty</a>, <a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#orig\">orig</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#FLUSH\">FLUSH</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#console_conditional_schedule\">console_conditional_schedule</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#release_console_sem\">release_console_sem</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#notify_update\">notify_update</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#n\">n</a>;", 
"#<a class=\"id\" href=\"#undef\">undef</a> <a class=\"id\" href=\"#FLUSH\">FLUSH</a>", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * This is the console switching callback.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Doing console switching in a process context allows</span>", 
"<span class=\"comment\"> * us to do the switches asynchronously (needed when we want</span>", 
"<span class=\"comment\"> * to switch due to a keyboard interrupt).  Synchronization</span>", 
"<span class=\"comment\"> * with other console code and prevention of re-entrancy is</span>", 
"<span class=\"comment\"> * ensured with console_sem.</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#console_callback\">console_callback</a>(struct <a class=\"id\" href=\"#work_struct\">work_struct</a> *<a class=\"id\" href=\"#ignored\">ignored</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acquire_console_sem\">acquire_console_sem</a>();", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#want_console\">want_console</a> >= 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#want_console\">want_console</a> != <a class=\"id\" href=\"#fg_console\">fg_console</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#vc_cons_allocated\">vc_cons_allocated</a>(<a class=\"id\" href=\"#want_console\">want_console</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hide_cursor\">hide_cursor</a>(<a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#fg_console\">fg_console</a>].<a class=\"id\" href=\"#d\">d</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#change_console\">change_console</a>(<a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#want_console\">want_console</a>].<a class=\"id\" href=\"#d\">d</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* we only changed when the console had already</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   been allocated - a new console is not created</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   in an interrupt routine */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#want_console\">want_console</a> = -1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#do_poke_blanked_console\">do_poke_blanked_console</a>) { <span class=\"comment\">/* do not unblank for a LED change */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#do_poke_blanked_console\">do_poke_blanked_console</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#poke_blanked_console\">poke_blanked_console</a>();", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#scrollback_delta\">scrollback_delta</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#vc\">vc</a> = <a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#fg_console\">fg_console</a>].<a class=\"id\" href=\"#d\">d</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#clear_selection\">clear_selection</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_mode\">vc_mode</a> == <a class=\"id\" href=\"#KD_TEXT\">KD_TEXT</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_sw\">vc_sw</a>-><a class=\"id\" href=\"#con_scrolldelta\">con_scrolldelta</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#scrollback_delta\">scrollback_delta</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#scrollback_delta\">scrollback_delta</a> = 0;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#blank_timer_expired\">blank_timer_expired</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#do_blank_screen\">do_blank_screen</a>(0);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blank_timer_expired\">blank_timer_expired</a> = 0;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#notify_update\">notify_update</a>(<a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#fg_console\">fg_console</a>].<a class=\"id\" href=\"#d\">d</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#release_console_sem\">release_console_sem</a>();", 
"}", 
"", 
"int <a class=\"id\" href=\"#set_console\">set_console</a>(int <a class=\"id\" href=\"#nr\">nr</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#vc\">vc</a> = <a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#fg_console\">fg_console</a>].<a class=\"id\" href=\"#d\">d</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#vc_cons_allocated\">vc_cons_allocated</a>(<a class=\"id\" href=\"#nr\">nr</a>) || <a class=\"id\" href=\"#vt_dont_switch\">vt_dont_switch</a> ||", 
"<span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vt_mode\">vt_mode</a>.<a class=\"id\" href=\"#mode\">mode</a> == <a class=\"id\" href=\"#VT_AUTO\">VT_AUTO</a> && <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_mode\">vc_mode</a> == <a class=\"id\" href=\"#KD_GRAPHICS\">KD_GRAPHICS</a>)) {", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * Console switch will fail in console_callback() or</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * change_console() so there is no point scheduling</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * the callback</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * Existing set_console() users don't check the return</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * value so this shouldn't break anything</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#want_console\">want_console</a> = <a class=\"id\" href=\"#nr\">nr</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#schedule_console_callback\">schedule_console_callback</a>();", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"struct <a class=\"id\" href=\"#tty_driver\">tty_driver</a> *<a class=\"id\" href=\"#console_driver\">console_driver</a>;", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_VT_CONSOLE\">CONFIG_VT_CONSOLE</a>", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * vt_kmsg_redirect() - Sets/gets the kernel message console</span>", 
"<span class=\"comment\"> * @new:<span class=\"ts\"/>The new virtual terminal number or -1 if the console should stay</span>", 
"<span class=\"comment\"> * <span class=\"ts\"/><span class=\"ts\"/>unchanged</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * By default, the kernel messages are always printed on the current virtual</span>", 
"<span class=\"comment\"> * console. However, the user may modify that default with the</span>", 
"<span class=\"comment\"> * TIOCL_SETKMSGREDIRECT ioctl call.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This function sets the kernel message console to be @new. It returns the old</span>", 
"<span class=\"comment\"> * virtual console number. The virtual terminal number 0 (both as parameter and</span>", 
"<span class=\"comment\"> * return value) means no redirection (i.e. always printed on the currently</span>", 
"<span class=\"comment\"> * active console).</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * The parameter -1 means that only the current console is returned, but the</span>", 
"<span class=\"comment\"> * value is not modified. You may use the macro vt_get_kmsg_redirect() in that</span>", 
"<span class=\"comment\"> * case to make the code more understandable.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * When the kernel is compiled without CONFIG_VT_CONSOLE, this function ignores</span>", 
"<span class=\"comment\"> * the parameter and always returns 0.</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#vt_kmsg_redirect\">vt_kmsg_redirect</a>(int <a class=\"id\" href=\"#new\">new</a>)", 
"{", 
"<span class=\"ts\"/>static int <a class=\"id\" href=\"#kmsg_con\">kmsg_con</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#new\">new</a> != -1)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#xchg\">xchg</a>(&amp;<a class=\"id\" href=\"#kmsg_con\">kmsg_con</a>, <a class=\"id\" href=\"#new\">new</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#kmsg_con\">kmsg_con</a>;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Console on virtual terminal</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * The console must be locked when we get here.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static void <a class=\"id\" href=\"#vt_console_print\">vt_console_print</a>(struct <a class=\"id\" href=\"#console\">console</a> *<a class=\"id\" href=\"#co\">co</a>, const char *<a class=\"id\" href=\"#b\">b</a>, unsigned <a class=\"id\" href=\"#count\">count</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#vc\">vc</a> = <a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#fg_console\">fg_console</a>].<a class=\"id\" href=\"#d\">d</a>;", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#c\">c</a>;", 
"<span class=\"ts\"/>static <a class=\"id\" href=\"#DEFINE_SPINLOCK\">DEFINE_SPINLOCK</a>(<a class=\"id\" href=\"#printing_lock\">printing_lock</a>);", 
"<span class=\"ts\"/>const <a class=\"id\" href=\"#ushort\">ushort</a> *<a class=\"id\" href=\"#start\">start</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ushort\">ushort</a> <a class=\"id\" href=\"#cnt\">cnt</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ushort\">ushort</a> <a class=\"id\" href=\"#myx\">myx</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#kmsg_console\">kmsg_console</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* console busy or not yet initialized */</span>", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#printable\">printable</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#spin_trylock\">spin_trylock</a>(&amp;<a class=\"id\" href=\"#printing_lock\">printing_lock</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kmsg_console\">kmsg_console</a> = <a class=\"id\" href=\"#vt_get_kmsg_redirect\">vt_get_kmsg_redirect</a>();", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#kmsg_console\">kmsg_console</a> && <a class=\"id\" href=\"#vc_cons_allocated\">vc_cons_allocated</a>(<a class=\"id\" href=\"#kmsg_console\">kmsg_console</a> - 1))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a> = <a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#kmsg_console\">kmsg_console</a> - 1].<a class=\"id\" href=\"#d\">d</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* read `x' only after setting currcons properly (otherwise</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   the `x' macro will read the x of the foreground console). */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#myx\">myx</a> = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#vc_cons_allocated\">vc_cons_allocated</a>(<a class=\"id\" href=\"#fg_console\">fg_console</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* impossible */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* printk(\"vt_console_print: tty %d not allocated ??\\n\", currcons+1); */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#quit\">quit</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_mode\">vc_mode</a> != <a class=\"id\" href=\"#KD_TEXT\">KD_TEXT</a> && !<a class=\"id\" href=\"#vt_force_oops_output\">vt_force_oops_output</a>(<a class=\"id\" href=\"#vc\">vc</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#quit\">quit</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* undraw cursor first */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#IS_FG\">IS_FG</a>(<a class=\"id\" href=\"#vc\">vc</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hide_cursor\">hide_cursor</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#start\">start</a> = (<a class=\"id\" href=\"#ushort\">ushort</a> *)<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_pos\">vc_pos</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Contrived structure to try to emulate original need_wrap behaviour</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Problems caused when we have need_wrap set on '\\n' character */</span>", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#count\">count</a>--) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#c\">c</a> = *<a class=\"id\" href=\"#b\">b</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#c\">c</a> == 10 || <a class=\"id\" href=\"#c\">c</a> == 13 || <a class=\"id\" href=\"#c\">c</a> == 8 || <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_need_wrap\">vc_need_wrap</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#cnt\">cnt</a> &gt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#CON_IS_VISIBLE\">CON_IS_VISIBLE</a>(<a class=\"id\" href=\"#vc\">vc</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_sw\">vc_sw</a>-><a class=\"id\" href=\"#con_putcs\">con_putcs</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#start\">start</a>, <a class=\"id\" href=\"#cnt\">cnt</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_y\">vc_y</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a> += <a class=\"id\" href=\"#cnt\">cnt</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_need_wrap\">vc_need_wrap</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a>--;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cnt\">cnt</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#c\">c</a> == 8) {<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* backspace */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bs\">bs</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#start\">start</a> = (<a class=\"id\" href=\"#ushort\">ushort</a> *)<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_pos\">vc_pos</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#myx\">myx</a> = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#c\">c</a> != 13)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#lf\">lf</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cr\">cr</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#start\">start</a> = (<a class=\"id\" href=\"#ushort\">ushort</a> *)<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_pos\">vc_pos</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#myx\">myx</a> = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#c\">c</a> == 10 || <a class=\"id\" href=\"#c\">c</a> == 13)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#scr_writew\">scr_writew</a>((<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_attr\">vc_attr</a> << 8) + <a class=\"id\" href=\"#c\">c</a>, (unsigned short *)<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_pos\">vc_pos</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#notify_write\">notify_write</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#c\">c</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cnt\">cnt</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#myx\">myx</a> == <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_cols\">vc_cols</a> - 1) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_need_wrap\">vc_need_wrap</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_pos\">vc_pos</a> += 2;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#myx\">myx</a>++;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cnt\">cnt</a> &gt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#CON_IS_VISIBLE\">CON_IS_VISIBLE</a>(<a class=\"id\" href=\"#vc\">vc</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_sw\">vc_sw</a>-><a class=\"id\" href=\"#con_putcs\">con_putcs</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#start\">start</a>, <a class=\"id\" href=\"#cnt\">cnt</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_y\">vc_y</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a> += <a class=\"id\" href=\"#cnt\">cnt</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a> == <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_cols\">vc_cols</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a>--;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_need_wrap\">vc_need_wrap</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#set_cursor\">set_cursor</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#notify_update\">notify_update</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"", 
"<a class=\"id\" href=\"#quit\">quit</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock\">spin_unlock</a>(&amp;<a class=\"id\" href=\"#printing_lock\">printing_lock</a>);", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#tty_driver\">tty_driver</a> *<a class=\"id\" href=\"#vt_console_device\">vt_console_device</a>(struct <a class=\"id\" href=\"#console\">console</a> *<a class=\"id\" href=\"#c\">c</a>, int *<a class=\"id\" href=\"#index\">index</a>)", 
"{", 
"<span class=\"ts\"/>*<a class=\"id\" href=\"#index\">index</a> = <a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#index\">index</a> ? <a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#index\">index</a>-1 : <a class=\"id\" href=\"#fg_console\">fg_console</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#console_driver\">console_driver</a>;", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#console\">console</a> <a class=\"id\" href=\"#vt_console_driver\">vt_console_driver</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a><span class=\"ts\"/><span class=\"ts\"/>= \"tty\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#write\">write</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#vt_console_print\">vt_console_print</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#device\">device</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#vt_console_device\">vt_console_device</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#unblank\">unblank</a><span class=\"ts\"/>= <a class=\"id\" href=\"#unblank_screen\">unblank_screen</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#flags\">flags</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#CON_PRINTBUFFER\">CON_PRINTBUFFER</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#index\">index</a><span class=\"ts\"/><span class=\"ts\"/>= -1,", 
"};", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Handling of Linux-specific VC ioctls</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Generally a bit racy with respect to console_sem().</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * There are some functions which don't need it.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * There are some functions which can sleep for arbitrary periods</span>", 
"<span class=\"comment\"> * (paste_selection) but we don't need the lock there anyway.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * set_selection has locking, and definitely needs it</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"int <a class=\"id\" href=\"#tioclinux\">tioclinux</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, unsigned long <a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#type\">type</a>, <a class=\"id\" href=\"#data\">data</a>;", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#p\">p</a> = (char <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#arg\">arg</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#lines\">lines</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#current\">current</a>-><a class=\"id\" href=\"#signal\">signal</a>-><a class=\"id\" href=\"#tty\">tty</a> != <a class=\"id\" href=\"#tty\">tty</a> && !<a class=\"id\" href=\"#capable\">capable</a>(<a class=\"id\" href=\"#CAP_SYS_ADMIN\">CAP_SYS_ADMIN</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EPERM\">EPERM</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#get_user\">get_user</a>(<a class=\"id\" href=\"#type\">type</a>, <a class=\"id\" href=\"#p\">p</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = 0;", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#type\">type</a>)", 
"<span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCL_SETSEL\">TIOCL_SETSEL</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#acquire_console_sem\">acquire_console_sem</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#set_selection\">set_selection</a>((struct <a class=\"id\" href=\"#tiocl_selection\">tiocl_selection</a> <a class=\"id\" href=\"#__user\">__user</a> *)(<a class=\"id\" href=\"#p\">p</a>+1), <a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#release_console_sem\">release_console_sem</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCL_PASTESEL\">TIOCL_PASTESEL</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#paste_selection\">paste_selection</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCL_UNBLANKSCREEN\">TIOCL_UNBLANKSCREEN</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#acquire_console_sem\">acquire_console_sem</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#unblank_screen\">unblank_screen</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#release_console_sem\">release_console_sem</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCL_SELLOADLUT\">TIOCL_SELLOADLUT</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#sel_loadlut\">sel_loadlut</a>(<a class=\"id\" href=\"#p\">p</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCL_GETSHIFTSTATE\">TIOCL_GETSHIFTSTATE</a>:", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Make it possible to react to Shift+Mousebutton.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Note that 'shift_state' is an undocumented</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * kernel-internal variable; programs not closely</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * related to the kernel should not use this.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/> <span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#data\">data</a> = <a class=\"id\" href=\"#shift_state\">shift_state</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#__put_user\">__put_user</a>(<a class=\"id\" href=\"#data\">data</a>, <a class=\"id\" href=\"#p\">p</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCL_GETMOUSEREPORTING\">TIOCL_GETMOUSEREPORTING</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#data\">data</a> = <a class=\"id\" href=\"#mouse_reporting\">mouse_reporting</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#__put_user\">__put_user</a>(<a class=\"id\" href=\"#data\">data</a>, <a class=\"id\" href=\"#p\">p</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCL_SETVESABLANK\">TIOCL_SETVESABLANK</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#set_vesa_blanking\">set_vesa_blanking</a>(<a class=\"id\" href=\"#p\">p</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCL_GETKMSGREDIRECT\">TIOCL_GETKMSGREDIRECT</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#data\">data</a> = <a class=\"id\" href=\"#vt_get_kmsg_redirect\">vt_get_kmsg_redirect</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#__put_user\">__put_user</a>(<a class=\"id\" href=\"#data\">data</a>, <a class=\"id\" href=\"#p\">p</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCL_SETKMSGREDIRECT\">TIOCL_SETKMSGREDIRECT</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#capable\">capable</a>(<a class=\"id\" href=\"#CAP_SYS_ADMIN\">CAP_SYS_ADMIN</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EPERM\">EPERM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#get_user\">get_user</a>(<a class=\"id\" href=\"#data\">data</a>, <a class=\"id\" href=\"#p\">p</a>+1))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vt_kmsg_redirect\">vt_kmsg_redirect</a>(<a class=\"id\" href=\"#data\">data</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCL_GETFGCONSOLE\">TIOCL_GETFGCONSOLE</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#fg_console\">fg_console</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCL_SCROLLCONSOLE\">TIOCL_SCROLLCONSOLE</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#get_user\">get_user</a>(<a class=\"id\" href=\"#lines\">lines</a>, (<a class=\"id\" href=\"#s32\">s32</a> <a class=\"id\" href=\"#__user\">__user</a> *)(<a class=\"id\" href=\"#p\">p</a>+4))) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#scrollfront\">scrollfront</a>(<a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#fg_console\">fg_console</a>].<a class=\"id\" href=\"#d\">d</a>, <a class=\"id\" href=\"#lines\">lines</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCL_BLANKSCREEN\">TIOCL_BLANKSCREEN</a>:<span class=\"ts\"/><span class=\"comment\">/* until explicitly unblanked, not only poked */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#acquire_console_sem\">acquire_console_sem</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ignore_poke\">ignore_poke</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#do_blank_screen\">do_blank_screen</a>(0);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#release_console_sem\">release_console_sem</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCL_BLANKEDSCREEN\">TIOCL_BLANKEDSCREEN</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#console_blanked\">console_blanked</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * /dev/ttyN handling</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static int <a class=\"id\" href=\"#con_write\">con_write</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, const unsigned char *<a class=\"id\" href=\"#buf\">buf</a>, int <a class=\"id\" href=\"#count\">count</a>)", 
"{", 
"<span class=\"ts\"/>int<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#do_con_write\">do_con_write</a>(<a class=\"id\" href=\"#tty\">tty</a>, <a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#count\">count</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#con_flush_chars\">con_flush_chars</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#con_put_char\">con_put_char</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, unsigned char <a class=\"id\" href=\"#ch\">ch</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#in_interrupt\">in_interrupt</a>())", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;<span class=\"ts\"/><span class=\"comment\">/* n_r3964 calls put_char() from interrupt context */</span>", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#do_con_write\">do_con_write</a>(<a class=\"id\" href=\"#tty\">tty</a>, &amp;<a class=\"id\" href=\"#ch\">ch</a>, 1);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#con_write_room\">con_write_room</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#stopped\">stopped</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>return 32768;<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* No limit, really; we're not buffering */</span>", 
"}", 
"", 
"static int <a class=\"id\" href=\"#con_chars_in_buffer\">con_chars_in_buffer</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>)", 
"{", 
"<span class=\"ts\"/>return 0;<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* we're not buffering */</span>", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * con_throttle and con_unthrottle are only used for</span>", 
"<span class=\"comment\"> * paste_selection(), which has to stuff in a large number of</span>", 
"<span class=\"comment\"> * characters...</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#con_throttle\">con_throttle</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>)", 
"{", 
"}", 
"", 
"static void <a class=\"id\" href=\"#con_unthrottle\">con_unthrottle</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#vc\">vc</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#driver_data\">driver_data</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#wake_up_interruptible\">wake_up_interruptible</a>(&amp;<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#paste_wait\">paste_wait</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Turn the Scroll-Lock LED on when the tty is stopped</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#con_stop\">con_stop</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#console_num\">console_num</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#tty\">tty</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#console_num\">console_num</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#index\">index</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#vc_cons_allocated\">vc_cons_allocated</a>(<a class=\"id\" href=\"#console_num\">console_num</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#set_vc_kbd_led\">set_vc_kbd_led</a>(<a class=\"id\" href=\"#kbd_table\">kbd_table</a> + <a class=\"id\" href=\"#console_num\">console_num</a>, <a class=\"id\" href=\"#VC_SCROLLOCK\">VC_SCROLLOCK</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#set_leds\">set_leds</a>();", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Turn the Scroll-Lock LED off when the console is started</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#con_start\">con_start</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#console_num\">console_num</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#tty\">tty</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#console_num\">console_num</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#index\">index</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#vc_cons_allocated\">vc_cons_allocated</a>(<a class=\"id\" href=\"#console_num\">console_num</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#clr_vc_kbd_led\">clr_vc_kbd_led</a>(<a class=\"id\" href=\"#kbd_table\">kbd_table</a> + <a class=\"id\" href=\"#console_num\">console_num</a>, <a class=\"id\" href=\"#VC_SCROLLOCK\">VC_SCROLLOCK</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#set_leds\">set_leds</a>();", 
"}", 
"", 
"static void <a class=\"id\" href=\"#con_flush_chars\">con_flush_chars</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#vc\">vc</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#in_interrupt\">in_interrupt</a>())<span class=\"ts\"/><span class=\"comment\">/* from flush_to_ldisc */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* if we race with con_close(), vt may be null */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acquire_console_sem\">acquire_console_sem</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#driver_data\">driver_data</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_cursor\">set_cursor</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#release_console_sem\">release_console_sem</a>();", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Allocate the console screen memory.</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#con_open\">con_open</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#filp\">filp</a>)", 
"{", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#currcons\">currcons</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#index\">index</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a> = 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acquire_console_sem\">acquire_console_sem</a>();", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#driver_data\">driver_data</a> == <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#vc_allocate\">vc_allocate</a>(<a class=\"id\" href=\"#currcons\">currcons</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> == 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#vc\">vc</a> = <a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#currcons\">currcons</a>].<a class=\"id\" href=\"#d\">d</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Still being freed */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#port\">port</a>.<a class=\"id\" href=\"#tty\">tty</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#release_console_sem\">release_console_sem</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ERESTARTSYS\">ERESTARTSYS</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#driver_data\">driver_data</a> = <a class=\"id\" href=\"#vc\">vc</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#port\">port</a>.<a class=\"id\" href=\"#tty\">tty</a> = <a class=\"id\" href=\"#tty\">tty</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#winsize\">winsize</a>.<a class=\"id\" href=\"#ws_row\">ws_row</a> && !<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#winsize\">winsize</a>.<a class=\"id\" href=\"#ws_col\">ws_col</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#winsize\">winsize</a>.<a class=\"id\" href=\"#ws_row\">ws_row</a> = <a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#currcons\">currcons</a>].<a class=\"id\" href=\"#d\">d</a>-><a class=\"id\" href=\"#vc_rows\">vc_rows</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#winsize\">winsize</a>.<a class=\"id\" href=\"#ws_col\">ws_col</a> = <a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#currcons\">currcons</a>].<a class=\"id\" href=\"#d\">d</a>-><a class=\"id\" href=\"#vc_cols\">vc_cols</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_utf\">vc_utf</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_iflag\">c_iflag</a> |= <a class=\"id\" href=\"#IUTF8\">IUTF8</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_iflag\">c_iflag</a> &= ~<a class=\"id\" href=\"#IUTF8\">IUTF8</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#release_console_sem\">release_console_sem</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#release_console_sem\">release_console_sem</a>();", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#con_close\">con_close</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#filp\">filp</a>)", 
"{", 
"<span class=\"ts\"/><span class=\"comment\">/* Nothing to do - we defer to shutdown */</span>", 
"}", 
"", 
"static void <a class=\"id\" href=\"#con_shutdown\">con_shutdown</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#vc\">vc</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#driver_data\">driver_data</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#BUG_ON\">BUG_ON</a>(<a class=\"id\" href=\"#vc\">vc</a> == <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acquire_console_sem\">acquire_console_sem</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#port\">port</a>.<a class=\"id\" href=\"#tty\">tty</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#release_console_sem\">release_console_sem</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty_shutdown\">tty_shutdown</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#default_italic_color\">default_italic_color</a>    = 2; <span class=\"comment\">// green (ASCII)</span>", 
"static int <a class=\"id\" href=\"#default_underline_color\">default_underline_color</a> = 3; <span class=\"comment\">// cyan (ASCII)</span>", 
"<a class=\"id\" href=\"#module_param_named\">module_param_named</a>(<a class=\"id\" href=\"#italic\">italic</a>, <a class=\"id\" href=\"#default_italic_color\">default_italic_color</a>, int, <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a> | <a class=\"id\" href=\"#S_IWUSR\">S_IWUSR</a>);", 
"<a class=\"id\" href=\"#module_param_named\">module_param_named</a>(<a class=\"id\" href=\"#underline\">underline</a>, <a class=\"id\" href=\"#default_underline_color\">default_underline_color</a>, int, <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a> | <a class=\"id\" href=\"#S_IWUSR\">S_IWUSR</a>);", 
"", 
"static void <a class=\"id\" href=\"#vc_init\">vc_init</a>(struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#vc\">vc</a>, unsigned int <a class=\"id\" href=\"#rows\">rows</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>    unsigned int <a class=\"id\" href=\"#cols\">cols</a>, int <a class=\"id\" href=\"#do_clear\">do_clear</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#j\">j</a>, <a class=\"id\" href=\"#k\">k</a> ;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_cols\">vc_cols</a> = <a class=\"id\" href=\"#cols\">cols</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_rows\">vc_rows</a> = <a class=\"id\" href=\"#rows\">rows</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_size_row\">vc_size_row</a> = <a class=\"id\" href=\"#cols\">cols</a> << 1;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_screenbuf_size\">vc_screenbuf_size</a> = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_rows\">vc_rows</a> * <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_size_row\">vc_size_row</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#set_origin\">set_origin</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_pos\">vc_pos</a> = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_origin\">vc_origin</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#reset_vc\">reset_vc</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#j\">j</a>=<a class=\"id\" href=\"#k\">k</a>=0; <a class=\"id\" href=\"#j\">j</a>&lt;16; <a class=\"id\" href=\"#j\">j</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_palette\">vc_palette</a>[<a class=\"id\" href=\"#k\">k</a>++] = <a class=\"id\" href=\"#default_red\">default_red</a>[<a class=\"id\" href=\"#j\">j</a>] ;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_palette\">vc_palette</a>[<a class=\"id\" href=\"#k\">k</a>++] = <a class=\"id\" href=\"#default_grn\">default_grn</a>[<a class=\"id\" href=\"#j\">j</a>] ;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_palette\">vc_palette</a>[<a class=\"id\" href=\"#k\">k</a>++] = <a class=\"id\" href=\"#default_blu\">default_blu</a>[<a class=\"id\" href=\"#j\">j</a>] ;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_def_color\">vc_def_color</a>       = 0x07;   <span class=\"comment\">/* white */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_ulcolor\">vc_ulcolor</a>         = <a class=\"id\" href=\"#default_underline_color\">default_underline_color</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_itcolor\">vc_itcolor</a>         = <a class=\"id\" href=\"#default_italic_color\">default_italic_color</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_halfcolor\">vc_halfcolor</a>       = 0x08;   <span class=\"comment\">/* grey */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#init_waitqueue_head\">init_waitqueue_head</a>(&amp;<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#paste_wait\">paste_wait</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#reset_terminal\">reset_terminal</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#do_clear\">do_clear</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * This routine initializes console interrupts, and does nothing</span>", 
"<span class=\"comment\"> * else. If you want the screen to clear, call tty_write with</span>", 
"<span class=\"comment\"> * the appropriate escape-sequence.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#con_init\">con_init</a>(void)", 
"{", 
"<span class=\"ts\"/>const char *<a class=\"id\" href=\"#display_desc\">display_desc</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#vc\">vc</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#currcons\">currcons</a> = 0, <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acquire_console_sem\">acquire_console_sem</a>();", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#conswitchp\">conswitchp</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#display_desc\">display_desc</a> = <a class=\"id\" href=\"#conswitchp\">conswitchp</a>-><a class=\"id\" href=\"#con_startup\">con_startup</a>();", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#display_desc\">display_desc</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#fg_console\">fg_console</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#release_console_sem\">release_console_sem</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#MAX_NR_CON_DRIVER\">MAX_NR_CON_DRIVER</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#con_driver\">con_driver</a> *<a class=\"id\" href=\"#con_driver\">con_driver</a> = &amp;<a class=\"id\" href=\"#registered_con_driver\">registered_con_driver</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#con_driver\">con_driver</a>-><a class=\"id\" href=\"#con\">con</a> == <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#con_driver\">con_driver</a>-><a class=\"id\" href=\"#con\">con</a> = <a class=\"id\" href=\"#conswitchp\">conswitchp</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#con_driver\">con_driver</a>-><a class=\"id\" href=\"#desc\">desc</a> = <a class=\"id\" href=\"#display_desc\">display_desc</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#con_driver\">con_driver</a>-><a class=\"id\" href=\"#flag\">flag</a> = <a class=\"id\" href=\"#CON_DRIVER_FLAG_INIT\">CON_DRIVER_FLAG_INIT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#con_driver\">con_driver</a>-><a class=\"id\" href=\"#first\">first</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#con_driver\">con_driver</a>-><a class=\"id\" href=\"#last\">last</a> = <a class=\"id\" href=\"#MAX_NR_CONSOLES\">MAX_NR_CONSOLES</a> - 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#MAX_NR_CONSOLES\">MAX_NR_CONSOLES</a>; <a class=\"id\" href=\"#i\">i</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#con_driver_map\">con_driver_map</a>[<a class=\"id\" href=\"#i\">i</a>] = <a class=\"id\" href=\"#conswitchp\">conswitchp</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#blankinterval\">blankinterval</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blank_state\">blank_state</a> = <a class=\"id\" href=\"#blank_normal_wait\">blank_normal_wait</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mod_timer\">mod_timer</a>(&amp;<a class=\"id\" href=\"#console_timer\">console_timer</a>, <a class=\"id\" href=\"#jiffies\">jiffies</a> + (<a class=\"id\" href=\"#blankinterval\">blankinterval</a> * <a class=\"id\" href=\"#HZ\">HZ</a>));", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#currcons\">currcons</a> = 0; <a class=\"id\" href=\"#currcons\">currcons</a> &lt; <a class=\"id\" href=\"#MIN_NR_CONSOLES\">MIN_NR_CONSOLES</a>; <a class=\"id\" href=\"#currcons\">currcons</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#currcons\">currcons</a>].<a class=\"id\" href=\"#d\">d</a> = <a class=\"id\" href=\"#vc\">vc</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof(struct <a class=\"id\" href=\"#vc_data\">vc_data</a>), <a class=\"id\" href=\"#GFP_NOWAIT\">GFP_NOWAIT</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#INIT_WORK\">INIT_WORK</a>(&amp;<a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#currcons\">currcons</a>].<a class=\"id\" href=\"#SAK_work\">SAK_work</a>, <a class=\"id\" href=\"#vc_SAK\">vc_SAK</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty_port_init\">tty_port_init</a>(&amp;<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#port\">port</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#visual_init\">visual_init</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#currcons\">currcons</a>, 1);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_screenbuf\">vc_screenbuf</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_screenbuf_size\">vc_screenbuf_size</a>, <a class=\"id\" href=\"#GFP_NOWAIT\">GFP_NOWAIT</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc_init\">vc_init</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_rows\">vc_rows</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_cols\">vc_cols</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#currcons\">currcons</a> || !<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_sw\">vc_sw</a>-><a class=\"id\" href=\"#con_save_screen\">con_save_screen</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#currcons\">currcons</a> = <a class=\"id\" href=\"#fg_console\">fg_console</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#master_display_fg\">master_display_fg</a> = <a class=\"id\" href=\"#vc\">vc</a> = <a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#currcons\">currcons</a>].<a class=\"id\" href=\"#d\">d</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#set_origin\">set_origin</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#save_screen\">save_screen</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#gotoxy\">gotoxy</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_x\">vc_x</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_y\">vc_y</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#csi_J\">csi_J</a>(<a class=\"id\" href=\"#vc\">vc</a>, 0);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#update_screen\">update_screen</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\"Console: %s %s %dx%d\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_can_do_color\">vc_can_do_color</a> ? \"colour\" : \"mono\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#display_desc\">display_desc</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_cols\">vc_cols</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_rows\">vc_rows</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printable\">printable</a> = 1;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\"\\n\");", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#release_console_sem\">release_console_sem</a>();", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_VT_CONSOLE\">CONFIG_VT_CONSOLE</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#register_console\">register_console</a>(&amp;<a class=\"id\" href=\"#vt_console_driver\">vt_console_driver</a>);", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>return 0;", 
"}", 
"<a class=\"id\" href=\"#console_initcall\">console_initcall</a>(<a class=\"id\" href=\"#con_init\">con_init</a>);", 
"", 
"static const struct <a class=\"id\" href=\"#tty_operations\">tty_operations</a> <a class=\"id\" href=\"#con_ops\">con_ops</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#open\">open</a> = <a class=\"id\" href=\"#con_open\">con_open</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#close\">close</a> = <a class=\"id\" href=\"#con_close\">con_close</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#write\">write</a> = <a class=\"id\" href=\"#con_write\">con_write</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#write_room\">write_room</a> = <a class=\"id\" href=\"#con_write_room\">con_write_room</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#put_char\">put_char</a> = <a class=\"id\" href=\"#con_put_char\">con_put_char</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#flush_chars\">flush_chars</a> = <a class=\"id\" href=\"#con_flush_chars\">con_flush_chars</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#chars_in_buffer\">chars_in_buffer</a> = <a class=\"id\" href=\"#con_chars_in_buffer\">con_chars_in_buffer</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#ioctl\">ioctl</a> = <a class=\"id\" href=\"#vt_ioctl\">vt_ioctl</a>,", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_COMPAT\">CONFIG_COMPAT</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#compat_ioctl\">compat_ioctl</a> = <a class=\"id\" href=\"#vt_compat_ioctl\">vt_compat_ioctl</a>,", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#stop\">stop</a> = <a class=\"id\" href=\"#con_stop\">con_stop</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#start\">start</a> = <a class=\"id\" href=\"#con_start\">con_start</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#throttle\">throttle</a> = <a class=\"id\" href=\"#con_throttle\">con_throttle</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#unthrottle\">unthrottle</a> = <a class=\"id\" href=\"#con_unthrottle\">con_unthrottle</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#resize\">resize</a> = <a class=\"id\" href=\"#vt_resize\">vt_resize</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#shutdown\">shutdown</a> = <a class=\"id\" href=\"#con_shutdown\">con_shutdown</a>", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#cdev\">cdev</a> <a class=\"id\" href=\"#vc0_cdev\">vc0_cdev</a>;", 
"", 
"int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#vty_init\">vty_init</a>(const struct <a class=\"id\" href=\"#file_operations\">file_operations</a> *<a class=\"id\" href=\"#console_fops\">console_fops</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdev_init\">cdev_init</a>(&amp;<a class=\"id\" href=\"#vc0_cdev\">vc0_cdev</a>, <a class=\"id\" href=\"#console_fops\">console_fops</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdev_add\">cdev_add</a>(&amp;<a class=\"id\" href=\"#vc0_cdev\">vc0_cdev</a>, <a class=\"id\" href=\"#MKDEV\">MKDEV</a>(<a class=\"id\" href=\"#TTY_MAJOR\">TTY_MAJOR</a>, 0), 1) ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#register_chrdev_region\">register_chrdev_region</a>(<a class=\"id\" href=\"#MKDEV\">MKDEV</a>(<a class=\"id\" href=\"#TTY_MAJOR\">TTY_MAJOR</a>, 0), 1, \"/dev/vc/0\") &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#panic\">panic</a>(\"Couldn't register /dev/tty0 driver\\n\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device_create\">device_create</a>(<a class=\"id\" href=\"#tty_class\">tty_class</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#MKDEV\">MKDEV</a>(<a class=\"id\" href=\"#TTY_MAJOR\">TTY_MAJOR</a>, 0), <a class=\"id\" href=\"#NULL\">NULL</a>, \"tty0\");", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vcs_init\">vcs_init</a>();", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#console_driver\">console_driver</a> = <a class=\"id\" href=\"#alloc_tty_driver\">alloc_tty_driver</a>(<a class=\"id\" href=\"#MAX_NR_CONSOLES\">MAX_NR_CONSOLES</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#console_driver\">console_driver</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#panic\">panic</a>(\"Couldn't allocate console driver\\n\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#console_driver\">console_driver</a>-><a class=\"id\" href=\"#owner\">owner</a> = <a class=\"id\" href=\"#THIS_MODULE\">THIS_MODULE</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#console_driver\">console_driver</a>-><a class=\"id\" href=\"#name\">name</a> = \"tty\";", 
"<span class=\"ts\"/><a class=\"id\" href=\"#console_driver\">console_driver</a>-><a class=\"id\" href=\"#name_base\">name_base</a> = 1;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#console_driver\">console_driver</a>-><a class=\"id\" href=\"#major\">major</a> = <a class=\"id\" href=\"#TTY_MAJOR\">TTY_MAJOR</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#console_driver\">console_driver</a>-><a class=\"id\" href=\"#minor_start\">minor_start</a> = 1;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#console_driver\">console_driver</a>-><a class=\"id\" href=\"#type\">type</a> = <a class=\"id\" href=\"#TTY_DRIVER_TYPE_CONSOLE\">TTY_DRIVER_TYPE_CONSOLE</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#console_driver\">console_driver</a>-><a class=\"id\" href=\"#init_termios\">init_termios</a> = <a class=\"id\" href=\"#tty_std_termios\">tty_std_termios</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#default_utf8\">default_utf8</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#console_driver\">console_driver</a>-><a class=\"id\" href=\"#init_termios\">init_termios</a>.<a class=\"id\" href=\"#c_iflag\">c_iflag</a> |= <a class=\"id\" href=\"#IUTF8\">IUTF8</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#console_driver\">console_driver</a>-><a class=\"id\" href=\"#flags\">flags</a> = <a class=\"id\" href=\"#TTY_DRIVER_REAL_RAW\">TTY_DRIVER_REAL_RAW</a> | <a class=\"id\" href=\"#TTY_DRIVER_RESET_TERMIOS\">TTY_DRIVER_RESET_TERMIOS</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty_set_operations\">tty_set_operations</a>(<a class=\"id\" href=\"#console_driver\">console_driver</a>, &amp;<a class=\"id\" href=\"#con_ops\">con_ops</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tty_register_driver\">tty_register_driver</a>(<a class=\"id\" href=\"#console_driver\">console_driver</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#panic\">panic</a>(\"Couldn't register console driver\\n\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kbd_init\">kbd_init</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#console_map_init\">console_map_init</a>();", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_MDA_CONSOLE\">CONFIG_MDA_CONSOLE</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mda_console_init\">mda_console_init</a>();", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"#<a class=\"id\" href=\"#ifndef\">ifndef</a> <a class=\"id\" href=\"#VT_SINGLE_DRIVER\">VT_SINGLE_DRIVER</a>", 
"", 
"static struct <a class=\"id\" href=\"#class\">class</a> *<a class=\"id\" href=\"#vtconsole_class\">vtconsole_class</a>;", 
"", 
"static int <a class=\"id\" href=\"#bind_con_driver\">bind_con_driver</a>(const struct <a class=\"id\" href=\"#consw\">consw</a> *<a class=\"id\" href=\"#csw\">csw</a>, int <a class=\"id\" href=\"#first\">first</a>, int <a class=\"id\" href=\"#last\">last</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   int <a class=\"id\" href=\"#deflt\">deflt</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#module\">module</a> *<a class=\"id\" href=\"#owner\">owner</a> = <a class=\"id\" href=\"#csw\">csw</a>-><a class=\"id\" href=\"#owner\">owner</a>;", 
"<span class=\"ts\"/>const char *<a class=\"id\" href=\"#desc\">desc</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#con_driver\">con_driver</a> *<a class=\"id\" href=\"#con_driver\">con_driver</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#j\">j</a> = -1, <a class=\"id\" href=\"#k\">k</a> = -1, <a class=\"id\" href=\"#retval\">retval</a> = -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#try_module_get\">try_module_get</a>(<a class=\"id\" href=\"#owner\">owner</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acquire_console_sem\">acquire_console_sem</a>();", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* check if driver is registered */</span>", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#MAX_NR_CON_DRIVER\">MAX_NR_CON_DRIVER</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#con_driver\">con_driver</a> = &amp;<a class=\"id\" href=\"#registered_con_driver\">registered_con_driver</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#con_driver\">con_driver</a>-><a class=\"id\" href=\"#con\">con</a> == <a class=\"id\" href=\"#csw\">csw</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#desc\">desc</a> = <a class=\"id\" href=\"#con_driver\">con_driver</a>-><a class=\"id\" href=\"#desc\">desc</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#con_driver\">con_driver</a>-><a class=\"id\" href=\"#flag\">flag</a> &amp; <a class=\"id\" href=\"#CON_DRIVER_FLAG_INIT\">CON_DRIVER_FLAG_INIT</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#csw\">csw</a>-><a class=\"id\" href=\"#con_startup\">con_startup</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#con_driver\">con_driver</a>-><a class=\"id\" href=\"#flag\">flag</a> |= <a class=\"id\" href=\"#CON_DRIVER_FLAG_INIT\">CON_DRIVER_FLAG_INIT</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#deflt\">deflt</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#conswitchp\">conswitchp</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#module_put\">module_put</a>(<a class=\"id\" href=\"#conswitchp\">conswitchp</a>-><a class=\"id\" href=\"#owner\">owner</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__module_get\">__module_get</a>(<a class=\"id\" href=\"#owner\">owner</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#conswitchp\">conswitchp</a> = <a class=\"id\" href=\"#csw\">csw</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#first\">first</a> = <a class=\"id\" href=\"#max\">max</a>(<a class=\"id\" href=\"#first\">first</a>, <a class=\"id\" href=\"#con_driver\">con_driver</a>-><a class=\"id\" href=\"#first\">first</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#last\">last</a> = <a class=\"id\" href=\"#min\">min</a>(<a class=\"id\" href=\"#last\">last</a>, <a class=\"id\" href=\"#con_driver\">con_driver</a>-><a class=\"id\" href=\"#last\">last</a>);", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = <a class=\"id\" href=\"#first\">first</a>; <a class=\"id\" href=\"#i\">i</a> <= <a class=\"id\" href=\"#last\">last</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#old_was_color\">old_was_color</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#vc\">vc</a> = <a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#d\">d</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#con_driver_map\">con_driver_map</a>[<a class=\"id\" href=\"#i\">i</a>])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#module_put\">module_put</a>(<a class=\"id\" href=\"#con_driver_map\">con_driver_map</a>[<a class=\"id\" href=\"#i\">i</a>]-><a class=\"id\" href=\"#owner\">owner</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__module_get\">__module_get</a>(<a class=\"id\" href=\"#owner\">owner</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#con_driver_map\">con_driver_map</a>[<a class=\"id\" href=\"#i\">i</a>] = <a class=\"id\" href=\"#csw\">csw</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#vc\">vc</a> || !<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_sw\">vc_sw</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#j\">j</a> = <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#CON_IS_VISIBLE\">CON_IS_VISIBLE</a>(<a class=\"id\" href=\"#vc\">vc</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#k\">k</a> = <a class=\"id\" href=\"#i\">i</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#save_screen\">save_screen</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#old_was_color\">old_was_color</a> = <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_can_do_color\">vc_can_do_color</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_sw\">vc_sw</a>-><a class=\"id\" href=\"#con_deinit\">con_deinit</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_origin\">vc_origin</a> = (unsigned long)<a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_screenbuf\">vc_screenbuf</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#visual_init\">visual_init</a>(<a class=\"id\" href=\"#vc\">vc</a>, <a class=\"id\" href=\"#i\">i</a>, 0);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_origin\">set_origin</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#update_attr\">update_attr</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* If the console changed between mono &lt;-&gt; color, then</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * the attributes in the screenbuf will be wrong.  The</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * following resets all attributes to something sane.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#old_was_color\">old_was_color</a> != <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_can_do_color\">vc_can_do_color</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#clear_buffer_attributes\">clear_buffer_attributes</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\"Console: switching \");", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#deflt\">deflt</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\"consoles %d-%d \", <a class=\"id\" href=\"#first\">first</a>+1, <a class=\"id\" href=\"#last\">last</a>+1);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#j\">j</a> >= 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#vc\">vc</a> = <a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#j\">j</a>].<a class=\"id\" href=\"#d\">d</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\"to %s %s %dx%d\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_can_do_color\">vc_can_do_color</a> ? \"colour\" : \"mono\",", 
"<span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#desc\">desc</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_cols\">vc_cols</a>, <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_rows\">vc_rows</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#k\">k</a> >= 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc\">vc</a> = <a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#k\">k</a>].<a class=\"id\" href=\"#d\">d</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#update_screen\">update_screen</a>(<a class=\"id\" href=\"#vc\">vc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\"to %s\\n\", <a class=\"id\" href=\"#desc\">desc</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = 0;", 
"<a class=\"id\" href=\"#err\">err</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#release_console_sem\">release_console_sem</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#module_put\">module_put</a>(<a class=\"id\" href=\"#owner\">owner</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"};", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_VT_HW_CONSOLE_BINDING\">CONFIG_VT_HW_CONSOLE_BINDING</a>", 
"static int <a class=\"id\" href=\"#con_is_graphics\">con_is_graphics</a>(const struct <a class=\"id\" href=\"#consw\">consw</a> *<a class=\"id\" href=\"#csw\">csw</a>, int <a class=\"id\" href=\"#first\">first</a>, int <a class=\"id\" href=\"#last\">last</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#retval\">retval</a> = 0;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = <a class=\"id\" href=\"#first\">first</a>; <a class=\"id\" href=\"#i\">i</a> <= <a class=\"id\" href=\"#last\">last</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#vc\">vc</a> = <a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#d\">d</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#vc\">vc</a> && <a class=\"id\" href=\"#vc\">vc</a>-><a class=\"id\" href=\"#vc_mode\">vc_mode</a> == <a class=\"id\" href=\"#KD_GRAPHICS\">KD_GRAPHICS</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * unbind_con_driver - unbind a console driver</span>", 
"<span class=\"comment\"> * @csw: pointer to console driver to unregister</span>", 
"<span class=\"comment\"> * @first: first in range of consoles that @csw should be unbound from</span>", 
"<span class=\"comment\"> * @last: last in range of consoles that @csw should be unbound from</span>", 
"<span class=\"comment\"> * @deflt: should next bound console driver be default after @csw is unbound?</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * To unbind a driver from all possible consoles, pass 0 as @first and</span>", 
"<span class=\"comment\"> * %MAX_NR_CONSOLES as @last.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * @deflt controls whether the console that ends up replacing @csw should be</span>", 
"<span class=\"comment\"> * the default console.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * RETURNS:</span>", 
"<span class=\"comment\"> * -ENODEV if @csw isn't a registered console driver or can't be unregistered</span>", 
"<span class=\"comment\"> * or 0 on success.</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#unbind_con_driver\">unbind_con_driver</a>(const struct <a class=\"id\" href=\"#consw\">consw</a> *<a class=\"id\" href=\"#csw\">csw</a>, int <a class=\"id\" href=\"#first\">first</a>, int <a class=\"id\" href=\"#last\">last</a>, int <a class=\"id\" href=\"#deflt\">deflt</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#module\">module</a> *<a class=\"id\" href=\"#owner\">owner</a> = <a class=\"id\" href=\"#csw\">csw</a>-><a class=\"id\" href=\"#owner\">owner</a>;", 
"<span class=\"ts\"/>const struct <a class=\"id\" href=\"#consw\">consw</a> *<a class=\"id\" href=\"#defcsw\">defcsw</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#con_driver\">con_driver</a> *<a class=\"id\" href=\"#con_driver\">con_driver</a> = <a class=\"id\" href=\"#NULL\">NULL</a>, *<a class=\"id\" href=\"#con_back\">con_back</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#retval\">retval</a> = -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#try_module_get\">try_module_get</a>(<a class=\"id\" href=\"#owner\">owner</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acquire_console_sem\">acquire_console_sem</a>();", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* check if driver is registered and if it is unbindable */</span>", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#MAX_NR_CON_DRIVER\">MAX_NR_CON_DRIVER</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#con_driver\">con_driver</a> = &amp;<a class=\"id\" href=\"#registered_con_driver\">registered_con_driver</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#con_driver\">con_driver</a>-><a class=\"id\" href=\"#con\">con</a> == <a class=\"id\" href=\"#csw\">csw</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#con_driver\">con_driver</a>-><a class=\"id\" href=\"#flag\">flag</a> &amp; <a class=\"id\" href=\"#CON_DRIVER_FLAG_MODULE\">CON_DRIVER_FLAG_MODULE</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#release_console_sem\">release_console_sem</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* check if backup driver exists */</span>", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#MAX_NR_CON_DRIVER\">MAX_NR_CON_DRIVER</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#con_back\">con_back</a> = &amp;<a class=\"id\" href=\"#registered_con_driver\">registered_con_driver</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#con_back\">con_back</a>-><a class=\"id\" href=\"#con\">con</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/>    !(<a class=\"id\" href=\"#con_back\">con_back</a>-><a class=\"id\" href=\"#flag\">flag</a> &amp; <a class=\"id\" href=\"#CON_DRIVER_FLAG_MODULE\">CON_DRIVER_FLAG_MODULE</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#defcsw\">defcsw</a> = <a class=\"id\" href=\"#con_back\">con_back</a>-><a class=\"id\" href=\"#con\">con</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#release_console_sem\">release_console_sem</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#con_is_bound\">con_is_bound</a>(<a class=\"id\" href=\"#csw\">csw</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#release_console_sem\">release_console_sem</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#first\">first</a> = <a class=\"id\" href=\"#max\">max</a>(<a class=\"id\" href=\"#first\">first</a>, <a class=\"id\" href=\"#con_driver\">con_driver</a>-><a class=\"id\" href=\"#first\">first</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#last\">last</a> = <a class=\"id\" href=\"#min\">min</a>(<a class=\"id\" href=\"#last\">last</a>, <a class=\"id\" href=\"#con_driver\">con_driver</a>-><a class=\"id\" href=\"#last\">last</a>);", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = <a class=\"id\" href=\"#first\">first</a>; <a class=\"id\" href=\"#i\">i</a> <= <a class=\"id\" href=\"#last\">last</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#con_driver_map\">con_driver_map</a>[<a class=\"id\" href=\"#i\">i</a>] == <a class=\"id\" href=\"#csw\">csw</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#module_put\">module_put</a>(<a class=\"id\" href=\"#csw\">csw</a>-><a class=\"id\" href=\"#owner\">owner</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#con_driver_map\">con_driver_map</a>[<a class=\"id\" href=\"#i\">i</a>] = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#con_is_bound\">con_is_bound</a>(<a class=\"id\" href=\"#defcsw\">defcsw</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>const struct <a class=\"id\" href=\"#consw\">consw</a> *<a class=\"id\" href=\"#defconsw\">defconsw</a> = <a class=\"id\" href=\"#conswitchp\">conswitchp</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#defcsw\">defcsw</a>-><a class=\"id\" href=\"#con_startup\">con_startup</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#con_back\">con_back</a>-><a class=\"id\" href=\"#flag\">flag</a> |= <a class=\"id\" href=\"#CON_DRIVER_FLAG_INIT\">CON_DRIVER_FLAG_INIT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * vgacon may change the default driver to point</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * to dummycon, we restore it here...</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#conswitchp\">conswitchp</a> = <a class=\"id\" href=\"#defconsw\">defconsw</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#con_is_bound\">con_is_bound</a>(<a class=\"id\" href=\"#csw\">csw</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#con_driver\">con_driver</a>-><a class=\"id\" href=\"#flag\">flag</a> &= ~<a class=\"id\" href=\"#CON_DRIVER_FLAG_INIT\">CON_DRIVER_FLAG_INIT</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#release_console_sem\">release_console_sem</a>();", 
"<span class=\"ts\"/><span class=\"comment\">/* ignore return value, binding should not fail */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bind_con_driver\">bind_con_driver</a>(<a class=\"id\" href=\"#defcsw\">defcsw</a>, <a class=\"id\" href=\"#first\">first</a>, <a class=\"id\" href=\"#last\">last</a>, <a class=\"id\" href=\"#deflt\">deflt</a>);", 
"<a class=\"id\" href=\"#err\">err</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#module_put\">module_put</a>(<a class=\"id\" href=\"#owner\">owner</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#unbind_con_driver\">unbind_con_driver</a>);", 
"", 
"static int <a class=\"id\" href=\"#vt_bind\">vt_bind</a>(struct <a class=\"id\" href=\"#con_driver\">con_driver</a> *<a class=\"id\" href=\"#con\">con</a>)", 
"{", 
"<span class=\"ts\"/>const struct <a class=\"id\" href=\"#consw\">consw</a> *<a class=\"id\" href=\"#defcsw\">defcsw</a> = <a class=\"id\" href=\"#NULL\">NULL</a>, *<a class=\"id\" href=\"#csw\">csw</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#more\">more</a> = 1, <a class=\"id\" href=\"#first\">first</a> = -1, <a class=\"id\" href=\"#last\">last</a> = -1, <a class=\"id\" href=\"#deflt\">deflt</a> = 0;", 
"", 
" <span class=\"ts\"/>if (!<a class=\"id\" href=\"#con\">con</a>-><a class=\"id\" href=\"#con\">con</a> || !(<a class=\"id\" href=\"#con\">con</a>-><a class=\"id\" href=\"#flag\">flag</a> &amp; <a class=\"id\" href=\"#CON_DRIVER_FLAG_MODULE\">CON_DRIVER_FLAG_MODULE</a>) ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#con_is_graphics\">con_is_graphics</a>(<a class=\"id\" href=\"#con\">con</a>-><a class=\"id\" href=\"#con\">con</a>, <a class=\"id\" href=\"#con\">con</a>-><a class=\"id\" href=\"#first\">first</a>, <a class=\"id\" href=\"#con\">con</a>-><a class=\"id\" href=\"#last\">last</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#csw\">csw</a> = <a class=\"id\" href=\"#con\">con</a>-><a class=\"id\" href=\"#con\">con</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#MAX_NR_CON_DRIVER\">MAX_NR_CON_DRIVER</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#con_driver\">con_driver</a> *<a class=\"id\" href=\"#con\">con</a> = &amp;<a class=\"id\" href=\"#registered_con_driver\">registered_con_driver</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#con\">con</a>-><a class=\"id\" href=\"#con\">con</a> && !(<a class=\"id\" href=\"#con\">con</a>-><a class=\"id\" href=\"#flag\">flag</a> &amp; <a class=\"id\" href=\"#CON_DRIVER_FLAG_MODULE\">CON_DRIVER_FLAG_MODULE</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#defcsw\">defcsw</a> = <a class=\"id\" href=\"#con\">con</a>-><a class=\"id\" href=\"#con\">con</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#defcsw\">defcsw</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#more\">more</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#more\">more</a> = 0;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = <a class=\"id\" href=\"#con\">con</a>-><a class=\"id\" href=\"#first\">first</a>; <a class=\"id\" href=\"#i\">i</a> <= <a class=\"id\" href=\"#con\">con</a>-><a class=\"id\" href=\"#last\">last</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#con_driver_map\">con_driver_map</a>[<a class=\"id\" href=\"#i\">i</a>] == <a class=\"id\" href=\"#defcsw\">defcsw</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#first\">first</a> == -1)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#first\">first</a> = <a class=\"id\" href=\"#i\">i</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#last\">last</a> = <a class=\"id\" href=\"#i\">i</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#more\">more</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>} else if (<a class=\"id\" href=\"#first\">first</a> != -1)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#first\">first</a> == 0 && <a class=\"id\" href=\"#last\">last</a> == <a class=\"id\" href=\"#MAX_NR_CONSOLES\">MAX_NR_CONSOLES</a> -1)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#deflt\">deflt</a> = 1;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#first\">first</a> != -1)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bind_con_driver\">bind_con_driver</a>(<a class=\"id\" href=\"#csw\">csw</a>, <a class=\"id\" href=\"#first\">first</a>, <a class=\"id\" href=\"#last\">last</a>, <a class=\"id\" href=\"#deflt\">deflt</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#first\">first</a> = -1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#last\">last</a> = -1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#deflt\">deflt</a> = 0;", 
"<span class=\"ts\"/>}", 
"", 
"<a class=\"id\" href=\"#err\">err</a>:", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#vt_unbind\">vt_unbind</a>(struct <a class=\"id\" href=\"#con_driver\">con_driver</a> *<a class=\"id\" href=\"#con\">con</a>)", 
"{", 
"<span class=\"ts\"/>const struct <a class=\"id\" href=\"#consw\">consw</a> *<a class=\"id\" href=\"#csw\">csw</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#more\">more</a> = 1, <a class=\"id\" href=\"#first\">first</a> = -1, <a class=\"id\" href=\"#last\">last</a> = -1, <a class=\"id\" href=\"#deflt\">deflt</a> = 0;", 
"", 
" <span class=\"ts\"/>if (!<a class=\"id\" href=\"#con\">con</a>-><a class=\"id\" href=\"#con\">con</a> || !(<a class=\"id\" href=\"#con\">con</a>-><a class=\"id\" href=\"#flag\">flag</a> &amp; <a class=\"id\" href=\"#CON_DRIVER_FLAG_MODULE\">CON_DRIVER_FLAG_MODULE</a>) ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#con_is_graphics\">con_is_graphics</a>(<a class=\"id\" href=\"#con\">con</a>-><a class=\"id\" href=\"#con\">con</a>, <a class=\"id\" href=\"#con\">con</a>-><a class=\"id\" href=\"#first\">first</a>, <a class=\"id\" href=\"#con\">con</a>-><a class=\"id\" href=\"#last\">last</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#csw\">csw</a> = <a class=\"id\" href=\"#con\">con</a>-><a class=\"id\" href=\"#con\">con</a>;", 
"", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#more\">more</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#more\">more</a> = 0;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = <a class=\"id\" href=\"#con\">con</a>-><a class=\"id\" href=\"#first\">first</a>; <a class=\"id\" href=\"#i\">i</a> <= <a class=\"id\" href=\"#con\">con</a>-><a class=\"id\" href=\"#last\">last</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#con_driver_map\">con_driver_map</a>[<a class=\"id\" href=\"#i\">i</a>] == <a class=\"id\" href=\"#csw\">csw</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#first\">first</a> == -1)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#first\">first</a> = <a class=\"id\" href=\"#i\">i</a>;", 
];
xr_frag_insert('l/5c/7a97e8901537a3130d26a07b9d8fa469cab012.xr', __xr_tmp);
