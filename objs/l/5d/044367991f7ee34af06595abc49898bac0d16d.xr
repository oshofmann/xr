var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Machine specific setup for xen</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Jeremy Fitzhardinge &lt;jeremy@xensource.com&gt;, XenSource Inc, 2007</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#sched\">sched</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#mm\">mm</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#pm\">pm</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#elf\">elf</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#vdso\">vdso</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#e820\">e820</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#setup\">setup</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#acpi\">acpi</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#xen\">xen</a>/<a class=\"id\" href=\"#hypervisor\">hypervisor</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#xen\">xen</a>/<a class=\"id\" href=\"#hypercall\">hypercall</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#xen\">xen</a>/<a class=\"id\" href=\"#page\">page</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#xen\">xen</a>/<a class=\"id\" href=\"#interface\">interface</a>/<a class=\"id\" href=\"#callback\">callback</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#xen\">xen</a>/<a class=\"id\" href=\"#interface\">interface</a>/<a class=\"id\" href=\"#physdev\">physdev</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#xen\">xen</a>/<a class=\"id\" href=\"#interface\">interface</a>/<a class=\"id\" href=\"#memory\">memory</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#xen\">xen</a>/<a class=\"id\" href=\"#features\">features</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> \"xen-ops.h\"", 
"#<a class=\"id\" href=\"#include\">include</a> \"vdso.h\"", 
"", 
"<span class=\"comment\">/* These are code, but not functions.  Defined in entry.S */</span>", 
"extern const char <a class=\"id\" href=\"#xen_hypervisor_callback\">xen_hypervisor_callback</a>[];", 
"extern const char <a class=\"id\" href=\"#xen_failsafe_callback\">xen_failsafe_callback</a>[];", 
"extern void <a class=\"id\" href=\"#xen_sysenter_target\">xen_sysenter_target</a>(void);", 
"extern void <a class=\"id\" href=\"#xen_syscall_target\">xen_syscall_target</a>(void);", 
"extern void <a class=\"id\" href=\"#xen_syscall32_target\">xen_syscall32_target</a>(void);", 
"", 
"static unsigned long <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#xen_release_chunk\">xen_release_chunk</a>(<a class=\"id\" href=\"#phys_addr_t\">phys_addr_t</a> <a class=\"id\" href=\"#start_addr\">start_addr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#phys_addr_t\">phys_addr_t</a> <a class=\"id\" href=\"#end_addr\">end_addr</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#xen_memory_reservation\">xen_memory_reservation</a> <a class=\"id\" href=\"#reservation\">reservation</a> = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#address_bits\">address_bits</a> = 0,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#extent_order\">extent_order</a> = 0,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#domid\">domid</a>        = <a class=\"id\" href=\"#DOMID_SELF\">DOMID_SELF</a>", 
"<span class=\"ts\"/>};", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#start\">start</a>, <a class=\"id\" href=\"#end\">end</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#len\">len</a> = 0;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#pfn\">pfn</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#start\">start</a> = <a class=\"id\" href=\"#PFN_UP\">PFN_UP</a>(<a class=\"id\" href=\"#start_addr\">start_addr</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#end\">end</a> = <a class=\"id\" href=\"#PFN_DOWN\">PFN_DOWN</a>(<a class=\"id\" href=\"#end_addr\">end_addr</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#end\">end</a> <= <a class=\"id\" href=\"#start\">start</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"xen_release_chunk: looking at area pfn %lx-%lx: \",", 
"<span class=\"ts\"/>       <a class=\"id\" href=\"#start\">start</a>, <a class=\"id\" href=\"#end\">end</a>);", 
"<span class=\"ts\"/>for(<a class=\"id\" href=\"#pfn\">pfn</a> = <a class=\"id\" href=\"#start\">start</a>; <a class=\"id\" href=\"#pfn\">pfn</a> &lt; <a class=\"id\" href=\"#end\">end</a>; <a class=\"id\" href=\"#pfn\">pfn</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#mfn\">mfn</a> = <a class=\"id\" href=\"#pfn_to_mfn\">pfn_to_mfn</a>(<a class=\"id\" href=\"#pfn\">pfn</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Make sure pfn exists to start with */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#mfn\">mfn</a> == <a class=\"id\" href=\"#INVALID_P2M_ENTRY\">INVALID_P2M_ENTRY</a> || <a class=\"id\" href=\"#mfn_to_pfn\">mfn_to_pfn</a>(<a class=\"id\" href=\"#mfn\">mfn</a>) != <a class=\"id\" href=\"#pfn\">pfn</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_xen_guest_handle\">set_xen_guest_handle</a>(<a class=\"id\" href=\"#reservation\">reservation</a>.<a class=\"id\" href=\"#extent_start\">extent_start</a>, &amp;<a class=\"id\" href=\"#mfn\">mfn</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#reservation\">reservation</a>.<a class=\"id\" href=\"#nr_extents\">nr_extents</a> = 1;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#HYPERVISOR_memory_op\">HYPERVISOR_memory_op</a>(<a class=\"id\" href=\"#XENMEM_decrease_reservation\">XENMEM_decrease_reservation</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   &amp;<a class=\"id\" href=\"#reservation\">reservation</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#WARN\">WARN</a>(<a class=\"id\" href=\"#ret\">ret</a> != 1, \"Failed to release memory %lx-%lx err=%d\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/>     <a class=\"id\" href=\"#start\">start</a>, <a class=\"id\" href=\"#end\">end</a>, <a class=\"id\" href=\"#ret\">ret</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> == 1) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_phys_to_machine\">set_phys_to_machine</a>(<a class=\"id\" href=\"#pfn\">pfn</a>, <a class=\"id\" href=\"#INVALID_P2M_ENTRY\">INVALID_P2M_ENTRY</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_CONT\">KERN_CONT</a> \"%ld pages freed\\n\", <a class=\"id\" href=\"#len\">len</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#len\">len</a>;", 
"}", 
"", 
"static unsigned long <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#xen_return_unused_memory\">xen_return_unused_memory</a>(unsigned long <a class=\"id\" href=\"#max_pfn\">max_pfn</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     const struct <a class=\"id\" href=\"#e820map\">e820map</a> *<a class=\"id\" href=\"#e820\">e820</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#phys_addr_t\">phys_addr_t</a> <a class=\"id\" href=\"#max_addr\">max_addr</a> = <a class=\"id\" href=\"#PFN_PHYS\">PFN_PHYS</a>(<a class=\"id\" href=\"#max_pfn\">max_pfn</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#phys_addr_t\">phys_addr_t</a> <a class=\"id\" href=\"#last_end\">last_end</a> = 0;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#released\">released</a> = 0;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#e820\">e820</a>-><a class=\"id\" href=\"#nr_map\">nr_map</a> && <a class=\"id\" href=\"#last_end\">last_end</a> &lt; <a class=\"id\" href=\"#max_addr\">max_addr</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#phys_addr_t\">phys_addr_t</a> <a class=\"id\" href=\"#end\">end</a> = <a class=\"id\" href=\"#e820\">e820</a>-><a class=\"id\" href=\"#map\">map</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#addr\">addr</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#end\">end</a> = <a class=\"id\" href=\"#min\">min</a>(<a class=\"id\" href=\"#max_addr\">max_addr</a>, <a class=\"id\" href=\"#end\">end</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#released\">released</a> += <a class=\"id\" href=\"#xen_release_chunk\">xen_release_chunk</a>(<a class=\"id\" href=\"#last_end\">last_end</a>, <a class=\"id\" href=\"#end\">end</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#last_end\">last_end</a> = <a class=\"id\" href=\"#e820\">e820</a>-><a class=\"id\" href=\"#map\">map</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#addr\">addr</a> + <a class=\"id\" href=\"#e820\">e820</a>-><a class=\"id\" href=\"#map\">map</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#size\">size</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#last_end\">last_end</a> &lt; <a class=\"id\" href=\"#max_addr\">max_addr</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#released\">released</a> += <a class=\"id\" href=\"#xen_release_chunk\">xen_release_chunk</a>(<a class=\"id\" href=\"#last_end\">last_end</a>, <a class=\"id\" href=\"#max_addr\">max_addr</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"released %ld pages of unused memory\\n\", <a class=\"id\" href=\"#released\">released</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#released\">released</a>;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * machine_specific_memory_setup - Hook for machine specific memory setup.</span>", 
"<span class=\"comment\"> **/</span>", 
"", 
"char * <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#xen_memory_setup\">xen_memory_setup</a>(void)", 
"{", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#max_pfn\">max_pfn</a> = <a class=\"id\" href=\"#xen_start_info\">xen_start_info</a>-><a class=\"id\" href=\"#nr_pages\">nr_pages</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#max_pfn\">max_pfn</a> = <a class=\"id\" href=\"#min\">min</a>(<a class=\"id\" href=\"#MAX_DOMAIN_PAGES\">MAX_DOMAIN_PAGES</a>, <a class=\"id\" href=\"#max_pfn\">max_pfn</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#e820\">e820</a>.<a class=\"id\" href=\"#nr_map\">nr_map</a> = 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#e820_add_region\">e820_add_region</a>(0, <a class=\"id\" href=\"#PFN_PHYS\">PFN_PHYS</a>((<a class=\"id\" href=\"#u64\">u64</a>)<a class=\"id\" href=\"#max_pfn\">max_pfn</a>), <a class=\"id\" href=\"#E820_RAM\">E820_RAM</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Even though this is normal, usable memory under Xen, reserve</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * ISA memory anyway because too many things think they can poke</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * about in there.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#e820_add_region\">e820_add_region</a>(<a class=\"id\" href=\"#ISA_START_ADDRESS\">ISA_START_ADDRESS</a>, <a class=\"id\" href=\"#ISA_END_ADDRESS\">ISA_END_ADDRESS</a> - <a class=\"id\" href=\"#ISA_START_ADDRESS\">ISA_START_ADDRESS</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#E820_RESERVED\">E820_RESERVED</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Reserve Xen bits:</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *  - mfn_list</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *  - xen_start_info</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * See comment above \"struct start_info\" in &lt;xen/interface/xen.h&gt;</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#reserve_early\">reserve_early</a>(<a class=\"id\" href=\"#__pa\">__pa</a>(<a class=\"id\" href=\"#xen_start_info\">xen_start_info</a>-><a class=\"id\" href=\"#mfn_list\">mfn_list</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#__pa\">__pa</a>(<a class=\"id\" href=\"#xen_start_info\">xen_start_info</a>-><a class=\"id\" href=\"#pt_base\">pt_base</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"XEN START INFO\");", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sanitize_e820_map\">sanitize_e820_map</a>(<a class=\"id\" href=\"#e820\">e820</a>.<a class=\"id\" href=\"#map\">map</a>, <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#e820\">e820</a>.<a class=\"id\" href=\"#map\">map</a>), &amp;<a class=\"id\" href=\"#e820\">e820</a>.<a class=\"id\" href=\"#nr_map\">nr_map</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#xen_return_unused_memory\">xen_return_unused_memory</a>(<a class=\"id\" href=\"#xen_start_info\">xen_start_info</a>-><a class=\"id\" href=\"#nr_pages\">nr_pages</a>, &amp;<a class=\"id\" href=\"#e820\">e820</a>);", 
"", 
"<span class=\"ts\"/>return \"Xen\";", 
"}", 
"", 
"static void <a class=\"id\" href=\"#xen_idle\">xen_idle</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#local_irq_disable\">local_irq_disable</a>();", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#need_resched\">need_resched</a>())", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#local_irq_enable\">local_irq_enable</a>();", 
"<span class=\"ts\"/>else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#current_thread_info\">current_thread_info</a>()-><a class=\"id\" href=\"#status\">status</a> &= ~<a class=\"id\" href=\"#TS_POLLING\">TS_POLLING</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#smp_mb__after_clear_bit\">smp_mb__after_clear_bit</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#safe_halt\">safe_halt</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#current_thread_info\">current_thread_info</a>()-><a class=\"id\" href=\"#status\">status</a> |= <a class=\"id\" href=\"#TS_POLLING\">TS_POLLING</a>;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Set the bit indicating \"nosegneg\" library variants should be used.</span>", 
"<span class=\"comment\"> * We only need to bother in pure 32-bit mode; compat 32-bit processes</span>", 
"<span class=\"comment\"> * can have un-truncated segments, so wrapping around is allowed.</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#fiddle_vdso\">fiddle_vdso</a>(void)", 
"{", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_X86_32\">CONFIG_X86_32</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> *<a class=\"id\" href=\"#mask\">mask</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mask\">mask</a> = <a class=\"id\" href=\"#VDSO32_SYMBOL\">VDSO32_SYMBOL</a>(&amp;<a class=\"id\" href=\"#vdso32_int80_start\">vdso32_int80_start</a>, <a class=\"id\" href=\"#NOTE_MASK\">NOTE_MASK</a>);", 
"<span class=\"ts\"/>*<a class=\"id\" href=\"#mask\">mask</a> |= 1 << <a class=\"id\" href=\"#VDSO_NOTE_NONEGSEG_BIT\">VDSO_NOTE_NONEGSEG_BIT</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mask\">mask</a> = <a class=\"id\" href=\"#VDSO32_SYMBOL\">VDSO32_SYMBOL</a>(&amp;<a class=\"id\" href=\"#vdso32_sysenter_start\">vdso32_sysenter_start</a>, <a class=\"id\" href=\"#NOTE_MASK\">NOTE_MASK</a>);", 
"<span class=\"ts\"/>*<a class=\"id\" href=\"#mask\">mask</a> |= 1 << <a class=\"id\" href=\"#VDSO_NOTE_NONEGSEG_BIT\">VDSO_NOTE_NONEGSEG_BIT</a>;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"}", 
"", 
"static <a class=\"id\" href=\"#__cpuinit\">__cpuinit</a> int <a class=\"id\" href=\"#register_callback\">register_callback</a>(unsigned <a class=\"id\" href=\"#type\">type</a>, const void *<a class=\"id\" href=\"#func\">func</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#callback_register\">callback_register</a> <a class=\"id\" href=\"#callback\">callback</a> = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#type\">type</a> = <a class=\"id\" href=\"#type\">type</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#address\">address</a> = <a class=\"id\" href=\"#XEN_CALLBACK\">XEN_CALLBACK</a>(<a class=\"id\" href=\"#__KERNEL_CS\">__KERNEL_CS</a>, <a class=\"id\" href=\"#func\">func</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#flags\">flags</a> = <a class=\"id\" href=\"#CALLBACKF_mask_events\">CALLBACKF_mask_events</a>,", 
"<span class=\"ts\"/>};", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#HYPERVISOR_callback_op\">HYPERVISOR_callback_op</a>(<a class=\"id\" href=\"#CALLBACKOP_register\">CALLBACKOP_register</a>, &amp;<a class=\"id\" href=\"#callback\">callback</a>);", 
"}", 
"", 
"void <a class=\"id\" href=\"#__cpuinit\">__cpuinit</a> <a class=\"id\" href=\"#xen_enable_sysenter\">xen_enable_sysenter</a>(void)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>unsigned <a class=\"id\" href=\"#sysenter_feature\">sysenter_feature</a>;", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_X86_32\">CONFIG_X86_32</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysenter_feature\">sysenter_feature</a> = <a class=\"id\" href=\"#X86_FEATURE_SEP\">X86_FEATURE_SEP</a>;", 
"#else", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysenter_feature\">sysenter_feature</a> = <a class=\"id\" href=\"#X86_FEATURE_SYSENTER32\">X86_FEATURE_SYSENTER32</a>;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#boot_cpu_has\">boot_cpu_has</a>(<a class=\"id\" href=\"#sysenter_feature\">sysenter_feature</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#register_callback\">register_callback</a>(<a class=\"id\" href=\"#CALLBACKTYPE_sysenter\">CALLBACKTYPE_sysenter</a>, <a class=\"id\" href=\"#xen_sysenter_target\">xen_sysenter_target</a>);", 
"<span class=\"ts\"/>if(<a class=\"id\" href=\"#ret\">ret</a> != 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#setup_clear_cpu_cap\">setup_clear_cpu_cap</a>(<a class=\"id\" href=\"#sysenter_feature\">sysenter_feature</a>);", 
"}", 
"", 
"void <a class=\"id\" href=\"#__cpuinit\">__cpuinit</a> <a class=\"id\" href=\"#xen_enable_syscall\">xen_enable_syscall</a>(void)", 
"{", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_X86_64\">CONFIG_X86_64</a>", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#register_callback\">register_callback</a>(<a class=\"id\" href=\"#CALLBACKTYPE_syscall\">CALLBACKTYPE_syscall</a>, <a class=\"id\" href=\"#xen_syscall_target\">xen_syscall_target</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> != 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"Failed to set syscall callback: %d\\n\", <a class=\"id\" href=\"#ret\">ret</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Pretty fatal; 64-bit userspace has no other</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/>   mechanism for syscalls. */</span>", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#boot_cpu_has\">boot_cpu_has</a>(<a class=\"id\" href=\"#X86_FEATURE_SYSCALL32\">X86_FEATURE_SYSCALL32</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#register_callback\">register_callback</a>(<a class=\"id\" href=\"#CALLBACKTYPE_syscall32\">CALLBACKTYPE_syscall32</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#xen_syscall32_target\">xen_syscall32_target</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> != 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#setup_clear_cpu_cap\">setup_clear_cpu_cap</a>(<a class=\"id\" href=\"#X86_FEATURE_SYSCALL32\">X86_FEATURE_SYSCALL32</a>);", 
"<span class=\"ts\"/>}", 
"#<a class=\"id\" href=\"#endif\">endif</a> <span class=\"comment\">/* CONFIG_X86_64 */</span>", 
"}", 
"", 
"void <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#xen_arch_setup\">xen_arch_setup</a>(void)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#physdev_set_iopl\">physdev_set_iopl</a> <a class=\"id\" href=\"#set_iopl\">set_iopl</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rc\">rc</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#xen_panic_handler_init\">xen_panic_handler_init</a>();", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#HYPERVISOR_vm_assist\">HYPERVISOR_vm_assist</a>(<a class=\"id\" href=\"#VMASST_CMD_enable\">VMASST_CMD_enable</a>, <a class=\"id\" href=\"#VMASST_TYPE_4gb_segments\">VMASST_TYPE_4gb_segments</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#HYPERVISOR_vm_assist\">HYPERVISOR_vm_assist</a>(<a class=\"id\" href=\"#VMASST_CMD_enable\">VMASST_CMD_enable</a>, <a class=\"id\" href=\"#VMASST_TYPE_writable_pagetables\">VMASST_TYPE_writable_pagetables</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#xen_feature\">xen_feature</a>(<a class=\"id\" href=\"#XENFEAT_auto_translated_physmap\">XENFEAT_auto_translated_physmap</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#HYPERVISOR_vm_assist\">HYPERVISOR_vm_assist</a>(<a class=\"id\" href=\"#VMASST_CMD_enable\">VMASST_CMD_enable</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     <a class=\"id\" href=\"#VMASST_TYPE_pae_extended_cr3\">VMASST_TYPE_pae_extended_cr3</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#register_callback\">register_callback</a>(<a class=\"id\" href=\"#CALLBACKTYPE_event\">CALLBACKTYPE_event</a>, <a class=\"id\" href=\"#xen_hypervisor_callback\">xen_hypervisor_callback</a>) ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#register_callback\">register_callback</a>(<a class=\"id\" href=\"#CALLBACKTYPE_failsafe\">CALLBACKTYPE_failsafe</a>, <a class=\"id\" href=\"#xen_failsafe_callback\">xen_failsafe_callback</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BUG\">BUG</a>();", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#xen_enable_sysenter\">xen_enable_sysenter</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#xen_enable_syscall\">xen_enable_syscall</a>();", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#set_iopl\">set_iopl</a>.<a class=\"id\" href=\"#iopl\">iopl</a> = 1;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#HYPERVISOR_physdev_op\">HYPERVISOR_physdev_op</a>(<a class=\"id\" href=\"#PHYSDEVOP_set_iopl\">PHYSDEVOP_set_iopl</a>, &amp;<a class=\"id\" href=\"#set_iopl\">set_iopl</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a> != 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"physdev_op failed %d\\n\", <a class=\"id\" href=\"#rc\">rc</a>);", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_ACPI\">CONFIG_ACPI</a>", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#xen_start_info\">xen_start_info</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#SIF_INITDOMAIN\">SIF_INITDOMAIN</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"ACPI in unprivileged domain disabled\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#disable_acpi\">disable_acpi</a>();", 
"<span class=\"ts\"/>}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>(<a class=\"id\" href=\"#boot_command_line\">boot_command_line</a>, <a class=\"id\" href=\"#xen_start_info\">xen_start_info</a>-><a class=\"id\" href=\"#cmd_line\">cmd_line</a>,", 
"<span class=\"ts\"/>       <a class=\"id\" href=\"#MAX_GUEST_CMDLINE\">MAX_GUEST_CMDLINE</a> &gt; <a class=\"id\" href=\"#COMMAND_LINE_SIZE\">COMMAND_LINE_SIZE</a> ?", 
"<span class=\"ts\"/>       <a class=\"id\" href=\"#COMMAND_LINE_SIZE\">COMMAND_LINE_SIZE</a> : <a class=\"id\" href=\"#MAX_GUEST_CMDLINE\">MAX_GUEST_CMDLINE</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pm_idle\">pm_idle</a> = <a class=\"id\" href=\"#xen_idle\">xen_idle</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#paravirt_disable_iospace\">paravirt_disable_iospace</a>();", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fiddle_vdso\">fiddle_vdso</a>();", 
"}", 
];
xr_frag_insert('l/5d/044367991f7ee34af06595abc49898bac0d16d.xr', __xr_tmp);
