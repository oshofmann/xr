var __xr_tmp = [
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BCM5482_SSD_SGMII_SLAVE_AD\">BCM5482_SSD_SGMII_SLAVE_AD</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * Disable secondary SerDes powerdown</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#reg\">reg</a> = <a class=\"id\" href=\"#BCM5482_SSD_1000BX_CTL\">BCM5482_SSD_1000BX_CTL</a> | <a class=\"id\" href=\"#MII_BCM54XX_EXP_SEL_SSD\">MII_BCM54XX_EXP_SEL_SSD</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#bcm54xx_exp_read\">bcm54xx_exp_read</a>(<a class=\"id\" href=\"#phydev\">phydev</a>, <a class=\"id\" href=\"#reg\">reg</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#bcm54xx_exp_write\">bcm54xx_exp_write</a>(<a class=\"id\" href=\"#phydev\">phydev</a>, <a class=\"id\" href=\"#reg\">reg</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> &amp; ~<a class=\"id\" href=\"#BCM5482_SSD_1000BX_CTL_PWRDOWN\">BCM5482_SSD_1000BX_CTL_PWRDOWN</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * Select 1000BASE-X register set (primary SerDes)</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#reg\">reg</a> = <a class=\"id\" href=\"#bcm54xx_shadow_read\">bcm54xx_shadow_read</a>(<a class=\"id\" href=\"#phydev\">phydev</a>, <a class=\"id\" href=\"#BCM5482_SHD_MODE\">BCM5482_SHD_MODE</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bcm54xx_shadow_write\">bcm54xx_shadow_write</a>(<a class=\"id\" href=\"#phydev\">phydev</a>, <a class=\"id\" href=\"#BCM5482_SHD_MODE\">BCM5482_SHD_MODE</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     <a class=\"id\" href=\"#reg\">reg</a> | <a class=\"id\" href=\"#BCM5482_SHD_MODE_1000BX\">BCM5482_SHD_MODE_1000BX</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * LED1=ACTIVITYLED, LED3=LINKSPD[2]</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * (Use LED1 as secondary SerDes ACTIVITY LED)</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bcm54xx_shadow_write\">bcm54xx_shadow_write</a>(<a class=\"id\" href=\"#phydev\">phydev</a>, <a class=\"id\" href=\"#BCM5482_SHD_LEDS1\">BCM5482_SHD_LEDS1</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BCM5482_SHD_LEDS1_LED1\">BCM5482_SHD_LEDS1_LED1</a>(<a class=\"id\" href=\"#BCM_LED_SRC_ACTIVITYLED\">BCM_LED_SRC_ACTIVITYLED</a>) |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BCM5482_SHD_LEDS1_LED3\">BCM5482_SHD_LEDS1_LED3</a>(<a class=\"id\" href=\"#BCM_LED_SRC_LINKSPD2\">BCM_LED_SRC_LINKSPD2</a>));", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * Auto-negotiation doesn't seem to work quite right</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * in this mode, so we disable it and force it to the</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * right speed/duplex setting.  Only 'link status'</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * is important.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#phydev\">phydev</a>-><a class=\"id\" href=\"#autoneg\">autoneg</a> = <a class=\"id\" href=\"#AUTONEG_DISABLE\">AUTONEG_DISABLE</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#phydev\">phydev</a>-><a class=\"id\" href=\"#speed\">speed</a> = <a class=\"id\" href=\"#SPEED_1000\">SPEED_1000</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#phydev\">phydev</a>-><a class=\"id\" href=\"#duplex\">duplex</a> = <a class=\"id\" href=\"#DUPLEX_FULL\">DUPLEX_FULL</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#bcm5482_read_status\">bcm5482_read_status</a>(struct <a class=\"id\" href=\"#phy_device\">phy_device</a> *<a class=\"id\" href=\"#phydev\">phydev</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#genphy_read_status\">genphy_read_status</a>(<a class=\"id\" href=\"#phydev\">phydev</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#phydev\">phydev</a>-><a class=\"id\" href=\"#dev_flags\">dev_flags</a> &amp; <a class=\"id\" href=\"#PHY_BCM_FLAGS_MODE_1000BX\">PHY_BCM_FLAGS_MODE_1000BX</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * Only link status matters for 1000Base-X mode, so force</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * 1000 Mbit/s full-duplex status</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#phydev\">phydev</a>-><a class=\"id\" href=\"#link\">link</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#phydev\">phydev</a>-><a class=\"id\" href=\"#speed\">speed</a> = <a class=\"id\" href=\"#SPEED_1000\">SPEED_1000</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#phydev\">phydev</a>-><a class=\"id\" href=\"#duplex\">duplex</a> = <a class=\"id\" href=\"#DUPLEX_FULL\">DUPLEX_FULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#bcm54xx_ack_interrupt\">bcm54xx_ack_interrupt</a>(struct <a class=\"id\" href=\"#phy_device\">phy_device</a> *<a class=\"id\" href=\"#phydev\">phydev</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#reg\">reg</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Clear pending interrupts.  */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#reg\">reg</a> = <a class=\"id\" href=\"#phy_read\">phy_read</a>(<a class=\"id\" href=\"#phydev\">phydev</a>, <a class=\"id\" href=\"#MII_BCM54XX_ISR\">MII_BCM54XX_ISR</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#reg\">reg</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#reg\">reg</a>;", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#bcm54xx_config_intr\">bcm54xx_config_intr</a>(struct <a class=\"id\" href=\"#phy_device\">phy_device</a> *<a class=\"id\" href=\"#phydev\">phydev</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#reg\">reg</a>, <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#reg\">reg</a> = <a class=\"id\" href=\"#phy_read\">phy_read</a>(<a class=\"id\" href=\"#phydev\">phydev</a>, <a class=\"id\" href=\"#MII_BCM54XX_ECR\">MII_BCM54XX_ECR</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#reg\">reg</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#reg\">reg</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#phydev\">phydev</a>-><a class=\"id\" href=\"#interrupts\">interrupts</a> == <a class=\"id\" href=\"#PHY_INTERRUPT_ENABLED\">PHY_INTERRUPT_ENABLED</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#reg\">reg</a> &= ~<a class=\"id\" href=\"#MII_BCM54XX_ECR_IM\">MII_BCM54XX_ECR_IM</a>;", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#reg\">reg</a> |= <a class=\"id\" href=\"#MII_BCM54XX_ECR_IM\">MII_BCM54XX_ECR_IM</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#phy_write\">phy_write</a>(<a class=\"id\" href=\"#phydev\">phydev</a>, <a class=\"id\" href=\"#MII_BCM54XX_ECR\">MII_BCM54XX_ECR</a>, <a class=\"id\" href=\"#reg\">reg</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#bcm5481_config_aneg\">bcm5481_config_aneg</a>(struct <a class=\"id\" href=\"#phy_device\">phy_device</a> *<a class=\"id\" href=\"#phydev\">phydev</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Aneg firsly. */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#genphy_config_aneg\">genphy_config_aneg</a>(<a class=\"id\" href=\"#phydev\">phydev</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Then we can set up the delay. */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#phydev\">phydev</a>-><a class=\"id\" href=\"#interface\">interface</a> == <a class=\"id\" href=\"#PHY_INTERFACE_MODE_RGMII_RXID\">PHY_INTERFACE_MODE_RGMII_RXID</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#reg\">reg</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * There is no BCM5481 specification available, so down</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * here is everything we know about \"register 0x18\". This</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * at least helps BCM5481 to successfuly receive packets</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * on MPC8360E-RDK board. Peter Barada &lt;peterb@logicpd.com&gt;</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * says: \"This sets delay between the RXD and RXC signals</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * instead of using trace lengths to achieve timing\".</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Set RDX clk delay. */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#reg\">reg</a> = 0x7 | (0x7 << 12);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#phy_write\">phy_write</a>(<a class=\"id\" href=\"#phydev\">phydev</a>, 0x18, <a class=\"id\" href=\"#reg\">reg</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#reg\">reg</a> = <a class=\"id\" href=\"#phy_read\">phy_read</a>(<a class=\"id\" href=\"#phydev\">phydev</a>, 0x18);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Set RDX-RXC skew. */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#reg\">reg</a> |= (1 << 8);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Write bits 14:0. */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#reg\">reg</a> |= (1 << 15);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#phy_write\">phy_write</a>(<a class=\"id\" href=\"#phydev\">phydev</a>, 0x18, <a class=\"id\" href=\"#reg\">reg</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#brcm_phy_setbits\">brcm_phy_setbits</a>(struct <a class=\"id\" href=\"#phy_device\">phy_device</a> *<a class=\"id\" href=\"#phydev\">phydev</a>, int <a class=\"id\" href=\"#reg\">reg</a>, int <a class=\"id\" href=\"#set\">set</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#val\">val</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a> = <a class=\"id\" href=\"#phy_read\">phy_read</a>(<a class=\"id\" href=\"#phydev\">phydev</a>, <a class=\"id\" href=\"#reg\">reg</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#val\">val</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#val\">val</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#phy_write\">phy_write</a>(<a class=\"id\" href=\"#phydev\">phydev</a>, <a class=\"id\" href=\"#reg\">reg</a>, <a class=\"id\" href=\"#val\">val</a> | <a class=\"id\" href=\"#set\">set</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#brcm_fet_config_init\">brcm_fet_config_init</a>(struct <a class=\"id\" href=\"#phy_device\">phy_device</a> *<a class=\"id\" href=\"#phydev\">phydev</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#reg\">reg</a>, <a class=\"id\" href=\"#err\">err</a>, <a class=\"id\" href=\"#err2\">err2</a>, <a class=\"id\" href=\"#brcmtest\">brcmtest</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Reset the PHY to bring it to a known state. */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#phy_write\">phy_write</a>(<a class=\"id\" href=\"#phydev\">phydev</a>, <a class=\"id\" href=\"#MII_BMCR\">MII_BMCR</a>, <a class=\"id\" href=\"#BMCR_RESET\">BMCR_RESET</a>);", 
];
xr_frag_insert('l/5d/49cdc08ad397ffbc389741ed899a6135ca7a96.xr', __xr_tmp);
