var __xr_tmp = [
"", 
"<span class=\"ts\"/><span class=\"comment\">/* The following flags have to be released exactly in this order,</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * otherwise the DS12887 (popular MC146818A clone with integrated</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * battery and quartz) will not reset the oscillator and will not</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * update precisely 500 ms later. You won't find this mentioned in</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * the Dallas Semiconductor data sheets, but who believes data</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * sheets anyway ...                           -- Markus Kuhn</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#CMOS_WRITE\">CMOS_WRITE</a>(<a class=\"id\" href=\"#save_control\">save_control</a>, <a class=\"id\" href=\"#RTC_CONTROL\">RTC_CONTROL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#CMOS_WRITE\">CMOS_WRITE</a>(<a class=\"id\" href=\"#save_freq_select\">save_freq_select</a>, <a class=\"id\" href=\"#RTC_FREQ_SELECT\">RTC_FREQ_SELECT</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"}", 
"", 
"unsigned long <a class=\"id\" href=\"#mach_get_cmos_time\">mach_get_cmos_time</a>(void)", 
"{", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#status\">status</a>, <a class=\"id\" href=\"#year\">year</a>, <a class=\"id\" href=\"#mon\">mon</a>, <a class=\"id\" href=\"#day\">day</a>, <a class=\"id\" href=\"#hour\">hour</a>, <a class=\"id\" href=\"#min\">min</a>, <a class=\"id\" href=\"#sec\">sec</a>, <a class=\"id\" href=\"#century\">century</a> = 0;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * If UIP is clear, then we have &gt;= 244 microseconds before</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * RTC registers will be updated.  Spec sheet says that this</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * is the reliable way to read RTC - registers. If UIP is set</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * then the register access might be invalid.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>while ((<a class=\"id\" href=\"#CMOS_READ\">CMOS_READ</a>(<a class=\"id\" href=\"#RTC_FREQ_SELECT\">RTC_FREQ_SELECT</a>) &amp; <a class=\"id\" href=\"#RTC_UIP\">RTC_UIP</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cpu_relax\">cpu_relax</a>();", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sec\">sec</a> = <a class=\"id\" href=\"#CMOS_READ\">CMOS_READ</a>(<a class=\"id\" href=\"#RTC_SECONDS\">RTC_SECONDS</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#min\">min</a> = <a class=\"id\" href=\"#CMOS_READ\">CMOS_READ</a>(<a class=\"id\" href=\"#RTC_MINUTES\">RTC_MINUTES</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#hour\">hour</a> = <a class=\"id\" href=\"#CMOS_READ\">CMOS_READ</a>(<a class=\"id\" href=\"#RTC_HOURS\">RTC_HOURS</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#day\">day</a> = <a class=\"id\" href=\"#CMOS_READ\">CMOS_READ</a>(<a class=\"id\" href=\"#RTC_DAY_OF_MONTH\">RTC_DAY_OF_MONTH</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mon\">mon</a> = <a class=\"id\" href=\"#CMOS_READ\">CMOS_READ</a>(<a class=\"id\" href=\"#RTC_MONTH\">RTC_MONTH</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#year\">year</a> = <a class=\"id\" href=\"#CMOS_READ\">CMOS_READ</a>(<a class=\"id\" href=\"#RTC_YEAR\">RTC_YEAR</a>);", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_ACPI\">CONFIG_ACPI</a>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#acpi_gbl_FADT\">acpi_gbl_FADT</a>.<a class=\"id\" href=\"#header\">header</a>.<a class=\"id\" href=\"#revision\">revision</a> >= <a class=\"id\" href=\"#FADT2_REVISION_ID\">FADT2_REVISION_ID</a> &&", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#acpi_gbl_FADT\">acpi_gbl_FADT</a>.<a class=\"id\" href=\"#century\">century</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#century\">century</a> = <a class=\"id\" href=\"#CMOS_READ\">CMOS_READ</a>(<a class=\"id\" href=\"#acpi_gbl_FADT\">acpi_gbl_FADT</a>.<a class=\"id\" href=\"#century\">century</a>);", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#CMOS_READ\">CMOS_READ</a>(<a class=\"id\" href=\"#RTC_CONTROL\">RTC_CONTROL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON_ONCE\">WARN_ON_ONCE</a>(<a class=\"id\" href=\"#RTC_ALWAYS_BCD\">RTC_ALWAYS_BCD</a> && (<a class=\"id\" href=\"#status\">status</a> &amp; <a class=\"id\" href=\"#RTC_DM_BINARY\">RTC_DM_BINARY</a>));", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#RTC_ALWAYS_BCD\">RTC_ALWAYS_BCD</a> || !(<a class=\"id\" href=\"#status\">status</a> &amp; <a class=\"id\" href=\"#RTC_DM_BINARY\">RTC_DM_BINARY</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sec\">sec</a> = <a class=\"id\" href=\"#bcd2bin\">bcd2bin</a>(<a class=\"id\" href=\"#sec\">sec</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#min\">min</a> = <a class=\"id\" href=\"#bcd2bin\">bcd2bin</a>(<a class=\"id\" href=\"#min\">min</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hour\">hour</a> = <a class=\"id\" href=\"#bcd2bin\">bcd2bin</a>(<a class=\"id\" href=\"#hour\">hour</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#day\">day</a> = <a class=\"id\" href=\"#bcd2bin\">bcd2bin</a>(<a class=\"id\" href=\"#day\">day</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mon\">mon</a> = <a class=\"id\" href=\"#bcd2bin\">bcd2bin</a>(<a class=\"id\" href=\"#mon\">mon</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#year\">year</a> = <a class=\"id\" href=\"#bcd2bin\">bcd2bin</a>(<a class=\"id\" href=\"#year\">year</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#century\">century</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#century\">century</a> = <a class=\"id\" href=\"#bcd2bin\">bcd2bin</a>(<a class=\"id\" href=\"#century\">century</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#year\">year</a> += <a class=\"id\" href=\"#century\">century</a> * 100;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"Extended CMOS year: %d\\n\", <a class=\"id\" href=\"#century\">century</a> * 100);", 
"<span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#year\">year</a> += <a class=\"id\" href=\"#CMOS_YEARS_OFFS\">CMOS_YEARS_OFFS</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#mktime\">mktime</a>(<a class=\"id\" href=\"#year\">year</a>, <a class=\"id\" href=\"#mon\">mon</a>, <a class=\"id\" href=\"#day\">day</a>, <a class=\"id\" href=\"#hour\">hour</a>, <a class=\"id\" href=\"#min\">min</a>, <a class=\"id\" href=\"#sec\">sec</a>);", 
"}", 
"", 
"<span class=\"comment\">/* Routines for accessing the CMOS RAM/RTC. */</span>", 
"unsigned char <a class=\"id\" href=\"#rtc_cmos_read\">rtc_cmos_read</a>(unsigned char <a class=\"id\" href=\"#addr\">addr</a>)", 
"{", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#val\">val</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#lock_cmos_prefix\">lock_cmos_prefix</a>(<a class=\"id\" href=\"#addr\">addr</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#addr\">addr</a>, <a class=\"id\" href=\"#RTC_PORT\">RTC_PORT</a>(0));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a> = <a class=\"id\" href=\"#inb\">inb</a>(<a class=\"id\" href=\"#RTC_PORT\">RTC_PORT</a>(1));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#lock_cmos_suffix\">lock_cmos_suffix</a>(<a class=\"id\" href=\"#addr\">addr</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#val\">val</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#rtc_cmos_read\">rtc_cmos_read</a>);", 
"", 
"void <a class=\"id\" href=\"#rtc_cmos_write\">rtc_cmos_write</a>(unsigned char <a class=\"id\" href=\"#val\">val</a>, unsigned char <a class=\"id\" href=\"#addr\">addr</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#lock_cmos_prefix\">lock_cmos_prefix</a>(<a class=\"id\" href=\"#addr\">addr</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#addr\">addr</a>, <a class=\"id\" href=\"#RTC_PORT\">RTC_PORT</a>(0));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#val\">val</a>, <a class=\"id\" href=\"#RTC_PORT\">RTC_PORT</a>(1));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#lock_cmos_suffix\">lock_cmos_suffix</a>(<a class=\"id\" href=\"#addr\">addr</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#rtc_cmos_write\">rtc_cmos_write</a>);", 
"", 
"int <a class=\"id\" href=\"#update_persistent_clock\">update_persistent_clock</a>(struct <a class=\"id\" href=\"#timespec\">timespec</a> <a class=\"id\" href=\"#now\">now</a>)", 
"{", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irqsave\">spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#rtc_lock\">rtc_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#x86_platform\">x86_platform</a>.<a class=\"id\" href=\"#set_wallclock\">set_wallclock</a>(<a class=\"id\" href=\"#now\">now</a>.<a class=\"id\" href=\"#tv_sec\">tv_sec</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irqrestore\">spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#rtc_lock\">rtc_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"}", 
"", 
"<span class=\"comment\">/* not static: needed by APM */</span>", 
"void <a class=\"id\" href=\"#read_persistent_clock\">read_persistent_clock</a>(struct <a class=\"id\" href=\"#timespec\">timespec</a> *<a class=\"id\" href=\"#ts\">ts</a>)", 
"{", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#retval\">retval</a>, <a class=\"id\" href=\"#flags\">flags</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irqsave\">spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#rtc_lock\">rtc_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#x86_platform\">x86_platform</a>.<a class=\"id\" href=\"#get_wallclock\">get_wallclock</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irqrestore\">spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#rtc_lock\">rtc_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ts\">ts</a>-><a class=\"id\" href=\"#tv_sec\">tv_sec</a> = <a class=\"id\" href=\"#retval\">retval</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ts\">ts</a>-><a class=\"id\" href=\"#tv_nsec\">tv_nsec</a> = 0;", 
"}", 
"", 
"unsigned long long <a class=\"id\" href=\"#native_read_tsc\">native_read_tsc</a>(void)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#__native_read_tsc\">__native_read_tsc</a>();", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#native_read_tsc\">native_read_tsc</a>);", 
"", 
"", 
"static struct <a class=\"id\" href=\"#resource\">resource</a> <a class=\"id\" href=\"#rtc_resources\">rtc_resources</a>[] = {", 
"<span class=\"ts\"/>[0] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#start\">start</a><span class=\"ts\"/>= <a class=\"id\" href=\"#RTC_PORT\">RTC_PORT</a>(0),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#end\">end</a><span class=\"ts\"/>= <a class=\"id\" href=\"#RTC_PORT\">RTC_PORT</a>(1),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#flags\">flags</a><span class=\"ts\"/>= <a class=\"id\" href=\"#IORESOURCE_IO\">IORESOURCE_IO</a>,", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[1] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#start\">start</a><span class=\"ts\"/>= <a class=\"id\" href=\"#RTC_IRQ\">RTC_IRQ</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#end\">end</a><span class=\"ts\"/>= <a class=\"id\" href=\"#RTC_IRQ\">RTC_IRQ</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#flags\">flags</a><span class=\"ts\"/>= <a class=\"id\" href=\"#IORESOURCE_IRQ\">IORESOURCE_IRQ</a>,", 
"<span class=\"ts\"/>}", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#platform_device\">platform_device</a> <a class=\"id\" href=\"#rtc_device\">rtc_device</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a><span class=\"ts\"/><span class=\"ts\"/>= \"rtc_cmos\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#id\">id</a><span class=\"ts\"/><span class=\"ts\"/>= -1,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#resource\">resource</a><span class=\"ts\"/>= <a class=\"id\" href=\"#rtc_resources\">rtc_resources</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#num_resources\">num_resources</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#rtc_resources\">rtc_resources</a>),", 
"};", 
"", 
"static <a class=\"id\" href=\"#__init\">__init</a> int <a class=\"id\" href=\"#add_rtc_cmos\">add_rtc_cmos</a>(void)", 
"{", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_PNP\">CONFIG_PNP</a>", 
"<span class=\"ts\"/>static const char *<a class=\"id\" href=\"#ids\">ids</a>[] <a class=\"id\" href=\"#__initconst\">__initconst</a> =", 
"<span class=\"ts\"/>    { \"PNP0b00\", \"PNP0b01\", \"PNP0b02\", };", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pnp_dev\">pnp_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pnp_id\">pnp_id</a> *<a class=\"id\" href=\"#id\">id</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pnp_for_each_dev\">pnp_for_each_dev</a>(<a class=\"id\" href=\"#dev\">dev</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#id\">id</a> = <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#id\">id</a>; <a class=\"id\" href=\"#id\">id</a>; <a class=\"id\" href=\"#id\">id</a> = <a class=\"id\" href=\"#id\">id</a>-><a class=\"id\" href=\"#next\">next</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#ids\">ids</a>); <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#compare_pnp_id\">compare_pnp_id</a>(<a class=\"id\" href=\"#id\">id</a>, <a class=\"id\" href=\"#ids\">ids</a>[<a class=\"id\" href=\"#i\">i</a>]) != 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#platform_device_register\">platform_device_register</a>(&amp;<a class=\"id\" href=\"#rtc_device\">rtc_device</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_info\">dev_info</a>(&amp;<a class=\"id\" href=\"#rtc_device\">rtc_device</a>.<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/> \"registered platform RTC device (no PNP device found)\\n\");", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"<a class=\"id\" href=\"#device_initcall\">device_initcall</a>(<a class=\"id\" href=\"#add_rtc_cmos\">add_rtc_cmos</a>);", 
];
xr_frag_insert('l/64/52ebf28cc8582cd3e2d8b2825a32495fb75190.xr', __xr_tmp);
