var __xr_tmp = [
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#vga_video_type\">vga_video_type</a> == <a class=\"id\" href=\"#VIDEO_TYPE_EGAC\">VIDEO_TYPE_EGAC</a>", 
"<span class=\"ts\"/>    || <a class=\"id\" href=\"#vga_video_type\">vga_video_type</a> == <a class=\"id\" href=\"#VIDEO_TYPE_VGAC\">VIDEO_TYPE_VGAC</a>", 
"<span class=\"ts\"/>    || <a class=\"id\" href=\"#vga_video_type\">vga_video_type</a> == <a class=\"id\" href=\"#VIDEO_TYPE_EGAM\">VIDEO_TYPE_EGAM</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vga_hardscroll_enabled\">vga_hardscroll_enabled</a> = <a class=\"id\" href=\"#vga_hardscroll_user_enable\">vga_hardscroll_user_enable</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vga_default_font_height\">vga_default_font_height</a> = <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#orig_video_points\">orig_video_points</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vga_video_font_height\">vga_video_font_height</a> = <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#orig_video_points\">orig_video_points</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* This may be suboptimal but is a safe bet - go with it */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vga_scan_lines\">vga_scan_lines</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#vga_video_font_height\">vga_video_font_height</a> * <a class=\"id\" href=\"#vga_video_num_lines\">vga_video_num_lines</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vgacon_xres\">vgacon_xres</a> = <a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#orig_video_cols\">orig_video_cols</a> * <a class=\"id\" href=\"#VGA_FONTWIDTH\">VGA_FONTWIDTH</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vgacon_yres\">vgacon_yres</a> = <a class=\"id\" href=\"#vga_scan_lines\">vga_scan_lines</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#vga_init_done\">vga_init_done</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vgacon_scrollback_startup\">vgacon_scrollback_startup</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vga_init_done\">vga_init_done</a> = 1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#display_desc\">display_desc</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#vgacon_init\">vgacon_init</a>(struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#c\">c</a>, int <a class=\"id\" href=\"#init\">init</a>)", 
"{", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#p\">p</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * We cannot be loaded as a module, therefore init is always 1,</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * but vgacon_init can be called more than once, and init will</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * not be 1.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#vc_can_do_color\">vc_can_do_color</a> = <a class=\"id\" href=\"#vga_can_do_color\">vga_can_do_color</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* set dimensions manually if init != 0 since vc_resize() will fail */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#init\">init</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#vc_cols\">vc_cols</a> = <a class=\"id\" href=\"#vga_video_num_columns\">vga_video_num_columns</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#vc_rows\">vc_rows</a> = <a class=\"id\" href=\"#vga_video_num_lines\">vga_video_num_lines</a>;", 
"<span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vc_resize\">vc_resize</a>(<a class=\"id\" href=\"#c\">c</a>, <a class=\"id\" href=\"#vga_video_num_columns\">vga_video_num_columns</a>, <a class=\"id\" href=\"#vga_video_num_lines\">vga_video_num_lines</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#vc_scan_lines\">vc_scan_lines</a> = <a class=\"id\" href=\"#vga_scan_lines\">vga_scan_lines</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#vc_font\">vc_font</a>.<a class=\"id\" href=\"#height\">height</a> = <a class=\"id\" href=\"#vga_video_font_height\">vga_video_font_height</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#vc_complement_mask\">vc_complement_mask</a> = 0x7700;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#vga_512_chars\">vga_512_chars</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#vc_hi_font_mask\">vc_hi_font_mask</a> = 0x0800;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a> = *<a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#vc_uni_pagedir_loc\">vc_uni_pagedir_loc</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#vc_uni_pagedir_loc\">vc_uni_pagedir_loc</a> == &amp;<a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#vc_uni_pagedir\">vc_uni_pagedir</a> ||", 
"<span class=\"ts\"/>    !--<a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#vc_uni_pagedir_loc\">vc_uni_pagedir_loc</a>[1])", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#con_free_unimap\">con_free_unimap</a>(<a class=\"id\" href=\"#c\">c</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#vc_uni_pagedir_loc\">vc_uni_pagedir_loc</a> = <a class=\"id\" href=\"#vgacon_uni_pagedir\">vgacon_uni_pagedir</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vgacon_uni_pagedir\">vgacon_uni_pagedir</a>[1]++;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#vgacon_uni_pagedir\">vgacon_uni_pagedir</a>[0] && <a class=\"id\" href=\"#p\">p</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#con_set_default_unimap\">con_set_default_unimap</a>(<a class=\"id\" href=\"#c\">c</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Only set the default if the user didn't deliberately override it */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#global_cursor_default\">global_cursor_default</a> == -1)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#global_cursor_default\">global_cursor_default</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>!(<a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#VIDEO_FLAGS_NOCURSOR\">VIDEO_FLAGS_NOCURSOR</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#vgacon_deinit\">vgacon_deinit</a>(struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#c\">c</a>)", 
"{", 
"<span class=\"ts\"/><span class=\"comment\">/* When closing the active console, reset video origin */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#CON_IS_VISIBLE\">CON_IS_VISIBLE</a>(<a class=\"id\" href=\"#c\">c</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#vc_visible_origin\">vc_visible_origin</a> = <a class=\"id\" href=\"#vga_vram_base\">vga_vram_base</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vga_set_mem_top\">vga_set_mem_top</a>(<a class=\"id\" href=\"#c\">c</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!--<a class=\"id\" href=\"#vgacon_uni_pagedir\">vgacon_uni_pagedir</a>[1])", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#con_free_unimap\">con_free_unimap</a>(<a class=\"id\" href=\"#c\">c</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#vc_uni_pagedir_loc\">vc_uni_pagedir_loc</a> = &amp;<a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#vc_uni_pagedir\">vc_uni_pagedir</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#con_set_default_unimap\">con_set_default_unimap</a>(<a class=\"id\" href=\"#c\">c</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#vgacon_build_attr\">vgacon_build_attr</a>(struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#c\">c</a>, <a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#color\">color</a>, <a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#intensity\">intensity</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#blink\">blink</a>, <a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#underline\">underline</a>, <a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#reverse\">reverse</a>, <a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#italic\">italic</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#attr\">attr</a> = <a class=\"id\" href=\"#color\">color</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#vga_can_do_color\">vga_can_do_color</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#italic\">italic</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#attr\">attr</a> = (<a class=\"id\" href=\"#attr\">attr</a> &amp; 0xF0) | <a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#vc_itcolor\">vc_itcolor</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#underline\">underline</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#attr\">attr</a> = (<a class=\"id\" href=\"#attr\">attr</a> &amp; 0xf0) | <a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#vc_ulcolor\">vc_ulcolor</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#intensity\">intensity</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#attr\">attr</a> = (<a class=\"id\" href=\"#attr\">attr</a> &amp; 0xf0) | <a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#vc_halfcolor\">vc_halfcolor</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#reverse\">reverse</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#attr\">attr</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/>    ((<a class=\"id\" href=\"#attr\">attr</a>) &amp; 0x88) | ((((<a class=\"id\" href=\"#attr\">attr</a>) >> 4) | ((<a class=\"id\" href=\"#attr\">attr</a>) << 4)) &amp;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       0x77);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#blink\">blink</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#attr\">attr</a> ^= 0x80;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#intensity\">intensity</a> == 2)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#attr\">attr</a> ^= 0x08;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#vga_can_do_color\">vga_can_do_color</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#italic\">italic</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#attr\">attr</a> = (<a class=\"id\" href=\"#attr\">attr</a> &amp; 0xF8) | 0x02;", 
"<span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#underline\">underline</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#attr\">attr</a> = (<a class=\"id\" href=\"#attr\">attr</a> &amp; 0xf8) | 0x01;", 
"<span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#intensity\">intensity</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#attr\">attr</a> = (<a class=\"id\" href=\"#attr\">attr</a> &amp; 0xf0) | 0x08;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#attr\">attr</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#vgacon_invert_region\">vgacon_invert_region</a>(struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#c\">c</a>, <a class=\"id\" href=\"#u16\">u16</a> * <a class=\"id\" href=\"#p\">p</a>, int <a class=\"id\" href=\"#count\">count</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#col\">col</a> = <a class=\"id\" href=\"#vga_can_do_color\">vga_can_do_color</a>;", 
"", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#count\">count</a>--) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#a\">a</a> = <a class=\"id\" href=\"#scr_readw\">scr_readw</a>(<a class=\"id\" href=\"#p\">p</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#col\">col</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#a\">a</a> = ((<a class=\"id\" href=\"#a\">a</a>) &amp; 0x88ff) | (((<a class=\"id\" href=\"#a\">a</a>) &amp; 0x7000) >> 4) |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    (((<a class=\"id\" href=\"#a\">a</a>) &amp; 0x0700) << 4);", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#a\">a</a> ^= ((<a class=\"id\" href=\"#a\">a</a> &amp; 0x0700) == 0x0100) ? 0x7000 : 0x7700;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#scr_writew\">scr_writew</a>(<a class=\"id\" href=\"#a\">a</a>, <a class=\"id\" href=\"#p\">p</a>++);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
];
xr_frag_insert('l/67/9321372406502232bfa85b472c576e8cc557f9.xr', __xr_tmp);
