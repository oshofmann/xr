var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * RTC subsystem, dev interface</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Copyright (C) 2005 Tower Technologies</span>", 
"<span class=\"comment\"> * Author: Alessandro Zummo &lt;a.zummo@towertech.it&gt;</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * based on arch/arm/common/rtctime.c</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This program is free software; you can redistribute it and/or modify</span>", 
"<span class=\"comment\"> * it under the terms of the GNU General Public License version 2 as</span>", 
"<span class=\"comment\"> * published by the Free Software Foundation.</span>", 
"<span class=\"comment\">*/</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#rtc\">rtc</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#sched\">sched</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> \"rtc-core.h\"", 
"", 
"static <a class=\"id\" href=\"#dev_t\">dev_t</a> <a class=\"id\" href=\"#rtc_devt\">rtc_devt</a>;", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#RTC_DEV_MAX\">RTC_DEV_MAX</a> 16 <span class=\"comment\">/* 16 RTCs should be enough for everyone... */</span>", 
"", 
"static int <a class=\"id\" href=\"#rtc_dev_open\">rtc_dev_open</a>(struct <a class=\"id\" href=\"#inode\">inode</a> *<a class=\"id\" href=\"#inode\">inode</a>, struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc\">rtc</a> = <a class=\"id\" href=\"#container_of\">container_of</a>(<a class=\"id\" href=\"#inode\">inode</a>-><a class=\"id\" href=\"#i_cdev\">i_cdev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a>, <a class=\"id\" href=\"#char_dev\">char_dev</a>);", 
"<span class=\"ts\"/>const struct <a class=\"id\" href=\"#rtc_class_ops\">rtc_class_ops</a> *<a class=\"id\" href=\"#ops\">ops</a> = <a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops\">ops</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#test_and_set_bit_lock\">test_and_set_bit_lock</a>(<a class=\"id\" href=\"#RTC_DEV_BUSY\">RTC_DEV_BUSY</a>, &amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#flags\">flags</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EBUSY\">EBUSY</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#file\">file</a>-><a class=\"id\" href=\"#private_data\">private_data</a> = <a class=\"id\" href=\"#rtc\">rtc</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#open\">open</a> ? <a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#open\">open</a>(<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#parent\">parent</a>) : 0;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> == 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irq\">spin_lock_irq</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_lock\">irq_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_data\">irq_data</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irq\">spin_unlock_irq</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_lock\">irq_lock</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* something has gone wrong */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#clear_bit_unlock\">clear_bit_unlock</a>(<a class=\"id\" href=\"#RTC_DEV_BUSY\">RTC_DEV_BUSY</a>, &amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"}", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_RTC_INTF_DEV_UIE_EMUL\">CONFIG_RTC_INTF_DEV_UIE_EMUL</a>", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Routine to poll RTC seconds field for change as often as possible,</span>", 
"<span class=\"comment\"> * after first RTC_UIE use timer to reduce polling</span>", 
"<span class=\"comment\"> */</span>", 
];
xr_frag_insert('l/6e/e9d00d9f22955f200dd3241439c8537947c5ca.xr', __xr_tmp);
