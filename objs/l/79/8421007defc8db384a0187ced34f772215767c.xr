var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Copyright (C) 2006 Jens Axboe &lt;axboe@kernel.dk&gt;</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This program is free software; you can redistribute it and/or modify</span>", 
"<span class=\"comment\"> * it under the terms of the GNU General Public License version 2 as</span>", 
"<span class=\"comment\"> * published by the Free Software Foundation.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This program is distributed in the hope that it will be useful,</span>", 
"<span class=\"comment\"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>", 
"<span class=\"comment\"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>", 
"<span class=\"comment\"> * GNU General Public License for more details.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * You should have received a copy of the GNU General Public License</span>", 
"<span class=\"comment\"> * along with this program; if not, write to the Free Software</span>", 
"<span class=\"comment\"> * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> */</span>", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kernel\">kernel</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#blkdev\">blkdev</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#blktrace_api\">blktrace_api</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#percpu\">percpu</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#init\">init</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#mutex\">mutex</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#slab\">slab</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#debugfs\">debugfs</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#smp_lock\">smp_lock</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#uaccess\">uaccess</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#trace\">trace</a>/<a class=\"id\" href=\"#events\">events</a>/<a class=\"id\" href=\"#block\">block</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> \"trace_output.h\"", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_BLK_DEV_IO_TRACE\">CONFIG_BLK_DEV_IO_TRACE</a>", 
"", 
"static unsigned int <a class=\"id\" href=\"#blktrace_seq\">blktrace_seq</a> <a class=\"id\" href=\"#__read_mostly\">__read_mostly</a> = 1;", 
"", 
"static struct <a class=\"id\" href=\"#trace_array\">trace_array</a> *<a class=\"id\" href=\"#blk_tr\">blk_tr</a>;", 
"static <a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#blk_tracer_enabled\">blk_tracer_enabled</a> <a class=\"id\" href=\"#__read_mostly\">__read_mostly</a>;", 
"", 
"<span class=\"comment\">/* Select an alternative, minimalistic output than the original one */</span>", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#TRACE_BLK_OPT_CLASSIC\">TRACE_BLK_OPT_CLASSIC</a><span class=\"ts\"/>0x1", 
"", 
"static struct <a class=\"id\" href=\"#tracer_opt\">tracer_opt</a> <a class=\"id\" href=\"#blk_tracer_opts\">blk_tracer_opts</a>[] = {", 
"<span class=\"ts\"/><span class=\"comment\">/* Default disable the minimalistic output */</span>", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#TRACER_OPT\">TRACER_OPT</a>(<a class=\"id\" href=\"#blk_classic\">blk_classic</a>, <a class=\"id\" href=\"#TRACE_BLK_OPT_CLASSIC\">TRACE_BLK_OPT_CLASSIC</a>) },", 
"<span class=\"ts\"/>{ }", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#tracer_flags\">tracer_flags</a> <a class=\"id\" href=\"#blk_tracer_flags\">blk_tracer_flags</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#val\">val</a>  = 0,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#opts\">opts</a> = <a class=\"id\" href=\"#blk_tracer_opts\">blk_tracer_opts</a>,", 
"};", 
"", 
"<span class=\"comment\">/* Global reference count of probes */</span>", 
"static <a class=\"id\" href=\"#atomic_t\">atomic_t</a> <a class=\"id\" href=\"#blk_probes_ref\">blk_probes_ref</a> = <a class=\"id\" href=\"#ATOMIC_INIT\">ATOMIC_INIT</a>(0);", 
"", 
"static void <a class=\"id\" href=\"#blk_register_tracepoints\">blk_register_tracepoints</a>(void);", 
"static void <a class=\"id\" href=\"#blk_unregister_tracepoints\">blk_unregister_tracepoints</a>(void);", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Send out a notify message.</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#trace_note\">trace_note</a>(struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a>, <a class=\"id\" href=\"#pid_t\">pid_t</a> <a class=\"id\" href=\"#pid\">pid</a>, int <a class=\"id\" href=\"#action\">action</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>       const void *<a class=\"id\" href=\"#data\">data</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#len\">len</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_io_trace\">blk_io_trace</a> *<a class=\"id\" href=\"#t\">t</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ring_buffer_event\">ring_buffer_event</a> *<a class=\"id\" href=\"#event\">event</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ring_buffer\">ring_buffer</a> *<a class=\"id\" href=\"#buffer\">buffer</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#pc\">pc</a> = 0;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#cpu\">cpu</a> = <a class=\"id\" href=\"#smp_processor_id\">smp_processor_id</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#blk_tracer\">blk_tracer</a> = <a class=\"id\" href=\"#blk_tracer_enabled\">blk_tracer_enabled</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#blk_tracer\">blk_tracer</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#buffer\">buffer</a> = <a class=\"id\" href=\"#blk_tr\">blk_tr</a>-><a class=\"id\" href=\"#buffer\">buffer</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pc\">pc</a> = <a class=\"id\" href=\"#preempt_count\">preempt_count</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#event\">event</a> = <a class=\"id\" href=\"#trace_buffer_lock_reserve\">trace_buffer_lock_reserve</a>(<a class=\"id\" href=\"#buffer\">buffer</a>, <a class=\"id\" href=\"#TRACE_BLK\">TRACE_BLK</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  sizeof(*<a class=\"id\" href=\"#t\">t</a>) + <a class=\"id\" href=\"#len\">len</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  0, <a class=\"id\" href=\"#pc\">pc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#event\">event</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a> = <a class=\"id\" href=\"#ring_buffer_event_data\">ring_buffer_event_data</a>(<a class=\"id\" href=\"#event\">event</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#record_it\">record_it</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#rchan\">rchan</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a> = <a class=\"id\" href=\"#relay_reserve\">relay_reserve</a>(<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#rchan\">rchan</a>, sizeof(*<a class=\"id\" href=\"#t\">t</a>) + <a class=\"id\" href=\"#len\">len</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#t\">t</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#magic\">magic</a> = <a class=\"id\" href=\"#BLK_IO_TRACE_MAGIC\">BLK_IO_TRACE_MAGIC</a> | <a class=\"id\" href=\"#BLK_IO_TRACE_VERSION\">BLK_IO_TRACE_VERSION</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#time\">time</a> = <a class=\"id\" href=\"#ktime_to_ns\">ktime_to_ns</a>(<a class=\"id\" href=\"#ktime_get\">ktime_get</a>());", 
"<a class=\"id\" href=\"#record_it\">record_it</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#device\">device</a> = <a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#action\">action</a> = <a class=\"id\" href=\"#action\">action</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#pid\">pid</a> = <a class=\"id\" href=\"#pid\">pid</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#cpu\">cpu</a> = <a class=\"id\" href=\"#cpu\">cpu</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#pdu_len\">pdu_len</a> = <a class=\"id\" href=\"#len\">len</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>((void *) <a class=\"id\" href=\"#t\">t</a> + sizeof(*<a class=\"id\" href=\"#t\">t</a>), <a class=\"id\" href=\"#data\">data</a>, <a class=\"id\" href=\"#len\">len</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#blk_tracer\">blk_tracer</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#trace_buffer_unlock_commit\">trace_buffer_unlock_commit</a>(<a class=\"id\" href=\"#buffer\">buffer</a>, <a class=\"id\" href=\"#event\">event</a>, 0, <a class=\"id\" href=\"#pc\">pc</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Send out a notify for this process, if we haven't done so since a trace</span>", 
"<span class=\"comment\"> * started</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#trace_note_tsk\">trace_note_tsk</a>(struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a>, struct <a class=\"id\" href=\"#task_struct\">task_struct</a> *<a class=\"id\" href=\"#tsk\">tsk</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tsk\">tsk</a>-><a class=\"id\" href=\"#btrace_seq\">btrace_seq</a> = <a class=\"id\" href=\"#blktrace_seq\">blktrace_seq</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#trace_note\">trace_note</a>(<a class=\"id\" href=\"#bt\">bt</a>, <a class=\"id\" href=\"#tsk\">tsk</a>-><a class=\"id\" href=\"#pid\">pid</a>, <a class=\"id\" href=\"#BLK_TN_PROCESS\">BLK_TN_PROCESS</a>, <a class=\"id\" href=\"#tsk\">tsk</a>-><a class=\"id\" href=\"#comm\">comm</a>, sizeof(<a class=\"id\" href=\"#tsk\">tsk</a>-><a class=\"id\" href=\"#comm\">comm</a>));", 
"}", 
"", 
"static void <a class=\"id\" href=\"#trace_note_time\">trace_note_time</a>(struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#timespec\">timespec</a> <a class=\"id\" href=\"#now\">now</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#words\">words</a>[2];", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#getnstimeofday\">getnstimeofday</a>(&amp;<a class=\"id\" href=\"#now\">now</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#words\">words</a>[0] = <a class=\"id\" href=\"#now\">now</a>.<a class=\"id\" href=\"#tv_sec\">tv_sec</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#words\">words</a>[1] = <a class=\"id\" href=\"#now\">now</a>.<a class=\"id\" href=\"#tv_nsec\">tv_nsec</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#local_irq_save\">local_irq_save</a>(<a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#trace_note\">trace_note</a>(<a class=\"id\" href=\"#bt\">bt</a>, 0, <a class=\"id\" href=\"#BLK_TN_TIMESTAMP\">BLK_TN_TIMESTAMP</a>, <a class=\"id\" href=\"#words\">words</a>, sizeof(<a class=\"id\" href=\"#words\">words</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#local_irq_restore\">local_irq_restore</a>(<a class=\"id\" href=\"#flags\">flags</a>);", 
"}", 
"", 
"void <a class=\"id\" href=\"#__trace_note_message\">__trace_note_message</a>(struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a>, const char *<a class=\"id\" href=\"#fmt\">fmt</a>, ...)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#n\">n</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#va_list\">va_list</a> <a class=\"id\" href=\"#args\">args</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#buf\">buf</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#trace_state\">trace_state</a> != <a class=\"id\" href=\"#Blktrace_running\">Blktrace_running</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/>     !<a class=\"id\" href=\"#blk_tracer_enabled\">blk_tracer_enabled</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#local_irq_save\">local_irq_save</a>(<a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#buf\">buf</a> = <a class=\"id\" href=\"#per_cpu_ptr\">per_cpu_ptr</a>(<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#msg_data\">msg_data</a>, <a class=\"id\" href=\"#smp_processor_id\">smp_processor_id</a>());", 
"<span class=\"ts\"/><a class=\"id\" href=\"#va_start\">va_start</a>(<a class=\"id\" href=\"#args\">args</a>, <a class=\"id\" href=\"#fmt\">fmt</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#n\">n</a> = <a class=\"id\" href=\"#vscnprintf\">vscnprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#BLK_TN_MAX_MSG\">BLK_TN_MAX_MSG</a>, <a class=\"id\" href=\"#fmt\">fmt</a>, <a class=\"id\" href=\"#args\">args</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#va_end\">va_end</a>(<a class=\"id\" href=\"#args\">args</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#trace_note\">trace_note</a>(<a class=\"id\" href=\"#bt\">bt</a>, 0, <a class=\"id\" href=\"#BLK_TN_MESSAGE\">BLK_TN_MESSAGE</a>, <a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#n\">n</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#local_irq_restore\">local_irq_restore</a>(<a class=\"id\" href=\"#flags\">flags</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#__trace_note_message\">__trace_note_message</a>);", 
"", 
"static int <a class=\"id\" href=\"#act_log_check\">act_log_check</a>(struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a>, <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#what\">what</a>, <a class=\"id\" href=\"#sector_t\">sector_t</a> <a class=\"id\" href=\"#sector\">sector</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#pid_t\">pid_t</a> <a class=\"id\" href=\"#pid\">pid</a>)", 
"{", 
"<span class=\"ts\"/>if (((<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#act_mask\">act_mask</a> << <a class=\"id\" href=\"#BLK_TC_SHIFT\">BLK_TC_SHIFT</a>) &amp; <a class=\"id\" href=\"#what\">what</a>) == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sector\">sector</a> && (<a class=\"id\" href=\"#sector\">sector</a> &lt; <a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#start_lba\">start_lba</a> || <a class=\"id\" href=\"#sector\">sector</a> &gt; <a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#end_lba\">end_lba</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#pid\">pid</a> && <a class=\"id\" href=\"#pid\">pid</a> != <a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#pid\">pid</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Data direction bit lookup</span>", 
"<span class=\"comment\"> */</span>", 
"static const <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#ddir_act\">ddir_act</a>[2] = { <a class=\"id\" href=\"#BLK_TC_ACT\">BLK_TC_ACT</a>(<a class=\"id\" href=\"#BLK_TC_READ\">BLK_TC_READ</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#BLK_TC_ACT\">BLK_TC_ACT</a>(<a class=\"id\" href=\"#BLK_TC_WRITE\">BLK_TC_WRITE</a>) };", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#BLK_TC_HARDBARRIER\">BLK_TC_HARDBARRIER</a><span class=\"ts\"/><a class=\"id\" href=\"#BLK_TC_BARRIER\">BLK_TC_BARRIER</a>", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#BLK_TC_RAHEAD\">BLK_TC_RAHEAD</a><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BLK_TC_AHEAD\">BLK_TC_AHEAD</a>", 
"", 
"<span class=\"comment\">/* The ilog2() calls fall out because they're constant */</span>", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#MASK_TC_BIT\">MASK_TC_BIT</a>(<a class=\"id\" href=\"#rw\">rw</a>, <a class=\"id\" href=\"#__name\">__name</a>) ((<a class=\"id\" href=\"#rw\">rw</a> &amp; <a class=\"id\" href=\"#REQ_\">REQ_</a> ## <a class=\"id\" href=\"#__name\">__name</a>) << \\", 
"<span class=\"ts\"/>  (<a class=\"id\" href=\"#ilog2\">ilog2</a>(<a class=\"id\" href=\"#BLK_TC_\">BLK_TC_</a> ## <a class=\"id\" href=\"#__name\">__name</a>) + <a class=\"id\" href=\"#BLK_TC_SHIFT\">BLK_TC_SHIFT</a> - <a class=\"id\" href=\"#__REQ_\">__REQ_</a> ## <a class=\"id\" href=\"#__name\">__name</a>))", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * The worker for the various blk_add_trace*() types. Fills out a</span>", 
"<span class=\"comment\"> * blk_io_trace structure and places it in a per-cpu subbuffer.</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#__blk_add_trace\">__blk_add_trace</a>(struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a>, <a class=\"id\" href=\"#sector_t\">sector_t</a> <a class=\"id\" href=\"#sector\">sector</a>, int <a class=\"id\" href=\"#bytes\">bytes</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>     int <a class=\"id\" href=\"#rw\">rw</a>, <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#what\">what</a>, int <a class=\"id\" href=\"#error\">error</a>, int <a class=\"id\" href=\"#pdu_len\">pdu_len</a>, void *<a class=\"id\" href=\"#pdu_data\">pdu_data</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#task_struct\">task_struct</a> *<a class=\"id\" href=\"#tsk\">tsk</a> = <a class=\"id\" href=\"#current\">current</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ring_buffer_event\">ring_buffer_event</a> *<a class=\"id\" href=\"#event\">event</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ring_buffer\">ring_buffer</a> *<a class=\"id\" href=\"#buffer\">buffer</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_io_trace\">blk_io_trace</a> *<a class=\"id\" href=\"#t\">t</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a> = 0;", 
"<span class=\"ts\"/>unsigned long *<a class=\"id\" href=\"#sequence\">sequence</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pid_t\">pid_t</a> <a class=\"id\" href=\"#pid\">pid</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#cpu\">cpu</a>, <a class=\"id\" href=\"#pc\">pc</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#blk_tracer\">blk_tracer</a> = <a class=\"id\" href=\"#blk_tracer_enabled\">blk_tracer_enabled</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#trace_state\">trace_state</a> != <a class=\"id\" href=\"#Blktrace_running\">Blktrace_running</a> && !<a class=\"id\" href=\"#blk_tracer\">blk_tracer</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#what\">what</a> |= <a class=\"id\" href=\"#ddir_act\">ddir_act</a>[<a class=\"id\" href=\"#rw\">rw</a> &amp; <a class=\"id\" href=\"#WRITE\">WRITE</a>];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#what\">what</a> |= <a class=\"id\" href=\"#MASK_TC_BIT\">MASK_TC_BIT</a>(<a class=\"id\" href=\"#rw\">rw</a>, <a class=\"id\" href=\"#HARDBARRIER\">HARDBARRIER</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#what\">what</a> |= <a class=\"id\" href=\"#MASK_TC_BIT\">MASK_TC_BIT</a>(<a class=\"id\" href=\"#rw\">rw</a>, <a class=\"id\" href=\"#SYNC\">SYNC</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#what\">what</a> |= <a class=\"id\" href=\"#MASK_TC_BIT\">MASK_TC_BIT</a>(<a class=\"id\" href=\"#rw\">rw</a>, <a class=\"id\" href=\"#RAHEAD\">RAHEAD</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#what\">what</a> |= <a class=\"id\" href=\"#MASK_TC_BIT\">MASK_TC_BIT</a>(<a class=\"id\" href=\"#rw\">rw</a>, <a class=\"id\" href=\"#META\">META</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#what\">what</a> |= <a class=\"id\" href=\"#MASK_TC_BIT\">MASK_TC_BIT</a>(<a class=\"id\" href=\"#rw\">rw</a>, <a class=\"id\" href=\"#DISCARD\">DISCARD</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pid\">pid</a> = <a class=\"id\" href=\"#tsk\">tsk</a>-><a class=\"id\" href=\"#pid\">pid</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#act_log_check\">act_log_check</a>(<a class=\"id\" href=\"#bt\">bt</a>, <a class=\"id\" href=\"#what\">what</a>, <a class=\"id\" href=\"#sector\">sector</a>, <a class=\"id\" href=\"#pid\">pid</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cpu\">cpu</a> = <a class=\"id\" href=\"#raw_smp_processor_id\">raw_smp_processor_id</a>();", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#blk_tracer\">blk_tracer</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tracing_record_cmdline\">tracing_record_cmdline</a>(<a class=\"id\" href=\"#current\">current</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#buffer\">buffer</a> = <a class=\"id\" href=\"#blk_tr\">blk_tr</a>-><a class=\"id\" href=\"#buffer\">buffer</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pc\">pc</a> = <a class=\"id\" href=\"#preempt_count\">preempt_count</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#event\">event</a> = <a class=\"id\" href=\"#trace_buffer_lock_reserve\">trace_buffer_lock_reserve</a>(<a class=\"id\" href=\"#buffer\">buffer</a>, <a class=\"id\" href=\"#TRACE_BLK\">TRACE_BLK</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  sizeof(*<a class=\"id\" href=\"#t\">t</a>) + <a class=\"id\" href=\"#pdu_len\">pdu_len</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  0, <a class=\"id\" href=\"#pc\">pc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#event\">event</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a> = <a class=\"id\" href=\"#ring_buffer_event_data\">ring_buffer_event_data</a>(<a class=\"id\" href=\"#event\">event</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#record_it\">record_it</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * A word about the locking here - we disable interrupts to reserve</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * some space in the relay per-cpu buffer, to prevent an irq</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * from coming in and stepping on our toes.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#local_irq_save\">local_irq_save</a>(<a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(<a class=\"id\" href=\"#tsk\">tsk</a>-><a class=\"id\" href=\"#btrace_seq\">btrace_seq</a> != <a class=\"id\" href=\"#blktrace_seq\">blktrace_seq</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#trace_note_tsk\">trace_note_tsk</a>(<a class=\"id\" href=\"#bt\">bt</a>, <a class=\"id\" href=\"#tsk\">tsk</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a> = <a class=\"id\" href=\"#relay_reserve\">relay_reserve</a>(<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#rchan\">rchan</a>, sizeof(*<a class=\"id\" href=\"#t\">t</a>) + <a class=\"id\" href=\"#pdu_len\">pdu_len</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#t\">t</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sequence\">sequence</a> = <a class=\"id\" href=\"#per_cpu_ptr\">per_cpu_ptr</a>(<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#sequence\">sequence</a>, <a class=\"id\" href=\"#cpu\">cpu</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#magic\">magic</a> = <a class=\"id\" href=\"#BLK_IO_TRACE_MAGIC\">BLK_IO_TRACE_MAGIC</a> | <a class=\"id\" href=\"#BLK_IO_TRACE_VERSION\">BLK_IO_TRACE_VERSION</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#sequence\">sequence</a> = ++(*<a class=\"id\" href=\"#sequence\">sequence</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#time\">time</a> = <a class=\"id\" href=\"#ktime_to_ns\">ktime_to_ns</a>(<a class=\"id\" href=\"#ktime_get\">ktime_get</a>());", 
"<a class=\"id\" href=\"#record_it\">record_it</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * These two are not needed in ftrace as they are in the</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * generic trace_entry, filled by tracing_generic_entry_update,</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * but for the trace_event-&gt;bin() synthesizer benefit we do it</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * here too.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#cpu\">cpu</a> = <a class=\"id\" href=\"#cpu\">cpu</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#pid\">pid</a> = <a class=\"id\" href=\"#pid\">pid</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#sector\">sector</a> = <a class=\"id\" href=\"#sector\">sector</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#bytes\">bytes</a> = <a class=\"id\" href=\"#bytes\">bytes</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#action\">action</a> = <a class=\"id\" href=\"#what\">what</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#device\">device</a> = <a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#error\">error</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#pdu_len\">pdu_len</a> = <a class=\"id\" href=\"#pdu_len\">pdu_len</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#pdu_len\">pdu_len</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>((void *) <a class=\"id\" href=\"#t\">t</a> + sizeof(*<a class=\"id\" href=\"#t\">t</a>), <a class=\"id\" href=\"#pdu_data\">pdu_data</a>, <a class=\"id\" href=\"#pdu_len\">pdu_len</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#blk_tracer\">blk_tracer</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#trace_buffer_unlock_commit\">trace_buffer_unlock_commit</a>(<a class=\"id\" href=\"#buffer\">buffer</a>, <a class=\"id\" href=\"#event\">event</a>, 0, <a class=\"id\" href=\"#pc\">pc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#local_irq_restore\">local_irq_restore</a>(<a class=\"id\" href=\"#flags\">flags</a>);", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#dentry\">dentry</a> *<a class=\"id\" href=\"#blk_tree_root\">blk_tree_root</a>;", 
"static <a class=\"id\" href=\"#DEFINE_MUTEX\">DEFINE_MUTEX</a>(<a class=\"id\" href=\"#blk_tree_mutex\">blk_tree_mutex</a>);", 
"", 
"static void <a class=\"id\" href=\"#blk_trace_free\">blk_trace_free</a>(struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#debugfs_remove\">debugfs_remove</a>(<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#msg_file\">msg_file</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#debugfs_remove\">debugfs_remove</a>(<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#dropped_file\">dropped_file</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#relay_close\">relay_close</a>(<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#rchan\">rchan</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#debugfs_remove\">debugfs_remove</a>(<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#dir\">dir</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#free_percpu\">free_percpu</a>(<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#sequence\">sequence</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#free_percpu\">free_percpu</a>(<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#msg_data\">msg_data</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#bt\">bt</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#blk_trace_cleanup\">blk_trace_cleanup</a>(struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_trace_free\">blk_trace_free</a>(<a class=\"id\" href=\"#bt\">bt</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atomic_dec_and_test\">atomic_dec_and_test</a>(&amp;<a class=\"id\" href=\"#blk_probes_ref\">blk_probes_ref</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blk_unregister_tracepoints\">blk_unregister_tracepoints</a>();", 
"}", 
"", 
"int <a class=\"id\" href=\"#blk_trace_remove\">blk_trace_remove</a>(struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a> = <a class=\"id\" href=\"#xchg\">xchg</a>(&amp;<a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#bt\">bt</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#trace_state\">trace_state</a> != <a class=\"id\" href=\"#Blktrace_running\">Blktrace_running</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blk_trace_cleanup\">blk_trace_cleanup</a>(<a class=\"id\" href=\"#bt\">bt</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#blk_trace_remove\">blk_trace_remove</a>);", 
"", 
"static int <a class=\"id\" href=\"#blk_dropped_open\">blk_dropped_open</a>(struct <a class=\"id\" href=\"#inode\">inode</a> *<a class=\"id\" href=\"#inode\">inode</a>, struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#filp\">filp</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#filp\">filp</a>-><a class=\"id\" href=\"#private_data\">private_data</a> = <a class=\"id\" href=\"#inode\">inode</a>-><a class=\"id\" href=\"#i_private\">i_private</a>;", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#blk_dropped_read\">blk_dropped_read</a>(struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#filp\">filp</a>, char <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#buffer\">buffer</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>, <a class=\"id\" href=\"#loff_t\">loff_t</a> *<a class=\"id\" href=\"#ppos\">ppos</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a> = <a class=\"id\" href=\"#filp\">filp</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#buf\">buf</a>[16];", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#snprintf\">snprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, sizeof(<a class=\"id\" href=\"#buf\">buf</a>), \"%u\\n\", <a class=\"id\" href=\"#atomic_read\">atomic_read</a>(&amp;<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#dropped\">dropped</a>));", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#simple_read_from_buffer\">simple_read_from_buffer</a>(<a class=\"id\" href=\"#buffer\">buffer</a>, <a class=\"id\" href=\"#count\">count</a>, <a class=\"id\" href=\"#ppos\">ppos</a>, <a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#strlen\">strlen</a>(<a class=\"id\" href=\"#buf\">buf</a>));", 
"}", 
"", 
"static const struct <a class=\"id\" href=\"#file_operations\">file_operations</a> <a class=\"id\" href=\"#blk_dropped_fops\">blk_dropped_fops</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#owner\">owner</a> =<span class=\"ts\"/><a class=\"id\" href=\"#THIS_MODULE\">THIS_MODULE</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#open\">open</a> =<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blk_dropped_open\">blk_dropped_open</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#read\">read</a> =<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blk_dropped_read\">blk_dropped_read</a>,", 
"};", 
"", 
"static int <a class=\"id\" href=\"#blk_msg_open\">blk_msg_open</a>(struct <a class=\"id\" href=\"#inode\">inode</a> *<a class=\"id\" href=\"#inode\">inode</a>, struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#filp\">filp</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#filp\">filp</a>-><a class=\"id\" href=\"#private_data\">private_data</a> = <a class=\"id\" href=\"#inode\">inode</a>-><a class=\"id\" href=\"#i_private\">i_private</a>;", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#blk_msg_write\">blk_msg_write</a>(struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#filp\">filp</a>, const char <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#buffer\">buffer</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>, <a class=\"id\" href=\"#loff_t\">loff_t</a> *<a class=\"id\" href=\"#ppos\">ppos</a>)", 
"{", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#msg\">msg</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#count\">count</a> >= <a class=\"id\" href=\"#BLK_TN_MAX_MSG\">BLK_TN_MAX_MSG</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#msg\">msg</a> = <a class=\"id\" href=\"#kmalloc\">kmalloc</a>(<a class=\"id\" href=\"#count\">count</a> + 1, <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#msg\">msg</a> == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(<a class=\"id\" href=\"#msg\">msg</a>, <a class=\"id\" href=\"#buffer\">buffer</a>, <a class=\"id\" href=\"#count\">count</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#msg\">msg</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#msg\">msg</a>[<a class=\"id\" href=\"#count\">count</a>] = '\\0';", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a> = <a class=\"id\" href=\"#filp\">filp</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__trace_note_message\">__trace_note_message</a>(<a class=\"id\" href=\"#bt\">bt</a>, \"%s\", <a class=\"id\" href=\"#msg\">msg</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#msg\">msg</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#count\">count</a>;", 
"}", 
"", 
"static const struct <a class=\"id\" href=\"#file_operations\">file_operations</a> <a class=\"id\" href=\"#blk_msg_fops\">blk_msg_fops</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#owner\">owner</a> =<span class=\"ts\"/><a class=\"id\" href=\"#THIS_MODULE\">THIS_MODULE</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#open\">open</a> =<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blk_msg_open\">blk_msg_open</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#write\">write</a> =<span class=\"ts\"/><a class=\"id\" href=\"#blk_msg_write\">blk_msg_write</a>,", 
"};", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Keep track of how many times we encountered a full subbuffer, to aid</span>", 
"<span class=\"comment\"> * the user space app in telling how many lost events there were.</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#blk_subbuf_start_callback\">blk_subbuf_start_callback</a>(struct <a class=\"id\" href=\"#rchan_buf\">rchan_buf</a> *<a class=\"id\" href=\"#buf\">buf</a>, void *<a class=\"id\" href=\"#subbuf\">subbuf</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     void *<a class=\"id\" href=\"#prev_subbuf\">prev_subbuf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#prev_padding\">prev_padding</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#relay_buf_full\">relay_buf_full</a>(<a class=\"id\" href=\"#buf\">buf</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a> = <a class=\"id\" href=\"#buf\">buf</a>-><a class=\"id\" href=\"#chan\">chan</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atomic_inc\">atomic_inc</a>(&amp;<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#dropped\">dropped</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#blk_remove_buf_file_callback\">blk_remove_buf_file_callback</a>(struct <a class=\"id\" href=\"#dentry\">dentry</a> *<a class=\"id\" href=\"#dentry\">dentry</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#debugfs_remove\">debugfs_remove</a>(<a class=\"id\" href=\"#dentry\">dentry</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#dentry\">dentry</a> *<a class=\"id\" href=\"#blk_create_buf_file_callback\">blk_create_buf_file_callback</a>(const char *<a class=\"id\" href=\"#filename\">filename</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   struct <a class=\"id\" href=\"#dentry\">dentry</a> *<a class=\"id\" href=\"#parent\">parent</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   int <a class=\"id\" href=\"#mode\">mode</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   struct <a class=\"id\" href=\"#rchan_buf\">rchan_buf</a> *<a class=\"id\" href=\"#buf\">buf</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   int *<a class=\"id\" href=\"#is_global\">is_global</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#debugfs_create_file\">debugfs_create_file</a>(<a class=\"id\" href=\"#filename\">filename</a>, <a class=\"id\" href=\"#mode\">mode</a>, <a class=\"id\" href=\"#parent\">parent</a>, <a class=\"id\" href=\"#buf\">buf</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>&amp;<a class=\"id\" href=\"#relay_file_operations\">relay_file_operations</a>);", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#rchan_callbacks\">rchan_callbacks</a> <a class=\"id\" href=\"#blk_relay_callbacks\">blk_relay_callbacks</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#subbuf_start\">subbuf_start</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#blk_subbuf_start_callback\">blk_subbuf_start_callback</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#create_buf_file\">create_buf_file</a><span class=\"ts\"/>= <a class=\"id\" href=\"#blk_create_buf_file_callback\">blk_create_buf_file_callback</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#remove_buf_file\">remove_buf_file</a><span class=\"ts\"/>= <a class=\"id\" href=\"#blk_remove_buf_file_callback\">blk_remove_buf_file_callback</a>,", 
"};", 
"", 
"static void <a class=\"id\" href=\"#blk_trace_setup_lba\">blk_trace_setup_lba</a>(struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#block_device\">block_device</a> *<a class=\"id\" href=\"#bdev\">bdev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#hd_struct\">hd_struct</a> *<a class=\"id\" href=\"#part\">part</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#bdev\">bdev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#part\">part</a> = <a class=\"id\" href=\"#bdev\">bdev</a>-><a class=\"id\" href=\"#bd_part\">bd_part</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#part\">part</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#start_lba\">start_lba</a> = <a class=\"id\" href=\"#part\">part</a>-><a class=\"id\" href=\"#start_sect\">start_sect</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#end_lba\">end_lba</a> = <a class=\"id\" href=\"#part\">part</a>-><a class=\"id\" href=\"#start_sect\">start_sect</a> + <a class=\"id\" href=\"#part\">part</a>-><a class=\"id\" href=\"#nr_sects\">nr_sects</a>;", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#start_lba\">start_lba</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#end_lba\">end_lba</a> = -1ULL;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Setup everything required to start tracing</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#do_blk_trace_setup\">do_blk_trace_setup</a>(struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>, char *<a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#dev_t\">dev_t</a> <a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>       struct <a class=\"id\" href=\"#block_device\">block_device</a> *<a class=\"id\" href=\"#bdev\">bdev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>       struct <a class=\"id\" href=\"#blk_user_trace_setup\">blk_user_trace_setup</a> *<a class=\"id\" href=\"#buts\">buts</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#old_bt\">old_bt</a>, *<a class=\"id\" href=\"#bt\">bt</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#dentry\">dentry</a> *<a class=\"id\" href=\"#dir\">dir</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>, <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#buts\">buts</a>-><a class=\"id\" href=\"#buf_size\">buf_size</a> || !<a class=\"id\" href=\"#buts\">buts</a>-><a class=\"id\" href=\"#buf_nr\">buf_nr</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#strncpy\">strncpy</a>(<a class=\"id\" href=\"#buts\">buts</a>-><a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#BLKTRACE_BDEV_SIZE\">BLKTRACE_BDEV_SIZE</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#buts\">buts</a>-><a class=\"id\" href=\"#name\">name</a>[<a class=\"id\" href=\"#BLKTRACE_BDEV_SIZE\">BLKTRACE_BDEV_SIZE</a> - 1] = '\\0';", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * some device names have larger paths - convert the slashes</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * to underscores for this to work as expected</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#strlen\">strlen</a>(<a class=\"id\" href=\"#buts\">buts</a>-><a class=\"id\" href=\"#name\">name</a>); <a class=\"id\" href=\"#i\">i</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#buts\">buts</a>-><a class=\"id\" href=\"#name\">name</a>[<a class=\"id\" href=\"#i\">i</a>] == '/')", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#buts\">buts</a>-><a class=\"id\" href=\"#name\">name</a>[<a class=\"id\" href=\"#i\">i</a>] = '_';", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof(*<a class=\"id\" href=\"#bt\">bt</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#bt\">bt</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#sequence\">sequence</a> = <a class=\"id\" href=\"#alloc_percpu\">alloc_percpu</a>(unsigned long);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#sequence\">sequence</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#msg_data\">msg_data</a> = <a class=\"id\" href=\"#__alloc_percpu\">__alloc_percpu</a>(<a class=\"id\" href=\"#BLK_TN_MAX_MSG\">BLK_TN_MAX_MSG</a>, <a class=\"id\" href=\"#__alignof__\">__alignof__</a>(char));", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#msg_data\">msg_data</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#ENOENT\">ENOENT</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#blk_tree_mutex\">blk_tree_mutex</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#blk_tree_root\">blk_tree_root</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blk_tree_root\">blk_tree_root</a> = <a class=\"id\" href=\"#debugfs_create_dir\">debugfs_create_dir</a>(\"block\", <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#blk_tree_root\">blk_tree_root</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#blk_tree_mutex\">blk_tree_mutex</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#blk_tree_mutex\">blk_tree_mutex</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dir\">dir</a> = <a class=\"id\" href=\"#debugfs_create_dir\">debugfs_create_dir</a>(<a class=\"id\" href=\"#buts\">buts</a>-><a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#blk_tree_root\">blk_tree_root</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#dir\">dir</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#dir\">dir</a> = <a class=\"id\" href=\"#dir\">dir</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atomic_set\">atomic_set</a>(&amp;<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#dropped\">dropped</a>, 0);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#dropped_file\">dropped_file</a> = <a class=\"id\" href=\"#debugfs_create_file\">debugfs_create_file</a>(\"dropped\", 0444, <a class=\"id\" href=\"#dir\">dir</a>, <a class=\"id\" href=\"#bt\">bt</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       &amp;<a class=\"id\" href=\"#blk_dropped_fops\">blk_dropped_fops</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#dropped_file\">dropped_file</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#msg_file\">msg_file</a> = <a class=\"id\" href=\"#debugfs_create_file\">debugfs_create_file</a>(\"msg\", 0222, <a class=\"id\" href=\"#dir\">dir</a>, <a class=\"id\" href=\"#bt\">bt</a>, &amp;<a class=\"id\" href=\"#blk_msg_fops\">blk_msg_fops</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#msg_file\">msg_file</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#rchan\">rchan</a> = <a class=\"id\" href=\"#relay_open\">relay_open</a>(\"trace\", <a class=\"id\" href=\"#dir\">dir</a>, <a class=\"id\" href=\"#buts\">buts</a>-><a class=\"id\" href=\"#buf_size\">buf_size</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#buts\">buts</a>-><a class=\"id\" href=\"#buf_nr\">buf_nr</a>, &amp;<a class=\"id\" href=\"#blk_relay_callbacks\">blk_relay_callbacks</a>, <a class=\"id\" href=\"#bt\">bt</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#rchan\">rchan</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#act_mask\">act_mask</a> = <a class=\"id\" href=\"#buts\">buts</a>-><a class=\"id\" href=\"#act_mask\">act_mask</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#act_mask\">act_mask</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#act_mask\">act_mask</a> = (<a class=\"id\" href=\"#u16\">u16</a>) -1;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_trace_setup_lba\">blk_trace_setup_lba</a>(<a class=\"id\" href=\"#bt\">bt</a>, <a class=\"id\" href=\"#bdev\">bdev</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* overwrite with user settings */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#buts\">buts</a>-><a class=\"id\" href=\"#start_lba\">start_lba</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#start_lba\">start_lba</a> = <a class=\"id\" href=\"#buts\">buts</a>-><a class=\"id\" href=\"#start_lba\">start_lba</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#buts\">buts</a>-><a class=\"id\" href=\"#end_lba\">end_lba</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#end_lba\">end_lba</a> = <a class=\"id\" href=\"#buts\">buts</a>-><a class=\"id\" href=\"#end_lba\">end_lba</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#pid\">pid</a> = <a class=\"id\" href=\"#buts\">buts</a>-><a class=\"id\" href=\"#pid\">pid</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#trace_state\">trace_state</a> = <a class=\"id\" href=\"#Blktrace_setup\">Blktrace_setup</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EBUSY\">EBUSY</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#old_bt\">old_bt</a> = <a class=\"id\" href=\"#xchg\">xchg</a>(&amp;<a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>, <a class=\"id\" href=\"#bt\">bt</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#old_bt\">old_bt</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>(void) <a class=\"id\" href=\"#xchg\">xchg</a>(&amp;<a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>, <a class=\"id\" href=\"#old_bt\">old_bt</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atomic_inc_return\">atomic_inc_return</a>(&amp;<a class=\"id\" href=\"#blk_probes_ref\">blk_probes_ref</a>) == 1)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blk_register_tracepoints\">blk_register_tracepoints</a>();", 
"", 
"<span class=\"ts\"/>return 0;", 
"<a class=\"id\" href=\"#err\">err</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_trace_free\">blk_trace_free</a>(<a class=\"id\" href=\"#bt\">bt</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"", 
"int <a class=\"id\" href=\"#blk_trace_setup\">blk_trace_setup</a>(struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>, char *<a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#dev_t\">dev_t</a> <a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>    struct <a class=\"id\" href=\"#block_device\">block_device</a> *<a class=\"id\" href=\"#bdev\">bdev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>    char <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_user_trace_setup\">blk_user_trace_setup</a> <a class=\"id\" href=\"#buts\">buts</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(&amp;<a class=\"id\" href=\"#buts\">buts</a>, <a class=\"id\" href=\"#arg\">arg</a>, sizeof(<a class=\"id\" href=\"#buts\">buts</a>));", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#do_blk_trace_setup\">do_blk_trace_setup</a>(<a class=\"id\" href=\"#q\">q</a>, <a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#bdev\">bdev</a>, &amp;<a class=\"id\" href=\"#buts\">buts</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#arg\">arg</a>, &amp;<a class=\"id\" href=\"#buts\">buts</a>, sizeof(<a class=\"id\" href=\"#buts\">buts</a>))) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blk_trace_remove\">blk_trace_remove</a>(<a class=\"id\" href=\"#q\">q</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#blk_trace_setup\">blk_trace_setup</a>);", 
"", 
"#if <a class=\"id\" href=\"#defined\">defined</a>(<a class=\"id\" href=\"#CONFIG_COMPAT\">CONFIG_COMPAT</a>) && <a class=\"id\" href=\"#defined\">defined</a>(<a class=\"id\" href=\"#CONFIG_X86_64\">CONFIG_X86_64</a>)", 
"static int <a class=\"id\" href=\"#compat_blk_trace_setup\">compat_blk_trace_setup</a>(struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>, char *<a class=\"id\" href=\"#name\">name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#dev_t\">dev_t</a> <a class=\"id\" href=\"#dev\">dev</a>, struct <a class=\"id\" href=\"#block_device\">block_device</a> *<a class=\"id\" href=\"#bdev\">bdev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  char <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_user_trace_setup\">blk_user_trace_setup</a> <a class=\"id\" href=\"#buts\">buts</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#compat_blk_user_trace_setup\">compat_blk_user_trace_setup</a> <a class=\"id\" href=\"#cbuts\">cbuts</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(&amp;<a class=\"id\" href=\"#cbuts\">cbuts</a>, <a class=\"id\" href=\"#arg\">arg</a>, sizeof(<a class=\"id\" href=\"#cbuts\">cbuts</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#buts\">buts</a> = (struct <a class=\"id\" href=\"#blk_user_trace_setup\">blk_user_trace_setup</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#act_mask\">act_mask</a> = <a class=\"id\" href=\"#cbuts\">cbuts</a>.<a class=\"id\" href=\"#act_mask\">act_mask</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#buf_size\">buf_size</a> = <a class=\"id\" href=\"#cbuts\">cbuts</a>.<a class=\"id\" href=\"#buf_size\">buf_size</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#buf_nr\">buf_nr</a> = <a class=\"id\" href=\"#cbuts\">cbuts</a>.<a class=\"id\" href=\"#buf_nr\">buf_nr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#start_lba\">start_lba</a> = <a class=\"id\" href=\"#cbuts\">cbuts</a>.<a class=\"id\" href=\"#start_lba\">start_lba</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#end_lba\">end_lba</a> = <a class=\"id\" href=\"#cbuts\">cbuts</a>.<a class=\"id\" href=\"#end_lba\">end_lba</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#pid\">pid</a> = <a class=\"id\" href=\"#cbuts\">cbuts</a>.<a class=\"id\" href=\"#pid\">pid</a>,", 
"<span class=\"ts\"/>};", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>(&amp;<a class=\"id\" href=\"#buts\">buts</a>.<a class=\"id\" href=\"#name\">name</a>, &amp;<a class=\"id\" href=\"#cbuts\">cbuts</a>.<a class=\"id\" href=\"#name\">name</a>, 32);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#do_blk_trace_setup\">do_blk_trace_setup</a>(<a class=\"id\" href=\"#q\">q</a>, <a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#bdev\">bdev</a>, &amp;<a class=\"id\" href=\"#buts\">buts</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#arg\">arg</a>, &amp;<a class=\"id\" href=\"#buts\">buts</a>.<a class=\"id\" href=\"#name\">name</a>, 32)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blk_trace_remove\">blk_trace_remove</a>(<a class=\"id\" href=\"#q\">q</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"int <a class=\"id\" href=\"#blk_trace_startstop\">blk_trace_startstop</a>(struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>, int <a class=\"id\" href=\"#start\">start</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a> = <a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#bt\">bt</a> == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * For starting a trace, we can transition from a setup or stopped</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * trace. For stopping a trace, the state must be running</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#start\">start</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#trace_state\">trace_state</a> == <a class=\"id\" href=\"#Blktrace_setup\">Blktrace_setup</a> ||", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#trace_state\">trace_state</a> == <a class=\"id\" href=\"#Blktrace_stopped\">Blktrace_stopped</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blktrace_seq\">blktrace_seq</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#smp_mb\">smp_mb</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#trace_state\">trace_state</a> = <a class=\"id\" href=\"#Blktrace_running\">Blktrace_running</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#trace_note_time\">trace_note_time</a>(<a class=\"id\" href=\"#bt\">bt</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#trace_state\">trace_state</a> == <a class=\"id\" href=\"#Blktrace_running\">Blktrace_running</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#trace_state\">trace_state</a> = <a class=\"id\" href=\"#Blktrace_stopped\">Blktrace_stopped</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#relay_flush\">relay_flush</a>(<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#rchan\">rchan</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#blk_trace_startstop\">blk_trace_startstop</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * blk_trace_ioctl: - handle the ioctls associated with tracing</span>", 
"<span class=\"comment\"> * @bdev:<span class=\"ts\"/>the block device</span>", 
"<span class=\"comment\"> * @cmd:<span class=\"ts\"/>the ioctl cmd</span>", 
"<span class=\"comment\"> * @arg:<span class=\"ts\"/>the argument data, if any</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> **/</span>", 
"int <a class=\"id\" href=\"#blk_trace_ioctl\">blk_trace_ioctl</a>(struct <a class=\"id\" href=\"#block_device\">block_device</a> *<a class=\"id\" href=\"#bdev\">bdev</a>, unsigned <a class=\"id\" href=\"#cmd\">cmd</a>, char <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>, <a class=\"id\" href=\"#start\">start</a> = 0;", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#b\">b</a>[<a class=\"id\" href=\"#BDEVNAME_SIZE\">BDEVNAME_SIZE</a>];", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#q\">q</a> = <a class=\"id\" href=\"#bdev_get_queue\">bdev_get_queue</a>(<a class=\"id\" href=\"#bdev\">bdev</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#q\">q</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENXIO\">ENXIO</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#lock_kernel\">lock_kernel</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#bdev\">bdev</a>-><a class=\"id\" href=\"#bd_mutex\">bd_mutex</a>);", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#cmd\">cmd</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#BLKTRACESETUP\">BLKTRACESETUP</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bdevname\">bdevname</a>(<a class=\"id\" href=\"#bdev\">bdev</a>, <a class=\"id\" href=\"#b\">b</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#blk_trace_setup\">blk_trace_setup</a>(<a class=\"id\" href=\"#q\">q</a>, <a class=\"id\" href=\"#b\">b</a>, <a class=\"id\" href=\"#bdev\">bdev</a>-><a class=\"id\" href=\"#bd_dev\">bd_dev</a>, <a class=\"id\" href=\"#bdev\">bdev</a>, <a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"#if <a class=\"id\" href=\"#defined\">defined</a>(<a class=\"id\" href=\"#CONFIG_COMPAT\">CONFIG_COMPAT</a>) && <a class=\"id\" href=\"#defined\">defined</a>(<a class=\"id\" href=\"#CONFIG_X86_64\">CONFIG_X86_64</a>)", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#BLKTRACESETUP32\">BLKTRACESETUP32</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bdevname\">bdevname</a>(<a class=\"id\" href=\"#bdev\">bdev</a>, <a class=\"id\" href=\"#b\">b</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#compat_blk_trace_setup\">compat_blk_trace_setup</a>(<a class=\"id\" href=\"#q\">q</a>, <a class=\"id\" href=\"#b\">b</a>, <a class=\"id\" href=\"#bdev\">bdev</a>-><a class=\"id\" href=\"#bd_dev\">bd_dev</a>, <a class=\"id\" href=\"#bdev\">bdev</a>, <a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#BLKTRACESTART\">BLKTRACESTART</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#start\">start</a> = 1;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#BLKTRACESTOP\">BLKTRACESTOP</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#blk_trace_startstop\">blk_trace_startstop</a>(<a class=\"id\" href=\"#q\">q</a>, <a class=\"id\" href=\"#start\">start</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#BLKTRACETEARDOWN\">BLKTRACETEARDOWN</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#blk_trace_remove\">blk_trace_remove</a>(<a class=\"id\" href=\"#q\">q</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#ENOTTY\">ENOTTY</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#bdev\">bdev</a>-><a class=\"id\" href=\"#bd_mutex\">bd_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unlock_kernel\">unlock_kernel</a>();", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * blk_trace_shutdown: - stop and cleanup trace structures</span>", 
"<span class=\"comment\"> * @q:    the request queue associated with the device</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> **/</span>", 
"void <a class=\"id\" href=\"#blk_trace_shutdown\">blk_trace_shutdown</a>(struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blk_trace_startstop\">blk_trace_startstop</a>(<a class=\"id\" href=\"#q\">q</a>, 0);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blk_trace_remove\">blk_trace_remove</a>(<a class=\"id\" href=\"#q\">q</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * blktrace probes</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * blk_add_trace_rq - Add a trace for a request oriented action</span>", 
"<span class=\"comment\"> * @q:<span class=\"ts\"/><span class=\"ts\"/>queue the io is for</span>", 
"<span class=\"comment\"> * @rq:<span class=\"ts\"/><span class=\"ts\"/>the source request</span>", 
"<span class=\"comment\"> * @what:<span class=\"ts\"/>the action</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Description:</span>", 
"<span class=\"comment\"> *     Records an action against a request. Will log the bio offset + size.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> **/</span>", 
"static void <a class=\"id\" href=\"#blk_add_trace_rq\">blk_add_trace_rq</a>(struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>, struct <a class=\"id\" href=\"#request\">request</a> *<a class=\"id\" href=\"#rq\">rq</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#what\">what</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a> = <a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rw\">rw</a> = <a class=\"id\" href=\"#rq\">rq</a>-><a class=\"id\" href=\"#cmd_flags\">cmd_flags</a> &amp; 0x03;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#likely\">likely</a>(!<a class=\"id\" href=\"#bt\">bt</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rq\">rq</a>-><a class=\"id\" href=\"#cmd_flags\">cmd_flags</a> &amp; <a class=\"id\" href=\"#REQ_DISCARD\">REQ_DISCARD</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rw\">rw</a> |= <a class=\"id\" href=\"#REQ_DISCARD\">REQ_DISCARD</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rq\">rq</a>-><a class=\"id\" href=\"#cmd_flags\">cmd_flags</a> &amp; <a class=\"id\" href=\"#REQ_SECURE\">REQ_SECURE</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rw\">rw</a> |= <a class=\"id\" href=\"#REQ_SECURE\">REQ_SECURE</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rq\">rq</a>-><a class=\"id\" href=\"#cmd_type\">cmd_type</a> == <a class=\"id\" href=\"#REQ_TYPE_BLOCK_PC\">REQ_TYPE_BLOCK_PC</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#what\">what</a> |= <a class=\"id\" href=\"#BLK_TC_ACT\">BLK_TC_ACT</a>(<a class=\"id\" href=\"#BLK_TC_PC\">BLK_TC_PC</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__blk_add_trace\">__blk_add_trace</a>(<a class=\"id\" href=\"#bt\">bt</a>, 0, <a class=\"id\" href=\"#blk_rq_bytes\">blk_rq_bytes</a>(<a class=\"id\" href=\"#rq\">rq</a>), <a class=\"id\" href=\"#rw\">rw</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#what\">what</a>, <a class=\"id\" href=\"#rq\">rq</a>-><a class=\"id\" href=\"#errors\">errors</a>, <a class=\"id\" href=\"#rq\">rq</a>-><a class=\"id\" href=\"#cmd_len\">cmd_len</a>, <a class=\"id\" href=\"#rq\">rq</a>-><a class=\"id\" href=\"#cmd\">cmd</a>);", 
"<span class=\"ts\"/>} else  {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#what\">what</a> |= <a class=\"id\" href=\"#BLK_TC_ACT\">BLK_TC_ACT</a>(<a class=\"id\" href=\"#BLK_TC_FS\">BLK_TC_FS</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__blk_add_trace\">__blk_add_trace</a>(<a class=\"id\" href=\"#bt\">bt</a>, <a class=\"id\" href=\"#blk_rq_pos\">blk_rq_pos</a>(<a class=\"id\" href=\"#rq\">rq</a>), <a class=\"id\" href=\"#blk_rq_bytes\">blk_rq_bytes</a>(<a class=\"id\" href=\"#rq\">rq</a>), <a class=\"id\" href=\"#rw\">rw</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#what\">what</a>, <a class=\"id\" href=\"#rq\">rq</a>-><a class=\"id\" href=\"#errors\">errors</a>, 0, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static void <a class=\"id\" href=\"#blk_add_trace_rq_abort\">blk_add_trace_rq_abort</a>(void *<a class=\"id\" href=\"#ignore\">ignore</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>, struct <a class=\"id\" href=\"#request\">request</a> *<a class=\"id\" href=\"#rq\">rq</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_add_trace_rq\">blk_add_trace_rq</a>(<a class=\"id\" href=\"#q\">q</a>, <a class=\"id\" href=\"#rq\">rq</a>, <a class=\"id\" href=\"#BLK_TA_ABORT\">BLK_TA_ABORT</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#blk_add_trace_rq_insert\">blk_add_trace_rq_insert</a>(void *<a class=\"id\" href=\"#ignore\">ignore</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>, struct <a class=\"id\" href=\"#request\">request</a> *<a class=\"id\" href=\"#rq\">rq</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_add_trace_rq\">blk_add_trace_rq</a>(<a class=\"id\" href=\"#q\">q</a>, <a class=\"id\" href=\"#rq\">rq</a>, <a class=\"id\" href=\"#BLK_TA_INSERT\">BLK_TA_INSERT</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#blk_add_trace_rq_issue\">blk_add_trace_rq_issue</a>(void *<a class=\"id\" href=\"#ignore\">ignore</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>, struct <a class=\"id\" href=\"#request\">request</a> *<a class=\"id\" href=\"#rq\">rq</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_add_trace_rq\">blk_add_trace_rq</a>(<a class=\"id\" href=\"#q\">q</a>, <a class=\"id\" href=\"#rq\">rq</a>, <a class=\"id\" href=\"#BLK_TA_ISSUE\">BLK_TA_ISSUE</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#blk_add_trace_rq_requeue\">blk_add_trace_rq_requeue</a>(void *<a class=\"id\" href=\"#ignore\">ignore</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     struct <a class=\"id\" href=\"#request\">request</a> *<a class=\"id\" href=\"#rq\">rq</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_add_trace_rq\">blk_add_trace_rq</a>(<a class=\"id\" href=\"#q\">q</a>, <a class=\"id\" href=\"#rq\">rq</a>, <a class=\"id\" href=\"#BLK_TA_REQUEUE\">BLK_TA_REQUEUE</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#blk_add_trace_rq_complete\">blk_add_trace_rq_complete</a>(void *<a class=\"id\" href=\"#ignore\">ignore</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      struct <a class=\"id\" href=\"#request\">request</a> *<a class=\"id\" href=\"#rq\">rq</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_add_trace_rq\">blk_add_trace_rq</a>(<a class=\"id\" href=\"#q\">q</a>, <a class=\"id\" href=\"#rq\">rq</a>, <a class=\"id\" href=\"#BLK_TA_COMPLETE\">BLK_TA_COMPLETE</a>);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * blk_add_trace_bio - Add a trace for a bio oriented action</span>", 
"<span class=\"comment\"> * @q:<span class=\"ts\"/><span class=\"ts\"/>queue the io is for</span>", 
"<span class=\"comment\"> * @bio:<span class=\"ts\"/>the source bio</span>", 
"<span class=\"comment\"> * @what:<span class=\"ts\"/>the action</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Description:</span>", 
"<span class=\"comment\"> *     Records an action against a bio. Will log the bio offset + size.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> **/</span>", 
"static void <a class=\"id\" href=\"#blk_add_trace_bio\">blk_add_trace_bio</a>(struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>, struct <a class=\"id\" href=\"#bio\">bio</a> *<a class=\"id\" href=\"#bio\">bio</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#what\">what</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a> = <a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#likely\">likely</a>(!<a class=\"id\" href=\"#bt\">bt</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__blk_add_trace\">__blk_add_trace</a>(<a class=\"id\" href=\"#bt\">bt</a>, <a class=\"id\" href=\"#bio\">bio</a>-><a class=\"id\" href=\"#bi_sector\">bi_sector</a>, <a class=\"id\" href=\"#bio\">bio</a>-><a class=\"id\" href=\"#bi_size\">bi_size</a>, <a class=\"id\" href=\"#bio\">bio</a>-><a class=\"id\" href=\"#bi_rw\">bi_rw</a>, <a class=\"id\" href=\"#what\">what</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>!<a class=\"id\" href=\"#bio_flagged\">bio_flagged</a>(<a class=\"id\" href=\"#bio\">bio</a>, <a class=\"id\" href=\"#BIO_UPTODATE\">BIO_UPTODATE</a>), 0, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#blk_add_trace_bio_bounce\">blk_add_trace_bio_bounce</a>(void *<a class=\"id\" href=\"#ignore\">ignore</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>, struct <a class=\"id\" href=\"#bio\">bio</a> *<a class=\"id\" href=\"#bio\">bio</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_add_trace_bio\">blk_add_trace_bio</a>(<a class=\"id\" href=\"#q\">q</a>, <a class=\"id\" href=\"#bio\">bio</a>, <a class=\"id\" href=\"#BLK_TA_BOUNCE\">BLK_TA_BOUNCE</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#blk_add_trace_bio_complete\">blk_add_trace_bio_complete</a>(void *<a class=\"id\" href=\"#ignore\">ignore</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>, struct <a class=\"id\" href=\"#bio\">bio</a> *<a class=\"id\" href=\"#bio\">bio</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_add_trace_bio\">blk_add_trace_bio</a>(<a class=\"id\" href=\"#q\">q</a>, <a class=\"id\" href=\"#bio\">bio</a>, <a class=\"id\" href=\"#BLK_TA_COMPLETE\">BLK_TA_COMPLETE</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#blk_add_trace_bio_backmerge\">blk_add_trace_bio_backmerge</a>(void *<a class=\"id\" href=\"#ignore\">ignore</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#bio\">bio</a> *<a class=\"id\" href=\"#bio\">bio</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_add_trace_bio\">blk_add_trace_bio</a>(<a class=\"id\" href=\"#q\">q</a>, <a class=\"id\" href=\"#bio\">bio</a>, <a class=\"id\" href=\"#BLK_TA_BACKMERGE\">BLK_TA_BACKMERGE</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#blk_add_trace_bio_frontmerge\">blk_add_trace_bio_frontmerge</a>(void *<a class=\"id\" href=\"#ignore\">ignore</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> struct <a class=\"id\" href=\"#bio\">bio</a> *<a class=\"id\" href=\"#bio\">bio</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_add_trace_bio\">blk_add_trace_bio</a>(<a class=\"id\" href=\"#q\">q</a>, <a class=\"id\" href=\"#bio\">bio</a>, <a class=\"id\" href=\"#BLK_TA_FRONTMERGE\">BLK_TA_FRONTMERGE</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#blk_add_trace_bio_queue\">blk_add_trace_bio_queue</a>(void *<a class=\"id\" href=\"#ignore\">ignore</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>, struct <a class=\"id\" href=\"#bio\">bio</a> *<a class=\"id\" href=\"#bio\">bio</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_add_trace_bio\">blk_add_trace_bio</a>(<a class=\"id\" href=\"#q\">q</a>, <a class=\"id\" href=\"#bio\">bio</a>, <a class=\"id\" href=\"#BLK_TA_QUEUE\">BLK_TA_QUEUE</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#blk_add_trace_getrq\">blk_add_trace_getrq</a>(void *<a class=\"id\" href=\"#ignore\">ignore</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#bio\">bio</a> *<a class=\"id\" href=\"#bio\">bio</a>, int <a class=\"id\" href=\"#rw\">rw</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#bio\">bio</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blk_add_trace_bio\">blk_add_trace_bio</a>(<a class=\"id\" href=\"#q\">q</a>, <a class=\"id\" href=\"#bio\">bio</a>, <a class=\"id\" href=\"#BLK_TA_GETRQ\">BLK_TA_GETRQ</a>);", 
"<span class=\"ts\"/>else {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a> = <a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#bt\">bt</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__blk_add_trace\">__blk_add_trace</a>(<a class=\"id\" href=\"#bt\">bt</a>, 0, 0, <a class=\"id\" href=\"#rw\">rw</a>, <a class=\"id\" href=\"#BLK_TA_GETRQ\">BLK_TA_GETRQ</a>, 0, 0, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"", 
"static void <a class=\"id\" href=\"#blk_add_trace_sleeprq\">blk_add_trace_sleeprq</a>(void *<a class=\"id\" href=\"#ignore\">ignore</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  struct <a class=\"id\" href=\"#bio\">bio</a> *<a class=\"id\" href=\"#bio\">bio</a>, int <a class=\"id\" href=\"#rw\">rw</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#bio\">bio</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blk_add_trace_bio\">blk_add_trace_bio</a>(<a class=\"id\" href=\"#q\">q</a>, <a class=\"id\" href=\"#bio\">bio</a>, <a class=\"id\" href=\"#BLK_TA_SLEEPRQ\">BLK_TA_SLEEPRQ</a>);", 
"<span class=\"ts\"/>else {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a> = <a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#bt\">bt</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__blk_add_trace\">__blk_add_trace</a>(<a class=\"id\" href=\"#bt\">bt</a>, 0, 0, <a class=\"id\" href=\"#rw\">rw</a>, <a class=\"id\" href=\"#BLK_TA_SLEEPRQ\">BLK_TA_SLEEPRQ</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>0, 0, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static void <a class=\"id\" href=\"#blk_add_trace_plug\">blk_add_trace_plug</a>(void *<a class=\"id\" href=\"#ignore\">ignore</a>, struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a> = <a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#bt\">bt</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__blk_add_trace\">__blk_add_trace</a>(<a class=\"id\" href=\"#bt\">bt</a>, 0, 0, 0, <a class=\"id\" href=\"#BLK_TA_PLUG\">BLK_TA_PLUG</a>, 0, 0, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#blk_add_trace_unplug_io\">blk_add_trace_unplug_io</a>(void *<a class=\"id\" href=\"#ignore\">ignore</a>, struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a> = <a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#bt\">bt</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#pdu\">pdu</a> = <a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#rq\">rq</a>.<a class=\"id\" href=\"#count\">count</a>[<a class=\"id\" href=\"#READ\">READ</a>] + <a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#rq\">rq</a>.<a class=\"id\" href=\"#count\">count</a>[<a class=\"id\" href=\"#WRITE\">WRITE</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__be64\">__be64</a> <a class=\"id\" href=\"#rpdu\">rpdu</a> = <a class=\"id\" href=\"#cpu_to_be64\">cpu_to_be64</a>(<a class=\"id\" href=\"#pdu\">pdu</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__blk_add_trace\">__blk_add_trace</a>(<a class=\"id\" href=\"#bt\">bt</a>, 0, 0, 0, <a class=\"id\" href=\"#BLK_TA_UNPLUG_IO\">BLK_TA_UNPLUG_IO</a>, 0,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>sizeof(<a class=\"id\" href=\"#rpdu\">rpdu</a>), &amp;<a class=\"id\" href=\"#rpdu\">rpdu</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static void <a class=\"id\" href=\"#blk_add_trace_unplug_timer\">blk_add_trace_unplug_timer</a>(void *<a class=\"id\" href=\"#ignore\">ignore</a>, struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a> = <a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#bt\">bt</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#pdu\">pdu</a> = <a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#rq\">rq</a>.<a class=\"id\" href=\"#count\">count</a>[<a class=\"id\" href=\"#READ\">READ</a>] + <a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#rq\">rq</a>.<a class=\"id\" href=\"#count\">count</a>[<a class=\"id\" href=\"#WRITE\">WRITE</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__be64\">__be64</a> <a class=\"id\" href=\"#rpdu\">rpdu</a> = <a class=\"id\" href=\"#cpu_to_be64\">cpu_to_be64</a>(<a class=\"id\" href=\"#pdu\">pdu</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__blk_add_trace\">__blk_add_trace</a>(<a class=\"id\" href=\"#bt\">bt</a>, 0, 0, 0, <a class=\"id\" href=\"#BLK_TA_UNPLUG_TIMER\">BLK_TA_UNPLUG_TIMER</a>, 0,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>sizeof(<a class=\"id\" href=\"#rpdu\">rpdu</a>), &amp;<a class=\"id\" href=\"#rpdu\">rpdu</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static void <a class=\"id\" href=\"#blk_add_trace_split\">blk_add_trace_split</a>(void *<a class=\"id\" href=\"#ignore\">ignore</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>, struct <a class=\"id\" href=\"#bio\">bio</a> *<a class=\"id\" href=\"#bio\">bio</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#pdu\">pdu</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a> = <a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#bt\">bt</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__be64\">__be64</a> <a class=\"id\" href=\"#rpdu\">rpdu</a> = <a class=\"id\" href=\"#cpu_to_be64\">cpu_to_be64</a>(<a class=\"id\" href=\"#pdu\">pdu</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__blk_add_trace\">__blk_add_trace</a>(<a class=\"id\" href=\"#bt\">bt</a>, <a class=\"id\" href=\"#bio\">bio</a>-><a class=\"id\" href=\"#bi_sector\">bi_sector</a>, <a class=\"id\" href=\"#bio\">bio</a>-><a class=\"id\" href=\"#bi_size\">bi_size</a>, <a class=\"id\" href=\"#bio\">bio</a>-><a class=\"id\" href=\"#bi_rw\">bi_rw</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BLK_TA_SPLIT\">BLK_TA_SPLIT</a>, !<a class=\"id\" href=\"#bio_flagged\">bio_flagged</a>(<a class=\"id\" href=\"#bio\">bio</a>, <a class=\"id\" href=\"#BIO_UPTODATE\">BIO_UPTODATE</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>sizeof(<a class=\"id\" href=\"#rpdu\">rpdu</a>), &amp;<a class=\"id\" href=\"#rpdu\">rpdu</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * blk_add_trace_remap - Add a trace for a remap operation</span>", 
"<span class=\"comment\"> * @ignore:<span class=\"ts\"/>trace callback data parameter (not used)</span>", 
"<span class=\"comment\"> * @q:<span class=\"ts\"/><span class=\"ts\"/>queue the io is for</span>", 
"<span class=\"comment\"> * @bio:<span class=\"ts\"/>the source bio</span>", 
"<span class=\"comment\"> * @dev:<span class=\"ts\"/>target device</span>", 
"<span class=\"comment\"> * @from:<span class=\"ts\"/>source sector</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Description:</span>", 
"<span class=\"comment\"> *     Device mapper or raid target sometimes need to split a bio because</span>", 
"<span class=\"comment\"> *     it spans a stripe (or similar). Add a trace for that action.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> **/</span>", 
"static void <a class=\"id\" href=\"#blk_add_trace_remap\">blk_add_trace_remap</a>(void *<a class=\"id\" href=\"#ignore\">ignore</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>, struct <a class=\"id\" href=\"#bio\">bio</a> *<a class=\"id\" href=\"#bio\">bio</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_t\">dev_t</a> <a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#sector_t\">sector_t</a> <a class=\"id\" href=\"#from\">from</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a> = <a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_io_trace_remap\">blk_io_trace_remap</a> <a class=\"id\" href=\"#r\">r</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#likely\">likely</a>(!<a class=\"id\" href=\"#bt\">bt</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>.<a class=\"id\" href=\"#device_from\">device_from</a> = <a class=\"id\" href=\"#cpu_to_be32\">cpu_to_be32</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>.<a class=\"id\" href=\"#device_to\">device_to</a>   = <a class=\"id\" href=\"#cpu_to_be32\">cpu_to_be32</a>(<a class=\"id\" href=\"#bio\">bio</a>-><a class=\"id\" href=\"#bi_bdev\">bi_bdev</a>-><a class=\"id\" href=\"#bd_dev\">bd_dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>.<a class=\"id\" href=\"#sector_from\">sector_from</a> = <a class=\"id\" href=\"#cpu_to_be64\">cpu_to_be64</a>(<a class=\"id\" href=\"#from\">from</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__blk_add_trace\">__blk_add_trace</a>(<a class=\"id\" href=\"#bt\">bt</a>, <a class=\"id\" href=\"#bio\">bio</a>-><a class=\"id\" href=\"#bi_sector\">bi_sector</a>, <a class=\"id\" href=\"#bio\">bio</a>-><a class=\"id\" href=\"#bi_size\">bi_size</a>, <a class=\"id\" href=\"#bio\">bio</a>-><a class=\"id\" href=\"#bi_rw\">bi_rw</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BLK_TA_REMAP\">BLK_TA_REMAP</a>, !<a class=\"id\" href=\"#bio_flagged\">bio_flagged</a>(<a class=\"id\" href=\"#bio\">bio</a>, <a class=\"id\" href=\"#BIO_UPTODATE\">BIO_UPTODATE</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>sizeof(<a class=\"id\" href=\"#r\">r</a>), &amp;<a class=\"id\" href=\"#r\">r</a>);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * blk_add_trace_rq_remap - Add a trace for a request-remap operation</span>", 
"<span class=\"comment\"> * @ignore:<span class=\"ts\"/>trace callback data parameter (not used)</span>", 
"<span class=\"comment\"> * @q:<span class=\"ts\"/><span class=\"ts\"/>queue the io is for</span>", 
"<span class=\"comment\"> * @rq:<span class=\"ts\"/><span class=\"ts\"/>the source request</span>", 
"<span class=\"comment\"> * @dev:<span class=\"ts\"/>target device</span>", 
"<span class=\"comment\"> * @from:<span class=\"ts\"/>source sector</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Description:</span>", 
"<span class=\"comment\"> *     Device mapper remaps request to other devices.</span>", 
"<span class=\"comment\"> *     Add a trace for that action.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> **/</span>", 
"static void <a class=\"id\" href=\"#blk_add_trace_rq_remap\">blk_add_trace_rq_remap</a>(void *<a class=\"id\" href=\"#ignore\">ignore</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   struct <a class=\"id\" href=\"#request\">request</a> *<a class=\"id\" href=\"#rq\">rq</a>, <a class=\"id\" href=\"#dev_t\">dev_t</a> <a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#sector_t\">sector_t</a> <a class=\"id\" href=\"#from\">from</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a> = <a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_io_trace_remap\">blk_io_trace_remap</a> <a class=\"id\" href=\"#r\">r</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#likely\">likely</a>(!<a class=\"id\" href=\"#bt\">bt</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>.<a class=\"id\" href=\"#device_from\">device_from</a> = <a class=\"id\" href=\"#cpu_to_be32\">cpu_to_be32</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>.<a class=\"id\" href=\"#device_to\">device_to</a>   = <a class=\"id\" href=\"#cpu_to_be32\">cpu_to_be32</a>(<a class=\"id\" href=\"#disk_devt\">disk_devt</a>(<a class=\"id\" href=\"#rq\">rq</a>-><a class=\"id\" href=\"#rq_disk\">rq_disk</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>.<a class=\"id\" href=\"#sector_from\">sector_from</a> = <a class=\"id\" href=\"#cpu_to_be64\">cpu_to_be64</a>(<a class=\"id\" href=\"#from\">from</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__blk_add_trace\">__blk_add_trace</a>(<a class=\"id\" href=\"#bt\">bt</a>, <a class=\"id\" href=\"#blk_rq_pos\">blk_rq_pos</a>(<a class=\"id\" href=\"#rq\">rq</a>), <a class=\"id\" href=\"#blk_rq_bytes\">blk_rq_bytes</a>(<a class=\"id\" href=\"#rq\">rq</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rq_data_dir\">rq_data_dir</a>(<a class=\"id\" href=\"#rq\">rq</a>), <a class=\"id\" href=\"#BLK_TA_REMAP\">BLK_TA_REMAP</a>, !!<a class=\"id\" href=\"#rq\">rq</a>-><a class=\"id\" href=\"#errors\">errors</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>sizeof(<a class=\"id\" href=\"#r\">r</a>), &amp;<a class=\"id\" href=\"#r\">r</a>);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * blk_add_driver_data - Add binary message with driver-specific data</span>", 
"<span class=\"comment\"> * @q:<span class=\"ts\"/><span class=\"ts\"/>queue the io is for</span>", 
"<span class=\"comment\"> * @rq:<span class=\"ts\"/><span class=\"ts\"/>io request</span>", 
"<span class=\"comment\"> * @data:<span class=\"ts\"/>driver-specific data</span>", 
"<span class=\"comment\"> * @len:<span class=\"ts\"/>length of driver-specific data</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Description:</span>", 
"<span class=\"comment\"> *     Some drivers might want to write driver-specific data per request.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> **/</span>", 
"void <a class=\"id\" href=\"#blk_add_driver_data\">blk_add_driver_data</a>(struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> struct <a class=\"id\" href=\"#request\">request</a> *<a class=\"id\" href=\"#rq\">rq</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> void *<a class=\"id\" href=\"#data\">data</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#len\">len</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a> = <a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#likely\">likely</a>(!<a class=\"id\" href=\"#bt\">bt</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rq\">rq</a>-><a class=\"id\" href=\"#cmd_type\">cmd_type</a> == <a class=\"id\" href=\"#REQ_TYPE_BLOCK_PC\">REQ_TYPE_BLOCK_PC</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__blk_add_trace\">__blk_add_trace</a>(<a class=\"id\" href=\"#bt\">bt</a>, 0, <a class=\"id\" href=\"#blk_rq_bytes\">blk_rq_bytes</a>(<a class=\"id\" href=\"#rq\">rq</a>), 0,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BLK_TA_DRV_DATA\">BLK_TA_DRV_DATA</a>, <a class=\"id\" href=\"#rq\">rq</a>-><a class=\"id\" href=\"#errors\">errors</a>, <a class=\"id\" href=\"#len\">len</a>, <a class=\"id\" href=\"#data\">data</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__blk_add_trace\">__blk_add_trace</a>(<a class=\"id\" href=\"#bt\">bt</a>, <a class=\"id\" href=\"#blk_rq_pos\">blk_rq_pos</a>(<a class=\"id\" href=\"#rq\">rq</a>), <a class=\"id\" href=\"#blk_rq_bytes\">blk_rq_bytes</a>(<a class=\"id\" href=\"#rq\">rq</a>), 0,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BLK_TA_DRV_DATA\">BLK_TA_DRV_DATA</a>, <a class=\"id\" href=\"#rq\">rq</a>-><a class=\"id\" href=\"#errors\">errors</a>, <a class=\"id\" href=\"#len\">len</a>, <a class=\"id\" href=\"#data\">data</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#blk_add_driver_data\">blk_add_driver_data</a>);", 
"", 
"static void <a class=\"id\" href=\"#blk_register_tracepoints\">blk_register_tracepoints</a>(void)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#register_trace_block_rq_abort\">register_trace_block_rq_abort</a>(<a class=\"id\" href=\"#blk_add_trace_rq_abort\">blk_add_trace_rq_abort</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON\">WARN_ON</a>(<a class=\"id\" href=\"#ret\">ret</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#register_trace_block_rq_insert\">register_trace_block_rq_insert</a>(<a class=\"id\" href=\"#blk_add_trace_rq_insert\">blk_add_trace_rq_insert</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON\">WARN_ON</a>(<a class=\"id\" href=\"#ret\">ret</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#register_trace_block_rq_issue\">register_trace_block_rq_issue</a>(<a class=\"id\" href=\"#blk_add_trace_rq_issue\">blk_add_trace_rq_issue</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON\">WARN_ON</a>(<a class=\"id\" href=\"#ret\">ret</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#register_trace_block_rq_requeue\">register_trace_block_rq_requeue</a>(<a class=\"id\" href=\"#blk_add_trace_rq_requeue\">blk_add_trace_rq_requeue</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON\">WARN_ON</a>(<a class=\"id\" href=\"#ret\">ret</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#register_trace_block_rq_complete\">register_trace_block_rq_complete</a>(<a class=\"id\" href=\"#blk_add_trace_rq_complete\">blk_add_trace_rq_complete</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON\">WARN_ON</a>(<a class=\"id\" href=\"#ret\">ret</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#register_trace_block_bio_bounce\">register_trace_block_bio_bounce</a>(<a class=\"id\" href=\"#blk_add_trace_bio_bounce\">blk_add_trace_bio_bounce</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON\">WARN_ON</a>(<a class=\"id\" href=\"#ret\">ret</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#register_trace_block_bio_complete\">register_trace_block_bio_complete</a>(<a class=\"id\" href=\"#blk_add_trace_bio_complete\">blk_add_trace_bio_complete</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON\">WARN_ON</a>(<a class=\"id\" href=\"#ret\">ret</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#register_trace_block_bio_backmerge\">register_trace_block_bio_backmerge</a>(<a class=\"id\" href=\"#blk_add_trace_bio_backmerge\">blk_add_trace_bio_backmerge</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON\">WARN_ON</a>(<a class=\"id\" href=\"#ret\">ret</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#register_trace_block_bio_frontmerge\">register_trace_block_bio_frontmerge</a>(<a class=\"id\" href=\"#blk_add_trace_bio_frontmerge\">blk_add_trace_bio_frontmerge</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON\">WARN_ON</a>(<a class=\"id\" href=\"#ret\">ret</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#register_trace_block_bio_queue\">register_trace_block_bio_queue</a>(<a class=\"id\" href=\"#blk_add_trace_bio_queue\">blk_add_trace_bio_queue</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON\">WARN_ON</a>(<a class=\"id\" href=\"#ret\">ret</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#register_trace_block_getrq\">register_trace_block_getrq</a>(<a class=\"id\" href=\"#blk_add_trace_getrq\">blk_add_trace_getrq</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON\">WARN_ON</a>(<a class=\"id\" href=\"#ret\">ret</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#register_trace_block_sleeprq\">register_trace_block_sleeprq</a>(<a class=\"id\" href=\"#blk_add_trace_sleeprq\">blk_add_trace_sleeprq</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON\">WARN_ON</a>(<a class=\"id\" href=\"#ret\">ret</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#register_trace_block_plug\">register_trace_block_plug</a>(<a class=\"id\" href=\"#blk_add_trace_plug\">blk_add_trace_plug</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON\">WARN_ON</a>(<a class=\"id\" href=\"#ret\">ret</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#register_trace_block_unplug_timer\">register_trace_block_unplug_timer</a>(<a class=\"id\" href=\"#blk_add_trace_unplug_timer\">blk_add_trace_unplug_timer</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON\">WARN_ON</a>(<a class=\"id\" href=\"#ret\">ret</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#register_trace_block_unplug_io\">register_trace_block_unplug_io</a>(<a class=\"id\" href=\"#blk_add_trace_unplug_io\">blk_add_trace_unplug_io</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON\">WARN_ON</a>(<a class=\"id\" href=\"#ret\">ret</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#register_trace_block_split\">register_trace_block_split</a>(<a class=\"id\" href=\"#blk_add_trace_split\">blk_add_trace_split</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON\">WARN_ON</a>(<a class=\"id\" href=\"#ret\">ret</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#register_trace_block_remap\">register_trace_block_remap</a>(<a class=\"id\" href=\"#blk_add_trace_remap\">blk_add_trace_remap</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON\">WARN_ON</a>(<a class=\"id\" href=\"#ret\">ret</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#register_trace_block_rq_remap\">register_trace_block_rq_remap</a>(<a class=\"id\" href=\"#blk_add_trace_rq_remap\">blk_add_trace_rq_remap</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON\">WARN_ON</a>(<a class=\"id\" href=\"#ret\">ret</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#blk_unregister_tracepoints\">blk_unregister_tracepoints</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unregister_trace_block_rq_remap\">unregister_trace_block_rq_remap</a>(<a class=\"id\" href=\"#blk_add_trace_rq_remap\">blk_add_trace_rq_remap</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unregister_trace_block_remap\">unregister_trace_block_remap</a>(<a class=\"id\" href=\"#blk_add_trace_remap\">blk_add_trace_remap</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unregister_trace_block_split\">unregister_trace_block_split</a>(<a class=\"id\" href=\"#blk_add_trace_split\">blk_add_trace_split</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unregister_trace_block_unplug_io\">unregister_trace_block_unplug_io</a>(<a class=\"id\" href=\"#blk_add_trace_unplug_io\">blk_add_trace_unplug_io</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unregister_trace_block_unplug_timer\">unregister_trace_block_unplug_timer</a>(<a class=\"id\" href=\"#blk_add_trace_unplug_timer\">blk_add_trace_unplug_timer</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unregister_trace_block_plug\">unregister_trace_block_plug</a>(<a class=\"id\" href=\"#blk_add_trace_plug\">blk_add_trace_plug</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unregister_trace_block_sleeprq\">unregister_trace_block_sleeprq</a>(<a class=\"id\" href=\"#blk_add_trace_sleeprq\">blk_add_trace_sleeprq</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unregister_trace_block_getrq\">unregister_trace_block_getrq</a>(<a class=\"id\" href=\"#blk_add_trace_getrq\">blk_add_trace_getrq</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unregister_trace_block_bio_queue\">unregister_trace_block_bio_queue</a>(<a class=\"id\" href=\"#blk_add_trace_bio_queue\">blk_add_trace_bio_queue</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unregister_trace_block_bio_frontmerge\">unregister_trace_block_bio_frontmerge</a>(<a class=\"id\" href=\"#blk_add_trace_bio_frontmerge\">blk_add_trace_bio_frontmerge</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unregister_trace_block_bio_backmerge\">unregister_trace_block_bio_backmerge</a>(<a class=\"id\" href=\"#blk_add_trace_bio_backmerge\">blk_add_trace_bio_backmerge</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unregister_trace_block_bio_complete\">unregister_trace_block_bio_complete</a>(<a class=\"id\" href=\"#blk_add_trace_bio_complete\">blk_add_trace_bio_complete</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unregister_trace_block_bio_bounce\">unregister_trace_block_bio_bounce</a>(<a class=\"id\" href=\"#blk_add_trace_bio_bounce\">blk_add_trace_bio_bounce</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unregister_trace_block_rq_complete\">unregister_trace_block_rq_complete</a>(<a class=\"id\" href=\"#blk_add_trace_rq_complete\">blk_add_trace_rq_complete</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unregister_trace_block_rq_requeue\">unregister_trace_block_rq_requeue</a>(<a class=\"id\" href=\"#blk_add_trace_rq_requeue\">blk_add_trace_rq_requeue</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unregister_trace_block_rq_issue\">unregister_trace_block_rq_issue</a>(<a class=\"id\" href=\"#blk_add_trace_rq_issue\">blk_add_trace_rq_issue</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unregister_trace_block_rq_insert\">unregister_trace_block_rq_insert</a>(<a class=\"id\" href=\"#blk_add_trace_rq_insert\">blk_add_trace_rq_insert</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unregister_trace_block_rq_abort\">unregister_trace_block_rq_abort</a>(<a class=\"id\" href=\"#blk_add_trace_rq_abort\">blk_add_trace_rq_abort</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tracepoint_synchronize_unregister\">tracepoint_synchronize_unregister</a>();", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * struct blk_io_tracer formatting routines</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static void <a class=\"id\" href=\"#fill_rwbs\">fill_rwbs</a>(char *<a class=\"id\" href=\"#rwbs\">rwbs</a>, const struct <a class=\"id\" href=\"#blk_io_trace\">blk_io_trace</a> *<a class=\"id\" href=\"#t\">t</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a> = 0;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#tc\">tc</a> = <a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#action\">action</a> >> <a class=\"id\" href=\"#BLK_TC_SHIFT\">BLK_TC_SHIFT</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#action\">action</a> == <a class=\"id\" href=\"#BLK_TN_MESSAGE\">BLK_TN_MESSAGE</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rwbs\">rwbs</a>[<a class=\"id\" href=\"#i\">i</a>++] = 'N';", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tc\">tc</a> &amp; <a class=\"id\" href=\"#BLK_TC_DISCARD\">BLK_TC_DISCARD</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rwbs\">rwbs</a>[<a class=\"id\" href=\"#i\">i</a>++] = 'D';", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#tc\">tc</a> &amp; <a class=\"id\" href=\"#BLK_TC_WRITE\">BLK_TC_WRITE</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rwbs\">rwbs</a>[<a class=\"id\" href=\"#i\">i</a>++] = 'W';", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#bytes\">bytes</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rwbs\">rwbs</a>[<a class=\"id\" href=\"#i\">i</a>++] = 'R';", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rwbs\">rwbs</a>[<a class=\"id\" href=\"#i\">i</a>++] = 'N';", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tc\">tc</a> &amp; <a class=\"id\" href=\"#BLK_TC_AHEAD\">BLK_TC_AHEAD</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rwbs\">rwbs</a>[<a class=\"id\" href=\"#i\">i</a>++] = 'A';", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tc\">tc</a> &amp; <a class=\"id\" href=\"#BLK_TC_BARRIER\">BLK_TC_BARRIER</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rwbs\">rwbs</a>[<a class=\"id\" href=\"#i\">i</a>++] = 'B';", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tc\">tc</a> &amp; <a class=\"id\" href=\"#BLK_TC_SYNC\">BLK_TC_SYNC</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rwbs\">rwbs</a>[<a class=\"id\" href=\"#i\">i</a>++] = 'S';", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tc\">tc</a> &amp; <a class=\"id\" href=\"#BLK_TC_META\">BLK_TC_META</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rwbs\">rwbs</a>[<a class=\"id\" href=\"#i\">i</a>++] = 'M';", 
"<a class=\"id\" href=\"#out\">out</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rwbs\">rwbs</a>[<a class=\"id\" href=\"#i\">i</a>] = '\\0';", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a>", 
"const struct <a class=\"id\" href=\"#blk_io_trace\">blk_io_trace</a> *<a class=\"id\" href=\"#te_blk_io_trace\">te_blk_io_trace</a>(const struct <a class=\"id\" href=\"#trace_entry\">trace_entry</a> *<a class=\"id\" href=\"#ent\">ent</a>)", 
"{", 
"<span class=\"ts\"/>return (const struct <a class=\"id\" href=\"#blk_io_trace\">blk_io_trace</a> *)<a class=\"id\" href=\"#ent\">ent</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> const void *<a class=\"id\" href=\"#pdu_start\">pdu_start</a>(const struct <a class=\"id\" href=\"#trace_entry\">trace_entry</a> *<a class=\"id\" href=\"#ent\">ent</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#te_blk_io_trace\">te_blk_io_trace</a>(<a class=\"id\" href=\"#ent\">ent</a>) + 1;", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#t_action\">t_action</a>(const struct <a class=\"id\" href=\"#trace_entry\">trace_entry</a> *<a class=\"id\" href=\"#ent\">ent</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#te_blk_io_trace\">te_blk_io_trace</a>(<a class=\"id\" href=\"#ent\">ent</a>)-><a class=\"id\" href=\"#action\">action</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#t_bytes\">t_bytes</a>(const struct <a class=\"id\" href=\"#trace_entry\">trace_entry</a> *<a class=\"id\" href=\"#ent\">ent</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#te_blk_io_trace\">te_blk_io_trace</a>(<a class=\"id\" href=\"#ent\">ent</a>)-><a class=\"id\" href=\"#bytes\">bytes</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#t_sec\">t_sec</a>(const struct <a class=\"id\" href=\"#trace_entry\">trace_entry</a> *<a class=\"id\" href=\"#ent\">ent</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#te_blk_io_trace\">te_blk_io_trace</a>(<a class=\"id\" href=\"#ent\">ent</a>)-><a class=\"id\" href=\"#bytes\">bytes</a> >> 9;", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> unsigned long long <a class=\"id\" href=\"#t_sector\">t_sector</a>(const struct <a class=\"id\" href=\"#trace_entry\">trace_entry</a> *<a class=\"id\" href=\"#ent\">ent</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#te_blk_io_trace\">te_blk_io_trace</a>(<a class=\"id\" href=\"#ent\">ent</a>)-><a class=\"id\" href=\"#sector\">sector</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> <a class=\"id\" href=\"#__u16\">__u16</a> <a class=\"id\" href=\"#t_error\">t_error</a>(const struct <a class=\"id\" href=\"#trace_entry\">trace_entry</a> *<a class=\"id\" href=\"#ent\">ent</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#te_blk_io_trace\">te_blk_io_trace</a>(<a class=\"id\" href=\"#ent\">ent</a>)-><a class=\"id\" href=\"#error\">error</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#__u64\">__u64</a> <a class=\"id\" href=\"#get_pdu_int\">get_pdu_int</a>(const struct <a class=\"id\" href=\"#trace_entry\">trace_entry</a> *<a class=\"id\" href=\"#ent\">ent</a>)", 
"{", 
"<span class=\"ts\"/>const <a class=\"id\" href=\"#__u64\">__u64</a> *<a class=\"id\" href=\"#val\">val</a> = <a class=\"id\" href=\"#pdu_start\">pdu_start</a>(<a class=\"id\" href=\"#ent\">ent</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#be64_to_cpu\">be64_to_cpu</a>(*<a class=\"id\" href=\"#val\">val</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#get_pdu_remap\">get_pdu_remap</a>(const struct <a class=\"id\" href=\"#trace_entry\">trace_entry</a> *<a class=\"id\" href=\"#ent\">ent</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  struct <a class=\"id\" href=\"#blk_io_trace_remap\">blk_io_trace_remap</a> *<a class=\"id\" href=\"#r\">r</a>)", 
"{", 
"<span class=\"ts\"/>const struct <a class=\"id\" href=\"#blk_io_trace_remap\">blk_io_trace_remap</a> *<a class=\"id\" href=\"#__r\">__r</a> = <a class=\"id\" href=\"#pdu_start\">pdu_start</a>(<a class=\"id\" href=\"#ent\">ent</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__u64\">__u64</a> <a class=\"id\" href=\"#sector_from\">sector_from</a> = <a class=\"id\" href=\"#__r\">__r</a>-><a class=\"id\" href=\"#sector_from\">sector_from</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#device_from\">device_from</a> = <a class=\"id\" href=\"#be32_to_cpu\">be32_to_cpu</a>(<a class=\"id\" href=\"#__r\">__r</a>-><a class=\"id\" href=\"#device_from\">device_from</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#device_to\">device_to</a>   = <a class=\"id\" href=\"#be32_to_cpu\">be32_to_cpu</a>(<a class=\"id\" href=\"#__r\">__r</a>-><a class=\"id\" href=\"#device_to\">device_to</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#sector_from\">sector_from</a> = <a class=\"id\" href=\"#be64_to_cpu\">be64_to_cpu</a>(<a class=\"id\" href=\"#sector_from\">sector_from</a>);", 
"}", 
"", 
"typedef int (<a class=\"id\" href=\"#blk_log_action_t\">blk_log_action_t</a>) (struct <a class=\"id\" href=\"#trace_iterator\">trace_iterator</a> *<a class=\"id\" href=\"#iter\">iter</a>, const char *<a class=\"id\" href=\"#act\">act</a>);", 
"", 
"static int <a class=\"id\" href=\"#blk_log_action_classic\">blk_log_action_classic</a>(struct <a class=\"id\" href=\"#trace_iterator\">trace_iterator</a> *<a class=\"id\" href=\"#iter\">iter</a>, const char *<a class=\"id\" href=\"#act\">act</a>)", 
"{", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#rwbs\">rwbs</a>[6];", 
"<span class=\"ts\"/>unsigned long long <a class=\"id\" href=\"#ts\">ts</a>  = <a class=\"id\" href=\"#iter\">iter</a>-><a class=\"id\" href=\"#ts\">ts</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#nsec_rem\">nsec_rem</a> = <a class=\"id\" href=\"#do_div\">do_div</a>(<a class=\"id\" href=\"#ts\">ts</a>, <a class=\"id\" href=\"#NSEC_PER_SEC\">NSEC_PER_SEC</a>);", 
"<span class=\"ts\"/>unsigned <a class=\"id\" href=\"#secs\">secs</a><span class=\"ts\"/>       = (unsigned long)<a class=\"id\" href=\"#ts\">ts</a>;", 
"<span class=\"ts\"/>const struct <a class=\"id\" href=\"#blk_io_trace\">blk_io_trace</a> *<a class=\"id\" href=\"#t\">t</a> = <a class=\"id\" href=\"#te_blk_io_trace\">te_blk_io_trace</a>(<a class=\"id\" href=\"#iter\">iter</a>-><a class=\"id\" href=\"#ent\">ent</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fill_rwbs\">fill_rwbs</a>(<a class=\"id\" href=\"#rwbs\">rwbs</a>, <a class=\"id\" href=\"#t\">t</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#trace_seq_printf\">trace_seq_printf</a>(&amp;<a class=\"id\" href=\"#iter\">iter</a>-><a class=\"id\" href=\"#seq\">seq</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"%3d,%-3d %2d %5d.%09lu %5u %2s %3s \",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#MAJOR\">MAJOR</a>(<a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#device\">device</a>), <a class=\"id\" href=\"#MINOR\">MINOR</a>(<a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#device\">device</a>), <a class=\"id\" href=\"#iter\">iter</a>-><a class=\"id\" href=\"#cpu\">cpu</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#secs\">secs</a>, <a class=\"id\" href=\"#nsec_rem\">nsec_rem</a>, <a class=\"id\" href=\"#iter\">iter</a>-><a class=\"id\" href=\"#ent\">ent</a>-><a class=\"id\" href=\"#pid\">pid</a>, <a class=\"id\" href=\"#act\">act</a>, <a class=\"id\" href=\"#rwbs\">rwbs</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#blk_log_action\">blk_log_action</a>(struct <a class=\"id\" href=\"#trace_iterator\">trace_iterator</a> *<a class=\"id\" href=\"#iter\">iter</a>, const char *<a class=\"id\" href=\"#act\">act</a>)", 
"{", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#rwbs\">rwbs</a>[6];", 
"<span class=\"ts\"/>const struct <a class=\"id\" href=\"#blk_io_trace\">blk_io_trace</a> *<a class=\"id\" href=\"#t\">t</a> = <a class=\"id\" href=\"#te_blk_io_trace\">te_blk_io_trace</a>(<a class=\"id\" href=\"#iter\">iter</a>-><a class=\"id\" href=\"#ent\">ent</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#fill_rwbs\">fill_rwbs</a>(<a class=\"id\" href=\"#rwbs\">rwbs</a>, <a class=\"id\" href=\"#t\">t</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#trace_seq_printf\">trace_seq_printf</a>(&amp;<a class=\"id\" href=\"#iter\">iter</a>-><a class=\"id\" href=\"#seq\">seq</a>, \"%3d,%-3d %2s %3s \",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#MAJOR\">MAJOR</a>(<a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#device\">device</a>), <a class=\"id\" href=\"#MINOR\">MINOR</a>(<a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#device\">device</a>), <a class=\"id\" href=\"#act\">act</a>, <a class=\"id\" href=\"#rwbs\">rwbs</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#blk_log_dump_pdu\">blk_log_dump_pdu</a>(struct <a class=\"id\" href=\"#trace_seq\">trace_seq</a> *<a class=\"id\" href=\"#s\">s</a>, const struct <a class=\"id\" href=\"#trace_entry\">trace_entry</a> *<a class=\"id\" href=\"#ent\">ent</a>)", 
"{", 
"<span class=\"ts\"/>const unsigned char *<a class=\"id\" href=\"#pdu_buf\">pdu_buf</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#pdu_len\">pdu_len</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#end\">end</a>, <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pdu_buf\">pdu_buf</a> = <a class=\"id\" href=\"#pdu_start\">pdu_start</a>(<a class=\"id\" href=\"#ent\">ent</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pdu_len\">pdu_len</a> = <a class=\"id\" href=\"#te_blk_io_trace\">te_blk_io_trace</a>(<a class=\"id\" href=\"#ent\">ent</a>)-><a class=\"id\" href=\"#pdu_len\">pdu_len</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#pdu_len\">pdu_len</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* find the last zero that needs to be printed */</span>", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#end\">end</a> = <a class=\"id\" href=\"#pdu_len\">pdu_len</a> - 1; <a class=\"id\" href=\"#end\">end</a> >= 0; <a class=\"id\" href=\"#end\">end</a>--)", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#pdu_buf\">pdu_buf</a>[<a class=\"id\" href=\"#end\">end</a>])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#end\">end</a>++;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#trace_seq_putc\">trace_seq_putc</a>(<a class=\"id\" href=\"#s\">s</a>, '('))", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#pdu_len\">pdu_len</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#trace_seq_printf\">trace_seq_printf</a>(<a class=\"id\" href=\"#s\">s</a>, \"%s%02x\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#i\">i</a> == 0 ? \"\" : \" \", <a class=\"id\" href=\"#pdu_buf\">pdu_buf</a>[<a class=\"id\" href=\"#i\">i</a>]);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * stop when the rest is just zeroes and indicate so</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * with a \"..\" appended</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#i\">i</a> == <a class=\"id\" href=\"#end\">end</a> && <a class=\"id\" href=\"#end\">end</a> != <a class=\"id\" href=\"#pdu_len\">pdu_len</a> - 1)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#trace_seq_puts\">trace_seq_puts</a>(<a class=\"id\" href=\"#s\">s</a>, \" ..) \");", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#trace_seq_puts\">trace_seq_puts</a>(<a class=\"id\" href=\"#s\">s</a>, \") \");", 
"}", 
"", 
"static int <a class=\"id\" href=\"#blk_log_generic\">blk_log_generic</a>(struct <a class=\"id\" href=\"#trace_seq\">trace_seq</a> *<a class=\"id\" href=\"#s\">s</a>, const struct <a class=\"id\" href=\"#trace_entry\">trace_entry</a> *<a class=\"id\" href=\"#ent\">ent</a>)", 
"{", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#cmd\">cmd</a>[<a class=\"id\" href=\"#TASK_COMM_LEN\">TASK_COMM_LEN</a>];", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#trace_find_cmdline\">trace_find_cmdline</a>(<a class=\"id\" href=\"#ent\">ent</a>-><a class=\"id\" href=\"#pid\">pid</a>, <a class=\"id\" href=\"#cmd\">cmd</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#t_action\">t_action</a>(<a class=\"id\" href=\"#ent\">ent</a>) &amp; <a class=\"id\" href=\"#BLK_TC_ACT\">BLK_TC_ACT</a>(<a class=\"id\" href=\"#BLK_TC_PC\">BLK_TC_PC</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#trace_seq_printf\">trace_seq_printf</a>(<a class=\"id\" href=\"#s\">s</a>, \"%u \", <a class=\"id\" href=\"#t_bytes\">t_bytes</a>(<a class=\"id\" href=\"#ent\">ent</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#blk_log_dump_pdu\">blk_log_dump_pdu</a>(<a class=\"id\" href=\"#s\">s</a>, <a class=\"id\" href=\"#ent\">ent</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#trace_seq_printf\">trace_seq_printf</a>(<a class=\"id\" href=\"#s\">s</a>, \"[%s]\\n\", <a class=\"id\" href=\"#cmd\">cmd</a>);", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#t_sec\">t_sec</a>(<a class=\"id\" href=\"#ent\">ent</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#trace_seq_printf\">trace_seq_printf</a>(<a class=\"id\" href=\"#s\">s</a>, \"%llu + %u [%s]\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t_sector\">t_sector</a>(<a class=\"id\" href=\"#ent\">ent</a>), <a class=\"id\" href=\"#t_sec\">t_sec</a>(<a class=\"id\" href=\"#ent\">ent</a>), <a class=\"id\" href=\"#cmd\">cmd</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#trace_seq_printf\">trace_seq_printf</a>(<a class=\"id\" href=\"#s\">s</a>, \"[%s]\\n\", <a class=\"id\" href=\"#cmd\">cmd</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static int <a class=\"id\" href=\"#blk_log_with_error\">blk_log_with_error</a>(struct <a class=\"id\" href=\"#trace_seq\">trace_seq</a> *<a class=\"id\" href=\"#s\">s</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      const struct <a class=\"id\" href=\"#trace_entry\">trace_entry</a> *<a class=\"id\" href=\"#ent\">ent</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#t_action\">t_action</a>(<a class=\"id\" href=\"#ent\">ent</a>) &amp; <a class=\"id\" href=\"#BLK_TC_ACT\">BLK_TC_ACT</a>(<a class=\"id\" href=\"#BLK_TC_PC\">BLK_TC_PC</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#blk_log_dump_pdu\">blk_log_dump_pdu</a>(<a class=\"id\" href=\"#s\">s</a>, <a class=\"id\" href=\"#ent\">ent</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#trace_seq_printf\">trace_seq_printf</a>(<a class=\"id\" href=\"#s\">s</a>, \"[%d]\\n\", <a class=\"id\" href=\"#t_error\">t_error</a>(<a class=\"id\" href=\"#ent\">ent</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#t_sec\">t_sec</a>(<a class=\"id\" href=\"#ent\">ent</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#trace_seq_printf\">trace_seq_printf</a>(<a class=\"id\" href=\"#s\">s</a>, \"%llu + %u [%d]\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t_sector\">t_sector</a>(<a class=\"id\" href=\"#ent\">ent</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t_sec\">t_sec</a>(<a class=\"id\" href=\"#ent\">ent</a>), <a class=\"id\" href=\"#t_error\">t_error</a>(<a class=\"id\" href=\"#ent\">ent</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#trace_seq_printf\">trace_seq_printf</a>(<a class=\"id\" href=\"#s\">s</a>, \"%llu [%d]\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t_sector\">t_sector</a>(<a class=\"id\" href=\"#ent\">ent</a>), <a class=\"id\" href=\"#t_error\">t_error</a>(<a class=\"id\" href=\"#ent\">ent</a>));", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static int <a class=\"id\" href=\"#blk_log_remap\">blk_log_remap</a>(struct <a class=\"id\" href=\"#trace_seq\">trace_seq</a> *<a class=\"id\" href=\"#s\">s</a>, const struct <a class=\"id\" href=\"#trace_entry\">trace_entry</a> *<a class=\"id\" href=\"#ent\">ent</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_io_trace_remap\">blk_io_trace_remap</a> <a class=\"id\" href=\"#r\">r</a> = { .<a class=\"id\" href=\"#device_from\">device_from</a> = 0, };", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#get_pdu_remap\">get_pdu_remap</a>(<a class=\"id\" href=\"#ent\">ent</a>, &amp;<a class=\"id\" href=\"#r\">r</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#trace_seq_printf\">trace_seq_printf</a>(<a class=\"id\" href=\"#s\">s</a>, \"%llu + %u <- (%d,%d) %llu\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#t_sector\">t_sector</a>(<a class=\"id\" href=\"#ent\">ent</a>), <a class=\"id\" href=\"#t_sec\">t_sec</a>(<a class=\"id\" href=\"#ent\">ent</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#MAJOR\">MAJOR</a>(<a class=\"id\" href=\"#r\">r</a>.<a class=\"id\" href=\"#device_from\">device_from</a>), <a class=\"id\" href=\"#MINOR\">MINOR</a>(<a class=\"id\" href=\"#r\">r</a>.<a class=\"id\" href=\"#device_from\">device_from</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(unsigned long long)<a class=\"id\" href=\"#r\">r</a>.<a class=\"id\" href=\"#sector_from\">sector_from</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#blk_log_plug\">blk_log_plug</a>(struct <a class=\"id\" href=\"#trace_seq\">trace_seq</a> *<a class=\"id\" href=\"#s\">s</a>, const struct <a class=\"id\" href=\"#trace_entry\">trace_entry</a> *<a class=\"id\" href=\"#ent\">ent</a>)", 
"{", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#cmd\">cmd</a>[<a class=\"id\" href=\"#TASK_COMM_LEN\">TASK_COMM_LEN</a>];", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#trace_find_cmdline\">trace_find_cmdline</a>(<a class=\"id\" href=\"#ent\">ent</a>-><a class=\"id\" href=\"#pid\">pid</a>, <a class=\"id\" href=\"#cmd\">cmd</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#trace_seq_printf\">trace_seq_printf</a>(<a class=\"id\" href=\"#s\">s</a>, \"[%s]\\n\", <a class=\"id\" href=\"#cmd\">cmd</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#blk_log_unplug\">blk_log_unplug</a>(struct <a class=\"id\" href=\"#trace_seq\">trace_seq</a> *<a class=\"id\" href=\"#s\">s</a>, const struct <a class=\"id\" href=\"#trace_entry\">trace_entry</a> *<a class=\"id\" href=\"#ent\">ent</a>)", 
"{", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#cmd\">cmd</a>[<a class=\"id\" href=\"#TASK_COMM_LEN\">TASK_COMM_LEN</a>];", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#trace_find_cmdline\">trace_find_cmdline</a>(<a class=\"id\" href=\"#ent\">ent</a>-><a class=\"id\" href=\"#pid\">pid</a>, <a class=\"id\" href=\"#cmd\">cmd</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#trace_seq_printf\">trace_seq_printf</a>(<a class=\"id\" href=\"#s\">s</a>, \"[%s] %llu\\n\", <a class=\"id\" href=\"#cmd\">cmd</a>, <a class=\"id\" href=\"#get_pdu_int\">get_pdu_int</a>(<a class=\"id\" href=\"#ent\">ent</a>));", 
"}", 
"", 
"static int <a class=\"id\" href=\"#blk_log_split\">blk_log_split</a>(struct <a class=\"id\" href=\"#trace_seq\">trace_seq</a> *<a class=\"id\" href=\"#s\">s</a>, const struct <a class=\"id\" href=\"#trace_entry\">trace_entry</a> *<a class=\"id\" href=\"#ent\">ent</a>)", 
"{", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#cmd\">cmd</a>[<a class=\"id\" href=\"#TASK_COMM_LEN\">TASK_COMM_LEN</a>];", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#trace_find_cmdline\">trace_find_cmdline</a>(<a class=\"id\" href=\"#ent\">ent</a>-><a class=\"id\" href=\"#pid\">pid</a>, <a class=\"id\" href=\"#cmd\">cmd</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#trace_seq_printf\">trace_seq_printf</a>(<a class=\"id\" href=\"#s\">s</a>, \"%llu / %llu [%s]\\n\", <a class=\"id\" href=\"#t_sector\">t_sector</a>(<a class=\"id\" href=\"#ent\">ent</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#get_pdu_int\">get_pdu_int</a>(<a class=\"id\" href=\"#ent\">ent</a>), <a class=\"id\" href=\"#cmd\">cmd</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#blk_log_msg\">blk_log_msg</a>(struct <a class=\"id\" href=\"#trace_seq\">trace_seq</a> *<a class=\"id\" href=\"#s\">s</a>, const struct <a class=\"id\" href=\"#trace_entry\">trace_entry</a> *<a class=\"id\" href=\"#ent\">ent</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>const struct <a class=\"id\" href=\"#blk_io_trace\">blk_io_trace</a> *<a class=\"id\" href=\"#t\">t</a> = <a class=\"id\" href=\"#te_blk_io_trace\">te_blk_io_trace</a>(<a class=\"id\" href=\"#ent\">ent</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#trace_seq_putmem\">trace_seq_putmem</a>(<a class=\"id\" href=\"#s\">s</a>, <a class=\"id\" href=\"#t\">t</a> + 1, <a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#pdu_len\">pdu_len</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#trace_seq_putc\">trace_seq_putc</a>(<a class=\"id\" href=\"#s\">s</a>, '\\n');", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * struct tracer operations</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static void <a class=\"id\" href=\"#blk_tracer_print_header\">blk_tracer_print_header</a>(struct <a class=\"id\" href=\"#seq_file\">seq_file</a> *<a class=\"id\" href=\"#m\">m</a>)", 
"{", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#blk_tracer_flags\">blk_tracer_flags</a>.<a class=\"id\" href=\"#val\">val</a> &amp; <a class=\"id\" href=\"#TRACE_BLK_OPT_CLASSIC\">TRACE_BLK_OPT_CLASSIC</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#seq_puts\">seq_puts</a>(<a class=\"id\" href=\"#m\">m</a>, \"# DEV   CPU TIMESTAMP     PID ACT FLG\\n\"", 
"<span class=\"ts\"/><span class=\"ts\"/>    \"#  |     |     |           |   |   |\\n\");", 
"}", 
"", 
"static void <a class=\"id\" href=\"#blk_tracer_start\">blk_tracer_start</a>(struct <a class=\"id\" href=\"#trace_array\">trace_array</a> *<a class=\"id\" href=\"#tr\">tr</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_tracer_enabled\">blk_tracer_enabled</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#blk_tracer_init\">blk_tracer_init</a>(struct <a class=\"id\" href=\"#trace_array\">trace_array</a> *<a class=\"id\" href=\"#tr\">tr</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_tr\">blk_tr</a> = <a class=\"id\" href=\"#tr\">tr</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_tracer_start\">blk_tracer_start</a>(<a class=\"id\" href=\"#tr\">tr</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#blk_tracer_stop\">blk_tracer_stop</a>(struct <a class=\"id\" href=\"#trace_array\">trace_array</a> *<a class=\"id\" href=\"#tr\">tr</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_tracer_enabled\">blk_tracer_enabled</a> = <a class=\"id\" href=\"#false\">false</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#blk_tracer_reset\">blk_tracer_reset</a>(struct <a class=\"id\" href=\"#trace_array\">trace_array</a> *<a class=\"id\" href=\"#tr\">tr</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_tracer_stop\">blk_tracer_stop</a>(<a class=\"id\" href=\"#tr\">tr</a>);", 
"}", 
"", 
"static const struct {", 
"<span class=\"ts\"/>const char *<a class=\"id\" href=\"#act\">act</a>[2];", 
"<span class=\"ts\"/>int<span class=\"ts\"/>   (*<a class=\"id\" href=\"#print\">print</a>)(struct <a class=\"id\" href=\"#trace_seq\">trace_seq</a> *<a class=\"id\" href=\"#s\">s</a>, const struct <a class=\"id\" href=\"#trace_entry\">trace_entry</a> *<a class=\"id\" href=\"#ent\">ent</a>);", 
"} <a class=\"id\" href=\"#what2act\">what2act</a>[] = {", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#__BLK_TA_QUEUE\">__BLK_TA_QUEUE</a>]<span class=\"ts\"/>= {{  \"Q\", \"queue\" },<span class=\"ts\"/>   <a class=\"id\" href=\"#blk_log_generic\">blk_log_generic</a> },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#__BLK_TA_BACKMERGE\">__BLK_TA_BACKMERGE</a>]<span class=\"ts\"/>= {{  \"M\", \"backmerge\" },  <a class=\"id\" href=\"#blk_log_generic\">blk_log_generic</a> },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#__BLK_TA_FRONTMERGE\">__BLK_TA_FRONTMERGE</a>]<span class=\"ts\"/>= {{  \"F\", \"frontmerge\" }, <a class=\"id\" href=\"#blk_log_generic\">blk_log_generic</a> },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#__BLK_TA_GETRQ\">__BLK_TA_GETRQ</a>]<span class=\"ts\"/>= {{  \"G\", \"getrq\" },<span class=\"ts\"/>   <a class=\"id\" href=\"#blk_log_generic\">blk_log_generic</a> },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#__BLK_TA_SLEEPRQ\">__BLK_TA_SLEEPRQ</a>]<span class=\"ts\"/>= {{  \"S\", \"sleeprq\" },<span class=\"ts\"/>   <a class=\"id\" href=\"#blk_log_generic\">blk_log_generic</a> },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#__BLK_TA_REQUEUE\">__BLK_TA_REQUEUE</a>]<span class=\"ts\"/>= {{  \"R\", \"requeue\" },<span class=\"ts\"/>   <a class=\"id\" href=\"#blk_log_with_error\">blk_log_with_error</a> },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#__BLK_TA_ISSUE\">__BLK_TA_ISSUE</a>]<span class=\"ts\"/>= {{  \"D\", \"issue\" },<span class=\"ts\"/>   <a class=\"id\" href=\"#blk_log_generic\">blk_log_generic</a> },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#__BLK_TA_COMPLETE\">__BLK_TA_COMPLETE</a>]<span class=\"ts\"/>= {{  \"C\", \"complete\" },   <a class=\"id\" href=\"#blk_log_with_error\">blk_log_with_error</a> },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#__BLK_TA_PLUG\">__BLK_TA_PLUG</a>]<span class=\"ts\"/><span class=\"ts\"/>= {{  \"P\", \"plug\" },<span class=\"ts\"/>   <a class=\"id\" href=\"#blk_log_plug\">blk_log_plug</a> },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#__BLK_TA_UNPLUG_IO\">__BLK_TA_UNPLUG_IO</a>]<span class=\"ts\"/>= {{  \"U\", \"unplug_io\" },  <a class=\"id\" href=\"#blk_log_unplug\">blk_log_unplug</a> },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#__BLK_TA_UNPLUG_TIMER\">__BLK_TA_UNPLUG_TIMER</a>]<span class=\"ts\"/>= {{ \"UT\", \"unplug_timer\" }, <a class=\"id\" href=\"#blk_log_unplug\">blk_log_unplug</a> },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#__BLK_TA_INSERT\">__BLK_TA_INSERT</a>]<span class=\"ts\"/>= {{  \"I\", \"insert\" },<span class=\"ts\"/>   <a class=\"id\" href=\"#blk_log_generic\">blk_log_generic</a> },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#__BLK_TA_SPLIT\">__BLK_TA_SPLIT</a>]<span class=\"ts\"/>= {{  \"X\", \"split\" },<span class=\"ts\"/>   <a class=\"id\" href=\"#blk_log_split\">blk_log_split</a> },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#__BLK_TA_BOUNCE\">__BLK_TA_BOUNCE</a>]<span class=\"ts\"/>= {{  \"B\", \"bounce\" },<span class=\"ts\"/>   <a class=\"id\" href=\"#blk_log_generic\">blk_log_generic</a> },", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#__BLK_TA_REMAP\">__BLK_TA_REMAP</a>]<span class=\"ts\"/>= {{  \"A\", \"remap\" },<span class=\"ts\"/>   <a class=\"id\" href=\"#blk_log_remap\">blk_log_remap</a> },", 
"};", 
"", 
"static enum <a class=\"id\" href=\"#print_line_t\">print_line_t</a> <a class=\"id\" href=\"#print_one_line\">print_one_line</a>(struct <a class=\"id\" href=\"#trace_iterator\">trace_iterator</a> *<a class=\"id\" href=\"#iter\">iter</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#classic\">classic</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#trace_seq\">trace_seq</a> *<a class=\"id\" href=\"#s\">s</a> = &amp;<a class=\"id\" href=\"#iter\">iter</a>-><a class=\"id\" href=\"#seq\">seq</a>;", 
"<span class=\"ts\"/>const struct <a class=\"id\" href=\"#blk_io_trace\">blk_io_trace</a> *<a class=\"id\" href=\"#t\">t</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#what\">what</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#long_act\">long_act</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_log_action_t\">blk_log_action_t</a> *<a class=\"id\" href=\"#log_action\">log_action</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#t\">t</a><span class=\"ts\"/>   = <a class=\"id\" href=\"#te_blk_io_trace\">te_blk_io_trace</a>(<a class=\"id\" href=\"#iter\">iter</a>-><a class=\"id\" href=\"#ent\">ent</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#what\">what</a><span class=\"ts\"/>   = <a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#action\">action</a> &amp; ((1 << <a class=\"id\" href=\"#BLK_TC_SHIFT\">BLK_TC_SHIFT</a>) - 1);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#long_act\">long_act</a>   = !!(<a class=\"id\" href=\"#trace_flags\">trace_flags</a> &amp; <a class=\"id\" href=\"#TRACE_ITER_VERBOSE\">TRACE_ITER_VERBOSE</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#log_action\">log_action</a> = <a class=\"id\" href=\"#classic\">classic</a> ? &amp;<a class=\"id\" href=\"#blk_log_action_classic\">blk_log_action_classic</a> : &amp;<a class=\"id\" href=\"#blk_log_action\">blk_log_action</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#action\">action</a> == <a class=\"id\" href=\"#BLK_TN_MESSAGE\">BLK_TN_MESSAGE</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#log_action\">log_action</a>(<a class=\"id\" href=\"#iter\">iter</a>, <a class=\"id\" href=\"#long_act\">long_act</a> ? \"message\" : \"m\");", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#blk_log_msg\">blk_log_msg</a>(<a class=\"id\" href=\"#s\">s</a>, <a class=\"id\" href=\"#iter\">iter</a>-><a class=\"id\" href=\"#ent\">ent</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(<a class=\"id\" href=\"#what\">what</a> == 0 || <a class=\"id\" href=\"#what\">what</a> >= <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#what2act\">what2act</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#trace_seq_printf\">trace_seq_printf</a>(<a class=\"id\" href=\"#s\">s</a>, \"Unknown action %x\\n\", <a class=\"id\" href=\"#what\">what</a>);", 
"<span class=\"ts\"/>else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#log_action\">log_action</a>(<a class=\"id\" href=\"#iter\">iter</a>, <a class=\"id\" href=\"#what2act\">what2act</a>[<a class=\"id\" href=\"#what\">what</a>].<a class=\"id\" href=\"#act\">act</a>[<a class=\"id\" href=\"#long_act\">long_act</a>]);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#what2act\">what2act</a>[<a class=\"id\" href=\"#what\">what</a>].<a class=\"id\" href=\"#print\">print</a>(<a class=\"id\" href=\"#s\">s</a>, <a class=\"id\" href=\"#iter\">iter</a>-><a class=\"id\" href=\"#ent\">ent</a>);", 
"<span class=\"ts\"/>}", 
"<a class=\"id\" href=\"#out\">out</a>:", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a> ? <a class=\"id\" href=\"#TRACE_TYPE_HANDLED\">TRACE_TYPE_HANDLED</a> : <a class=\"id\" href=\"#TRACE_TYPE_PARTIAL_LINE\">TRACE_TYPE_PARTIAL_LINE</a>;", 
"}", 
"", 
"static enum <a class=\"id\" href=\"#print_line_t\">print_line_t</a> <a class=\"id\" href=\"#blk_trace_event_print\">blk_trace_event_print</a>(struct <a class=\"id\" href=\"#trace_iterator\">trace_iterator</a> *<a class=\"id\" href=\"#iter\">iter</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       int <a class=\"id\" href=\"#flags\">flags</a>, struct <a class=\"id\" href=\"#trace_event\">trace_event</a> *<a class=\"id\" href=\"#event\">event</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#print_one_line\">print_one_line</a>(<a class=\"id\" href=\"#iter\">iter</a>, <a class=\"id\" href=\"#false\">false</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#blk_trace_synthesize_old_trace\">blk_trace_synthesize_old_trace</a>(struct <a class=\"id\" href=\"#trace_iterator\">trace_iterator</a> *<a class=\"id\" href=\"#iter\">iter</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#trace_seq\">trace_seq</a> *<a class=\"id\" href=\"#s\">s</a> = &amp;<a class=\"id\" href=\"#iter\">iter</a>-><a class=\"id\" href=\"#seq\">seq</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_io_trace\">blk_io_trace</a> *<a class=\"id\" href=\"#t\">t</a> = (struct <a class=\"id\" href=\"#blk_io_trace\">blk_io_trace</a> *)<a class=\"id\" href=\"#iter\">iter</a>-><a class=\"id\" href=\"#ent\">ent</a>;", 
"<span class=\"ts\"/>const int <a class=\"id\" href=\"#offset\">offset</a> = <a class=\"id\" href=\"#offsetof\">offsetof</a>(struct <a class=\"id\" href=\"#blk_io_trace\">blk_io_trace</a>, <a class=\"id\" href=\"#sector\">sector</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_io_trace\">blk_io_trace</a> <a class=\"id\" href=\"#old\">old</a> = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#magic\">magic</a><span class=\"ts\"/>  = <a class=\"id\" href=\"#BLK_IO_TRACE_MAGIC\">BLK_IO_TRACE_MAGIC</a> | <a class=\"id\" href=\"#BLK_IO_TRACE_VERSION\">BLK_IO_TRACE_VERSION</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#time\">time</a>     = <a class=\"id\" href=\"#iter\">iter</a>-><a class=\"id\" href=\"#ts\">ts</a>,", 
"<span class=\"ts\"/>};", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#trace_seq_putmem\">trace_seq_putmem</a>(<a class=\"id\" href=\"#s\">s</a>, &amp;<a class=\"id\" href=\"#old\">old</a>, <a class=\"id\" href=\"#offset\">offset</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#trace_seq_putmem\">trace_seq_putmem</a>(<a class=\"id\" href=\"#s\">s</a>, &amp;<a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#sector\">sector</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>sizeof(<a class=\"id\" href=\"#old\">old</a>) - <a class=\"id\" href=\"#offset\">offset</a> + <a class=\"id\" href=\"#t\">t</a>-><a class=\"id\" href=\"#pdu_len\">pdu_len</a>);", 
"}", 
"", 
"static enum <a class=\"id\" href=\"#print_line_t\">print_line_t</a>", 
"<a class=\"id\" href=\"#blk_trace_event_print_binary\">blk_trace_event_print_binary</a>(struct <a class=\"id\" href=\"#trace_iterator\">trace_iterator</a> *<a class=\"id\" href=\"#iter\">iter</a>, int <a class=\"id\" href=\"#flags\">flags</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     struct <a class=\"id\" href=\"#trace_event\">trace_event</a> *<a class=\"id\" href=\"#event\">event</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#blk_trace_synthesize_old_trace\">blk_trace_synthesize_old_trace</a>(<a class=\"id\" href=\"#iter\">iter</a>) ?", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#TRACE_TYPE_HANDLED\">TRACE_TYPE_HANDLED</a> : <a class=\"id\" href=\"#TRACE_TYPE_PARTIAL_LINE\">TRACE_TYPE_PARTIAL_LINE</a>;", 
"}", 
"", 
"static enum <a class=\"id\" href=\"#print_line_t\">print_line_t</a> <a class=\"id\" href=\"#blk_tracer_print_line\">blk_tracer_print_line</a>(struct <a class=\"id\" href=\"#trace_iterator\">trace_iterator</a> *<a class=\"id\" href=\"#iter\">iter</a>)", 
"{", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#blk_tracer_flags\">blk_tracer_flags</a>.<a class=\"id\" href=\"#val\">val</a> &amp; <a class=\"id\" href=\"#TRACE_BLK_OPT_CLASSIC\">TRACE_BLK_OPT_CLASSIC</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#TRACE_TYPE_UNHANDLED\">TRACE_TYPE_UNHANDLED</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#print_one_line\">print_one_line</a>(<a class=\"id\" href=\"#iter\">iter</a>, <a class=\"id\" href=\"#true\">true</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#blk_tracer_set_flag\">blk_tracer_set_flag</a>(<a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#old_flags\">old_flags</a>, <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#bit\">bit</a>, int <a class=\"id\" href=\"#set\">set</a>)", 
"{", 
"<span class=\"ts\"/><span class=\"comment\">/* don't output context-info for blk_classic output */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#bit\">bit</a> == <a class=\"id\" href=\"#TRACE_BLK_OPT_CLASSIC\">TRACE_BLK_OPT_CLASSIC</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#set\">set</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#trace_flags\">trace_flags</a> &= ~<a class=\"id\" href=\"#TRACE_ITER_CONTEXT_INFO\">TRACE_ITER_CONTEXT_INFO</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#trace_flags\">trace_flags</a> |= <a class=\"id\" href=\"#TRACE_ITER_CONTEXT_INFO\">TRACE_ITER_CONTEXT_INFO</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#tracer\">tracer</a> <a class=\"id\" href=\"#blk_tracer\">blk_tracer</a> <a class=\"id\" href=\"#__read_mostly\">__read_mostly</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a><span class=\"ts\"/><span class=\"ts\"/>= \"blk\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#init\">init</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#blk_tracer_init\">blk_tracer_init</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#reset\">reset</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#blk_tracer_reset\">blk_tracer_reset</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#start\">start</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#blk_tracer_start\">blk_tracer_start</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#stop\">stop</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#blk_tracer_stop\">blk_tracer_stop</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#print_header\">print_header</a><span class=\"ts\"/>= <a class=\"id\" href=\"#blk_tracer_print_header\">blk_tracer_print_header</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#print_line\">print_line</a><span class=\"ts\"/>= <a class=\"id\" href=\"#blk_tracer_print_line\">blk_tracer_print_line</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#flags\">flags</a><span class=\"ts\"/><span class=\"ts\"/>= &amp;<a class=\"id\" href=\"#blk_tracer_flags\">blk_tracer_flags</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#set_flag\">set_flag</a><span class=\"ts\"/>= <a class=\"id\" href=\"#blk_tracer_set_flag\">blk_tracer_set_flag</a>,", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#trace_event_functions\">trace_event_functions</a> <a class=\"id\" href=\"#trace_blk_event_funcs\">trace_blk_event_funcs</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#trace\">trace</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#blk_trace_event_print\">blk_trace_event_print</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#binary\">binary</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#blk_trace_event_print_binary\">blk_trace_event_print_binary</a>,", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#trace_event\">trace_event</a> <a class=\"id\" href=\"#trace_blk_event\">trace_blk_event</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#type\">type</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#TRACE_BLK\">TRACE_BLK</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#funcs\">funcs</a><span class=\"ts\"/><span class=\"ts\"/>= &amp;<a class=\"id\" href=\"#trace_blk_event_funcs\">trace_blk_event_funcs</a>,", 
"};", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#init_blk_tracer\">init_blk_tracer</a>(void)", 
"{", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#register_ftrace_event\">register_ftrace_event</a>(&amp;<a class=\"id\" href=\"#trace_blk_event\">trace_blk_event</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_warning\">pr_warning</a>(\"Warning: could not register block events\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#register_tracer\">register_tracer</a>(&amp;<a class=\"id\" href=\"#blk_tracer\">blk_tracer</a>) != 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_warning\">pr_warning</a>(\"Warning: could not register the block tracer\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#unregister_ftrace_event\">unregister_ftrace_event</a>(&amp;<a class=\"id\" href=\"#trace_blk_event\">trace_blk_event</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<a class=\"id\" href=\"#device_initcall\">device_initcall</a>(<a class=\"id\" href=\"#init_blk_tracer\">init_blk_tracer</a>);", 
"", 
"static int <a class=\"id\" href=\"#blk_trace_remove_queue\">blk_trace_remove_queue</a>(struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#bt\">bt</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a> = <a class=\"id\" href=\"#xchg\">xchg</a>(&amp;<a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#bt\">bt</a> == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atomic_dec_and_test\">atomic_dec_and_test</a>(&amp;<a class=\"id\" href=\"#blk_probes_ref\">blk_probes_ref</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blk_unregister_tracepoints\">blk_unregister_tracepoints</a>();", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_trace_free\">blk_trace_free</a>(<a class=\"id\" href=\"#bt\">bt</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Setup everything required to start tracing</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#blk_trace_setup_queue\">blk_trace_setup_queue</a>(struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> struct <a class=\"id\" href=\"#block_device\">block_device</a> *<a class=\"id\" href=\"#bdev\">bdev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#blk_trace\">blk_trace</a> *<a class=\"id\" href=\"#old_bt\">old_bt</a>, *<a class=\"id\" href=\"#bt\">bt</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof(*<a class=\"id\" href=\"#bt\">bt</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#bt\">bt</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#msg_data\">msg_data</a> = <a class=\"id\" href=\"#__alloc_percpu\">__alloc_percpu</a>(<a class=\"id\" href=\"#BLK_TN_MAX_MSG\">BLK_TN_MAX_MSG</a>, <a class=\"id\" href=\"#__alignof__\">__alignof__</a>(char));", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#msg_data\">msg_data</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#free_bt\">free_bt</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#bdev\">bdev</a>-><a class=\"id\" href=\"#bd_dev\">bd_dev</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bt\">bt</a>-><a class=\"id\" href=\"#act_mask\">act_mask</a> = (<a class=\"id\" href=\"#u16\">u16</a>)-1;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_trace_setup_lba\">blk_trace_setup_lba</a>(<a class=\"id\" href=\"#bt\">bt</a>, <a class=\"id\" href=\"#bdev\">bdev</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#old_bt\">old_bt</a> = <a class=\"id\" href=\"#xchg\">xchg</a>(&amp;<a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>, <a class=\"id\" href=\"#bt\">bt</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#old_bt\">old_bt</a> != <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>(void)<a class=\"id\" href=\"#xchg\">xchg</a>(&amp;<a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>, <a class=\"id\" href=\"#old_bt\">old_bt</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EBUSY\">EBUSY</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#free_bt\">free_bt</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atomic_inc_return\">atomic_inc_return</a>(&amp;<a class=\"id\" href=\"#blk_probes_ref\">blk_probes_ref</a>) == 1)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#blk_register_tracepoints\">blk_register_tracepoints</a>();", 
"<span class=\"ts\"/>return 0;", 
"", 
"<a class=\"id\" href=\"#free_bt\">free_bt</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_trace_free\">blk_trace_free</a>(<a class=\"id\" href=\"#bt\">bt</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * sysfs interface to enable and configure tracing</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#sysfs_blk_trace_attr_show\">sysfs_blk_trace_attr_show</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> char *<a class=\"id\" href=\"#buf\">buf</a>);", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#sysfs_blk_trace_attr_store\">sysfs_blk_trace_attr_store</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  const char *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>);", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#BLK_TRACE_DEVICE_ATTR\">BLK_TRACE_DEVICE_ATTR</a>(<a class=\"id\" href=\"#_name\">_name</a>) \\", 
"<span class=\"ts\"/><a class=\"id\" href=\"#DEVICE_ATTR\">DEVICE_ATTR</a>(<a class=\"id\" href=\"#_name\">_name</a>, <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a> | <a class=\"id\" href=\"#S_IWUSR\">S_IWUSR</a>, \\", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#sysfs_blk_trace_attr_show\">sysfs_blk_trace_attr_show</a>, \\", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#sysfs_blk_trace_attr_store\">sysfs_blk_trace_attr_store</a>)", 
"", 
"static <a class=\"id\" href=\"#BLK_TRACE_DEVICE_ATTR\">BLK_TRACE_DEVICE_ATTR</a>(<a class=\"id\" href=\"#enable\">enable</a>);", 
"static <a class=\"id\" href=\"#BLK_TRACE_DEVICE_ATTR\">BLK_TRACE_DEVICE_ATTR</a>(<a class=\"id\" href=\"#act_mask\">act_mask</a>);", 
"static <a class=\"id\" href=\"#BLK_TRACE_DEVICE_ATTR\">BLK_TRACE_DEVICE_ATTR</a>(<a class=\"id\" href=\"#pid\">pid</a>);", 
"static <a class=\"id\" href=\"#BLK_TRACE_DEVICE_ATTR\">BLK_TRACE_DEVICE_ATTR</a>(<a class=\"id\" href=\"#start_lba\">start_lba</a>);", 
"static <a class=\"id\" href=\"#BLK_TRACE_DEVICE_ATTR\">BLK_TRACE_DEVICE_ATTR</a>(<a class=\"id\" href=\"#end_lba\">end_lba</a>);", 
"", 
"static struct <a class=\"id\" href=\"#attribute\">attribute</a> *<a class=\"id\" href=\"#blk_trace_attrs\">blk_trace_attrs</a>[] = {", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_enable\">dev_attr_enable</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_act_mask\">dev_attr_act_mask</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_pid\">dev_attr_pid</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_start_lba\">dev_attr_start_lba</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_end_lba\">dev_attr_end_lba</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#NULL\">NULL</a>", 
"};", 
"", 
"struct <a class=\"id\" href=\"#attribute_group\">attribute_group</a> <a class=\"id\" href=\"#blk_trace_attr_group\">blk_trace_attr_group</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a>  = \"trace\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#attrs\">attrs</a> = <a class=\"id\" href=\"#blk_trace_attrs\">blk_trace_attrs</a>,", 
"};", 
"", 
"static const struct {", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#mask\">mask</a>;", 
"<span class=\"ts\"/>const char *<a class=\"id\" href=\"#str\">str</a>;", 
"} <a class=\"id\" href=\"#mask_maps\">mask_maps</a>[] = {", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#BLK_TC_READ\">BLK_TC_READ</a>,<span class=\"ts\"/><span class=\"ts\"/>\"read\"<span class=\"ts\"/><span class=\"ts\"/>},", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#BLK_TC_WRITE\">BLK_TC_WRITE</a>,<span class=\"ts\"/><span class=\"ts\"/>\"write\"<span class=\"ts\"/><span class=\"ts\"/>},", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#BLK_TC_BARRIER\">BLK_TC_BARRIER</a>,<span class=\"ts\"/>\"barrier\"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#BLK_TC_SYNC\">BLK_TC_SYNC</a>,<span class=\"ts\"/><span class=\"ts\"/>\"sync\"<span class=\"ts\"/><span class=\"ts\"/>},", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#BLK_TC_QUEUE\">BLK_TC_QUEUE</a>,<span class=\"ts\"/><span class=\"ts\"/>\"queue\"<span class=\"ts\"/><span class=\"ts\"/>},", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#BLK_TC_REQUEUE\">BLK_TC_REQUEUE</a>,<span class=\"ts\"/>\"requeue\"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#BLK_TC_ISSUE\">BLK_TC_ISSUE</a>,<span class=\"ts\"/><span class=\"ts\"/>\"issue\"<span class=\"ts\"/><span class=\"ts\"/>},", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#BLK_TC_COMPLETE\">BLK_TC_COMPLETE</a>,<span class=\"ts\"/>\"complete\"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#BLK_TC_FS\">BLK_TC_FS</a>,<span class=\"ts\"/><span class=\"ts\"/>\"fs\"<span class=\"ts\"/><span class=\"ts\"/>},", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#BLK_TC_PC\">BLK_TC_PC</a>,<span class=\"ts\"/><span class=\"ts\"/>\"pc\"<span class=\"ts\"/><span class=\"ts\"/>},", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#BLK_TC_AHEAD\">BLK_TC_AHEAD</a>,<span class=\"ts\"/><span class=\"ts\"/>\"ahead\"<span class=\"ts\"/><span class=\"ts\"/>},", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#BLK_TC_META\">BLK_TC_META</a>,<span class=\"ts\"/><span class=\"ts\"/>\"meta\"<span class=\"ts\"/><span class=\"ts\"/>},", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#BLK_TC_DISCARD\">BLK_TC_DISCARD</a>,<span class=\"ts\"/>\"discard\"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#BLK_TC_DRV_DATA\">BLK_TC_DRV_DATA</a>,<span class=\"ts\"/>\"drv_data\"<span class=\"ts\"/>},", 
"};", 
"", 
"static int <a class=\"id\" href=\"#blk_trace_str2mask\">blk_trace_str2mask</a>(const char *<a class=\"id\" href=\"#str\">str</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#mask\">mask</a> = 0;", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#buf\">buf</a>, *<a class=\"id\" href=\"#s\">s</a>, *<a class=\"id\" href=\"#token\">token</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#buf\">buf</a> = <a class=\"id\" href=\"#kstrdup\">kstrdup</a>(<a class=\"id\" href=\"#str\">str</a>, <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#buf\">buf</a> == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#s\">s</a> = <a class=\"id\" href=\"#strstrip\">strstrip</a>(<a class=\"id\" href=\"#buf\">buf</a>);", 
"", 
"<span class=\"ts\"/>while (1) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#token\">token</a> = <a class=\"id\" href=\"#strsep\">strsep</a>(&amp;<a class=\"id\" href=\"#s\">s</a>, \",\");", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#token\">token</a> == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (*<a class=\"id\" href=\"#token\">token</a> == '\\0')", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#mask_maps\">mask_maps</a>); <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#strcasecmp\">strcasecmp</a>(<a class=\"id\" href=\"#token\">token</a>, <a class=\"id\" href=\"#mask_maps\">mask_maps</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#str\">str</a>) == 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mask\">mask</a> |= <a class=\"id\" href=\"#mask_maps\">mask_maps</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#mask\">mask</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#i\">i</a> == <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#mask_maps\">mask_maps</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mask\">mask</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#buf\">buf</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#mask\">mask</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#blk_trace_mask2str\">blk_trace_mask2str</a>(char *<a class=\"id\" href=\"#buf\">buf</a>, int <a class=\"id\" href=\"#mask\">mask</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#p\">p</a> = <a class=\"id\" href=\"#buf\">buf</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#mask_maps\">mask_maps</a>); <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#mask\">mask</a> &amp; <a class=\"id\" href=\"#mask_maps\">mask_maps</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#mask\">mask</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a> += <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#p\">p</a>, \"%s%s\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    (<a class=\"id\" href=\"#p\">p</a> == <a class=\"id\" href=\"#buf\">buf</a>) ? \"\" : \",\", <a class=\"id\" href=\"#mask_maps\">mask_maps</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#str\">str</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>*<a class=\"id\" href=\"#p\">p</a>++ = '\\n';", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#p\">p</a> - <a class=\"id\" href=\"#buf\">buf</a>;", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#blk_trace_get_queue\">blk_trace_get_queue</a>(struct <a class=\"id\" href=\"#block_device\">block_device</a> *<a class=\"id\" href=\"#bdev\">bdev</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#bdev\">bdev</a>-><a class=\"id\" href=\"#bd_disk\">bd_disk</a> == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#bdev_get_queue\">bdev_get_queue</a>(<a class=\"id\" href=\"#bdev\">bdev</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#sysfs_blk_trace_attr_show\">sysfs_blk_trace_attr_show</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#hd_struct\">hd_struct</a> *<a class=\"id\" href=\"#p\">p</a> = <a class=\"id\" href=\"#dev_to_part\">dev_to_part</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#block_device\">block_device</a> *<a class=\"id\" href=\"#bdev\">bdev</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#ENXIO\">ENXIO</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#lock_kernel\">lock_kernel</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bdev\">bdev</a> = <a class=\"id\" href=\"#bdget\">bdget</a>(<a class=\"id\" href=\"#part_devt\">part_devt</a>(<a class=\"id\" href=\"#p\">p</a>));", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#bdev\">bdev</a> == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out_unlock_kernel\">out_unlock_kernel</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#q\">q</a> = <a class=\"id\" href=\"#blk_trace_get_queue\">blk_trace_get_queue</a>(<a class=\"id\" href=\"#bdev\">bdev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#q\">q</a> == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out_bdput\">out_bdput</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#bdev\">bdev</a>-><a class=\"id\" href=\"#bd_mutex\">bd_mutex</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#attr\">attr</a> == &amp;<a class=\"id\" href=\"#dev_attr_enable\">dev_attr_enable</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%u\\n\", !!<a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out_unlock_bdev\">out_unlock_bdev</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a> == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"disabled\\n\");", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#attr\">attr</a> == &amp;<a class=\"id\" href=\"#dev_attr_act_mask\">dev_attr_act_mask</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#blk_trace_mask2str\">blk_trace_mask2str</a>(<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>-><a class=\"id\" href=\"#act_mask\">act_mask</a>);", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#attr\">attr</a> == &amp;<a class=\"id\" href=\"#dev_attr_pid\">dev_attr_pid</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%u\\n\", <a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>-><a class=\"id\" href=\"#pid\">pid</a>);", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#attr\">attr</a> == &amp;<a class=\"id\" href=\"#dev_attr_start_lba\">dev_attr_start_lba</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%llu\\n\", <a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>-><a class=\"id\" href=\"#start_lba\">start_lba</a>);", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#attr\">attr</a> == &amp;<a class=\"id\" href=\"#dev_attr_end_lba\">dev_attr_end_lba</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%llu\\n\", <a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>-><a class=\"id\" href=\"#end_lba\">end_lba</a>);", 
"", 
"<a class=\"id\" href=\"#out_unlock_bdev\">out_unlock_bdev</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#bdev\">bdev</a>-><a class=\"id\" href=\"#bd_mutex\">bd_mutex</a>);", 
"<a class=\"id\" href=\"#out_bdput\">out_bdput</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bdput\">bdput</a>(<a class=\"id\" href=\"#bdev\">bdev</a>);", 
"<a class=\"id\" href=\"#out_unlock_kernel\">out_unlock_kernel</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unlock_kernel\">unlock_kernel</a>();", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#sysfs_blk_trace_attr_store\">sysfs_blk_trace_attr_store</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  const char *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#block_device\">block_device</a> *<a class=\"id\" href=\"#bdev\">bdev</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#request_queue\">request_queue</a> *<a class=\"id\" href=\"#q\">q</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#hd_struct\">hd_struct</a> *<a class=\"id\" href=\"#p\">p</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#count\">count</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#attr\">attr</a> == &amp;<a class=\"id\" href=\"#dev_attr_act_mask\">dev_attr_act_mask</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#sscanf\">sscanf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%llx\", &amp;<a class=\"id\" href=\"#value\">value</a>) != 1) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Assume it is a list of trace category names */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#blk_trace_str2mask\">blk_trace_str2mask</a>(<a class=\"id\" href=\"#buf\">buf</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#value\">value</a> = <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>} else if (<a class=\"id\" href=\"#sscanf\">sscanf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%llu\", &amp;<a class=\"id\" href=\"#value\">value</a>) != 1)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#ENXIO\">ENXIO</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#lock_kernel\">lock_kernel</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#p\">p</a> = <a class=\"id\" href=\"#dev_to_part\">dev_to_part</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bdev\">bdev</a> = <a class=\"id\" href=\"#bdget\">bdget</a>(<a class=\"id\" href=\"#part_devt\">part_devt</a>(<a class=\"id\" href=\"#p\">p</a>));", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#bdev\">bdev</a> == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out_unlock_kernel\">out_unlock_kernel</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#q\">q</a> = <a class=\"id\" href=\"#blk_trace_get_queue\">blk_trace_get_queue</a>(<a class=\"id\" href=\"#bdev\">bdev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#q\">q</a> == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out_bdput\">out_bdput</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#bdev\">bdev</a>-><a class=\"id\" href=\"#bd_mutex\">bd_mutex</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#attr\">attr</a> == &amp;<a class=\"id\" href=\"#dev_attr_enable\">dev_attr_enable</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#value\">value</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#blk_trace_setup_queue\">blk_trace_setup_queue</a>(<a class=\"id\" href=\"#q\">q</a>, <a class=\"id\" href=\"#bdev\">bdev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#blk_trace_remove_queue\">blk_trace_remove_queue</a>(<a class=\"id\" href=\"#q\">q</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out_unlock_bdev\">out_unlock_bdev</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = 0;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a> == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#blk_trace_setup_queue\">blk_trace_setup_queue</a>(<a class=\"id\" href=\"#q\">q</a>, <a class=\"id\" href=\"#bdev\">bdev</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> == 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#attr\">attr</a> == &amp;<a class=\"id\" href=\"#dev_attr_act_mask\">dev_attr_act_mask</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>-><a class=\"id\" href=\"#act_mask\">act_mask</a> = <a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#attr\">attr</a> == &amp;<a class=\"id\" href=\"#dev_attr_pid\">dev_attr_pid</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>-><a class=\"id\" href=\"#pid\">pid</a> = <a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#attr\">attr</a> == &amp;<a class=\"id\" href=\"#dev_attr_start_lba\">dev_attr_start_lba</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>-><a class=\"id\" href=\"#start_lba\">start_lba</a> = <a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#attr\">attr</a> == &amp;<a class=\"id\" href=\"#dev_attr_end_lba\">dev_attr_end_lba</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#q\">q</a>-><a class=\"id\" href=\"#blk_trace\">blk_trace</a>-><a class=\"id\" href=\"#end_lba\">end_lba</a> = <a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<a class=\"id\" href=\"#out_unlock_bdev\">out_unlock_bdev</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#bdev\">bdev</a>-><a class=\"id\" href=\"#bd_mutex\">bd_mutex</a>);", 
"<a class=\"id\" href=\"#out_bdput\">out_bdput</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bdput\">bdput</a>(<a class=\"id\" href=\"#bdev\">bdev</a>);", 
"<a class=\"id\" href=\"#out_unlock_kernel\">out_unlock_kernel</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unlock_kernel\">unlock_kernel</a>();", 
"<a class=\"id\" href=\"#out\">out</a>:", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a> ? <a class=\"id\" href=\"#ret\">ret</a> : <a class=\"id\" href=\"#count\">count</a>;", 
"}", 
"", 
"int <a class=\"id\" href=\"#blk_trace_init_sysfs\">blk_trace_init_sysfs</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sysfs_create_group\">sysfs_create_group</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#kobj\">kobj</a>, &amp;<a class=\"id\" href=\"#blk_trace_attr_group\">blk_trace_attr_group</a>);", 
"}", 
"", 
"void <a class=\"id\" href=\"#blk_trace_remove_sysfs\">blk_trace_remove_sysfs</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_remove_group\">sysfs_remove_group</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#kobj\">kobj</a>, &amp;<a class=\"id\" href=\"#blk_trace_attr_group\">blk_trace_attr_group</a>);", 
"}", 
"", 
"#<a class=\"id\" href=\"#endif\">endif</a> <span class=\"comment\">/* CONFIG_BLK_DEV_IO_TRACE */</span>", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_EVENT_TRACING\">CONFIG_EVENT_TRACING</a>", 
"", 
"void <a class=\"id\" href=\"#blk_dump_cmd\">blk_dump_cmd</a>(char *<a class=\"id\" href=\"#buf\">buf</a>, struct <a class=\"id\" href=\"#request\">request</a> *<a class=\"id\" href=\"#rq\">rq</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#end\">end</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#len\">len</a> = <a class=\"id\" href=\"#rq\">rq</a>-><a class=\"id\" href=\"#cmd_len\">cmd_len</a>;", 
"<span class=\"ts\"/>unsigned char *<a class=\"id\" href=\"#cmd\">cmd</a> = <a class=\"id\" href=\"#rq\">rq</a>-><a class=\"id\" href=\"#cmd\">cmd</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rq\">rq</a>-><a class=\"id\" href=\"#cmd_type\">cmd_type</a> != <a class=\"id\" href=\"#REQ_TYPE_BLOCK_PC\">REQ_TYPE_BLOCK_PC</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#buf\">buf</a>[0] = '\\0';", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#end\">end</a> = <a class=\"id\" href=\"#len\">len</a> - 1; <a class=\"id\" href=\"#end\">end</a> >= 0; <a class=\"id\" href=\"#end\">end</a>--)", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#cmd\">cmd</a>[<a class=\"id\" href=\"#end\">end</a>])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#end\">end</a>++;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#len\">len</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#buf\">buf</a> += <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%s%02x\", <a class=\"id\" href=\"#i\">i</a> == 0 ? \"\" : \" \", <a class=\"id\" href=\"#cmd\">cmd</a>[<a class=\"id\" href=\"#i\">i</a>]);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#i\">i</a> == <a class=\"id\" href=\"#end\">end</a> && <a class=\"id\" href=\"#end\">end</a> != <a class=\"id\" href=\"#len\">len</a> - 1) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \" ..\");", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"void <a class=\"id\" href=\"#blk_fill_rwbs\">blk_fill_rwbs</a>(char *<a class=\"id\" href=\"#rwbs\">rwbs</a>, <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#rw\">rw</a>, int <a class=\"id\" href=\"#bytes\">bytes</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a> = 0;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rw\">rw</a> &amp; <a class=\"id\" href=\"#WRITE\">WRITE</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rwbs\">rwbs</a>[<a class=\"id\" href=\"#i\">i</a>++] = 'W';", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#rw\">rw</a> &amp; <a class=\"id\" href=\"#REQ_DISCARD\">REQ_DISCARD</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rwbs\">rwbs</a>[<a class=\"id\" href=\"#i\">i</a>++] = 'D';", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#bytes\">bytes</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rwbs\">rwbs</a>[<a class=\"id\" href=\"#i\">i</a>++] = 'R';", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rwbs\">rwbs</a>[<a class=\"id\" href=\"#i\">i</a>++] = 'N';", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rw\">rw</a> &amp; <a class=\"id\" href=\"#REQ_RAHEAD\">REQ_RAHEAD</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rwbs\">rwbs</a>[<a class=\"id\" href=\"#i\">i</a>++] = 'A';", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rw\">rw</a> &amp; <a class=\"id\" href=\"#REQ_HARDBARRIER\">REQ_HARDBARRIER</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rwbs\">rwbs</a>[<a class=\"id\" href=\"#i\">i</a>++] = 'B';", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rw\">rw</a> &amp; <a class=\"id\" href=\"#REQ_SYNC\">REQ_SYNC</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rwbs\">rwbs</a>[<a class=\"id\" href=\"#i\">i</a>++] = 'S';", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rw\">rw</a> &amp; <a class=\"id\" href=\"#REQ_META\">REQ_META</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rwbs\">rwbs</a>[<a class=\"id\" href=\"#i\">i</a>++] = 'M';", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rw\">rw</a> &amp; <a class=\"id\" href=\"#REQ_SECURE\">REQ_SECURE</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rwbs\">rwbs</a>[<a class=\"id\" href=\"#i\">i</a>++] = 'E';", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rwbs\">rwbs</a>[<a class=\"id\" href=\"#i\">i</a>] = '\\0';", 
"}", 
"", 
"void <a class=\"id\" href=\"#blk_fill_rwbs_rq\">blk_fill_rwbs_rq</a>(char *<a class=\"id\" href=\"#rwbs\">rwbs</a>, struct <a class=\"id\" href=\"#request\">request</a> *<a class=\"id\" href=\"#rq\">rq</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rw\">rw</a> = <a class=\"id\" href=\"#rq\">rq</a>-><a class=\"id\" href=\"#cmd_flags\">cmd_flags</a> &amp; 0x03;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#bytes\">bytes</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rq\">rq</a>-><a class=\"id\" href=\"#cmd_flags\">cmd_flags</a> &amp; <a class=\"id\" href=\"#REQ_DISCARD\">REQ_DISCARD</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rw\">rw</a> |= <a class=\"id\" href=\"#REQ_DISCARD\">REQ_DISCARD</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rq\">rq</a>-><a class=\"id\" href=\"#cmd_flags\">cmd_flags</a> &amp; <a class=\"id\" href=\"#REQ_SECURE\">REQ_SECURE</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rw\">rw</a> |= <a class=\"id\" href=\"#REQ_SECURE\">REQ_SECURE</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bytes\">bytes</a> = <a class=\"id\" href=\"#blk_rq_bytes\">blk_rq_bytes</a>(<a class=\"id\" href=\"#rq\">rq</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#blk_fill_rwbs\">blk_fill_rwbs</a>(<a class=\"id\" href=\"#rwbs\">rwbs</a>, <a class=\"id\" href=\"#rw\">rw</a>, <a class=\"id\" href=\"#bytes\">bytes</a>);", 
"}", 
"", 
"#<a class=\"id\" href=\"#endif\">endif</a> <span class=\"comment\">/* CONFIG_EVENT_TRACING */</span>", 
"", 
];
xr_frag_insert('l/79/8421007defc8db384a0187ced34f772215767c.xr', __xr_tmp);
