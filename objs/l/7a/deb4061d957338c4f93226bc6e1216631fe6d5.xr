var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * RTC subsystem, base class</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Copyright (C) 2005 Tower Technologies</span>", 
"<span class=\"comment\"> * Author: Alessandro Zummo &lt;a.zummo@towertech.it&gt;</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * class skeleton from drivers/hwmon/hwmon.c</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This program is free software; you can redistribute it and/or modify</span>", 
"<span class=\"comment\"> * it under the terms of the GNU General Public License version 2 as</span>", 
"<span class=\"comment\"> * published by the Free Software Foundation.</span>", 
"<span class=\"comment\">*/</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#rtc\">rtc</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kdev_t\">kdev_t</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#idr\">idr</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#slab\">slab</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> \"rtc-core.h\"", 
"", 
"", 
"static <a class=\"id\" href=\"#DEFINE_IDR\">DEFINE_IDR</a>(<a class=\"id\" href=\"#rtc_idr\">rtc_idr</a>);", 
"static <a class=\"id\" href=\"#DEFINE_MUTEX\">DEFINE_MUTEX</a>(<a class=\"id\" href=\"#idr_lock\">idr_lock</a>);", 
"struct <a class=\"id\" href=\"#class\">class</a> *<a class=\"id\" href=\"#rtc_class\">rtc_class</a>;", 
"", 
"static void <a class=\"id\" href=\"#rtc_device_release\">rtc_device_release</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc\">rtc</a> = <a class=\"id\" href=\"#to_rtc_device\">to_rtc_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#idr_lock\">idr_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#idr_remove\">idr_remove</a>(&amp;<a class=\"id\" href=\"#rtc_idr\">rtc_idr</a>, <a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#idr_lock\">idr_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#rtc\">rtc</a>);", 
"}", 
"", 
"#if <a class=\"id\" href=\"#defined\">defined</a>(<a class=\"id\" href=\"#CONFIG_PM\">CONFIG_PM</a>) && <a class=\"id\" href=\"#defined\">defined</a>(<a class=\"id\" href=\"#CONFIG_RTC_HCTOSYS_DEVICE\">CONFIG_RTC_HCTOSYS_DEVICE</a>)", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * On suspend(), measure the delta between one RTC and the</span>", 
"<span class=\"comment\"> * system's wall clock; restore it on resume().</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static struct <a class=\"id\" href=\"#timespec\">timespec</a><span class=\"ts\"/><a class=\"id\" href=\"#delta\">delta</a>;", 
"static <a class=\"id\" href=\"#time_t\">time_t</a><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#oldtime\">oldtime</a>;", 
"", 
"static int <a class=\"id\" href=\"#rtc_suspend\">rtc_suspend</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#pm_message_t\">pm_message_t</a> <a class=\"id\" href=\"#mesg\">mesg</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a><span class=\"ts\"/>*<a class=\"id\" href=\"#rtc\">rtc</a> = <a class=\"id\" href=\"#to_rtc_device\">to_rtc_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_time\">rtc_time</a><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tm\">tm</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#timespec\">timespec</a><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ts\">ts</a> = <a class=\"id\" href=\"#current_kernel_time\">current_kernel_time</a>();", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#strcmp\">strcmp</a>(<a class=\"id\" href=\"#dev_name\">dev_name</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>), <a class=\"id\" href=\"#CONFIG_RTC_HCTOSYS_DEVICE\">CONFIG_RTC_HCTOSYS_DEVICE</a>) != 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc_read_time\">rtc_read_time</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, &amp;<a class=\"id\" href=\"#tm\">tm</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc_tm_to_time\">rtc_tm_to_time</a>(&amp;<a class=\"id\" href=\"#tm\">tm</a>, &amp;<a class=\"id\" href=\"#oldtime\">oldtime</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* RTC precision is 1 second; adjust delta for avg 1/2 sec err */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#set_normalized_timespec\">set_normalized_timespec</a>(&amp;<a class=\"id\" href=\"#delta\">delta</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ts\">ts</a>.<a class=\"id\" href=\"#tv_sec\">tv_sec</a> - <a class=\"id\" href=\"#oldtime\">oldtime</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ts\">ts</a>.<a class=\"id\" href=\"#tv_nsec\">tv_nsec</a> - (<a class=\"id\" href=\"#NSEC_PER_SEC\">NSEC_PER_SEC</a> >> 1));", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#rtc_resume\">rtc_resume</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a><span class=\"ts\"/>*<a class=\"id\" href=\"#rtc\">rtc</a> = <a class=\"id\" href=\"#to_rtc_device\">to_rtc_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_time\">rtc_time</a><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tm\">tm</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#time_t\">time_t</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#newtime\">newtime</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#timespec\">timespec</a><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#time\">time</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#strcmp\">strcmp</a>(<a class=\"id\" href=\"#dev_name\">dev_name</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>), <a class=\"id\" href=\"#CONFIG_RTC_HCTOSYS_DEVICE\">CONFIG_RTC_HCTOSYS_DEVICE</a>) != 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc_read_time\">rtc_read_time</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, &amp;<a class=\"id\" href=\"#tm\">tm</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rtc_valid_tm\">rtc_valid_tm</a>(&amp;<a class=\"id\" href=\"#tm\">tm</a>) != 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_debug\">pr_debug</a>(\"%s:  bogus resume time\\n\", <a class=\"id\" href=\"#dev_name\">dev_name</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc_tm_to_time\">rtc_tm_to_time</a>(&amp;<a class=\"id\" href=\"#tm\">tm</a>, &amp;<a class=\"id\" href=\"#newtime\">newtime</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#newtime\">newtime</a> <= <a class=\"id\" href=\"#oldtime\">oldtime</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#newtime\">newtime</a> &lt; <a class=\"id\" href=\"#oldtime\">oldtime</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_debug\">pr_debug</a>(\"%s:  time travel!\\n\", <a class=\"id\" href=\"#dev_name\">dev_name</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* restore wall clock using delta against this RTC;</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * adjust again for avg 1/2 second RTC sampling error</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#set_normalized_timespec\">set_normalized_timespec</a>(&amp;<a class=\"id\" href=\"#time\">time</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#newtime\">newtime</a> + <a class=\"id\" href=\"#delta\">delta</a>.<a class=\"id\" href=\"#tv_sec\">tv_sec</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#NSEC_PER_SEC\">NSEC_PER_SEC</a> >> 1) + <a class=\"id\" href=\"#delta\">delta</a>.<a class=\"id\" href=\"#tv_nsec\">tv_nsec</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#do_settimeofday\">do_settimeofday</a>(&amp;<a class=\"id\" href=\"#time\">time</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"#else", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#rtc_suspend\">rtc_suspend</a><span class=\"ts\"/><a class=\"id\" href=\"#NULL\">NULL</a>", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#rtc_resume\">rtc_resume</a><span class=\"ts\"/><a class=\"id\" href=\"#NULL\">NULL</a>", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * rtc_device_register - register w/ RTC class</span>", 
"<span class=\"comment\"> * @dev: the device to register</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * rtc_device_unregister() must be called when the class device is no</span>", 
"<span class=\"comment\"> * longer needed.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Returns the pointer to the new struct class device.</span>", 
"<span class=\"comment\"> */</span>", 
"struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc_device_register\">rtc_device_register</a>(const char *<a class=\"id\" href=\"#name\">name</a>, struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>const struct <a class=\"id\" href=\"#rtc_class_ops\">rtc_class_ops</a> *<a class=\"id\" href=\"#ops\">ops</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#module\">module</a> *<a class=\"id\" href=\"#owner\">owner</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc\">rtc</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#id\">id</a>, <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#idr_pre_get\">idr_pre_get</a>(&amp;<a class=\"id\" href=\"#rtc_idr\">rtc_idr</a>, <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>) == 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#exit\">exit</a>;", 
"<span class=\"ts\"/>}", 
"", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#idr_lock\">idr_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#idr_get_new\">idr_get_new</a>(&amp;<a class=\"id\" href=\"#rtc_idr\">rtc_idr</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, &amp;<a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#idr_lock\">idr_lock</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#exit\">exit</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#id\">id</a> = <a class=\"id\" href=\"#id\">id</a> &amp; <a class=\"id\" href=\"#MAX_ID_MASK\">MAX_ID_MASK</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof(struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rtc\">rtc</a> == <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#exit_idr\">exit_idr</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#id\">id</a> = <a class=\"id\" href=\"#id\">id</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops\">ops</a> = <a class=\"id\" href=\"#ops\">ops</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#owner\">owner</a> = <a class=\"id\" href=\"#owner\">owner</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#max_user_freq\">max_user_freq</a> = 64;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#parent\">parent</a> = <a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#class\">class</a> = <a class=\"id\" href=\"#rtc_class\">rtc_class</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#release\">release</a> = <a class=\"id\" href=\"#rtc_device_release\">rtc_device_release</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_init\">mutex_init</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops_lock\">ops_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_init\">spin_lock_init</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_lock\">irq_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_init\">spin_lock_init</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_task_lock\">irq_task_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#init_waitqueue_head\">init_waitqueue_head</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_queue\">irq_queue</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#strlcpy\">strlcpy</a>(<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#RTC_DEVICE_NAME_SIZE\">RTC_DEVICE_NAME_SIZE</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_set_name\">dev_set_name</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"rtc%d\", <a class=\"id\" href=\"#id\">id</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc_dev_prepare\">rtc_dev_prepare</a>(<a class=\"id\" href=\"#rtc\">rtc</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#device_register\">device_register</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#exit_kfree\">exit_kfree</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc_dev_add_device\">rtc_dev_add_device</a>(<a class=\"id\" href=\"#rtc\">rtc</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc_sysfs_add_device\">rtc_sysfs_add_device</a>(<a class=\"id\" href=\"#rtc\">rtc</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc_proc_add_device\">rtc_proc_add_device</a>(<a class=\"id\" href=\"#rtc\">rtc</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_info\">dev_info</a>(<a class=\"id\" href=\"#dev\">dev</a>, \"rtc core: registered %s as %s\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#dev_name\">dev_name</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>));", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#rtc\">rtc</a>;", 
"", 
"<a class=\"id\" href=\"#exit_kfree\">exit_kfree</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#rtc\">rtc</a>);", 
"", 
"<a class=\"id\" href=\"#exit_idr\">exit_idr</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#idr_lock\">idr_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#idr_remove\">idr_remove</a>(&amp;<a class=\"id\" href=\"#rtc_idr\">rtc_idr</a>, <a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#idr_lock\">idr_lock</a>);", 
"", 
"<a class=\"id\" href=\"#exit\">exit</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_err\">dev_err</a>(<a class=\"id\" href=\"#dev\">dev</a>, \"rtc core: unable to register %s, err = %d\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#err\">err</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(<a class=\"id\" href=\"#err\">err</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#rtc_device_register\">rtc_device_register</a>);", 
"", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * rtc_device_unregister - removes the previously registered RTC class device</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * @rtc: the RTC class device to destroy</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#rtc_device_unregister\">rtc_device_unregister</a>(struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc\">rtc</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#get_device\">get_device</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>) != <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops_lock\">ops_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* remove innards of this RTC, then disable it, before</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * letting any rtc_class_open() users access it again</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc_sysfs_del_device\">rtc_sysfs_del_device</a>(<a class=\"id\" href=\"#rtc\">rtc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc_dev_del_device\">rtc_dev_del_device</a>(<a class=\"id\" href=\"#rtc\">rtc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc_proc_del_device\">rtc_proc_del_device</a>(<a class=\"id\" href=\"#rtc\">rtc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#device_unregister\">device_unregister</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops\">ops</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops_lock\">ops_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#put_device\">put_device</a>(&amp;<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#rtc_device_unregister\">rtc_device_unregister</a>);", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#rtc_init\">rtc_init</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc_class\">rtc_class</a> = <a class=\"id\" href=\"#class_create\">class_create</a>(<a class=\"id\" href=\"#THIS_MODULE\">THIS_MODULE</a>, \"rtc\");", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#IS_ERR\">IS_ERR</a>(<a class=\"id\" href=\"#rtc_class\">rtc_class</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"%s: couldn't create class\\n\", <a class=\"id\" href=\"#__FILE__\">__FILE__</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#PTR_ERR\">PTR_ERR</a>(<a class=\"id\" href=\"#rtc_class\">rtc_class</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc_class\">rtc_class</a>-><a class=\"id\" href=\"#suspend\">suspend</a> = <a class=\"id\" href=\"#rtc_suspend\">rtc_suspend</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc_class\">rtc_class</a>-><a class=\"id\" href=\"#resume\">resume</a> = <a class=\"id\" href=\"#rtc_resume\">rtc_resume</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc_dev_init\">rtc_dev_init</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc_sysfs_init\">rtc_sysfs_init</a>(<a class=\"id\" href=\"#rtc_class\">rtc_class</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#__exit\">__exit</a> <a class=\"id\" href=\"#rtc_exit\">rtc_exit</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc_dev_exit\">rtc_dev_exit</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#class_destroy\">class_destroy</a>(<a class=\"id\" href=\"#rtc_class\">rtc_class</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#idr_destroy\">idr_destroy</a>(&amp;<a class=\"id\" href=\"#rtc_idr\">rtc_idr</a>);", 
"}", 
"", 
"<a class=\"id\" href=\"#subsys_initcall\">subsys_initcall</a>(<a class=\"id\" href=\"#rtc_init\">rtc_init</a>);", 
"<a class=\"id\" href=\"#module_exit\">module_exit</a>(<a class=\"id\" href=\"#rtc_exit\">rtc_exit</a>);", 
"", 
"<a class=\"id\" href=\"#MODULE_AUTHOR\">MODULE_AUTHOR</a>(\"Alessandro Zummo <a.zummo@towertech.it>\");", 
"<a class=\"id\" href=\"#MODULE_DESCRIPTION\">MODULE_DESCRIPTION</a>(\"RTC class support\");", 
"<a class=\"id\" href=\"#MODULE_LICENSE\">MODULE_LICENSE</a>(\"GPL\");", 
];
xr_frag_insert('l/7a/deb4061d957338c4f93226bc6e1216631fe6d5.xr', __xr_tmp);
