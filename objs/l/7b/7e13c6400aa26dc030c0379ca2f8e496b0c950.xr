var __xr_tmp = [
"<span class=\"comment\"> * pcie_device_init - allocate and initialize PCI Express port service device</span>", 
"<span class=\"comment\"> * @pdev: PCI Express port to associate the service device with</span>", 
"<span class=\"comment\"> * @service: Type of service to associate with the service device</span>", 
"<span class=\"comment\"> * @irq: Interrupt vector to associate with the service device</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#pcie_device_init\">pcie_device_init</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#pdev\">pdev</a>, int <a class=\"id\" href=\"#service\">service</a>, int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pcie_device\">pcie_device</a> *<a class=\"id\" href=\"#pcie\">pcie</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#device\">device</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pcie\">pcie</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof(*<a class=\"id\" href=\"#pcie\">pcie</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#pcie\">pcie</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pcie\">pcie</a>-><a class=\"id\" href=\"#port\">port</a> = <a class=\"id\" href=\"#pdev\">pdev</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pcie\">pcie</a>-><a class=\"id\" href=\"#irq\">irq</a> = <a class=\"id\" href=\"#irq\">irq</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pcie\">pcie</a>-><a class=\"id\" href=\"#service\">service</a> = <a class=\"id\" href=\"#service\">service</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Initialize generic device interface */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device\">device</a> = &amp;<a class=\"id\" href=\"#pcie\">pcie</a>-><a class=\"id\" href=\"#device\">device</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#bus\">bus</a> = &amp;<a class=\"id\" href=\"#pcie_port_bus_type\">pcie_port_bus_type</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#release\">release</a> = <a class=\"id\" href=\"#release_pcie_device\">release_pcie_device</a>;<span class=\"ts\"/><span class=\"comment\">/* callback to free pcie dev */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_set_name\">dev_set_name</a>(<a class=\"id\" href=\"#device\">device</a>, \"%s:pcie%02x\",", 
"<span class=\"ts\"/><span class=\"ts\"/>     <a class=\"id\" href=\"#pci_name\">pci_name</a>(<a class=\"id\" href=\"#pdev\">pdev</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>     <a class=\"id\" href=\"#get_descriptor_id\">get_descriptor_id</a>(<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#pcie_type\">pcie_type</a>, <a class=\"id\" href=\"#service\">service</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#parent\">parent</a> = &amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device_enable_async_suspend\">device_enable_async_suspend</a>(<a class=\"id\" href=\"#device\">device</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#device_register\">device_register</a>(<a class=\"id\" href=\"#device\">device</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#pcie\">pcie</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#get_device\">get_device</a>(<a class=\"id\" href=\"#device\">device</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * pcie_port_device_register - register PCI Express port</span>", 
"<span class=\"comment\"> * @dev: PCI Express port to register</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Allocate the port extension structure and register services associated with</span>", 
"<span class=\"comment\"> * the port.</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#pcie_port_device_register\">pcie_port_device_register</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#status\">status</a>, <a class=\"id\" href=\"#capabilities\">capabilities</a>, <a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#nr_service\">nr_service</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#irqs\">irqs</a>[<a class=\"id\" href=\"#PCIE_PORT_DEVICE_MAXSERVICES\">PCIE_PORT_DEVICE_MAXSERVICES</a>];", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Get and check PCI Express port services */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#capabilities\">capabilities</a> = <a class=\"id\" href=\"#get_port_device_capability\">get_port_device_capability</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#capabilities\">capabilities</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Enable PCI Express port device */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#pci_enable_device\">pci_enable_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_set_master\">pci_set_master</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Initialize service irqs. Don't use service devices that</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * require interrupts if there is no way to generate them.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#init_service_irqs\">init_service_irqs</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#irqs\">irqs</a>, <a class=\"id\" href=\"#capabilities\">capabilities</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#capabilities\">capabilities</a> &= <a class=\"id\" href=\"#PCIE_PORT_SERVICE_VC\">PCIE_PORT_SERVICE_VC</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#capabilities\">capabilities</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#error_disable\">error_disable</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Allocate child services if any */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#nr_service\">nr_service</a> = 0;", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#PCIE_PORT_DEVICE_MAXSERVICES\">PCIE_PORT_DEVICE_MAXSERVICES</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#service\">service</a> = 1 << <a class=\"id\" href=\"#i\">i</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!(<a class=\"id\" href=\"#capabilities\">capabilities</a> &amp; <a class=\"id\" href=\"#service\">service</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#pcie_device_init\">pcie_device_init</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#service\">service</a>, <a class=\"id\" href=\"#irqs\">irqs</a>[<a class=\"id\" href=\"#i\">i</a>]))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#nr_service\">nr_service</a>++;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#nr_service\">nr_service</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#error_cleanup_irqs\">error_cleanup_irqs</a>;", 
"", 
"<span class=\"ts\"/>return 0;", 
"", 
"<a class=\"id\" href=\"#error_cleanup_irqs\">error_cleanup_irqs</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cleanup_service_irqs\">cleanup_service_irqs</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<a class=\"id\" href=\"#error_disable\">error_disable</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_disable_device\">pci_disable_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"}", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_PM\">CONFIG_PM</a>", 
"static int <a class=\"id\" href=\"#suspend_iter\">suspend_iter</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, void *<a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pcie_port_service_driver\">pcie_port_service_driver</a> *<a class=\"id\" href=\"#service_driver\">service_driver</a>;", 
"", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#bus\">bus</a> == &amp;<a class=\"id\" href=\"#pcie_port_bus_type\">pcie_port_bus_type</a>) && <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#driver\">driver</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#service_driver\">service_driver</a> = <a class=\"id\" href=\"#to_service_driver\">to_service_driver</a>(<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#service_driver\">service_driver</a>-><a class=\"id\" href=\"#suspend\">suspend</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#service_driver\">service_driver</a>-><a class=\"id\" href=\"#suspend\">suspend</a>(<a class=\"id\" href=\"#to_pcie_device\">to_pcie_device</a>(<a class=\"id\" href=\"#dev\">dev</a>));", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * pcie_port_device_suspend - suspend port services associated with a PCIe port</span>", 
"<span class=\"comment\"> * @dev: PCI Express port to handle</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#pcie_port_device_suspend\">pcie_port_device_suspend</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#device_for_each_child\">device_for_each_child</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#suspend_iter\">suspend_iter</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#resume_iter\">resume_iter</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, void *<a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pcie_port_service_driver\">pcie_port_service_driver</a> *<a class=\"id\" href=\"#service_driver\">service_driver</a>;", 
"", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#bus\">bus</a> == &amp;<a class=\"id\" href=\"#pcie_port_bus_type\">pcie_port_bus_type</a>) &&", 
"<span class=\"ts\"/>    (<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#driver\">driver</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#service_driver\">service_driver</a> = <a class=\"id\" href=\"#to_service_driver\">to_service_driver</a>(<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#service_driver\">service_driver</a>-><a class=\"id\" href=\"#resume\">resume</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#service_driver\">service_driver</a>-><a class=\"id\" href=\"#resume\">resume</a>(<a class=\"id\" href=\"#to_pcie_device\">to_pcie_device</a>(<a class=\"id\" href=\"#dev\">dev</a>));", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * pcie_port_device_suspend - resume port services associated with a PCIe port</span>", 
"<span class=\"comment\"> * @dev: PCI Express port to handle</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#pcie_port_device_resume\">pcie_port_device_resume</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#device_for_each_child\">device_for_each_child</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#resume_iter\">resume_iter</a>);", 
"}", 
"#<a class=\"id\" href=\"#endif\">endif</a> <span class=\"comment\">/* PM */</span>", 
"", 
"static int <a class=\"id\" href=\"#remove_iter\">remove_iter</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, void *<a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#bus\">bus</a> == &amp;<a class=\"id\" href=\"#pcie_port_bus_type\">pcie_port_bus_type</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#put_device\">put_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#device_unregister\">device_unregister</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * pcie_port_device_remove - unregister PCI Express port service devices</span>", 
"<span class=\"comment\"> * @dev: PCI Express port the service devices to unregister are associated with</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Remove PCI Express port service devices associated with given port and</span>", 
"<span class=\"comment\"> * disable MSI-X or MSI for the port.</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#pcie_port_device_remove\">pcie_port_device_remove</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device_for_each_child\">device_for_each_child</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#remove_iter\">remove_iter</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cleanup_service_irqs\">cleanup_service_irqs</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_disable_device\">pci_disable_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * pcie_port_probe_service - probe driver for given PCI Express port service</span>", 
"<span class=\"comment\"> * @dev: PCI Express port service device to probe against</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * If PCI Express port service driver is registered with</span>", 
"<span class=\"comment\"> * pcie_port_service_register(), this function will be called by the driver core</span>", 
"<span class=\"comment\"> * whenever match is found between the driver and a port service device.</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#pcie_port_probe_service\">pcie_port_probe_service</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pcie_device\">pcie_device</a> *<a class=\"id\" href=\"#pciedev\">pciedev</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pcie_port_service_driver\">pcie_port_service_driver</a> *<a class=\"id\" href=\"#driver\">driver</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#status\">status</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#dev\">dev</a> || !<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#driver\">driver</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#driver\">driver</a> = <a class=\"id\" href=\"#to_service_driver\">to_service_driver</a>(<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#driver\">driver</a> || !<a class=\"id\" href=\"#driver\">driver</a>-><a class=\"id\" href=\"#probe\">probe</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pciedev\">pciedev</a> = <a class=\"id\" href=\"#to_pcie_device\">to_pcie_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#driver\">driver</a>-><a class=\"id\" href=\"#probe\">probe</a>(<a class=\"id\" href=\"#pciedev\">pciedev</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#status\">status</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a>, <a class=\"id\" href=\"#dev\">dev</a>, \"service driver %s loaded\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#driver\">driver</a>-><a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#get_device\">get_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * pcie_port_remove_service - detach driver from given PCI Express port service</span>", 
"<span class=\"comment\"> * @dev: PCI Express port service device to handle</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * If PCI Express port service driver is registered with</span>", 
"<span class=\"comment\"> * pcie_port_service_register(), this function will be called by the driver core</span>", 
"<span class=\"comment\"> * when device_unregister() is called for the port service device associated</span>", 
"<span class=\"comment\"> * with the driver.</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#pcie_port_remove_service\">pcie_port_remove_service</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pcie_device\">pcie_device</a> *<a class=\"id\" href=\"#pciedev\">pciedev</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pcie_port_service_driver\">pcie_port_service_driver</a> *<a class=\"id\" href=\"#driver\">driver</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#dev\">dev</a> || !<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#driver\">driver</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pciedev\">pciedev</a> = <a class=\"id\" href=\"#to_pcie_device\">to_pcie_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#driver\">driver</a> = <a class=\"id\" href=\"#to_service_driver\">to_service_driver</a>(<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#driver\">driver</a> && <a class=\"id\" href=\"#driver\">driver</a>-><a class=\"id\" href=\"#remove\">remove</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a>, <a class=\"id\" href=\"#dev\">dev</a>, \"unloading service driver %s\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#driver\">driver</a>-><a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#driver\">driver</a>-><a class=\"id\" href=\"#remove\">remove</a>(<a class=\"id\" href=\"#pciedev\">pciedev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#put_device\">put_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * pcie_port_shutdown_service - shut down given PCI Express port service</span>", 
"<span class=\"comment\"> * @dev: PCI Express port service device to handle</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * If PCI Express port service driver is registered with</span>", 
"<span class=\"comment\"> * pcie_port_service_register(), this function will be called by the driver core</span>", 
"<span class=\"comment\"> * when device_shutdown() is called for the port service device associated</span>", 
"<span class=\"comment\"> * with the driver.</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#pcie_port_shutdown_service\">pcie_port_shutdown_service</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>) {}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * pcie_port_service_register - register PCI Express port service driver</span>", 
"<span class=\"comment\"> * @new: PCI Express port service driver to register</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#pcie_port_service_register\">pcie_port_service_register</a>(struct <a class=\"id\" href=\"#pcie_port_service_driver\">pcie_port_service_driver</a> *<a class=\"id\" href=\"#new\">new</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pcie_ports_disabled\">pcie_ports_disabled</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#driver\">driver</a>.<a class=\"id\" href=\"#name\">name</a> = (char *)<a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#name\">name</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#driver\">driver</a>.<a class=\"id\" href=\"#bus\">bus</a> = &amp;<a class=\"id\" href=\"#pcie_port_bus_type\">pcie_port_bus_type</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#driver\">driver</a>.<a class=\"id\" href=\"#probe\">probe</a> = <a class=\"id\" href=\"#pcie_port_probe_service\">pcie_port_probe_service</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#driver\">driver</a>.<a class=\"id\" href=\"#remove\">remove</a> = <a class=\"id\" href=\"#pcie_port_remove_service\">pcie_port_remove_service</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#driver\">driver</a>.<a class=\"id\" href=\"#shutdown\">shutdown</a> = <a class=\"id\" href=\"#pcie_port_shutdown_service\">pcie_port_shutdown_service</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#driver_register\">driver_register</a>(&amp;<a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#pcie_port_service_register\">pcie_port_service_register</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * pcie_port_service_unregister - unregister PCI Express port service driver</span>", 
"<span class=\"comment\"> * @drv: PCI Express port service driver to unregister</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#pcie_port_service_unregister\">pcie_port_service_unregister</a>(struct <a class=\"id\" href=\"#pcie_port_service_driver\">pcie_port_service_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#driver_unregister\">driver_unregister</a>(&amp;<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#pcie_port_service_unregister\">pcie_port_service_unregister</a>);", 
];
xr_frag_insert('l/7b/7e13c6400aa26dc030c0379ca2f8e496b0c950.xr', __xr_tmp);
