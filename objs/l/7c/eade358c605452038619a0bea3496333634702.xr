var __xr_tmp = [
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return 0;", 
"<a class=\"id\" href=\"#fail\">fail</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#xenbus_dev_error\">xenbus_dev_error</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#err\">err</a>, \"xenbus_dev_probe on %s\", <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#nodename\">nodename</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#xenbus_switch_state\">xenbus_switch_state</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#XenbusStateClosed\">XenbusStateClosed</a>);", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"}", 
"", 
"int <a class=\"id\" href=\"#xenbus_dev_remove\">xenbus_dev_remove</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#_dev\">_dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#xenbus_device\">xenbus_device</a> *<a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#to_xenbus_device\">to_xenbus_device</a>(<a class=\"id\" href=\"#_dev\">_dev</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#xenbus_driver\">xenbus_driver</a> *<a class=\"id\" href=\"#drv\">drv</a> = <a class=\"id\" href=\"#to_xenbus_driver\">to_xenbus_driver</a>(<a class=\"id\" href=\"#_dev\">_dev</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#DPRINTK\">DPRINTK</a>(\"%s\", <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#nodename\">nodename</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#free_otherend_watch\">free_otherend_watch</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#free_otherend_details\">free_otherend_details</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#remove\">remove</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#remove\">remove</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#xenbus_switch_state\">xenbus_switch_state</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#XenbusStateClosed\">XenbusStateClosed</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#xenbus_dev_shutdown\">xenbus_dev_shutdown</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#_dev\">_dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#xenbus_device\">xenbus_device</a> *<a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#to_xenbus_device\">to_xenbus_device</a>(<a class=\"id\" href=\"#_dev\">_dev</a>);", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#timeout\">timeout</a> = 5*<a class=\"id\" href=\"#HZ\">HZ</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#DPRINTK\">DPRINTK</a>(\"%s\", <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#nodename\">nodename</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#get_device\">get_device</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#state\">state</a> != <a class=\"id\" href=\"#XenbusStateConnected\">XenbusStateConnected</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"%s: %s: %s != Connected, skipping\\n\", <a class=\"id\" href=\"#__func__\">__func__</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#nodename\">nodename</a>, <a class=\"id\" href=\"#xenbus_strstate\">xenbus_strstate</a>(<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#state\">state</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#xenbus_switch_state\">xenbus_switch_state</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#XenbusStateClosing\">XenbusStateClosing</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#timeout\">timeout</a> = <a class=\"id\" href=\"#wait_for_completion_timeout\">wait_for_completion_timeout</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#down\">down</a>, <a class=\"id\" href=\"#timeout\">timeout</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#timeout\">timeout</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"%s: %s timeout closing device\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#nodename\">nodename</a>);", 
" <a class=\"id\" href=\"#out\">out</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#put_device\">put_device</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"}", 
"", 
"int <a class=\"id\" href=\"#xenbus_register_driver_common\">xenbus_register_driver_common</a>(struct <a class=\"id\" href=\"#xenbus_driver\">xenbus_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  struct <a class=\"id\" href=\"#xen_bus_type\">xen_bus_type</a> *<a class=\"id\" href=\"#bus\">bus</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  struct <a class=\"id\" href=\"#module\">module</a> *<a class=\"id\" href=\"#owner\">owner</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  const char *<a class=\"id\" href=\"#mod_name\">mod_name</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>.<a class=\"id\" href=\"#name\">name</a> = <a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#name\">name</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>.<a class=\"id\" href=\"#bus\">bus</a> = &amp;<a class=\"id\" href=\"#bus\">bus</a>-><a class=\"id\" href=\"#bus\">bus</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>.<a class=\"id\" href=\"#owner\">owner</a> = <a class=\"id\" href=\"#owner\">owner</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>.<a class=\"id\" href=\"#mod_name\">mod_name</a> = <a class=\"id\" href=\"#mod_name\">mod_name</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#driver_register\">driver_register</a>(&amp;<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"}", 
"", 
"int <a class=\"id\" href=\"#__xenbus_register_frontend\">__xenbus_register_frontend</a>(struct <a class=\"id\" href=\"#xenbus_driver\">xenbus_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       struct <a class=\"id\" href=\"#module\">module</a> *<a class=\"id\" href=\"#owner\">owner</a>, const char *<a class=\"id\" href=\"#mod_name\">mod_name</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#read_otherend_details\">read_otherend_details</a> = <a class=\"id\" href=\"#read_backend_details\">read_backend_details</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#xenbus_register_driver_common\">xenbus_register_driver_common</a>(<a class=\"id\" href=\"#drv\">drv</a>, &amp;<a class=\"id\" href=\"#xenbus_frontend\">xenbus_frontend</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#owner\">owner</a>, <a class=\"id\" href=\"#mod_name\">mod_name</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* If this driver is loaded as a module wait for devices to attach. */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#wait_for_devices\">wait_for_devices</a>(<a class=\"id\" href=\"#drv\">drv</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#__xenbus_register_frontend\">__xenbus_register_frontend</a>);", 
"", 
"void <a class=\"id\" href=\"#xenbus_unregister_driver\">xenbus_unregister_driver</a>(struct <a class=\"id\" href=\"#xenbus_driver\">xenbus_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#driver_unregister\">driver_unregister</a>(&amp;<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#xenbus_unregister_driver\">xenbus_unregister_driver</a>);", 
"", 
"struct <a class=\"id\" href=\"#xb_find_info\">xb_find_info</a>", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#xenbus_device\">xenbus_device</a> *<a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/>const char *<a class=\"id\" href=\"#nodename\">nodename</a>;", 
"};", 
"", 
"static int <a class=\"id\" href=\"#cmp_dev\">cmp_dev</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, void *<a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#xenbus_device\">xenbus_device</a> *<a class=\"id\" href=\"#xendev\">xendev</a> = <a class=\"id\" href=\"#to_xenbus_device\">to_xenbus_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#xb_find_info\">xb_find_info</a> *<a class=\"id\" href=\"#info\">info</a> = <a class=\"id\" href=\"#data\">data</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#strcmp\">strcmp</a>(<a class=\"id\" href=\"#xendev\">xendev</a>-><a class=\"id\" href=\"#nodename\">nodename</a>, <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#nodename\">nodename</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#xendev\">xendev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#get_device\">get_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"struct <a class=\"id\" href=\"#xenbus_device\">xenbus_device</a> *<a class=\"id\" href=\"#xenbus_device_find\">xenbus_device_find</a>(const char *<a class=\"id\" href=\"#nodename\">nodename</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> struct <a class=\"id\" href=\"#bus_type\">bus_type</a> *<a class=\"id\" href=\"#bus\">bus</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#xb_find_info\">xb_find_info</a> <a class=\"id\" href=\"#info\">info</a> = { .<a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#NULL\">NULL</a>, .<a class=\"id\" href=\"#nodename\">nodename</a> = <a class=\"id\" href=\"#nodename\">nodename</a> };", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bus_for_each_dev\">bus_for_each_dev</a>(<a class=\"id\" href=\"#bus\">bus</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, &amp;<a class=\"id\" href=\"#info\">info</a>, <a class=\"id\" href=\"#cmp_dev\">cmp_dev</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#info\">info</a>.<a class=\"id\" href=\"#dev\">dev</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#cleanup_dev\">cleanup_dev</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, void *<a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#xenbus_device\">xenbus_device</a> *<a class=\"id\" href=\"#xendev\">xendev</a> = <a class=\"id\" href=\"#to_xenbus_device\">to_xenbus_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#xb_find_info\">xb_find_info</a> *<a class=\"id\" href=\"#info\">info</a> = <a class=\"id\" href=\"#data\">data</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#len\">len</a> = <a class=\"id\" href=\"#strlen\">strlen</a>(<a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#nodename\">nodename</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#DPRINTK\">DPRINTK</a>(\"%s\", <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#nodename\">nodename</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Match the info-&gt;nodename path, or any subdirectory of that path. */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#xendev\">xendev</a>-><a class=\"id\" href=\"#nodename\">nodename</a>, <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#nodename\">nodename</a>, <a class=\"id\" href=\"#len\">len</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* If the node name is longer, ensure it really is a subdirectory. */</span>", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#strlen\">strlen</a>(<a class=\"id\" href=\"#xendev\">xendev</a>-><a class=\"id\" href=\"#nodename\">nodename</a>) &gt; <a class=\"id\" href=\"#len\">len</a>) && (<a class=\"id\" href=\"#xendev\">xendev</a>-><a class=\"id\" href=\"#nodename\">nodename</a>[<a class=\"id\" href=\"#len\">len</a>] != '/'))", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#xendev\">xendev</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#get_device\">get_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>return 1;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#xenbus_cleanup_devices\">xenbus_cleanup_devices</a>(const char *<a class=\"id\" href=\"#path\">path</a>, struct <a class=\"id\" href=\"#bus_type\">bus_type</a> *<a class=\"id\" href=\"#bus\">bus</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#xb_find_info\">xb_find_info</a> <a class=\"id\" href=\"#info\">info</a> = { .<a class=\"id\" href=\"#nodename\">nodename</a> = <a class=\"id\" href=\"#path\">path</a> };", 
"", 
"<span class=\"ts\"/>do {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a>.<a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bus_for_each_dev\">bus_for_each_dev</a>(<a class=\"id\" href=\"#bus\">bus</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, &amp;<a class=\"id\" href=\"#info\">info</a>, <a class=\"id\" href=\"#cleanup_dev\">cleanup_dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#info\">info</a>.<a class=\"id\" href=\"#dev\">dev</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#device_unregister\">device_unregister</a>(&amp;<a class=\"id\" href=\"#info\">info</a>.<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#put_device\">put_device</a>(&amp;<a class=\"id\" href=\"#info\">info</a>.<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>} while (<a class=\"id\" href=\"#info\">info</a>.<a class=\"id\" href=\"#dev\">dev</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#xenbus_dev_release\">xenbus_dev_release</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#dev\">dev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#to_xenbus_device\">to_xenbus_device</a>(<a class=\"id\" href=\"#dev\">dev</a>));", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#xendev_show_nodename\">xendev_show_nodename</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%s\\n\", <a class=\"id\" href=\"#to_xenbus_device\">to_xenbus_device</a>(<a class=\"id\" href=\"#dev\">dev</a>)-><a class=\"id\" href=\"#nodename\">nodename</a>);", 
"}", 
"static <a class=\"id\" href=\"#DEVICE_ATTR\">DEVICE_ATTR</a>(<a class=\"id\" href=\"#nodename\">nodename</a>, <a class=\"id\" href=\"#S_IRUSR\">S_IRUSR</a> | <a class=\"id\" href=\"#S_IRGRP\">S_IRGRP</a> | <a class=\"id\" href=\"#S_IROTH\">S_IROTH</a>, <a class=\"id\" href=\"#xendev_show_nodename\">xendev_show_nodename</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#xendev_show_devtype\">xendev_show_devtype</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%s\\n\", <a class=\"id\" href=\"#to_xenbus_device\">to_xenbus_device</a>(<a class=\"id\" href=\"#dev\">dev</a>)-><a class=\"id\" href=\"#devicetype\">devicetype</a>);", 
"}", 
"static <a class=\"id\" href=\"#DEVICE_ATTR\">DEVICE_ATTR</a>(<a class=\"id\" href=\"#devtype\">devtype</a>, <a class=\"id\" href=\"#S_IRUSR\">S_IRUSR</a> | <a class=\"id\" href=\"#S_IRGRP\">S_IRGRP</a> | <a class=\"id\" href=\"#S_IROTH\">S_IROTH</a>, <a class=\"id\" href=\"#xendev_show_devtype\">xendev_show_devtype</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#xendev_show_modalias\">xendev_show_modalias</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"xen:%s\\n\", <a class=\"id\" href=\"#to_xenbus_device\">to_xenbus_device</a>(<a class=\"id\" href=\"#dev\">dev</a>)-><a class=\"id\" href=\"#devicetype\">devicetype</a>);", 
"}", 
"static <a class=\"id\" href=\"#DEVICE_ATTR\">DEVICE_ATTR</a>(<a class=\"id\" href=\"#modalias\">modalias</a>, <a class=\"id\" href=\"#S_IRUSR\">S_IRUSR</a> | <a class=\"id\" href=\"#S_IRGRP\">S_IRGRP</a> | <a class=\"id\" href=\"#S_IROTH\">S_IROTH</a>, <a class=\"id\" href=\"#xendev_show_modalias\">xendev_show_modalias</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"", 
"int <a class=\"id\" href=\"#xenbus_probe_node\">xenbus_probe_node</a>(struct <a class=\"id\" href=\"#xen_bus_type\">xen_bus_type</a> *<a class=\"id\" href=\"#bus\">bus</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>      const char *<a class=\"id\" href=\"#type\">type</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>      const char *<a class=\"id\" href=\"#nodename\">nodename</a>)", 
"{", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#devname\">devname</a>[<a class=\"id\" href=\"#XEN_BUS_ID_SIZE\">XEN_BUS_ID_SIZE</a>];", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#xenbus_device\">xenbus_device</a> *<a class=\"id\" href=\"#xendev\">xendev</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#stringlen\">stringlen</a>;", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#tmpstring\">tmpstring</a>;", 
"", 
"<span class=\"ts\"/>enum <a class=\"id\" href=\"#xenbus_state\">xenbus_state</a> <a class=\"id\" href=\"#state\">state</a> = <a class=\"id\" href=\"#xenbus_read_driver_state\">xenbus_read_driver_state</a>(<a class=\"id\" href=\"#nodename\">nodename</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#state\">state</a> != <a class=\"id\" href=\"#XenbusStateInitialising\">XenbusStateInitialising</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Device is not new, so ignore it.  This can happen if a</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/>   device is going away after switching to Closed.  */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#stringlen\">stringlen</a> = <a class=\"id\" href=\"#strlen\">strlen</a>(<a class=\"id\" href=\"#nodename\">nodename</a>) + 1 + <a class=\"id\" href=\"#strlen\">strlen</a>(<a class=\"id\" href=\"#type\">type</a>) + 1;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#xendev\">xendev</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof(*<a class=\"id\" href=\"#xendev\">xendev</a>) + <a class=\"id\" href=\"#stringlen\">stringlen</a>, <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#xendev\">xendev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#xendev\">xendev</a>-><a class=\"id\" href=\"#state\">state</a> = <a class=\"id\" href=\"#XenbusStateInitialising\">XenbusStateInitialising</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Copy the strings into the extra space. */</span>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmpstring\">tmpstring</a> = (char *)(<a class=\"id\" href=\"#xendev\">xendev</a> + 1);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#strcpy\">strcpy</a>(<a class=\"id\" href=\"#tmpstring\">tmpstring</a>, <a class=\"id\" href=\"#nodename\">nodename</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#xendev\">xendev</a>-><a class=\"id\" href=\"#nodename\">nodename</a> = <a class=\"id\" href=\"#tmpstring\">tmpstring</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmpstring\">tmpstring</a> += <a class=\"id\" href=\"#strlen\">strlen</a>(<a class=\"id\" href=\"#tmpstring\">tmpstring</a>) + 1;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#strcpy\">strcpy</a>(<a class=\"id\" href=\"#tmpstring\">tmpstring</a>, <a class=\"id\" href=\"#type\">type</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#xendev\">xendev</a>-><a class=\"id\" href=\"#devicetype\">devicetype</a> = <a class=\"id\" href=\"#tmpstring\">tmpstring</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#init_completion\">init_completion</a>(&amp;<a class=\"id\" href=\"#xendev\">xendev</a>-><a class=\"id\" href=\"#down\">down</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#xendev\">xendev</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#bus\">bus</a> = &amp;<a class=\"id\" href=\"#bus\">bus</a>-><a class=\"id\" href=\"#bus\">bus</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#xendev\">xendev</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#release\">release</a> = <a class=\"id\" href=\"#xenbus_dev_release\">xenbus_dev_release</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#bus\">bus</a>-><a class=\"id\" href=\"#get_bus_id\">get_bus_id</a>(<a class=\"id\" href=\"#devname\">devname</a>, <a class=\"id\" href=\"#xendev\">xendev</a>-><a class=\"id\" href=\"#nodename\">nodename</a>);", 
];
xr_frag_insert('l/7c/eade358c605452038619a0bea3496333634702.xr', __xr_tmp);
