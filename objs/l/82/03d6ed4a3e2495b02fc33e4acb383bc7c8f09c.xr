var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> *  The Serio abstraction module</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *  Copyright (c) 1999-2004 Vojtech Pavlik</span>", 
"<span class=\"comment\"> *  Copyright (c) 2004 Dmitry Torokhov</span>", 
"<span class=\"comment\"> *  Copyright (c) 2003 Daniele Bellucci</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * This program is free software; you can redistribute it and/or modify</span>", 
"<span class=\"comment\"> * it under the terms of the GNU General Public License as published by</span>", 
"<span class=\"comment\"> * the Free Software Foundation; either version 2 of the License, or</span>", 
"<span class=\"comment\"> * (at your option) any later version.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This program is distributed in the hope that it will be useful,</span>", 
"<span class=\"comment\"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>", 
"<span class=\"comment\"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>", 
"<span class=\"comment\"> * GNU General Public License for more details.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * You should have received a copy of the GNU General Public License</span>", 
"<span class=\"comment\"> * along with this program; if not, write to the Free Software</span>", 
"<span class=\"comment\"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Should you need to contact me, the author, you can do so either by</span>", 
"<span class=\"comment\"> * e-mail - mail your message to &lt;vojtech@ucw.cz&gt;, or by paper mail:</span>", 
"<span class=\"comment\"> * Vojtech Pavlik, Simunkova 1594, Prague 8, 182 00 Czech Republic</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#pr_fmt\">pr_fmt</a>(<a class=\"id\" href=\"#fmt\">fmt</a>) <a class=\"id\" href=\"#KBUILD_MODNAME\">KBUILD_MODNAME</a> \": \" <a class=\"id\" href=\"#fmt\">fmt</a>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#stddef\">stddef</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#serio\">serio</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#errno\">errno</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#wait\">wait</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#sched\">sched</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#slab\">slab</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kthread\">kthread</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#mutex\">mutex</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#freezer\">freezer</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"<a class=\"id\" href=\"#MODULE_AUTHOR\">MODULE_AUTHOR</a>(\"Vojtech Pavlik <vojtech@ucw.cz>\");", 
"<a class=\"id\" href=\"#MODULE_DESCRIPTION\">MODULE_DESCRIPTION</a>(\"Serio abstraction core\");", 
"<a class=\"id\" href=\"#MODULE_LICENSE\">MODULE_LICENSE</a>(\"GPL\");", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * serio_mutex protects entire serio subsystem and is taken every time</span>", 
"<span class=\"comment\"> * serio port or driver registrered or unregistered.</span>", 
"<span class=\"comment\"> */</span>", 
"static <a class=\"id\" href=\"#DEFINE_MUTEX\">DEFINE_MUTEX</a>(<a class=\"id\" href=\"#serio_mutex\">serio_mutex</a>);", 
"", 
"static <a class=\"id\" href=\"#LIST_HEAD\">LIST_HEAD</a>(<a class=\"id\" href=\"#serio_list\">serio_list</a>);", 
"", 
"static struct <a class=\"id\" href=\"#bus_type\">bus_type</a> <a class=\"id\" href=\"#serio_bus\">serio_bus</a>;", 
"", 
"static void <a class=\"id\" href=\"#serio_add_port\">serio_add_port</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>);", 
"static int <a class=\"id\" href=\"#serio_reconnect_port\">serio_reconnect_port</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>);", 
"static void <a class=\"id\" href=\"#serio_disconnect_port\">serio_disconnect_port</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>);", 
"static void <a class=\"id\" href=\"#serio_reconnect_chain\">serio_reconnect_chain</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>);", 
"static void <a class=\"id\" href=\"#serio_attach_driver\">serio_attach_driver</a>(struct <a class=\"id\" href=\"#serio_driver\">serio_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>);", 
"", 
"static int <a class=\"id\" href=\"#serio_connect_driver\">serio_connect_driver</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>, struct <a class=\"id\" href=\"#serio_driver\">serio_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv_mutex\">drv_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#connect\">connect</a>(<a class=\"id\" href=\"#serio\">serio</a>, <a class=\"id\" href=\"#drv\">drv</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv_mutex\">drv_mutex</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#serio_reconnect_driver\">serio_reconnect_driver</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a> = -1;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv_mutex\">drv_mutex</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv\">drv</a> && <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#reconnect\">reconnect</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#reconnect\">reconnect</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv_mutex\">drv_mutex</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#serio_disconnect_driver\">serio_disconnect_driver</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv_mutex\">drv_mutex</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv\">drv</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#disconnect\">disconnect</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv_mutex\">drv_mutex</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#serio_match_port\">serio_match_port</a>(const struct <a class=\"id\" href=\"#serio_device_id\">serio_device_id</a> *<a class=\"id\" href=\"#ids\">ids</a>, struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>)", 
"{", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#ids\">ids</a>-><a class=\"id\" href=\"#type\">type</a> || <a class=\"id\" href=\"#ids\">ids</a>-><a class=\"id\" href=\"#proto\">proto</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((<a class=\"id\" href=\"#ids\">ids</a>-><a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#SERIO_ANY\">SERIO_ANY</a> || <a class=\"id\" href=\"#ids\">ids</a>-><a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#type\">type</a>) &&", 
"<span class=\"ts\"/><span class=\"ts\"/>    (<a class=\"id\" href=\"#ids\">ids</a>-><a class=\"id\" href=\"#proto\">proto</a> == <a class=\"id\" href=\"#SERIO_ANY\">SERIO_ANY</a> || <a class=\"id\" href=\"#ids\">ids</a>-><a class=\"id\" href=\"#proto\">proto</a> == <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#proto\">proto</a>) &&", 
"<span class=\"ts\"/><span class=\"ts\"/>    (<a class=\"id\" href=\"#ids\">ids</a>-><a class=\"id\" href=\"#extra\">extra</a> == <a class=\"id\" href=\"#SERIO_ANY\">SERIO_ANY</a> || <a class=\"id\" href=\"#ids\">ids</a>-><a class=\"id\" href=\"#extra\">extra</a> == <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#extra\">extra</a>) &&", 
"<span class=\"ts\"/><span class=\"ts\"/>    (<a class=\"id\" href=\"#ids\">ids</a>-><a class=\"id\" href=\"#id\">id</a> == <a class=\"id\" href=\"#SERIO_ANY\">SERIO_ANY</a> || <a class=\"id\" href=\"#ids\">ids</a>-><a class=\"id\" href=\"#id\">id</a> == <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#id\">id</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ids\">ids</a>++;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Basic serio -&gt; driver core mappings</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static int <a class=\"id\" href=\"#serio_bind_driver\">serio_bind_driver</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>, struct <a class=\"id\" href=\"#serio_driver\">serio_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#serio_match_port\">serio_match_port</a>(<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#id_table\">id_table</a>, <a class=\"id\" href=\"#serio\">serio</a>)) {", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#driver\">driver</a> = &amp;<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#serio_connect_driver\">serio_connect_driver</a>(<a class=\"id\" href=\"#serio\">serio</a>, <a class=\"id\" href=\"#drv\">drv</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#driver\">driver</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#device_bind_driver\">device_bind_driver</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_warn\">dev_warn</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> \"device_bind_driver() failed for %s (%s) and %s, error: %d\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#phys\">phys</a>, <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#name\">name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#description\">description</a>, <a class=\"id\" href=\"#error\">error</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_disconnect_driver\">serio_disconnect_driver</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#driver\">driver</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#serio_find_driver\">serio_find_driver</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#device_attach\">device_attach</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_warn\">dev_warn</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> \"device_attach() failed for %s (%s), error: %d\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#phys\">phys</a>, <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#error\">error</a>);", 
"}", 
"", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Serio event processing.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"enum <a class=\"id\" href=\"#serio_event_type\">serio_event_type</a> {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#SERIO_RESCAN_PORT\">SERIO_RESCAN_PORT</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#SERIO_RECONNECT_PORT\">SERIO_RECONNECT_PORT</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#SERIO_RECONNECT_CHAIN\">SERIO_RECONNECT_CHAIN</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#SERIO_REGISTER_PORT\">SERIO_REGISTER_PORT</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#SERIO_ATTACH_DRIVER\">SERIO_ATTACH_DRIVER</a>,", 
"};", 
"", 
"struct <a class=\"id\" href=\"#serio_event\">serio_event</a> {", 
"<span class=\"ts\"/>enum <a class=\"id\" href=\"#serio_event_type\">serio_event_type</a> <a class=\"id\" href=\"#type\">type</a>;", 
"<span class=\"ts\"/>void *<a class=\"id\" href=\"#object\">object</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#module\">module</a> *<a class=\"id\" href=\"#owner\">owner</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#list_head\">list_head</a> <a class=\"id\" href=\"#node\">node</a>;", 
"};", 
"", 
"static <a class=\"id\" href=\"#DEFINE_SPINLOCK\">DEFINE_SPINLOCK</a>(<a class=\"id\" href=\"#serio_event_lock\">serio_event_lock</a>);<span class=\"ts\"/><span class=\"comment\">/* protects serio_event_list */</span>", 
"static <a class=\"id\" href=\"#LIST_HEAD\">LIST_HEAD</a>(<a class=\"id\" href=\"#serio_event_list\">serio_event_list</a>);", 
"static <a class=\"id\" href=\"#DECLARE_WAIT_QUEUE_HEAD\">DECLARE_WAIT_QUEUE_HEAD</a>(<a class=\"id\" href=\"#serio_wait\">serio_wait</a>);", 
"static struct <a class=\"id\" href=\"#task_struct\">task_struct</a> *<a class=\"id\" href=\"#serio_task\">serio_task</a>;", 
"", 
"static int <a class=\"id\" href=\"#serio_queue_event\">serio_queue_event</a>(void *<a class=\"id\" href=\"#object\">object</a>, struct <a class=\"id\" href=\"#module\">module</a> *<a class=\"id\" href=\"#owner\">owner</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     enum <a class=\"id\" href=\"#serio_event_type\">serio_event_type</a> <a class=\"id\" href=\"#event_type\">event_type</a>)", 
"{", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio_event\">serio_event</a> *<a class=\"id\" href=\"#event\">event</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a> = 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irqsave\">spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#serio_event_lock\">serio_event_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Scan event list for the other events for the same serio port,</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * starting with the most recent one. If event is the same we</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * do not need add new one. If event is of different type we</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * need to add this event and should not look further because</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * we need to preseve sequence of distinct events.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry_reverse\">list_for_each_entry_reverse</a>(<a class=\"id\" href=\"#event\">event</a>, &amp;<a class=\"id\" href=\"#serio_event_list\">serio_event_list</a>, <a class=\"id\" href=\"#node\">node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#object\">object</a> == <a class=\"id\" href=\"#object\">object</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#event_type\">event_type</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#event\">event</a> = <a class=\"id\" href=\"#kmalloc\">kmalloc</a>(sizeof(struct <a class=\"id\" href=\"#serio_event\">serio_event</a>), <a class=\"id\" href=\"#GFP_ATOMIC\">GFP_ATOMIC</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#event\">event</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_err\">pr_err</a>(\"Not enough memory to queue event %d\\n\", <a class=\"id\" href=\"#event_type\">event_type</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#try_module_get\">try_module_get</a>(<a class=\"id\" href=\"#owner\">owner</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_warning\">pr_warning</a>(\"Can't get module reference, dropping event %d\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#event_type\">event_type</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#event\">event</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#type\">type</a> = <a class=\"id\" href=\"#event_type\">event_type</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#object\">object</a> = <a class=\"id\" href=\"#object\">object</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#owner\">owner</a> = <a class=\"id\" href=\"#owner\">owner</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_add_tail\">list_add_tail</a>(&amp;<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#node\">node</a>, &amp;<a class=\"id\" href=\"#serio_event_list\">serio_event_list</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#wake_up\">wake_up</a>(&amp;<a class=\"id\" href=\"#serio_wait\">serio_wait</a>);", 
"", 
"<a class=\"id\" href=\"#out\">out</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irqrestore\">spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#serio_event_lock\">serio_event_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#serio_free_event\">serio_free_event</a>(struct <a class=\"id\" href=\"#serio_event\">serio_event</a> *<a class=\"id\" href=\"#event\">event</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#module_put\">module_put</a>(<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#owner\">owner</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#event\">event</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#serio_remove_duplicate_events\">serio_remove_duplicate_events</a>(struct <a class=\"id\" href=\"#serio_event\">serio_event</a> *<a class=\"id\" href=\"#event\">event</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio_event\">serio_event</a> *<a class=\"id\" href=\"#e\">e</a>, *<a class=\"id\" href=\"#next\">next</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irqsave\">spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#serio_event_lock\">serio_event_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry_safe\">list_for_each_entry_safe</a>(<a class=\"id\" href=\"#e\">e</a>, <a class=\"id\" href=\"#next\">next</a>, &amp;<a class=\"id\" href=\"#serio_event_list\">serio_event_list</a>, <a class=\"id\" href=\"#node\">node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#object\">object</a> == <a class=\"id\" href=\"#e\">e</a>-><a class=\"id\" href=\"#object\">object</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * If this event is of different type we should not</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * look further - we only suppress duplicate events</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * that were sent back-to-back.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#type\">type</a> != <a class=\"id\" href=\"#e\">e</a>-><a class=\"id\" href=\"#type\">type</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_del_init\">list_del_init</a>(&amp;<a class=\"id\" href=\"#e\">e</a>-><a class=\"id\" href=\"#node\">node</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_free_event\">serio_free_event</a>(<a class=\"id\" href=\"#e\">e</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irqrestore\">spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#serio_event_lock\">serio_event_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"}", 
"", 
"", 
"static struct <a class=\"id\" href=\"#serio_event\">serio_event</a> *<a class=\"id\" href=\"#serio_get_event\">serio_get_event</a>(void)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio_event\">serio_event</a> *<a class=\"id\" href=\"#event\">event</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irqsave\">spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#serio_event_lock\">serio_event_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#list_empty\">list_empty</a>(&amp;<a class=\"id\" href=\"#serio_event_list\">serio_event_list</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#event\">event</a> = <a class=\"id\" href=\"#list_first_entry\">list_first_entry</a>(&amp;<a class=\"id\" href=\"#serio_event_list\">serio_event_list</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> struct <a class=\"id\" href=\"#serio_event\">serio_event</a>, <a class=\"id\" href=\"#node\">node</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_del_init\">list_del_init</a>(&amp;<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#node\">node</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irqrestore\">spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#serio_event_lock\">serio_event_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#event\">event</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#serio_handle_event\">serio_handle_event</a>(void)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio_event\">serio_event</a> *<a class=\"id\" href=\"#event\">event</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#serio_mutex\">serio_mutex</a>);", 
"", 
"<span class=\"ts\"/>while ((<a class=\"id\" href=\"#event\">event</a> = <a class=\"id\" href=\"#serio_get_event\">serio_get_event</a>())) {", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>switch (<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#type\">type</a>) {", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#SERIO_REGISTER_PORT\">SERIO_REGISTER_PORT</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_add_port\">serio_add_port</a>(<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#object\">object</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#SERIO_RECONNECT_PORT\">SERIO_RECONNECT_PORT</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_reconnect_port\">serio_reconnect_port</a>(<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#object\">object</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#SERIO_RESCAN_PORT\">SERIO_RESCAN_PORT</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_disconnect_port\">serio_disconnect_port</a>(<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#object\">object</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_find_driver\">serio_find_driver</a>(<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#object\">object</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#SERIO_RECONNECT_CHAIN\">SERIO_RECONNECT_CHAIN</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_reconnect_chain\">serio_reconnect_chain</a>(<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#object\">object</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#SERIO_ATTACH_DRIVER\">SERIO_ATTACH_DRIVER</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_attach_driver\">serio_attach_driver</a>(<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#object\">object</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_remove_duplicate_events\">serio_remove_duplicate_events</a>(<a class=\"id\" href=\"#event\">event</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_free_event\">serio_free_event</a>(<a class=\"id\" href=\"#event\">event</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#serio_mutex\">serio_mutex</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Remove all events that have been submitted for a given</span>", 
"<span class=\"comment\"> * object, be it serio port or driver.</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#serio_remove_pending_events\">serio_remove_pending_events</a>(void *<a class=\"id\" href=\"#object\">object</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio_event\">serio_event</a> *<a class=\"id\" href=\"#event\">event</a>, *<a class=\"id\" href=\"#next\">next</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irqsave\">spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#serio_event_lock\">serio_event_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry_safe\">list_for_each_entry_safe</a>(<a class=\"id\" href=\"#event\">event</a>, <a class=\"id\" href=\"#next\">next</a>, &amp;<a class=\"id\" href=\"#serio_event_list\">serio_event_list</a>, <a class=\"id\" href=\"#node\">node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#object\">object</a> == <a class=\"id\" href=\"#object\">object</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_del_init\">list_del_init</a>(&amp;<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#node\">node</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_free_event\">serio_free_event</a>(<a class=\"id\" href=\"#event\">event</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irqrestore\">spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#serio_event_lock\">serio_event_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Destroy child serio port (if any) that has not been fully registered yet.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Note that we rely on the fact that port can have only one child and therefore</span>", 
"<span class=\"comment\"> * only one child registration request can be pending. Additionally, children</span>", 
"<span class=\"comment\"> * are registered by driver's connect() handler so there can't be a grandchild</span>", 
"<span class=\"comment\"> * pending registration together with a child.</span>", 
"<span class=\"comment\"> */</span>", 
"static struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio_get_pending_child\">serio_get_pending_child</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#parent\">parent</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio_event\">serio_event</a> *<a class=\"id\" href=\"#event\">event</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>, *<a class=\"id\" href=\"#child\">child</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irqsave\">spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#serio_event_lock\">serio_event_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#event\">event</a>, &amp;<a class=\"id\" href=\"#serio_event_list\">serio_event_list</a>, <a class=\"id\" href=\"#node\">node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#SERIO_REGISTER_PORT\">SERIO_REGISTER_PORT</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a> = <a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#object\">object</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#parent\">parent</a> == <a class=\"id\" href=\"#parent\">parent</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#child\">child</a> = <a class=\"id\" href=\"#serio\">serio</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irqrestore\">spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#serio_event_lock\">serio_event_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#child\">child</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#serio_thread\">serio_thread</a>(void *<a class=\"id\" href=\"#nothing\">nothing</a>)", 
"{", 
"<span class=\"ts\"/>do {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_handle_event\">serio_handle_event</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#wait_event_interruptible\">wait_event_interruptible</a>(<a class=\"id\" href=\"#serio_wait\">serio_wait</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kthread_should_stop\">kthread_should_stop</a>() || !<a class=\"id\" href=\"#list_empty\">list_empty</a>(&amp;<a class=\"id\" href=\"#serio_event_list\">serio_event_list</a>));", 
"<span class=\"ts\"/>} while (!<a class=\"id\" href=\"#kthread_should_stop\">kthread_should_stop</a>());", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Serio port operations</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#serio_show_description\">serio_show_description</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a> = <a class=\"id\" href=\"#to_serio_port\">to_serio_port</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%s\\n\", <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#name\">name</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#serio_show_modalias\">serio_show_modalias</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a> = <a class=\"id\" href=\"#to_serio_port\">to_serio_port</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"serio:ty%02Xpr%02Xid%02Xex%02X\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#type\">type</a>, <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#proto\">proto</a>, <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#id\">id</a>, <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#extra\">extra</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#serio_show_id_type\">serio_show_id_type</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a> = <a class=\"id\" href=\"#to_serio_port\">to_serio_port</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%02x\\n\", <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#type\">type</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#serio_show_id_proto\">serio_show_id_proto</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a> = <a class=\"id\" href=\"#to_serio_port\">to_serio_port</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%02x\\n\", <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#proto\">proto</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#serio_show_id_id\">serio_show_id_id</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a> = <a class=\"id\" href=\"#to_serio_port\">to_serio_port</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%02x\\n\", <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#id\">id</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#serio_show_id_extra\">serio_show_id_extra</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a> = <a class=\"id\" href=\"#to_serio_port\">to_serio_port</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%02x\\n\", <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#extra\">extra</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#DEVICE_ATTR\">DEVICE_ATTR</a>(<a class=\"id\" href=\"#type\">type</a>, <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>, <a class=\"id\" href=\"#serio_show_id_type\">serio_show_id_type</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"static <a class=\"id\" href=\"#DEVICE_ATTR\">DEVICE_ATTR</a>(<a class=\"id\" href=\"#proto\">proto</a>, <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>, <a class=\"id\" href=\"#serio_show_id_proto\">serio_show_id_proto</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"static <a class=\"id\" href=\"#DEVICE_ATTR\">DEVICE_ATTR</a>(<a class=\"id\" href=\"#id\">id</a>, <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>, <a class=\"id\" href=\"#serio_show_id_id\">serio_show_id_id</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"static <a class=\"id\" href=\"#DEVICE_ATTR\">DEVICE_ATTR</a>(<a class=\"id\" href=\"#extra\">extra</a>, <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>, <a class=\"id\" href=\"#serio_show_id_extra\">serio_show_id_extra</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"", 
"static struct <a class=\"id\" href=\"#attribute\">attribute</a> *<a class=\"id\" href=\"#serio_device_id_attrs\">serio_device_id_attrs</a>[] = {", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_type\">dev_attr_type</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_proto\">dev_attr_proto</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_id\">dev_attr_id</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_extra\">dev_attr_extra</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#NULL\">NULL</a>", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#attribute_group\">attribute_group</a> <a class=\"id\" href=\"#serio_id_attr_group\">serio_id_attr_group</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a><span class=\"ts\"/>= \"id\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#attrs\">attrs</a><span class=\"ts\"/>= <a class=\"id\" href=\"#serio_device_id_attrs\">serio_device_id_attrs</a>,", 
"};", 
"", 
"static const struct <a class=\"id\" href=\"#attribute_group\">attribute_group</a> *<a class=\"id\" href=\"#serio_device_attr_groups\">serio_device_attr_groups</a>[] = {", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#serio_id_attr_group\">serio_id_attr_group</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#NULL\">NULL</a>", 
"};", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#serio_rebind_driver\">serio_rebind_driver</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, const char *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a> = <a class=\"id\" href=\"#to_serio_port\">to_serio_port</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#device_driver\">device_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#mutex_lock_interruptible\">mutex_lock_interruptible</a>(&amp;<a class=\"id\" href=\"#serio_mutex\">serio_mutex</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"none\", <a class=\"id\" href=\"#count\">count</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_disconnect_port\">serio_disconnect_port</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/>} else if (!<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"reconnect\", <a class=\"id\" href=\"#count\">count</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_reconnect_chain\">serio_reconnect_chain</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/>} else if (!<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"rescan\", <a class=\"id\" href=\"#count\">count</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_disconnect_port\">serio_disconnect_port</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_find_driver\">serio_find_driver</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/>} else if ((<a class=\"id\" href=\"#drv\">drv</a> = <a class=\"id\" href=\"#driver_find\">driver_find</a>(<a class=\"id\" href=\"#buf\">buf</a>, &amp;<a class=\"id\" href=\"#serio_bus\">serio_bus</a>)) != <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_disconnect_port\">serio_disconnect_port</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#serio_bind_driver\">serio_bind_driver</a>(<a class=\"id\" href=\"#serio\">serio</a>, <a class=\"id\" href=\"#to_serio_driver\">to_serio_driver</a>(<a class=\"id\" href=\"#drv\">drv</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#put_driver\">put_driver</a>(<a class=\"id\" href=\"#drv\">drv</a>);", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#serio_mutex\">serio_mutex</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a> ? <a class=\"id\" href=\"#error\">error</a> : <a class=\"id\" href=\"#count\">count</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#serio_show_bind_mode\">serio_show_bind_mode</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a> = <a class=\"id\" href=\"#to_serio_port\">to_serio_port</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%s\\n\", <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#manual_bind\">manual_bind</a> ? \"manual\" : \"auto\");", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#serio_set_bind_mode\">serio_set_bind_mode</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, const char *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a> = <a class=\"id\" href=\"#to_serio_port\">to_serio_port</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#count\">count</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"manual\", <a class=\"id\" href=\"#count\">count</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#manual_bind\">manual_bind</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/>} else if (!<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"auto\", <a class=\"id\" href=\"#count\">count</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#manual_bind\">manual_bind</a> = <a class=\"id\" href=\"#false\">false</a>;", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> <a class=\"id\" href=\"#serio_device_attrs\">serio_device_attrs</a>[] = {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__ATTR\">__ATTR</a>(<a class=\"id\" href=\"#description\">description</a>, <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>, <a class=\"id\" href=\"#serio_show_description\">serio_show_description</a>, <a class=\"id\" href=\"#NULL\">NULL</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__ATTR\">__ATTR</a>(<a class=\"id\" href=\"#modalias\">modalias</a>, <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>, <a class=\"id\" href=\"#serio_show_modalias\">serio_show_modalias</a>, <a class=\"id\" href=\"#NULL\">NULL</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__ATTR\">__ATTR</a>(<a class=\"id\" href=\"#drvctl\">drvctl</a>, <a class=\"id\" href=\"#S_IWUSR\">S_IWUSR</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#serio_rebind_driver\">serio_rebind_driver</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__ATTR\">__ATTR</a>(<a class=\"id\" href=\"#bind_mode\">bind_mode</a>, <a class=\"id\" href=\"#S_IWUSR\">S_IWUSR</a> | <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>, <a class=\"id\" href=\"#serio_show_bind_mode\">serio_show_bind_mode</a>, <a class=\"id\" href=\"#serio_set_bind_mode\">serio_set_bind_mode</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__ATTR_NULL\">__ATTR_NULL</a>", 
"};", 
"", 
"", 
"static void <a class=\"id\" href=\"#serio_release_port\">serio_release_port</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a> = <a class=\"id\" href=\"#to_serio_port\">to_serio_port</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#module_put\">module_put</a>(<a class=\"id\" href=\"#THIS_MODULE\">THIS_MODULE</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Prepare serio port for registration.</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#serio_init_port\">serio_init_port</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>)", 
"{", 
"<span class=\"ts\"/>static <a class=\"id\" href=\"#atomic_t\">atomic_t</a> <a class=\"id\" href=\"#serio_no\">serio_no</a> = <a class=\"id\" href=\"#ATOMIC_INIT\">ATOMIC_INIT</a>(0);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__module_get\">__module_get</a>(<a class=\"id\" href=\"#THIS_MODULE\">THIS_MODULE</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#INIT_LIST_HEAD\">INIT_LIST_HEAD</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#node\">node</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_init\">spin_lock_init</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#lock\">lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_init\">mutex_init</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv_mutex\">drv_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device_initialize\">device_initialize</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_set_name\">dev_set_name</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"serio%ld\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(long)<a class=\"id\" href=\"#atomic_inc_return\">atomic_inc_return</a>(&amp;<a class=\"id\" href=\"#serio_no\">serio_no</a>) - 1);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#bus\">bus</a> = &amp;<a class=\"id\" href=\"#serio_bus\">serio_bus</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#release\">release</a> = <a class=\"id\" href=\"#serio_release_port\">serio_release_port</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#groups\">groups</a> = <a class=\"id\" href=\"#serio_device_attr_groups\">serio_device_attr_groups</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#parent\">parent</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#parent\">parent</a> = &amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#parent\">parent</a>-><a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#depth\">depth</a> = <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#parent\">parent</a>-><a class=\"id\" href=\"#depth\">depth</a> + 1;", 
"<span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#depth\">depth</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#lockdep_set_subclass\">lockdep_set_subclass</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#lock\">lock</a>, <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#depth\">depth</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Complete serio port registration.</span>", 
"<span class=\"comment\"> * Driver core will attempt to find appropriate driver for the port.</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#serio_add_port\">serio_add_port</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#parent\">parent</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_pause_rx\">serio_pause_rx</a>(<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#parent\">parent</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#parent\">parent</a>-><a class=\"id\" href=\"#child\">child</a> = <a class=\"id\" href=\"#serio\">serio</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_continue_rx\">serio_continue_rx</a>(<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#parent\">parent</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_add_tail\">list_add_tail</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#node\">node</a>, &amp;<a class=\"id\" href=\"#serio_list\">serio_list</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#start\">start</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#start\">start</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#device_add\">device_add</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_err\">dev_err</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"device_add() failed for %s (%s), error: %d\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#phys\">phys</a>, <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#error\">error</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * serio_destroy_port() completes deregistration process and removes</span>", 
"<span class=\"comment\"> * port from the system</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#serio_destroy_port\">serio_destroy_port</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#child\">child</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#child\">child</a> = <a class=\"id\" href=\"#serio_get_pending_child\">serio_get_pending_child</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#child\">child</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_remove_pending_events\">serio_remove_pending_events</a>(<a class=\"id\" href=\"#child\">child</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#put_device\">put_device</a>(&amp;<a class=\"id\" href=\"#child\">child</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#stop\">stop</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#stop\">stop</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#parent\">parent</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_pause_rx\">serio_pause_rx</a>(<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#parent\">parent</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#parent\">parent</a>-><a class=\"id\" href=\"#child\">child</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_continue_rx\">serio_continue_rx</a>(<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#parent\">parent</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#parent\">parent</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#device_is_registered\">device_is_registered</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#device_del\">device_del</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_del_init\">list_del_init</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#node\">node</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_remove_pending_events\">serio_remove_pending_events</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#put_device\">put_device</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Reconnect serio port (re-initialize attached device).</span>", 
"<span class=\"comment\"> * If reconnect fails (old device is no longer attached or</span>", 
"<span class=\"comment\"> * there was no device to begin with) we do full rescan in</span>", 
"<span class=\"comment\"> * hope of finding a driver for the port.</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#serio_reconnect_port\">serio_reconnect_port</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#serio_reconnect_driver\">serio_reconnect_driver</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_disconnect_port\">serio_disconnect_port</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_find_driver\">serio_find_driver</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Reconnect serio port and all its children (re-initialize attached devices)</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#serio_reconnect_chain\">serio_reconnect_chain</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>)", 
"{", 
"<span class=\"ts\"/>do {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#serio_reconnect_port\">serio_reconnect_port</a>(<a class=\"id\" href=\"#serio\">serio</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Ok, old children are now gone, we are done */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a> = <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#child\">child</a>;", 
"<span class=\"ts\"/>} while (<a class=\"id\" href=\"#serio\">serio</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * serio_disconnect_port() unbinds a port from its driver. As a side effect</span>", 
"<span class=\"comment\"> * all child ports are unbound and destroyed.</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#serio_disconnect_port\">serio_disconnect_port</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#s\">s</a>, *<a class=\"id\" href=\"#parent\">parent</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#child\">child</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * Children ports should be disconnected and destroyed</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * first, staring with the leaf one, since we don't want</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * to do recursion</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#s\">s</a> = <a class=\"id\" href=\"#serio\">serio</a>; <a class=\"id\" href=\"#s\">s</a>-><a class=\"id\" href=\"#child\">child</a>; <a class=\"id\" href=\"#s\">s</a> = <a class=\"id\" href=\"#s\">s</a>-><a class=\"id\" href=\"#child\">child</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* empty */</span>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>do {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#parent\">parent</a> = <a class=\"id\" href=\"#s\">s</a>-><a class=\"id\" href=\"#parent\">parent</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#device_release_driver\">device_release_driver</a>(&amp;<a class=\"id\" href=\"#s\">s</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_destroy_port\">serio_destroy_port</a>(<a class=\"id\" href=\"#s\">s</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>} while ((<a class=\"id\" href=\"#s\">s</a> = <a class=\"id\" href=\"#parent\">parent</a>) != <a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Ok, no children left, now disconnect this port</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device_release_driver\">device_release_driver</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"}", 
"", 
"void <a class=\"id\" href=\"#serio_rescan\">serio_rescan</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_queue_event\">serio_queue_event</a>(<a class=\"id\" href=\"#serio\">serio</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#SERIO_RESCAN_PORT\">SERIO_RESCAN_PORT</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#serio_rescan\">serio_rescan</a>);", 
"", 
"void <a class=\"id\" href=\"#serio_reconnect\">serio_reconnect</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_queue_event\">serio_queue_event</a>(<a class=\"id\" href=\"#serio\">serio</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#SERIO_RECONNECT_CHAIN\">SERIO_RECONNECT_CHAIN</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#serio_reconnect\">serio_reconnect</a>);", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Submits register request to kseriod for subsequent execution.</span>", 
"<span class=\"comment\"> * Note that port registration is always asynchronous.</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#__serio_register_port\">__serio_register_port</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>, struct <a class=\"id\" href=\"#module\">module</a> *<a class=\"id\" href=\"#owner\">owner</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_init_port\">serio_init_port</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_queue_event\">serio_queue_event</a>(<a class=\"id\" href=\"#serio\">serio</a>, <a class=\"id\" href=\"#owner\">owner</a>, <a class=\"id\" href=\"#SERIO_REGISTER_PORT\">SERIO_REGISTER_PORT</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#__serio_register_port\">__serio_register_port</a>);", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Synchronously unregisters serio port.</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#serio_unregister_port\">serio_unregister_port</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#serio_mutex\">serio_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_disconnect_port\">serio_disconnect_port</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_destroy_port\">serio_destroy_port</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#serio_mutex\">serio_mutex</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#serio_unregister_port\">serio_unregister_port</a>);", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Safely unregisters child port if one is present.</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#serio_unregister_child_port\">serio_unregister_child_port</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#serio_mutex\">serio_mutex</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#child\">child</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_disconnect_port\">serio_disconnect_port</a>(<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#child\">child</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_destroy_port\">serio_destroy_port</a>(<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#child\">child</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#serio_mutex\">serio_mutex</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#serio_unregister_child_port\">serio_unregister_child_port</a>);", 
"", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Serio driver operations</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#serio_driver_show_description\">serio_driver_show_description</a>(struct <a class=\"id\" href=\"#device_driver\">device_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio_driver\">serio_driver</a> *<a class=\"id\" href=\"#driver\">driver</a> = <a class=\"id\" href=\"#to_serio_driver\">to_serio_driver</a>(<a class=\"id\" href=\"#drv\">drv</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%s\\n\", <a class=\"id\" href=\"#driver\">driver</a>-><a class=\"id\" href=\"#description\">description</a> ? <a class=\"id\" href=\"#driver\">driver</a>-><a class=\"id\" href=\"#description\">description</a> : \"(none)\");", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#serio_driver_show_bind_mode\">serio_driver_show_bind_mode</a>(struct <a class=\"id\" href=\"#device_driver\">device_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio_driver\">serio_driver</a> *<a class=\"id\" href=\"#serio_drv\">serio_drv</a> = <a class=\"id\" href=\"#to_serio_driver\">to_serio_driver</a>(<a class=\"id\" href=\"#drv\">drv</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%s\\n\", <a class=\"id\" href=\"#serio_drv\">serio_drv</a>-><a class=\"id\" href=\"#manual_bind\">manual_bind</a> ? \"manual\" : \"auto\");", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#serio_driver_set_bind_mode\">serio_driver_set_bind_mode</a>(struct <a class=\"id\" href=\"#device_driver\">device_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>, const char *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio_driver\">serio_driver</a> *<a class=\"id\" href=\"#serio_drv\">serio_drv</a> = <a class=\"id\" href=\"#to_serio_driver\">to_serio_driver</a>(<a class=\"id\" href=\"#drv\">drv</a>);", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#count\">count</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"manual\", <a class=\"id\" href=\"#count\">count</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_drv\">serio_drv</a>-><a class=\"id\" href=\"#manual_bind\">manual_bind</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/>} else if (!<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"auto\", <a class=\"id\" href=\"#count\">count</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_drv\">serio_drv</a>-><a class=\"id\" href=\"#manual_bind\">manual_bind</a> = <a class=\"id\" href=\"#false\">false</a>;", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"}", 
"", 
"", 
"static struct <a class=\"id\" href=\"#driver_attribute\">driver_attribute</a> <a class=\"id\" href=\"#serio_driver_attrs\">serio_driver_attrs</a>[] = {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__ATTR\">__ATTR</a>(<a class=\"id\" href=\"#description\">description</a>, <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>, <a class=\"id\" href=\"#serio_driver_show_description\">serio_driver_show_description</a>, <a class=\"id\" href=\"#NULL\">NULL</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__ATTR\">__ATTR</a>(<a class=\"id\" href=\"#bind_mode\">bind_mode</a>, <a class=\"id\" href=\"#S_IWUSR\">S_IWUSR</a> | <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_driver_show_bind_mode\">serio_driver_show_bind_mode</a>, <a class=\"id\" href=\"#serio_driver_set_bind_mode\">serio_driver_set_bind_mode</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__ATTR_NULL\">__ATTR_NULL</a>", 
"};", 
"", 
"static int <a class=\"id\" href=\"#serio_driver_probe\">serio_driver_probe</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a> = <a class=\"id\" href=\"#to_serio_port\">to_serio_port</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio_driver\">serio_driver</a> *<a class=\"id\" href=\"#drv\">drv</a> = <a class=\"id\" href=\"#to_serio_driver\">to_serio_driver</a>(<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#serio_connect_driver\">serio_connect_driver</a>(<a class=\"id\" href=\"#serio\">serio</a>, <a class=\"id\" href=\"#drv\">drv</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#serio_driver_remove\">serio_driver_remove</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a> = <a class=\"id\" href=\"#to_serio_port\">to_serio_port</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_disconnect_driver\">serio_disconnect_driver</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#serio_cleanup\">serio_cleanup</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv_mutex\">drv_mutex</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv\">drv</a> && <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#cleanup\">cleanup</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#cleanup\">cleanup</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv_mutex\">drv_mutex</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#serio_shutdown\">serio_shutdown</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a> = <a class=\"id\" href=\"#to_serio_port\">to_serio_port</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_cleanup\">serio_cleanup</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#serio_attach_driver\">serio_attach_driver</a>(struct <a class=\"id\" href=\"#serio_driver\">serio_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#driver_attach\">driver_attach</a>(&amp;<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_warning\">pr_warning</a>(\"driver_attach() failed for %s with error %d\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>.<a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#error\">error</a>);", 
"}", 
"", 
"int <a class=\"id\" href=\"#__serio_register_driver\">__serio_register_driver</a>(struct <a class=\"id\" href=\"#serio_driver\">serio_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>, struct <a class=\"id\" href=\"#module\">module</a> *<a class=\"id\" href=\"#owner\">owner</a>, const char *<a class=\"id\" href=\"#mod_name\">mod_name</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#manual_bind\">manual_bind</a> = <a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#manual_bind\">manual_bind</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>.<a class=\"id\" href=\"#bus\">bus</a> = &amp;<a class=\"id\" href=\"#serio_bus\">serio_bus</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>.<a class=\"id\" href=\"#owner\">owner</a> = <a class=\"id\" href=\"#owner\">owner</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>.<a class=\"id\" href=\"#mod_name\">mod_name</a> = <a class=\"id\" href=\"#mod_name\">mod_name</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Temporarily disable automatic binding because probing</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * takes long time and we are better off doing it in kseriod</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#manual_bind\">manual_bind</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#driver_register\">driver_register</a>(&amp;<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_err\">pr_err</a>(\"driver_register() failed for %s, error: %d\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>.<a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#error\">error</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Restore original bind mode and let kseriod bind the</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * driver to free ports</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#manual_bind\">manual_bind</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#manual_bind\">manual_bind</a> = <a class=\"id\" href=\"#false\">false</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#serio_queue_event\">serio_queue_event</a>(<a class=\"id\" href=\"#drv\">drv</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#SERIO_ATTACH_DRIVER\">SERIO_ATTACH_DRIVER</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#driver_unregister\">driver_unregister</a>(&amp;<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#__serio_register_driver\">__serio_register_driver</a>);", 
"", 
"void <a class=\"id\" href=\"#serio_unregister_driver\">serio_unregister_driver</a>(struct <a class=\"id\" href=\"#serio_driver\">serio_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#serio_mutex\">serio_mutex</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#manual_bind\">manual_bind</a> = <a class=\"id\" href=\"#true\">true</a>;<span class=\"ts\"/><span class=\"comment\">/* so serio_find_driver ignores it */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_remove_pending_events\">serio_remove_pending_events</a>(<a class=\"id\" href=\"#drv\">drv</a>);", 
"", 
"<a class=\"id\" href=\"#start_over\">start_over</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#serio\">serio</a>, &amp;<a class=\"id\" href=\"#serio_list\">serio_list</a>, <a class=\"id\" href=\"#node\">node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv\">drv</a> == <a class=\"id\" href=\"#drv\">drv</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_disconnect_port\">serio_disconnect_port</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_find_driver\">serio_find_driver</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* we could've deleted some ports, restart */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#start_over\">start_over</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#driver_unregister\">driver_unregister</a>(&amp;<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#serio_mutex\">serio_mutex</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#serio_unregister_driver\">serio_unregister_driver</a>);", 
"", 
"static void <a class=\"id\" href=\"#serio_set_drv\">serio_set_drv</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>, struct <a class=\"id\" href=\"#serio_driver\">serio_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_pause_rx\">serio_pause_rx</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv\">drv</a> = <a class=\"id\" href=\"#drv\">drv</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_continue_rx\">serio_continue_rx</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#serio_bus_match\">serio_bus_match</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, struct <a class=\"id\" href=\"#device_driver\">device_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a> = <a class=\"id\" href=\"#to_serio_port\">to_serio_port</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio_driver\">serio_driver</a> *<a class=\"id\" href=\"#serio_drv\">serio_drv</a> = <a class=\"id\" href=\"#to_serio_driver\">to_serio_driver</a>(<a class=\"id\" href=\"#drv\">drv</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#manual_bind\">manual_bind</a> || <a class=\"id\" href=\"#serio_drv\">serio_drv</a>-><a class=\"id\" href=\"#manual_bind\">manual_bind</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#serio_match_port\">serio_match_port</a>(<a class=\"id\" href=\"#serio_drv\">serio_drv</a>-><a class=\"id\" href=\"#id_table\">id_table</a>, <a class=\"id\" href=\"#serio\">serio</a>);", 
"}", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_HOTPLUG\">CONFIG_HOTPLUG</a>", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#SERIO_ADD_UEVENT_VAR\">SERIO_ADD_UEVENT_VAR</a>(<a class=\"id\" href=\"#fmt\">fmt</a>, <a class=\"id\" href=\"#val\">val</a>...)<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/>do {<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#add_uevent_var\">add_uevent_var</a>(<a class=\"id\" href=\"#env\">env</a>, <a class=\"id\" href=\"#fmt\">fmt</a>, <a class=\"id\" href=\"#val\">val</a>);<span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a>)<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/>} while (0)", 
"", 
"static int <a class=\"id\" href=\"#serio_uevent\">serio_uevent</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, struct <a class=\"id\" href=\"#kobj_uevent_env\">kobj_uevent_env</a> *<a class=\"id\" href=\"#env\">env</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#dev\">dev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a> = <a class=\"id\" href=\"#to_serio_port\">to_serio_port</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#SERIO_ADD_UEVENT_VAR\">SERIO_ADD_UEVENT_VAR</a>(\"SERIO_TYPE=%02x\", <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#type\">type</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#SERIO_ADD_UEVENT_VAR\">SERIO_ADD_UEVENT_VAR</a>(\"SERIO_PROTO=%02x\", <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#proto\">proto</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#SERIO_ADD_UEVENT_VAR\">SERIO_ADD_UEVENT_VAR</a>(\"SERIO_ID=%02x\", <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#SERIO_ADD_UEVENT_VAR\">SERIO_ADD_UEVENT_VAR</a>(\"SERIO_EXTRA=%02x\", <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#extra\">extra</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#SERIO_ADD_UEVENT_VAR\">SERIO_ADD_UEVENT_VAR</a>(\"MODALIAS=serio:ty%02Xpr%02Xid%02Xex%02X\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#type\">type</a>, <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#proto\">proto</a>, <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#id\">id</a>, <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#extra\">extra</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"#<a class=\"id\" href=\"#undef\">undef</a> <a class=\"id\" href=\"#SERIO_ADD_UEVENT_VAR\">SERIO_ADD_UEVENT_VAR</a>", 
"", 
"#else", 
"", 
"static int <a class=\"id\" href=\"#serio_uevent\">serio_uevent</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, struct <a class=\"id\" href=\"#kobj_uevent_env\">kobj_uevent_env</a> *<a class=\"id\" href=\"#env\">env</a>)", 
"{", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"}", 
"", 
"#<a class=\"id\" href=\"#endif\">endif</a> <span class=\"comment\">/* CONFIG_HOTPLUG */</span>", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_PM\">CONFIG_PM</a>", 
"static int <a class=\"id\" href=\"#serio_suspend\">serio_suspend</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a> = <a class=\"id\" href=\"#to_serio_port\">to_serio_port</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_cleanup\">serio_cleanup</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#serio_resume\">serio_resume</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a> = <a class=\"id\" href=\"#to_serio_port\">to_serio_port</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Driver reconnect can take a while, so better let kseriod</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * deal with it.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_queue_event\">serio_queue_event</a>(<a class=\"id\" href=\"#serio\">serio</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#SERIO_RECONNECT_PORT\">SERIO_RECONNECT_PORT</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static const struct <a class=\"id\" href=\"#dev_pm_ops\">dev_pm_ops</a> <a class=\"id\" href=\"#serio_pm_ops\">serio_pm_ops</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#suspend\">suspend</a><span class=\"ts\"/>= <a class=\"id\" href=\"#serio_suspend\">serio_suspend</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#resume\">resume</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#serio_resume\">serio_resume</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#poweroff\">poweroff</a><span class=\"ts\"/>= <a class=\"id\" href=\"#serio_suspend\">serio_suspend</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#restore\">restore</a><span class=\"ts\"/>= <a class=\"id\" href=\"#serio_resume\">serio_resume</a>,", 
"};", 
"#<a class=\"id\" href=\"#endif\">endif</a> <span class=\"comment\">/* CONFIG_PM */</span>", 
"", 
"<span class=\"comment\">/* called from serio_driver-&gt;connect/disconnect methods under serio_mutex */</span>", 
"int <a class=\"id\" href=\"#serio_open\">serio_open</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>, struct <a class=\"id\" href=\"#serio_driver\">serio_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_set_drv\">serio_set_drv</a>(<a class=\"id\" href=\"#serio\">serio</a>, <a class=\"id\" href=\"#drv\">drv</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#open\">open</a> && <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#open\">open</a>(<a class=\"id\" href=\"#serio\">serio</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_set_drv\">serio_set_drv</a>(<a class=\"id\" href=\"#serio\">serio</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#serio_open\">serio_open</a>);", 
"", 
"<span class=\"comment\">/* called from serio_driver-&gt;connect/disconnect methods under serio_mutex */</span>", 
"void <a class=\"id\" href=\"#serio_close\">serio_close</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#close\">close</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#close\">close</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_set_drv\">serio_set_drv</a>(<a class=\"id\" href=\"#serio\">serio</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#serio_close\">serio_close</a>);", 
"", 
"<a class=\"id\" href=\"#irqreturn_t\">irqreturn_t</a> <a class=\"id\" href=\"#serio_interrupt\">serio_interrupt</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#data\">data</a>, unsigned int <a class=\"id\" href=\"#dfl\">dfl</a>)", 
"{", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#irqreturn_t\">irqreturn_t</a> <a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#IRQ_NONE\">IRQ_NONE</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irqsave\">spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#lock\">lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"        if (<a class=\"id\" href=\"#likely\">likely</a>(<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv\">drv</a>)) {", 
"                <a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#interrupt\">interrupt</a>(<a class=\"id\" href=\"#serio\">serio</a>, <a class=\"id\" href=\"#data\">data</a>, <a class=\"id\" href=\"#dfl\">dfl</a>);", 
"<span class=\"ts\"/>} else if (!<a class=\"id\" href=\"#dfl\">dfl</a> && <a class=\"id\" href=\"#device_is_registered\">device_is_registered</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_rescan\">serio_rescan</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#IRQ_HANDLED\">IRQ_HANDLED</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irqrestore\">spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#lock\">lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#serio_interrupt\">serio_interrupt</a>);", 
"", 
"static struct <a class=\"id\" href=\"#bus_type\">bus_type</a> <a class=\"id\" href=\"#serio_bus\">serio_bus</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a><span class=\"ts\"/><span class=\"ts\"/>= \"serio\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#dev_attrs\">dev_attrs</a><span class=\"ts\"/>= <a class=\"id\" href=\"#serio_device_attrs\">serio_device_attrs</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#drv_attrs\">drv_attrs</a><span class=\"ts\"/>= <a class=\"id\" href=\"#serio_driver_attrs\">serio_driver_attrs</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#match\">match</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#serio_bus_match\">serio_bus_match</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#uevent\">uevent</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#serio_uevent\">serio_uevent</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#probe\">probe</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#serio_driver_probe\">serio_driver_probe</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#remove\">remove</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#serio_driver_remove\">serio_driver_remove</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#shutdown\">shutdown</a><span class=\"ts\"/>= <a class=\"id\" href=\"#serio_shutdown\">serio_shutdown</a>,", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_PM\">CONFIG_PM</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#pm\">pm</a><span class=\"ts\"/><span class=\"ts\"/>= &amp;<a class=\"id\" href=\"#serio_pm_ops\">serio_pm_ops</a>,", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"};", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#serio_init\">serio_init</a>(void)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#bus_register\">bus_register</a>(&amp;<a class=\"id\" href=\"#serio_bus\">serio_bus</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_err\">pr_err</a>(\"Failed to register serio bus, error: %d\\n\", <a class=\"id\" href=\"#error\">error</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_task\">serio_task</a> = <a class=\"id\" href=\"#kthread_run\">kthread_run</a>(<a class=\"id\" href=\"#serio_thread\">serio_thread</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, \"kseriod\");", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#IS_ERR\">IS_ERR</a>(<a class=\"id\" href=\"#serio_task\">serio_task</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bus_unregister\">bus_unregister</a>(&amp;<a class=\"id\" href=\"#serio_bus\">serio_bus</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#PTR_ERR\">PTR_ERR</a>(<a class=\"id\" href=\"#serio_task\">serio_task</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_err\">pr_err</a>(\"Failed to start kseriod, error: %d\\n\", <a class=\"id\" href=\"#error\">error</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#__exit\">__exit</a> <a class=\"id\" href=\"#serio_exit\">serio_exit</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bus_unregister\">bus_unregister</a>(&amp;<a class=\"id\" href=\"#serio_bus\">serio_bus</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kthread_stop\">kthread_stop</a>(<a class=\"id\" href=\"#serio_task\">serio_task</a>);", 
"}", 
"", 
"<a class=\"id\" href=\"#subsys_initcall\">subsys_initcall</a>(<a class=\"id\" href=\"#serio_init\">serio_init</a>);", 
"<a class=\"id\" href=\"#module_exit\">module_exit</a>(<a class=\"id\" href=\"#serio_exit\">serio_exit</a>);", 
];
xr_frag_insert('l/82/03d6ed4a3e2495b02fc33e4acb383bc7c8f09c.xr', __xr_tmp);
