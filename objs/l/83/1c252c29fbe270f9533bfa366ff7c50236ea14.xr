var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> *  linux/drivers/char/vt_ioctl.c</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *  Copyright (C) 1992 obz under the linux copyright</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *  Dynamic diacritical handling - aeb@cwi.nl - Dec 1993</span>", 
"<span class=\"comment\"> *  Dynamic keymap and string allocation - aeb@cwi.nl - May 1994</span>", 
"<span class=\"comment\"> *  Restrict VT switching via ioctl() - grif@cs.ucr.edu - Dec 1995</span>", 
"<span class=\"comment\"> *  Some code moved for less code duplication - Andi Kleen - Mar 1997</span>", 
"<span class=\"comment\"> *  Check put/get_user, cleanups - acme@conectiva.com.br - Jun 2001</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#types\">types</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#errno\">errno</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#sched\">sched</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#tty\">tty</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#timer\">timer</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kernel\">kernel</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#compat\">compat</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kd\">kd</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#vt\">vt</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#string\">string</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#slab\">slab</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#major\">major</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#fs\">fs</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#console\">console</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#consolemap\">consolemap</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#signal\">signal</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#smp_lock\">smp_lock</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#timex\">timex</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#io\">io</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#uaccess\">uaccess</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kbd_kern\">kbd_kern</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#vt_kern\">vt_kern</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kbd_diacr\">kbd_diacr</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#selection\">selection</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"char <a class=\"id\" href=\"#vt_dont_switch\">vt_dont_switch</a>;", 
"extern struct <a class=\"id\" href=\"#tty_driver\">tty_driver</a> *<a class=\"id\" href=\"#console_driver\">console_driver</a>;", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#VT_IS_IN_USE\">VT_IS_IN_USE</a>(<a class=\"id\" href=\"#i\">i</a>)<span class=\"ts\"/>(<a class=\"id\" href=\"#console_driver\">console_driver</a>-><a class=\"id\" href=\"#ttys\">ttys</a>[<a class=\"id\" href=\"#i\">i</a>] && <a class=\"id\" href=\"#console_driver\">console_driver</a>-><a class=\"id\" href=\"#ttys\">ttys</a>[<a class=\"id\" href=\"#i\">i</a>]-><a class=\"id\" href=\"#count\">count</a>)", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#VT_BUSY\">VT_BUSY</a>(<a class=\"id\" href=\"#i\">i</a>)<span class=\"ts\"/>(<a class=\"id\" href=\"#VT_IS_IN_USE\">VT_IS_IN_USE</a>(<a class=\"id\" href=\"#i\">i</a>) || <a class=\"id\" href=\"#i\">i</a> == <a class=\"id\" href=\"#fg_console\">fg_console</a> || <a class=\"id\" href=\"#vc_cons\">vc_cons</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#d\">d</a> == <a class=\"id\" href=\"#sel_cons\">sel_cons</a>)", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Console (vt and kd) routines, as defined by USL SVR4 manual, and by</span>", 
"<span class=\"comment\"> * experimentation and study of X386 SYSV handling.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * One point of difference: SYSV vt's are /dev/vtX, which X &gt;= 0, and</span>", 
"<span class=\"comment\"> * /dev/console is a separate ttyp. Under Linux, /dev/tty0 is /dev/console,</span>", 
"<span class=\"comment\"> * and the vc start at /dev/ttyX, X &gt;= 1. We maintain that here, so we will</span>", 
"<span class=\"comment\"> * always treat our set of vt as numbered 1..MAX_NR_CONSOLES (corresponding to</span>", 
"<span class=\"comment\"> * ttys 0..MAX_NR_CONSOLES-1). Explicitly naming VT 0 is illegal, but using</span>", 
"<span class=\"comment\"> * /dev/tty0 (fg_console) as a target is legal, since an implicit aliasing</span>", 
"<span class=\"comment\"> * to the current console is done by the main ioctl code.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_X86\">CONFIG_X86</a>", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#syscalls\">syscalls</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"static void <a class=\"id\" href=\"#complete_change_console\">complete_change_console</a>(struct <a class=\"id\" href=\"#vc_data\">vc_data</a> *<a class=\"id\" href=\"#vc\">vc</a>);", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>User space VT_EVENT handlers</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"struct <a class=\"id\" href=\"#vt_event_wait\">vt_event_wait</a> {", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#list_head\">list_head</a> <a class=\"id\" href=\"#list\">list</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#vt_event\">vt_event</a> <a class=\"id\" href=\"#event\">event</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#done\">done</a>;", 
"};", 
"", 
"static <a class=\"id\" href=\"#LIST_HEAD\">LIST_HEAD</a>(<a class=\"id\" href=\"#vt_events\">vt_events</a>);", 
"static <a class=\"id\" href=\"#DEFINE_SPINLOCK\">DEFINE_SPINLOCK</a>(<a class=\"id\" href=\"#vt_event_lock\">vt_event_lock</a>);", 
"static <a class=\"id\" href=\"#DECLARE_WAIT_QUEUE_HEAD\">DECLARE_WAIT_QUEUE_HEAD</a>(<a class=\"id\" href=\"#vt_event_waitqueue\">vt_event_waitqueue</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>vt_event_post</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@event: the event that occurred</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@old: old console</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@new: new console</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Post an VT event to interested VT handlers</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"void <a class=\"id\" href=\"#vt_event_post\">vt_event_post</a>(unsigned int <a class=\"id\" href=\"#event\">event</a>, unsigned int <a class=\"id\" href=\"#old\">old</a>, unsigned int <a class=\"id\" href=\"#new\">new</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#list_head\">list_head</a> *<a class=\"id\" href=\"#pos\">pos</a>, *<a class=\"id\" href=\"#head\">head</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#wake\">wake</a> = 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irqsave\">spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#vt_event_lock\">vt_event_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#head\">head</a> = &amp;<a class=\"id\" href=\"#vt_events\">vt_events</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each\">list_for_each</a>(<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#head\">head</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#vt_event_wait\">vt_event_wait</a> *<a class=\"id\" href=\"#ve\">ve</a> = <a class=\"id\" href=\"#list_entry\">list_entry</a>(<a class=\"id\" href=\"#pos\">pos</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#vt_event_wait\">vt_event_wait</a>, <a class=\"id\" href=\"#list\">list</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!(<a class=\"id\" href=\"#ve\">ve</a>-><a class=\"id\" href=\"#event\">event</a>.<a class=\"id\" href=\"#event\">event</a> &amp; <a class=\"id\" href=\"#event\">event</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ve\">ve</a>-><a class=\"id\" href=\"#event\">event</a>.<a class=\"id\" href=\"#event\">event</a> = <a class=\"id\" href=\"#event\">event</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* kernel view is consoles 0..n-1, user space view is</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/>   console 1..n with 0 meaning current, so we must bias */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ve\">ve</a>-><a class=\"id\" href=\"#event\">event</a>.<a class=\"id\" href=\"#oldev\">oldev</a> = <a class=\"id\" href=\"#old\">old</a> + 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ve\">ve</a>-><a class=\"id\" href=\"#event\">event</a>.<a class=\"id\" href=\"#newev\">newev</a> = <a class=\"id\" href=\"#new\">new</a> + 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#wake\">wake</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ve\">ve</a>-><a class=\"id\" href=\"#done\">done</a> = 1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irqrestore\">spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#vt_event_lock\">vt_event_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#wake\">wake</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#wake_up_interruptible\">wake_up_interruptible</a>(&amp;<a class=\"id\" href=\"#vt_event_waitqueue\">vt_event_waitqueue</a>);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>vt_event_wait<span class=\"ts\"/><span class=\"ts\"/>-<span class=\"ts\"/>wait for an event</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@vw: our event</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Waits for an event to occur which completes our vt_event_wait</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>structure. On return the structure has wv-&gt;done set to 1 for success</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>or 0 if some event such as a signal ended the wait.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static void <a class=\"id\" href=\"#vt_event_wait\">vt_event_wait</a>(struct <a class=\"id\" href=\"#vt_event_wait\">vt_event_wait</a> *<a class=\"id\" href=\"#vw\">vw</a>)", 
"{", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"<span class=\"ts\"/><span class=\"comment\">/* Prepare the event */</span>", 
];
xr_frag_insert('l/83/1c252c29fbe270f9533bfa366ff7c50236ea14.xr', __xr_tmp);
