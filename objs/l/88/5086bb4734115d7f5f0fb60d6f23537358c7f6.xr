var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Common EFI (Extensible Firmware Interface) support functions</span>", 
"<span class=\"comment\"> * Based on Extensible Firmware Interface Specification version 1.0</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Copyright (C) 1999 VA Linux Systems</span>", 
"<span class=\"comment\"> * Copyright (C) 1999 Walt Drummond &lt;drummond@valinux.com&gt;</span>", 
"<span class=\"comment\"> * Copyright (C) 1999-2002 Hewlett-Packard Co.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>David Mosberger-Tang &lt;davidm@hpl.hp.com&gt;</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Stephane Eranian &lt;eranian@hpl.hp.com&gt;</span>", 
"<span class=\"comment\"> * Copyright (C) 2005-2008 Intel Co.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Fenghua Yu &lt;fenghua.yu@intel.com&gt;</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Bibo Mao &lt;bibo.mao@intel.com&gt;</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Chandramouli Narayanan &lt;mouli@linux.intel.com&gt;</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Huang Ying &lt;ying.huang@intel.com&gt;</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Copied from efi_32.c to eliminate the duplicated code between EFI</span>", 
"<span class=\"comment\"> * 32/64 support code. --ying 2007-10-26</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * All EFI Runtime Services are not implemented yet as EFI only</span>", 
"<span class=\"comment\"> * supports physical mode addressing on SoftSDV. This is to be fixed</span>", 
"<span class=\"comment\"> * in a future version.  --drummond 1999-07-20</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Implemented EFI runtime services and virtual mode calls.  --davidm</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Goutham Rao: &lt;goutham.rao@intel.com&gt;</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Skip non-WB memory and ignore empty memory ranges.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kernel\">kernel</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#init\">init</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#bootmem\">bootmem</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#spinlock\">spinlock</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#uaccess\">uaccess</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#io\">io</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#reboot\">reboot</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#bcd\">bcd</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#setup\">setup</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#cacheflush\">cacheflush</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#tlbflush\">tlbflush</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#x86_init\">x86_init</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#EFI_DEBUG\">EFI_DEBUG</a><span class=\"ts\"/>1", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#PFX\">PFX</a> <span class=\"ts\"/><span class=\"ts\"/>\"EFI: \"", 
"", 
"int <a class=\"id\" href=\"#efi_enabled\">efi_enabled</a>;", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#efi_enabled\">efi_enabled</a>);", 
"", 
"struct <a class=\"id\" href=\"#efi\">efi</a> <a class=\"id\" href=\"#efi\">efi</a>;", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#efi\">efi</a>);", 
"", 
"struct <a class=\"id\" href=\"#efi_memory_map\">efi_memory_map</a> <a class=\"id\" href=\"#memmap\">memmap</a>;", 
"", 
"static struct <a class=\"id\" href=\"#efi\">efi</a> <a class=\"id\" href=\"#efi_phys\">efi_phys</a> <a class=\"id\" href=\"#__initdata\">__initdata</a>;", 
"static <a class=\"id\" href=\"#efi_system_table_t\">efi_system_table_t</a> <a class=\"id\" href=\"#efi_systab\">efi_systab</a> <a class=\"id\" href=\"#__initdata\">__initdata</a>;", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#setup_noefi\">setup_noefi</a>(char *<a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_enabled\">efi_enabled</a> = 0;", 
"<span class=\"ts\"/>return 0;", 
"}", 
"<a class=\"id\" href=\"#early_param\">early_param</a>(\"noefi\", <a class=\"id\" href=\"#setup_noefi\">setup_noefi</a>);", 
"", 
"int <a class=\"id\" href=\"#add_efi_memmap\">add_efi_memmap</a>;", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#add_efi_memmap\">add_efi_memmap</a>);", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#setup_add_efi_memmap\">setup_add_efi_memmap</a>(char *<a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#add_efi_memmap\">add_efi_memmap</a> = 1;", 
"<span class=\"ts\"/>return 0;", 
"}", 
"<a class=\"id\" href=\"#early_param\">early_param</a>(\"add_efi_memmap\", <a class=\"id\" href=\"#setup_add_efi_memmap\">setup_add_efi_memmap</a>);", 
"", 
"", 
"static <a class=\"id\" href=\"#efi_status_t\">efi_status_t</a> <a class=\"id\" href=\"#virt_efi_get_time\">virt_efi_get_time</a>(<a class=\"id\" href=\"#efi_time_t\">efi_time_t</a> *<a class=\"id\" href=\"#tm\">tm</a>, <a class=\"id\" href=\"#efi_time_cap_t\">efi_time_cap_t</a> *<a class=\"id\" href=\"#tc\">tc</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#efi_call_virt2\">efi_call_virt2</a>(<a class=\"id\" href=\"#get_time\">get_time</a>, <a class=\"id\" href=\"#tm\">tm</a>, <a class=\"id\" href=\"#tc\">tc</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#efi_status_t\">efi_status_t</a> <a class=\"id\" href=\"#virt_efi_set_time\">virt_efi_set_time</a>(<a class=\"id\" href=\"#efi_time_t\">efi_time_t</a> *<a class=\"id\" href=\"#tm\">tm</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#efi_call_virt1\">efi_call_virt1</a>(<a class=\"id\" href=\"#set_time\">set_time</a>, <a class=\"id\" href=\"#tm\">tm</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#efi_status_t\">efi_status_t</a> <a class=\"id\" href=\"#virt_efi_get_wakeup_time\">virt_efi_get_wakeup_time</a>(<a class=\"id\" href=\"#efi_bool_t\">efi_bool_t</a> *<a class=\"id\" href=\"#enabled\">enabled</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     <a class=\"id\" href=\"#efi_bool_t\">efi_bool_t</a> *<a class=\"id\" href=\"#pending\">pending</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     <a class=\"id\" href=\"#efi_time_t\">efi_time_t</a> *<a class=\"id\" href=\"#tm\">tm</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#efi_call_virt3\">efi_call_virt3</a>(<a class=\"id\" href=\"#get_wakeup_time\">get_wakeup_time</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#enabled\">enabled</a>, <a class=\"id\" href=\"#pending\">pending</a>, <a class=\"id\" href=\"#tm\">tm</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#efi_status_t\">efi_status_t</a> <a class=\"id\" href=\"#virt_efi_set_wakeup_time\">virt_efi_set_wakeup_time</a>(<a class=\"id\" href=\"#efi_bool_t\">efi_bool_t</a> <a class=\"id\" href=\"#enabled\">enabled</a>, <a class=\"id\" href=\"#efi_time_t\">efi_time_t</a> *<a class=\"id\" href=\"#tm\">tm</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#efi_call_virt2\">efi_call_virt2</a>(<a class=\"id\" href=\"#set_wakeup_time\">set_wakeup_time</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#enabled\">enabled</a>, <a class=\"id\" href=\"#tm\">tm</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#efi_status_t\">efi_status_t</a> <a class=\"id\" href=\"#virt_efi_get_variable\">virt_efi_get_variable</a>(<a class=\"id\" href=\"#efi_char16_t\">efi_char16_t</a> *<a class=\"id\" href=\"#name\">name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#efi_guid_t\">efi_guid_t</a> *<a class=\"id\" href=\"#vendor\">vendor</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#u32\">u32</a> *<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  unsigned long *<a class=\"id\" href=\"#data_size\">data_size</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  void *<a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#efi_call_virt5\">efi_call_virt5</a>(<a class=\"id\" href=\"#get_variable\">get_variable</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#vendor\">vendor</a>, <a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#data_size\">data_size</a>, <a class=\"id\" href=\"#data\">data</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#efi_status_t\">efi_status_t</a> <a class=\"id\" href=\"#virt_efi_get_next_variable\">virt_efi_get_next_variable</a>(unsigned long *<a class=\"id\" href=\"#name_size\">name_size</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#efi_char16_t\">efi_char16_t</a> *<a class=\"id\" href=\"#name\">name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#efi_guid_t\">efi_guid_t</a> *<a class=\"id\" href=\"#vendor\">vendor</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#efi_call_virt3\">efi_call_virt3</a>(<a class=\"id\" href=\"#get_next_variable\">get_next_variable</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#name_size\">name_size</a>, <a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#vendor\">vendor</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#efi_status_t\">efi_status_t</a> <a class=\"id\" href=\"#virt_efi_set_variable\">virt_efi_set_variable</a>(<a class=\"id\" href=\"#efi_char16_t\">efi_char16_t</a> *<a class=\"id\" href=\"#name\">name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#efi_guid_t\">efi_guid_t</a> *<a class=\"id\" href=\"#vendor\">vendor</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  unsigned long <a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  unsigned long <a class=\"id\" href=\"#data_size\">data_size</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  void *<a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#efi_call_virt5\">efi_call_virt5</a>(<a class=\"id\" href=\"#set_variable\">set_variable</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#vendor\">vendor</a>, <a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#data_size\">data_size</a>, <a class=\"id\" href=\"#data\">data</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#efi_status_t\">efi_status_t</a> <a class=\"id\" href=\"#virt_efi_get_next_high_mono_count\">virt_efi_get_next_high_mono_count</a>(<a class=\"id\" href=\"#u32\">u32</a> *<a class=\"id\" href=\"#count\">count</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#efi_call_virt1\">efi_call_virt1</a>(<a class=\"id\" href=\"#get_next_high_mono_count\">get_next_high_mono_count</a>, <a class=\"id\" href=\"#count\">count</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#virt_efi_reset_system\">virt_efi_reset_system</a>(int <a class=\"id\" href=\"#reset_type\">reset_type</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#efi_status_t\">efi_status_t</a> <a class=\"id\" href=\"#status\">status</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  unsigned long <a class=\"id\" href=\"#data_size\">data_size</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#efi_char16_t\">efi_char16_t</a> *<a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_call_virt4\">efi_call_virt4</a>(<a class=\"id\" href=\"#reset_system\">reset_system</a>, <a class=\"id\" href=\"#reset_type\">reset_type</a>, <a class=\"id\" href=\"#status\">status</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#data_size\">data_size</a>, <a class=\"id\" href=\"#data\">data</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#efi_status_t\">efi_status_t</a> <a class=\"id\" href=\"#virt_efi_set_virtual_address_map\">virt_efi_set_virtual_address_map</a>(", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#memory_map_size\">memory_map_size</a>,", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#descriptor_size\">descriptor_size</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#descriptor_version\">descriptor_version</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_memory_desc_t\">efi_memory_desc_t</a> *<a class=\"id\" href=\"#virtual_map\">virtual_map</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#efi_call_virt4\">efi_call_virt4</a>(<a class=\"id\" href=\"#set_virtual_address_map\">set_virtual_address_map</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#memory_map_size\">memory_map_size</a>, <a class=\"id\" href=\"#descriptor_size\">descriptor_size</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#descriptor_version\">descriptor_version</a>, <a class=\"id\" href=\"#virtual_map\">virtual_map</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#efi_status_t\">efi_status_t</a> <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#phys_efi_set_virtual_address_map\">phys_efi_set_virtual_address_map</a>(", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#memory_map_size\">memory_map_size</a>,", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#descriptor_size\">descriptor_size</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#descriptor_version\">descriptor_version</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_memory_desc_t\">efi_memory_desc_t</a> *<a class=\"id\" href=\"#virtual_map\">virtual_map</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_status_t\">efi_status_t</a> <a class=\"id\" href=\"#status\">status</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_call_phys_prelog\">efi_call_phys_prelog</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#efi_call_phys4\">efi_call_phys4</a>(<a class=\"id\" href=\"#efi_phys\">efi_phys</a>.<a class=\"id\" href=\"#set_virtual_address_map\">set_virtual_address_map</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#memory_map_size\">memory_map_size</a>, <a class=\"id\" href=\"#descriptor_size\">descriptor_size</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#descriptor_version\">descriptor_version</a>, <a class=\"id\" href=\"#virtual_map\">virtual_map</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_call_phys_epilog\">efi_call_phys_epilog</a>();", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#efi_status_t\">efi_status_t</a> <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#phys_efi_get_time\">phys_efi_get_time</a>(<a class=\"id\" href=\"#efi_time_t\">efi_time_t</a> *<a class=\"id\" href=\"#tm\">tm</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     <a class=\"id\" href=\"#efi_time_cap_t\">efi_time_cap_t</a> *<a class=\"id\" href=\"#tc\">tc</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_status_t\">efi_status_t</a> <a class=\"id\" href=\"#status\">status</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_call_phys_prelog\">efi_call_phys_prelog</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#efi_call_phys2\">efi_call_phys2</a>(<a class=\"id\" href=\"#efi_phys\">efi_phys</a>.<a class=\"id\" href=\"#get_time\">get_time</a>, <a class=\"id\" href=\"#tm\">tm</a>, <a class=\"id\" href=\"#tc\">tc</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_call_phys_epilog\">efi_call_phys_epilog</a>();", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"}", 
"", 
"int <a class=\"id\" href=\"#efi_set_rtc_mmss\">efi_set_rtc_mmss</a>(unsigned long <a class=\"id\" href=\"#nowtime\">nowtime</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#real_seconds\">real_seconds</a>, <a class=\"id\" href=\"#real_minutes\">real_minutes</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_status_t\">efi_status_t</a> <span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_time_t\">efi_time_t</a> <span class=\"ts\"/><a class=\"id\" href=\"#eft\">eft</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_time_cap_t\">efi_time_cap_t</a> <span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#get_time\">get_time</a>(&amp;<a class=\"id\" href=\"#eft\">eft</a>, &amp;<a class=\"id\" href=\"#cap\">cap</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a> != <a class=\"id\" href=\"#EFI_SUCCESS\">EFI_SUCCESS</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"Oops: efitime: can't read time!\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#real_seconds\">real_seconds</a> = <a class=\"id\" href=\"#nowtime\">nowtime</a> % 60;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#real_minutes\">real_minutes</a> = <a class=\"id\" href=\"#nowtime\">nowtime</a> / 60;", 
"<span class=\"ts\"/>if (((<a class=\"id\" href=\"#abs\">abs</a>(<a class=\"id\" href=\"#real_minutes\">real_minutes</a> - <a class=\"id\" href=\"#eft\">eft</a>.<a class=\"id\" href=\"#minute\">minute</a>) + 15)/30) &amp; 1)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#real_minutes\">real_minutes</a> += 30;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#real_minutes\">real_minutes</a> %= 60;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#eft\">eft</a>.<a class=\"id\" href=\"#minute\">minute</a> = <a class=\"id\" href=\"#real_minutes\">real_minutes</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#eft\">eft</a>.<a class=\"id\" href=\"#second\">second</a> = <a class=\"id\" href=\"#real_seconds\">real_seconds</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#set_time\">set_time</a>(&amp;<a class=\"id\" href=\"#eft\">eft</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a> != <a class=\"id\" href=\"#EFI_SUCCESS\">EFI_SUCCESS</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"Oops: efitime: can't write time!\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"unsigned long <a class=\"id\" href=\"#efi_get_time\">efi_get_time</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_status_t\">efi_status_t</a> <a class=\"id\" href=\"#status\">status</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_time_t\">efi_time_t</a> <a class=\"id\" href=\"#eft\">eft</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_time_cap_t\">efi_time_cap_t</a> <a class=\"id\" href=\"#cap\">cap</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#get_time\">get_time</a>(&amp;<a class=\"id\" href=\"#eft\">eft</a>, &amp;<a class=\"id\" href=\"#cap\">cap</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a> != <a class=\"id\" href=\"#EFI_SUCCESS\">EFI_SUCCESS</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"Oops: efitime: can't read time!\\n\");", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#mktime\">mktime</a>(<a class=\"id\" href=\"#eft\">eft</a>.<a class=\"id\" href=\"#year\">year</a>, <a class=\"id\" href=\"#eft\">eft</a>.<a class=\"id\" href=\"#month\">month</a>, <a class=\"id\" href=\"#eft\">eft</a>.<a class=\"id\" href=\"#day\">day</a>, <a class=\"id\" href=\"#eft\">eft</a>.<a class=\"id\" href=\"#hour\">hour</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#eft\">eft</a>.<a class=\"id\" href=\"#minute\">minute</a>, <a class=\"id\" href=\"#eft\">eft</a>.<a class=\"id\" href=\"#second\">second</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Tell the kernel about the EFI memory map.  This might include</span>", 
"<span class=\"comment\"> * more than the max 128 entries that can fit in the e820 legacy</span>", 
"<span class=\"comment\"> * (zeropage) memory map.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static void <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#do_add_efi_memmap\">do_add_efi_memmap</a>(void)", 
"{", 
"<span class=\"ts\"/>void *<a class=\"id\" href=\"#p\">p</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#p\">p</a> = <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#map\">map</a>; <a class=\"id\" href=\"#p\">p</a> &lt; <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#map_end\">map_end</a>; <a class=\"id\" href=\"#p\">p</a> += <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#desc_size\">desc_size</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#efi_memory_desc_t\">efi_memory_desc_t</a> *<a class=\"id\" href=\"#md\">md</a> = <a class=\"id\" href=\"#p\">p</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>unsigned long long <a class=\"id\" href=\"#start\">start</a> = <a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#phys_addr\">phys_addr</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>unsigned long long <a class=\"id\" href=\"#size\">size</a> = <a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#num_pages\">num_pages</a> << <a class=\"id\" href=\"#EFI_PAGE_SHIFT\">EFI_PAGE_SHIFT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#e820_type\">e820_type</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>switch (<a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#type\">type</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#EFI_LOADER_CODE\">EFI_LOADER_CODE</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#EFI_LOADER_DATA\">EFI_LOADER_DATA</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#EFI_BOOT_SERVICES_CODE\">EFI_BOOT_SERVICES_CODE</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#EFI_BOOT_SERVICES_DATA\">EFI_BOOT_SERVICES_DATA</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#EFI_CONVENTIONAL_MEMORY\">EFI_CONVENTIONAL_MEMORY</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#attribute\">attribute</a> &amp; <a class=\"id\" href=\"#EFI_MEMORY_WB\">EFI_MEMORY_WB</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#e820_type\">e820_type</a> = <a class=\"id\" href=\"#E820_RAM\">E820_RAM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#e820_type\">e820_type</a> = <a class=\"id\" href=\"#E820_RESERVED\">E820_RESERVED</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#EFI_ACPI_RECLAIM_MEMORY\">EFI_ACPI_RECLAIM_MEMORY</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#e820_type\">e820_type</a> = <a class=\"id\" href=\"#E820_ACPI\">E820_ACPI</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#EFI_ACPI_MEMORY_NVS\">EFI_ACPI_MEMORY_NVS</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#e820_type\">e820_type</a> = <a class=\"id\" href=\"#E820_NVS\">E820_NVS</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#EFI_UNUSABLE_MEMORY\">EFI_UNUSABLE_MEMORY</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#e820_type\">e820_type</a> = <a class=\"id\" href=\"#E820_UNUSABLE\">E820_UNUSABLE</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * EFI_RESERVED_TYPE EFI_RUNTIME_SERVICES_CODE</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * EFI_RUNTIME_SERVICES_DATA EFI_MEMORY_MAPPED_IO</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * EFI_MEMORY_MAPPED_IO_PORT_SPACE EFI_PAL_CODE</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#e820_type\">e820_type</a> = <a class=\"id\" href=\"#E820_RESERVED\">E820_RESERVED</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#e820_add_region\">e820_add_region</a>(<a class=\"id\" href=\"#start\">start</a>, <a class=\"id\" href=\"#size\">size</a>, <a class=\"id\" href=\"#e820_type\">e820_type</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sanitize_e820_map\">sanitize_e820_map</a>(<a class=\"id\" href=\"#e820\">e820</a>.<a class=\"id\" href=\"#map\">map</a>, <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#e820\">e820</a>.<a class=\"id\" href=\"#map\">map</a>), &amp;<a class=\"id\" href=\"#e820\">e820</a>.<a class=\"id\" href=\"#nr_map\">nr_map</a>);", 
"}", 
"", 
"void <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#efi_reserve_early\">efi_reserve_early</a>(void)", 
"{", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#pmap\">pmap</a>;", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_X86_32\">CONFIG_X86_32</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pmap\">pmap</a> = <a class=\"id\" href=\"#boot_params\">boot_params</a>.<a class=\"id\" href=\"#efi_info\">efi_info</a>.<a class=\"id\" href=\"#efi_memmap\">efi_memmap</a>;", 
"#else", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pmap\">pmap</a> = (<a class=\"id\" href=\"#boot_params\">boot_params</a>.<a class=\"id\" href=\"#efi_info\">efi_info</a>.<a class=\"id\" href=\"#efi_memmap\">efi_memmap</a> |", 
"<span class=\"ts\"/><span class=\"ts\"/>((<a class=\"id\" href=\"#__u64\">__u64</a>)<a class=\"id\" href=\"#boot_params\">boot_params</a>.<a class=\"id\" href=\"#efi_info\">efi_info</a>.<a class=\"id\" href=\"#efi_memmap_hi\">efi_memmap_hi</a><<32));", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#phys_map\">phys_map</a> = (void *)<a class=\"id\" href=\"#pmap\">pmap</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#nr_map\">nr_map</a> = <a class=\"id\" href=\"#boot_params\">boot_params</a>.<a class=\"id\" href=\"#efi_info\">efi_info</a>.<a class=\"id\" href=\"#efi_memmap_size\">efi_memmap_size</a> /", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#boot_params\">boot_params</a>.<a class=\"id\" href=\"#efi_info\">efi_info</a>.<a class=\"id\" href=\"#efi_memdesc_size\">efi_memdesc_size</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#desc_version\">desc_version</a> = <a class=\"id\" href=\"#boot_params\">boot_params</a>.<a class=\"id\" href=\"#efi_info\">efi_info</a>.<a class=\"id\" href=\"#efi_memdesc_version\">efi_memdesc_version</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#desc_size\">desc_size</a> = <a class=\"id\" href=\"#boot_params\">boot_params</a>.<a class=\"id\" href=\"#efi_info\">efi_info</a>.<a class=\"id\" href=\"#efi_memdesc_size\">efi_memdesc_size</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#reserve_early\">reserve_early</a>(<a class=\"id\" href=\"#pmap\">pmap</a>, <a class=\"id\" href=\"#pmap\">pmap</a> + <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#nr_map\">nr_map</a> * <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#desc_size\">desc_size</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>      \"EFI memmap\");", 
"}", 
"", 
"#if <a class=\"id\" href=\"#EFI_DEBUG\">EFI_DEBUG</a>", 
"static void <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#print_efi_memmap\">print_efi_memmap</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_memory_desc_t\">efi_memory_desc_t</a> *<a class=\"id\" href=\"#md\">md</a>;", 
"<span class=\"ts\"/>void *<a class=\"id\" href=\"#p\">p</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#p\">p</a> = <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#map\">map</a>, <a class=\"id\" href=\"#i\">i</a> = 0;", 
"<span class=\"ts\"/>     <a class=\"id\" href=\"#p\">p</a> &lt; <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#map_end\">map_end</a>;", 
"<span class=\"ts\"/>     <a class=\"id\" href=\"#p\">p</a> += <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#desc_size\">desc_size</a>, <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#md\">md</a> = <a class=\"id\" href=\"#p\">p</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> <a class=\"id\" href=\"#PFX\">PFX</a> \"mem%02u: type=%u, attr=0x%llx, \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"range=[0x%016llx-0x%016llx) (%lluMB)\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#type\">type</a>, <a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#attribute\">attribute</a>, <a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#phys_addr\">phys_addr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#phys_addr\">phys_addr</a> + (<a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#num_pages\">num_pages</a> << <a class=\"id\" href=\"#EFI_PAGE_SHIFT\">EFI_PAGE_SHIFT</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#num_pages\">num_pages</a> >> (20 - <a class=\"id\" href=\"#EFI_PAGE_SHIFT\">EFI_PAGE_SHIFT</a>)));", 
"<span class=\"ts\"/>}", 
"}", 
"#<a class=\"id\" href=\"#endif\">endif</a>  <span class=\"comment\">/*  EFI_DEBUG  */</span>", 
"", 
"void <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#efi_init\">efi_init</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_config_table_t\">efi_config_table_t</a> *<a class=\"id\" href=\"#config_tables\">config_tables</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_runtime_services_t\">efi_runtime_services_t</a> *<a class=\"id\" href=\"#runtime\">runtime</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_char16_t\">efi_char16_t</a> *<a class=\"id\" href=\"#c16\">c16</a>;", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#vendor\">vendor</a>[100] = \"unknown\";", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a> = 0;", 
"<span class=\"ts\"/>void *<a class=\"id\" href=\"#tmp\">tmp</a>;", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_X86_32\">CONFIG_X86_32</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_phys\">efi_phys</a>.<a class=\"id\" href=\"#systab\">systab</a> = (<a class=\"id\" href=\"#efi_system_table_t\">efi_system_table_t</a> *)<a class=\"id\" href=\"#boot_params\">boot_params</a>.<a class=\"id\" href=\"#efi_info\">efi_info</a>.<a class=\"id\" href=\"#efi_systab\">efi_systab</a>;", 
"#else", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_phys\">efi_phys</a>.<a class=\"id\" href=\"#systab\">systab</a> = (<a class=\"id\" href=\"#efi_system_table_t\">efi_system_table_t</a> *)", 
"<span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#boot_params\">boot_params</a>.<a class=\"id\" href=\"#efi_info\">efi_info</a>.<a class=\"id\" href=\"#efi_systab\">efi_systab</a> |", 
"<span class=\"ts\"/><span class=\"ts\"/> ((<a class=\"id\" href=\"#__u64\">__u64</a>)<a class=\"id\" href=\"#boot_params\">boot_params</a>.<a class=\"id\" href=\"#efi_info\">efi_info</a>.<a class=\"id\" href=\"#efi_systab_hi\">efi_systab_hi</a><<32));", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#systab\">systab</a> = <a class=\"id\" href=\"#early_ioremap\">early_ioremap</a>((unsigned long)<a class=\"id\" href=\"#efi_phys\">efi_phys</a>.<a class=\"id\" href=\"#systab\">systab</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   sizeof(<a class=\"id\" href=\"#efi_system_table_t\">efi_system_table_t</a>));", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#systab\">systab</a> == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"Couldn't map the EFI system table!\\n\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>(&amp;<a class=\"id\" href=\"#efi_systab\">efi_systab</a>, <a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#systab\">systab</a>, sizeof(<a class=\"id\" href=\"#efi_system_table_t\">efi_system_table_t</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#early_iounmap\">early_iounmap</a>(<a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#systab\">systab</a>, sizeof(<a class=\"id\" href=\"#efi_system_table_t\">efi_system_table_t</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#systab\">systab</a> = &amp;<a class=\"id\" href=\"#efi_systab\">efi_systab</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Verify the EFI Table</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#systab\">systab</a>-><a class=\"id\" href=\"#hdr\">hdr</a>.<a class=\"id\" href=\"#signature\">signature</a> != <a class=\"id\" href=\"#EFI_SYSTEM_TABLE_SIGNATURE\">EFI_SYSTEM_TABLE_SIGNATURE</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"EFI system table signature incorrect!\\n\");", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#systab\">systab</a>-><a class=\"id\" href=\"#hdr\">hdr</a>.<a class=\"id\" href=\"#revision\">revision</a> >> 16) == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"Warning: EFI system table version \"", 
"<span class=\"ts\"/><span class=\"ts\"/>       \"%d.%02d, expected 1.00 or greater!\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#systab\">systab</a>-><a class=\"id\" href=\"#hdr\">hdr</a>.<a class=\"id\" href=\"#revision\">revision</a> >> 16,", 
"<span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#systab\">systab</a>-><a class=\"id\" href=\"#hdr\">hdr</a>.<a class=\"id\" href=\"#revision\">revision</a> &amp; 0xffff);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Show what we know for posterity</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#c16\">c16</a> = <a class=\"id\" href=\"#tmp\">tmp</a> = <a class=\"id\" href=\"#early_ioremap\">early_ioremap</a>(<a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#systab\">systab</a>-><a class=\"id\" href=\"#fw_vendor\">fw_vendor</a>, 2);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#c16\">c16</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; sizeof(<a class=\"id\" href=\"#vendor\">vendor</a>) - 1 && *<a class=\"id\" href=\"#c16\">c16</a>; ++<a class=\"id\" href=\"#i\">i</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vendor\">vendor</a>[<a class=\"id\" href=\"#i\">i</a>] = *<a class=\"id\" href=\"#c16\">c16</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vendor\">vendor</a>[<a class=\"id\" href=\"#i\">i</a>] = '\\0';", 
"<span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> <a class=\"id\" href=\"#PFX\">PFX</a> \"Could not map the firmware vendor!\\n\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#early_iounmap\">early_iounmap</a>(<a class=\"id\" href=\"#tmp\">tmp</a>, 2);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"EFI v%u.%.02u by %s\\n\",", 
"<span class=\"ts\"/>       <a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#systab\">systab</a>-><a class=\"id\" href=\"#hdr\">hdr</a>.<a class=\"id\" href=\"#revision\">revision</a> >> 16,", 
"<span class=\"ts\"/>       <a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#systab\">systab</a>-><a class=\"id\" href=\"#hdr\">hdr</a>.<a class=\"id\" href=\"#revision\">revision</a> &amp; 0xffff, <a class=\"id\" href=\"#vendor\">vendor</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Let's see what config tables the firmware passed to us.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#config_tables\">config_tables</a> = <a class=\"id\" href=\"#early_ioremap\">early_ioremap</a>(", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#systab\">systab</a>-><a class=\"id\" href=\"#tables\">tables</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#systab\">systab</a>-><a class=\"id\" href=\"#nr_tables\">nr_tables</a> * sizeof(<a class=\"id\" href=\"#efi_config_table_t\">efi_config_table_t</a>));", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#config_tables\">config_tables</a> == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"Could not map EFI Configuration Table!\\n\");", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a>);", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#systab\">systab</a>-><a class=\"id\" href=\"#nr_tables\">nr_tables</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#efi_guidcmp\">efi_guidcmp</a>(<a class=\"id\" href=\"#config_tables\">config_tables</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#guid\">guid</a>, <a class=\"id\" href=\"#MPS_TABLE_GUID\">MPS_TABLE_GUID</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#mps\">mps</a> = <a class=\"id\" href=\"#config_tables\">config_tables</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#table\">table</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\" MPS=0x%lx \", <a class=\"id\" href=\"#config_tables\">config_tables</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#table\">table</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>} else if (!<a class=\"id\" href=\"#efi_guidcmp\">efi_guidcmp</a>(<a class=\"id\" href=\"#config_tables\">config_tables</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#guid\">guid</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ACPI_20_TABLE_GUID\">ACPI_20_TABLE_GUID</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#acpi20\">acpi20</a> = <a class=\"id\" href=\"#config_tables\">config_tables</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#table\">table</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\" ACPI 2.0=0x%lx \", <a class=\"id\" href=\"#config_tables\">config_tables</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#table\">table</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>} else if (!<a class=\"id\" href=\"#efi_guidcmp\">efi_guidcmp</a>(<a class=\"id\" href=\"#config_tables\">config_tables</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#guid\">guid</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ACPI_TABLE_GUID\">ACPI_TABLE_GUID</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#acpi\">acpi</a> = <a class=\"id\" href=\"#config_tables\">config_tables</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#table\">table</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\" ACPI=0x%lx \", <a class=\"id\" href=\"#config_tables\">config_tables</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#table\">table</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>} else if (!<a class=\"id\" href=\"#efi_guidcmp\">efi_guidcmp</a>(<a class=\"id\" href=\"#config_tables\">config_tables</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#guid\">guid</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#SMBIOS_TABLE_GUID\">SMBIOS_TABLE_GUID</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#smbios\">smbios</a> = <a class=\"id\" href=\"#config_tables\">config_tables</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#table\">table</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\" SMBIOS=0x%lx \", <a class=\"id\" href=\"#config_tables\">config_tables</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#table\">table</a>);", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_X86_UV\">CONFIG_X86_UV</a>", 
"<span class=\"ts\"/><span class=\"ts\"/>} else if (!<a class=\"id\" href=\"#efi_guidcmp\">efi_guidcmp</a>(<a class=\"id\" href=\"#config_tables\">config_tables</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#guid\">guid</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#UV_SYSTEM_TABLE_GUID\">UV_SYSTEM_TABLE_GUID</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#uv_systab\">uv_systab</a> = <a class=\"id\" href=\"#config_tables\">config_tables</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#table\">table</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\" UVsystab=0x%lx \", <a class=\"id\" href=\"#config_tables\">config_tables</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#table\">table</a>);", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/><span class=\"ts\"/>} else if (!<a class=\"id\" href=\"#efi_guidcmp\">efi_guidcmp</a>(<a class=\"id\" href=\"#config_tables\">config_tables</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#guid\">guid</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#HCDP_TABLE_GUID\">HCDP_TABLE_GUID</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#hcdp\">hcdp</a> = <a class=\"id\" href=\"#config_tables\">config_tables</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#table\">table</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\" HCDP=0x%lx \", <a class=\"id\" href=\"#config_tables\">config_tables</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#table\">table</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>} else if (!<a class=\"id\" href=\"#efi_guidcmp\">efi_guidcmp</a>(<a class=\"id\" href=\"#config_tables\">config_tables</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#guid\">guid</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#UGA_IO_PROTOCOL_GUID\">UGA_IO_PROTOCOL_GUID</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#uga\">uga</a> = <a class=\"id\" href=\"#config_tables\">config_tables</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#table\">table</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\" UGA=0x%lx \", <a class=\"id\" href=\"#config_tables\">config_tables</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#table\">table</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\"\\n\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#early_iounmap\">early_iounmap</a>(<a class=\"id\" href=\"#config_tables\">config_tables</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#systab\">systab</a>-><a class=\"id\" href=\"#nr_tables\">nr_tables</a> * sizeof(<a class=\"id\" href=\"#efi_config_table_t\">efi_config_table_t</a>));", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Check out the runtime services table. We need to map</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * the runtime services table so that we can grab the physical</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * address of several of the EFI runtime functions, needed to</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * set the firmware into virtual mode.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#runtime\">runtime</a> = <a class=\"id\" href=\"#early_ioremap\">early_ioremap</a>((unsigned long)<a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#systab\">systab</a>-><a class=\"id\" href=\"#runtime\">runtime</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>sizeof(<a class=\"id\" href=\"#efi_runtime_services_t\">efi_runtime_services_t</a>));", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#runtime\">runtime</a> != <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * We will only need *early* access to the following</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * two EFI runtime services before set_virtual_address_map</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * is invoked.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#efi_phys\">efi_phys</a>.<a class=\"id\" href=\"#get_time\">get_time</a> = (<a class=\"id\" href=\"#efi_get_time_t\">efi_get_time_t</a> *)<a class=\"id\" href=\"#runtime\">runtime</a>-><a class=\"id\" href=\"#get_time\">get_time</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#efi_phys\">efi_phys</a>.<a class=\"id\" href=\"#set_virtual_address_map\">set_virtual_address_map</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#efi_set_virtual_address_map_t\">efi_set_virtual_address_map_t</a> *)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#runtime\">runtime</a>-><a class=\"id\" href=\"#set_virtual_address_map\">set_virtual_address_map</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * Make efi_get_time can be called before entering</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * virtual mode.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#get_time\">get_time</a> = <a class=\"id\" href=\"#phys_efi_get_time\">phys_efi_get_time</a>;", 
"<span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"Could not map the EFI runtime service \"", 
"<span class=\"ts\"/><span class=\"ts\"/>       \"table!\\n\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#early_iounmap\">early_iounmap</a>(<a class=\"id\" href=\"#runtime\">runtime</a>, sizeof(<a class=\"id\" href=\"#efi_runtime_services_t\">efi_runtime_services_t</a>));", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Map the EFI memory map */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#map\">map</a> = <a class=\"id\" href=\"#early_ioremap\">early_ioremap</a>((unsigned long)<a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#phys_map\">phys_map</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#nr_map\">nr_map</a> * <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#desc_size\">desc_size</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#map\">map</a> == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"Could not map the EFI memory map!\\n\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#map_end\">map_end</a> = <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#map\">map</a> + (<a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#nr_map\">nr_map</a> * <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#desc_size\">desc_size</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#desc_size\">desc_size</a> != sizeof(<a class=\"id\" href=\"#efi_memory_desc_t\">efi_memory_desc_t</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a>", 
"<span class=\"ts\"/><span class=\"ts\"/>  \"Kernel-defined memdesc doesn't match the one from EFI!\\n\");", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#add_efi_memmap\">add_efi_memmap</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#do_add_efi_memmap\">do_add_efi_memmap</a>();", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_X86_32\">CONFIG_X86_32</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#x86_platform\">x86_platform</a>.<a class=\"id\" href=\"#get_wallclock\">get_wallclock</a> = <a class=\"id\" href=\"#efi_get_time\">efi_get_time</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#x86_platform\">x86_platform</a>.<a class=\"id\" href=\"#set_wallclock\">set_wallclock</a> = <a class=\"id\" href=\"#efi_set_rtc_mmss\">efi_set_rtc_mmss</a>;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Setup for EFI runtime service */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#reboot_type\">reboot_type</a> = <a class=\"id\" href=\"#BOOT_EFI\">BOOT_EFI</a>;", 
"", 
"#if <a class=\"id\" href=\"#EFI_DEBUG\">EFI_DEBUG</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#print_efi_memmap\">print_efi_memmap</a>();", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"}", 
"", 
"static void <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#runtime_code_page_mkexec\">runtime_code_page_mkexec</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_memory_desc_t\">efi_memory_desc_t</a> *<a class=\"id\" href=\"#md\">md</a>;", 
"<span class=\"ts\"/>void *<a class=\"id\" href=\"#p\">p</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#addr\">addr</a>, <a class=\"id\" href=\"#npages\">npages</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Make EFI runtime service code area executable */</span>", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#p\">p</a> = <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#map\">map</a>; <a class=\"id\" href=\"#p\">p</a> &lt; <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#map_end\">map_end</a>; <a class=\"id\" href=\"#p\">p</a> += <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#desc_size\">desc_size</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#md\">md</a> = <a class=\"id\" href=\"#p\">p</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#type\">type</a> != <a class=\"id\" href=\"#EFI_RUNTIME_SERVICES_CODE\">EFI_RUNTIME_SERVICES_CODE</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#addr\">addr</a> = <a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#virt_addr\">virt_addr</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#npages\">npages</a> = <a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#num_pages\">num_pages</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#memrange_efi_to_native\">memrange_efi_to_native</a>(&amp;<a class=\"id\" href=\"#addr\">addr</a>, &amp;<a class=\"id\" href=\"#npages\">npages</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_memory_x\">set_memory_x</a>(<a class=\"id\" href=\"#addr\">addr</a>, <a class=\"id\" href=\"#npages\">npages</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * This function will switch the EFI runtime services to virtual mode.</span>", 
"<span class=\"comment\"> * Essentially, look through the EFI memmap and map every region that</span>", 
"<span class=\"comment\"> * has the runtime attribute bit set in its memory descriptor and update</span>", 
"<span class=\"comment\"> * that memory descriptor with the virtual address obtained from ioremap().</span>", 
"<span class=\"comment\"> * This enables the runtime services to be called without having to</span>", 
"<span class=\"comment\"> * thunk back into physical mode for every invocation.</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#efi_enter_virtual_mode\">efi_enter_virtual_mode</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_memory_desc_t\">efi_memory_desc_t</a> *<a class=\"id\" href=\"#md\">md</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_status_t\">efi_status_t</a> <a class=\"id\" href=\"#status\">status</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#size\">size</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#end\">end</a>, <a class=\"id\" href=\"#systab\">systab</a>, <a class=\"id\" href=\"#addr\">addr</a>, <a class=\"id\" href=\"#npages\">npages</a>, <a class=\"id\" href=\"#end_pfn\">end_pfn</a>;", 
"<span class=\"ts\"/>void *<a class=\"id\" href=\"#p\">p</a>, *<a class=\"id\" href=\"#va\">va</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#systab\">systab</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#p\">p</a> = <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#map\">map</a>; <a class=\"id\" href=\"#p\">p</a> &lt; <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#map_end\">map_end</a>; <a class=\"id\" href=\"#p\">p</a> += <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#desc_size\">desc_size</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#md\">md</a> = <a class=\"id\" href=\"#p\">p</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!(<a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#attribute\">attribute</a> &amp; <a class=\"id\" href=\"#EFI_MEMORY_RUNTIME\">EFI_MEMORY_RUNTIME</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#size\">size</a> = <a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#num_pages\">num_pages</a> << <a class=\"id\" href=\"#EFI_PAGE_SHIFT\">EFI_PAGE_SHIFT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#end\">end</a> = <a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#phys_addr\">phys_addr</a> + <a class=\"id\" href=\"#size\">size</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#end_pfn\">end_pfn</a> = <a class=\"id\" href=\"#PFN_UP\">PFN_UP</a>(<a class=\"id\" href=\"#end\">end</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#end_pfn\">end_pfn</a> <= <a class=\"id\" href=\"#max_low_pfn_mapped\">max_low_pfn_mapped</a>", 
"<span class=\"ts\"/><span class=\"ts\"/>    || (<a class=\"id\" href=\"#end_pfn\">end_pfn</a> &gt; (1UL << (32 - <a class=\"id\" href=\"#PAGE_SHIFT\">PAGE_SHIFT</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>&& <a class=\"id\" href=\"#end_pfn\">end_pfn</a> <= <a class=\"id\" href=\"#max_pfn_mapped\">max_pfn_mapped</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#va\">va</a> = <a class=\"id\" href=\"#__va\">__va</a>(<a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#phys_addr\">phys_addr</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#va\">va</a> = <a class=\"id\" href=\"#efi_ioremap\">efi_ioremap</a>(<a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#phys_addr\">phys_addr</a>, <a class=\"id\" href=\"#size\">size</a>, <a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#type\">type</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#virt_addr\">virt_addr</a> = (<a class=\"id\" href=\"#u64\">u64</a>) (unsigned long) <a class=\"id\" href=\"#va\">va</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#va\">va</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> <a class=\"id\" href=\"#PFX\">PFX</a> \"ioremap of 0x%llX failed!\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       (unsigned long long)<a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#phys_addr\">phys_addr</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!(<a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#attribute\">attribute</a> &amp; <a class=\"id\" href=\"#EFI_MEMORY_WB\">EFI_MEMORY_WB</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#addr\">addr</a> = <a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#virt_addr\">virt_addr</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#npages\">npages</a> = <a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#num_pages\">num_pages</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#memrange_efi_to_native\">memrange_efi_to_native</a>(&amp;<a class=\"id\" href=\"#addr\">addr</a>, &amp;<a class=\"id\" href=\"#npages\">npages</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_memory_uc\">set_memory_uc</a>(<a class=\"id\" href=\"#addr\">addr</a>, <a class=\"id\" href=\"#npages\">npages</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#systab\">systab</a> = (<a class=\"id\" href=\"#u64\">u64</a>) (unsigned long) <a class=\"id\" href=\"#efi_phys\">efi_phys</a>.<a class=\"id\" href=\"#systab\">systab</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#phys_addr\">phys_addr</a> <= <a class=\"id\" href=\"#systab\">systab</a> && <a class=\"id\" href=\"#systab\">systab</a> &lt; <a class=\"id\" href=\"#end\">end</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#systab\">systab</a> += <a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#virt_addr\">virt_addr</a> - <a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#phys_addr\">phys_addr</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#systab\">systab</a> = (<a class=\"id\" href=\"#efi_system_table_t\">efi_system_table_t</a> *) (unsigned long) <a class=\"id\" href=\"#systab\">systab</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#BUG_ON\">BUG_ON</a>(!<a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#systab\">systab</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#phys_efi_set_virtual_address_map\">phys_efi_set_virtual_address_map</a>(", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#desc_size\">desc_size</a> * <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#nr_map\">nr_map</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#desc_size\">desc_size</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#desc_version\">desc_version</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#phys_map\">phys_map</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a> != <a class=\"id\" href=\"#EFI_SUCCESS\">EFI_SUCCESS</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ALERT\">KERN_ALERT</a> \"Unable to switch EFI into virtual mode \"", 
"<span class=\"ts\"/><span class=\"ts\"/>       \"(status=%lx)!\\n\", <a class=\"id\" href=\"#status\">status</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#panic\">panic</a>(\"EFI call to SetVirtualAddressMap() failed!\");", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Now that EFI is in virtual mode, update the function</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * pointers in the runtime service table to the new virtual addresses.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Call EFI services through wrapper functions.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#get_time\">get_time</a> = <a class=\"id\" href=\"#virt_efi_get_time\">virt_efi_get_time</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#set_time\">set_time</a> = <a class=\"id\" href=\"#virt_efi_set_time\">virt_efi_set_time</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#get_wakeup_time\">get_wakeup_time</a> = <a class=\"id\" href=\"#virt_efi_get_wakeup_time\">virt_efi_get_wakeup_time</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#set_wakeup_time\">set_wakeup_time</a> = <a class=\"id\" href=\"#virt_efi_set_wakeup_time\">virt_efi_set_wakeup_time</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#get_variable\">get_variable</a> = <a class=\"id\" href=\"#virt_efi_get_variable\">virt_efi_get_variable</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#get_next_variable\">get_next_variable</a> = <a class=\"id\" href=\"#virt_efi_get_next_variable\">virt_efi_get_next_variable</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#set_variable\">set_variable</a> = <a class=\"id\" href=\"#virt_efi_set_variable\">virt_efi_set_variable</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#get_next_high_mono_count\">get_next_high_mono_count</a> = <a class=\"id\" href=\"#virt_efi_get_next_high_mono_count\">virt_efi_get_next_high_mono_count</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#reset_system\">reset_system</a> = <a class=\"id\" href=\"#virt_efi_reset_system\">virt_efi_reset_system</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#set_virtual_address_map\">set_virtual_address_map</a> = <a class=\"id\" href=\"#virt_efi_set_virtual_address_map\">virt_efi_set_virtual_address_map</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#__supported_pte_mask\">__supported_pte_mask</a> &amp; <a class=\"id\" href=\"#_PAGE_NX\">_PAGE_NX</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#runtime_code_page_mkexec\">runtime_code_page_mkexec</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#early_iounmap\">early_iounmap</a>(<a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#map\">map</a>, <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#nr_map\">nr_map</a> * <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#desc_size\">desc_size</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#map\">map</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Convenience functions to obtain memory types and attributes</span>", 
"<span class=\"comment\"> */</span>", 
"<a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#efi_mem_type\">efi_mem_type</a>(unsigned long <a class=\"id\" href=\"#phys_addr\">phys_addr</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_memory_desc_t\">efi_memory_desc_t</a> *<a class=\"id\" href=\"#md\">md</a>;", 
"<span class=\"ts\"/>void *<a class=\"id\" href=\"#p\">p</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#p\">p</a> = <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#map\">map</a>; <a class=\"id\" href=\"#p\">p</a> &lt; <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#map_end\">map_end</a>; <a class=\"id\" href=\"#p\">p</a> += <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#desc_size\">desc_size</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#md\">md</a> = <a class=\"id\" href=\"#p\">p</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((<a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#phys_addr\">phys_addr</a> <= <a class=\"id\" href=\"#phys_addr\">phys_addr</a>) &&", 
"<span class=\"ts\"/><span class=\"ts\"/>    (<a class=\"id\" href=\"#phys_addr\">phys_addr</a> &lt; (<a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#phys_addr\">phys_addr</a> +", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  (<a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#num_pages\">num_pages</a> << <a class=\"id\" href=\"#EFI_PAGE_SHIFT\">EFI_PAGE_SHIFT</a>))))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#type\">type</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#efi_mem_attributes\">efi_mem_attributes</a>(unsigned long <a class=\"id\" href=\"#phys_addr\">phys_addr</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_memory_desc_t\">efi_memory_desc_t</a> *<a class=\"id\" href=\"#md\">md</a>;", 
"<span class=\"ts\"/>void *<a class=\"id\" href=\"#p\">p</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#p\">p</a> = <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#map\">map</a>; <a class=\"id\" href=\"#p\">p</a> &lt; <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#map_end\">map_end</a>; <a class=\"id\" href=\"#p\">p</a> += <a class=\"id\" href=\"#memmap\">memmap</a>.<a class=\"id\" href=\"#desc_size\">desc_size</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#md\">md</a> = <a class=\"id\" href=\"#p\">p</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((<a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#phys_addr\">phys_addr</a> <= <a class=\"id\" href=\"#phys_addr\">phys_addr</a>) &&", 
"<span class=\"ts\"/><span class=\"ts\"/>    (<a class=\"id\" href=\"#phys_addr\">phys_addr</a> &lt; (<a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#phys_addr\">phys_addr</a> +", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  (<a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#num_pages\">num_pages</a> << <a class=\"id\" href=\"#EFI_PAGE_SHIFT\">EFI_PAGE_SHIFT</a>))))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#md\">md</a>-><a class=\"id\" href=\"#attribute\">attribute</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
];
xr_frag_insert('l/88/5086bb4734115d7f5f0fb60d6f23537358c7f6.xr', __xr_tmp);
