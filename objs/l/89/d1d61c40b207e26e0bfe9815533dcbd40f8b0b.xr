var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> *  pci_link.c - ACPI PCI Interrupt Link Device Driver ($Revision: 34 $)</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *  Copyright (C) 2001, 2002 Andy Grover &lt;andrew.grover@intel.com&gt;</span>", 
"<span class=\"comment\"> *  Copyright (C) 2001, 2002 Paul Diefenbaugh &lt;paul.s.diefenbaugh@intel.com&gt;</span>", 
"<span class=\"comment\"> *  Copyright (C) 2002       Dominik Brodowski &lt;devel@brodo.de&gt;</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *  This program is free software; you can redistribute it and/or modify</span>", 
"<span class=\"comment\"> *  it under the terms of the GNU General Public License as published by</span>", 
"<span class=\"comment\"> *  the Free Software Foundation; either version 2 of the License, or (at</span>", 
"<span class=\"comment\"> *  your option) any later version.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *  This program is distributed in the hope that it will be useful, but</span>", 
"<span class=\"comment\"> *  WITHOUT ANY WARRANTY; without even the implied warranty of</span>", 
"<span class=\"comment\"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>", 
"<span class=\"comment\"> *  General Public License for more details.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *  You should have received a copy of the GNU General Public License along</span>", 
"<span class=\"comment\"> *  with this program; if not, write to the Free Software Foundation, Inc.,</span>", 
"<span class=\"comment\"> *  59 Temple Place, Suite 330, Boston, MA 02111-1307 USA.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * TBD: </span>", 
"<span class=\"comment\"> *      1. Support more than one IRQ resource entry per link device (index).</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>2. Implement start/stop mechanism and use ACPI Bus Driver facilities</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>   for IRQ management (e.g. start()-&gt;_SRS).</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#sysdev\">sysdev</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kernel\">kernel</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#init\">init</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#types\">types</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#proc_fs\">proc_fs</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#spinlock\">spinlock</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#pm\">pm</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#pci\">pci</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#mutex\">mutex</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#slab\">slab</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#acpi\">acpi</a>/<a class=\"id\" href=\"#acpi_bus\">acpi_bus</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#acpi\">acpi</a>/<a class=\"id\" href=\"#acpi_drivers\">acpi_drivers</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"ACPI: \"", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#_COMPONENT\">_COMPONENT</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ACPI_PCI_COMPONENT\">ACPI_PCI_COMPONENT</a>", 
"<a class=\"id\" href=\"#ACPI_MODULE_NAME\">ACPI_MODULE_NAME</a>(\"pci_link\");", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ACPI_PCI_LINK_CLASS\">ACPI_PCI_LINK_CLASS</a><span class=\"ts\"/><span class=\"ts\"/>\"pci_irq_routing\"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ACPI_PCI_LINK_DEVICE_NAME\">ACPI_PCI_LINK_DEVICE_NAME</a><span class=\"ts\"/>\"PCI Interrupt Link\"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ACPI_PCI_LINK_FILE_INFO\">ACPI_PCI_LINK_FILE_INFO</a><span class=\"ts\"/><span class=\"ts\"/>\"info\"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ACPI_PCI_LINK_FILE_STATUS\">ACPI_PCI_LINK_FILE_STATUS</a><span class=\"ts\"/>\"state\"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ACPI_PCI_LINK_MAX_POSSIBLE\">ACPI_PCI_LINK_MAX_POSSIBLE</a><span class=\"ts\"/>16", 
"", 
"static int <a class=\"id\" href=\"#acpi_pci_link_add\">acpi_pci_link_add</a>(struct <a class=\"id\" href=\"#acpi_device\">acpi_device</a> *<a class=\"id\" href=\"#device\">device</a>);", 
"static int <a class=\"id\" href=\"#acpi_pci_link_remove\">acpi_pci_link_remove</a>(struct <a class=\"id\" href=\"#acpi_device\">acpi_device</a> *<a class=\"id\" href=\"#device\">device</a>, int <a class=\"id\" href=\"#type\">type</a>);", 
"", 
"static const struct <a class=\"id\" href=\"#acpi_device_id\">acpi_device_id</a> <a class=\"id\" href=\"#link_device_ids\">link_device_ids</a>[] = {", 
"<span class=\"ts\"/>{\"PNP0C0F\", 0},", 
"<span class=\"ts\"/>{\"\", 0},", 
"};", 
"<a class=\"id\" href=\"#MODULE_DEVICE_TABLE\">MODULE_DEVICE_TABLE</a>(<a class=\"id\" href=\"#acpi\">acpi</a>, <a class=\"id\" href=\"#link_device_ids\">link_device_ids</a>);", 
"", 
"static struct <a class=\"id\" href=\"#acpi_driver\">acpi_driver</a> <a class=\"id\" href=\"#acpi_pci_link_driver\">acpi_pci_link_driver</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a> = \"pci_link\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#class\">class</a> = <a class=\"id\" href=\"#ACPI_PCI_LINK_CLASS\">ACPI_PCI_LINK_CLASS</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#ids\">ids</a> = <a class=\"id\" href=\"#link_device_ids\">link_device_ids</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#ops\">ops</a> = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#add\">add</a> = <a class=\"id\" href=\"#acpi_pci_link_add\">acpi_pci_link_add</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#remove\">remove</a> = <a class=\"id\" href=\"#acpi_pci_link_remove\">acpi_pci_link_remove</a>,", 
"<span class=\"ts\"/>},", 
"};", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * If a link is initialized, we never change its active and initialized</span>", 
"<span class=\"comment\"> * later even the link is disable. Instead, we just repick the active irq</span>", 
"<span class=\"comment\"> */</span>", 
"struct <a class=\"id\" href=\"#acpi_pci_link_irq\">acpi_pci_link_irq</a> {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#active\">active</a>;<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Current IRQ */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#triggering\">triggering</a>;<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* All IRQs */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#polarity\">polarity</a>;<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* All IRQs */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#resource_type\">resource_type</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#possible_count\">possible_count</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#possible\">possible</a>[<a class=\"id\" href=\"#ACPI_PCI_LINK_MAX_POSSIBLE\">ACPI_PCI_LINK_MAX_POSSIBLE</a>];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#initialized\">initialized</a>:1;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#reserved\">reserved</a>:7;", 
"};", 
"", 
"struct <a class=\"id\" href=\"#acpi_pci_link\">acpi_pci_link</a> {", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#list_head\">list_head</a><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list\">list</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_device\">acpi_device</a><span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#device\">device</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_pci_link_irq\">acpi_pci_link_irq</a><span class=\"ts\"/><a class=\"id\" href=\"#irq\">irq</a>;", 
"<span class=\"ts\"/>int<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#refcnt\">refcnt</a>;", 
"};", 
"", 
"static <a class=\"id\" href=\"#LIST_HEAD\">LIST_HEAD</a>(<a class=\"id\" href=\"#acpi_link_list\">acpi_link_list</a>);", 
"static <a class=\"id\" href=\"#DEFINE_MUTEX\">DEFINE_MUTEX</a>(<a class=\"id\" href=\"#acpi_link_lock\">acpi_link_lock</a>);", 
"", 
"<span class=\"comment\">/* --------------------------------------------------------------------------</span>", 
"<span class=\"comment\">                            PCI Link Device Management</span>", 
"<span class=\"comment\">   -------------------------------------------------------------------------- */</span>", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * set context (link) possible list from resource list</span>", 
"<span class=\"comment\"> */</span>", 
"static <a class=\"id\" href=\"#acpi_status\">acpi_status</a> <a class=\"id\" href=\"#acpi_pci_link_check_possible\">acpi_pci_link_check_possible</a>(struct <a class=\"id\" href=\"#acpi_resource\">acpi_resource</a> *<a class=\"id\" href=\"#resource\">resource</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>void *<a class=\"id\" href=\"#context\">context</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_pci_link\">acpi_pci_link</a> *<a class=\"id\" href=\"#link\">link</a> = <a class=\"id\" href=\"#context\">context</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#type\">type</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ACPI_RESOURCE_TYPE_START_DEPENDENT\">ACPI_RESOURCE_TYPE_START_DEPENDENT</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ACPI_RESOURCE_TYPE_END_TAG\">ACPI_RESOURCE_TYPE_END_TAG</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#AE_OK\">AE_OK</a>;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ACPI_RESOURCE_TYPE_IRQ\">ACPI_RESOURCE_TYPE_IRQ</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_resource_irq\">acpi_resource_irq</a> *<a class=\"id\" href=\"#p\">p</a> = &amp;<a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#data\">data</a>.<a class=\"id\" href=\"#irq\">irq</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#p\">p</a> || !<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#interrupt_count\">interrupt_count</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ACPI_DEBUG_PRINT\">ACPI_DEBUG_PRINT</a>((<a class=\"id\" href=\"#ACPI_DB_INFO\">ACPI_DB_INFO</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  \"Blank _PRS IRQ resource\\n\"));", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#AE_OK\">AE_OK</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     (<a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#interrupt_count\">interrupt_count</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      && <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#ACPI_PCI_LINK_MAX_POSSIBLE\">ACPI_PCI_LINK_MAX_POSSIBLE</a>); <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#interrupts\">interrupts</a>[<a class=\"id\" href=\"#i\">i</a>]) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       \"Invalid _PRS IRQ %d\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#interrupts\">interrupts</a>[<a class=\"id\" href=\"#i\">i</a>]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#possible\">possible</a>[<a class=\"id\" href=\"#i\">i</a>] = <a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#interrupts\">interrupts</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#possible_count\">possible_count</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#triggering\">triggering</a> = <a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#triggering\">triggering</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#polarity\">polarity</a> = <a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#polarity\">polarity</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#resource_type\">resource_type</a> = <a class=\"id\" href=\"#ACPI_RESOURCE_TYPE_IRQ\">ACPI_RESOURCE_TYPE_IRQ</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ACPI_RESOURCE_TYPE_EXTENDED_IRQ\">ACPI_RESOURCE_TYPE_EXTENDED_IRQ</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_resource_extended_irq\">acpi_resource_extended_irq</a> *<a class=\"id\" href=\"#p\">p</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    &amp;<a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#data\">data</a>.<a class=\"id\" href=\"#extended_irq\">extended_irq</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#p\">p</a> || !<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#interrupt_count\">interrupt_count</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      \"Blank _PRS EXT IRQ resource\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#AE_OK\">AE_OK</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     (<a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#interrupt_count\">interrupt_count</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      && <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#ACPI_PCI_LINK_MAX_POSSIBLE\">ACPI_PCI_LINK_MAX_POSSIBLE</a>); <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#interrupts\">interrupts</a>[<a class=\"id\" href=\"#i\">i</a>]) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       \"Invalid _PRS IRQ %d\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#interrupts\">interrupts</a>[<a class=\"id\" href=\"#i\">i</a>]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#possible\">possible</a>[<a class=\"id\" href=\"#i\">i</a>] = <a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#interrupts\">interrupts</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#possible_count\">possible_count</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#triggering\">triggering</a> = <a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#triggering\">triggering</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#polarity\">polarity</a> = <a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#polarity\">polarity</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#resource_type\">resource_type</a> = <a class=\"id\" href=\"#ACPI_RESOURCE_TYPE_EXTENDED_IRQ\">ACPI_RESOURCE_TYPE_EXTENDED_IRQ</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"_PRS resource type 0x%x isn't an IRQ\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#type\">type</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#AE_OK\">AE_OK</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#AE_CTRL_TERMINATE\">AE_CTRL_TERMINATE</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#acpi_pci_link_get_possible\">acpi_pci_link_get_possible</a>(struct <a class=\"id\" href=\"#acpi_pci_link\">acpi_pci_link</a> *<a class=\"id\" href=\"#link\">link</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_status\">acpi_status</a> <a class=\"id\" href=\"#status\">status</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#acpi_walk_resources\">acpi_walk_resources</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#handle\">handle</a>, <a class=\"id\" href=\"#METHOD_NAME__PRS\">METHOD_NAME__PRS</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     <a class=\"id\" href=\"#acpi_pci_link_check_possible\">acpi_pci_link_check_possible</a>, <a class=\"id\" href=\"#link\">link</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ACPI_FAILURE\">ACPI_FAILURE</a>(<a class=\"id\" href=\"#status\">status</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ACPI_EXCEPTION\">ACPI_EXCEPTION</a>((<a class=\"id\" href=\"#AE_INFO\">AE_INFO</a>, <a class=\"id\" href=\"#status\">status</a>, \"Evaluating _PRS\"));", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ACPI_DEBUG_PRINT\">ACPI_DEBUG_PRINT</a>((<a class=\"id\" href=\"#ACPI_DB_INFO\">ACPI_DB_INFO</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  \"Found %d possible IRQs\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#possible_count\">possible_count</a>));", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#acpi_status\">acpi_status</a> <a class=\"id\" href=\"#acpi_pci_link_check_current\">acpi_pci_link_check_current</a>(struct <a class=\"id\" href=\"#acpi_resource\">acpi_resource</a> *<a class=\"id\" href=\"#resource\">resource</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       void *<a class=\"id\" href=\"#context\">context</a>)", 
"{", 
"<span class=\"ts\"/>int *<a class=\"id\" href=\"#irq\">irq</a> = <a class=\"id\" href=\"#context\">context</a>;", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#type\">type</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ACPI_RESOURCE_TYPE_START_DEPENDENT\">ACPI_RESOURCE_TYPE_START_DEPENDENT</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ACPI_RESOURCE_TYPE_END_TAG\">ACPI_RESOURCE_TYPE_END_TAG</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#AE_OK\">AE_OK</a>;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ACPI_RESOURCE_TYPE_IRQ\">ACPI_RESOURCE_TYPE_IRQ</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_resource_irq\">acpi_resource_irq</a> *<a class=\"id\" href=\"#p\">p</a> = &amp;<a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#data\">data</a>.<a class=\"id\" href=\"#irq\">irq</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#p\">p</a> || !<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#interrupt_count\">interrupt_count</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * IRQ descriptors may have no IRQ# bits set,</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * particularly those those w/ _STA disabled</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ACPI_DEBUG_PRINT\">ACPI_DEBUG_PRINT</a>((<a class=\"id\" href=\"#ACPI_DB_INFO\">ACPI_DB_INFO</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  \"Blank _CRS IRQ resource\\n\"));", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#AE_OK\">AE_OK</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#irq\">irq</a> = <a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#interrupts\">interrupts</a>[0];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ACPI_RESOURCE_TYPE_EXTENDED_IRQ\">ACPI_RESOURCE_TYPE_EXTENDED_IRQ</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_resource_extended_irq\">acpi_resource_extended_irq</a> *<a class=\"id\" href=\"#p\">p</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    &amp;<a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#data\">data</a>.<a class=\"id\" href=\"#extended_irq\">extended_irq</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#p\">p</a> || !<a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#interrupt_count\">interrupt_count</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * extended IRQ descriptors must</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * return at least 1 IRQ</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      \"Blank _CRS EXT IRQ resource\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#AE_OK\">AE_OK</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#irq\">irq</a> = <a class=\"id\" href=\"#p\">p</a>-><a class=\"id\" href=\"#interrupts\">interrupts</a>[0];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"_CRS resource type 0x%x isn't an IRQ\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#type\">type</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#AE_OK\">AE_OK</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#AE_CTRL_TERMINATE\">AE_CTRL_TERMINATE</a>;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Run _CRS and set link-&gt;irq.active</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * return value:</span>", 
"<span class=\"comment\"> * 0 - success</span>", 
"<span class=\"comment\"> * !0 - failure</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#acpi_pci_link_get_current\">acpi_pci_link_get_current</a>(struct <a class=\"id\" href=\"#acpi_pci_link\">acpi_pci_link</a> *<a class=\"id\" href=\"#link\">link</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#result\">result</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_status\">acpi_status</a> <a class=\"id\" href=\"#status\">status</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#irq\">irq</a> = 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a> = 0;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* in practice, status disabled is meaningless, ignore it */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#acpi_strict\">acpi_strict</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Query _STA, set link-&gt;device-&gt;status */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#acpi_bus_get_status\">acpi_bus_get_status</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"Unable to read status\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#end\">end</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#status\">status</a>.<a class=\"id\" href=\"#enabled\">enabled</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ACPI_DEBUG_PRINT\">ACPI_DEBUG_PRINT</a>((<a class=\"id\" href=\"#ACPI_DB_INFO\">ACPI_DB_INFO</a>, \"Link disabled\\n\"));", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* </span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Query and parse _CRS to get the current IRQ assignment. </span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#acpi_walk_resources\">acpi_walk_resources</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#handle\">handle</a>, <a class=\"id\" href=\"#METHOD_NAME__CRS\">METHOD_NAME__CRS</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     <a class=\"id\" href=\"#acpi_pci_link_check_current\">acpi_pci_link_check_current</a>, &amp;<a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ACPI_FAILURE\">ACPI_FAILURE</a>(<a class=\"id\" href=\"#status\">status</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ACPI_EXCEPTION\">ACPI_EXCEPTION</a>((<a class=\"id\" href=\"#AE_INFO\">AE_INFO</a>, <a class=\"id\" href=\"#status\">status</a>, \"Evaluating _CRS\"));", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#end\">end</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#acpi_strict\">acpi_strict</a> && !<a class=\"id\" href=\"#irq\">irq</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"_CRS returned 0\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a> = <a class=\"id\" href=\"#irq\">irq</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ACPI_DEBUG_PRINT\">ACPI_DEBUG_PRINT</a>((<a class=\"id\" href=\"#ACPI_DB_INFO\">ACPI_DB_INFO</a>, \"Link at IRQ %d \\n\", <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a>));", 
"", 
"      <a class=\"id\" href=\"#end\">end</a>:", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#result\">result</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#acpi_pci_link_set\">acpi_pci_link_set</a>(struct <a class=\"id\" href=\"#acpi_pci_link\">acpi_pci_link</a> *<a class=\"id\" href=\"#link\">link</a>, int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#result\">result</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_status\">acpi_status</a> <a class=\"id\" href=\"#status\">status</a>;", 
"<span class=\"ts\"/>struct {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_resource\">acpi_resource</a> <a class=\"id\" href=\"#res\">res</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_resource\">acpi_resource</a> <a class=\"id\" href=\"#end\">end</a>;", 
"<span class=\"ts\"/>} *<a class=\"id\" href=\"#resource\">resource</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_buffer\">acpi_buffer</a> <a class=\"id\" href=\"#buffer\">buffer</a> = { 0, <a class=\"id\" href=\"#NULL\">NULL</a> };", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#irq\">irq</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#resource\">resource</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof(*<a class=\"id\" href=\"#resource\">resource</a>) + 1, <a class=\"id\" href=\"#irqs_disabled\">irqs_disabled</a>() ? <a class=\"id\" href=\"#GFP_ATOMIC\">GFP_ATOMIC</a>: <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#resource\">resource</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#buffer\">buffer</a>.<a class=\"id\" href=\"#length\">length</a> = sizeof(*<a class=\"id\" href=\"#resource\">resource</a>) + 1;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#buffer\">buffer</a>.<a class=\"id\" href=\"#pointer\">pointer</a> = <a class=\"id\" href=\"#resource\">resource</a>;", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#resource_type\">resource_type</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ACPI_RESOURCE_TYPE_IRQ\">ACPI_RESOURCE_TYPE_IRQ</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#res\">res</a>.<a class=\"id\" href=\"#type\">type</a> = <a class=\"id\" href=\"#ACPI_RESOURCE_TYPE_IRQ\">ACPI_RESOURCE_TYPE_IRQ</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#res\">res</a>.<a class=\"id\" href=\"#length\">length</a> = sizeof(struct <a class=\"id\" href=\"#acpi_resource\">acpi_resource</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#res\">res</a>.<a class=\"id\" href=\"#data\">data</a>.<a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#triggering\">triggering</a> = <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#triggering\">triggering</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#res\">res</a>.<a class=\"id\" href=\"#data\">data</a>.<a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#polarity\">polarity</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#polarity\">polarity</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#triggering\">triggering</a> == <a class=\"id\" href=\"#ACPI_EDGE_SENSITIVE\">ACPI_EDGE_SENSITIVE</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#res\">res</a>.<a class=\"id\" href=\"#data\">data</a>.<a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#sharable\">sharable</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#ACPI_EXCLUSIVE\">ACPI_EXCLUSIVE</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#res\">res</a>.<a class=\"id\" href=\"#data\">data</a>.<a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#sharable\">sharable</a> = <a class=\"id\" href=\"#ACPI_SHARED\">ACPI_SHARED</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#res\">res</a>.<a class=\"id\" href=\"#data\">data</a>.<a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#interrupt_count\">interrupt_count</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#res\">res</a>.<a class=\"id\" href=\"#data\">data</a>.<a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#interrupts\">interrupts</a>[0] = <a class=\"id\" href=\"#irq\">irq</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ACPI_RESOURCE_TYPE_EXTENDED_IRQ\">ACPI_RESOURCE_TYPE_EXTENDED_IRQ</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#res\">res</a>.<a class=\"id\" href=\"#type\">type</a> = <a class=\"id\" href=\"#ACPI_RESOURCE_TYPE_EXTENDED_IRQ\">ACPI_RESOURCE_TYPE_EXTENDED_IRQ</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#res\">res</a>.<a class=\"id\" href=\"#length\">length</a> = sizeof(struct <a class=\"id\" href=\"#acpi_resource\">acpi_resource</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#res\">res</a>.<a class=\"id\" href=\"#data\">data</a>.<a class=\"id\" href=\"#extended_irq\">extended_irq</a>.<a class=\"id\" href=\"#producer_consumer\">producer_consumer</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#ACPI_CONSUMER\">ACPI_CONSUMER</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#res\">res</a>.<a class=\"id\" href=\"#data\">data</a>.<a class=\"id\" href=\"#extended_irq\">extended_irq</a>.<a class=\"id\" href=\"#triggering\">triggering</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#triggering\">triggering</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#res\">res</a>.<a class=\"id\" href=\"#data\">data</a>.<a class=\"id\" href=\"#extended_irq\">extended_irq</a>.<a class=\"id\" href=\"#polarity\">polarity</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#polarity\">polarity</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#triggering\">triggering</a> == <a class=\"id\" href=\"#ACPI_EDGE_SENSITIVE\">ACPI_EDGE_SENSITIVE</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#res\">res</a>.<a class=\"id\" href=\"#data\">data</a>.<a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#sharable\">sharable</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#ACPI_EXCLUSIVE\">ACPI_EXCLUSIVE</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#res\">res</a>.<a class=\"id\" href=\"#data\">data</a>.<a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#sharable\">sharable</a> = <a class=\"id\" href=\"#ACPI_SHARED\">ACPI_SHARED</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#res\">res</a>.<a class=\"id\" href=\"#data\">data</a>.<a class=\"id\" href=\"#extended_irq\">extended_irq</a>.<a class=\"id\" href=\"#interrupt_count\">interrupt_count</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#res\">res</a>.<a class=\"id\" href=\"#data\">data</a>.<a class=\"id\" href=\"#extended_irq\">extended_irq</a>.<a class=\"id\" href=\"#interrupts\">interrupts</a>[0] = <a class=\"id\" href=\"#irq\">irq</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* ignore resource_source, it's optional */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"Invalid Resource_type %d\\n\", <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#resource_type\">resource_type</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#end\">end</a>;", 
"", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#resource\">resource</a>-><a class=\"id\" href=\"#end\">end</a>.<a class=\"id\" href=\"#type\">type</a> = <a class=\"id\" href=\"#ACPI_RESOURCE_TYPE_END_TAG\">ACPI_RESOURCE_TYPE_END_TAG</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Attempt to set the resource */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#acpi_set_current_resources\">acpi_set_current_resources</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#handle\">handle</a>, &amp;<a class=\"id\" href=\"#buffer\">buffer</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* check for total failure */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ACPI_FAILURE\">ACPI_FAILURE</a>(<a class=\"id\" href=\"#status\">status</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ACPI_EXCEPTION\">ACPI_EXCEPTION</a>((<a class=\"id\" href=\"#AE_INFO\">AE_INFO</a>, <a class=\"id\" href=\"#status\">status</a>, \"Evaluating _SRS\"));", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#end\">end</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Query _STA, set device-&gt;status */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#acpi_bus_get_status\">acpi_bus_get_status</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"Unable to read status\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#end\">end</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#status\">status</a>.<a class=\"id\" href=\"#enabled\">enabled</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      \"%s [%s] disabled and referenced, BIOS bug\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#acpi_device_name\">acpi_device_name</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#acpi_device_bid\">acpi_device_bid</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>));", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Query _CRS, set link-&gt;irq.active */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#acpi_pci_link_get_current\">acpi_pci_link_get_current</a>(<a class=\"id\" href=\"#link\">link</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#end\">end</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Is current setting not what we set?</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * set link-&gt;irq.active</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a> != <a class=\"id\" href=\"#irq\">irq</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * policy: when _CRS doesn't return what we just _SRS</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * assume _SRS worked and override _CRS value.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      \"%s [%s] BIOS reported IRQ %d, using IRQ %d\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#acpi_device_name\">acpi_device_name</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#acpi_device_bid\">acpi_device_bid</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>), <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a>, <a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a> = <a class=\"id\" href=\"#irq\">irq</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ACPI_DEBUG_PRINT\">ACPI_DEBUG_PRINT</a>((<a class=\"id\" href=\"#ACPI_DB_INFO\">ACPI_DB_INFO</a>, \"Set IRQ %d\\n\", <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a>));", 
"", 
"      <a class=\"id\" href=\"#end\">end</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#resource\">resource</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#result\">result</a>;", 
"}", 
"", 
"<span class=\"comment\">/* --------------------------------------------------------------------------</span>", 
"<span class=\"comment\">                            PCI Link IRQ Management</span>", 
"<span class=\"comment\">   -------------------------------------------------------------------------- */</span>", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * \"acpi_irq_balance\" (default in APIC mode) enables ACPI to use PIC Interrupt</span>", 
"<span class=\"comment\"> * Link Devices to move the PIRQs around to minimize sharing.</span>", 
"<span class=\"comment\"> * </span>", 
"<span class=\"comment\"> * \"acpi_irq_nobalance\" (default in PIC mode) tells ACPI not to move any PIC IRQs</span>", 
"<span class=\"comment\"> * that the BIOS has already set to active.  This is necessary because</span>", 
"<span class=\"comment\"> * ACPI has no automatic means of knowing what ISA IRQs are used.  Note that</span>", 
"<span class=\"comment\"> * if the BIOS doesn't set a Link Device active, ACPI needs to program it</span>", 
"<span class=\"comment\"> * even if acpi_irq_nobalance is set.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * A tables of penalties avoids directing PCI interrupts to well known</span>", 
"<span class=\"comment\"> * ISA IRQs. Boot params are available to over-ride the default table:</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * List interrupts that are free for PCI use.</span>", 
"<span class=\"comment\"> * acpi_irq_pci=n[,m]</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * List interrupts that should not be used for PCI:</span>", 
"<span class=\"comment\"> * acpi_irq_isa=n[,m]</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Note that PCI IRQ routers have a list of possible IRQs,</span>", 
"<span class=\"comment\"> * which may not include the IRQs this table says are available.</span>", 
"<span class=\"comment\"> * </span>", 
"<span class=\"comment\"> * Since this heuristic can't tell the difference between a link</span>", 
"<span class=\"comment\"> * that no device will attach to, vs. a link which may be shared</span>", 
"<span class=\"comment\"> * by multiple active devices -- it is not optimal.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * If interrupt performance is that important, get an IO-APIC system</span>", 
"<span class=\"comment\"> * with a pin dedicated to each device.  Or for that matter, an MSI</span>", 
"<span class=\"comment\"> * enabled system.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ACPI_MAX_IRQS\">ACPI_MAX_IRQS</a><span class=\"ts\"/><span class=\"ts\"/>256", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ACPI_MAX_ISA_IRQ\">ACPI_MAX_ISA_IRQ</a><span class=\"ts\"/>16", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#PIRQ_PENALTY_PCI_AVAILABLE\">PIRQ_PENALTY_PCI_AVAILABLE</a><span class=\"ts\"/>(0)", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#PIRQ_PENALTY_PCI_POSSIBLE\">PIRQ_PENALTY_PCI_POSSIBLE</a><span class=\"ts\"/>(16*16)", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#PIRQ_PENALTY_PCI_USING\">PIRQ_PENALTY_PCI_USING</a><span class=\"ts\"/><span class=\"ts\"/>(16*16*16)", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#PIRQ_PENALTY_ISA_TYPICAL\">PIRQ_PENALTY_ISA_TYPICAL</a><span class=\"ts\"/>(16*16*16*16)", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#PIRQ_PENALTY_ISA_USED\">PIRQ_PENALTY_ISA_USED</a><span class=\"ts\"/><span class=\"ts\"/>(16*16*16*16*16)", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#PIRQ_PENALTY_ISA_ALWAYS\">PIRQ_PENALTY_ISA_ALWAYS</a><span class=\"ts\"/><span class=\"ts\"/>(16*16*16*16*16*16)", 
"", 
"static int <a class=\"id\" href=\"#acpi_irq_penalty\">acpi_irq_penalty</a>[<a class=\"id\" href=\"#ACPI_MAX_IRQS\">ACPI_MAX_IRQS</a>] = {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#PIRQ_PENALTY_ISA_ALWAYS\">PIRQ_PENALTY_ISA_ALWAYS</a>,<span class=\"ts\"/><span class=\"comment\">/* IRQ0 timer */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#PIRQ_PENALTY_ISA_ALWAYS\">PIRQ_PENALTY_ISA_ALWAYS</a>,<span class=\"ts\"/><span class=\"comment\">/* IRQ1 keyboard */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#PIRQ_PENALTY_ISA_ALWAYS\">PIRQ_PENALTY_ISA_ALWAYS</a>,<span class=\"ts\"/><span class=\"comment\">/* IRQ2 cascade */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#PIRQ_PENALTY_ISA_TYPICAL\">PIRQ_PENALTY_ISA_TYPICAL</a>,<span class=\"ts\"/><span class=\"comment\">/* IRQ3 serial */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#PIRQ_PENALTY_ISA_TYPICAL\">PIRQ_PENALTY_ISA_TYPICAL</a>,<span class=\"ts\"/><span class=\"comment\">/* IRQ4 serial */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#PIRQ_PENALTY_ISA_TYPICAL\">PIRQ_PENALTY_ISA_TYPICAL</a>,<span class=\"ts\"/><span class=\"comment\">/* IRQ5 sometimes SoundBlaster */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#PIRQ_PENALTY_ISA_TYPICAL\">PIRQ_PENALTY_ISA_TYPICAL</a>,<span class=\"ts\"/><span class=\"comment\">/* IRQ6 */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#PIRQ_PENALTY_ISA_TYPICAL\">PIRQ_PENALTY_ISA_TYPICAL</a>,<span class=\"ts\"/><span class=\"comment\">/* IRQ7 parallel, spurious */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#PIRQ_PENALTY_ISA_TYPICAL\">PIRQ_PENALTY_ISA_TYPICAL</a>,<span class=\"ts\"/><span class=\"comment\">/* IRQ8 rtc, sometimes */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#PIRQ_PENALTY_PCI_AVAILABLE\">PIRQ_PENALTY_PCI_AVAILABLE</a>,<span class=\"ts\"/><span class=\"comment\">/* IRQ9  PCI, often acpi */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#PIRQ_PENALTY_PCI_AVAILABLE\">PIRQ_PENALTY_PCI_AVAILABLE</a>,<span class=\"ts\"/><span class=\"comment\">/* IRQ10 PCI */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#PIRQ_PENALTY_PCI_AVAILABLE\">PIRQ_PENALTY_PCI_AVAILABLE</a>,<span class=\"ts\"/><span class=\"comment\">/* IRQ11 PCI */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#PIRQ_PENALTY_ISA_USED\">PIRQ_PENALTY_ISA_USED</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* IRQ12 mouse */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#PIRQ_PENALTY_ISA_USED\">PIRQ_PENALTY_ISA_USED</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* IRQ13 fpe, sometimes */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#PIRQ_PENALTY_ISA_USED\">PIRQ_PENALTY_ISA_USED</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* IRQ14 ide0 */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#PIRQ_PENALTY_ISA_USED\">PIRQ_PENALTY_ISA_USED</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* IRQ15 ide1 */</span>", 
"<span class=\"ts\"/><span class=\"comment\">/* &gt;IRQ15 */</span>", 
"};", 
"", 
"int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#acpi_irq_penalty_init\">acpi_irq_penalty_init</a>(void)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_pci_link\">acpi_pci_link</a> *<a class=\"id\" href=\"#link\">link</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Update penalties to facilitate IRQ balancing.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#link\">link</a>, &amp;<a class=\"id\" href=\"#acpi_link_list\">acpi_link_list</a>, <a class=\"id\" href=\"#list\">list</a>) {", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * reflect the possible and active irqs in the penalty table --</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * useful for breaking ties.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#possible_count\">possible_count</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#penalty\">penalty</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#PIRQ_PENALTY_PCI_POSSIBLE\">PIRQ_PENALTY_PCI_POSSIBLE</a> /", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#possible_count\">possible_count</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#possible_count\">possible_count</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#possible\">possible</a>[<a class=\"id\" href=\"#i\">i</a>] &lt; <a class=\"id\" href=\"#ACPI_MAX_ISA_IRQ\">ACPI_MAX_ISA_IRQ</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#acpi_irq_penalty\">acpi_irq_penalty</a>[<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#possible\">possible</a>[<a class=\"id\" href=\"#i\">i</a>]] +=", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#penalty\">penalty</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>} else if (<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#acpi_irq_penalty\">acpi_irq_penalty</a>[<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a>] +=", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#PIRQ_PENALTY_PCI_POSSIBLE\">PIRQ_PENALTY_PCI_POSSIBLE</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"comment\">/* Add a penalty for the SCI */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_irq_penalty\">acpi_irq_penalty</a>[<a class=\"id\" href=\"#acpi_gbl_FADT\">acpi_gbl_FADT</a>.<a class=\"id\" href=\"#sci_interrupt\">sci_interrupt</a>] += <a class=\"id\" href=\"#PIRQ_PENALTY_PCI_USING\">PIRQ_PENALTY_PCI_USING</a>;", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#acpi_irq_balance\">acpi_irq_balance</a> = -1;<span class=\"ts\"/><span class=\"comment\">/* 0: static, 1: balance */</span>", 
"", 
"static int <a class=\"id\" href=\"#acpi_pci_link_allocate\">acpi_pci_link_allocate</a>(struct <a class=\"id\" href=\"#acpi_pci_link\">acpi_pci_link</a> *<a class=\"id\" href=\"#link\">link</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#irq\">irq</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#initialized\">initialized</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#refcnt\">refcnt</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* This means the link is disabled but initialized */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#acpi_pci_link_set\">acpi_pci_link_set</a>(<a class=\"id\" href=\"#link\">link</a>, <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * search for active IRQ in list of possible IRQs.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#possible_count\">possible_count</a>; ++<a class=\"id\" href=\"#i\">i</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a> == <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#possible\">possible</a>[<a class=\"id\" href=\"#i\">i</a>])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * forget active IRQ that is not in possible list</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#i\">i</a> == <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#possible_count\">possible_count</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#acpi_strict\">acpi_strict</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"_CRS %d not found\"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      \" in _PRS\\n\", <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a> = 0;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * if active found, use it; else pick entry from end of possible list.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irq\">irq</a> = <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a>;", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irq\">irq</a> = <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#possible\">possible</a>[<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#possible_count\">possible_count</a> - 1];", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#acpi_irq_balance\">acpi_irq_balance</a> || !<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * Select the best IRQ.  This is done in reverse to promote</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * the use of IRQs 9, 10, 11, and &gt;15.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = (<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#possible_count\">possible_count</a> - 1); <a class=\"id\" href=\"#i\">i</a> >= 0; <a class=\"id\" href=\"#i\">i</a>--) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#acpi_irq_penalty\">acpi_irq_penalty</a>[<a class=\"id\" href=\"#irq\">irq</a>] &gt;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#acpi_irq_penalty\">acpi_irq_penalty</a>[<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#possible\">possible</a>[<a class=\"id\" href=\"#i\">i</a>]])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irq\">irq</a> = <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#possible\">possible</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Attempt to enable the link device at this IRQ. */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#acpi_pci_link_set\">acpi_pci_link_set</a>(<a class=\"id\" href=\"#link\">link</a>, <a class=\"id\" href=\"#irq\">irq</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"Unable to set IRQ for %s [%s]. \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    \"Try pci=noacpi or acpi=off\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#acpi_device_name\">acpi_device_name</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#acpi_device_bid\">acpi_device_bid</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#acpi_irq_penalty\">acpi_irq_penalty</a>[<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a>] += <a class=\"id\" href=\"#PIRQ_PENALTY_PCI_USING\">PIRQ_PENALTY_PCI_USING</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"%s [%s] enabled at IRQ %d\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#acpi_device_name\">acpi_device_name</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#acpi_device_bid\">acpi_device_bid</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>), <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#initialized\">initialized</a> = 1;", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * acpi_pci_link_allocate_irq</span>", 
"<span class=\"comment\"> * success: return IRQ &gt;= 0</span>", 
"<span class=\"comment\"> * failure: return -1</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#acpi_pci_link_allocate_irq\">acpi_pci_link_allocate_irq</a>(<a class=\"id\" href=\"#acpi_handle\">acpi_handle</a> <a class=\"id\" href=\"#handle\">handle</a>, int <a class=\"id\" href=\"#index\">index</a>, int *<a class=\"id\" href=\"#triggering\">triggering</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       int *<a class=\"id\" href=\"#polarity\">polarity</a>, char **<a class=\"id\" href=\"#name\">name</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#result\">result</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_device\">acpi_device</a> *<a class=\"id\" href=\"#device\">device</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_pci_link\">acpi_pci_link</a> *<a class=\"id\" href=\"#link\">link</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#acpi_bus_get_device\">acpi_bus_get_device</a>(<a class=\"id\" href=\"#handle\">handle</a>, &amp;<a class=\"id\" href=\"#device\">device</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"Invalid link device\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a> = <a class=\"id\" href=\"#acpi_driver_data\">acpi_driver_data</a>(<a class=\"id\" href=\"#device\">device</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#link\">link</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"Invalid link context\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* TBD: Support multiple index (IRQ) entries per Link Device */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#index\">index</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"Invalid index %d\\n\", <a class=\"id\" href=\"#index\">index</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#acpi_link_lock\">acpi_link_lock</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#acpi_pci_link_allocate\">acpi_pci_link_allocate</a>(<a class=\"id\" href=\"#link\">link</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#acpi_link_lock\">acpi_link_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#acpi_link_lock\">acpi_link_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"Link active IRQ is 0!\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#refcnt\">refcnt</a>++;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#acpi_link_lock\">acpi_link_lock</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#triggering\">triggering</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#triggering\">triggering</a> = <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#triggering\">triggering</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#polarity\">polarity</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#polarity\">polarity</a> = <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#polarity\">polarity</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#name\">name</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#name\">name</a> = <a class=\"id\" href=\"#acpi_device_bid\">acpi_device_bid</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ACPI_DEBUG_PRINT\">ACPI_DEBUG_PRINT</a>((<a class=\"id\" href=\"#ACPI_DB_INFO\">ACPI_DB_INFO</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  \"Link %s is referenced\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#acpi_device_bid\">acpi_device_bid</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>)));", 
"<span class=\"ts\"/>return (<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * We don't change link's irq information here.  After it is reenabled, we</span>", 
"<span class=\"comment\"> * continue use the info</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#acpi_pci_link_free_irq\">acpi_pci_link_free_irq</a>(<a class=\"id\" href=\"#acpi_handle\">acpi_handle</a> <a class=\"id\" href=\"#handle\">handle</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_device\">acpi_device</a> *<a class=\"id\" href=\"#device\">device</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_pci_link\">acpi_pci_link</a> *<a class=\"id\" href=\"#link\">link</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_status\">acpi_status</a> <a class=\"id\" href=\"#result\">result</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#acpi_bus_get_device\">acpi_bus_get_device</a>(<a class=\"id\" href=\"#handle\">handle</a>, &amp;<a class=\"id\" href=\"#device\">device</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"Invalid link device\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a> = <a class=\"id\" href=\"#acpi_driver_data\">acpi_driver_data</a>(<a class=\"id\" href=\"#device\">device</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#link\">link</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"Invalid link context\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#acpi_link_lock\">acpi_link_lock</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#initialized\">initialized</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#acpi_link_lock\">acpi_link_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"Link isn't initialized\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>}", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a><span class=\"ts\"/><a class=\"id\" href=\"#FUTURE_USE\">FUTURE_USE</a>", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * The Link reference count allows us to _DISable an unused link</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * and suspend time, and set it again  on resume.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * However, 2.6.12 still has irq_router.resume</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * which blindly restores the link state.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * So we disable the reference count method</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * to prevent duplicate acpi_pci_link_set()</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * which would harm some systems</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#refcnt\">refcnt</a>--;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ACPI_DEBUG_PRINT\">ACPI_DEBUG_PRINT</a>((<a class=\"id\" href=\"#ACPI_DB_INFO\">ACPI_DB_INFO</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  \"Link %s is dereferenced\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#acpi_device_bid\">acpi_device_bid</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>)));", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#refcnt\">refcnt</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#acpi_evaluate_object\">acpi_evaluate_object</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#handle\">handle</a>, \"_DIS\", <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#acpi_link_lock\">acpi_link_lock</a>);", 
"<span class=\"ts\"/>return (<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a>);", 
"}", 
"", 
"<span class=\"comment\">/* --------------------------------------------------------------------------</span>", 
"<span class=\"comment\">                                 Driver Interface</span>", 
"<span class=\"comment\">   -------------------------------------------------------------------------- */</span>", 
"", 
"static int <a class=\"id\" href=\"#acpi_pci_link_add\">acpi_pci_link_add</a>(struct <a class=\"id\" href=\"#acpi_device\">acpi_device</a> *<a class=\"id\" href=\"#device\">device</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#result\">result</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_pci_link\">acpi_pci_link</a> *<a class=\"id\" href=\"#link\">link</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#found\">found</a> = 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof(struct <a class=\"id\" href=\"#acpi_pci_link\">acpi_pci_link</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#link\">link</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a> = <a class=\"id\" href=\"#device\">device</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#strcpy\">strcpy</a>(<a class=\"id\" href=\"#acpi_device_name\">acpi_device_name</a>(<a class=\"id\" href=\"#device\">device</a>), <a class=\"id\" href=\"#ACPI_PCI_LINK_DEVICE_NAME\">ACPI_PCI_LINK_DEVICE_NAME</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#strcpy\">strcpy</a>(<a class=\"id\" href=\"#acpi_device_class\">acpi_device_class</a>(<a class=\"id\" href=\"#device\">device</a>), <a class=\"id\" href=\"#ACPI_PCI_LINK_CLASS\">ACPI_PCI_LINK_CLASS</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#driver_data\">driver_data</a> = <a class=\"id\" href=\"#link\">link</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#acpi_link_lock\">acpi_link_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#acpi_pci_link_get_possible\">acpi_pci_link_get_possible</a>(<a class=\"id\" href=\"#link\">link</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#end\">end</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* query and set link-&gt;irq.active */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_pci_link_get_current\">acpi_pci_link_get_current</a>(<a class=\"id\" href=\"#link\">link</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"%s [%s] (IRQs\", <a class=\"id\" href=\"#acpi_device_name\">acpi_device_name</a>(<a class=\"id\" href=\"#device\">device</a>),", 
"<span class=\"ts\"/>       <a class=\"id\" href=\"#acpi_device_bid\">acpi_device_bid</a>(<a class=\"id\" href=\"#device\">device</a>));", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#possible_count\">possible_count</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a> == <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#possible\">possible</a>[<a class=\"id\" href=\"#i\">i</a>]) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\" *%d\", <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#possible\">possible</a>[<a class=\"id\" href=\"#i\">i</a>]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#found\">found</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\" %d\", <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#possible\">possible</a>[<a class=\"id\" href=\"#i\">i</a>]);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\")\");", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#found\">found</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\" *%d\", <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#status\">status</a>.<a class=\"id\" href=\"#enabled\">enabled</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\", disabled.\");", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\"\\n\");", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_add_tail\">list_add_tail</a>(&amp;<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#list\">list</a>, &amp;<a class=\"id\" href=\"#acpi_link_list\">acpi_link_list</a>);", 
"", 
"      <a class=\"id\" href=\"#end\">end</a>:", 
"<span class=\"ts\"/><span class=\"comment\">/* disable all links -- to be activated on use */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_evaluate_object\">acpi_evaluate_object</a>(<a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#handle\">handle</a>, \"_DIS\", <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#acpi_link_lock\">acpi_link_lock</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#link\">link</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#result\">result</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#acpi_pci_link_resume\">acpi_pci_link_resume</a>(struct <a class=\"id\" href=\"#acpi_pci_link\">acpi_pci_link</a> *<a class=\"id\" href=\"#link\">link</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#refcnt\">refcnt</a> && <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a> && <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#initialized\">initialized</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return (<a class=\"id\" href=\"#acpi_pci_link_set\">acpi_pci_link_set</a>(<a class=\"id\" href=\"#link\">link</a>, <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#active\">active</a>));", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#irqrouter_resume\">irqrouter_resume</a>(struct <a class=\"id\" href=\"#sys_device\">sys_device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_pci_link\">acpi_pci_link</a> *<a class=\"id\" href=\"#link\">link</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#link\">link</a>, &amp;<a class=\"id\" href=\"#acpi_link_list\">acpi_link_list</a>, <a class=\"id\" href=\"#list\">list</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#acpi_pci_link_resume\">acpi_pci_link_resume</a>(<a class=\"id\" href=\"#link\">link</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#acpi_pci_link_remove\">acpi_pci_link_remove</a>(struct <a class=\"id\" href=\"#acpi_device\">acpi_device</a> *<a class=\"id\" href=\"#device\">device</a>, int <a class=\"id\" href=\"#type\">type</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_pci_link\">acpi_pci_link</a> *<a class=\"id\" href=\"#link\">link</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a> = <a class=\"id\" href=\"#acpi_driver_data\">acpi_driver_data</a>(<a class=\"id\" href=\"#device\">device</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#acpi_link_lock\">acpi_link_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_del\">list_del</a>(&amp;<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#list\">list</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#acpi_link_lock\">acpi_link_lock</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#link\">link</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * modify acpi_irq_penalty[] from cmdline</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#acpi_irq_penalty_update\">acpi_irq_penalty_update</a>(char *<a class=\"id\" href=\"#str\">str</a>, int <a class=\"id\" href=\"#used\">used</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; 16; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#irq\">irq</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#get_option\">get_option</a>(&amp;<a class=\"id\" href=\"#str\">str</a>, &amp;<a class=\"id\" href=\"#irq\">irq</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#retval\">retval</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;<span class=\"ts\"/><span class=\"comment\">/* no number found */</span>", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#irq\">irq</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#irq\">irq</a> >= <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#acpi_irq_penalty\">acpi_irq_penalty</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#used\">used</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#acpi_irq_penalty\">acpi_irq_penalty</a>[<a class=\"id\" href=\"#irq\">irq</a>] += <a class=\"id\" href=\"#PIRQ_PENALTY_ISA_USED\">PIRQ_PENALTY_ISA_USED</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#acpi_irq_penalty\">acpi_irq_penalty</a>[<a class=\"id\" href=\"#irq\">irq</a>] = <a class=\"id\" href=\"#PIRQ_PENALTY_PCI_AVAILABLE\">PIRQ_PENALTY_PCI_AVAILABLE</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a> != 2)<span class=\"ts\"/><span class=\"comment\">/* no next number */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 1;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * We'd like PNP to call this routine for the</span>", 
"<span class=\"comment\"> * single ISA_USED value for each legacy device.</span>", 
"<span class=\"comment\"> * But instead it calls us with each POSSIBLE setting.</span>", 
"<span class=\"comment\"> * There is no ISA_POSSIBLE weight, so we simply use</span>", 
"<span class=\"comment\"> * the (small) PCI_USING penalty.</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#acpi_penalize_isa_irq\">acpi_penalize_isa_irq</a>(int <a class=\"id\" href=\"#irq\">irq</a>, int <a class=\"id\" href=\"#active\">active</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irq\">irq</a> >= 0 && <a class=\"id\" href=\"#irq\">irq</a> &lt; <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#acpi_irq_penalty\">acpi_irq_penalty</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#active\">active</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#acpi_irq_penalty\">acpi_irq_penalty</a>[<a class=\"id\" href=\"#irq\">irq</a>] += <a class=\"id\" href=\"#PIRQ_PENALTY_ISA_USED\">PIRQ_PENALTY_ISA_USED</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#acpi_irq_penalty\">acpi_irq_penalty</a>[<a class=\"id\" href=\"#irq\">irq</a>] += <a class=\"id\" href=\"#PIRQ_PENALTY_PCI_USING\">PIRQ_PENALTY_PCI_USING</a>;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Over-ride default table to reserve additional IRQs for use by ISA</span>", 
"<span class=\"comment\"> * e.g. acpi_irq_isa=5</span>", 
"<span class=\"comment\"> * Useful for telling ACPI how not to interfere with your ISA sound card.</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#acpi_irq_isa\">acpi_irq_isa</a>(char *<a class=\"id\" href=\"#str\">str</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#acpi_irq_penalty_update\">acpi_irq_penalty_update</a>(<a class=\"id\" href=\"#str\">str</a>, 1);", 
"}", 
"", 
"<a class=\"id\" href=\"#__setup\">__setup</a>(\"acpi_irq_isa=\", <a class=\"id\" href=\"#acpi_irq_isa\">acpi_irq_isa</a>);", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Over-ride default table to free additional IRQs for use by PCI</span>", 
"<span class=\"comment\"> * e.g. acpi_irq_pci=7,15</span>", 
"<span class=\"comment\"> * Used for acpi_irq_balance to free up IRQs to reduce PCI IRQ sharing.</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#acpi_irq_pci\">acpi_irq_pci</a>(char *<a class=\"id\" href=\"#str\">str</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#acpi_irq_penalty_update\">acpi_irq_penalty_update</a>(<a class=\"id\" href=\"#str\">str</a>, 0);", 
"}", 
"", 
"<a class=\"id\" href=\"#__setup\">__setup</a>(\"acpi_irq_pci=\", <a class=\"id\" href=\"#acpi_irq_pci\">acpi_irq_pci</a>);", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#acpi_irq_nobalance_set\">acpi_irq_nobalance_set</a>(char *<a class=\"id\" href=\"#str\">str</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_irq_balance\">acpi_irq_balance</a> = 0;", 
"<span class=\"ts\"/>return 1;", 
"}", 
"", 
"<a class=\"id\" href=\"#__setup\">__setup</a>(\"acpi_irq_nobalance\", <a class=\"id\" href=\"#acpi_irq_nobalance_set\">acpi_irq_nobalance_set</a>);", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#acpi_irq_balance_set\">acpi_irq_balance_set</a>(char *<a class=\"id\" href=\"#str\">str</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_irq_balance\">acpi_irq_balance</a> = 1;", 
"<span class=\"ts\"/>return 1;", 
"}", 
"", 
"<a class=\"id\" href=\"#__setup\">__setup</a>(\"acpi_irq_balance\", <a class=\"id\" href=\"#acpi_irq_balance_set\">acpi_irq_balance_set</a>);", 
"", 
"<span class=\"comment\">/* FIXME: we will remove this interface after all drivers call pci_disable_device */</span>", 
"static struct <a class=\"id\" href=\"#sysdev_class\">sysdev_class</a> <a class=\"id\" href=\"#irqrouter_sysdev_class\">irqrouter_sysdev_class</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a> = \"irqrouter\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#resume\">resume</a> = <a class=\"id\" href=\"#irqrouter_resume\">irqrouter_resume</a>,", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#sys_device\">sys_device</a> <a class=\"id\" href=\"#device_irqrouter\">device_irqrouter</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#id\">id</a> = 0,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#cls\">cls</a> = &amp;<a class=\"id\" href=\"#irqrouter_sysdev_class\">irqrouter_sysdev_class</a>,", 
"};", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#irqrouter_init_sysfs\">irqrouter_init_sysfs</a>(void)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#acpi_disabled\">acpi_disabled</a> || <a class=\"id\" href=\"#acpi_noirq\">acpi_noirq</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#sysdev_class_register\">sysdev_class_register</a>(&amp;<a class=\"id\" href=\"#irqrouter_sysdev_class\">irqrouter_sysdev_class</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#error\">error</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#sysdev_register\">sysdev_register</a>(&amp;<a class=\"id\" href=\"#device_irqrouter\">device_irqrouter</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"}", 
"", 
"<a class=\"id\" href=\"#device_initcall\">device_initcall</a>(<a class=\"id\" href=\"#irqrouter_init_sysfs\">irqrouter_init_sysfs</a>);", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#acpi_pci_link_init\">acpi_pci_link_init</a>(void)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#acpi_noirq\">acpi_noirq</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#acpi_irq_balance\">acpi_irq_balance</a> == -1) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* no command line switch: enable balancing in IOAPIC mode */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#acpi_irq_model\">acpi_irq_model</a> == <a class=\"id\" href=\"#ACPI_IRQ_MODEL_IOAPIC\">ACPI_IRQ_MODEL_IOAPIC</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#acpi_irq_balance\">acpi_irq_balance</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#acpi_irq_balance\">acpi_irq_balance</a> = 0;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#acpi_bus_register_driver\">acpi_bus_register_driver</a>(&amp;<a class=\"id\" href=\"#acpi_pci_link_driver\">acpi_pci_link_driver</a>) &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<a class=\"id\" href=\"#subsys_initcall\">subsys_initcall</a>(<a class=\"id\" href=\"#acpi_pci_link_init\">acpi_pci_link_init</a>);", 
];
xr_frag_insert('l/89/d1d61c40b207e26e0bfe9815533dcbd40f8b0b.xr', __xr_tmp);
