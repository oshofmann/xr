var __xr_tmp = [
"", 
"<span class=\"comment\">/* Borrowed from buffer.c: this is a tried and tested block hash function */</span>", 
"static <a class=\"id\" href=\"#inline\">inline</a> int <a class=\"id\" href=\"#hash\">hash</a>(<a class=\"id\" href=\"#journal_t\">journal_t</a> *<a class=\"id\" href=\"#journal\">journal</a>, unsigned long long <a class=\"id\" href=\"#block\">block</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#jbd2_revoke_table_s\">jbd2_revoke_table_s</a> *<a class=\"id\" href=\"#table\">table</a> = <a class=\"id\" href=\"#journal\">journal</a>-><a class=\"id\" href=\"#j_revoke\">j_revoke</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#hash_shift\">hash_shift</a> = <a class=\"id\" href=\"#table\">table</a>-><a class=\"id\" href=\"#hash_shift\">hash_shift</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#hash\">hash</a> = (int)<a class=\"id\" href=\"#block\">block</a> ^ (int)((<a class=\"id\" href=\"#block\">block</a> >> 31) >> 1);", 
"", 
"<span class=\"ts\"/>return ((<a class=\"id\" href=\"#hash\">hash</a> << (<a class=\"id\" href=\"#hash_shift\">hash_shift</a> - 6)) ^", 
"<span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#hash\">hash</a> >> 13) ^", 
"<span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#hash\">hash</a> << (<a class=\"id\" href=\"#hash_shift\">hash_shift</a> - 12))) &amp; (<a class=\"id\" href=\"#table\">table</a>-><a class=\"id\" href=\"#hash_size\">hash_size</a> - 1);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#insert_revoke_hash\">insert_revoke_hash</a>(<a class=\"id\" href=\"#journal_t\">journal_t</a> *<a class=\"id\" href=\"#journal\">journal</a>, unsigned long long <a class=\"id\" href=\"#blocknr\">blocknr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#tid_t\">tid_t</a> <a class=\"id\" href=\"#seq\">seq</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#list_head\">list_head</a> *<a class=\"id\" href=\"#hash_list\">hash_list</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#jbd2_revoke_record_s\">jbd2_revoke_record_s</a> *<a class=\"id\" href=\"#record\">record</a>;", 
"", 
"<a class=\"id\" href=\"#repeat\">repeat</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#record\">record</a> = <a class=\"id\" href=\"#kmem_cache_alloc\">kmem_cache_alloc</a>(<a class=\"id\" href=\"#jbd2_revoke_record_cache\">jbd2_revoke_record_cache</a>, <a class=\"id\" href=\"#GFP_NOFS\">GFP_NOFS</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#record\">record</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#oom\">oom</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#record\">record</a>-><a class=\"id\" href=\"#sequence\">sequence</a> = <a class=\"id\" href=\"#seq\">seq</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#record\">record</a>-><a class=\"id\" href=\"#blocknr\">blocknr</a> = <a class=\"id\" href=\"#blocknr\">blocknr</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#hash_list\">hash_list</a> = &amp;<a class=\"id\" href=\"#journal\">journal</a>-><a class=\"id\" href=\"#j_revoke\">j_revoke</a>-><a class=\"id\" href=\"#hash_table\">hash_table</a>[<a class=\"id\" href=\"#hash\">hash</a>(<a class=\"id\" href=\"#journal\">journal</a>, <a class=\"id\" href=\"#blocknr\">blocknr</a>)];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock\">spin_lock</a>(&amp;<a class=\"id\" href=\"#journal\">journal</a>-><a class=\"id\" href=\"#j_revoke_lock\">j_revoke_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_add\">list_add</a>(&amp;<a class=\"id\" href=\"#record\">record</a>-><a class=\"id\" href=\"#hash\">hash</a>, <a class=\"id\" href=\"#hash_list\">hash_list</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock\">spin_unlock</a>(&amp;<a class=\"id\" href=\"#journal\">journal</a>-><a class=\"id\" href=\"#j_revoke_lock\">j_revoke_lock</a>);", 
"<span class=\"ts\"/>return 0;", 
"", 
"<a class=\"id\" href=\"#oom\">oom</a>:", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#journal_oom_retry\">journal_oom_retry</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#jbd_debug\">jbd_debug</a>(1, \"ENOMEM in %s, retrying\\n\", <a class=\"id\" href=\"#__func__\">__func__</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#yield\">yield</a>();", 
"<span class=\"ts\"/>goto <a class=\"id\" href=\"#repeat\">repeat</a>;", 
"}", 
"", 
"<span class=\"comment\">/* Find a revoke record in the journal's hash table. */</span>", 
"", 
"static struct <a class=\"id\" href=\"#jbd2_revoke_record_s\">jbd2_revoke_record_s</a> *<a class=\"id\" href=\"#find_revoke_record\">find_revoke_record</a>(<a class=\"id\" href=\"#journal_t\">journal_t</a> *<a class=\"id\" href=\"#journal\">journal</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      unsigned long long <a class=\"id\" href=\"#blocknr\">blocknr</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#list_head\">list_head</a> *<a class=\"id\" href=\"#hash_list\">hash_list</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#jbd2_revoke_record_s\">jbd2_revoke_record_s</a> *<a class=\"id\" href=\"#record\">record</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#hash_list\">hash_list</a> = &amp;<a class=\"id\" href=\"#journal\">journal</a>-><a class=\"id\" href=\"#j_revoke\">j_revoke</a>-><a class=\"id\" href=\"#hash_table\">hash_table</a>[<a class=\"id\" href=\"#hash\">hash</a>(<a class=\"id\" href=\"#journal\">journal</a>, <a class=\"id\" href=\"#blocknr\">blocknr</a>)];", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock\">spin_lock</a>(&amp;<a class=\"id\" href=\"#journal\">journal</a>-><a class=\"id\" href=\"#j_revoke_lock\">j_revoke_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#record\">record</a> = (struct <a class=\"id\" href=\"#jbd2_revoke_record_s\">jbd2_revoke_record_s</a> *) <a class=\"id\" href=\"#hash_list\">hash_list</a>-><a class=\"id\" href=\"#next\">next</a>;", 
"<span class=\"ts\"/>while (&amp;(<a class=\"id\" href=\"#record\">record</a>-><a class=\"id\" href=\"#hash\">hash</a>) != <a class=\"id\" href=\"#hash_list\">hash_list</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#record\">record</a>-><a class=\"id\" href=\"#blocknr\">blocknr</a> == <a class=\"id\" href=\"#blocknr\">blocknr</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock\">spin_unlock</a>(&amp;<a class=\"id\" href=\"#journal\">journal</a>-><a class=\"id\" href=\"#j_revoke_lock\">j_revoke_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#record\">record</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#record\">record</a> = (struct <a class=\"id\" href=\"#jbd2_revoke_record_s\">jbd2_revoke_record_s</a> *) <a class=\"id\" href=\"#record\">record</a>-><a class=\"id\" href=\"#hash\">hash</a>.<a class=\"id\" href=\"#next\">next</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock\">spin_unlock</a>(&amp;<a class=\"id\" href=\"#journal\">journal</a>-><a class=\"id\" href=\"#j_revoke_lock\">j_revoke_lock</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"}", 
"", 
"void <a class=\"id\" href=\"#jbd2_journal_destroy_revoke_caches\">jbd2_journal_destroy_revoke_caches</a>(void)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#jbd2_revoke_record_cache\">jbd2_revoke_record_cache</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kmem_cache_destroy\">kmem_cache_destroy</a>(<a class=\"id\" href=\"#jbd2_revoke_record_cache\">jbd2_revoke_record_cache</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#jbd2_revoke_record_cache\">jbd2_revoke_record_cache</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#jbd2_revoke_table_cache\">jbd2_revoke_table_cache</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kmem_cache_destroy\">kmem_cache_destroy</a>(<a class=\"id\" href=\"#jbd2_revoke_table_cache\">jbd2_revoke_table_cache</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#jbd2_revoke_table_cache\">jbd2_revoke_table_cache</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#jbd2_journal_init_revoke_caches\">jbd2_journal_init_revoke_caches</a>(void)", 
"{", 
];
xr_frag_insert('l/8f/31071fbc39657b7d73f9df070d5c9e983e6a38.xr', __xr_tmp);
