var __xr_tmp = [
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * i8042_filter() filters out unwanted bytes from the input data stream.</span>", 
"<span class=\"comment\"> * It is called from i8042_interrupt and thus is running with interrupts</span>", 
"<span class=\"comment\"> * off and i8042_lock held.</span>", 
"<span class=\"comment\"> */</span>", 
"static <a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#i8042_filter\">i8042_filter</a>(unsigned char <a class=\"id\" href=\"#data\">data</a>, unsigned char <a class=\"id\" href=\"#str\">str</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(<a class=\"id\" href=\"#i8042_suppress_kbd_ack\">i8042_suppress_kbd_ack</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((~<a class=\"id\" href=\"#str\">str</a> &amp; <a class=\"id\" href=\"#I8042_STR_AUXDATA\">I8042_STR_AUXDATA</a>) &&", 
"<span class=\"ts\"/><span class=\"ts\"/>    (<a class=\"id\" href=\"#data\">data</a> == 0xfa || <a class=\"id\" href=\"#data\">data</a> == 0xfe)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#i8042_suppress_kbd_ack\">i8042_suppress_kbd_ack</a>--;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"Extra keyboard ACK - filtered out\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#i8042_platform_filter\">i8042_platform_filter</a> && <a class=\"id\" href=\"#i8042_platform_filter\">i8042_platform_filter</a>(<a class=\"id\" href=\"#data\">data</a>, <a class=\"id\" href=\"#str\">str</a>, <a class=\"id\" href=\"#serio\">serio</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"Filtered out by platform filter\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#false\">false</a>;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * i8042_interrupt() is the most important function in this driver -</span>", 
"<span class=\"comment\"> * it handles the interrupts from the i8042, and sends incoming bytes</span>", 
"<span class=\"comment\"> * to the upper layers.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static <a class=\"id\" href=\"#irqreturn_t\">irqreturn_t</a> <a class=\"id\" href=\"#i8042_interrupt\">i8042_interrupt</a>(int <a class=\"id\" href=\"#irq\">irq</a>, void *<a class=\"id\" href=\"#dev_id\">dev_id</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#i8042_port\">i8042_port</a> *<a class=\"id\" href=\"#port\">port</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#str\">str</a>, <a class=\"id\" href=\"#data\">data</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#dfl\">dfl</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#port_no\">port_no</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#filtered\">filtered</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a> = 1;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irqsave\">spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#i8042_lock\">i8042_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#str\">str</a> = <a class=\"id\" href=\"#i8042_read_status\">i8042_read_status</a>();", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(~<a class=\"id\" href=\"#str\">str</a> &amp; <a class=\"id\" href=\"#I8042_STR_OBF\">I8042_STR_OBF</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irqrestore\">spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#i8042_lock\">i8042_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#irq\">irq</a>) <a class=\"id\" href=\"#dbg\">dbg</a>(\"Interrupt %d, without any data\", <a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#data\">data</a> = <a class=\"id\" href=\"#i8042_read_data\">i8042_read_data</a>();", 
];
xr_frag_insert('l/97/5230e8f414f0d3e65c685ac7df23bdcee56cf3.xr', __xr_tmp);
