var __xr_tmp = [
"<span class=\"ts\"/>.<a class=\"id\" href=\"#put_chars\">put_chars</a> = <a class=\"id\" href=\"#write_console\">write_console</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#notifier_add\">notifier_add</a> = <a class=\"id\" href=\"#notifier_add_irq\">notifier_add_irq</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#notifier_del\">notifier_del</a> = <a class=\"id\" href=\"#notifier_del_irq\">notifier_del_irq</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#notifier_hangup\">notifier_hangup</a> = <a class=\"id\" href=\"#notifier_hangup_irq\">notifier_hangup_irq</a>,", 
"};", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#xen_init\">xen_init</a>(void)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#hvc_struct\">hvc_struct</a> *<a class=\"id\" href=\"#hp\">hp</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#xen_pv_domain\">xen_pv_domain</a>() ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#xen_initial_domain\">xen_initial_domain</a>() ||", 
"<span class=\"ts\"/>    !<a class=\"id\" href=\"#xen_start_info\">xen_start_info</a>-><a class=\"id\" href=\"#console\">console</a>.<a class=\"id\" href=\"#domU\">domU</a>.<a class=\"id\" href=\"#evtchn\">evtchn</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#xencons_irq\">xencons_irq</a> = <a class=\"id\" href=\"#bind_evtchn_to_irq\">bind_evtchn_to_irq</a>(<a class=\"id\" href=\"#xen_start_info\">xen_start_info</a>-><a class=\"id\" href=\"#console\">console</a>.<a class=\"id\" href=\"#domU\">domU</a>.<a class=\"id\" href=\"#evtchn\">evtchn</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#xencons_irq\">xencons_irq</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#xencons_irq\">xencons_irq</a> = 0; <span class=\"comment\">/* NO_IRQ */</span>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#hp\">hp</a> = <a class=\"id\" href=\"#hvc_alloc\">hvc_alloc</a>(<a class=\"id\" href=\"#HVC_COOKIE\">HVC_COOKIE</a>, <a class=\"id\" href=\"#xencons_irq\">xencons_irq</a>, &amp;<a class=\"id\" href=\"#hvc_ops\">hvc_ops</a>, 256);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#IS_ERR\">IS_ERR</a>(<a class=\"id\" href=\"#hp\">hp</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#PTR_ERR\">PTR_ERR</a>(<a class=\"id\" href=\"#hp\">hp</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#hvc\">hvc</a> = <a class=\"id\" href=\"#hp\">hp</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#console_pfn\">console_pfn</a> = <a class=\"id\" href=\"#mfn_to_pfn\">mfn_to_pfn</a>(<a class=\"id\" href=\"#xen_start_info\">xen_start_info</a>-><a class=\"id\" href=\"#console\">console</a>.<a class=\"id\" href=\"#domU\">domU</a>.<a class=\"id\" href=\"#mfn\">mfn</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"void <a class=\"id\" href=\"#xen_console_resume\">xen_console_resume</a>(void)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#xencons_irq\">xencons_irq</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rebind_evtchn_irq\">rebind_evtchn_irq</a>(<a class=\"id\" href=\"#xen_start_info\">xen_start_info</a>-><a class=\"id\" href=\"#console\">console</a>.<a class=\"id\" href=\"#domU\">domU</a>.<a class=\"id\" href=\"#evtchn\">evtchn</a>, <a class=\"id\" href=\"#xencons_irq\">xencons_irq</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#__exit\">__exit</a> <a class=\"id\" href=\"#xen_fini\">xen_fini</a>(void)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#hvc\">hvc</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hvc_remove\">hvc_remove</a>(<a class=\"id\" href=\"#hvc\">hvc</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#xen_cons_init\">xen_cons_init</a>(void)", 
"{", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#xen_pv_domain\">xen_pv_domain</a>())", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#hvc_instantiate\">hvc_instantiate</a>(<a class=\"id\" href=\"#HVC_COOKIE\">HVC_COOKIE</a>, 0, &amp;<a class=\"id\" href=\"#hvc_ops\">hvc_ops</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<a class=\"id\" href=\"#module_init\">module_init</a>(<a class=\"id\" href=\"#xen_init\">xen_init</a>);", 
"<a class=\"id\" href=\"#module_exit\">module_exit</a>(<a class=\"id\" href=\"#xen_fini\">xen_fini</a>);", 
"<a class=\"id\" href=\"#console_initcall\">console_initcall</a>(<a class=\"id\" href=\"#xen_cons_init\">xen_cons_init</a>);", 
"", 
"static void <a class=\"id\" href=\"#raw_console_write\">raw_console_write</a>(const char *<a class=\"id\" href=\"#str\">str</a>, int <a class=\"id\" href=\"#len\">len</a>)", 
"{", 
"<span class=\"ts\"/>while(<a class=\"id\" href=\"#len\">len</a> &gt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#HYPERVISOR_console_io\">HYPERVISOR_console_io</a>(<a class=\"id\" href=\"#CONSOLEIO_write\">CONSOLEIO_write</a>, <a class=\"id\" href=\"#len\">len</a>, (char *)<a class=\"id\" href=\"#str\">str</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a> <= 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#str\">str</a> += <a class=\"id\" href=\"#rc\">rc</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a> -= <a class=\"id\" href=\"#rc\">rc</a>;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_EARLY_PRINTK\">CONFIG_EARLY_PRINTK</a>", 
"static void <a class=\"id\" href=\"#xenboot_write_console\">xenboot_write_console</a>(struct <a class=\"id\" href=\"#console\">console</a> *<a class=\"id\" href=\"#console\">console</a>, const char *<a class=\"id\" href=\"#string\">string</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  unsigned <a class=\"id\" href=\"#len\">len</a>)", 
"{", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#linelen\">linelen</a>, <a class=\"id\" href=\"#off\">off</a> = 0;", 
"<span class=\"ts\"/>const char *<a class=\"id\" href=\"#pos\">pos</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_console_write\">raw_console_write</a>(<a class=\"id\" href=\"#string\">string</a>, <a class=\"id\" href=\"#len\">len</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#write_console\">write_console</a>(0, \"(early) \", 8);", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#off\">off</a> &lt; <a class=\"id\" href=\"#len\">len</a> && <a class=\"id\" href=\"#NULL\">NULL</a> != (<a class=\"id\" href=\"#pos\">pos</a> = <a class=\"id\" href=\"#strchr\">strchr</a>(<a class=\"id\" href=\"#string\">string</a>+<a class=\"id\" href=\"#off\">off</a>, '\\n'))) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#linelen\">linelen</a> = <a class=\"id\" href=\"#pos\">pos</a>-<a class=\"id\" href=\"#string\">string</a>+<a class=\"id\" href=\"#off\">off</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#off\">off</a> + <a class=\"id\" href=\"#linelen\">linelen</a> &gt; <a class=\"id\" href=\"#len\">len</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#write_console\">write_console</a>(0, <a class=\"id\" href=\"#string\">string</a>+<a class=\"id\" href=\"#off\">off</a>, <a class=\"id\" href=\"#linelen\">linelen</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#write_console\">write_console</a>(0, \"\\r\\n\", 2);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#off\">off</a> += <a class=\"id\" href=\"#linelen\">linelen</a> + 1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#off\">off</a> &lt; <a class=\"id\" href=\"#len\">len</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#write_console\">write_console</a>(0, <a class=\"id\" href=\"#string\">string</a>+<a class=\"id\" href=\"#off\">off</a>, <a class=\"id\" href=\"#len\">len</a>-<a class=\"id\" href=\"#off\">off</a>);", 
"}", 
"", 
"struct <a class=\"id\" href=\"#console\">console</a> <a class=\"id\" href=\"#xenboot_console\">xenboot_console</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a><span class=\"ts\"/><span class=\"ts\"/>= \"xenboot\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#write\">write</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#xenboot_write_console\">xenboot_write_console</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#flags\">flags</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#CON_PRINTBUFFER\">CON_PRINTBUFFER</a> | <a class=\"id\" href=\"#CON_BOOT\">CON_BOOT</a> | <a class=\"id\" href=\"#CON_ANYTIME\">CON_ANYTIME</a>,", 
"};", 
"#<a class=\"id\" href=\"#endif\">endif</a><span class=\"ts\"/><span class=\"comment\">/* CONFIG_EARLY_PRINTK */</span>", 
"", 
"void <a class=\"id\" href=\"#xen_raw_console_write\">xen_raw_console_write</a>(const char *<a class=\"id\" href=\"#str\">str</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_console_write\">raw_console_write</a>(<a class=\"id\" href=\"#str\">str</a>, <a class=\"id\" href=\"#strlen\">strlen</a>(<a class=\"id\" href=\"#str\">str</a>));", 
"}", 
"", 
"void <a class=\"id\" href=\"#xen_raw_printk\">xen_raw_printk</a>(const char *<a class=\"id\" href=\"#fmt\">fmt</a>, ...)", 
"{", 
"<span class=\"ts\"/>static char <a class=\"id\" href=\"#buf\">buf</a>[512];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#va_list\">va_list</a> <a class=\"id\" href=\"#ap\">ap</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#va_start\">va_start</a>(<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#fmt\">fmt</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vsnprintf\">vsnprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, sizeof(<a class=\"id\" href=\"#buf\">buf</a>), <a class=\"id\" href=\"#fmt\">fmt</a>, <a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#va_end\">va_end</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#xen_raw_console_write\">xen_raw_console_write</a>(<a class=\"id\" href=\"#buf\">buf</a>);", 
"}", 
];
xr_frag_insert('l/97/9d0ada9c4d267bfd3fd5c0dcdcb239bddfeb6c.xr', __xr_tmp);
