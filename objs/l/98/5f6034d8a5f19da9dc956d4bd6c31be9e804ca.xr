var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * This file contains work-arounds for x86 and x86_64 platform bugs.</span>", 
"<span class=\"comment\"> */</span>", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#pci\">pci</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#hpet\">hpet</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#if <a class=\"id\" href=\"#defined\">defined</a>(<a class=\"id\" href=\"#CONFIG_X86_IO_APIC\">CONFIG_X86_IO_APIC</a>) && <a class=\"id\" href=\"#defined\">defined</a>(<a class=\"id\" href=\"#CONFIG_SMP\">CONFIG_SMP</a>) && <a class=\"id\" href=\"#defined\">defined</a>(<a class=\"id\" href=\"#CONFIG_PCI\">CONFIG_PCI</a>)", 
"", 
"static void <a class=\"id\" href=\"#__devinit\">__devinit</a> <a class=\"id\" href=\"#quirk_intel_irqbalance\">quirk_intel_irqbalance</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#config\">config</a>, <a class=\"id\" href=\"#rev\">rev</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#word\">word</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* BIOS may enable hardware IRQ balancing for</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * E7520/E7320/E7525(revision ID 0x9 and below)</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * based platforms.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Disable SW irqbalance/affinity on those platforms.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_byte\">pci_read_config_byte</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#PCI_CLASS_REVISION\">PCI_CLASS_REVISION</a>, &amp;<a class=\"id\" href=\"#rev\">rev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rev\">rev</a> &gt; 0x9)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* enable access to config space*/</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_byte\">pci_read_config_byte</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0xf4, &amp;<a class=\"id\" href=\"#config\">config</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_write_config_byte\">pci_write_config_byte</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0xf4, <a class=\"id\" href=\"#config\">config</a>|0x2);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * read xTPR register.  We may not have a pci_dev for device 8</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * because it might be hidden until the above write.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_bus_read_config_word\">pci_bus_read_config_word</a>(<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#bus\">bus</a>, <a class=\"id\" href=\"#PCI_DEVFN\">PCI_DEVFN</a>(8, 0), 0x4c, &amp;<a class=\"id\" href=\"#word\">word</a>);", 
"", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#word\">word</a> &amp; (1 << 13))) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_info\">dev_info</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"Intel E7520/7320/7525 detected; \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"disabling irq balancing and affinity\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#noirqdebug_setup\">noirqdebug_setup</a>(\"\");", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_PROC_FS\">CONFIG_PROC_FS</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#no_irq_affinity\">no_irq_affinity</a> = 1;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* put back the original value for config space*/</span>", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#config\">config</a> &amp; 0x2))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pci_write_config_byte\">pci_write_config_byte</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0xf4, <a class=\"id\" href=\"#config\">config</a>);", 
"}", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_FINAL\">DECLARE_PCI_FIXUP_FINAL</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_E7320_MCH\">PCI_DEVICE_ID_INTEL_E7320_MCH</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#quirk_intel_irqbalance\">quirk_intel_irqbalance</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_FINAL\">DECLARE_PCI_FIXUP_FINAL</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_E7525_MCH\">PCI_DEVICE_ID_INTEL_E7525_MCH</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#quirk_intel_irqbalance\">quirk_intel_irqbalance</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_FINAL\">DECLARE_PCI_FIXUP_FINAL</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_E7520_MCH\">PCI_DEVICE_ID_INTEL_E7520_MCH</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#quirk_intel_irqbalance\">quirk_intel_irqbalance</a>);", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"#if <a class=\"id\" href=\"#defined\">defined</a>(<a class=\"id\" href=\"#CONFIG_HPET_TIMER\">CONFIG_HPET_TIMER</a>)", 
"unsigned long <a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a>;", 
"", 
"static enum {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#NONE_FORCE_HPET_RESUME\">NONE_FORCE_HPET_RESUME</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#OLD_ICH_FORCE_HPET_RESUME\">OLD_ICH_FORCE_HPET_RESUME</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ICH_FORCE_HPET_RESUME\">ICH_FORCE_HPET_RESUME</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#VT8237_FORCE_HPET_RESUME\">VT8237_FORCE_HPET_RESUME</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#NVIDIA_FORCE_HPET_RESUME\">NVIDIA_FORCE_HPET_RESUME</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ATI_FORCE_HPET_RESUME\">ATI_FORCE_HPET_RESUME</a>,", 
"} <a class=\"id\" href=\"#force_hpet_resume_type\">force_hpet_resume_type</a>;", 
"", 
"static void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#rcba_base\">rcba_base</a>;", 
"", 
"static void <a class=\"id\" href=\"#ich_force_hpet_resume\">ich_force_hpet_resume</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#val\">val</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#BUG_ON\">BUG_ON</a>(<a class=\"id\" href=\"#rcba_base\">rcba_base</a> == <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* read the Function Disable register, dword mode only */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#rcba_base\">rcba_base</a> + 0x3404);", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#val\">val</a> &amp; 0x80)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* HPET disabled in HPTC. Trying to enable */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#val\">val</a> | 0x80, <a class=\"id\" href=\"#rcba_base\">rcba_base</a> + 0x3404);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#rcba_base\">rcba_base</a> + 0x3404);", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#val\">val</a> &amp; 0x80))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BUG\">BUG</a>();", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a> \"Force enabled HPET at resume\\n\");", 
"", 
"<span class=\"ts\"/>return;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#ich_force_enable_hpet\">ich_force_enable_hpet</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#val\">val</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#uninitialized_var\">uninitialized_var</a>(<a class=\"id\" href=\"#rcba\">rcba</a>);", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a> = 0;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#hpet_address\">hpet_address</a> || <a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_dword\">pci_read_config_dword</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0xF0, &amp;<a class=\"id\" href=\"#rcba\">rcba</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rcba\">rcba</a> &= 0xFFFFC000;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rcba\">rcba</a> == 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a>, &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"RCBA disabled; \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"cannot force enable HPET\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* use bits 31:14, 16 kB aligned */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rcba_base\">rcba_base</a> = <a class=\"id\" href=\"#ioremap_nocache\">ioremap_nocache</a>(<a class=\"id\" href=\"#rcba\">rcba</a>, 0x4000);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rcba_base\">rcba_base</a> == <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a>, &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"ioremap failed; \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"cannot force enable HPET\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* read the Function Disable register, dword mode only */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#rcba_base\">rcba_base</a> + 0x3404);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#val\">val</a> &amp; 0x80) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* HPET is enabled in HPTC. Just not reported by BIOS */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a> = <a class=\"id\" href=\"#val\">val</a> &amp; 0x3;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a> = 0xFED00000 | (<a class=\"id\" href=\"#val\">val</a> << 12);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a>, &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"Force enabled HPET at \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"0x%lx\\n\", <a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#iounmap\">iounmap</a>(<a class=\"id\" href=\"#rcba_base\">rcba_base</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* HPET disabled in HPTC. Trying to enable */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#val\">val</a> | 0x80, <a class=\"id\" href=\"#rcba_base\">rcba_base</a> + 0x3404);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#rcba_base\">rcba_base</a> + 0x3404);", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#val\">val</a> &amp; 0x80)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = 1;", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a> = <a class=\"id\" href=\"#val\">val</a> &amp; 0x3;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a> = 0xFED00000 | (<a class=\"id\" href=\"#val\">val</a> << 12);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#iounmap\">iounmap</a>(<a class=\"id\" href=\"#rcba_base\">rcba_base</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a>, &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"Failed to force enable HPET\\n\");", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#force_hpet_resume_type\">force_hpet_resume_type</a> = <a class=\"id\" href=\"#ICH_FORCE_HPET_RESUME\">ICH_FORCE_HPET_RESUME</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a>, &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"Force enabled HPET at \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"0x%lx\\n\", <a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ESB2_0\">PCI_DEVICE_ID_INTEL_ESB2_0</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#ich_force_enable_hpet\">ich_force_enable_hpet</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH6_0\">PCI_DEVICE_ID_INTEL_ICH6_0</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#ich_force_enable_hpet\">ich_force_enable_hpet</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH6_1\">PCI_DEVICE_ID_INTEL_ICH6_1</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#ich_force_enable_hpet\">ich_force_enable_hpet</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH7_0\">PCI_DEVICE_ID_INTEL_ICH7_0</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#ich_force_enable_hpet\">ich_force_enable_hpet</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH7_1\">PCI_DEVICE_ID_INTEL_ICH7_1</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#ich_force_enable_hpet\">ich_force_enable_hpet</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH7_31\">PCI_DEVICE_ID_INTEL_ICH7_31</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#ich_force_enable_hpet\">ich_force_enable_hpet</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH8_1\">PCI_DEVICE_ID_INTEL_ICH8_1</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#ich_force_enable_hpet\">ich_force_enable_hpet</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH8_4\">PCI_DEVICE_ID_INTEL_ICH8_4</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#ich_force_enable_hpet\">ich_force_enable_hpet</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH9_7\">PCI_DEVICE_ID_INTEL_ICH9_7</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#ich_force_enable_hpet\">ich_force_enable_hpet</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, 0x3a16,<span class=\"ts\"/><span class=\"comment\">/* ICH10 */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#ich_force_enable_hpet\">ich_force_enable_hpet</a>);", 
"", 
"static struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#cached_dev\">cached_dev</a>;", 
"", 
"static void <a class=\"id\" href=\"#hpet_print_force_info\">hpet_print_force_info</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"HPET not enabled in BIOS. \"", 
"<span class=\"ts\"/>       \"You might try hpet=force boot option\\n\");", 
"}", 
"", 
"static void <a class=\"id\" href=\"#old_ich_force_hpet_resume\">old_ich_force_hpet_resume</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#val\">val</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#uninitialized_var\">uninitialized_var</a>(<a class=\"id\" href=\"#gen_cntl\">gen_cntl</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a> || !<a class=\"id\" href=\"#cached_dev\">cached_dev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_dword\">pci_read_config_dword</a>(<a class=\"id\" href=\"#cached_dev\">cached_dev</a>, 0xD0, &amp;<a class=\"id\" href=\"#gen_cntl\">gen_cntl</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#gen_cntl\">gen_cntl</a> &= (~(0x7 << 15));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#gen_cntl\">gen_cntl</a> |= (0x4 << 15);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_write_config_dword\">pci_write_config_dword</a>(<a class=\"id\" href=\"#cached_dev\">cached_dev</a>, 0xD0, <a class=\"id\" href=\"#gen_cntl\">gen_cntl</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_dword\">pci_read_config_dword</a>(<a class=\"id\" href=\"#cached_dev\">cached_dev</a>, 0xD0, &amp;<a class=\"id\" href=\"#gen_cntl\">gen_cntl</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a> = <a class=\"id\" href=\"#gen_cntl\">gen_cntl</a> >> 15;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a> &= 0x7;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#val\">val</a> == 0x4)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a> \"Force enabled HPET at resume\\n\");", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BUG\">BUG</a>();", 
"}", 
"", 
"static void <a class=\"id\" href=\"#old_ich_force_enable_hpet\">old_ich_force_enable_hpet</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#val\">val</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#uninitialized_var\">uninitialized_var</a>(<a class=\"id\" href=\"#gen_cntl\">gen_cntl</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#hpet_address\">hpet_address</a> || <a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_dword\">pci_read_config_dword</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0xD0, &amp;<a class=\"id\" href=\"#gen_cntl\">gen_cntl</a>);", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Bit 17 is HPET enable bit.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Bit 16:15 control the HPET base address.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a> = <a class=\"id\" href=\"#gen_cntl\">gen_cntl</a> >> 15;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a> &= 0x7;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#val\">val</a> &amp; 0x4) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a> &= 0x3;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a> = 0xFED00000 | (<a class=\"id\" href=\"#val\">val</a> << 12);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a>, &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"HPET at 0x%lx\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * HPET is disabled. Trying enabling at FED00000 and check</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * whether it sticks</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#gen_cntl\">gen_cntl</a> &= (~(0x7 << 15));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#gen_cntl\">gen_cntl</a> |= (0x4 << 15);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_write_config_dword\">pci_write_config_dword</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0xD0, <a class=\"id\" href=\"#gen_cntl\">gen_cntl</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_dword\">pci_read_config_dword</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0xD0, &amp;<a class=\"id\" href=\"#gen_cntl\">gen_cntl</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a> = <a class=\"id\" href=\"#gen_cntl\">gen_cntl</a> >> 15;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a> &= 0x7;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#val\">val</a> &amp; 0x4) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* HPET is enabled in HPTC. Just not reported by BIOS */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a> &= 0x3;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a> = 0xFED00000 | (<a class=\"id\" href=\"#val\">val</a> << 12);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a>, &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"Force enabled HPET at \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"0x%lx\\n\", <a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cached_dev\">cached_dev</a> = <a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#force_hpet_resume_type\">force_hpet_resume_type</a> = <a class=\"id\" href=\"#OLD_ICH_FORCE_HPET_RESUME\">OLD_ICH_FORCE_HPET_RESUME</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a>, &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"Failed to force enable HPET\\n\");", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Undocumented chipset features. Make sure that the user enforced</span>", 
"<span class=\"comment\"> * this.</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#old_ich_force_enable_hpet_user\">old_ich_force_enable_hpet_user</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#hpet_force_user\">hpet_force_user</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#old_ich_force_enable_hpet\">old_ich_force_enable_hpet</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"}", 
"", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ESB_1\">PCI_DEVICE_ID_INTEL_ESB_1</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#old_ich_force_enable_hpet_user\">old_ich_force_enable_hpet_user</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82801CA_0\">PCI_DEVICE_ID_INTEL_82801CA_0</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#old_ich_force_enable_hpet_user\">old_ich_force_enable_hpet_user</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82801CA_12\">PCI_DEVICE_ID_INTEL_82801CA_12</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#old_ich_force_enable_hpet_user\">old_ich_force_enable_hpet_user</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82801DB_0\">PCI_DEVICE_ID_INTEL_82801DB_0</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#old_ich_force_enable_hpet_user\">old_ich_force_enable_hpet_user</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82801DB_12\">PCI_DEVICE_ID_INTEL_82801DB_12</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#old_ich_force_enable_hpet_user\">old_ich_force_enable_hpet_user</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82801EB_0\">PCI_DEVICE_ID_INTEL_82801EB_0</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#old_ich_force_enable_hpet\">old_ich_force_enable_hpet</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82801EB_12\">PCI_DEVICE_ID_INTEL_82801EB_12</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#old_ich_force_enable_hpet\">old_ich_force_enable_hpet</a>);", 
"", 
"", 
"static void <a class=\"id\" href=\"#vt8237_force_hpet_resume\">vt8237_force_hpet_resume</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#val\">val</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a> || !<a class=\"id\" href=\"#cached_dev\">cached_dev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a> = 0xfed00000 | 0x80;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_write_config_dword\">pci_write_config_dword</a>(<a class=\"id\" href=\"#cached_dev\">cached_dev</a>, 0x68, <a class=\"id\" href=\"#val\">val</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_dword\">pci_read_config_dword</a>(<a class=\"id\" href=\"#cached_dev\">cached_dev</a>, 0x68, &amp;<a class=\"id\" href=\"#val\">val</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#val\">val</a> &amp; 0x80)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a> \"Force enabled HPET at resume\\n\");", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BUG\">BUG</a>();", 
"}", 
"", 
"static void <a class=\"id\" href=\"#vt8237_force_enable_hpet\">vt8237_force_enable_hpet</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#uninitialized_var\">uninitialized_var</a>(<a class=\"id\" href=\"#val\">val</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#hpet_address\">hpet_address</a> || <a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#hpet_force_user\">hpet_force_user</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hpet_print_force_info\">hpet_print_force_info</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_dword\">pci_read_config_dword</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0x68, &amp;<a class=\"id\" href=\"#val\">val</a>);", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Bit 7 is HPET enable bit.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Bit 31:10 is HPET base address (contrary to what datasheet claims)</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#val\">val</a> &amp; 0x80) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a> = (<a class=\"id\" href=\"#val\">val</a> &amp; ~0x3ff);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a>, &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"HPET at 0x%lx\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * HPET is disabled. Trying enabling at FED00000 and check</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * whether it sticks</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a> = 0xfed00000 | 0x80;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_write_config_dword\">pci_write_config_dword</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0x68, <a class=\"id\" href=\"#val\">val</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_dword\">pci_read_config_dword</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0x68, &amp;<a class=\"id\" href=\"#val\">val</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#val\">val</a> &amp; 0x80) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a> = (<a class=\"id\" href=\"#val\">val</a> &amp; ~0x3ff);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a>, &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"Force enabled HPET at \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"0x%lx\\n\", <a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cached_dev\">cached_dev</a> = <a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#force_hpet_resume_type\">force_hpet_resume_type</a> = <a class=\"id\" href=\"#VT8237_FORCE_HPET_RESUME\">VT8237_FORCE_HPET_RESUME</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a>, &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"Failed to force enable HPET\\n\");", 
"}", 
"", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_VIA\">PCI_VENDOR_ID_VIA</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_VIA_8235\">PCI_DEVICE_ID_VIA_8235</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#vt8237_force_enable_hpet\">vt8237_force_enable_hpet</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_VIA\">PCI_VENDOR_ID_VIA</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_VIA_8237\">PCI_DEVICE_ID_VIA_8237</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#vt8237_force_enable_hpet\">vt8237_force_enable_hpet</a>);", 
"", 
"static void <a class=\"id\" href=\"#ati_force_hpet_resume\">ati_force_hpet_resume</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_write_config_dword\">pci_write_config_dword</a>(<a class=\"id\" href=\"#cached_dev\">cached_dev</a>, 0x14, 0xfed00000);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a> \"Force enabled HPET at resume\\n\");", 
"}", 
"", 
"static <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#ati_ixp4x0_rev\">ati_ixp4x0_rev</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#d\">d</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a>  <a class=\"id\" href=\"#b\">b</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_byte\">pci_read_config_byte</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0xac, &amp;<a class=\"id\" href=\"#b\">b</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#b\">b</a> &= ~(1<<5);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_write_config_byte\">pci_write_config_byte</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0xac, <a class=\"id\" href=\"#b\">b</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_dword\">pci_read_config_dword</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0x70, &amp;<a class=\"id\" href=\"#d\">d</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#d\">d</a> |= 1<<8;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_write_config_dword\">pci_write_config_dword</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0x70, <a class=\"id\" href=\"#d\">d</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_dword\">pci_read_config_dword</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0x8, &amp;<a class=\"id\" href=\"#d\">d</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#d\">d</a> &= 0xff;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a>, &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"SB4X0 revision 0x%x\\n\", <a class=\"id\" href=\"#d\">d</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#d\">d</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#ati_force_enable_hpet\">ati_force_enable_hpet</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#d\">d</a>, <a class=\"id\" href=\"#val\">val</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a>  <a class=\"id\" href=\"#b\">b</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#hpet_address\">hpet_address</a> || <a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#hpet_force_user\">hpet_force_user</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hpet_print_force_info\">hpet_print_force_info</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#d\">d</a> = <a class=\"id\" href=\"#ati_ixp4x0_rev\">ati_ixp4x0_rev</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#d\">d</a>  &lt; 0x82)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* base address */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_write_config_dword\">pci_write_config_dword</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0x14, 0xfed00000);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_dword\">pci_read_config_dword</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0x14, &amp;<a class=\"id\" href=\"#val\">val</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* enable interrupt */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(0x72, 0xcd6); <a class=\"id\" href=\"#b\">b</a> = <a class=\"id\" href=\"#inb\">inb</a>(0xcd7);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#b\">b</a> |= 0x1;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(0x72, 0xcd6); <a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#b\">b</a>, 0xcd7);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(0x72, 0xcd6); <a class=\"id\" href=\"#b\">b</a> = <a class=\"id\" href=\"#inb\">inb</a>(0xcd7);", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#b\">b</a> &amp; 0x1))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_dword\">pci_read_config_dword</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0x64, &amp;<a class=\"id\" href=\"#d\">d</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#d\">d</a> |= (1<<10);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_write_config_dword\">pci_write_config_dword</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0x64, <a class=\"id\" href=\"#d\">d</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_dword\">pci_read_config_dword</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0x64, &amp;<a class=\"id\" href=\"#d\">d</a>);", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#d\">d</a> &amp; (1<<10)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a> = <a class=\"id\" href=\"#val\">val</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#force_hpet_resume_type\">force_hpet_resume_type</a> = <a class=\"id\" href=\"#ATI_FORCE_HPET_RESUME\">ATI_FORCE_HPET_RESUME</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a>, &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"Force enabled HPET at 0x%lx\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cached_dev\">cached_dev</a> = <a class=\"id\" href=\"#dev\">dev</a>;", 
"}", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_ATI\">PCI_VENDOR_ID_ATI</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_ATI_IXP400_SMBUS\">PCI_DEVICE_ID_ATI_IXP400_SMBUS</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#ati_force_enable_hpet\">ati_force_enable_hpet</a>);", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Undocumented chipset feature taken from LinuxBIOS.</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#nvidia_force_hpet_resume\">nvidia_force_hpet_resume</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_write_config_dword\">pci_write_config_dword</a>(<a class=\"id\" href=\"#cached_dev\">cached_dev</a>, 0x44, 0xfed00001);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a> \"Force enabled HPET at resume\\n\");", 
"}", 
"", 
"static void <a class=\"id\" href=\"#nvidia_force_enable_hpet\">nvidia_force_enable_hpet</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#uninitialized_var\">uninitialized_var</a>(<a class=\"id\" href=\"#val\">val</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#hpet_address\">hpet_address</a> || <a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#hpet_force_user\">hpet_force_user</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hpet_print_force_info\">hpet_print_force_info</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_write_config_dword\">pci_write_config_dword</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0x44, 0xfed00001);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_dword\">pci_read_config_dword</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0x44, &amp;<a class=\"id\" href=\"#val\">val</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a> = <a class=\"id\" href=\"#val\">val</a> &amp; 0xfffffffe;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#force_hpet_resume_type\">force_hpet_resume_type</a> = <a class=\"id\" href=\"#NVIDIA_FORCE_HPET_RESUME\">NVIDIA_FORCE_HPET_RESUME</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a>, &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"Force enabled HPET at 0x%lx\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#force_hpet_address\">force_hpet_address</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cached_dev\">cached_dev</a> = <a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/>return;", 
"}", 
"", 
"<span class=\"comment\">/* ISA Bridges */</span>", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_NVIDIA\">PCI_VENDOR_ID_NVIDIA</a>, 0x0050,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#nvidia_force_enable_hpet\">nvidia_force_enable_hpet</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_NVIDIA\">PCI_VENDOR_ID_NVIDIA</a>, 0x0051,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#nvidia_force_enable_hpet\">nvidia_force_enable_hpet</a>);", 
"", 
"<span class=\"comment\">/* LPC bridges */</span>", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_NVIDIA\">PCI_VENDOR_ID_NVIDIA</a>, 0x0260,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#nvidia_force_enable_hpet\">nvidia_force_enable_hpet</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_NVIDIA\">PCI_VENDOR_ID_NVIDIA</a>, 0x0360,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#nvidia_force_enable_hpet\">nvidia_force_enable_hpet</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_NVIDIA\">PCI_VENDOR_ID_NVIDIA</a>, 0x0361,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#nvidia_force_enable_hpet\">nvidia_force_enable_hpet</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_NVIDIA\">PCI_VENDOR_ID_NVIDIA</a>, 0x0362,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#nvidia_force_enable_hpet\">nvidia_force_enable_hpet</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_NVIDIA\">PCI_VENDOR_ID_NVIDIA</a>, 0x0363,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#nvidia_force_enable_hpet\">nvidia_force_enable_hpet</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_NVIDIA\">PCI_VENDOR_ID_NVIDIA</a>, 0x0364,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#nvidia_force_enable_hpet\">nvidia_force_enable_hpet</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_NVIDIA\">PCI_VENDOR_ID_NVIDIA</a>, 0x0365,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#nvidia_force_enable_hpet\">nvidia_force_enable_hpet</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_NVIDIA\">PCI_VENDOR_ID_NVIDIA</a>, 0x0366,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#nvidia_force_enable_hpet\">nvidia_force_enable_hpet</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_NVIDIA\">PCI_VENDOR_ID_NVIDIA</a>, 0x0367,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#nvidia_force_enable_hpet\">nvidia_force_enable_hpet</a>);", 
"", 
"void <a class=\"id\" href=\"#force_hpet_resume\">force_hpet_resume</a>(void)", 
"{", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#force_hpet_resume_type\">force_hpet_resume_type</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ICH_FORCE_HPET_RESUME\">ICH_FORCE_HPET_RESUME</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ich_force_hpet_resume\">ich_force_hpet_resume</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#OLD_ICH_FORCE_HPET_RESUME\">OLD_ICH_FORCE_HPET_RESUME</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#old_ich_force_hpet_resume\">old_ich_force_hpet_resume</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#VT8237_FORCE_HPET_RESUME\">VT8237_FORCE_HPET_RESUME</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vt8237_force_hpet_resume\">vt8237_force_hpet_resume</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#NVIDIA_FORCE_HPET_RESUME\">NVIDIA_FORCE_HPET_RESUME</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#nvidia_force_hpet_resume\">nvidia_force_hpet_resume</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ATI_FORCE_HPET_RESUME\">ATI_FORCE_HPET_RESUME</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ati_force_hpet_resume\">ati_force_hpet_resume</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * HPET MSI on some boards (ATI SB700/SB800) has side effect on</span>", 
"<span class=\"comment\"> * floppy DMA. Disable HPET MSI on such platforms.</span>", 
"<span class=\"comment\"> * See erratum #27 (Misinterpreted MSI Requests May Result in</span>", 
"<span class=\"comment\"> * Corrupted LPC DMA Data) in AMD Publication #46837,</span>", 
"<span class=\"comment\"> * \"SB700 Family Product Errata\", Rev. 1.0, March 2010.</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#force_disable_hpet_msi\">force_disable_hpet_msi</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#unused\">unused</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#hpet_msi_disable\">hpet_msi_disable</a> = 1;", 
"}", 
"", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_HEADER\">DECLARE_PCI_FIXUP_HEADER</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_ATI\">PCI_VENDOR_ID_ATI</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_ATI_SBX00_SMBUS\">PCI_DEVICE_ID_ATI_SBX00_SMBUS</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#force_disable_hpet_msi\">force_disable_hpet_msi</a>);", 
"", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"#if <a class=\"id\" href=\"#defined\">defined</a>(<a class=\"id\" href=\"#CONFIG_PCI\">CONFIG_PCI</a>) && <a class=\"id\" href=\"#defined\">defined</a>(<a class=\"id\" href=\"#CONFIG_NUMA\">CONFIG_NUMA</a>)", 
"<span class=\"comment\">/* Set correct numa_node information for AMD NB functions */</span>", 
"static void <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#quirk_amd_nb_node\">quirk_amd_nb_node</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#nb_ht\">nb_ht</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#devfn\">devfn</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#node\">node</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#val\">val</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#devfn\">devfn</a> = <a class=\"id\" href=\"#PCI_DEVFN\">PCI_DEVFN</a>(<a class=\"id\" href=\"#PCI_SLOT\">PCI_SLOT</a>(<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#devfn\">devfn</a>), 0);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#nb_ht\">nb_ht</a> = <a class=\"id\" href=\"#pci_get_slot\">pci_get_slot</a>(<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#bus\">bus</a>, <a class=\"id\" href=\"#devfn\">devfn</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#nb_ht\">nb_ht</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_dword\">pci_read_config_dword</a>(<a class=\"id\" href=\"#nb_ht\">nb_ht</a>, 0x60, &amp;<a class=\"id\" href=\"#val\">val</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#node\">node</a> = <a class=\"id\" href=\"#val\">val</a> &amp; 7;", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Some hardware may return an invalid node ID,</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * so check it first:</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#node_online\">node_online</a>(<a class=\"id\" href=\"#node\">node</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_dev_node\">set_dev_node</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#node\">node</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_dev_put\">pci_dev_put</a>(<a class=\"id\" href=\"#nb_ht\">nb_ht</a>);", 
"}", 
"", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_FINAL\">DECLARE_PCI_FIXUP_FINAL</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_AMD\">PCI_VENDOR_ID_AMD</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_AMD_K8_NB\">PCI_DEVICE_ID_AMD_K8_NB</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#quirk_amd_nb_node\">quirk_amd_nb_node</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_FINAL\">DECLARE_PCI_FIXUP_FINAL</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_AMD\">PCI_VENDOR_ID_AMD</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_AMD_K8_NB_ADDRMAP\">PCI_DEVICE_ID_AMD_K8_NB_ADDRMAP</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#quirk_amd_nb_node\">quirk_amd_nb_node</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_FINAL\">DECLARE_PCI_FIXUP_FINAL</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_AMD\">PCI_VENDOR_ID_AMD</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_AMD_K8_NB_MEMCTL\">PCI_DEVICE_ID_AMD_K8_NB_MEMCTL</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#quirk_amd_nb_node\">quirk_amd_nb_node</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_FINAL\">DECLARE_PCI_FIXUP_FINAL</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_AMD\">PCI_VENDOR_ID_AMD</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_AMD_K8_NB_MISC\">PCI_DEVICE_ID_AMD_K8_NB_MISC</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#quirk_amd_nb_node\">quirk_amd_nb_node</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_FINAL\">DECLARE_PCI_FIXUP_FINAL</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_AMD\">PCI_VENDOR_ID_AMD</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_AMD_10H_NB_HT\">PCI_DEVICE_ID_AMD_10H_NB_HT</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#quirk_amd_nb_node\">quirk_amd_nb_node</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_FINAL\">DECLARE_PCI_FIXUP_FINAL</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_AMD\">PCI_VENDOR_ID_AMD</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_AMD_10H_NB_MAP\">PCI_DEVICE_ID_AMD_10H_NB_MAP</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#quirk_amd_nb_node\">quirk_amd_nb_node</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_FINAL\">DECLARE_PCI_FIXUP_FINAL</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_AMD\">PCI_VENDOR_ID_AMD</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_AMD_10H_NB_DRAM\">PCI_DEVICE_ID_AMD_10H_NB_DRAM</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#quirk_amd_nb_node\">quirk_amd_nb_node</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_FINAL\">DECLARE_PCI_FIXUP_FINAL</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_AMD\">PCI_VENDOR_ID_AMD</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_AMD_10H_NB_MISC\">PCI_DEVICE_ID_AMD_10H_NB_MISC</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#quirk_amd_nb_node\">quirk_amd_nb_node</a>);", 
"<a class=\"id\" href=\"#DECLARE_PCI_FIXUP_FINAL\">DECLARE_PCI_FIXUP_FINAL</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_AMD\">PCI_VENDOR_ID_AMD</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_AMD_10H_NB_LINK\">PCI_DEVICE_ID_AMD_10H_NB_LINK</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#quirk_amd_nb_node\">quirk_amd_nb_node</a>);", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
];
xr_frag_insert('l/98/5f6034d8a5f19da9dc956d4bd6c31be9e804ca.xr', __xr_tmp);
