var __xr_tmp = [
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#NCCS\">NCCS</a>; <a class=\"id\" href=\"#i\">i</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#i\">i</a>] = <a class=\"id\" href=\"#locked\">locked</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#i\">i</a>] ?", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#old\">old</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#i\">i</a>] : <a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"<span class=\"ts\"/><span class=\"comment\">/* FIXME: What should we do for i/ospeed */</span>", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Routine which returns the baud rate of the tty</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Note that the baud_table needs to be kept in sync with the</span>", 
"<span class=\"comment\"> * include/asm/termbits.h file.</span>", 
"<span class=\"comment\"> */</span>", 
"static const <a class=\"id\" href=\"#speed_t\">speed_t</a> <a class=\"id\" href=\"#baud_table\">baud_table</a>[] = {", 
"<span class=\"ts\"/>0, 50, 75, 110, 134, 150, 200, 300, 600, 1200, 1800, 2400, 4800,", 
"<span class=\"ts\"/>9600, 19200, 38400, 57600, 115200, 230400, 460800,", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#__sparc__\">__sparc__</a>", 
"<span class=\"ts\"/>76800, 153600, 307200, 614400, 921600", 
"#else", 
"<span class=\"ts\"/>500000, 576000, 921600, 1000000, 1152000, 1500000, 2000000,", 
"<span class=\"ts\"/>2500000, 3000000, 3500000, 4000000", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"};", 
"", 
"#<a class=\"id\" href=\"#ifndef\">ifndef</a> <a class=\"id\" href=\"#__sparc__\">__sparc__</a>", 
"static const <a class=\"id\" href=\"#tcflag_t\">tcflag_t</a> <a class=\"id\" href=\"#baud_bits\">baud_bits</a>[] = {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#B0\">B0</a>, <a class=\"id\" href=\"#B50\">B50</a>, <a class=\"id\" href=\"#B75\">B75</a>, <a class=\"id\" href=\"#B110\">B110</a>, <a class=\"id\" href=\"#B134\">B134</a>, <a class=\"id\" href=\"#B150\">B150</a>, <a class=\"id\" href=\"#B200\">B200</a>, <a class=\"id\" href=\"#B300\">B300</a>, <a class=\"id\" href=\"#B600\">B600</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#B1200\">B1200</a>, <a class=\"id\" href=\"#B1800\">B1800</a>, <a class=\"id\" href=\"#B2400\">B2400</a>, <a class=\"id\" href=\"#B4800\">B4800</a>, <a class=\"id\" href=\"#B9600\">B9600</a>, <a class=\"id\" href=\"#B19200\">B19200</a>, <a class=\"id\" href=\"#B38400\">B38400</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#B57600\">B57600</a>, <a class=\"id\" href=\"#B115200\">B115200</a>, <a class=\"id\" href=\"#B230400\">B230400</a>, <a class=\"id\" href=\"#B460800\">B460800</a>, <a class=\"id\" href=\"#B500000\">B500000</a>, <a class=\"id\" href=\"#B576000\">B576000</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#B921600\">B921600</a>, <a class=\"id\" href=\"#B1000000\">B1000000</a>, <a class=\"id\" href=\"#B1152000\">B1152000</a>, <a class=\"id\" href=\"#B1500000\">B1500000</a>, <a class=\"id\" href=\"#B2000000\">B2000000</a>, <a class=\"id\" href=\"#B2500000\">B2500000</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#B3000000\">B3000000</a>, <a class=\"id\" href=\"#B3500000\">B3500000</a>, <a class=\"id\" href=\"#B4000000\">B4000000</a>", 
"};", 
"#else", 
"static const <a class=\"id\" href=\"#tcflag_t\">tcflag_t</a> <a class=\"id\" href=\"#baud_bits\">baud_bits</a>[] = {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#B0\">B0</a>, <a class=\"id\" href=\"#B50\">B50</a>, <a class=\"id\" href=\"#B75\">B75</a>, <a class=\"id\" href=\"#B110\">B110</a>, <a class=\"id\" href=\"#B134\">B134</a>, <a class=\"id\" href=\"#B150\">B150</a>, <a class=\"id\" href=\"#B200\">B200</a>, <a class=\"id\" href=\"#B300\">B300</a>, <a class=\"id\" href=\"#B600\">B600</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#B1200\">B1200</a>, <a class=\"id\" href=\"#B1800\">B1800</a>, <a class=\"id\" href=\"#B2400\">B2400</a>, <a class=\"id\" href=\"#B4800\">B4800</a>, <a class=\"id\" href=\"#B9600\">B9600</a>, <a class=\"id\" href=\"#B19200\">B19200</a>, <a class=\"id\" href=\"#B38400\">B38400</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#B57600\">B57600</a>, <a class=\"id\" href=\"#B115200\">B115200</a>, <a class=\"id\" href=\"#B230400\">B230400</a>, <a class=\"id\" href=\"#B460800\">B460800</a>, <a class=\"id\" href=\"#B76800\">B76800</a>, <a class=\"id\" href=\"#B153600\">B153600</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#B307200\">B307200</a>, <a class=\"id\" href=\"#B614400\">B614400</a>, <a class=\"id\" href=\"#B921600\">B921600</a>", 
"};", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"static int <a class=\"id\" href=\"#n_baud_table\">n_baud_table</a> = <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#baud_table\">baud_table</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>tty_termios_baud_rate</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@termios: termios structure</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Convert termios baud rate data into a speed. This should be called</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>with the termios lock held if this termios is a terminal termios</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>structure. May change the termios data. Device drivers can call this</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>function but should use -&gt;c_[io]speed directly as they are updated.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Locking: none</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"<a class=\"id\" href=\"#speed_t\">speed_t</a> <a class=\"id\" href=\"#tty_termios_baud_rate\">tty_termios_baud_rate</a>(struct <a class=\"id\" href=\"#ktermios\">ktermios</a> *<a class=\"id\" href=\"#termios\">termios</a>)", 
"{", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#cbaud\">cbaud</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cbaud\">cbaud</a> = <a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cflag\">c_cflag</a> &amp; <a class=\"id\" href=\"#CBAUD\">CBAUD</a>;", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#BOTHER\">BOTHER</a>", 
"<span class=\"ts\"/><span class=\"comment\">/* Magic token for arbitary speed via c_ispeed/c_ospeed */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cbaud\">cbaud</a> == <a class=\"id\" href=\"#BOTHER\">BOTHER</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_ospeed\">c_ospeed</a>;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cbaud\">cbaud</a> &amp; <a class=\"id\" href=\"#CBAUDEX\">CBAUDEX</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cbaud\">cbaud</a> &= ~<a class=\"id\" href=\"#CBAUDEX\">CBAUDEX</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#cbaud\">cbaud</a> &lt; 1 || <a class=\"id\" href=\"#cbaud\">cbaud</a> + 15 &gt; <a class=\"id\" href=\"#n_baud_table\">n_baud_table</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cflag\">c_cflag</a> &= ~<a class=\"id\" href=\"#CBAUDEX\">CBAUDEX</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cbaud\">cbaud</a> += 15;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#baud_table\">baud_table</a>[<a class=\"id\" href=\"#cbaud\">cbaud</a>];", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#tty_termios_baud_rate\">tty_termios_baud_rate</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>tty_termios_input_baud_rate</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@termios: termios structure</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Convert termios baud rate data into a speed. This should be called</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>with the termios lock held if this termios is a terminal termios</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>structure. May change the termios data. Device drivers can call this</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>function but should use -&gt;c_[io]speed directly as they are updated.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Locking: none</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"<a class=\"id\" href=\"#speed_t\">speed_t</a> <a class=\"id\" href=\"#tty_termios_input_baud_rate\">tty_termios_input_baud_rate</a>(struct <a class=\"id\" href=\"#ktermios\">ktermios</a> *<a class=\"id\" href=\"#termios\">termios</a>)", 
"{", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#IBSHIFT\">IBSHIFT</a>", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#cbaud\">cbaud</a> = (<a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cflag\">c_cflag</a> >> <a class=\"id\" href=\"#IBSHIFT\">IBSHIFT</a>) &amp; <a class=\"id\" href=\"#CBAUD\">CBAUD</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cbaud\">cbaud</a> == <a class=\"id\" href=\"#B0\">B0</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#tty_termios_baud_rate\">tty_termios_baud_rate</a>(<a class=\"id\" href=\"#termios\">termios</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Magic token for arbitary speed via c_ispeed*/</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cbaud\">cbaud</a> == <a class=\"id\" href=\"#BOTHER\">BOTHER</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_ispeed\">c_ispeed</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cbaud\">cbaud</a> &amp; <a class=\"id\" href=\"#CBAUDEX\">CBAUDEX</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cbaud\">cbaud</a> &= ~<a class=\"id\" href=\"#CBAUDEX\">CBAUDEX</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#cbaud\">cbaud</a> &lt; 1 || <a class=\"id\" href=\"#cbaud\">cbaud</a> + 15 &gt; <a class=\"id\" href=\"#n_baud_table\">n_baud_table</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cflag\">c_cflag</a> &= ~(<a class=\"id\" href=\"#CBAUDEX\">CBAUDEX</a> << <a class=\"id\" href=\"#IBSHIFT\">IBSHIFT</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cbaud\">cbaud</a> += 15;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#baud_table\">baud_table</a>[<a class=\"id\" href=\"#cbaud\">cbaud</a>];", 
"#else", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#tty_termios_baud_rate\">tty_termios_baud_rate</a>(<a class=\"id\" href=\"#termios\">termios</a>);", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#tty_termios_input_baud_rate\">tty_termios_input_baud_rate</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>tty_termios_encode_baud_rate</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@termios: ktermios structure holding user requested state</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@ispeed: input speed</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@ospeed: output speed</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Encode the speeds set into the passed termios structure. This is</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>used as a library helper for drivers os that they can report back</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>the actual speed selected when it differs from the speed requested</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>For maximal back compatibility with legacy SYS5/POSIX *nix behaviour</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>we need to carefully set the bits when the user does not get the</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>desired speed. We allow small margins and preserve as much of possible</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>of the input intent to keep compatibility.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Locking: Caller should hold termios lock. This is already held</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>when calling this function from the driver termios handler.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>The ifdefs deal with platforms whose owners have yet to update them</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>and will all go away once this is done.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"void <a class=\"id\" href=\"#tty_termios_encode_baud_rate\">tty_termios_encode_baud_rate</a>(struct <a class=\"id\" href=\"#ktermios\">ktermios</a> *<a class=\"id\" href=\"#termios\">termios</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#speed_t\">speed_t</a> <a class=\"id\" href=\"#ibaud\">ibaud</a>, <a class=\"id\" href=\"#speed_t\">speed_t</a> <a class=\"id\" href=\"#obaud\">obaud</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a> = 0;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ifound\">ifound</a> = -1, <a class=\"id\" href=\"#ofound\">ofound</a> = -1;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#iclose\">iclose</a> = <a class=\"id\" href=\"#ibaud\">ibaud</a>/50, <a class=\"id\" href=\"#oclose\">oclose</a> = <a class=\"id\" href=\"#obaud\">obaud</a>/50;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ibinput\">ibinput</a> = 0;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#obaud\">obaud</a> == 0)<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* CD dropped <span class=\"ts\"/><span class=\"ts\"/>  */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ibaud\">ibaud</a> = 0;<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Clear ibaud to be sure */</span>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_ispeed\">c_ispeed</a> = <a class=\"id\" href=\"#ibaud\">ibaud</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_ospeed\">c_ospeed</a> = <a class=\"id\" href=\"#obaud\">obaud</a>;", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#BOTHER\">BOTHER</a>", 
"<span class=\"ts\"/><span class=\"comment\">/* If the user asked for a precise weird speed give a precise weird</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   answer. If they asked for a Bfoo speed they many have problems</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   digesting non-exact replies so fuzz a bit */</span>", 
"", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cflag\">c_cflag</a> &amp; <a class=\"id\" href=\"#CBAUD\">CBAUD</a>) == <a class=\"id\" href=\"#BOTHER\">BOTHER</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#oclose\">oclose</a> = 0;", 
"<span class=\"ts\"/>if (((<a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cflag\">c_cflag</a> >> <a class=\"id\" href=\"#IBSHIFT\">IBSHIFT</a>) &amp; <a class=\"id\" href=\"#CBAUD\">CBAUD</a>) == <a class=\"id\" href=\"#BOTHER\">BOTHER</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#iclose\">iclose</a> = 0;", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cflag\">c_cflag</a> >> <a class=\"id\" href=\"#IBSHIFT\">IBSHIFT</a>) &amp; <a class=\"id\" href=\"#CBAUD\">CBAUD</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ibinput\">ibinput</a> = 1;<span class=\"ts\"/><span class=\"comment\">/* An input speed was specified */</span>", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cflag\">c_cflag</a> &= ~<a class=\"id\" href=\"#CBAUD\">CBAUD</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *<span class=\"ts\"/>Our goal is to find a close match to the standard baud rate</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *<span class=\"ts\"/>returned. Walk the baud rate table and if we get a very close</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *<span class=\"ts\"/>match then report back the speed as a POSIX Bxxxx value by</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *<span class=\"ts\"/>preference</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"", 
"<span class=\"ts\"/>do {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#obaud\">obaud</a> - <a class=\"id\" href=\"#oclose\">oclose</a> <= <a class=\"id\" href=\"#baud_table\">baud_table</a>[<a class=\"id\" href=\"#i\">i</a>] &&", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#obaud\">obaud</a> + <a class=\"id\" href=\"#oclose\">oclose</a> >= <a class=\"id\" href=\"#baud_table\">baud_table</a>[<a class=\"id\" href=\"#i\">i</a>]) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cflag\">c_cflag</a> |= <a class=\"id\" href=\"#baud_bits\">baud_bits</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ofound\">ofound</a> = <a class=\"id\" href=\"#i\">i</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ibaud\">ibaud</a> - <a class=\"id\" href=\"#iclose\">iclose</a> <= <a class=\"id\" href=\"#baud_table\">baud_table</a>[<a class=\"id\" href=\"#i\">i</a>] &&", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#ibaud\">ibaud</a> + <a class=\"id\" href=\"#iclose\">iclose</a> >= <a class=\"id\" href=\"#baud_table\">baud_table</a>[<a class=\"id\" href=\"#i\">i</a>]) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* For the case input == output don't set IBAUD bits</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   if the user didn't do so */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ofound\">ofound</a> == <a class=\"id\" href=\"#i\">i</a> && !<a class=\"id\" href=\"#ibinput\">ibinput</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ifound\">ifound</a>  = <a class=\"id\" href=\"#i\">i</a>;", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#IBSHIFT\">IBSHIFT</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ifound\">ifound</a> = <a class=\"id\" href=\"#i\">i</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cflag\">c_cflag</a> |= (<a class=\"id\" href=\"#baud_bits\">baud_bits</a>[<a class=\"id\" href=\"#i\">i</a>] << <a class=\"id\" href=\"#IBSHIFT\">IBSHIFT</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>} while (++<a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#n_baud_table\">n_baud_table</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *<span class=\"ts\"/>If we found no match then use BOTHER if provided or warn</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *<span class=\"ts\"/>the user their platform maintainer needs to wake up if not.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#BOTHER\">BOTHER</a>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ofound\">ofound</a> == -1)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cflag\">c_cflag</a> |= <a class=\"id\" href=\"#BOTHER\">BOTHER</a>;", 
"<span class=\"ts\"/><span class=\"comment\">/* Set exact input bits only if the input and output differ or the</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   user already did */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ifound\">ifound</a> == -1 && (<a class=\"id\" href=\"#ibaud\">ibaud</a> != <a class=\"id\" href=\"#obaud\">obaud</a> || <a class=\"id\" href=\"#ibinput\">ibinput</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cflag\">c_cflag</a> |= (<a class=\"id\" href=\"#BOTHER\">BOTHER</a> << <a class=\"id\" href=\"#IBSHIFT\">IBSHIFT</a>);", 
"#else", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ifound\">ifound</a> == -1 || <a class=\"id\" href=\"#ofound\">ofound</a> == -1) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk_once\">printk_once</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> \"tty: Unable to return correct \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  \"speed data as your architecture needs updating.\\n\");", 
"<span class=\"ts\"/>}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#tty_termios_encode_baud_rate\">tty_termios_encode_baud_rate</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>tty_encode_baud_rate<span class=\"ts\"/><span class=\"ts\"/>-<span class=\"ts\"/>set baud rate of the tty</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@ibaud: input baud rate</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@obad: output baud rate</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Update the current termios data for the tty with the new speed</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>settings. The caller must hold the termios_mutex for the tty in</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>question.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"void <a class=\"id\" href=\"#tty_encode_baud_rate\">tty_encode_baud_rate</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, <a class=\"id\" href=\"#speed_t\">speed_t</a> <a class=\"id\" href=\"#ibaud\">ibaud</a>, <a class=\"id\" href=\"#speed_t\">speed_t</a> <a class=\"id\" href=\"#obaud\">obaud</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty_termios_encode_baud_rate\">tty_termios_encode_baud_rate</a>(<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>, <a class=\"id\" href=\"#ibaud\">ibaud</a>, <a class=\"id\" href=\"#obaud\">obaud</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#tty_encode_baud_rate\">tty_encode_baud_rate</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>tty_get_baud_rate<span class=\"ts\"/>-<span class=\"ts\"/>get tty bit rates</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@tty: tty to query</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Returns the baud rate as an integer for this terminal. The</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>termios lock must be held by the caller and the terminal bit</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>flags may be updated.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Locking: none</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"<a class=\"id\" href=\"#speed_t\">speed_t</a> <a class=\"id\" href=\"#tty_get_baud_rate\">tty_get_baud_rate</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#speed_t\">speed_t</a> <a class=\"id\" href=\"#baud\">baud</a> = <a class=\"id\" href=\"#tty_termios_baud_rate\">tty_termios_baud_rate</a>(<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#baud\">baud</a> == 38400 && <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#alt_speed\">alt_speed</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#warned\">warned</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> \"Use of setserial/setrocket to \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    \"set SPD_* flags is deprecated\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#warned\">warned</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#baud\">baud</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#alt_speed\">alt_speed</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#baud\">baud</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#tty_get_baud_rate\">tty_get_baud_rate</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>tty_termios_copy_hw<span class=\"ts\"/>-<span class=\"ts\"/>copy hardware settings</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@new: New termios</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@old: Old termios</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Propogate the hardware specific terminal setting bits from</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>the old termios structure to the new one. This is used in cases</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>where the hardware does not support reconfiguration or as a helper</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>in some cases where only minimal reconfiguration is supported</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"void <a class=\"id\" href=\"#tty_termios_copy_hw\">tty_termios_copy_hw</a>(struct <a class=\"id\" href=\"#ktermios\">ktermios</a> *<a class=\"id\" href=\"#new\">new</a>, struct <a class=\"id\" href=\"#ktermios\">ktermios</a> *<a class=\"id\" href=\"#old\">old</a>)", 
"{", 
"<span class=\"ts\"/><span class=\"comment\">/* The bits a dumb device handles in software. Smart devices need</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   to always provide a set_termios method */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#c_cflag\">c_cflag</a> &= <a class=\"id\" href=\"#HUPCL\">HUPCL</a> | <a class=\"id\" href=\"#CREAD\">CREAD</a> | <a class=\"id\" href=\"#CLOCAL\">CLOCAL</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#c_cflag\">c_cflag</a> |= <a class=\"id\" href=\"#old\">old</a>-><a class=\"id\" href=\"#c_cflag\">c_cflag</a> &amp; ~(<a class=\"id\" href=\"#HUPCL\">HUPCL</a> | <a class=\"id\" href=\"#CREAD\">CREAD</a> | <a class=\"id\" href=\"#CLOCAL\">CLOCAL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#c_ispeed\">c_ispeed</a> = <a class=\"id\" href=\"#old\">old</a>-><a class=\"id\" href=\"#c_ispeed\">c_ispeed</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#c_ospeed\">c_ospeed</a> = <a class=\"id\" href=\"#old\">old</a>-><a class=\"id\" href=\"#c_ospeed\">c_ospeed</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#tty_termios_copy_hw\">tty_termios_copy_hw</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>tty_termios_hw_change<span class=\"ts\"/>-<span class=\"ts\"/>check for setting change</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@a: termios</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@b: termios to compare</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Check if any of the bits that affect a dumb device have changed</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>between the two termios structures, or a speed change is needed.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"int <a class=\"id\" href=\"#tty_termios_hw_change\">tty_termios_hw_change</a>(struct <a class=\"id\" href=\"#ktermios\">ktermios</a> *<a class=\"id\" href=\"#a\">a</a>, struct <a class=\"id\" href=\"#ktermios\">ktermios</a> *<a class=\"id\" href=\"#b\">b</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#a\">a</a>-><a class=\"id\" href=\"#c_ispeed\">c_ispeed</a> != <a class=\"id\" href=\"#b\">b</a>-><a class=\"id\" href=\"#c_ispeed\">c_ispeed</a> || <a class=\"id\" href=\"#a\">a</a>-><a class=\"id\" href=\"#c_ospeed\">c_ospeed</a> != <a class=\"id\" href=\"#b\">b</a>-><a class=\"id\" href=\"#c_ospeed\">c_ospeed</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#a\">a</a>-><a class=\"id\" href=\"#c_cflag\">c_cflag</a> ^ <a class=\"id\" href=\"#b\">b</a>-><a class=\"id\" href=\"#c_cflag\">c_cflag</a>) &amp; ~(<a class=\"id\" href=\"#HUPCL\">HUPCL</a> | <a class=\"id\" href=\"#CREAD\">CREAD</a> | <a class=\"id\" href=\"#CLOCAL\">CLOCAL</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>return 0;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#tty_termios_hw_change\">tty_termios_hw_change</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>change_termios<span class=\"ts\"/><span class=\"ts\"/>-<span class=\"ts\"/>update termios values</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@tty: tty to update</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@new_termios: desired new value</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Perform updates to the termios values set on this terminal. There</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>is a bit of layering violation here with n_tty in terms of the</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>internal knowledge of this function.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Locking: termios_mutex</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static void <a class=\"id\" href=\"#change_termios\">change_termios</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, struct <a class=\"id\" href=\"#ktermios\">ktermios</a> *<a class=\"id\" href=\"#new_termios\">new_termios</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ktermios\">ktermios</a> <a class=\"id\" href=\"#old_termios\">old_termios</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#tty_ldisc\">tty_ldisc</a> *<a class=\"id\" href=\"#ld\">ld</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *<span class=\"ts\"/>Perform the actual termios internal changes under lock.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* FIXME: we need to decide on some locking/ordering semantics</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   for the set_termios notification eventually */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#old_termios\">old_termios</a> = *<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>;", 
"<span class=\"ts\"/>*<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a> = *<a class=\"id\" href=\"#new_termios\">new_termios</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#unset_locked_termios\">unset_locked_termios</a>(<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>, &amp;<a class=\"id\" href=\"#old_termios\">old_termios</a>, <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_locked\">termios_locked</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* See if packet mode change of state. */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#link\">link</a> && <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#packet\">packet</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#extproc\">extproc</a> = (<a class=\"id\" href=\"#old_termios\">old_termios</a>.<a class=\"id\" href=\"#c_lflag\">c_lflag</a> &amp; <a class=\"id\" href=\"#EXTPROC\">EXTPROC</a>) |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_lflag\">c_lflag</a> &amp; <a class=\"id\" href=\"#EXTPROC\">EXTPROC</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#old_flow\">old_flow</a> = ((<a class=\"id\" href=\"#old_termios\">old_termios</a>.<a class=\"id\" href=\"#c_iflag\">c_iflag</a> &amp; <a class=\"id\" href=\"#IXON\">IXON</a>) &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#old_termios\">old_termios</a>.<a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VSTOP\">VSTOP</a>] == '\\023') &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#old_termios\">old_termios</a>.<a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VSTART\">VSTART</a>] == '\\021'));", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#new_flow\">new_flow</a> = (<a class=\"id\" href=\"#I_IXON\">I_IXON</a>(<a class=\"id\" href=\"#tty\">tty</a>) &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#STOP_CHAR\">STOP_CHAR</a>(<a class=\"id\" href=\"#tty\">tty</a>) == '\\023' &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#START_CHAR\">START_CHAR</a>(<a class=\"id\" href=\"#tty\">tty</a>) == '\\021');", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((<a class=\"id\" href=\"#old_flow\">old_flow</a> != <a class=\"id\" href=\"#new_flow\">new_flow</a>) || <a class=\"id\" href=\"#extproc\">extproc</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irqsave\">spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#ctrl_lock\">ctrl_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#old_flow\">old_flow</a> != <a class=\"id\" href=\"#new_flow\">new_flow</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#ctrl_status\">ctrl_status</a> &= ~(<a class=\"id\" href=\"#TIOCPKT_DOSTOP\">TIOCPKT_DOSTOP</a> | <a class=\"id\" href=\"#TIOCPKT_NOSTOP\">TIOCPKT_NOSTOP</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#new_flow\">new_flow</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#ctrl_status\">ctrl_status</a> |= <a class=\"id\" href=\"#TIOCPKT_DOSTOP\">TIOCPKT_DOSTOP</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#ctrl_status\">ctrl_status</a> |= <a class=\"id\" href=\"#TIOCPKT_NOSTOP\">TIOCPKT_NOSTOP</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#extproc\">extproc</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#ctrl_status\">ctrl_status</a> |= <a class=\"id\" href=\"#TIOCPKT_IOCTL\">TIOCPKT_IOCTL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irqrestore\">spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#ctrl_lock\">ctrl_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#wake_up_interruptible\">wake_up_interruptible</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#read_wait\">read_wait</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#set_termios\">set_termios</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>(*<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#set_termios\">set_termios</a>)(<a class=\"id\" href=\"#tty\">tty</a>, &amp;<a class=\"id\" href=\"#old_termios\">old_termios</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty_termios_copy_hw\">tty_termios_copy_hw</a>(<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>, &amp;<a class=\"id\" href=\"#old_termios\">old_termios</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ld\">ld</a> = <a class=\"id\" href=\"#tty_ldisc_ref\">tty_ldisc_ref</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ld\">ld</a> != <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ld\">ld</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#set_termios\">set_termios</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#ld\">ld</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#set_termios\">set_termios</a>)(<a class=\"id\" href=\"#tty\">tty</a>, &amp;<a class=\"id\" href=\"#old_termios\">old_termios</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty_ldisc_deref\">tty_ldisc_deref</a>(<a class=\"id\" href=\"#ld\">ld</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>set_termios<span class=\"ts\"/><span class=\"ts\"/>-<span class=\"ts\"/>set termios values for a tty</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@tty: terminal device</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@arg: user data</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@opt: option information</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Helper function to prepare termios data and run necessary other</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>functions before using change_termios to do the actual changes.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Locking:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/>Called functions take ldisc and termios_mutex locks</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static int <a class=\"id\" href=\"#set_termios\">set_termios</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#arg\">arg</a>, int <a class=\"id\" href=\"#opt\">opt</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ktermios\">ktermios</a> <a class=\"id\" href=\"#tmp_termios\">tmp_termios</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#tty_ldisc\">tty_ldisc</a> *<a class=\"id\" href=\"#ld\">ld</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#tty_check_change\">tty_check_change</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>(&amp;<a class=\"id\" href=\"#tmp_termios\">tmp_termios</a>, <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>, sizeof(struct <a class=\"id\" href=\"#ktermios\">ktermios</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#opt\">opt</a> &amp; <a class=\"id\" href=\"#TERMIOS_TERMIO\">TERMIOS_TERMIO</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#user_termio_to_kernel_termios\">user_termio_to_kernel_termios</a>(&amp;<a class=\"id\" href=\"#tmp_termios\">tmp_termios</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(struct <a class=\"id\" href=\"#termio\">termio</a> <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#arg\">arg</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#TCGETS2\">TCGETS2</a>", 
"<span class=\"ts\"/>} else if (<a class=\"id\" href=\"#opt\">opt</a> &amp; <a class=\"id\" href=\"#TERMIOS_OLD\">TERMIOS_OLD</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#user_termios_to_kernel_termios_1\">user_termios_to_kernel_termios_1</a>(&amp;<a class=\"id\" href=\"#tmp_termios\">tmp_termios</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(struct <a class=\"id\" href=\"#termios\">termios</a> <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#arg\">arg</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#user_termios_to_kernel_termios\">user_termios_to_kernel_termios</a>(&amp;<a class=\"id\" href=\"#tmp_termios\">tmp_termios</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(struct <a class=\"id\" href=\"#termios2\">termios2</a> <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#arg\">arg</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/>}", 
"#else", 
"<span class=\"ts\"/>} else if (<a class=\"id\" href=\"#user_termios_to_kernel_termios\">user_termios_to_kernel_termios</a>(&amp;<a class=\"id\" href=\"#tmp_termios\">tmp_termios</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(struct <a class=\"id\" href=\"#termios\">termios</a> <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#arg\">arg</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* If old style Bfoo values are used then load c_ispeed/c_ospeed</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * with the real speed so its unconditionally usable */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp_termios\">tmp_termios</a>.<a class=\"id\" href=\"#c_ispeed\">c_ispeed</a> = <a class=\"id\" href=\"#tty_termios_input_baud_rate\">tty_termios_input_baud_rate</a>(&amp;<a class=\"id\" href=\"#tmp_termios\">tmp_termios</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp_termios\">tmp_termios</a>.<a class=\"id\" href=\"#c_ospeed\">c_ospeed</a> = <a class=\"id\" href=\"#tty_termios_baud_rate\">tty_termios_baud_rate</a>(&amp;<a class=\"id\" href=\"#tmp_termios\">tmp_termios</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ld\">ld</a> = <a class=\"id\" href=\"#tty_ldisc_ref\">tty_ldisc_ref</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ld\">ld</a> != <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((<a class=\"id\" href=\"#opt\">opt</a> &amp; <a class=\"id\" href=\"#TERMIOS_FLUSH\">TERMIOS_FLUSH</a>) && <a class=\"id\" href=\"#ld\">ld</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#flush_buffer\">flush_buffer</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ld\">ld</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#flush_buffer\">flush_buffer</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty_ldisc_deref\">tty_ldisc_deref</a>(<a class=\"id\" href=\"#ld\">ld</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#opt\">opt</a> &amp; <a class=\"id\" href=\"#TERMIOS_WAIT\">TERMIOS_WAIT</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty_wait_until_sent\">tty_wait_until_sent</a>(<a class=\"id\" href=\"#tty\">tty</a>, 0);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#signal_pending\">signal_pending</a>(<a class=\"id\" href=\"#current\">current</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINTR\">EINTR</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#change_termios\">change_termios</a>(<a class=\"id\" href=\"#tty\">tty</a>, &amp;<a class=\"id\" href=\"#tmp_termios\">tmp_termios</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* FIXME: Arguably if tmp_termios == tty-&gt;termios AND the</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   actual requested termios was not tmp_termios then we may</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   want to return an error as no user requested change has</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   succeeded */</span>", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#copy_termios\">copy_termios</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, struct <a class=\"id\" href=\"#ktermios\">ktermios</a> *<a class=\"id\" href=\"#kterm\">kterm</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>(<a class=\"id\" href=\"#kterm\">kterm</a>, <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>, sizeof(struct <a class=\"id\" href=\"#ktermios\">ktermios</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#copy_termios_locked\">copy_termios_locked</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, struct <a class=\"id\" href=\"#ktermios\">ktermios</a> *<a class=\"id\" href=\"#kterm\">kterm</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>(<a class=\"id\" href=\"#kterm\">kterm</a>, <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_locked\">termios_locked</a>, sizeof(struct <a class=\"id\" href=\"#ktermios\">ktermios</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#get_termio\">get_termio</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, struct <a class=\"id\" href=\"#termio\">termio</a> <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#termio\">termio</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ktermios\">ktermios</a> <a class=\"id\" href=\"#kterm\">kterm</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#copy_termios\">copy_termios</a>(<a class=\"id\" href=\"#tty\">tty</a>, &amp;<a class=\"id\" href=\"#kterm\">kterm</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#kernel_termios_to_user_termio\">kernel_termios_to_user_termio</a>(<a class=\"id\" href=\"#termio\">termio</a>, &amp;<a class=\"id\" href=\"#kterm\">kterm</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#TCGETX\">TCGETX</a>", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>set_termiox<span class=\"ts\"/>-<span class=\"ts\"/>set termiox fields if possible</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@tty: terminal</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@arg: termiox structure from user</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@opt: option flags for ioctl type</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Implement the device calling points for the SYS5 termiox ioctl</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>interface in Linux</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static int <a class=\"id\" href=\"#set_termiox\">set_termiox</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#arg\">arg</a>, int <a class=\"id\" href=\"#opt\">opt</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#termiox\">termiox</a> <a class=\"id\" href=\"#tnew\">tnew</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#tty_ldisc\">tty_ldisc</a> *<a class=\"id\" href=\"#ld\">ld</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termiox\">termiox</a> == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(&amp;<a class=\"id\" href=\"#tnew\">tnew</a>, <a class=\"id\" href=\"#arg\">arg</a>, sizeof(struct <a class=\"id\" href=\"#termiox\">termiox</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ld\">ld</a> = <a class=\"id\" href=\"#tty_ldisc_ref\">tty_ldisc_ref</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ld\">ld</a> != <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((<a class=\"id\" href=\"#opt\">opt</a> &amp; <a class=\"id\" href=\"#TERMIOS_FLUSH\">TERMIOS_FLUSH</a>) && <a class=\"id\" href=\"#ld\">ld</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#flush_buffer\">flush_buffer</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ld\">ld</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#flush_buffer\">flush_buffer</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty_ldisc_deref\">tty_ldisc_deref</a>(<a class=\"id\" href=\"#ld\">ld</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#opt\">opt</a> &amp; <a class=\"id\" href=\"#TERMIOS_WAIT\">TERMIOS_WAIT</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty_wait_until_sent\">tty_wait_until_sent</a>(<a class=\"id\" href=\"#tty\">tty</a>, 0);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#signal_pending\">signal_pending</a>(<a class=\"id\" href=\"#current\">current</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINTR\">EINTR</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#set_termiox\">set_termiox</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#set_termiox\">set_termiox</a>(<a class=\"id\" href=\"#tty\">tty</a>, &amp;<a class=\"id\" href=\"#tnew\">tnew</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#TIOCGETP\">TIOCGETP</a>", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * These are deprecated, but there is limited support..</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * The \"sg_flags\" translation is a joke..</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#get_sgflags\">get_sgflags</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#flags\">flags</a> = 0;", 
"", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_lflag\">c_lflag</a> &amp; <a class=\"id\" href=\"#ICANON\">ICANON</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_lflag\">c_lflag</a> &amp; <a class=\"id\" href=\"#ISIG\">ISIG</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#flags\">flags</a> |= 0x02;<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* cbreak */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#flags\">flags</a> |= 0x20;<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* raw */</span>", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_lflag\">c_lflag</a> &amp; <a class=\"id\" href=\"#ECHO\">ECHO</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#flags\">flags</a> |= 0x08;<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* echo */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_oflag\">c_oflag</a> &amp; <a class=\"id\" href=\"#OPOST\">OPOST</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_oflag\">c_oflag</a> &amp; <a class=\"id\" href=\"#ONLCR\">ONLCR</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#flags\">flags</a> |= 0x10;<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* crmod */</span>", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#flags\">flags</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#get_sgttyb\">get_sgttyb</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, struct <a class=\"id\" href=\"#sgttyb\">sgttyb</a> <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#sgttyb\">sgttyb</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sgttyb\">sgttyb</a> <a class=\"id\" href=\"#tmp\">tmp</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#sg_ispeed\">sg_ispeed</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_ispeed\">c_ispeed</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#sg_ospeed\">sg_ospeed</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_ospeed\">c_ospeed</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#sg_erase\">sg_erase</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VERASE\">VERASE</a>];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#sg_kill\">sg_kill</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VKILL\">VKILL</a>];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#sg_flags\">sg_flags</a> = <a class=\"id\" href=\"#get_sgflags\">get_sgflags</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#sgttyb\">sgttyb</a>, &amp;<a class=\"id\" href=\"#tmp\">tmp</a>, sizeof(<a class=\"id\" href=\"#tmp\">tmp</a>)) ? -<a class=\"id\" href=\"#EFAULT\">EFAULT</a> : 0;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#set_sgflags\">set_sgflags</a>(struct <a class=\"id\" href=\"#ktermios\">ktermios</a> *<a class=\"id\" href=\"#termios\">termios</a>, int <a class=\"id\" href=\"#flags\">flags</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_iflag\">c_iflag</a> = <a class=\"id\" href=\"#ICRNL\">ICRNL</a> | <a class=\"id\" href=\"#IXON\">IXON</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_oflag\">c_oflag</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_lflag\">c_lflag</a> = <a class=\"id\" href=\"#ISIG\">ISIG</a> | <a class=\"id\" href=\"#ICANON\">ICANON</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#flags\">flags</a> &amp; 0x02) {<span class=\"ts\"/><span class=\"comment\">/* cbreak */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_iflag\">c_iflag</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_lflag\">c_lflag</a> &= ~<a class=\"id\" href=\"#ICANON\">ICANON</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#flags\">flags</a> &amp; 0x08) {<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* echo */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_lflag\">c_lflag</a> |= <a class=\"id\" href=\"#ECHO\">ECHO</a> | <a class=\"id\" href=\"#ECHOE\">ECHOE</a> | <a class=\"id\" href=\"#ECHOK\">ECHOK</a> |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#ECHOCTL\">ECHOCTL</a> | <a class=\"id\" href=\"#ECHOKE\">ECHOKE</a> | <a class=\"id\" href=\"#IEXTEN\">IEXTEN</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#flags\">flags</a> &amp; 0x10) {<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* crmod */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_oflag\">c_oflag</a> |= <a class=\"id\" href=\"#OPOST\">OPOST</a> | <a class=\"id\" href=\"#ONLCR\">ONLCR</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#flags\">flags</a> &amp; 0x20) {<span class=\"ts\"/><span class=\"comment\">/* raw */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_iflag\">c_iflag</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_lflag\">c_lflag</a> &= ~(<a class=\"id\" href=\"#ISIG\">ISIG</a> | <a class=\"id\" href=\"#ICANON\">ICANON</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_lflag\">c_lflag</a> &amp; <a class=\"id\" href=\"#ICANON\">ICANON</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VMIN\">VMIN</a>] = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VTIME\">VTIME</a>] = 0;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>set_sgttyb<span class=\"ts\"/><span class=\"ts\"/>-<span class=\"ts\"/>set legacy terminal values</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@tty: tty structure</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@sgttyb: pointer to old style terminal structure</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Updates a terminal from the legacy BSD style terminal information</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>structure.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Locking: termios_mutex</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static int <a class=\"id\" href=\"#set_sgttyb\">set_sgttyb</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, struct <a class=\"id\" href=\"#sgttyb\">sgttyb</a> <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#sgttyb\">sgttyb</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sgttyb\">sgttyb</a> <a class=\"id\" href=\"#tmp\">tmp</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ktermios\">ktermios</a> <a class=\"id\" href=\"#termios\">termios</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#tty_check_change\">tty_check_change</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(&amp;<a class=\"id\" href=\"#tmp\">tmp</a>, <a class=\"id\" href=\"#sgttyb\">sgttyb</a>, sizeof(<a class=\"id\" href=\"#tmp\">tmp</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a> = *<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>.<a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VERASE\">VERASE</a>] = <a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#sg_erase\">sg_erase</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>.<a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VKILL\">VKILL</a>] = <a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#sg_kill\">sg_kill</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#set_sgflags\">set_sgflags</a>(&amp;<a class=\"id\" href=\"#termios\">termios</a>, <a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#sg_flags\">sg_flags</a>);", 
"<span class=\"ts\"/><span class=\"comment\">/* Try and encode into Bfoo format */</span>", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#BOTHER\">BOTHER</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty_termios_encode_baud_rate\">tty_termios_encode_baud_rate</a>(&amp;<a class=\"id\" href=\"#termios\">termios</a>, <a class=\"id\" href=\"#termios\">termios</a>.<a class=\"id\" href=\"#c_ispeed\">c_ispeed</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#termios\">termios</a>.<a class=\"id\" href=\"#c_ospeed\">c_ospeed</a>);", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#change_termios\">change_termios</a>(<a class=\"id\" href=\"#tty\">tty</a>, &amp;<a class=\"id\" href=\"#termios\">termios</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#TIOCGETC\">TIOCGETC</a>", 
"static int <a class=\"id\" href=\"#get_tchars\">get_tchars</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, struct <a class=\"id\" href=\"#tchars\">tchars</a> <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#tchars\">tchars</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#tchars\">tchars</a> <a class=\"id\" href=\"#tmp\">tmp</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_intrc\">t_intrc</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VINTR\">VINTR</a>];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_quitc\">t_quitc</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VQUIT\">VQUIT</a>];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_startc\">t_startc</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VSTART\">VSTART</a>];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_stopc\">t_stopc</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VSTOP\">VSTOP</a>];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_eofc\">t_eofc</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VEOF\">VEOF</a>];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_brkc\">t_brkc</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VEOL2\">VEOL2</a>];<span class=\"ts\"/><span class=\"comment\">/* what is brkc anyway? */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#tchars\">tchars</a>, &amp;<a class=\"id\" href=\"#tmp\">tmp</a>, sizeof(<a class=\"id\" href=\"#tmp\">tmp</a>)) ? -<a class=\"id\" href=\"#EFAULT\">EFAULT</a> : 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#set_tchars\">set_tchars</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, struct <a class=\"id\" href=\"#tchars\">tchars</a> <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#tchars\">tchars</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#tchars\">tchars</a> <a class=\"id\" href=\"#tmp\">tmp</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(&amp;<a class=\"id\" href=\"#tmp\">tmp</a>, <a class=\"id\" href=\"#tchars\">tchars</a>, sizeof(<a class=\"id\" href=\"#tmp\">tmp</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VINTR\">VINTR</a>] = <a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_intrc\">t_intrc</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VQUIT\">VQUIT</a>] = <a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_quitc\">t_quitc</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VSTART\">VSTART</a>] = <a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_startc\">t_startc</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VSTOP\">VSTOP</a>] = <a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_stopc\">t_stopc</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VEOF\">VEOF</a>] = <a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_eofc\">t_eofc</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VEOL2\">VEOL2</a>] = <a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_brkc\">t_brkc</a>;<span class=\"ts\"/><span class=\"comment\">/* what is brkc anyway? */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#TIOCGLTC\">TIOCGLTC</a>", 
"static int <a class=\"id\" href=\"#get_ltchars\">get_ltchars</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, struct <a class=\"id\" href=\"#ltchars\">ltchars</a> <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#ltchars\">ltchars</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ltchars\">ltchars</a> <a class=\"id\" href=\"#tmp\">tmp</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_suspc\">t_suspc</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VSUSP\">VSUSP</a>];", 
"<span class=\"ts\"/><span class=\"comment\">/* what is dsuspc anyway? */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_dsuspc\">t_dsuspc</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VSUSP\">VSUSP</a>];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_rprntc\">t_rprntc</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VREPRINT\">VREPRINT</a>];", 
"<span class=\"ts\"/><span class=\"comment\">/* what is flushc anyway? */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_flushc\">t_flushc</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VEOL2\">VEOL2</a>];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_werasc\">t_werasc</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VWERASE\">VWERASE</a>];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_lnextc\">t_lnextc</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VLNEXT\">VLNEXT</a>];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#ltchars\">ltchars</a>, &amp;<a class=\"id\" href=\"#tmp\">tmp</a>, sizeof(<a class=\"id\" href=\"#tmp\">tmp</a>)) ? -<a class=\"id\" href=\"#EFAULT\">EFAULT</a> : 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#set_ltchars\">set_ltchars</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, struct <a class=\"id\" href=\"#ltchars\">ltchars</a> <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#ltchars\">ltchars</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ltchars\">ltchars</a> <a class=\"id\" href=\"#tmp\">tmp</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(&amp;<a class=\"id\" href=\"#tmp\">tmp</a>, <a class=\"id\" href=\"#ltchars\">ltchars</a>, sizeof(<a class=\"id\" href=\"#tmp\">tmp</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VSUSP\">VSUSP</a>] = <a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_suspc\">t_suspc</a>;", 
"<span class=\"ts\"/><span class=\"comment\">/* what is dsuspc anyway? */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VEOL2\">VEOL2</a>] = <a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_dsuspc\">t_dsuspc</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VREPRINT\">VREPRINT</a>] = <a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_rprntc\">t_rprntc</a>;", 
"<span class=\"ts\"/><span class=\"comment\">/* what is flushc anyway? */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VEOL2\">VEOL2</a>] = <a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_flushc\">t_flushc</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VWERASE\">VWERASE</a>] = <a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_werasc\">t_werasc</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cc\">c_cc</a>[<a class=\"id\" href=\"#VLNEXT\">VLNEXT</a>] = <a class=\"id\" href=\"#tmp\">tmp</a>.<a class=\"id\" href=\"#t_lnextc\">t_lnextc</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>send_prio_char<span class=\"ts\"/><span class=\"ts\"/>-<span class=\"ts\"/>send priority character</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Send a high priority character to the tty even if stopped</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Locking: none for xchar method, write ordering for write method.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static int <a class=\"id\" href=\"#send_prio_char\">send_prio_char</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, char <a class=\"id\" href=\"#ch\">ch</a>)", 
"{", 
"<span class=\"ts\"/>int<span class=\"ts\"/><a class=\"id\" href=\"#was_stopped\">was_stopped</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#stopped\">stopped</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#send_xchar\">send_xchar</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#send_xchar\">send_xchar</a>(<a class=\"id\" href=\"#tty\">tty</a>, <a class=\"id\" href=\"#ch\">ch</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tty_write_lock\">tty_write_lock</a>(<a class=\"id\" href=\"#tty\">tty</a>, 0) &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ERESTARTSYS\">ERESTARTSYS</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#was_stopped\">was_stopped</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#start_tty\">start_tty</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#write\">write</a>(<a class=\"id\" href=\"#tty\">tty</a>, &amp;<a class=\"id\" href=\"#ch\">ch</a>, 1);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#was_stopped\">was_stopped</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#stop_tty\">stop_tty</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty_write_unlock\">tty_write_unlock</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>tty_change_softcar<span class=\"ts\"/>-<span class=\"ts\"/>carrier change ioctl helper</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@tty: tty to update</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@arg: enable/disable CLOCAL</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Perform a change to the CLOCAL state and call into the driver</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>layer to make it visible. All done with the termios mutex</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static int <a class=\"id\" href=\"#tty_change_softcar\">tty_change_softcar</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, int <a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a> = 0;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#bit\">bit</a> = <a class=\"id\" href=\"#arg\">arg</a> ? <a class=\"id\" href=\"#CLOCAL\">CLOCAL</a> : 0;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ktermios\">ktermios</a> <a class=\"id\" href=\"#old\">old</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#old\">old</a> = *<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cflag\">c_cflag</a> &= ~<a class=\"id\" href=\"#CLOCAL\">CLOCAL</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cflag\">c_cflag</a> |= <a class=\"id\" href=\"#bit\">bit</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#set_termios\">set_termios</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#set_termios\">set_termios</a>(<a class=\"id\" href=\"#tty\">tty</a>, &amp;<a class=\"id\" href=\"#old\">old</a>);", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios\">termios</a>-><a class=\"id\" href=\"#c_cflag\">c_cflag</a> &amp; <a class=\"id\" href=\"#CLOCAL\">CLOCAL</a>) != <a class=\"id\" href=\"#bit\">bit</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>tty_mode_ioctl<span class=\"ts\"/><span class=\"ts\"/>-<span class=\"ts\"/>mode related ioctls</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@tty: tty for the ioctl</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@file: file pointer for the tty</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@cmd: command</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@arg: ioctl argument</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Perform non line discipline specific mode control ioctls. This</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>is designed to be called by line disciplines to ensure they provide</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>consistent mode setting.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"int <a class=\"id\" href=\"#tty_mode_ioctl\">tty_mode_ioctl</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#cmd\">cmd</a>, unsigned long <a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#real_tty\">real_tty</a>;", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#p\">p</a> = (void <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#arg\">arg</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a> = 0;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ktermios\">ktermios</a> <a class=\"id\" href=\"#kterm\">kterm</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#driver\">driver</a>-><a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#TTY_DRIVER_TYPE_PTY\">TTY_DRIVER_TYPE_PTY</a> &&", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#driver\">driver</a>-><a class=\"id\" href=\"#subtype\">subtype</a> == <a class=\"id\" href=\"#PTY_TYPE_MASTER\">PTY_TYPE_MASTER</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#real_tty\">real_tty</a> = <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#link\">link</a>;", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#real_tty\">real_tty</a> = <a class=\"id\" href=\"#tty\">tty</a>;", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#cmd\">cmd</a>) {", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#TIOCGETP\">TIOCGETP</a>", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCGETP\">TIOCGETP</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#get_sgttyb\">get_sgttyb</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, (struct <a class=\"id\" href=\"#sgttyb\">sgttyb</a> <a class=\"id\" href=\"#__user\">__user</a> *) <a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCSETP\">TIOCSETP</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCSETN\">TIOCSETN</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#set_sgttyb\">set_sgttyb</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, (struct <a class=\"id\" href=\"#sgttyb\">sgttyb</a> <a class=\"id\" href=\"#__user\">__user</a> *) <a class=\"id\" href=\"#arg\">arg</a>);", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#TIOCGETC\">TIOCGETC</a>", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCGETC\">TIOCGETC</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#get_tchars\">get_tchars</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, <a class=\"id\" href=\"#p\">p</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCSETC\">TIOCSETC</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#set_tchars\">set_tchars</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, <a class=\"id\" href=\"#p\">p</a>);", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#TIOCGLTC\">TIOCGLTC</a>", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCGLTC\">TIOCGLTC</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#get_ltchars\">get_ltchars</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, <a class=\"id\" href=\"#p\">p</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCSLTC\">TIOCSLTC</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#set_ltchars\">set_ltchars</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, <a class=\"id\" href=\"#p\">p</a>);", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCSETSF\">TCSETSF</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#set_termios\">set_termios</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, <a class=\"id\" href=\"#p\">p</a>,  <a class=\"id\" href=\"#TERMIOS_FLUSH\">TERMIOS_FLUSH</a> | <a class=\"id\" href=\"#TERMIOS_WAIT\">TERMIOS_WAIT</a> | <a class=\"id\" href=\"#TERMIOS_OLD\">TERMIOS_OLD</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCSETSW\">TCSETSW</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#set_termios\">set_termios</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, <a class=\"id\" href=\"#p\">p</a>, <a class=\"id\" href=\"#TERMIOS_WAIT\">TERMIOS_WAIT</a> | <a class=\"id\" href=\"#TERMIOS_OLD\">TERMIOS_OLD</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCSETS\">TCSETS</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#set_termios\">set_termios</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, <a class=\"id\" href=\"#p\">p</a>, <a class=\"id\" href=\"#TERMIOS_OLD\">TERMIOS_OLD</a>);", 
"#<a class=\"id\" href=\"#ifndef\">ifndef</a> <a class=\"id\" href=\"#TCGETS2\">TCGETS2</a>", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCGETS\">TCGETS</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#copy_termios\">copy_termios</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, &amp;<a class=\"id\" href=\"#kterm\">kterm</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#kernel_termios_to_user_termios\">kernel_termios_to_user_termios</a>((struct <a class=\"id\" href=\"#termios\">termios</a> <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#arg\">arg</a>, &amp;<a class=\"id\" href=\"#kterm\">kterm</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"#else", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCGETS\">TCGETS</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#copy_termios\">copy_termios</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, &amp;<a class=\"id\" href=\"#kterm\">kterm</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#kernel_termios_to_user_termios_1\">kernel_termios_to_user_termios_1</a>((struct <a class=\"id\" href=\"#termios\">termios</a> <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#arg\">arg</a>, &amp;<a class=\"id\" href=\"#kterm\">kterm</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCGETS2\">TCGETS2</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#copy_termios\">copy_termios</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, &amp;<a class=\"id\" href=\"#kterm\">kterm</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#kernel_termios_to_user_termios\">kernel_termios_to_user_termios</a>((struct <a class=\"id\" href=\"#termios2\">termios2</a> <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#arg\">arg</a>, &amp;<a class=\"id\" href=\"#kterm\">kterm</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCSETSF2\">TCSETSF2</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#set_termios\">set_termios</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, <a class=\"id\" href=\"#p\">p</a>,  <a class=\"id\" href=\"#TERMIOS_FLUSH\">TERMIOS_FLUSH</a> | <a class=\"id\" href=\"#TERMIOS_WAIT\">TERMIOS_WAIT</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCSETSW2\">TCSETSW2</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#set_termios\">set_termios</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, <a class=\"id\" href=\"#p\">p</a>, <a class=\"id\" href=\"#TERMIOS_WAIT\">TERMIOS_WAIT</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCSETS2\">TCSETS2</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#set_termios\">set_termios</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, <a class=\"id\" href=\"#p\">p</a>, 0);", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCGETA\">TCGETA</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#get_termio\">get_termio</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, <a class=\"id\" href=\"#p\">p</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCSETAF\">TCSETAF</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#set_termios\">set_termios</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, <a class=\"id\" href=\"#p\">p</a>, <a class=\"id\" href=\"#TERMIOS_FLUSH\">TERMIOS_FLUSH</a> | <a class=\"id\" href=\"#TERMIOS_WAIT\">TERMIOS_WAIT</a> | <a class=\"id\" href=\"#TERMIOS_TERMIO\">TERMIOS_TERMIO</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCSETAW\">TCSETAW</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#set_termios\">set_termios</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, <a class=\"id\" href=\"#p\">p</a>, <a class=\"id\" href=\"#TERMIOS_WAIT\">TERMIOS_WAIT</a> | <a class=\"id\" href=\"#TERMIOS_TERMIO\">TERMIOS_TERMIO</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCSETA\">TCSETA</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#set_termios\">set_termios</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, <a class=\"id\" href=\"#p\">p</a>, <a class=\"id\" href=\"#TERMIOS_TERMIO\">TERMIOS_TERMIO</a>);", 
"#<a class=\"id\" href=\"#ifndef\">ifndef</a> <a class=\"id\" href=\"#TCGETS2\">TCGETS2</a>", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCGLCKTRMIOS\">TIOCGLCKTRMIOS</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#copy_termios_locked\">copy_termios_locked</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, &amp;<a class=\"id\" href=\"#kterm\">kterm</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#kernel_termios_to_user_termios\">kernel_termios_to_user_termios</a>((struct <a class=\"id\" href=\"#termios\">termios</a> <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#arg\">arg</a>, &amp;<a class=\"id\" href=\"#kterm\">kterm</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCSLCKTRMIOS\">TIOCSLCKTRMIOS</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#capable\">capable</a>(<a class=\"id\" href=\"#CAP_SYS_ADMIN\">CAP_SYS_ADMIN</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EPERM\">EPERM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#copy_termios_locked\">copy_termios_locked</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, &amp;<a class=\"id\" href=\"#kterm\">kterm</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#user_termios_to_kernel_termios\">user_termios_to_kernel_termios</a>(&amp;<a class=\"id\" href=\"#kterm\">kterm</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       (struct <a class=\"id\" href=\"#termios\">termios</a> <a class=\"id\" href=\"#__user\">__user</a> *) <a class=\"id\" href=\"#arg\">arg</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#real_tty\">real_tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>-><a class=\"id\" href=\"#termios_locked\">termios_locked</a>, &amp;<a class=\"id\" href=\"#kterm\">kterm</a>, sizeof(struct <a class=\"id\" href=\"#ktermios\">ktermios</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#real_tty\">real_tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"#else", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCGLCKTRMIOS\">TIOCGLCKTRMIOS</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#copy_termios_locked\">copy_termios_locked</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, &amp;<a class=\"id\" href=\"#kterm\">kterm</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#kernel_termios_to_user_termios_1\">kernel_termios_to_user_termios_1</a>((struct <a class=\"id\" href=\"#termios\">termios</a> <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#arg\">arg</a>, &amp;<a class=\"id\" href=\"#kterm\">kterm</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCSLCKTRMIOS\">TIOCSLCKTRMIOS</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#capable\">capable</a>(<a class=\"id\" href=\"#CAP_SYS_ADMIN\">CAP_SYS_ADMIN</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EPERM\">EPERM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#copy_termios_locked\">copy_termios_locked</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, &amp;<a class=\"id\" href=\"#kterm\">kterm</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#user_termios_to_kernel_termios_1\">user_termios_to_kernel_termios_1</a>(&amp;<a class=\"id\" href=\"#kterm\">kterm</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       (struct <a class=\"id\" href=\"#termios\">termios</a> <a class=\"id\" href=\"#__user\">__user</a> *) <a class=\"id\" href=\"#arg\">arg</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#real_tty\">real_tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>-><a class=\"id\" href=\"#termios_locked\">termios_locked</a>, &amp;<a class=\"id\" href=\"#kterm\">kterm</a>, sizeof(struct <a class=\"id\" href=\"#ktermios\">ktermios</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#real_tty\">real_tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#TCGETX\">TCGETX</a>", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCGETX\">TCGETX</a>: {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#termiox\">termiox</a> <a class=\"id\" href=\"#ktermx\">ktermx</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#real_tty\">real_tty</a>-><a class=\"id\" href=\"#termiox\">termiox</a> == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#real_tty\">real_tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>(&amp;<a class=\"id\" href=\"#ktermx\">ktermx</a>, <a class=\"id\" href=\"#real_tty\">real_tty</a>-><a class=\"id\" href=\"#termiox\">termiox</a>, sizeof(struct <a class=\"id\" href=\"#termiox\">termiox</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#real_tty\">real_tty</a>-><a class=\"id\" href=\"#termios_mutex\">termios_mutex</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#p\">p</a>, &amp;<a class=\"id\" href=\"#ktermx\">ktermx</a>, sizeof(struct <a class=\"id\" href=\"#termiox\">termiox</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCSETX\">TCSETX</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#set_termiox\">set_termiox</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, <a class=\"id\" href=\"#p\">p</a>, 0);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCSETXW\">TCSETXW</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#set_termiox\">set_termiox</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, <a class=\"id\" href=\"#p\">p</a>, <a class=\"id\" href=\"#TERMIOS_WAIT\">TERMIOS_WAIT</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCSETXF\">TCSETXF</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#set_termiox\">set_termiox</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, <a class=\"id\" href=\"#p\">p</a>, <a class=\"id\" href=\"#TERMIOS_FLUSH\">TERMIOS_FLUSH</a>);", 
"#<a class=\"id\" href=\"#endif\">endif</a><span class=\"ts\"/><span class=\"ts\"/>", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCGSOFTCAR\">TIOCGSOFTCAR</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#copy_termios\">copy_termios</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, &amp;<a class=\"id\" href=\"#kterm\">kterm</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#put_user\">put_user</a>((<a class=\"id\" href=\"#kterm\">kterm</a>.<a class=\"id\" href=\"#c_cflag\">c_cflag</a> &amp; <a class=\"id\" href=\"#CLOCAL\">CLOCAL</a>) ? 1 : 0,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(int <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCSSOFTCAR\">TIOCSSOFTCAR</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#get_user\">get_user</a>(<a class=\"id\" href=\"#arg\">arg</a>, (unsigned int <a class=\"id\" href=\"#__user\">__user</a> *) <a class=\"id\" href=\"#arg\">arg</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#tty_change_softcar\">tty_change_softcar</a>(<a class=\"id\" href=\"#real_tty\">real_tty</a>, <a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOIOCTLCMD\">ENOIOCTLCMD</a>;", 
"<span class=\"ts\"/>}", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#tty_mode_ioctl\">tty_mode_ioctl</a>);", 
"", 
"int <a class=\"id\" href=\"#tty_perform_flush\">tty_perform_flush</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, unsigned long <a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#tty_ldisc\">tty_ldisc</a> *<a class=\"id\" href=\"#ld\">ld</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#tty_check_change\">tty_check_change</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ld\">ld</a> = <a class=\"id\" href=\"#tty_ldisc_ref_wait\">tty_ldisc_ref_wait</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#arg\">arg</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCIFLUSH\">TCIFLUSH</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ld\">ld</a> && <a class=\"id\" href=\"#ld\">ld</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#flush_buffer\">flush_buffer</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ld\">ld</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#flush_buffer\">flush_buffer</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCIOFLUSH\">TCIOFLUSH</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ld\">ld</a> && <a class=\"id\" href=\"#ld\">ld</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#flush_buffer\">flush_buffer</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ld\">ld</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#flush_buffer\">flush_buffer</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* fall through */</span>", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCOFLUSH\">TCOFLUSH</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty_driver_flush_buffer\">tty_driver_flush_buffer</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty_ldisc_deref\">tty_ldisc_deref</a>(<a class=\"id\" href=\"#ld\">ld</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tty_ldisc_deref\">tty_ldisc_deref</a>(<a class=\"id\" href=\"#ld\">ld</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#tty_perform_flush\">tty_perform_flush</a>);", 
"", 
"int <a class=\"id\" href=\"#n_tty_ioctl_helper\">n_tty_ioctl_helper</a>(struct <a class=\"id\" href=\"#tty_struct\">tty_struct</a> *<a class=\"id\" href=\"#tty\">tty</a>, struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>       unsigned int <a class=\"id\" href=\"#cmd\">cmd</a>, unsigned long <a class=\"id\" href=\"#arg\">arg</a>)", 
"{", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#cmd\">cmd</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCXONC\">TCXONC</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#tty_check_change\">tty_check_change</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>switch (<a class=\"id\" href=\"#arg\">arg</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#TCOOFF\">TCOOFF</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#flow_stopped\">flow_stopped</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#flow_stopped\">flow_stopped</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#stop_tty\">stop_tty</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#TCOON\">TCOON</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#flow_stopped\">flow_stopped</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#flow_stopped\">flow_stopped</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#start_tty\">start_tty</a>(<a class=\"id\" href=\"#tty\">tty</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#TCIOFF\">TCIOFF</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#STOP_CHAR\">STOP_CHAR</a>(<a class=\"id\" href=\"#tty\">tty</a>) != <a class=\"id\" href=\"#__DISABLED_CHAR\">__DISABLED_CHAR</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#send_prio_char\">send_prio_char</a>(<a class=\"id\" href=\"#tty\">tty</a>, <a class=\"id\" href=\"#STOP_CHAR\">STOP_CHAR</a>(<a class=\"id\" href=\"#tty\">tty</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#TCION\">TCION</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#START_CHAR\">START_CHAR</a>(<a class=\"id\" href=\"#tty\">tty</a>) != <a class=\"id\" href=\"#__DISABLED_CHAR\">__DISABLED_CHAR</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#send_prio_char\">send_prio_char</a>(<a class=\"id\" href=\"#tty\">tty</a>, <a class=\"id\" href=\"#START_CHAR\">START_CHAR</a>(<a class=\"id\" href=\"#tty\">tty</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TCFLSH\">TCFLSH</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#tty_perform_flush\">tty_perform_flush</a>(<a class=\"id\" href=\"#tty\">tty</a>, <a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#TIOCPKT\">TIOCPKT</a>:", 
"<span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#pktmode\">pktmode</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#driver\">driver</a>-><a class=\"id\" href=\"#type\">type</a> != <a class=\"id\" href=\"#TTY_DRIVER_TYPE_PTY\">TTY_DRIVER_TYPE_PTY</a> ||", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#driver\">driver</a>-><a class=\"id\" href=\"#subtype\">subtype</a> != <a class=\"id\" href=\"#PTY_TYPE_MASTER\">PTY_TYPE_MASTER</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOTTY\">ENOTTY</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#get_user\">get_user</a>(<a class=\"id\" href=\"#pktmode\">pktmode</a>, (int <a class=\"id\" href=\"#__user\">__user</a> *) <a class=\"id\" href=\"#arg\">arg</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irqsave\">spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#ctrl_lock\">ctrl_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#pktmode\">pktmode</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#packet\">packet</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#packet\">packet</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#ctrl_status\">ctrl_status</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#packet\">packet</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irqrestore\">spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#tty\">tty</a>-><a class=\"id\" href=\"#ctrl_lock\">ctrl_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Try the mode commands */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#tty_mode_ioctl\">tty_mode_ioctl</a>(<a class=\"id\" href=\"#tty\">tty</a>, <a class=\"id\" href=\"#file\">file</a>, <a class=\"id\" href=\"#cmd\">cmd</a>, <a class=\"id\" href=\"#arg\">arg</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#n_tty_ioctl_helper\">n_tty_ioctl_helper</a>);", 
];
xr_frag_insert('l/9b/919a8d7311ac3b625a87079a789efeb0a8c7aa.xr', __xr_tmp);
