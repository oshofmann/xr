var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Purpose: Export the firmware instance and label associated with</span>", 
"<span class=\"comment\"> * a pci device to sysfs</span>", 
"<span class=\"comment\"> * Copyright (C) 2010 Dell Inc.</span>", 
"<span class=\"comment\"> * by Narendra K &lt;Narendra_K@dell.com&gt;,</span>", 
"<span class=\"comment\"> * Jordan Hargrave &lt;Jordan_Hargrave@dell.com&gt;</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * SMBIOS defines type 41 for onboard pci devices. This code retrieves</span>", 
"<span class=\"comment\"> * the instance number and string from the type 41 record and exports</span>", 
"<span class=\"comment\"> * it to sysfs.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Please see http://linux.dell.com/wiki/index.php/Oss/libnetdevname for more</span>", 
"<span class=\"comment\"> * information.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#dmi\">dmi</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#sysfs\">sysfs</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#pci\">pci</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#pci_ids\">pci_ids</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#device\">device</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> \"pci.h\"", 
"", 
"enum <a class=\"id\" href=\"#smbios_attr_enum\">smbios_attr_enum</a> {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#SMBIOS_ATTR_NONE\">SMBIOS_ATTR_NONE</a> = 0,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#SMBIOS_ATTR_LABEL_SHOW\">SMBIOS_ATTR_LABEL_SHOW</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#SMBIOS_ATTR_INSTANCE_SHOW\">SMBIOS_ATTR_INSTANCE_SHOW</a>,", 
"};", 
"", 
"static <a class=\"id\" href=\"#mode_t\">mode_t</a>", 
"<a class=\"id\" href=\"#find_smbios_instance_string\">find_smbios_instance_string</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#pdev\">pdev</a>, char *<a class=\"id\" href=\"#buf\">buf</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    enum <a class=\"id\" href=\"#smbios_attr_enum\">smbios_attr_enum</a> <a class=\"id\" href=\"#attribute\">attribute</a>)", 
"{", 
"<span class=\"ts\"/>const struct <a class=\"id\" href=\"#dmi_device\">dmi_device</a> *<a class=\"id\" href=\"#dmi\">dmi</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#dmi_dev_onboard\">dmi_dev_onboard</a> *<a class=\"id\" href=\"#donboard\">donboard</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#bus\">bus</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#devfn\">devfn</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bus\">bus</a> = <a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#bus\">bus</a>-><a class=\"id\" href=\"#number\">number</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#devfn\">devfn</a> = <a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#devfn\">devfn</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dmi\">dmi</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>while ((<a class=\"id\" href=\"#dmi\">dmi</a> = <a class=\"id\" href=\"#dmi_find_device\">dmi_find_device</a>(<a class=\"id\" href=\"#DMI_DEV_TYPE_DEV_ONBOARD\">DMI_DEV_TYPE_DEV_ONBOARD</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#dmi\">dmi</a>)) != <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#donboard\">donboard</a> = <a class=\"id\" href=\"#dmi\">dmi</a>-><a class=\"id\" href=\"#device_data\">device_data</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#donboard\">donboard</a> && <a class=\"id\" href=\"#donboard\">donboard</a>-><a class=\"id\" href=\"#bus\">bus</a> == <a class=\"id\" href=\"#bus\">bus</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#donboard\">donboard</a>-><a class=\"id\" href=\"#devfn\">devfn</a> == <a class=\"id\" href=\"#devfn\">devfn</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#buf\">buf</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#attribute\">attribute</a> == <a class=\"id\" href=\"#SMBIOS_ATTR_INSTANCE_SHOW\">SMBIOS_ATTR_INSTANCE_SHOW</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#scnprintf\">scnprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#PAGE_SIZE\">PAGE_SIZE</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> \"%d\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#donboard\">donboard</a>-><a class=\"id\" href=\"#instance\">instance</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else if (<a class=\"id\" href=\"#attribute\">attribute</a> == <a class=\"id\" href=\"#SMBIOS_ATTR_LABEL_SHOW\">SMBIOS_ATTR_LABEL_SHOW</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#scnprintf\">scnprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#PAGE_SIZE\">PAGE_SIZE</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> \"%s\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#dmi\">dmi</a>-><a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#strlen\">strlen</a>(<a class=\"id\" href=\"#dmi\">dmi</a>-><a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#mode_t\">mode_t</a>", 
"<a class=\"id\" href=\"#smbios_instance_string_exist\">smbios_instance_string_exist</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>, struct <a class=\"id\" href=\"#attribute\">attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     int <a class=\"id\" href=\"#n\">n</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#pdev\">pdev</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#container_of\">container_of</a>(<a class=\"id\" href=\"#kobj\">kobj</a>, struct <a class=\"id\" href=\"#device\">device</a>, <a class=\"id\" href=\"#kobj\">kobj</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pdev\">pdev</a> = <a class=\"id\" href=\"#to_pci_dev\">to_pci_dev</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#find_smbios_instance_string\">find_smbios_instance_string</a>(<a class=\"id\" href=\"#pdev\">pdev</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#SMBIOS_ATTR_NONE\">SMBIOS_ATTR_NONE</a>) ?", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a> : 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a>", 
"<a class=\"id\" href=\"#smbioslabel_show\">smbioslabel_show</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#pdev\">pdev</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pdev\">pdev</a> = <a class=\"id\" href=\"#to_pci_dev\">to_pci_dev</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#find_smbios_instance_string\">find_smbios_instance_string</a>(<a class=\"id\" href=\"#pdev\">pdev</a>, <a class=\"id\" href=\"#buf\">buf</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#SMBIOS_ATTR_LABEL_SHOW\">SMBIOS_ATTR_LABEL_SHOW</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a>", 
"<a class=\"id\" href=\"#smbiosinstance_show\">smbiosinstance_show</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>    struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#pdev\">pdev</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pdev\">pdev</a> = <a class=\"id\" href=\"#to_pci_dev\">to_pci_dev</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#find_smbios_instance_string\">find_smbios_instance_string</a>(<a class=\"id\" href=\"#pdev\">pdev</a>, <a class=\"id\" href=\"#buf\">buf</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#SMBIOS_ATTR_INSTANCE_SHOW\">SMBIOS_ATTR_INSTANCE_SHOW</a>);", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> <a class=\"id\" href=\"#smbios_attr_label\">smbios_attr_label</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#attr\">attr</a> = {.<a class=\"id\" href=\"#name\">name</a> = \"label\", .<a class=\"id\" href=\"#mode\">mode</a> = 0444},", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#show\">show</a> = <a class=\"id\" href=\"#smbioslabel_show\">smbioslabel_show</a>,", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> <a class=\"id\" href=\"#smbios_attr_instance\">smbios_attr_instance</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#attr\">attr</a> = {.<a class=\"id\" href=\"#name\">name</a> = \"index\", .<a class=\"id\" href=\"#mode\">mode</a> = 0444},", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#show\">show</a> = <a class=\"id\" href=\"#smbiosinstance_show\">smbiosinstance_show</a>,", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#attribute\">attribute</a> *<a class=\"id\" href=\"#smbios_attributes\">smbios_attributes</a>[] = {", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#smbios_attr_label\">smbios_attr_label</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#smbios_attr_instance\">smbios_attr_instance</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#NULL\">NULL</a>,", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#attribute_group\">attribute_group</a> <a class=\"id\" href=\"#smbios_attr_group\">smbios_attr_group</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#attrs\">attrs</a> = <a class=\"id\" href=\"#smbios_attributes\">smbios_attributes</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#is_visible\">is_visible</a> = <a class=\"id\" href=\"#smbios_instance_string_exist\">smbios_instance_string_exist</a>,", 
"};", 
"", 
"static int", 
"<a class=\"id\" href=\"#pci_create_smbiosname_file\">pci_create_smbiosname_file</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#pdev\">pdev</a>)", 
"{", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#sysfs_create_group\">sysfs_create_group</a>(&amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#kobj\">kobj</a>, &amp;<a class=\"id\" href=\"#smbios_attr_group\">smbios_attr_group</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"}", 
"", 
"static void", 
"<a class=\"id\" href=\"#pci_remove_smbiosname_file\">pci_remove_smbiosname_file</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#pdev\">pdev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_remove_group\">sysfs_remove_group</a>(&amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#kobj\">kobj</a>, &amp;<a class=\"id\" href=\"#smbios_attr_group\">smbios_attr_group</a>);", 
"}", 
"", 
"void <a class=\"id\" href=\"#pci_create_firmware_label_files\">pci_create_firmware_label_files</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#pdev\">pdev</a>)", 
"{", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#pci_create_smbiosname_file\">pci_create_smbiosname_file</a>(<a class=\"id\" href=\"#pdev\">pdev</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>;", 
"}", 
"", 
"void <a class=\"id\" href=\"#pci_remove_firmware_label_files\">pci_remove_firmware_label_files</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#pdev\">pdev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_remove_smbiosname_file\">pci_remove_smbiosname_file</a>(<a class=\"id\" href=\"#pdev\">pdev</a>);", 
"}", 
];
xr_frag_insert('l/9c/70828523068408de5a0b4b9d2c262eeb59d674.xr', __xr_tmp);
