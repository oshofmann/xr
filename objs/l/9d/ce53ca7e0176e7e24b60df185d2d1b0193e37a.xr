var __xr_tmp = [
"<span class=\"comment\">/* -*- linux-c -*- ------------------------------------------------------- *</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *   Copyright (C) 1991, 1992 Linus Torvalds</span>", 
"<span class=\"comment\"> *   Copyright 2007 rPath, Inc. - All Rights Reserved</span>", 
"<span class=\"comment\"> *   Copyright 2009 Intel Corporation; author H. Peter Anvin</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *   This file is part of the Linux kernel, and is made available under</span>", 
"<span class=\"comment\"> *   the terms of the GNU General Public License version 2.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * ----------------------------------------------------------------------- */</span>", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Standard video BIOS modes</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * We have two options for this; silent and scanned.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> \"boot.h\"", 
"#<a class=\"id\" href=\"#include\">include</a> \"video.h\"", 
"", 
"static <a class=\"id\" href=\"#__videocard\">__videocard</a> <a class=\"id\" href=\"#video_bios\">video_bios</a>;", 
"", 
"<span class=\"comment\">/* Set a conventional BIOS mode */</span>", 
"static int <a class=\"id\" href=\"#set_bios_mode\">set_bios_mode</a>(<a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#mode\">mode</a>);", 
"", 
"static int <a class=\"id\" href=\"#bios_set_mode\">bios_set_mode</a>(struct <a class=\"id\" href=\"#mode_info\">mode_info</a> *<a class=\"id\" href=\"#mi\">mi</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#set_bios_mode\">set_bios_mode</a>(<a class=\"id\" href=\"#mi\">mi</a>-><a class=\"id\" href=\"#mode\">mode</a> - <a class=\"id\" href=\"#VIDEO_FIRST_BIOS\">VIDEO_FIRST_BIOS</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#set_bios_mode\">set_bios_mode</a>(<a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#mode\">mode</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#biosregs\">biosregs</a> <a class=\"id\" href=\"#ireg\">ireg</a>, <a class=\"id\" href=\"#oreg\">oreg</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#new_mode\">new_mode</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#initregs\">initregs</a>(&amp;<a class=\"id\" href=\"#ireg\">ireg</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ireg\">ireg</a>.<a class=\"id\" href=\"#al\">al</a> = <a class=\"id\" href=\"#mode\">mode</a>;<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* AH=0x00 Set Video Mode */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#intcall\">intcall</a>(0x10, &amp;<a class=\"id\" href=\"#ireg\">ireg</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ireg\">ireg</a>.<a class=\"id\" href=\"#ah\">ah</a> = 0x0f;<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Get Current Video Mode */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#intcall\">intcall</a>(0x10, &amp;<a class=\"id\" href=\"#ireg\">ireg</a>, &amp;<a class=\"id\" href=\"#oreg\">oreg</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#do_restore\">do_restore</a> = 1;<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Assume video contents were lost */</span>", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Not all BIOSes are clean with the top bit */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#new_mode\">new_mode</a> = <a class=\"id\" href=\"#oreg\">oreg</a>.<a class=\"id\" href=\"#al\">al</a> &amp; 0x7f;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#new_mode\">new_mode</a> == <a class=\"id\" href=\"#mode\">mode</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;<span class=\"ts\"/><span class=\"comment\">/* Mode change OK */</span>", 
"", 
"#<a class=\"id\" href=\"#ifndef\">ifndef</a> <a class=\"id\" href=\"#_WAKEUP\">_WAKEUP</a>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#new_mode\">new_mode</a> != <a class=\"id\" href=\"#boot_params\">boot_params</a>.<a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#orig_video_mode\">orig_video_mode</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Mode setting failed, but we didn't end up where we</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/>   started.  That's bad.  Try to revert to the original</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/>   video mode. */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ireg\">ireg</a>.<a class=\"id\" href=\"#ax\">ax</a> = <a class=\"id\" href=\"#boot_params\">boot_params</a>.<a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#orig_video_mode\">orig_video_mode</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#intcall\">intcall</a>(0x10, &amp;<a class=\"id\" href=\"#ireg\">ireg</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/>}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>return -1;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#bios_probe\">bios_probe</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#mode\">mode</a>;", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#_WAKEUP\">_WAKEUP</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#saved_mode\">saved_mode</a> = 0x03;", 
"#else", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#saved_mode\">saved_mode</a> = <a class=\"id\" href=\"#boot_params\">boot_params</a>.<a class=\"id\" href=\"#screen_info\">screen_info</a>.<a class=\"id\" href=\"#orig_video_mode\">orig_video_mode</a>;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#crtc\">crtc</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mode_info\">mode_info</a> *<a class=\"id\" href=\"#mi\">mi</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#nmodes\">nmodes</a> = 0;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#adapter\">adapter</a> != <a class=\"id\" href=\"#ADAPTER_EGA\">ADAPTER_EGA</a> && <a class=\"id\" href=\"#adapter\">adapter</a> != <a class=\"id\" href=\"#ADAPTER_VGA\">ADAPTER_VGA</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#set_fs\">set_fs</a>(0);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#crtc\">crtc</a> = <a class=\"id\" href=\"#vga_crtc\">vga_crtc</a>();", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#video_bios\">video_bios</a>.<a class=\"id\" href=\"#modes\">modes</a> = <a class=\"id\" href=\"#GET_HEAP\">GET_HEAP</a>(struct <a class=\"id\" href=\"#mode_info\">mode_info</a>, 0);", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#mode\">mode</a> = 0x14; <a class=\"id\" href=\"#mode\">mode</a> <= 0x7f; <a class=\"id\" href=\"#mode\">mode</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#heap_free\">heap_free</a>(sizeof(struct <a class=\"id\" href=\"#mode_info\">mode_info</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#mode_defined\">mode_defined</a>(<a class=\"id\" href=\"#VIDEO_FIRST_BIOS\">VIDEO_FIRST_BIOS</a>+<a class=\"id\" href=\"#mode\">mode</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#set_bios_mode\">set_bios_mode</a>(<a class=\"id\" href=\"#mode\">mode</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Try to verify that it's a text mode. */</span>", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Attribute Controller: make graphics controller disabled */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#in_idx\">in_idx</a>(0x3c0, 0x10) &amp; 0x01)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Graphics Controller: verify Alpha addressing enabled */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#in_idx\">in_idx</a>(0x3ce, 0x06) &amp; 0x01)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* CRTC cursor location low should be zero(?) */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#in_idx\">in_idx</a>(<a class=\"id\" href=\"#crtc\">crtc</a>, 0x0f))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mi\">mi</a> = <a class=\"id\" href=\"#GET_HEAP\">GET_HEAP</a>(struct <a class=\"id\" href=\"#mode_info\">mode_info</a>, 1);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mi\">mi</a>-><a class=\"id\" href=\"#mode\">mode</a> = <a class=\"id\" href=\"#VIDEO_FIRST_BIOS\">VIDEO_FIRST_BIOS</a>+<a class=\"id\" href=\"#mode\">mode</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mi\">mi</a>-><a class=\"id\" href=\"#depth\">depth</a> = 0;<span class=\"ts\"/><span class=\"comment\">/* text */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mi\">mi</a>-><a class=\"id\" href=\"#x\">x</a> = <a class=\"id\" href=\"#rdfs16\">rdfs16</a>(0x44a);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mi\">mi</a>-><a class=\"id\" href=\"#y\">y</a> = <a class=\"id\" href=\"#rdfs8\">rdfs8</a>(0x484)+1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#nmodes\">nmodes</a>++;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#set_bios_mode\">set_bios_mode</a>(<a class=\"id\" href=\"#saved_mode\">saved_mode</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#nmodes\">nmodes</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#__videocard\">__videocard</a> <a class=\"id\" href=\"#video_bios\">video_bios</a> =", 
"{", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#card_name\">card_name</a><span class=\"ts\"/>= \"BIOS\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#probe\">probe</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#bios_probe\">bios_probe</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#set_mode\">set_mode</a><span class=\"ts\"/>= <a class=\"id\" href=\"#bios_set_mode\">bios_set_mode</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#unsafe\">unsafe</a><span class=\"ts\"/><span class=\"ts\"/>= 1,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#xmode_first\">xmode_first</a><span class=\"ts\"/>= <a class=\"id\" href=\"#VIDEO_FIRST_BIOS\">VIDEO_FIRST_BIOS</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#xmode_n\">xmode_n</a><span class=\"ts\"/>= 0x80,", 
"};", 
];
xr_frag_insert('l/9d/ce53ca7e0176e7e24b60df185d2d1b0193e37a.xr', __xr_tmp);
