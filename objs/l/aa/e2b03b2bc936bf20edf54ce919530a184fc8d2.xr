var __xr_tmp = [
"<span class=\"comment\"> */</span>", 
"unsigned long <a class=\"id\" href=\"#restore_jump_address\">restore_jump_address</a>;", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Value of the cr3 register from before the hibernation (this value is passed</span>", 
"<span class=\"comment\"> * in the image header).</span>", 
"<span class=\"comment\"> */</span>", 
"unsigned long <a class=\"id\" href=\"#restore_cr3\">restore_cr3</a>;", 
"", 
"<a class=\"id\" href=\"#pgd_t\">pgd_t</a> *<a class=\"id\" href=\"#temp_level4_pgt\">temp_level4_pgt</a>;", 
"", 
"void *<a class=\"id\" href=\"#relocated_restore_code\">relocated_restore_code</a>;", 
"", 
"static int <a class=\"id\" href=\"#res_phys_pud_init\">res_phys_pud_init</a>(<a class=\"id\" href=\"#pud_t\">pud_t</a> *<a class=\"id\" href=\"#pud\">pud</a>, unsigned long <a class=\"id\" href=\"#address\">address</a>, unsigned long <a class=\"id\" href=\"#end\">end</a>)", 
"{", 
"<span class=\"ts\"/>long <a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#j\">j</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#i\">i</a> = <a class=\"id\" href=\"#pud_index\">pud_index</a>(<a class=\"id\" href=\"#address\">address</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pud\">pud</a> = <a class=\"id\" href=\"#pud\">pud</a> + <a class=\"id\" href=\"#i\">i</a>;", 
"<span class=\"ts\"/>for (; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#PTRS_PER_PUD\">PTRS_PER_PUD</a>; <a class=\"id\" href=\"#pud\">pud</a>++, <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#paddr\">paddr</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pmd_t\">pmd_t</a> *<a class=\"id\" href=\"#pmd\">pmd</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#paddr\">paddr</a> = <a class=\"id\" href=\"#address\">address</a> + <a class=\"id\" href=\"#i\">i</a>*<a class=\"id\" href=\"#PUD_SIZE\">PUD_SIZE</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#paddr\">paddr</a> >= <a class=\"id\" href=\"#end\">end</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pmd\">pmd</a> = (<a class=\"id\" href=\"#pmd_t\">pmd_t</a> *)<a class=\"id\" href=\"#get_safe_page\">get_safe_page</a>(<a class=\"id\" href=\"#GFP_ATOMIC\">GFP_ATOMIC</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#pmd\">pmd</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_pud\">set_pud</a>(<a class=\"id\" href=\"#pud\">pud</a>, <a class=\"id\" href=\"#__pud\">__pud</a>(<a class=\"id\" href=\"#__pa\">__pa</a>(<a class=\"id\" href=\"#pmd\">pmd</a>) | <a class=\"id\" href=\"#_KERNPG_TABLE\">_KERNPG_TABLE</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#j\">j</a> = 0; <a class=\"id\" href=\"#j\">j</a> &lt; <a class=\"id\" href=\"#PTRS_PER_PMD\">PTRS_PER_PMD</a>; <a class=\"id\" href=\"#pmd\">pmd</a>++, <a class=\"id\" href=\"#j\">j</a>++, <a class=\"id\" href=\"#paddr\">paddr</a> += <a class=\"id\" href=\"#PMD_SIZE\">PMD_SIZE</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#pe\">pe</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#paddr\">paddr</a> >= <a class=\"id\" href=\"#end\">end</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pe\">pe</a> = <a class=\"id\" href=\"#__PAGE_KERNEL_LARGE_EXEC\">__PAGE_KERNEL_LARGE_EXEC</a> | <a class=\"id\" href=\"#paddr\">paddr</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pe\">pe</a> &= <a class=\"id\" href=\"#__supported_pte_mask\">__supported_pte_mask</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_pmd\">set_pmd</a>(<a class=\"id\" href=\"#pmd\">pmd</a>, <a class=\"id\" href=\"#__pmd\">__pmd</a>(<a class=\"id\" href=\"#pe\">pe</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#set_up_temporary_mappings\">set_up_temporary_mappings</a>(void)", 
"{", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#start\">start</a>, <a class=\"id\" href=\"#end\">end</a>, <a class=\"id\" href=\"#next\">next</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#temp_level4_pgt\">temp_level4_pgt</a> = (<a class=\"id\" href=\"#pgd_t\">pgd_t</a> *)<a class=\"id\" href=\"#get_safe_page\">get_safe_page</a>(<a class=\"id\" href=\"#GFP_ATOMIC\">GFP_ATOMIC</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#temp_level4_pgt\">temp_level4_pgt</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* It is safe to reuse the original kernel mapping */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#set_pgd\">set_pgd</a>(<a class=\"id\" href=\"#temp_level4_pgt\">temp_level4_pgt</a> + <a class=\"id\" href=\"#pgd_index\">pgd_index</a>(<a class=\"id\" href=\"#__START_KERNEL_map\">__START_KERNEL_map</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#init_level4_pgt\">init_level4_pgt</a>[<a class=\"id\" href=\"#pgd_index\">pgd_index</a>(<a class=\"id\" href=\"#__START_KERNEL_map\">__START_KERNEL_map</a>)]);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Set up the direct mapping from scratch */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#start\">start</a> = (unsigned long)<a class=\"id\" href=\"#pfn_to_kaddr\">pfn_to_kaddr</a>(0);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#end\">end</a> = (unsigned long)<a class=\"id\" href=\"#pfn_to_kaddr\">pfn_to_kaddr</a>(<a class=\"id\" href=\"#max_pfn\">max_pfn</a>);", 
"", 
"<span class=\"ts\"/>for (; <a class=\"id\" href=\"#start\">start</a> &lt; <a class=\"id\" href=\"#end\">end</a>; <a class=\"id\" href=\"#start\">start</a> = <a class=\"id\" href=\"#next\">next</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pud_t\">pud_t</a> *<a class=\"id\" href=\"#pud\">pud</a> = (<a class=\"id\" href=\"#pud_t\">pud_t</a> *)<a class=\"id\" href=\"#get_safe_page\">get_safe_page</a>(<a class=\"id\" href=\"#GFP_ATOMIC\">GFP_ATOMIC</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#pud\">pud</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#next\">next</a> = <a class=\"id\" href=\"#start\">start</a> + <a class=\"id\" href=\"#PGDIR_SIZE\">PGDIR_SIZE</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#next\">next</a> &gt; <a class=\"id\" href=\"#end\">end</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#next\">next</a> = <a class=\"id\" href=\"#end\">end</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((<a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#res_phys_pud_init\">res_phys_pud_init</a>(<a class=\"id\" href=\"#pud\">pud</a>, <a class=\"id\" href=\"#__pa\">__pa</a>(<a class=\"id\" href=\"#start\">start</a>), <a class=\"id\" href=\"#__pa\">__pa</a>(<a class=\"id\" href=\"#next\">next</a>))))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_pgd\">set_pgd</a>(<a class=\"id\" href=\"#temp_level4_pgt\">temp_level4_pgt</a> + <a class=\"id\" href=\"#pgd_index\">pgd_index</a>(<a class=\"id\" href=\"#start\">start</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mk_kernel_pgd\">mk_kernel_pgd</a>(<a class=\"id\" href=\"#__pa\">__pa</a>(<a class=\"id\" href=\"#pud\">pud</a>)));", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"int <a class=\"id\" href=\"#swsusp_arch_resume\">swsusp_arch_resume</a>(void)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* We have got enough memory and from now on we cannot recover */</span>", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#set_up_temporary_mappings\">set_up_temporary_mappings</a>()))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#relocated_restore_code\">relocated_restore_code</a> = (void *)<a class=\"id\" href=\"#get_safe_page\">get_safe_page</a>(<a class=\"id\" href=\"#GFP_ATOMIC\">GFP_ATOMIC</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#relocated_restore_code\">relocated_restore_code</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>(<a class=\"id\" href=\"#relocated_restore_code\">relocated_restore_code</a>, &amp;<a class=\"id\" href=\"#core_restore_code\">core_restore_code</a>,", 
"<span class=\"ts\"/>       &amp;<a class=\"id\" href=\"#restore_registers\">restore_registers</a> - &amp;<a class=\"id\" href=\"#core_restore_code\">core_restore_code</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#restore_image\">restore_image</a>();", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>pfn_is_nosave - check if given pfn is in the 'nosave' section</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"int <a class=\"id\" href=\"#pfn_is_nosave\">pfn_is_nosave</a>(unsigned long <a class=\"id\" href=\"#pfn\">pfn</a>)", 
"{", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#nosave_begin_pfn\">nosave_begin_pfn</a> = <a class=\"id\" href=\"#__pa_symbol\">__pa_symbol</a>(&amp;<a class=\"id\" href=\"#__nosave_begin\">__nosave_begin</a>) >> <a class=\"id\" href=\"#PAGE_SHIFT\">PAGE_SHIFT</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#nosave_end_pfn\">nosave_end_pfn</a> = <a class=\"id\" href=\"#PAGE_ALIGN\">PAGE_ALIGN</a>(<a class=\"id\" href=\"#__pa_symbol\">__pa_symbol</a>(&amp;<a class=\"id\" href=\"#__nosave_end\">__nosave_end</a>)) >> <a class=\"id\" href=\"#PAGE_SHIFT\">PAGE_SHIFT</a>;", 
"<span class=\"ts\"/>return (<a class=\"id\" href=\"#pfn\">pfn</a> >= <a class=\"id\" href=\"#nosave_begin_pfn\">nosave_begin_pfn</a>) && (<a class=\"id\" href=\"#pfn\">pfn</a> &lt; <a class=\"id\" href=\"#nosave_end_pfn\">nosave_end_pfn</a>);", 
"}", 
"", 
"struct <a class=\"id\" href=\"#restore_data_record\">restore_data_record</a> {", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#jump_address\">jump_address</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#cr3\">cr3</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#magic\">magic</a>;", 
"};", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#RESTORE_MAGIC\">RESTORE_MAGIC</a><span class=\"ts\"/>0x0123456789ABCDEFUL", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>arch_hibernation_header_save - populate the architecture specific part</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/>of a hibernation image header</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@addr: address to save the data at</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#arch_hibernation_header_save\">arch_hibernation_header_save</a>(void *<a class=\"id\" href=\"#addr\">addr</a>, unsigned int <a class=\"id\" href=\"#max_size\">max_size</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#restore_data_record\">restore_data_record</a> *<a class=\"id\" href=\"#rdr\">rdr</a> = <a class=\"id\" href=\"#addr\">addr</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#max_size\">max_size</a> &lt; sizeof(struct <a class=\"id\" href=\"#restore_data_record\">restore_data_record</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EOVERFLOW\">EOVERFLOW</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rdr\">rdr</a>-><a class=\"id\" href=\"#jump_address\">jump_address</a> = <a class=\"id\" href=\"#restore_jump_address\">restore_jump_address</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rdr\">rdr</a>-><a class=\"id\" href=\"#cr3\">cr3</a> = <a class=\"id\" href=\"#restore_cr3\">restore_cr3</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rdr\">rdr</a>-><a class=\"id\" href=\"#magic\">magic</a> = <a class=\"id\" href=\"#RESTORE_MAGIC\">RESTORE_MAGIC</a>;", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>arch_hibernation_header_restore - read the architecture specific data</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/>from the hibernation image header</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@addr: address to read the data from</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#arch_hibernation_header_restore\">arch_hibernation_header_restore</a>(void *<a class=\"id\" href=\"#addr\">addr</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#restore_data_record\">restore_data_record</a> *<a class=\"id\" href=\"#rdr\">rdr</a> = <a class=\"id\" href=\"#addr\">addr</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#restore_jump_address\">restore_jump_address</a> = <a class=\"id\" href=\"#rdr\">rdr</a>-><a class=\"id\" href=\"#jump_address\">jump_address</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#restore_cr3\">restore_cr3</a> = <a class=\"id\" href=\"#rdr\">rdr</a>-><a class=\"id\" href=\"#cr3\">cr3</a>;", 
"<span class=\"ts\"/>return (<a class=\"id\" href=\"#rdr\">rdr</a>-><a class=\"id\" href=\"#magic\">magic</a> == <a class=\"id\" href=\"#RESTORE_MAGIC\">RESTORE_MAGIC</a>) ? 0 : -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"}", 
];
xr_frag_insert('l/aa/e2b03b2bc936bf20edf54ce919530a184fc8d2.xr', __xr_tmp);
