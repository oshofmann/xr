var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * probe.c - PCI detection and setup code</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kernel\">kernel</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#delay\">delay</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#init\">init</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#pci\">pci</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#slab\">slab</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#cpumask\">cpumask</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#pci\">pci</a>-<a class=\"id\" href=\"#aspm\">aspm</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> \"pci.h\"", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#CARDBUS_LATENCY_TIMER\">CARDBUS_LATENCY_TIMER</a><span class=\"ts\"/>176<span class=\"ts\"/><span class=\"comment\">/* secondary latency timer */</span>", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#CARDBUS_RESERVE_BUSNR\">CARDBUS_RESERVE_BUSNR</a><span class=\"ts\"/>3", 
"", 
"<span class=\"comment\">/* Ugh.  Need to stop exporting this to modules. */</span>", 
"<a class=\"id\" href=\"#LIST_HEAD\">LIST_HEAD</a>(<a class=\"id\" href=\"#pci_root_buses\">pci_root_buses</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#pci_root_buses\">pci_root_buses</a>);", 
"", 
"", 
"static int <a class=\"id\" href=\"#find_anything\">find_anything</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, void *<a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/>return 1;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Some device drivers need know if pci is initiated.</span>", 
"<span class=\"comment\"> * Basically, we think pci is not initiated when there</span>", 
"<span class=\"comment\"> * is no device to be found on the pci_bus_type.</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#no_pci_devices\">no_pci_devices</a>(void)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#no_devices\">no_devices</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#bus_find_device\">bus_find_device</a>(&amp;<a class=\"id\" href=\"#pci_bus_type\">pci_bus_type</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#find_anything\">find_anything</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#no_devices\">no_devices</a> = (<a class=\"id\" href=\"#dev\">dev</a> == <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#put_device\">put_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#no_devices\">no_devices</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#no_pci_devices\">no_pci_devices</a>);", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * PCI Bus Class Devices</span>", 
"<span class=\"comment\"> */</span>", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#pci_bus_show_cpuaffinity\">pci_bus_show_cpuaffinity</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#type\">type</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"<span class=\"ts\"/>const struct <a class=\"id\" href=\"#cpumask\">cpumask</a> *<a class=\"id\" href=\"#cpumask\">cpumask</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cpumask\">cpumask</a> = <a class=\"id\" href=\"#cpumask_of_pcibus\">cpumask_of_pcibus</a>(<a class=\"id\" href=\"#to_pci_bus\">to_pci_bus</a>(<a class=\"id\" href=\"#dev\">dev</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#type\">type</a>?", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cpulist_scnprintf\">cpulist_scnprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#PAGE_SIZE\">PAGE_SIZE</a>-2, <a class=\"id\" href=\"#cpumask\">cpumask</a>) :", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cpumask_scnprintf\">cpumask_scnprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#PAGE_SIZE\">PAGE_SIZE</a>-2, <a class=\"id\" href=\"#cpumask\">cpumask</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#buf\">buf</a>[<a class=\"id\" href=\"#ret\">ret</a>++] = '\\n';", 
"<span class=\"ts\"/><a class=\"id\" href=\"#buf\">buf</a>[<a class=\"id\" href=\"#ret\">ret</a>] = '\\0';", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#inline\">inline</a> <a class=\"id\" href=\"#pci_bus_show_cpumaskaffinity\">pci_bus_show_cpumaskaffinity</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#pci_bus_show_cpuaffinity\">pci_bus_show_cpuaffinity</a>(<a class=\"id\" href=\"#dev\">dev</a>, 0, <a class=\"id\" href=\"#attr\">attr</a>, <a class=\"id\" href=\"#buf\">buf</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#inline\">inline</a> <a class=\"id\" href=\"#pci_bus_show_cpulistaffinity\">pci_bus_show_cpulistaffinity</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#pci_bus_show_cpuaffinity\">pci_bus_show_cpuaffinity</a>(<a class=\"id\" href=\"#dev\">dev</a>, 1, <a class=\"id\" href=\"#attr\">attr</a>, <a class=\"id\" href=\"#buf\">buf</a>);", 
"}", 
"", 
"<a class=\"id\" href=\"#DEVICE_ATTR\">DEVICE_ATTR</a>(<a class=\"id\" href=\"#cpuaffinity\">cpuaffinity</a>,     <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>, <a class=\"id\" href=\"#pci_bus_show_cpumaskaffinity\">pci_bus_show_cpumaskaffinity</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<a class=\"id\" href=\"#DEVICE_ATTR\">DEVICE_ATTR</a>(<a class=\"id\" href=\"#cpulistaffinity\">cpulistaffinity</a>, <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>, <a class=\"id\" href=\"#pci_bus_show_cpulistaffinity\">pci_bus_show_cpulistaffinity</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * PCI Bus Class</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#release_pcibus_dev\">release_pcibus_dev</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_bus\">pci_bus</a> *<a class=\"id\" href=\"#pci_bus\">pci_bus</a> = <a class=\"id\" href=\"#to_pci_bus\">to_pci_bus</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pci_bus\">pci_bus</a>-><a class=\"id\" href=\"#bridge\">bridge</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#put_device\">put_device</a>(<a class=\"id\" href=\"#pci_bus\">pci_bus</a>-><a class=\"id\" href=\"#bridge\">bridge</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_bus_remove_resources\">pci_bus_remove_resources</a>(<a class=\"id\" href=\"#pci_bus\">pci_bus</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#pci_bus\">pci_bus</a>);", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#class\">class</a> <a class=\"id\" href=\"#pcibus_class\">pcibus_class</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a><span class=\"ts\"/><span class=\"ts\"/>= \"pci_bus\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#dev_release\">dev_release</a><span class=\"ts\"/>= &amp;<a class=\"id\" href=\"#release_pcibus_dev\">release_pcibus_dev</a>,", 
"};", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#pcibus_class_init\">pcibus_class_init</a>(void)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#class_register\">class_register</a>(&amp;<a class=\"id\" href=\"#pcibus_class\">pcibus_class</a>);", 
"}", 
"<a class=\"id\" href=\"#postcore_initcall\">postcore_initcall</a>(<a class=\"id\" href=\"#pcibus_class_init\">pcibus_class_init</a>);", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Translate the low bits of the PCI base</span>", 
"<span class=\"comment\"> * to the resource type</span>", 
"<span class=\"comment\"> */</span>", 
"static <a class=\"id\" href=\"#inline\">inline</a> unsigned int <a class=\"id\" href=\"#pci_calc_resource_flags\">pci_calc_resource_flags</a>(unsigned int <a class=\"id\" href=\"#flags\">flags</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#PCI_BASE_ADDRESS_SPACE_IO\">PCI_BASE_ADDRESS_SPACE_IO</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#IORESOURCE_IO\">IORESOURCE_IO</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#PCI_BASE_ADDRESS_MEM_PREFETCH\">PCI_BASE_ADDRESS_MEM_PREFETCH</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#IORESOURCE_MEM\">IORESOURCE_MEM</a> | <a class=\"id\" href=\"#IORESOURCE_PREFETCH\">IORESOURCE_PREFETCH</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#IORESOURCE_MEM\">IORESOURCE_MEM</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#pci_size\">pci_size</a>(<a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#base\">base</a>, <a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#maxbase\">maxbase</a>, <a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#mask\">mask</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#size\">size</a> = <a class=\"id\" href=\"#mask\">mask</a> &amp; <a class=\"id\" href=\"#maxbase\">maxbase</a>;<span class=\"ts\"/><span class=\"comment\">/* Find the significant bits */</span>", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#size\">size</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Get the lowest of them to find the decode size, and</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   from that the extent.  */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#size\">size</a> = (<a class=\"id\" href=\"#size\">size</a> &amp; ~(<a class=\"id\" href=\"#size\">size</a>-1)) - 1;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* base == maxbase can be valid only if the BAR has</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   already been programmed with all 1s.  */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#base\">base</a> == <a class=\"id\" href=\"#maxbase\">maxbase</a> && ((<a class=\"id\" href=\"#base\">base</a> | <a class=\"id\" href=\"#size\">size</a>) &amp; <a class=\"id\" href=\"#mask\">mask</a>) != <a class=\"id\" href=\"#mask\">mask</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#size\">size</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> enum <a class=\"id\" href=\"#pci_bar_type\">pci_bar_type</a> <a class=\"id\" href=\"#decode_bar\">decode_bar</a>(struct <a class=\"id\" href=\"#resource\">resource</a> *<a class=\"id\" href=\"#res\">res</a>, <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#bar\">bar</a>)", 
"{", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#bar\">bar</a> &amp; <a class=\"id\" href=\"#PCI_BASE_ADDRESS_SPACE\">PCI_BASE_ADDRESS_SPACE</a>) == <a class=\"id\" href=\"#PCI_BASE_ADDRESS_SPACE_IO\">PCI_BASE_ADDRESS_SPACE_IO</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#res\">res</a>-><a class=\"id\" href=\"#flags\">flags</a> = <a class=\"id\" href=\"#bar\">bar</a> &amp; ~<a class=\"id\" href=\"#PCI_BASE_ADDRESS_IO_MASK\">PCI_BASE_ADDRESS_IO_MASK</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#pci_bar_io\">pci_bar_io</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#res\">res</a>-><a class=\"id\" href=\"#flags\">flags</a> = <a class=\"id\" href=\"#bar\">bar</a> &amp; ~<a class=\"id\" href=\"#PCI_BASE_ADDRESS_MEM_MASK\">PCI_BASE_ADDRESS_MEM_MASK</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#res\">res</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#PCI_BASE_ADDRESS_MEM_TYPE_64\">PCI_BASE_ADDRESS_MEM_TYPE_64</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#pci_bar_mem64\">pci_bar_mem64</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#pci_bar_mem32\">pci_bar_mem32</a>;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * pci_read_base - read a PCI BAR</span>", 
"<span class=\"comment\"> * @dev: the PCI device</span>", 
"<span class=\"comment\"> * @type: type of the BAR</span>", 
"<span class=\"comment\"> * @res: resource buffer to be filled in</span>", 
"<span class=\"comment\"> * @pos: BAR position in the config space</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Returns 1 if the BAR is 64-bit, or 0 if 32-bit.</span>", 
"<span class=\"comment\"> */</span>", 
];
xr_frag_insert('l/ad/c1347ab665f2dd67e6f28be8a019bc93932a88.xr', __xr_tmp);
