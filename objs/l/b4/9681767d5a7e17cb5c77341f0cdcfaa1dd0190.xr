var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Netburst Perfomance Events (P4, old Xeon)</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *  Copyright (C) 2010 Parallels, Inc., Cyrill Gorcunov &lt;gorcunov@openvz.org&gt;</span>", 
"<span class=\"comment\"> *  Copyright (C) 2010 Intel Corporation, Lin Ming &lt;ming.m.lin@intel.com&gt;</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *  For licencing details see kernel-base/COPYING</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_CPU_SUP_INTEL\">CONFIG_CPU_SUP_INTEL</a>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#perf_event_p4\">perf_event_p4</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#P4_CNTR_LIMIT\">P4_CNTR_LIMIT</a> 3", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * array indices: 0,1 - HT threads, used with HT enabled cpu</span>", 
"<span class=\"comment\"> */</span>", 
"struct <a class=\"id\" href=\"#p4_event_bind\">p4_event_bind</a> {", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#opcode\">opcode</a>;<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Event code and ESCR selector */</span>", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#escr_msr\">escr_msr</a>[2];<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* ESCR MSR for this event */</span>", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#cntr\">cntr</a>[2][<a class=\"id\" href=\"#P4_CNTR_LIMIT\">P4_CNTR_LIMIT</a>];<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* counter index (offset), -1 on abscence */</span>", 
"};", 
"", 
"struct <a class=\"id\" href=\"#p4_pebs_bind\">p4_pebs_bind</a> {", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#metric_pebs\">metric_pebs</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#metric_vert\">metric_vert</a>;", 
"};", 
"", 
"<span class=\"comment\">/* it sets P4_PEBS_ENABLE_UOP_TAG as well */</span>", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#P4_GEN_PEBS_BIND\">P4_GEN_PEBS_BIND</a>(<a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#pebs\">pebs</a>, <a class=\"id\" href=\"#vert\">vert</a>)<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_PEBS_METRIC__\">P4_PEBS_METRIC__</a>##<a class=\"id\" href=\"#name\">name</a>] = {<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#metric_pebs\">metric_pebs</a> = <a class=\"id\" href=\"#pebs\">pebs</a> | <a class=\"id\" href=\"#P4_PEBS_ENABLE_UOP_TAG\">P4_PEBS_ENABLE_UOP_TAG</a>,<span class=\"ts\"/>\\", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#metric_vert\">metric_vert</a> = <a class=\"id\" href=\"#vert\">vert</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * note we have P4_PEBS_ENABLE_UOP_TAG always set here</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * it's needed for mapping P4_PEBS_CONFIG_METRIC_MASK bits of</span>", 
"<span class=\"comment\"> * event configuration to find out which values are to be</span>", 
"<span class=\"comment\"> * written into MSR_IA32_PEBS_ENABLE and MSR_P4_PEBS_MATRIX_VERT</span>", 
"<span class=\"comment\"> * resgisters</span>", 
"<span class=\"comment\"> */</span>", 
"static struct <a class=\"id\" href=\"#p4_pebs_bind\">p4_pebs_bind</a> <a class=\"id\" href=\"#p4_pebs_bind_map\">p4_pebs_bind_map</a>[] = {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_GEN_PEBS_BIND\">P4_GEN_PEBS_BIND</a>(1<a class=\"id\" href=\"#stl_cache_load_miss_retired\">stl_cache_load_miss_retired</a>,<span class=\"ts\"/>0x0000001, 0x0000001),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_GEN_PEBS_BIND\">P4_GEN_PEBS_BIND</a>(2<a class=\"id\" href=\"#ndl_cache_load_miss_retired\">ndl_cache_load_miss_retired</a>,<span class=\"ts\"/>0x0000002, 0x0000001),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_GEN_PEBS_BIND\">P4_GEN_PEBS_BIND</a>(<a class=\"id\" href=\"#dtlb_load_miss_retired\">dtlb_load_miss_retired</a>,<span class=\"ts\"/>0x0000004, 0x0000001),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_GEN_PEBS_BIND\">P4_GEN_PEBS_BIND</a>(<a class=\"id\" href=\"#dtlb_store_miss_retired\">dtlb_store_miss_retired</a>,<span class=\"ts\"/>0x0000004, 0x0000002),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_GEN_PEBS_BIND\">P4_GEN_PEBS_BIND</a>(<a class=\"id\" href=\"#dtlb_all_miss_retired\">dtlb_all_miss_retired</a>,<span class=\"ts\"/><span class=\"ts\"/>0x0000004, 0x0000003),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_GEN_PEBS_BIND\">P4_GEN_PEBS_BIND</a>(<a class=\"id\" href=\"#tagged_mispred_branch\">tagged_mispred_branch</a>,<span class=\"ts\"/><span class=\"ts\"/>0x0018000, 0x0000010),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_GEN_PEBS_BIND\">P4_GEN_PEBS_BIND</a>(<a class=\"id\" href=\"#mob_load_replay_retired\">mob_load_replay_retired</a>,<span class=\"ts\"/>0x0000200, 0x0000001),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_GEN_PEBS_BIND\">P4_GEN_PEBS_BIND</a>(<a class=\"id\" href=\"#split_load_retired\">split_load_retired</a>,<span class=\"ts\"/><span class=\"ts\"/>0x0000400, 0x0000001),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_GEN_PEBS_BIND\">P4_GEN_PEBS_BIND</a>(<a class=\"id\" href=\"#split_store_retired\">split_store_retired</a>,<span class=\"ts\"/><span class=\"ts\"/>0x0000400, 0x0000002),", 
"};", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Note that we don't use CCCR1 here, there is an</span>", 
"<span class=\"comment\"> * exception for P4_BSQ_ALLOCATION but we just have</span>", 
"<span class=\"comment\"> * no workaround</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * consider this binding as resources which particular</span>", 
"<span class=\"comment\"> * event may borrow, it doesn't contain EventMask,</span>", 
"<span class=\"comment\"> * Tags and friends -- they are left to a caller</span>", 
"<span class=\"comment\"> */</span>", 
"static struct <a class=\"id\" href=\"#p4_event_bind\">p4_event_bind</a> <a class=\"id\" href=\"#p4_event_bind_map\">p4_event_bind_map</a>[] = {", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_TC_DELIVER_MODE\">P4_EVENT_TC_DELIVER_MODE</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_TC_DELIVER_MODE\">P4_EVENT_TC_DELIVER_MODE</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_TC_ESCR0\">MSR_P4_TC_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_TC_ESCR1\">MSR_P4_TC_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {4, 5, -1}, {6, 7, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_BPU_FETCH_REQUEST\">P4_EVENT_BPU_FETCH_REQUEST</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_BPU_FETCH_REQUEST\">P4_EVENT_BPU_FETCH_REQUEST</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_BPU_ESCR0\">MSR_P4_BPU_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_BPU_ESCR1\">MSR_P4_BPU_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {0, -1, -1}, {2, -1, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_ITLB_REFERENCE\">P4_EVENT_ITLB_REFERENCE</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_ITLB_REFERENCE\">P4_EVENT_ITLB_REFERENCE</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_ITLB_ESCR0\">MSR_P4_ITLB_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_ITLB_ESCR1\">MSR_P4_ITLB_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {0, -1, -1}, {2, -1, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_MEMORY_CANCEL\">P4_EVENT_MEMORY_CANCEL</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_MEMORY_CANCEL\">P4_EVENT_MEMORY_CANCEL</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_DAC_ESCR0\">MSR_P4_DAC_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_DAC_ESCR1\">MSR_P4_DAC_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {8, 9, -1}, {10, 11, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_MEMORY_COMPLETE\">P4_EVENT_MEMORY_COMPLETE</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_MEMORY_COMPLETE\">P4_EVENT_MEMORY_COMPLETE</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_SAAT_ESCR0\">MSR_P4_SAAT_ESCR0</a> , <a class=\"id\" href=\"#MSR_P4_SAAT_ESCR1\">MSR_P4_SAAT_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {8, 9, -1}, {10, 11, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_LOAD_PORT_REPLAY\">P4_EVENT_LOAD_PORT_REPLAY</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_LOAD_PORT_REPLAY\">P4_EVENT_LOAD_PORT_REPLAY</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_SAAT_ESCR0\">MSR_P4_SAAT_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_SAAT_ESCR1\">MSR_P4_SAAT_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {8, 9, -1}, {10, 11, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_STORE_PORT_REPLAY\">P4_EVENT_STORE_PORT_REPLAY</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_STORE_PORT_REPLAY\">P4_EVENT_STORE_PORT_REPLAY</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_SAAT_ESCR0\">MSR_P4_SAAT_ESCR0</a> ,  <a class=\"id\" href=\"#MSR_P4_SAAT_ESCR1\">MSR_P4_SAAT_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {8, 9, -1}, {10, 11, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_MOB_LOAD_REPLAY\">P4_EVENT_MOB_LOAD_REPLAY</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_MOB_LOAD_REPLAY\">P4_EVENT_MOB_LOAD_REPLAY</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_MOB_ESCR0\">MSR_P4_MOB_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_MOB_ESCR1\">MSR_P4_MOB_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {0, -1, -1}, {2, -1, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_PAGE_WALK_TYPE\">P4_EVENT_PAGE_WALK_TYPE</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_PAGE_WALK_TYPE\">P4_EVENT_PAGE_WALK_TYPE</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_PMH_ESCR0\">MSR_P4_PMH_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_PMH_ESCR1\">MSR_P4_PMH_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {0, -1, -1}, {2, -1, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_BSQ_CACHE_REFERENCE\">P4_EVENT_BSQ_CACHE_REFERENCE</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_BSQ_CACHE_REFERENCE\">P4_EVENT_BSQ_CACHE_REFERENCE</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_BSU_ESCR0\">MSR_P4_BSU_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_BSU_ESCR1\">MSR_P4_BSU_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {0, -1, -1}, {2, -1, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_IOQ_ALLOCATION\">P4_EVENT_IOQ_ALLOCATION</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_IOQ_ALLOCATION\">P4_EVENT_IOQ_ALLOCATION</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_FSB_ESCR0\">MSR_P4_FSB_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_FSB_ESCR1\">MSR_P4_FSB_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {0, -1, -1}, {2, -1, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_IOQ_ACTIVE_ENTRIES\">P4_EVENT_IOQ_ACTIVE_ENTRIES</a>] = {<span class=\"ts\"/><span class=\"comment\">/* shared ESCR */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_IOQ_ACTIVE_ENTRIES\">P4_EVENT_IOQ_ACTIVE_ENTRIES</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_FSB_ESCR1\">MSR_P4_FSB_ESCR1</a>,  <a class=\"id\" href=\"#MSR_P4_FSB_ESCR1\">MSR_P4_FSB_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {2, -1, -1}, {3, -1, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_FSB_DATA_ACTIVITY\">P4_EVENT_FSB_DATA_ACTIVITY</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_FSB_DATA_ACTIVITY\">P4_EVENT_FSB_DATA_ACTIVITY</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_FSB_ESCR0\">MSR_P4_FSB_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_FSB_ESCR1\">MSR_P4_FSB_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {0, -1, -1}, {2, -1, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_BSQ_ALLOCATION\">P4_EVENT_BSQ_ALLOCATION</a>] = {<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* shared ESCR, broken CCCR1 */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_BSQ_ALLOCATION\">P4_EVENT_BSQ_ALLOCATION</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_BSU_ESCR0\">MSR_P4_BSU_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_BSU_ESCR0\">MSR_P4_BSU_ESCR0</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {0, -1, -1}, {1, -1, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_BSQ_ACTIVE_ENTRIES\">P4_EVENT_BSQ_ACTIVE_ENTRIES</a>] = {<span class=\"ts\"/><span class=\"comment\">/* shared ESCR */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_BSQ_ACTIVE_ENTRIES\">P4_EVENT_BSQ_ACTIVE_ENTRIES</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_BSU_ESCR1\">MSR_P4_BSU_ESCR1</a> , <a class=\"id\" href=\"#MSR_P4_BSU_ESCR1\">MSR_P4_BSU_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {2, -1, -1}, {3, -1, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_SSE_INPUT_ASSIST\">P4_EVENT_SSE_INPUT_ASSIST</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_SSE_INPUT_ASSIST\">P4_EVENT_SSE_INPUT_ASSIST</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_FIRM_ESCR0\">MSR_P4_FIRM_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_FIRM_ESCR1\">MSR_P4_FIRM_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {8, 9, -1}, {10, 11, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_PACKED_SP_UOP\">P4_EVENT_PACKED_SP_UOP</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_PACKED_SP_UOP\">P4_EVENT_PACKED_SP_UOP</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_FIRM_ESCR0\">MSR_P4_FIRM_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_FIRM_ESCR1\">MSR_P4_FIRM_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {8, 9, -1}, {10, 11, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_PACKED_DP_UOP\">P4_EVENT_PACKED_DP_UOP</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_PACKED_DP_UOP\">P4_EVENT_PACKED_DP_UOP</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_FIRM_ESCR0\">MSR_P4_FIRM_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_FIRM_ESCR1\">MSR_P4_FIRM_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {8, 9, -1}, {10, 11, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_SCALAR_SP_UOP\">P4_EVENT_SCALAR_SP_UOP</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_SCALAR_SP_UOP\">P4_EVENT_SCALAR_SP_UOP</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_FIRM_ESCR0\">MSR_P4_FIRM_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_FIRM_ESCR1\">MSR_P4_FIRM_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {8, 9, -1}, {10, 11, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_SCALAR_DP_UOP\">P4_EVENT_SCALAR_DP_UOP</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_SCALAR_DP_UOP\">P4_EVENT_SCALAR_DP_UOP</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_FIRM_ESCR0\">MSR_P4_FIRM_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_FIRM_ESCR1\">MSR_P4_FIRM_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {8, 9, -1}, {10, 11, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_64BIT_MMX_UOP\">P4_EVENT_64BIT_MMX_UOP</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_64BIT_MMX_UOP\">P4_EVENT_64BIT_MMX_UOP</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_FIRM_ESCR0\">MSR_P4_FIRM_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_FIRM_ESCR1\">MSR_P4_FIRM_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {8, 9, -1}, {10, 11, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_128BIT_MMX_UOP\">P4_EVENT_128BIT_MMX_UOP</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_128BIT_MMX_UOP\">P4_EVENT_128BIT_MMX_UOP</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_FIRM_ESCR0\">MSR_P4_FIRM_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_FIRM_ESCR1\">MSR_P4_FIRM_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {8, 9, -1}, {10, 11, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_X87_FP_UOP\">P4_EVENT_X87_FP_UOP</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_X87_FP_UOP\">P4_EVENT_X87_FP_UOP</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_FIRM_ESCR0\">MSR_P4_FIRM_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_FIRM_ESCR1\">MSR_P4_FIRM_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {8, 9, -1}, {10, 11, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_TC_MISC\">P4_EVENT_TC_MISC</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_TC_MISC\">P4_EVENT_TC_MISC</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_TC_ESCR0\">MSR_P4_TC_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_TC_ESCR1\">MSR_P4_TC_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {4, 5, -1}, {6, 7, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_GLOBAL_POWER_EVENTS\">P4_EVENT_GLOBAL_POWER_EVENTS</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_GLOBAL_POWER_EVENTS\">P4_EVENT_GLOBAL_POWER_EVENTS</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_FSB_ESCR0\">MSR_P4_FSB_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_FSB_ESCR1\">MSR_P4_FSB_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {0, -1, -1}, {2, -1, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_TC_MS_XFER\">P4_EVENT_TC_MS_XFER</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_TC_MS_XFER\">P4_EVENT_TC_MS_XFER</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_MS_ESCR0\">MSR_P4_MS_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_MS_ESCR1\">MSR_P4_MS_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {4, 5, -1}, {6, 7, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_UOP_QUEUE_WRITES\">P4_EVENT_UOP_QUEUE_WRITES</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_UOP_QUEUE_WRITES\">P4_EVENT_UOP_QUEUE_WRITES</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_MS_ESCR0\">MSR_P4_MS_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_MS_ESCR1\">MSR_P4_MS_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {4, 5, -1}, {6, 7, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_RETIRED_MISPRED_BRANCH_TYPE\">P4_EVENT_RETIRED_MISPRED_BRANCH_TYPE</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_RETIRED_MISPRED_BRANCH_TYPE\">P4_EVENT_RETIRED_MISPRED_BRANCH_TYPE</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_TBPU_ESCR0\">MSR_P4_TBPU_ESCR0</a> , <a class=\"id\" href=\"#MSR_P4_TBPU_ESCR0\">MSR_P4_TBPU_ESCR0</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {4, 5, -1}, {6, 7, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_RETIRED_BRANCH_TYPE\">P4_EVENT_RETIRED_BRANCH_TYPE</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_RETIRED_BRANCH_TYPE\">P4_EVENT_RETIRED_BRANCH_TYPE</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_TBPU_ESCR0\">MSR_P4_TBPU_ESCR0</a> , <a class=\"id\" href=\"#MSR_P4_TBPU_ESCR1\">MSR_P4_TBPU_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {4, 5, -1}, {6, 7, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_RESOURCE_STALL\">P4_EVENT_RESOURCE_STALL</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_RESOURCE_STALL\">P4_EVENT_RESOURCE_STALL</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_ALF_ESCR0\">MSR_P4_ALF_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_ALF_ESCR1\">MSR_P4_ALF_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {12, 13, 16}, {14, 15, 17} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_WC_BUFFER\">P4_EVENT_WC_BUFFER</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_WC_BUFFER\">P4_EVENT_WC_BUFFER</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_DAC_ESCR0\">MSR_P4_DAC_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_DAC_ESCR1\">MSR_P4_DAC_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {8, 9, -1}, {10, 11, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_B2B_CYCLES\">P4_EVENT_B2B_CYCLES</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_B2B_CYCLES\">P4_EVENT_B2B_CYCLES</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_FSB_ESCR0\">MSR_P4_FSB_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_FSB_ESCR1\">MSR_P4_FSB_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {0, -1, -1}, {2, -1, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_BNR\">P4_EVENT_BNR</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_BNR\">P4_EVENT_BNR</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_FSB_ESCR0\">MSR_P4_FSB_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_FSB_ESCR1\">MSR_P4_FSB_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {0, -1, -1}, {2, -1, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_SNOOP\">P4_EVENT_SNOOP</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_SNOOP\">P4_EVENT_SNOOP</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_FSB_ESCR0\">MSR_P4_FSB_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_FSB_ESCR1\">MSR_P4_FSB_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {0, -1, -1}, {2, -1, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_RESPONSE\">P4_EVENT_RESPONSE</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_RESPONSE\">P4_EVENT_RESPONSE</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_FSB_ESCR0\">MSR_P4_FSB_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_FSB_ESCR1\">MSR_P4_FSB_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {0, -1, -1}, {2, -1, -1} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_FRONT_END_EVENT\">P4_EVENT_FRONT_END_EVENT</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_FRONT_END_EVENT\">P4_EVENT_FRONT_END_EVENT</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_CRU_ESCR2\">MSR_P4_CRU_ESCR2</a>, <a class=\"id\" href=\"#MSR_P4_CRU_ESCR3\">MSR_P4_CRU_ESCR3</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {12, 13, 16}, {14, 15, 17} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_EXECUTION_EVENT\">P4_EVENT_EXECUTION_EVENT</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_EXECUTION_EVENT\">P4_EVENT_EXECUTION_EVENT</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_CRU_ESCR2\">MSR_P4_CRU_ESCR2</a>, <a class=\"id\" href=\"#MSR_P4_CRU_ESCR3\">MSR_P4_CRU_ESCR3</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {12, 13, 16}, {14, 15, 17} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_REPLAY_EVENT\">P4_EVENT_REPLAY_EVENT</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_REPLAY_EVENT\">P4_EVENT_REPLAY_EVENT</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_CRU_ESCR2\">MSR_P4_CRU_ESCR2</a>, <a class=\"id\" href=\"#MSR_P4_CRU_ESCR3\">MSR_P4_CRU_ESCR3</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {12, 13, 16}, {14, 15, 17} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_INSTR_RETIRED\">P4_EVENT_INSTR_RETIRED</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_INSTR_RETIRED\">P4_EVENT_INSTR_RETIRED</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_CRU_ESCR0\">MSR_P4_CRU_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_CRU_ESCR1\">MSR_P4_CRU_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {12, 13, 16}, {14, 15, 17} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_UOPS_RETIRED\">P4_EVENT_UOPS_RETIRED</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_UOPS_RETIRED\">P4_EVENT_UOPS_RETIRED</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_CRU_ESCR0\">MSR_P4_CRU_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_CRU_ESCR1\">MSR_P4_CRU_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {12, 13, 16}, {14, 15, 17} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_UOP_TYPE\">P4_EVENT_UOP_TYPE</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_UOP_TYPE\">P4_EVENT_UOP_TYPE</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_RAT_ESCR0\">MSR_P4_RAT_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_RAT_ESCR1\">MSR_P4_RAT_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {12, 13, 16}, {14, 15, 17} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_BRANCH_RETIRED\">P4_EVENT_BRANCH_RETIRED</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_BRANCH_RETIRED\">P4_EVENT_BRANCH_RETIRED</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_CRU_ESCR2\">MSR_P4_CRU_ESCR2</a>, <a class=\"id\" href=\"#MSR_P4_CRU_ESCR3\">MSR_P4_CRU_ESCR3</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {12, 13, 16}, {14, 15, 17} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_MISPRED_BRANCH_RETIRED\">P4_EVENT_MISPRED_BRANCH_RETIRED</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_MISPRED_BRANCH_RETIRED\">P4_EVENT_MISPRED_BRANCH_RETIRED</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_CRU_ESCR0\">MSR_P4_CRU_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_CRU_ESCR1\">MSR_P4_CRU_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {12, 13, 16}, {14, 15, 17} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_X87_ASSIST\">P4_EVENT_X87_ASSIST</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_X87_ASSIST\">P4_EVENT_X87_ASSIST</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_CRU_ESCR2\">MSR_P4_CRU_ESCR2</a>, <a class=\"id\" href=\"#MSR_P4_CRU_ESCR3\">MSR_P4_CRU_ESCR3</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {12, 13, 16}, {14, 15, 17} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_MACHINE_CLEAR\">P4_EVENT_MACHINE_CLEAR</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_MACHINE_CLEAR\">P4_EVENT_MACHINE_CLEAR</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_CRU_ESCR2\">MSR_P4_CRU_ESCR2</a>, <a class=\"id\" href=\"#MSR_P4_CRU_ESCR3\">MSR_P4_CRU_ESCR3</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {12, 13, 16}, {14, 15, 17} },", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_EVENT_INSTR_COMPLETED\">P4_EVENT_INSTR_COMPLETED</a>] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#opcode\">opcode</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#P4_EVENT_INSTR_COMPLETED\">P4_EVENT_INSTR_COMPLETED</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#escr_msr\">escr_msr</a><span class=\"ts\"/>= { <a class=\"id\" href=\"#MSR_P4_CRU_ESCR0\">MSR_P4_CRU_ESCR0</a>, <a class=\"id\" href=\"#MSR_P4_CRU_ESCR1\">MSR_P4_CRU_ESCR1</a> },", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#cntr\">cntr</a><span class=\"ts\"/><span class=\"ts\"/>= { {12, 13, 16}, {14, 15, 17} },", 
"<span class=\"ts\"/>},", 
"};", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#P4_GEN_CACHE_EVENT\">P4_GEN_CACHE_EVENT</a>(<a class=\"id\" href=\"#event\">event</a>, <a class=\"id\" href=\"#bit\">bit</a>, <a class=\"id\" href=\"#metric\">metric</a>)<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  \\", 
"<span class=\"ts\"/><a class=\"id\" href=\"#p4_config_pack_escr\">p4_config_pack_escr</a>(<a class=\"id\" href=\"#P4_ESCR_EVENT\">P4_ESCR_EVENT</a>(<a class=\"id\" href=\"#event\">event</a>)<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>| \\", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#P4_ESCR_EMASK_BIT\">P4_ESCR_EMASK_BIT</a>(<a class=\"id\" href=\"#event\">event</a>, <a class=\"id\" href=\"#bit\">bit</a>))<span class=\"ts\"/><span class=\"ts\"/>| \\", 
"<span class=\"ts\"/><a class=\"id\" href=\"#p4_config_pack_cccr\">p4_config_pack_cccr</a>(<a class=\"id\" href=\"#metric\">metric</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>| \\", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#P4_CCCR_ESEL\">P4_CCCR_ESEL</a>(<a class=\"id\" href=\"#P4_OPCODE_ESEL\">P4_OPCODE_ESEL</a>(<a class=\"id\" href=\"#P4_OPCODE\">P4_OPCODE</a>(<a class=\"id\" href=\"#event\">event</a>))))", 
"", 
"static <a class=\"id\" href=\"#__initconst\">__initconst</a> const <a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#p4_hw_cache_event_ids\">p4_hw_cache_event_ids</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>[<a class=\"id\" href=\"#PERF_COUNT_HW_CACHE_MAX\">PERF_COUNT_HW_CACHE_MAX</a>]", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>[<a class=\"id\" href=\"#PERF_COUNT_HW_CACHE_OP_MAX\">PERF_COUNT_HW_CACHE_OP_MAX</a>]", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>[<a class=\"id\" href=\"#PERF_COUNT_HW_CACHE_RESULT_MAX\">PERF_COUNT_HW_CACHE_RESULT_MAX</a>] =", 
"{", 
" [ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#L1D\">L1D</a> ) ] = {", 
"<span class=\"ts\"/>[ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#OP_READ\">OP_READ</a>) ] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>[ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#RESULT_ACCESS\">RESULT_ACCESS</a>) ] = 0x0,", 
"<span class=\"ts\"/><span class=\"ts\"/>[ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#RESULT_MISS\">RESULT_MISS</a>)   ] = <a class=\"id\" href=\"#P4_GEN_CACHE_EVENT\">P4_GEN_CACHE_EVENT</a>(<a class=\"id\" href=\"#P4_EVENT_REPLAY_EVENT\">P4_EVENT_REPLAY_EVENT</a>, <a class=\"id\" href=\"#NBOGUS\">NBOGUS</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_PEBS_METRIC__1stl_cache_load_miss_retired\">P4_PEBS_METRIC__1stl_cache_load_miss_retired</a>),", 
"<span class=\"ts\"/>},", 
" },", 
" [ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#LL\">LL</a>  ) ] = {", 
"<span class=\"ts\"/>[ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#OP_READ\">OP_READ</a>) ] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>[ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#RESULT_ACCESS\">RESULT_ACCESS</a>) ] = 0x0,", 
"<span class=\"ts\"/><span class=\"ts\"/>[ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#RESULT_MISS\">RESULT_MISS</a>)   ] = <a class=\"id\" href=\"#P4_GEN_CACHE_EVENT\">P4_GEN_CACHE_EVENT</a>(<a class=\"id\" href=\"#P4_EVENT_REPLAY_EVENT\">P4_EVENT_REPLAY_EVENT</a>, <a class=\"id\" href=\"#NBOGUS\">NBOGUS</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_PEBS_METRIC__2ndl_cache_load_miss_retired\">P4_PEBS_METRIC__2ndl_cache_load_miss_retired</a>),", 
"<span class=\"ts\"/>},", 
"},", 
" [ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#DTLB\">DTLB</a>) ] = {", 
"<span class=\"ts\"/>[ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#OP_READ\">OP_READ</a>) ] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>[ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#RESULT_ACCESS\">RESULT_ACCESS</a>) ] = 0x0,", 
"<span class=\"ts\"/><span class=\"ts\"/>[ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#RESULT_MISS\">RESULT_MISS</a>)   ] = <a class=\"id\" href=\"#P4_GEN_CACHE_EVENT\">P4_GEN_CACHE_EVENT</a>(<a class=\"id\" href=\"#P4_EVENT_REPLAY_EVENT\">P4_EVENT_REPLAY_EVENT</a>, <a class=\"id\" href=\"#NBOGUS\">NBOGUS</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_PEBS_METRIC__dtlb_load_miss_retired\">P4_PEBS_METRIC__dtlb_load_miss_retired</a>),", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#OP_WRITE\">OP_WRITE</a>) ] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>[ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#RESULT_ACCESS\">RESULT_ACCESS</a>) ] = 0x0,", 
"<span class=\"ts\"/><span class=\"ts\"/>[ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#RESULT_MISS\">RESULT_MISS</a>)   ] = <a class=\"id\" href=\"#P4_GEN_CACHE_EVENT\">P4_GEN_CACHE_EVENT</a>(<a class=\"id\" href=\"#P4_EVENT_REPLAY_EVENT\">P4_EVENT_REPLAY_EVENT</a>, <a class=\"id\" href=\"#NBOGUS\">NBOGUS</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_PEBS_METRIC__dtlb_store_miss_retired\">P4_PEBS_METRIC__dtlb_store_miss_retired</a>),", 
"<span class=\"ts\"/>},", 
" },", 
" [ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#ITLB\">ITLB</a>) ] = {", 
"<span class=\"ts\"/>[ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#OP_READ\">OP_READ</a>) ] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>[ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#RESULT_ACCESS\">RESULT_ACCESS</a>) ] = <a class=\"id\" href=\"#P4_GEN_CACHE_EVENT\">P4_GEN_CACHE_EVENT</a>(<a class=\"id\" href=\"#P4_EVENT_ITLB_REFERENCE\">P4_EVENT_ITLB_REFERENCE</a>, <a class=\"id\" href=\"#HIT\">HIT</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_PEBS_METRIC__none\">P4_PEBS_METRIC__none</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>[ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#RESULT_MISS\">RESULT_MISS</a>)   ] = <a class=\"id\" href=\"#P4_GEN_CACHE_EVENT\">P4_GEN_CACHE_EVENT</a>(<a class=\"id\" href=\"#P4_EVENT_ITLB_REFERENCE\">P4_EVENT_ITLB_REFERENCE</a>, <a class=\"id\" href=\"#MISS\">MISS</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_PEBS_METRIC__none\">P4_PEBS_METRIC__none</a>),", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#OP_WRITE\">OP_WRITE</a>) ] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>[ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#RESULT_ACCESS\">RESULT_ACCESS</a>) ] = -1,", 
"<span class=\"ts\"/><span class=\"ts\"/>[ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#RESULT_MISS\">RESULT_MISS</a>)   ] = -1,", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>[ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#OP_PREFETCH\">OP_PREFETCH</a>) ] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>[ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#RESULT_ACCESS\">RESULT_ACCESS</a>) ] = -1,", 
"<span class=\"ts\"/><span class=\"ts\"/>[ <a class=\"id\" href=\"#C\">C</a>(<a class=\"id\" href=\"#RESULT_MISS\">RESULT_MISS</a>)   ] = -1,", 
"<span class=\"ts\"/>},", 
" },", 
"};", 
"", 
"static <a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#p4_general_events\">p4_general_events</a>[<a class=\"id\" href=\"#PERF_COUNT_HW_MAX\">PERF_COUNT_HW_MAX</a>] = {", 
"  <span class=\"comment\">/* non-halted CPU clocks */</span>", 
"  [<a class=\"id\" href=\"#PERF_COUNT_HW_CPU_CYCLES\">PERF_COUNT_HW_CPU_CYCLES</a>] =", 
"<span class=\"ts\"/><a class=\"id\" href=\"#p4_config_pack_escr\">p4_config_pack_escr</a>(<a class=\"id\" href=\"#P4_ESCR_EVENT\">P4_ESCR_EVENT</a>(<a class=\"id\" href=\"#P4_EVENT_GLOBAL_POWER_EVENTS\">P4_EVENT_GLOBAL_POWER_EVENTS</a>)<span class=\"ts\"/><span class=\"ts\"/>|", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_EMASK_BIT\">P4_ESCR_EMASK_BIT</a>(<a class=\"id\" href=\"#P4_EVENT_GLOBAL_POWER_EVENTS\">P4_EVENT_GLOBAL_POWER_EVENTS</a>, <a class=\"id\" href=\"#RUNNING\">RUNNING</a>)),", 
"", 
"  <span class=\"comment\">/*</span>", 
"<span class=\"comment\">   * retired instructions</span>", 
"<span class=\"comment\">   * in a sake of simplicity we don't use the FSB tagging</span>", 
"<span class=\"comment\">   */</span>", 
"  [<a class=\"id\" href=\"#PERF_COUNT_HW_INSTRUCTIONS\">PERF_COUNT_HW_INSTRUCTIONS</a>] =", 
"<span class=\"ts\"/><a class=\"id\" href=\"#p4_config_pack_escr\">p4_config_pack_escr</a>(<a class=\"id\" href=\"#P4_ESCR_EVENT\">P4_ESCR_EVENT</a>(<a class=\"id\" href=\"#P4_EVENT_INSTR_RETIRED\">P4_EVENT_INSTR_RETIRED</a>)<span class=\"ts\"/><span class=\"ts\"/>|", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_EMASK_BIT\">P4_ESCR_EMASK_BIT</a>(<a class=\"id\" href=\"#P4_EVENT_INSTR_RETIRED\">P4_EVENT_INSTR_RETIRED</a>, <a class=\"id\" href=\"#NBOGUSNTAG\">NBOGUSNTAG</a>)<span class=\"ts\"/><span class=\"ts\"/>|", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_EMASK_BIT\">P4_ESCR_EMASK_BIT</a>(<a class=\"id\" href=\"#P4_EVENT_INSTR_RETIRED\">P4_EVENT_INSTR_RETIRED</a>, <a class=\"id\" href=\"#BOGUSNTAG\">BOGUSNTAG</a>)),", 
"", 
"  <span class=\"comment\">/* cache hits */</span>", 
"  [<a class=\"id\" href=\"#PERF_COUNT_HW_CACHE_REFERENCES\">PERF_COUNT_HW_CACHE_REFERENCES</a>] =", 
"<span class=\"ts\"/><a class=\"id\" href=\"#p4_config_pack_escr\">p4_config_pack_escr</a>(<a class=\"id\" href=\"#P4_ESCR_EVENT\">P4_ESCR_EVENT</a>(<a class=\"id\" href=\"#P4_EVENT_BSQ_CACHE_REFERENCE\">P4_EVENT_BSQ_CACHE_REFERENCE</a>)<span class=\"ts\"/><span class=\"ts\"/>|", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_EMASK_BIT\">P4_ESCR_EMASK_BIT</a>(<a class=\"id\" href=\"#P4_EVENT_BSQ_CACHE_REFERENCE\">P4_EVENT_BSQ_CACHE_REFERENCE</a>, <a class=\"id\" href=\"#RD_2ndL_HITS\">RD_2ndL_HITS</a>)<span class=\"ts\"/>|", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_EMASK_BIT\">P4_ESCR_EMASK_BIT</a>(<a class=\"id\" href=\"#P4_EVENT_BSQ_CACHE_REFERENCE\">P4_EVENT_BSQ_CACHE_REFERENCE</a>, <a class=\"id\" href=\"#RD_2ndL_HITE\">RD_2ndL_HITE</a>)<span class=\"ts\"/>|", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_EMASK_BIT\">P4_ESCR_EMASK_BIT</a>(<a class=\"id\" href=\"#P4_EVENT_BSQ_CACHE_REFERENCE\">P4_EVENT_BSQ_CACHE_REFERENCE</a>, <a class=\"id\" href=\"#RD_2ndL_HITM\">RD_2ndL_HITM</a>)<span class=\"ts\"/>|", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_EMASK_BIT\">P4_ESCR_EMASK_BIT</a>(<a class=\"id\" href=\"#P4_EVENT_BSQ_CACHE_REFERENCE\">P4_EVENT_BSQ_CACHE_REFERENCE</a>, <a class=\"id\" href=\"#RD_3rdL_HITS\">RD_3rdL_HITS</a>)<span class=\"ts\"/>|", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_EMASK_BIT\">P4_ESCR_EMASK_BIT</a>(<a class=\"id\" href=\"#P4_EVENT_BSQ_CACHE_REFERENCE\">P4_EVENT_BSQ_CACHE_REFERENCE</a>, <a class=\"id\" href=\"#RD_3rdL_HITE\">RD_3rdL_HITE</a>)<span class=\"ts\"/>|", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_EMASK_BIT\">P4_ESCR_EMASK_BIT</a>(<a class=\"id\" href=\"#P4_EVENT_BSQ_CACHE_REFERENCE\">P4_EVENT_BSQ_CACHE_REFERENCE</a>, <a class=\"id\" href=\"#RD_3rdL_HITM\">RD_3rdL_HITM</a>)),", 
"", 
"  <span class=\"comment\">/* cache misses */</span>", 
"  [<a class=\"id\" href=\"#PERF_COUNT_HW_CACHE_MISSES\">PERF_COUNT_HW_CACHE_MISSES</a>] =", 
"<span class=\"ts\"/><a class=\"id\" href=\"#p4_config_pack_escr\">p4_config_pack_escr</a>(<a class=\"id\" href=\"#P4_ESCR_EVENT\">P4_ESCR_EVENT</a>(<a class=\"id\" href=\"#P4_EVENT_BSQ_CACHE_REFERENCE\">P4_EVENT_BSQ_CACHE_REFERENCE</a>)<span class=\"ts\"/><span class=\"ts\"/>|", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_EMASK_BIT\">P4_ESCR_EMASK_BIT</a>(<a class=\"id\" href=\"#P4_EVENT_BSQ_CACHE_REFERENCE\">P4_EVENT_BSQ_CACHE_REFERENCE</a>, <a class=\"id\" href=\"#RD_2ndL_MISS\">RD_2ndL_MISS</a>)<span class=\"ts\"/>|", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_EMASK_BIT\">P4_ESCR_EMASK_BIT</a>(<a class=\"id\" href=\"#P4_EVENT_BSQ_CACHE_REFERENCE\">P4_EVENT_BSQ_CACHE_REFERENCE</a>, <a class=\"id\" href=\"#RD_3rdL_MISS\">RD_3rdL_MISS</a>)<span class=\"ts\"/>|", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_EMASK_BIT\">P4_ESCR_EMASK_BIT</a>(<a class=\"id\" href=\"#P4_EVENT_BSQ_CACHE_REFERENCE\">P4_EVENT_BSQ_CACHE_REFERENCE</a>, <a class=\"id\" href=\"#WR_2ndL_MISS\">WR_2ndL_MISS</a>)),", 
"", 
"  <span class=\"comment\">/* branch instructions retired */</span>", 
"  [<a class=\"id\" href=\"#PERF_COUNT_HW_BRANCH_INSTRUCTIONS\">PERF_COUNT_HW_BRANCH_INSTRUCTIONS</a>] =", 
"<span class=\"ts\"/><a class=\"id\" href=\"#p4_config_pack_escr\">p4_config_pack_escr</a>(<a class=\"id\" href=\"#P4_ESCR_EVENT\">P4_ESCR_EVENT</a>(<a class=\"id\" href=\"#P4_EVENT_RETIRED_BRANCH_TYPE\">P4_EVENT_RETIRED_BRANCH_TYPE</a>)<span class=\"ts\"/><span class=\"ts\"/>|", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_EMASK_BIT\">P4_ESCR_EMASK_BIT</a>(<a class=\"id\" href=\"#P4_EVENT_RETIRED_BRANCH_TYPE\">P4_EVENT_RETIRED_BRANCH_TYPE</a>, <a class=\"id\" href=\"#CONDITIONAL\">CONDITIONAL</a>)<span class=\"ts\"/>|", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_EMASK_BIT\">P4_ESCR_EMASK_BIT</a>(<a class=\"id\" href=\"#P4_EVENT_RETIRED_BRANCH_TYPE\">P4_EVENT_RETIRED_BRANCH_TYPE</a>, <a class=\"id\" href=\"#CALL\">CALL</a>)<span class=\"ts\"/><span class=\"ts\"/>|", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_EMASK_BIT\">P4_ESCR_EMASK_BIT</a>(<a class=\"id\" href=\"#P4_EVENT_RETIRED_BRANCH_TYPE\">P4_EVENT_RETIRED_BRANCH_TYPE</a>, <a class=\"id\" href=\"#RETURN\">RETURN</a>)<span class=\"ts\"/><span class=\"ts\"/>|", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_EMASK_BIT\">P4_ESCR_EMASK_BIT</a>(<a class=\"id\" href=\"#P4_EVENT_RETIRED_BRANCH_TYPE\">P4_EVENT_RETIRED_BRANCH_TYPE</a>, <a class=\"id\" href=\"#INDIRECT\">INDIRECT</a>)),", 
"", 
"  <span class=\"comment\">/* mispredicted branches retired */</span>", 
"  [<a class=\"id\" href=\"#PERF_COUNT_HW_BRANCH_MISSES\">PERF_COUNT_HW_BRANCH_MISSES</a>]<span class=\"ts\"/>=", 
"<span class=\"ts\"/><a class=\"id\" href=\"#p4_config_pack_escr\">p4_config_pack_escr</a>(<a class=\"id\" href=\"#P4_ESCR_EVENT\">P4_ESCR_EVENT</a>(<a class=\"id\" href=\"#P4_EVENT_MISPRED_BRANCH_RETIRED\">P4_EVENT_MISPRED_BRANCH_RETIRED</a>)<span class=\"ts\"/>|", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_EMASK_BIT\">P4_ESCR_EMASK_BIT</a>(<a class=\"id\" href=\"#P4_EVENT_MISPRED_BRANCH_RETIRED\">P4_EVENT_MISPRED_BRANCH_RETIRED</a>, <a class=\"id\" href=\"#NBOGUS\">NBOGUS</a>)),", 
"", 
"  <span class=\"comment\">/* bus ready clocks (cpu is driving #DRDY_DRV\\#DRDY_OWN):  */</span>", 
"  [<a class=\"id\" href=\"#PERF_COUNT_HW_BUS_CYCLES\">PERF_COUNT_HW_BUS_CYCLES</a>] =", 
"<span class=\"ts\"/><a class=\"id\" href=\"#p4_config_pack_escr\">p4_config_pack_escr</a>(<a class=\"id\" href=\"#P4_ESCR_EVENT\">P4_ESCR_EVENT</a>(<a class=\"id\" href=\"#P4_EVENT_FSB_DATA_ACTIVITY\">P4_EVENT_FSB_DATA_ACTIVITY</a>)<span class=\"ts\"/><span class=\"ts\"/>|", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_EMASK_BIT\">P4_ESCR_EMASK_BIT</a>(<a class=\"id\" href=\"#P4_EVENT_FSB_DATA_ACTIVITY\">P4_EVENT_FSB_DATA_ACTIVITY</a>, <a class=\"id\" href=\"#DRDY_DRV\">DRDY_DRV</a>)<span class=\"ts\"/><span class=\"ts\"/>|", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_EMASK_BIT\">P4_ESCR_EMASK_BIT</a>(<a class=\"id\" href=\"#P4_EVENT_FSB_DATA_ACTIVITY\">P4_EVENT_FSB_DATA_ACTIVITY</a>, <a class=\"id\" href=\"#DRDY_OWN\">DRDY_OWN</a>))<span class=\"ts\"/>|", 
"<span class=\"ts\"/><a class=\"id\" href=\"#p4_config_pack_cccr\">p4_config_pack_cccr</a>(<a class=\"id\" href=\"#P4_CCCR_EDGE\">P4_CCCR_EDGE</a> | <a class=\"id\" href=\"#P4_CCCR_COMPARE\">P4_CCCR_COMPARE</a>),", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#p4_event_bind\">p4_event_bind</a> *<a class=\"id\" href=\"#p4_config_get_bind\">p4_config_get_bind</a>(<a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#config\">config</a>)", 
"{", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#evnt\">evnt</a> = <a class=\"id\" href=\"#p4_config_unpack_event\">p4_config_unpack_event</a>(<a class=\"id\" href=\"#config\">config</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#p4_event_bind\">p4_event_bind</a> *<a class=\"id\" href=\"#bind\">bind</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#evnt\">evnt</a> &lt; <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#p4_event_bind_map\">p4_event_bind_map</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bind\">bind</a> = &amp;<a class=\"id\" href=\"#p4_event_bind_map\">p4_event_bind_map</a>[<a class=\"id\" href=\"#evnt\">evnt</a>];", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#bind\">bind</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#p4_pmu_event_map\">p4_pmu_event_map</a>(int <a class=\"id\" href=\"#hw_event\">hw_event</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#p4_event_bind\">p4_event_bind</a> *<a class=\"id\" href=\"#bind\">bind</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#esel\">esel</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#config\">config</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#config\">config</a> = <a class=\"id\" href=\"#p4_general_events\">p4_general_events</a>[<a class=\"id\" href=\"#hw_event\">hw_event</a>];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bind\">bind</a> = <a class=\"id\" href=\"#p4_config_get_bind\">p4_config_get_bind</a>(<a class=\"id\" href=\"#config\">config</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#esel\">esel</a> = <a class=\"id\" href=\"#P4_OPCODE_ESEL\">P4_OPCODE_ESEL</a>(<a class=\"id\" href=\"#bind\">bind</a>-><a class=\"id\" href=\"#opcode\">opcode</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#config\">config</a> |= <a class=\"id\" href=\"#p4_config_pack_cccr\">p4_config_pack_cccr</a>(<a class=\"id\" href=\"#P4_CCCR_ESEL\">P4_CCCR_ESEL</a>(<a class=\"id\" href=\"#esel\">esel</a>));", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#config\">config</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#p4_validate_raw_event\">p4_validate_raw_event</a>(struct <a class=\"id\" href=\"#perf_event\">perf_event</a> *<a class=\"id\" href=\"#event\">event</a>)", 
"{", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#v\">v</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* user data may have out-of-bound event index */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#v\">v</a> = <a class=\"id\" href=\"#p4_config_unpack_event\">p4_config_unpack_event</a>(<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#attr\">attr</a>.<a class=\"id\" href=\"#config\">config</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#v\">v</a> >= <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#p4_event_bind_map\">p4_event_bind_map</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_warning\">pr_warning</a>(\"P4 PMU: Unknown event code: %d\\n\", <a class=\"id\" href=\"#v\">v</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * it may have some screwed PEBS bits</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#p4_config_pebs_has\">p4_config_pebs_has</a>(<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#attr\">attr</a>.<a class=\"id\" href=\"#config\">config</a>, <a class=\"id\" href=\"#P4_PEBS_CONFIG_ENABLE\">P4_PEBS_CONFIG_ENABLE</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_warning\">pr_warning</a>(\"P4 PMU: PEBS are not supported yet\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#v\">v</a> = <a class=\"id\" href=\"#p4_config_unpack_metric\">p4_config_unpack_metric</a>(<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#attr\">attr</a>.<a class=\"id\" href=\"#config\">config</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#v\">v</a> >= <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#p4_pebs_bind_map\">p4_pebs_bind_map</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_warning\">pr_warning</a>(\"P4 PMU: Unknown metric code: %d\\n\", <a class=\"id\" href=\"#v\">v</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#p4_hw_config\">p4_hw_config</a>(struct <a class=\"id\" href=\"#perf_event\">perf_event</a> *<a class=\"id\" href=\"#event\">event</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#cpu\">cpu</a> = <a class=\"id\" href=\"#get_cpu\">get_cpu</a>();", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rc\">rc</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#escr\">escr</a>, <a class=\"id\" href=\"#cccr\">cccr</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * the reason we use cpu that early is that: if we get scheduled</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * first time on the same cpu -- we will not need swap thread</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * specific flags in config (and will save some cpu cycles)</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cccr\">cccr</a> = <a class=\"id\" href=\"#p4_default_cccr_conf\">p4_default_cccr_conf</a>(<a class=\"id\" href=\"#cpu\">cpu</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#escr\">escr</a> = <a class=\"id\" href=\"#p4_default_escr_conf\">p4_default_escr_conf</a>(<a class=\"id\" href=\"#cpu\">cpu</a>, <a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#attr\">attr</a>.<a class=\"id\" href=\"#exclude_kernel\">exclude_kernel</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#attr\">attr</a>.<a class=\"id\" href=\"#exclude_user\">exclude_user</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#hw\">hw</a>.<a class=\"id\" href=\"#config\">config</a> = <a class=\"id\" href=\"#p4_config_pack_escr\">p4_config_pack_escr</a>(<a class=\"id\" href=\"#escr\">escr</a>) |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#p4_config_pack_cccr\">p4_config_pack_cccr</a>(<a class=\"id\" href=\"#cccr\">cccr</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#p4_ht_active\">p4_ht_active</a>() && <a class=\"id\" href=\"#p4_ht_thread\">p4_ht_thread</a>(<a class=\"id\" href=\"#cpu\">cpu</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#hw\">hw</a>.<a class=\"id\" href=\"#config\">config</a> = <a class=\"id\" href=\"#p4_set_ht_bit\">p4_set_ht_bit</a>(<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#hw\">hw</a>.<a class=\"id\" href=\"#config\">config</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#attr\">attr</a>.<a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#PERF_TYPE_RAW\">PERF_TYPE_RAW</a>) {", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#p4_validate_raw_event\">p4_validate_raw_event</a>(<a class=\"id\" href=\"#event\">event</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * We don't control raw events so it's up to the caller</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * to pass sane values (and we don't count the thread number</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * on HT machine but allow HT-compatible specifics to be</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * passed on)</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * Note that for RAW events we allow user to use P4_CCCR_RESERVED</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * bits since we keep additional info here (for cache events and etc)</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * XXX: HT wide things should check perf_paranoid_cpu() &amp;&amp;</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> *      CAP_SYS_ADMIN</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#hw\">hw</a>.<a class=\"id\" href=\"#config\">config</a> |= <a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#attr\">attr</a>.<a class=\"id\" href=\"#config\">config</a> &amp;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#p4_config_pack_escr\">p4_config_pack_escr</a>(<a class=\"id\" href=\"#P4_ESCR_MASK_HT\">P4_ESCR_MASK_HT</a>) |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#p4_config_pack_cccr\">p4_config_pack_cccr</a>(<a class=\"id\" href=\"#P4_CCCR_MASK_HT\">P4_CCCR_MASK_HT</a> | <a class=\"id\" href=\"#P4_CCCR_RESERVED\">P4_CCCR_RESERVED</a>));", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#hw\">hw</a>.<a class=\"id\" href=\"#config\">config</a> &= ~<a class=\"id\" href=\"#P4_CCCR_FORCE_OVF\">P4_CCCR_FORCE_OVF</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#x86_setup_perfctr\">x86_setup_perfctr</a>(<a class=\"id\" href=\"#event\">event</a>);", 
"<a class=\"id\" href=\"#out\">out</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#put_cpu\">put_cpu</a>();", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#rc\">rc</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> int <a class=\"id\" href=\"#p4_pmu_clear_cccr_ovf\">p4_pmu_clear_cccr_ovf</a>(struct <a class=\"id\" href=\"#hw_perf_event\">hw_perf_event</a> *<a class=\"id\" href=\"#hwc\">hwc</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#overflow\">overflow</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#low\">low</a>, <a class=\"id\" href=\"#high\">high</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rdmsr\">rdmsr</a>(<a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config_base\">config_base</a> + <a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#idx\">idx</a>, <a class=\"id\" href=\"#low\">low</a>, <a class=\"id\" href=\"#high\">high</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* we need to check high bit for unflagged overflows */</span>", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#low\">low</a> &amp; <a class=\"id\" href=\"#P4_CCCR_OVF\">P4_CCCR_OVF</a>) || !(<a class=\"id\" href=\"#high\">high</a> &amp; (1 << 31))) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#overflow\">overflow</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>(void)<a class=\"id\" href=\"#checking_wrmsrl\">checking_wrmsrl</a>(<a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config_base\">config_base</a> + <a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#idx\">idx</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>((<a class=\"id\" href=\"#u64\">u64</a>)<a class=\"id\" href=\"#low\">low</a>) &amp; ~<a class=\"id\" href=\"#P4_CCCR_OVF\">P4_CCCR_OVF</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#overflow\">overflow</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#p4_pmu_disable_pebs\">p4_pmu_disable_pebs</a>(void)", 
"{", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * FIXME</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * It's still allowed that two threads setup same cache</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * events so we can't simply clear metrics until we knew</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * noone is depending on us, so we need kind of counter</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * for \"ReplayEvent\" users.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * What is more complex -- RAW events, if user (for some</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * reason) will pass some cache event metric with improper</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * event opcode -- it's fine from hardware point of view</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * but completely nonsence from \"meaning\" of such action.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * So at moment let leave metrics turned on forever -- it's</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * ok for now but need to be revisited!</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * (void)checking_wrmsrl(MSR_IA32_PEBS_ENABLE, (u64)0);</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * (void)checking_wrmsrl(MSR_P4_PEBS_MATRIX_VERT, (u64)0);</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> void <a class=\"id\" href=\"#p4_pmu_disable_event\">p4_pmu_disable_event</a>(struct <a class=\"id\" href=\"#perf_event\">perf_event</a> *<a class=\"id\" href=\"#event\">event</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#hw_perf_event\">hw_perf_event</a> *<a class=\"id\" href=\"#hwc\">hwc</a> = &amp;<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#hw\">hw</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * If event gets disabled while counter is in overflowed</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * state we need to clear P4_CCCR_OVF, otherwise interrupt get</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * asserted again and again</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>(void)<a class=\"id\" href=\"#checking_wrmsrl\">checking_wrmsrl</a>(<a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config_base\">config_base</a> + <a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#idx\">idx</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#u64\">u64</a>)(<a class=\"id\" href=\"#p4_config_unpack_cccr\">p4_config_unpack_cccr</a>(<a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config\">config</a>)) &amp;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>~<a class=\"id\" href=\"#P4_CCCR_ENABLE\">P4_CCCR_ENABLE</a> &amp; ~<a class=\"id\" href=\"#P4_CCCR_OVF\">P4_CCCR_OVF</a> &amp; ~<a class=\"id\" href=\"#P4_CCCR_RESERVED\">P4_CCCR_RESERVED</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#p4_pmu_disable_all\">p4_pmu_disable_all</a>(void)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cpu_hw_events\">cpu_hw_events</a> *<a class=\"id\" href=\"#cpuc\">cpuc</a> = &amp;<a class=\"id\" href=\"#__get_cpu_var\">__get_cpu_var</a>(<a class=\"id\" href=\"#cpu_hw_events\">cpu_hw_events</a>);", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#idx\">idx</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#idx\">idx</a> = 0; <a class=\"id\" href=\"#idx\">idx</a> &lt; <a class=\"id\" href=\"#x86_pmu\">x86_pmu</a>.<a class=\"id\" href=\"#num_counters\">num_counters</a>; <a class=\"id\" href=\"#idx\">idx</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#perf_event\">perf_event</a> *<a class=\"id\" href=\"#event\">event</a> = <a class=\"id\" href=\"#cpuc\">cpuc</a>-><a class=\"id\" href=\"#events\">events</a>[<a class=\"id\" href=\"#idx\">idx</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#idx\">idx</a>, <a class=\"id\" href=\"#cpuc\">cpuc</a>-><a class=\"id\" href=\"#active_mask\">active_mask</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p4_pmu_disable_event\">p4_pmu_disable_event</a>(<a class=\"id\" href=\"#event\">event</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#p4_pmu_disable_pebs\">p4_pmu_disable_pebs</a>();", 
"}", 
"", 
"<span class=\"comment\">/* configuration must be valid */</span>", 
"static void <a class=\"id\" href=\"#p4_pmu_enable_pebs\">p4_pmu_enable_pebs</a>(<a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#config\">config</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#p4_pebs_bind\">p4_pebs_bind</a> *<a class=\"id\" href=\"#bind\">bind</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#idx\">idx</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#BUILD_BUG_ON\">BUILD_BUG_ON</a>(<a class=\"id\" href=\"#P4_PEBS_METRIC__max\">P4_PEBS_METRIC__max</a> &gt; <a class=\"id\" href=\"#P4_PEBS_CONFIG_METRIC_MASK\">P4_PEBS_CONFIG_METRIC_MASK</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#idx\">idx</a> = <a class=\"id\" href=\"#p4_config_unpack_metric\">p4_config_unpack_metric</a>(<a class=\"id\" href=\"#config\">config</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#idx\">idx</a> == <a class=\"id\" href=\"#P4_PEBS_METRIC__none\">P4_PEBS_METRIC__none</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bind\">bind</a> = &amp;<a class=\"id\" href=\"#p4_pebs_bind_map\">p4_pebs_bind_map</a>[<a class=\"id\" href=\"#idx\">idx</a>];", 
"", 
"<span class=\"ts\"/>(void)<a class=\"id\" href=\"#checking_wrmsrl\">checking_wrmsrl</a>(<a class=\"id\" href=\"#MSR_IA32_PEBS_ENABLE\">MSR_IA32_PEBS_ENABLE</a>,<span class=\"ts\"/>(<a class=\"id\" href=\"#u64\">u64</a>)<a class=\"id\" href=\"#bind\">bind</a>-><a class=\"id\" href=\"#metric_pebs\">metric_pebs</a>);", 
"<span class=\"ts\"/>(void)<a class=\"id\" href=\"#checking_wrmsrl\">checking_wrmsrl</a>(<a class=\"id\" href=\"#MSR_P4_PEBS_MATRIX_VERT\">MSR_P4_PEBS_MATRIX_VERT</a>,<span class=\"ts\"/>(<a class=\"id\" href=\"#u64\">u64</a>)<a class=\"id\" href=\"#bind\">bind</a>-><a class=\"id\" href=\"#metric_vert\">metric_vert</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#p4_pmu_enable_event\">p4_pmu_enable_event</a>(struct <a class=\"id\" href=\"#perf_event\">perf_event</a> *<a class=\"id\" href=\"#event\">event</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#hw_perf_event\">hw_perf_event</a> *<a class=\"id\" href=\"#hwc\">hwc</a> = &amp;<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#hw\">hw</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#thread\">thread</a> = <a class=\"id\" href=\"#p4_ht_config_thread\">p4_ht_config_thread</a>(<a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config\">config</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#escr_conf\">escr_conf</a> = <a class=\"id\" href=\"#p4_config_unpack_escr\">p4_config_unpack_escr</a>(<a class=\"id\" href=\"#p4_clear_ht_bit\">p4_clear_ht_bit</a>(<a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config\">config</a>));", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#idx\">idx</a> = <a class=\"id\" href=\"#p4_config_unpack_event\">p4_config_unpack_event</a>(<a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config\">config</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#p4_event_bind\">p4_event_bind</a> *<a class=\"id\" href=\"#bind\">bind</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#escr_addr\">escr_addr</a>, <a class=\"id\" href=\"#cccr\">cccr</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bind\">bind</a> = &amp;<a class=\"id\" href=\"#p4_event_bind_map\">p4_event_bind_map</a>[<a class=\"id\" href=\"#idx\">idx</a>];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#escr_addr\">escr_addr</a> = (<a class=\"id\" href=\"#u64\">u64</a>)<a class=\"id\" href=\"#bind\">bind</a>-><a class=\"id\" href=\"#escr_msr\">escr_msr</a>[<a class=\"id\" href=\"#thread\">thread</a>];", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * - we dont support cascaded counters yet</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * - and counter 1 is broken (erratum)</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON_ONCE\">WARN_ON_ONCE</a>(<a class=\"id\" href=\"#p4_is_event_cascaded\">p4_is_event_cascaded</a>(<a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config\">config</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON_ONCE\">WARN_ON_ONCE</a>(<a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#idx\">idx</a> == 1);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* we need a real Event value */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#escr_conf\">escr_conf</a> &= ~<a class=\"id\" href=\"#P4_ESCR_EVENT_MASK\">P4_ESCR_EVENT_MASK</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#escr_conf\">escr_conf</a> |= <a class=\"id\" href=\"#P4_ESCR_EVENT\">P4_ESCR_EVENT</a>(<a class=\"id\" href=\"#P4_OPCODE_EVNT\">P4_OPCODE_EVNT</a>(<a class=\"id\" href=\"#bind\">bind</a>-><a class=\"id\" href=\"#opcode\">opcode</a>));", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cccr\">cccr</a> = <a class=\"id\" href=\"#p4_config_unpack_cccr\">p4_config_unpack_cccr</a>(<a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config\">config</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * it could be Cache event so we need to write metrics</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * into additional MSRs</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#p4_pmu_enable_pebs\">p4_pmu_enable_pebs</a>(<a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config\">config</a>);", 
"", 
"<span class=\"ts\"/>(void)<a class=\"id\" href=\"#checking_wrmsrl\">checking_wrmsrl</a>(<a class=\"id\" href=\"#escr_addr\">escr_addr</a>, <a class=\"id\" href=\"#escr_conf\">escr_conf</a>);", 
"<span class=\"ts\"/>(void)<a class=\"id\" href=\"#checking_wrmsrl\">checking_wrmsrl</a>(<a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config_base\">config_base</a> + <a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#idx\">idx</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#cccr\">cccr</a> &amp; ~<a class=\"id\" href=\"#P4_CCCR_RESERVED\">P4_CCCR_RESERVED</a>) | <a class=\"id\" href=\"#P4_CCCR_ENABLE\">P4_CCCR_ENABLE</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#p4_pmu_enable_all\">p4_pmu_enable_all</a>(int <a class=\"id\" href=\"#added\">added</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cpu_hw_events\">cpu_hw_events</a> *<a class=\"id\" href=\"#cpuc\">cpuc</a> = &amp;<a class=\"id\" href=\"#__get_cpu_var\">__get_cpu_var</a>(<a class=\"id\" href=\"#cpu_hw_events\">cpu_hw_events</a>);", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#idx\">idx</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#idx\">idx</a> = 0; <a class=\"id\" href=\"#idx\">idx</a> &lt; <a class=\"id\" href=\"#x86_pmu\">x86_pmu</a>.<a class=\"id\" href=\"#num_counters\">num_counters</a>; <a class=\"id\" href=\"#idx\">idx</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#perf_event\">perf_event</a> *<a class=\"id\" href=\"#event\">event</a> = <a class=\"id\" href=\"#cpuc\">cpuc</a>-><a class=\"id\" href=\"#events\">events</a>[<a class=\"id\" href=\"#idx\">idx</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#idx\">idx</a>, <a class=\"id\" href=\"#cpuc\">cpuc</a>-><a class=\"id\" href=\"#active_mask\">active_mask</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p4_pmu_enable_event\">p4_pmu_enable_event</a>(<a class=\"id\" href=\"#event\">event</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static int <a class=\"id\" href=\"#p4_pmu_handle_irq\">p4_pmu_handle_irq</a>(struct <a class=\"id\" href=\"#pt_regs\">pt_regs</a> *<a class=\"id\" href=\"#regs\">regs</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#perf_sample_data\">perf_sample_data</a> <a class=\"id\" href=\"#data\">data</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cpu_hw_events\">cpu_hw_events</a> *<a class=\"id\" href=\"#cpuc\">cpuc</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#perf_event\">perf_event</a> *<a class=\"id\" href=\"#event\">event</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#hw_perf_event\">hw_perf_event</a> *<a class=\"id\" href=\"#hwc\">hwc</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#idx\">idx</a>, <a class=\"id\" href=\"#handled\">handled</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#val\">val</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#data\">data</a>.<a class=\"id\" href=\"#addr\">addr</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#data\">data</a>.<a class=\"id\" href=\"#raw\">raw</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cpuc\">cpuc</a> = &amp;<a class=\"id\" href=\"#__get_cpu_var\">__get_cpu_var</a>(<a class=\"id\" href=\"#cpu_hw_events\">cpu_hw_events</a>);", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#idx\">idx</a> = 0; <a class=\"id\" href=\"#idx\">idx</a> &lt; <a class=\"id\" href=\"#x86_pmu\">x86_pmu</a>.<a class=\"id\" href=\"#num_counters\">num_counters</a>; <a class=\"id\" href=\"#idx\">idx</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#overflow\">overflow</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#idx\">idx</a>, <a class=\"id\" href=\"#cpuc\">cpuc</a>-><a class=\"id\" href=\"#active_mask\">active_mask</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* catch in-flight IRQs */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#__test_and_clear_bit\">__test_and_clear_bit</a>(<a class=\"id\" href=\"#idx\">idx</a>, <a class=\"id\" href=\"#cpuc\">cpuc</a>-><a class=\"id\" href=\"#running\">running</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#handled\">handled</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#event\">event</a> = <a class=\"id\" href=\"#cpuc\">cpuc</a>-><a class=\"id\" href=\"#events\">events</a>[<a class=\"id\" href=\"#idx\">idx</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hwc\">hwc</a> = &amp;<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#hw\">hw</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON_ONCE\">WARN_ON_ONCE</a>(<a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#idx\">idx</a> != <a class=\"id\" href=\"#idx\">idx</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* it might be unflagged overflow */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#overflow\">overflow</a> = <a class=\"id\" href=\"#p4_pmu_clear_cccr_ovf\">p4_pmu_clear_cccr_ovf</a>(<a class=\"id\" href=\"#hwc\">hwc</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a> = <a class=\"id\" href=\"#x86_perf_event_update\">x86_perf_event_update</a>(<a class=\"id\" href=\"#event\">event</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#overflow\">overflow</a> && (<a class=\"id\" href=\"#val\">val</a> &amp; (1ULL << (<a class=\"id\" href=\"#x86_pmu\">x86_pmu</a>.<a class=\"id\" href=\"#cntval_bits\">cntval_bits</a> - 1))))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#handled\">handled</a> += <a class=\"id\" href=\"#overflow\">overflow</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* event overflow for sure */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#data\">data</a>.<a class=\"id\" href=\"#period\">period</a> = <a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#hw\">hw</a>.<a class=\"id\" href=\"#last_period\">last_period</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#x86_perf_event_set_period\">x86_perf_event_set_period</a>(<a class=\"id\" href=\"#event\">event</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#perf_event_overflow\">perf_event_overflow</a>(<a class=\"id\" href=\"#event\">event</a>, 1, &amp;<a class=\"id\" href=\"#data\">data</a>, <a class=\"id\" href=\"#regs\">regs</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p4_pmu_disable_event\">p4_pmu_disable_event</a>(<a class=\"id\" href=\"#event\">event</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#handled\">handled</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* p4 quirk: unmask it again */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#apic_write\">apic_write</a>(<a class=\"id\" href=\"#APIC_LVTPC\">APIC_LVTPC</a>, <a class=\"id\" href=\"#apic_read\">apic_read</a>(<a class=\"id\" href=\"#APIC_LVTPC\">APIC_LVTPC</a>) &amp; ~<a class=\"id\" href=\"#APIC_LVT_MASKED\">APIC_LVT_MASKED</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#inc_irq_stat\">inc_irq_stat</a>(<a class=\"id\" href=\"#apic_perf_irqs\">apic_perf_irqs</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#handled\">handled</a>;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * swap thread specific fields according to a thread</span>", 
"<span class=\"comment\"> * we are going to run on</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#p4_pmu_swap_config_ts\">p4_pmu_swap_config_ts</a>(struct <a class=\"id\" href=\"#hw_perf_event\">hw_perf_event</a> *<a class=\"id\" href=\"#hwc\">hwc</a>, int <a class=\"id\" href=\"#cpu\">cpu</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#escr\">escr</a>, <a class=\"id\" href=\"#cccr\">cccr</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * we either lucky and continue on same cpu or no HT support</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#p4_should_swap_ts\">p4_should_swap_ts</a>(<a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config\">config</a>, <a class=\"id\" href=\"#cpu\">cpu</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * the event is migrated from an another logical</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * cpu, so we need to swap thread specific flags</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#escr\">escr</a> = <a class=\"id\" href=\"#p4_config_unpack_escr\">p4_config_unpack_escr</a>(<a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config\">config</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cccr\">cccr</a> = <a class=\"id\" href=\"#p4_config_unpack_cccr\">p4_config_unpack_cccr</a>(<a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config\">config</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#p4_ht_thread\">p4_ht_thread</a>(<a class=\"id\" href=\"#cpu\">cpu</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cccr\">cccr</a> &= ~<a class=\"id\" href=\"#P4_CCCR_OVF_PMI_T0\">P4_CCCR_OVF_PMI_T0</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cccr\">cccr</a> |= <a class=\"id\" href=\"#P4_CCCR_OVF_PMI_T1\">P4_CCCR_OVF_PMI_T1</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#escr\">escr</a> &amp; <a class=\"id\" href=\"#P4_ESCR_T0_OS\">P4_ESCR_T0_OS</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#escr\">escr</a> &= ~<a class=\"id\" href=\"#P4_ESCR_T0_OS\">P4_ESCR_T0_OS</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#escr\">escr</a> |= <a class=\"id\" href=\"#P4_ESCR_T1_OS\">P4_ESCR_T1_OS</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#escr\">escr</a> &amp; <a class=\"id\" href=\"#P4_ESCR_T0_USR\">P4_ESCR_T0_USR</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#escr\">escr</a> &= ~<a class=\"id\" href=\"#P4_ESCR_T0_USR\">P4_ESCR_T0_USR</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#escr\">escr</a> |= <a class=\"id\" href=\"#P4_ESCR_T1_USR\">P4_ESCR_T1_USR</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config\">config</a>  = <a class=\"id\" href=\"#p4_config_pack_escr\">p4_config_pack_escr</a>(<a class=\"id\" href=\"#escr\">escr</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config\">config</a> |= <a class=\"id\" href=\"#p4_config_pack_cccr\">p4_config_pack_cccr</a>(<a class=\"id\" href=\"#cccr\">cccr</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config\">config</a> |= <a class=\"id\" href=\"#P4_CONFIG_HT\">P4_CONFIG_HT</a>;", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cccr\">cccr</a> &= ~<a class=\"id\" href=\"#P4_CCCR_OVF_PMI_T1\">P4_CCCR_OVF_PMI_T1</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cccr\">cccr</a> |= <a class=\"id\" href=\"#P4_CCCR_OVF_PMI_T0\">P4_CCCR_OVF_PMI_T0</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#escr\">escr</a> &amp; <a class=\"id\" href=\"#P4_ESCR_T1_OS\">P4_ESCR_T1_OS</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#escr\">escr</a> &= ~<a class=\"id\" href=\"#P4_ESCR_T1_OS\">P4_ESCR_T1_OS</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#escr\">escr</a> |= <a class=\"id\" href=\"#P4_ESCR_T0_OS\">P4_ESCR_T0_OS</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#escr\">escr</a> &amp; <a class=\"id\" href=\"#P4_ESCR_T1_USR\">P4_ESCR_T1_USR</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#escr\">escr</a> &= ~<a class=\"id\" href=\"#P4_ESCR_T1_USR\">P4_ESCR_T1_USR</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#escr\">escr</a> |= <a class=\"id\" href=\"#P4_ESCR_T0_USR\">P4_ESCR_T0_USR</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config\">config</a>  = <a class=\"id\" href=\"#p4_config_pack_escr\">p4_config_pack_escr</a>(<a class=\"id\" href=\"#escr\">escr</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config\">config</a> |= <a class=\"id\" href=\"#p4_config_pack_cccr\">p4_config_pack_cccr</a>(<a class=\"id\" href=\"#cccr\">cccr</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config\">config</a> &= ~<a class=\"id\" href=\"#P4_CONFIG_HT\">P4_CONFIG_HT</a>;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * ESCR address hashing is tricky, ESCRs are not sequential</span>", 
"<span class=\"comment\"> * in memory but all starts from MSR_P4_BSU_ESCR0 (0x03a0) and</span>", 
"<span class=\"comment\"> * the metric between any ESCRs is laid in range [0xa0,0xe1]</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * so we make ~70% filled hashtable</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#P4_ESCR_MSR_BASE\">P4_ESCR_MSR_BASE</a><span class=\"ts\"/><span class=\"ts\"/>0x000003a0", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#P4_ESCR_MSR_MAX\">P4_ESCR_MSR_MAX</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>0x000003e1", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_SIZE\">P4_ESCR_MSR_TABLE_SIZE</a><span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#P4_ESCR_MSR_MAX\">P4_ESCR_MSR_MAX</a> - <a class=\"id\" href=\"#P4_ESCR_MSR_BASE\">P4_ESCR_MSR_BASE</a> + 1)", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#P4_ESCR_MSR_IDX\">P4_ESCR_MSR_IDX</a>(<a class=\"id\" href=\"#msr\">msr</a>)<span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#msr\">msr</a> - <a class=\"id\" href=\"#P4_ESCR_MSR_BASE\">P4_ESCR_MSR_BASE</a>)", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#msr\">msr</a>)<span class=\"ts\"/>[<a class=\"id\" href=\"#P4_ESCR_MSR_IDX\">P4_ESCR_MSR_IDX</a>(<a class=\"id\" href=\"#msr\">msr</a>)] = <a class=\"id\" href=\"#msr\">msr</a>", 
"", 
"static const unsigned int <a class=\"id\" href=\"#p4_escr_table\">p4_escr_table</a>[<a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_SIZE\">P4_ESCR_MSR_TABLE_SIZE</a>] = {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_ALF_ESCR0\">MSR_P4_ALF_ESCR0</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_ALF_ESCR1\">MSR_P4_ALF_ESCR1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_BPU_ESCR0\">MSR_P4_BPU_ESCR0</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_BPU_ESCR1\">MSR_P4_BPU_ESCR1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_BSU_ESCR0\">MSR_P4_BSU_ESCR0</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_BSU_ESCR1\">MSR_P4_BSU_ESCR1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_CRU_ESCR0\">MSR_P4_CRU_ESCR0</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_CRU_ESCR1\">MSR_P4_CRU_ESCR1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_CRU_ESCR2\">MSR_P4_CRU_ESCR2</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_CRU_ESCR3\">MSR_P4_CRU_ESCR3</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_CRU_ESCR4\">MSR_P4_CRU_ESCR4</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_CRU_ESCR5\">MSR_P4_CRU_ESCR5</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_DAC_ESCR0\">MSR_P4_DAC_ESCR0</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_DAC_ESCR1\">MSR_P4_DAC_ESCR1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_FIRM_ESCR0\">MSR_P4_FIRM_ESCR0</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_FIRM_ESCR1\">MSR_P4_FIRM_ESCR1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_FLAME_ESCR0\">MSR_P4_FLAME_ESCR0</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_FLAME_ESCR1\">MSR_P4_FLAME_ESCR1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_FSB_ESCR0\">MSR_P4_FSB_ESCR0</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_FSB_ESCR1\">MSR_P4_FSB_ESCR1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_IQ_ESCR0\">MSR_P4_IQ_ESCR0</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_IQ_ESCR1\">MSR_P4_IQ_ESCR1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_IS_ESCR0\">MSR_P4_IS_ESCR0</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_IS_ESCR1\">MSR_P4_IS_ESCR1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_ITLB_ESCR0\">MSR_P4_ITLB_ESCR0</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_ITLB_ESCR1\">MSR_P4_ITLB_ESCR1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_IX_ESCR0\">MSR_P4_IX_ESCR0</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_IX_ESCR1\">MSR_P4_IX_ESCR1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_MOB_ESCR0\">MSR_P4_MOB_ESCR0</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_MOB_ESCR1\">MSR_P4_MOB_ESCR1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_MS_ESCR0\">MSR_P4_MS_ESCR0</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_MS_ESCR1\">MSR_P4_MS_ESCR1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_PMH_ESCR0\">MSR_P4_PMH_ESCR0</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_PMH_ESCR1\">MSR_P4_PMH_ESCR1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_RAT_ESCR0\">MSR_P4_RAT_ESCR0</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_RAT_ESCR1\">MSR_P4_RAT_ESCR1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_SAAT_ESCR0\">MSR_P4_SAAT_ESCR0</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_SAAT_ESCR1\">MSR_P4_SAAT_ESCR1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_SSU_ESCR0\">MSR_P4_SSU_ESCR0</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_SSU_ESCR1\">MSR_P4_SSU_ESCR1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_TBPU_ESCR0\">MSR_P4_TBPU_ESCR0</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_TBPU_ESCR1\">MSR_P4_TBPU_ESCR1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_TC_ESCR0\">MSR_P4_TC_ESCR0</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_TC_ESCR1\">MSR_P4_TC_ESCR1</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_U2L_ESCR0\">MSR_P4_U2L_ESCR0</a>),", 
"<span class=\"ts\"/><a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_ENTRY\">P4_ESCR_MSR_TABLE_ENTRY</a>(<a class=\"id\" href=\"#MSR_P4_U2L_ESCR1\">MSR_P4_U2L_ESCR1</a>),", 
"};", 
"", 
"static int <a class=\"id\" href=\"#p4_get_escr_idx\">p4_get_escr_idx</a>(unsigned int <a class=\"id\" href=\"#addr\">addr</a>)", 
"{", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#idx\">idx</a> = <a class=\"id\" href=\"#P4_ESCR_MSR_IDX\">P4_ESCR_MSR_IDX</a>(<a class=\"id\" href=\"#addr\">addr</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(<a class=\"id\" href=\"#idx\">idx</a> >= <a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_SIZE\">P4_ESCR_MSR_TABLE_SIZE</a><span class=\"ts\"/>||", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>!<a class=\"id\" href=\"#p4_escr_table\">p4_escr_table</a>[<a class=\"id\" href=\"#idx\">idx</a>]<span class=\"ts\"/><span class=\"ts\"/>||", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p4_escr_table\">p4_escr_table</a>[<a class=\"id\" href=\"#idx\">idx</a>] != <a class=\"id\" href=\"#addr\">addr</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#WARN_ONCE\">WARN_ONCE</a>(1, \"P4 PMU: Wrong address passed: %x\\n\", <a class=\"id\" href=\"#addr\">addr</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#idx\">idx</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#p4_next_cntr\">p4_next_cntr</a>(int <a class=\"id\" href=\"#thread\">thread</a>, unsigned long *<a class=\"id\" href=\"#used_mask\">used_mask</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#p4_event_bind\">p4_event_bind</a> *<a class=\"id\" href=\"#bind\">bind</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#j\">j</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#P4_CNTR_LIMIT\">P4_CNTR_LIMIT</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#j\">j</a> = <a class=\"id\" href=\"#bind\">bind</a>-><a class=\"id\" href=\"#cntr\">cntr</a>[<a class=\"id\" href=\"#thread\">thread</a>][<a class=\"id\" href=\"#i\">i</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#j\">j</a> != -1 && !<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#j\">j</a>, <a class=\"id\" href=\"#used_mask\">used_mask</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#j\">j</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return -1;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#p4_pmu_schedule_events\">p4_pmu_schedule_events</a>(struct <a class=\"id\" href=\"#cpu_hw_events\">cpu_hw_events</a> *<a class=\"id\" href=\"#cpuc\">cpuc</a>, int <a class=\"id\" href=\"#n\">n</a>, int *<a class=\"id\" href=\"#assign\">assign</a>)", 
"{", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#used_mask\">used_mask</a>[<a class=\"id\" href=\"#BITS_TO_LONGS\">BITS_TO_LONGS</a>(<a class=\"id\" href=\"#X86_PMC_IDX_MAX\">X86_PMC_IDX_MAX</a>)];", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#escr_mask\">escr_mask</a>[<a class=\"id\" href=\"#BITS_TO_LONGS\">BITS_TO_LONGS</a>(<a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_SIZE\">P4_ESCR_MSR_TABLE_SIZE</a>)];", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#cpu\">cpu</a> = <a class=\"id\" href=\"#smp_processor_id\">smp_processor_id</a>();", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#hw_perf_event\">hw_perf_event</a> *<a class=\"id\" href=\"#hwc\">hwc</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#p4_event_bind\">p4_event_bind</a> *<a class=\"id\" href=\"#bind\">bind</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#thread\">thread</a>, <a class=\"id\" href=\"#num\">num</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#cntr_idx\">cntr_idx</a>, <a class=\"id\" href=\"#escr_idx\">escr_idx</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bitmap_zero\">bitmap_zero</a>(<a class=\"id\" href=\"#used_mask\">used_mask</a>, <a class=\"id\" href=\"#X86_PMC_IDX_MAX\">X86_PMC_IDX_MAX</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bitmap_zero\">bitmap_zero</a>(<a class=\"id\" href=\"#escr_mask\">escr_mask</a>, <a class=\"id\" href=\"#P4_ESCR_MSR_TABLE_SIZE\">P4_ESCR_MSR_TABLE_SIZE</a>);", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0, <a class=\"id\" href=\"#num\">num</a> = <a class=\"id\" href=\"#n\">n</a>; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#n\">n</a>; <a class=\"id\" href=\"#i\">i</a>++, <a class=\"id\" href=\"#num\">num</a>--) {", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hwc\">hwc</a> = &amp;<a class=\"id\" href=\"#cpuc\">cpuc</a>-><a class=\"id\" href=\"#event_list\">event_list</a>[<a class=\"id\" href=\"#i\">i</a>]-><a class=\"id\" href=\"#hw\">hw</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#thread\">thread</a> = <a class=\"id\" href=\"#p4_ht_thread\">p4_ht_thread</a>(<a class=\"id\" href=\"#cpu\">cpu</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#bind\">bind</a> = <a class=\"id\" href=\"#p4_config_get_bind\">p4_config_get_bind</a>(<a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config\">config</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#escr_idx\">escr_idx</a> = <a class=\"id\" href=\"#p4_get_escr_idx\">p4_get_escr_idx</a>(<a class=\"id\" href=\"#bind\">bind</a>-><a class=\"id\" href=\"#escr_msr\">escr_msr</a>[<a class=\"id\" href=\"#thread\">thread</a>]);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(<a class=\"id\" href=\"#escr_idx\">escr_idx</a> == -1))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#idx\">idx</a> != -1 && !<a class=\"id\" href=\"#p4_should_swap_ts\">p4_should_swap_ts</a>(<a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#config\">config</a>, <a class=\"id\" href=\"#cpu\">cpu</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cntr_idx\">cntr_idx</a> = <a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#idx\">idx</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#assign\">assign</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#assign\">assign</a>[<a class=\"id\" href=\"#i\">i</a>] = <a class=\"id\" href=\"#hwc\">hwc</a>-><a class=\"id\" href=\"#idx\">idx</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#reserve\">reserve</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cntr_idx\">cntr_idx</a> = <a class=\"id\" href=\"#p4_next_cntr\">p4_next_cntr</a>(<a class=\"id\" href=\"#thread\">thread</a>, <a class=\"id\" href=\"#used_mask\">used_mask</a>, <a class=\"id\" href=\"#bind\">bind</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#cntr_idx\">cntr_idx</a> == -1 || <a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#escr_idx\">escr_idx</a>, <a class=\"id\" href=\"#escr_mask\">escr_mask</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#p4_pmu_swap_config_ts\">p4_pmu_swap_config_ts</a>(<a class=\"id\" href=\"#hwc\">hwc</a>, <a class=\"id\" href=\"#cpu\">cpu</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#assign\">assign</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#assign\">assign</a>[<a class=\"id\" href=\"#i\">i</a>] = <a class=\"id\" href=\"#cntr_idx\">cntr_idx</a>;", 
"<a class=\"id\" href=\"#reserve\">reserve</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_bit\">set_bit</a>(<a class=\"id\" href=\"#cntr_idx\">cntr_idx</a>, <a class=\"id\" href=\"#used_mask\">used_mask</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_bit\">set_bit</a>(<a class=\"id\" href=\"#escr_idx\">escr_idx</a>, <a class=\"id\" href=\"#escr_mask\">escr_mask</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<a class=\"id\" href=\"#done\">done</a>:", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#num\">num</a> ? -<a class=\"id\" href=\"#ENOSPC\">ENOSPC</a> : 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#__initconst\">__initconst</a> const struct <a class=\"id\" href=\"#x86_pmu\">x86_pmu</a> <a class=\"id\" href=\"#p4_pmu\">p4_pmu</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>= \"Netburst P4/Xeon\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#handle_irq\">handle_irq</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#p4_pmu_handle_irq\">p4_pmu_handle_irq</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#disable_all\">disable_all</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#p4_pmu_disable_all\">p4_pmu_disable_all</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#enable_all\">enable_all</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#p4_pmu_enable_all\">p4_pmu_enable_all</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#enable\">enable</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#p4_pmu_enable_event\">p4_pmu_enable_event</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#disable\">disable</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#p4_pmu_disable_event\">p4_pmu_disable_event</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#eventsel\">eventsel</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#MSR_P4_BPU_CCCR0\">MSR_P4_BPU_CCCR0</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#perfctr\">perfctr</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#MSR_P4_BPU_PERFCTR0\">MSR_P4_BPU_PERFCTR0</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#event_map\">event_map</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#p4_pmu_event_map\">p4_pmu_event_map</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#max_events\">max_events</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#p4_general_events\">p4_general_events</a>),", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#get_event_constraints\">get_event_constraints</a><span class=\"ts\"/>= <a class=\"id\" href=\"#x86_get_event_constraints\">x86_get_event_constraints</a>,", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * IF HT disabled we may need to use all</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * ARCH_P4_MAX_CCCR counters simulaneously</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * though leave it restricted at moment assuming</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * HT is on</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#num_counters\">num_counters</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ARCH_P4_MAX_CCCR\">ARCH_P4_MAX_CCCR</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#apic\">apic</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>= 1,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#cntval_bits\">cntval_bits</a><span class=\"ts\"/><span class=\"ts\"/>= 40,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#cntval_mask\">cntval_mask</a><span class=\"ts\"/><span class=\"ts\"/>= (1ULL << 40) - 1,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#max_period\">max_period</a><span class=\"ts\"/><span class=\"ts\"/>= (1ULL << 39) - 1,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#hw_config\">hw_config</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#p4_hw_config\">p4_hw_config</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#schedule_events\">schedule_events</a><span class=\"ts\"/>= <a class=\"id\" href=\"#p4_pmu_schedule_events\">p4_pmu_schedule_events</a>,", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * This handles erratum N15 in intel doc 249199-029,</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * the counter may not be updated correctly on write</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * so we need a second write operation to do the trick</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * (the official workaround didn't work)</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * the former idea is taken from OProfile code</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#perfctr_second_write\">perfctr_second_write</a><span class=\"ts\"/>= 1,", 
"};", 
"", 
"static <a class=\"id\" href=\"#__init\">__init</a> int <a class=\"id\" href=\"#p4_pmu_init\">p4_pmu_init</a>(void)", 
"{", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#low\">low</a>, <a class=\"id\" href=\"#high\">high</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* If we get stripped -- indexig fails */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#BUILD_BUG_ON\">BUILD_BUG_ON</a>(<a class=\"id\" href=\"#ARCH_P4_MAX_CCCR\">ARCH_P4_MAX_CCCR</a> &gt; <a class=\"id\" href=\"#X86_PMC_MAX_GENERIC\">X86_PMC_MAX_GENERIC</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rdmsr\">rdmsr</a>(<a class=\"id\" href=\"#MSR_IA32_MISC_ENABLE\">MSR_IA32_MISC_ENABLE</a>, <a class=\"id\" href=\"#low\">low</a>, <a class=\"id\" href=\"#high\">high</a>);", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#low\">low</a> &amp; (1 << 7))) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pr_cont\">pr_cont</a>(\"unsupported Netburst CPU model %d \",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#boot_cpu_data\">boot_cpu_data</a>.<a class=\"id\" href=\"#x86_model\">x86_model</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>(<a class=\"id\" href=\"#hw_cache_event_ids\">hw_cache_event_ids</a>, <a class=\"id\" href=\"#p4_hw_cache_event_ids\">p4_hw_cache_event_ids</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>sizeof(<a class=\"id\" href=\"#hw_cache_event_ids\">hw_cache_event_ids</a>));", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pr_cont\">pr_cont</a>(\"Netburst events, \");", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#x86_pmu\">x86_pmu</a> = <a class=\"id\" href=\"#p4_pmu\">p4_pmu</a>;", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"#<a class=\"id\" href=\"#endif\">endif</a> <span class=\"comment\">/* CONFIG_CPU_SUP_INTEL */</span>", 
];
xr_frag_insert('l/b4/9681767d5a7e17cb5c77341f0cdcfaa1dd0190.xr', __xr_tmp);
