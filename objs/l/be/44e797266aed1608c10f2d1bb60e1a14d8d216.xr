var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Low-Level PCI Support for PC -- Routing of Interrupts</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>(c) 1999--2000 Martin Mares &lt;mj@ucw.cz&gt;</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#types\">types</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kernel\">kernel</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#pci\">pci</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#init\">init</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#interrupt\">interrupt</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#dmi\">dmi</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#io\">io</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#smp\">smp</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#io_apic\">io_apic</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#irq\">irq</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#acpi\">acpi</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#pci_x86\">pci_x86</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#PIRQ_SIGNATURE\">PIRQ_SIGNATURE</a><span class=\"ts\"/>(('$' << 0) + ('P' << 8) + ('I' << 16) + ('R' << 24))", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#PIRQ_VERSION\">PIRQ_VERSION</a> 0x0100", 
"", 
"static int <a class=\"id\" href=\"#broken_hp_bios_irq9\">broken_hp_bios_irq9</a>;", 
"static int <a class=\"id\" href=\"#acer_tm360_irqrouting\">acer_tm360_irqrouting</a>;", 
"", 
"static struct <a class=\"id\" href=\"#irq_routing_table\">irq_routing_table</a> *<a class=\"id\" href=\"#pirq_table\">pirq_table</a>;", 
"", 
"static int <a class=\"id\" href=\"#pirq_enable_irq\">pirq_enable_irq</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Never use: 0, 1, 2 (timer, keyboard, and cascade)</span>", 
"<span class=\"comment\"> * Avoid using: 13, 14 and 15 (FP error and IDE).</span>", 
"<span class=\"comment\"> * Penalize: 3, 4, 6, 7, 12 (known ISA uses: serial, floppy, parallel and mouse)</span>", 
"<span class=\"comment\"> */</span>", 
"unsigned int <a class=\"id\" href=\"#pcibios_irq_mask\">pcibios_irq_mask</a> = 0xfff8;", 
"", 
"static int <a class=\"id\" href=\"#pirq_penalty\">pirq_penalty</a>[16] = {", 
"<span class=\"ts\"/>1000000, 1000000, 1000000, 1000, 1000, 0, 1000, 1000,", 
"<span class=\"ts\"/>0, 0, 0, 0, 1000, 100000, 100000, 100000", 
"};", 
"", 
"struct <a class=\"id\" href=\"#irq_router\">irq_router</a> {", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#name\">name</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#vendor\">vendor</a>, <a class=\"id\" href=\"#device\">device</a>;", 
"<span class=\"ts\"/>int (*<a class=\"id\" href=\"#get\">get</a>)(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>);", 
"<span class=\"ts\"/>int (*<a class=\"id\" href=\"#set\">set</a>)(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#new\">new</a>);", 
"};", 
"", 
"struct <a class=\"id\" href=\"#irq_router_handler\">irq_router_handler</a> {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#vendor\">vendor</a>;", 
"<span class=\"ts\"/>int (*<a class=\"id\" href=\"#probe\">probe</a>)(struct <a class=\"id\" href=\"#irq_router\">irq_router</a> *<a class=\"id\" href=\"#r\">r</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, <a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#device\">device</a>);", 
"};", 
"", 
"int (*<a class=\"id\" href=\"#pcibios_enable_irq\">pcibios_enable_irq</a>)(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>) = <a class=\"id\" href=\"#pirq_enable_irq\">pirq_enable_irq</a>;", 
"void (*<a class=\"id\" href=\"#pcibios_disable_irq\">pcibios_disable_irq</a>)(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>) = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> *  Check passed address for the PCI IRQ Routing Table signature</span>", 
"<span class=\"comment\"> *  and perform checksum verification.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> struct <a class=\"id\" href=\"#irq_routing_table\">irq_routing_table</a> *<a class=\"id\" href=\"#pirq_check_routing_table\">pirq_check_routing_table</a>(<a class=\"id\" href=\"#u8\">u8</a> *<a class=\"id\" href=\"#addr\">addr</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#irq_routing_table\">irq_routing_table</a> *<a class=\"id\" href=\"#rt\">rt</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#sum\">sum</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rt\">rt</a> = (struct <a class=\"id\" href=\"#irq_routing_table\">irq_routing_table</a> *) <a class=\"id\" href=\"#addr\">addr</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rt\">rt</a>-><a class=\"id\" href=\"#signature\">signature</a> != <a class=\"id\" href=\"#PIRQ_SIGNATURE\">PIRQ_SIGNATURE</a> ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#rt\">rt</a>-><a class=\"id\" href=\"#version\">version</a> != <a class=\"id\" href=\"#PIRQ_VERSION\">PIRQ_VERSION</a> ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#rt\">rt</a>-><a class=\"id\" href=\"#size\">size</a> % 16 ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#rt\">rt</a>-><a class=\"id\" href=\"#size\">size</a> &lt; sizeof(struct <a class=\"id\" href=\"#irq_routing_table\">irq_routing_table</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sum\">sum</a> = 0;", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#rt\">rt</a>-><a class=\"id\" href=\"#size\">size</a>; <a class=\"id\" href=\"#i\">i</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sum\">sum</a> += <a class=\"id\" href=\"#addr\">addr</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#sum\">sum</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#DBG\">DBG</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a> \"PCI: Interrupt Routing Table found at 0x%p\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rt\">rt</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#rt\">rt</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"}", 
"", 
"", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> *  Search 0xf0000 -- 0xfffff for the PCI IRQ Routing Table.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static struct <a class=\"id\" href=\"#irq_routing_table\">irq_routing_table</a> * <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#pirq_find_routing_table\">pirq_find_routing_table</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> *<a class=\"id\" href=\"#addr\">addr</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#irq_routing_table\">irq_routing_table</a> *<a class=\"id\" href=\"#rt\">rt</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pirq_table_addr\">pirq_table_addr</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rt\">rt</a> = <a class=\"id\" href=\"#pirq_check_routing_table\">pirq_check_routing_table</a>((<a class=\"id\" href=\"#u8\">u8</a> *) <a class=\"id\" href=\"#__va\">__va</a>(<a class=\"id\" href=\"#pirq_table_addr\">pirq_table_addr</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rt\">rt</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#rt\">rt</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> \"PCI: PIRQ table NOT found at pirqaddr\\n\");", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#addr\">addr</a> = (<a class=\"id\" href=\"#u8\">u8</a> *) <a class=\"id\" href=\"#__va\">__va</a>(0xf0000); <a class=\"id\" href=\"#addr\">addr</a> &lt; (<a class=\"id\" href=\"#u8\">u8</a> *) <a class=\"id\" href=\"#__va\">__va</a>(0x100000); <a class=\"id\" href=\"#addr\">addr</a> += 16) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rt\">rt</a> = <a class=\"id\" href=\"#pirq_check_routing_table\">pirq_check_routing_table</a>(<a class=\"id\" href=\"#addr\">addr</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rt\">rt</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#rt\">rt</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> *  If we have a IRQ routing table, use it to search for peer host</span>", 
"<span class=\"comment\"> *  bridges.  It's a gross hack, but since there are no other known</span>", 
"<span class=\"comment\"> *  ways how to get a list of buses, we have to go this way.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static void <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#pirq_peer_trick\">pirq_peer_trick</a>(void)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#irq_routing_table\">irq_routing_table</a> *<a class=\"id\" href=\"#rt\">rt</a> = <a class=\"id\" href=\"#pirq_table\">pirq_table</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#busmap\">busmap</a>[256];", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#irq_info\">irq_info</a> *<a class=\"id\" href=\"#e\">e</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(<a class=\"id\" href=\"#busmap\">busmap</a>, 0, sizeof(<a class=\"id\" href=\"#busmap\">busmap</a>));", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; (<a class=\"id\" href=\"#rt\">rt</a>-><a class=\"id\" href=\"#size\">size</a> - sizeof(struct <a class=\"id\" href=\"#irq_routing_table\">irq_routing_table</a>)) / sizeof(struct <a class=\"id\" href=\"#irq_info\">irq_info</a>); <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#e\">e</a> = &amp;<a class=\"id\" href=\"#rt\">rt</a>-><a class=\"id\" href=\"#slots\">slots</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#DEBUG\">DEBUG</a>", 
"<span class=\"ts\"/><span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#j\">j</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#DBG\">DBG</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a> \"%02x:%02x slot=%02x\", <a class=\"id\" href=\"#e\">e</a>-><a class=\"id\" href=\"#bus\">bus</a>, <a class=\"id\" href=\"#e\">e</a>-><a class=\"id\" href=\"#devfn\">devfn</a>/8, <a class=\"id\" href=\"#e\">e</a>-><a class=\"id\" href=\"#slot\">slot</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#j\">j</a> = 0; <a class=\"id\" href=\"#j\">j</a> &lt; 4; <a class=\"id\" href=\"#j\">j</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#DBG\">DBG</a>(\" %d:%02x/%04x\", <a class=\"id\" href=\"#j\">j</a>, <a class=\"id\" href=\"#e\">e</a>-><a class=\"id\" href=\"#irq\">irq</a>[<a class=\"id\" href=\"#j\">j</a>].<a class=\"id\" href=\"#link\">link</a>, <a class=\"id\" href=\"#e\">e</a>-><a class=\"id\" href=\"#irq\">irq</a>[<a class=\"id\" href=\"#j\">j</a>].<a class=\"id\" href=\"#bitmap\">bitmap</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#DBG\">DBG</a>(\"\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#busmap\">busmap</a>[<a class=\"id\" href=\"#e\">e</a>-><a class=\"id\" href=\"#bus\">bus</a>] = 1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 1; <a class=\"id\" href=\"#i\">i</a> &lt; 256; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#node\">node</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#busmap\">busmap</a>[<a class=\"id\" href=\"#i\">i</a>] || <a class=\"id\" href=\"#pci_find_bus\">pci_find_bus</a>(0, <a class=\"id\" href=\"#i\">i</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#node\">node</a> = <a class=\"id\" href=\"#get_mp_bus_to_node\">get_mp_bus_to_node</a>(<a class=\"id\" href=\"#i\">i</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#pci_scan_bus_on_node\">pci_scan_bus_on_node</a>(<a class=\"id\" href=\"#i\">i</a>, &amp;<a class=\"id\" href=\"#pci_root_ops\">pci_root_ops</a>, <a class=\"id\" href=\"#node\">node</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"PCI: Discovered primary peer \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       \"bus %02x [IRQ]\\n\", <a class=\"id\" href=\"#i\">i</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pcibios_last_bus\">pcibios_last_bus</a> = -1;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> *  Code for querying and setting of IRQ routes on various interrupt routers.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"void <a class=\"id\" href=\"#eisa_set_level_irq\">eisa_set_level_irq</a>(unsigned int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#mask\">mask</a> = 1 << (<a class=\"id\" href=\"#irq\">irq</a> &amp; 7);", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#port\">port</a> = 0x4d0 + (<a class=\"id\" href=\"#irq\">irq</a> >> 3);", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#val\">val</a>;", 
"<span class=\"ts\"/>static <a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#eisa_irq_mask\">eisa_irq_mask</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irq\">irq</a> >= 16 || (1 << <a class=\"id\" href=\"#irq\">irq</a>) &amp; <a class=\"id\" href=\"#eisa_irq_mask\">eisa_irq_mask</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#eisa_irq_mask\">eisa_irq_mask</a> |= (1 << <a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a> \"PCI: setting IRQ %u as level-triggered\\n\", <a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#val\">val</a> = <a class=\"id\" href=\"#inb\">inb</a>(<a class=\"id\" href=\"#port\">port</a>);", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#val\">val</a> &amp; <a class=\"id\" href=\"#mask\">mask</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#DBG\">DBG</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a> \" -> edge\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#val\">val</a> | <a class=\"id\" href=\"#mask\">mask</a>, <a class=\"id\" href=\"#port\">port</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Common IRQ routing practice: nibbles in config space,</span>", 
"<span class=\"comment\"> * offset by some magic constant.</span>", 
"<span class=\"comment\"> */</span>", 
"static unsigned int <a class=\"id\" href=\"#read_config_nybble\">read_config_nybble</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, unsigned <a class=\"id\" href=\"#offset\">offset</a>, unsigned <a class=\"id\" href=\"#nr\">nr</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#x\">x</a>;", 
"<span class=\"ts\"/>unsigned <a class=\"id\" href=\"#reg\">reg</a> = <a class=\"id\" href=\"#offset\">offset</a> + (<a class=\"id\" href=\"#nr\">nr</a> >> 1);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_byte\">pci_read_config_byte</a>(<a class=\"id\" href=\"#router\">router</a>, <a class=\"id\" href=\"#reg\">reg</a>, &amp;<a class=\"id\" href=\"#x\">x</a>);", 
"<span class=\"ts\"/>return (<a class=\"id\" href=\"#nr\">nr</a> &amp; 1) ? (<a class=\"id\" href=\"#x\">x</a> >> 4) : (<a class=\"id\" href=\"#x\">x</a> &amp; 0xf);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#write_config_nybble\">write_config_nybble</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, unsigned <a class=\"id\" href=\"#offset\">offset</a>,", 
"<span class=\"ts\"/>unsigned <a class=\"id\" href=\"#nr\">nr</a>, unsigned int <a class=\"id\" href=\"#val\">val</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#x\">x</a>;", 
"<span class=\"ts\"/>unsigned <a class=\"id\" href=\"#reg\">reg</a> = <a class=\"id\" href=\"#offset\">offset</a> + (<a class=\"id\" href=\"#nr\">nr</a> >> 1);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_byte\">pci_read_config_byte</a>(<a class=\"id\" href=\"#router\">router</a>, <a class=\"id\" href=\"#reg\">reg</a>, &amp;<a class=\"id\" href=\"#x\">x</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#x\">x</a> = (<a class=\"id\" href=\"#nr\">nr</a> &amp; 1) ? ((<a class=\"id\" href=\"#x\">x</a> &amp; 0x0f) | (<a class=\"id\" href=\"#val\">val</a> << 4)) : ((<a class=\"id\" href=\"#x\">x</a> &amp; 0xf0) | <a class=\"id\" href=\"#val\">val</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_write_config_byte\">pci_write_config_byte</a>(<a class=\"id\" href=\"#router\">router</a>, <a class=\"id\" href=\"#reg\">reg</a>, <a class=\"id\" href=\"#x\">x</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * ALI pirq entries are damn ugly, and completely undocumented.</span>", 
"<span class=\"comment\"> * This has been figured out from pirq tables, and it's not a pretty</span>", 
"<span class=\"comment\"> * picture.</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#pirq_ali_get\">pirq_ali_get</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>)", 
"{", 
"<span class=\"ts\"/>static const unsigned char <a class=\"id\" href=\"#irqmap\">irqmap</a>[16] = { 0, 9, 3, 10, 4, 5, 7, 6, 1, 11, 0, 12, 0, 14, 0, 15 };", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON_ONCE\">WARN_ON_ONCE</a>(<a class=\"id\" href=\"#pirq\">pirq</a> &gt; 16);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#irqmap\">irqmap</a>[<a class=\"id\" href=\"#read_config_nybble\">read_config_nybble</a>(<a class=\"id\" href=\"#router\">router</a>, 0x48, <a class=\"id\" href=\"#pirq\">pirq</a>-1)];", 
"}", 
"", 
"static int <a class=\"id\" href=\"#pirq_ali_set\">pirq_ali_set</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>, int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/>static const unsigned char <a class=\"id\" href=\"#irqmap\">irqmap</a>[16] = { 0, 8, 0, 2, 4, 5, 7, 6, 0, 1, 3, 9, 11, 0, 13, 15 };", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#val\">val</a> = <a class=\"id\" href=\"#irqmap\">irqmap</a>[<a class=\"id\" href=\"#irq\">irq</a>];", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON_ONCE\">WARN_ON_ONCE</a>(<a class=\"id\" href=\"#pirq\">pirq</a> &gt; 16);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#val\">val</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#write_config_nybble\">write_config_nybble</a>(<a class=\"id\" href=\"#router\">router</a>, 0x48, <a class=\"id\" href=\"#pirq\">pirq</a>-1, <a class=\"id\" href=\"#val\">val</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * The Intel PIIX4 pirq rules are fairly simple: \"pirq\" is</span>", 
"<span class=\"comment\"> * just a pointer to the config space.</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#pirq_piix_get\">pirq_piix_get</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#x\">x</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_byte\">pci_read_config_byte</a>(<a class=\"id\" href=\"#router\">router</a>, <a class=\"id\" href=\"#pirq\">pirq</a>, &amp;<a class=\"id\" href=\"#x\">x</a>);", 
"<span class=\"ts\"/>return (<a class=\"id\" href=\"#x\">x</a> &lt; 16) ? <a class=\"id\" href=\"#x\">x</a> : 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#pirq_piix_set\">pirq_piix_set</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>, int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_write_config_byte\">pci_write_config_byte</a>(<a class=\"id\" href=\"#router\">router</a>, <a class=\"id\" href=\"#pirq\">pirq</a>, <a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/>return 1;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * The VIA pirq rules are nibble-based, like ALI,</span>", 
"<span class=\"comment\"> * but without the ugly irq number munging.</span>", 
"<span class=\"comment\"> * However, PIRQD is in the upper instead of lower 4 bits.</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#pirq_via_get\">pirq_via_get</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#read_config_nybble\">read_config_nybble</a>(<a class=\"id\" href=\"#router\">router</a>, 0x55, <a class=\"id\" href=\"#pirq\">pirq</a> == 4 ? 5 : <a class=\"id\" href=\"#pirq\">pirq</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#pirq_via_set\">pirq_via_set</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>, int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#write_config_nybble\">write_config_nybble</a>(<a class=\"id\" href=\"#router\">router</a>, 0x55, <a class=\"id\" href=\"#pirq\">pirq</a> == 4 ? 5 : <a class=\"id\" href=\"#pirq\">pirq</a>, <a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/>return 1;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * The VIA pirq rules are nibble-based, like ALI,</span>", 
"<span class=\"comment\"> * but without the ugly irq number munging.</span>", 
"<span class=\"comment\"> * However, for 82C586, nibble map is different .</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#pirq_via586_get\">pirq_via586_get</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>)", 
"{", 
"<span class=\"ts\"/>static const unsigned int <a class=\"id\" href=\"#pirqmap\">pirqmap</a>[5] = { 3, 2, 5, 1, 1 };", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON_ONCE\">WARN_ON_ONCE</a>(<a class=\"id\" href=\"#pirq\">pirq</a> &gt; 5);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#read_config_nybble\">read_config_nybble</a>(<a class=\"id\" href=\"#router\">router</a>, 0x55, <a class=\"id\" href=\"#pirqmap\">pirqmap</a>[<a class=\"id\" href=\"#pirq\">pirq</a>-1]);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#pirq_via586_set\">pirq_via586_set</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>, int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/>static const unsigned int <a class=\"id\" href=\"#pirqmap\">pirqmap</a>[5] = { 3, 2, 5, 1, 1 };", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON_ONCE\">WARN_ON_ONCE</a>(<a class=\"id\" href=\"#pirq\">pirq</a> &gt; 5);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#write_config_nybble\">write_config_nybble</a>(<a class=\"id\" href=\"#router\">router</a>, 0x55, <a class=\"id\" href=\"#pirqmap\">pirqmap</a>[<a class=\"id\" href=\"#pirq\">pirq</a>-1], <a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/>return 1;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * ITE 8330G pirq rules are nibble-based</span>", 
"<span class=\"comment\"> * FIXME: pirqmap may be { 1, 0, 3, 2 },</span>", 
"<span class=\"comment\"> * <span class=\"ts\"/>  2+3 are both mapped to irq 9 on my system</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#pirq_ite_get\">pirq_ite_get</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>)", 
"{", 
"<span class=\"ts\"/>static const unsigned char <a class=\"id\" href=\"#pirqmap\">pirqmap</a>[4] = { 1, 0, 2, 3 };", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON_ONCE\">WARN_ON_ONCE</a>(<a class=\"id\" href=\"#pirq\">pirq</a> &gt; 4);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#read_config_nybble\">read_config_nybble</a>(<a class=\"id\" href=\"#router\">router</a>, 0x43, <a class=\"id\" href=\"#pirqmap\">pirqmap</a>[<a class=\"id\" href=\"#pirq\">pirq</a>-1]);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#pirq_ite_set\">pirq_ite_set</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>, int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/>static const unsigned char <a class=\"id\" href=\"#pirqmap\">pirqmap</a>[4] = { 1, 0, 2, 3 };", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON_ONCE\">WARN_ON_ONCE</a>(<a class=\"id\" href=\"#pirq\">pirq</a> &gt; 4);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#write_config_nybble\">write_config_nybble</a>(<a class=\"id\" href=\"#router\">router</a>, 0x43, <a class=\"id\" href=\"#pirqmap\">pirqmap</a>[<a class=\"id\" href=\"#pirq\">pirq</a>-1], <a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/>return 1;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * OPTI: high four bits are nibble pointer..</span>", 
"<span class=\"comment\"> * I wonder what the low bits do?</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#pirq_opti_get\">pirq_opti_get</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#read_config_nybble\">read_config_nybble</a>(<a class=\"id\" href=\"#router\">router</a>, 0xb8, <a class=\"id\" href=\"#pirq\">pirq</a> >> 4);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#pirq_opti_set\">pirq_opti_set</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>, int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#write_config_nybble\">write_config_nybble</a>(<a class=\"id\" href=\"#router\">router</a>, 0xb8, <a class=\"id\" href=\"#pirq\">pirq</a> >> 4, <a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/>return 1;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Cyrix: nibble offset 0x5C</span>", 
"<span class=\"comment\"> * 0x5C bits 7:4 is INTB bits 3:0 is INTA</span>", 
"<span class=\"comment\"> * 0x5D bits 7:4 is INTD bits 3:0 is INTC</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#pirq_cyrix_get\">pirq_cyrix_get</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#read_config_nybble\">read_config_nybble</a>(<a class=\"id\" href=\"#router\">router</a>, 0x5C, (<a class=\"id\" href=\"#pirq\">pirq</a>-1)^1);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#pirq_cyrix_set\">pirq_cyrix_set</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>, int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#write_config_nybble\">write_config_nybble</a>(<a class=\"id\" href=\"#router\">router</a>, 0x5C, (<a class=\"id\" href=\"#pirq\">pirq</a>-1)^1, <a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/>return 1;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>PIRQ routing for SiS 85C503 router used in several SiS chipsets.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>We have to deal with the following issues here:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>- vendors have different ideas about the meaning of link values</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>- some onboard devices (integrated in the chipset) have special</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>  links and are thus routed differently (i.e. not via PCI INTA-INTD)</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>- different revision of the router have a different layout for</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>  the routing registers, particularly for the onchip devices</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>For all routing registers the common thing is we have one byte</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>per routeable link which is defined as:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/> bit 7      IRQ mapping enabled (0) or disabled (1)</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/> bits [6:4] reserved (sometimes used for onchip devices)</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/> bits [3:0] IRQ to map to</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/>     allowed: 3-7, 9-12, 14-15</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/>     reserved: 0, 1, 2, 8, 13</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>The config-space registers located at 0x41/0x42/0x43/0x44 are</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>always used to route the normal PCI INT A/B/C/D respectively.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Apparently there are systems implementing PCI routing table using</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>link values 0x01-0x04 and others using 0x41-0x44 for PCI INTA..D.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>We try our best to handle both link mappings.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Currently (2003-05-21) it appears most SiS chipsets follow the</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>definition of routing registers from the SiS-5595 southbridge.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>According to the SiS 5595 datasheets the revision id's of the</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>router (ISA-bridge) should be 0x01 or 0xb0.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Furthermore we've also seen lspci dumps with revision 0x00 and 0xb1.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Looks like these are used in a number of SiS 5xx/6xx/7xx chipsets.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>They seem to work with the current routing code. However there is</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>some concern because of the two USB-OHCI HCs (original SiS 5595</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>had only one). YMMV.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Onchip routing for router rev-id 0x01/0xb0 and probably 0x00/0xb1:</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>0x61:<span class=\"ts\"/>IDEIRQ:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/>bits [6:5] must be written 01</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/>bit 4 channel-select primary (0), secondary (1)</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>0x62:<span class=\"ts\"/>USBIRQ:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/>bit 6 OHCI function disabled (0), enabled (1)</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>0x6a:<span class=\"ts\"/>ACPI/SCI IRQ: bits 4-6 reserved</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>0x7e:<span class=\"ts\"/>Data Acq. Module IRQ - bits 4-6 reserved</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>We support USBIRQ (in addition to INTA-INTD) and keep the</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>IDE, ACPI and DAQ routing untouched as set by the BIOS.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Currently the only reported exception is the new SiS 65x chipset</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>which includes the SiS 69x southbridge. Here we have the 85C503</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>router revision 0x04 and there are changes in the register layout</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>mostly related to the different USB HCs with USB 2.0 support.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Onchip routing for router rev-id 0x04 (try-and-error observation)</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>0x60/0x61/0x62/0x63:<span class=\"ts\"/>1xEHCI and 3xOHCI (companion) USB-HCs</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>bit 6-4 are probably unused, not like 5595</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#PIRQ_SIS_IRQ_MASK\">PIRQ_SIS_IRQ_MASK</a><span class=\"ts\"/>0x0f", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#PIRQ_SIS_IRQ_DISABLE\">PIRQ_SIS_IRQ_DISABLE</a><span class=\"ts\"/>0x80", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#PIRQ_SIS_USB_ENABLE\">PIRQ_SIS_USB_ENABLE</a><span class=\"ts\"/>0x40", 
"", 
"static int <a class=\"id\" href=\"#pirq_sis_get\">pirq_sis_get</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#x\">x</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#reg\">reg</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#reg\">reg</a> = <a class=\"id\" href=\"#pirq\">pirq</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#reg\">reg</a> >= 0x01 && <a class=\"id\" href=\"#reg\">reg</a> <= 0x04)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#reg\">reg</a> += 0x40;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_byte\">pci_read_config_byte</a>(<a class=\"id\" href=\"#router\">router</a>, <a class=\"id\" href=\"#reg\">reg</a>, &amp;<a class=\"id\" href=\"#x\">x</a>);", 
"<span class=\"ts\"/>return (<a class=\"id\" href=\"#x\">x</a> &amp; <a class=\"id\" href=\"#PIRQ_SIS_IRQ_DISABLE\">PIRQ_SIS_IRQ_DISABLE</a>) ? 0 : (<a class=\"id\" href=\"#x\">x</a> &amp; <a class=\"id\" href=\"#PIRQ_SIS_IRQ_MASK\">PIRQ_SIS_IRQ_MASK</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#pirq_sis_set\">pirq_sis_set</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>, int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#x\">x</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#reg\">reg</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#reg\">reg</a> = <a class=\"id\" href=\"#pirq\">pirq</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#reg\">reg</a> >= 0x01 && <a class=\"id\" href=\"#reg\">reg</a> <= 0x04)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#reg\">reg</a> += 0x40;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_byte\">pci_read_config_byte</a>(<a class=\"id\" href=\"#router\">router</a>, <a class=\"id\" href=\"#reg\">reg</a>, &amp;<a class=\"id\" href=\"#x\">x</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#x\">x</a> &= ~(<a class=\"id\" href=\"#PIRQ_SIS_IRQ_MASK\">PIRQ_SIS_IRQ_MASK</a> | <a class=\"id\" href=\"#PIRQ_SIS_IRQ_DISABLE\">PIRQ_SIS_IRQ_DISABLE</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#x\">x</a> |= <a class=\"id\" href=\"#irq\">irq</a> ? <a class=\"id\" href=\"#irq\">irq</a>: <a class=\"id\" href=\"#PIRQ_SIS_IRQ_DISABLE\">PIRQ_SIS_IRQ_DISABLE</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_write_config_byte\">pci_write_config_byte</a>(<a class=\"id\" href=\"#router\">router</a>, <a class=\"id\" href=\"#reg\">reg</a>, <a class=\"id\" href=\"#x\">x</a>);", 
"<span class=\"ts\"/>return 1;", 
"}", 
"", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * VLSI: nibble offset 0x74 - educated guess due to routing table and</span>", 
"<span class=\"comment\"> *       config space of VLSI 82C534 PCI-bridge/router (1004:0102)</span>", 
"<span class=\"comment\"> *       Tested on HP OmniBook 800 covering PIRQ 1, 2, 4, 8 for onboard</span>", 
"<span class=\"comment\"> *       devices, PIRQ 3 for non-pci(!) soundchip and (untested) PIRQ 6</span>", 
"<span class=\"comment\"> *       for the busbridge to the docking station.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static int <a class=\"id\" href=\"#pirq_vlsi_get\">pirq_vlsi_get</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON_ONCE\">WARN_ON_ONCE</a>(<a class=\"id\" href=\"#pirq\">pirq</a> >= 9);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pirq\">pirq</a> &gt; 8) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_info\">dev_info</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"VLSI router PIRQ escape (%d)\\n\", <a class=\"id\" href=\"#pirq\">pirq</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#read_config_nybble\">read_config_nybble</a>(<a class=\"id\" href=\"#router\">router</a>, 0x74, <a class=\"id\" href=\"#pirq\">pirq</a>-1);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#pirq_vlsi_set\">pirq_vlsi_set</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>, int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON_ONCE\">WARN_ON_ONCE</a>(<a class=\"id\" href=\"#pirq\">pirq</a> >= 9);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pirq\">pirq</a> &gt; 8) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_info\">dev_info</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"VLSI router PIRQ escape (%d)\\n\", <a class=\"id\" href=\"#pirq\">pirq</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#write_config_nybble\">write_config_nybble</a>(<a class=\"id\" href=\"#router\">router</a>, 0x74, <a class=\"id\" href=\"#pirq\">pirq</a>-1, <a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/>return 1;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * ServerWorks: PCI interrupts mapped to system IRQ lines through Index</span>", 
"<span class=\"comment\"> * and Redirect I/O registers (0x0c00 and 0x0c01).  The Index register</span>", 
"<span class=\"comment\"> * format is (PCIIRQ## | 0x10), e.g.: PCIIRQ10=0x1a.  The Redirect</span>", 
"<span class=\"comment\"> * register is a straight binary coding of desired PIC IRQ (low nibble).</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * The 'link' value in the PIRQ table is already in the correct format</span>", 
"<span class=\"comment\"> * for the Index register.  There are some special index values:</span>", 
"<span class=\"comment\"> * 0x00 for ACPI (SCI), 0x01 for USB, 0x02 for IDE0, 0x04 for IDE1,</span>", 
"<span class=\"comment\"> * and 0x03 for SMBus.</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#pirq_serverworks_get\">pirq_serverworks_get</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#pirq\">pirq</a>, 0xc00);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#inb\">inb</a>(0xc01) &amp; 0xf;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#pirq_serverworks_set\">pirq_serverworks_set</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#pirq\">pirq</a>, int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#pirq\">pirq</a>, 0xc00);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#irq\">irq</a>, 0xc01);", 
"<span class=\"ts\"/>return 1;", 
"}", 
"", 
"<span class=\"comment\">/* Support for AMD756 PCI IRQ Routing</span>", 
"<span class=\"comment\"> * Jhon H. Caicedo &lt;jhcaiced@osso.org.co&gt;</span>", 
"<span class=\"comment\"> * Jun/21/2001 0.2.0 Release, fixed to use \"nybble\" functions... (jhcaiced)</span>", 
"<span class=\"comment\"> * Jun/19/2001 Alpha Release 0.1.0 (jhcaiced)</span>", 
"<span class=\"comment\"> * The AMD756 pirq rules are nibble-based</span>", 
"<span class=\"comment\"> * offset 0x56 0-3 PIRQA  4-7  PIRQB</span>", 
"<span class=\"comment\"> * offset 0x57 0-3 PIRQC  4-7  PIRQD</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#pirq_amd756_get\">pirq_amd756_get</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#irq\">irq</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#irq\">irq</a> = 0;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pirq\">pirq</a> <= 4)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irq\">irq</a> = <a class=\"id\" href=\"#read_config_nybble\">read_config_nybble</a>(<a class=\"id\" href=\"#router\">router</a>, 0x56, <a class=\"id\" href=\"#pirq\">pirq</a> - 1);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_info\">dev_info</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/> \"AMD756: dev [%04x:%04x], router PIRQ %d get IRQ %d\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#vendor\">vendor</a>, <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#device\">device</a>, <a class=\"id\" href=\"#pirq\">pirq</a>, <a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#irq\">irq</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#pirq_amd756_set\">pirq_amd756_set</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>, int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_info\">dev_info</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/> \"AMD756: dev [%04x:%04x], router PIRQ %d set IRQ %d\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#vendor\">vendor</a>, <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#device\">device</a>, <a class=\"id\" href=\"#pirq\">pirq</a>, <a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pirq\">pirq</a> <= 4)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#write_config_nybble\">write_config_nybble</a>(<a class=\"id\" href=\"#router\">router</a>, 0x56, <a class=\"id\" href=\"#pirq\">pirq</a> - 1, <a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/>return 1;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * PicoPower PT86C523</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#pirq_pico_get\">pirq_pico_get</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(0x10 + ((<a class=\"id\" href=\"#pirq\">pirq</a> - 1) >> 1), 0x24);", 
"<span class=\"ts\"/>return ((<a class=\"id\" href=\"#pirq\">pirq</a> - 1) &amp; 1) ? (<a class=\"id\" href=\"#inb\">inb</a>(0x26) >> 4) : (<a class=\"id\" href=\"#inb\">inb</a>(0x26) &amp; 0xf);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#pirq_pico_set\">pirq_pico_set</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#x\">x</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(0x10 + ((<a class=\"id\" href=\"#pirq\">pirq</a> - 1) >> 1), 0x24);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#x\">x</a> = <a class=\"id\" href=\"#inb\">inb</a>(0x26);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#x\">x</a> = ((<a class=\"id\" href=\"#pirq\">pirq</a> - 1) &amp; 1) ? ((<a class=\"id\" href=\"#x\">x</a> &amp; 0x0f) | (<a class=\"id\" href=\"#irq\">irq</a> << 4)) : ((<a class=\"id\" href=\"#x\">x</a> &amp; 0xf0) | (<a class=\"id\" href=\"#irq\">irq</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#x\">x</a>, 0x26);", 
"<span class=\"ts\"/>return 1;", 
"}", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_PCI_BIOS\">CONFIG_PCI_BIOS</a>", 
"", 
"static int <a class=\"id\" href=\"#pirq_bios_set\">pirq_bios_set</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#pirq\">pirq</a>, int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#bridge\">bridge</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#pin\">pin</a> = <a class=\"id\" href=\"#pci_get_interrupt_pin\">pci_get_interrupt_pin</a>(<a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#bridge\">bridge</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#pcibios_set_irq_routing\">pcibios_set_irq_routing</a>(<a class=\"id\" href=\"#bridge\">bridge</a>, <a class=\"id\" href=\"#pin\">pin</a> - 1, <a class=\"id\" href=\"#irq\">irq</a>);", 
"}", 
"", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"static <a class=\"id\" href=\"#__init\">__init</a> int <a class=\"id\" href=\"#intel_router_probe\">intel_router_probe</a>(struct <a class=\"id\" href=\"#irq_router\">irq_router</a> *<a class=\"id\" href=\"#r\">r</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, <a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#device\">device</a>)", 
"{", 
"<span class=\"ts\"/>static struct <a class=\"id\" href=\"#pci_device_id\">pci_device_id</a> <a class=\"id\" href=\"#__initdata\">__initdata</a> <a class=\"id\" href=\"#pirq_440gx\">pirq_440gx</a>[] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_DEVICE\">PCI_DEVICE</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82443GX_0\">PCI_DEVICE_ID_INTEL_82443GX_0</a>) },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_DEVICE\">PCI_DEVICE</a>(<a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82443GX_2\">PCI_DEVICE_ID_INTEL_82443GX_2</a>) },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ },", 
"<span class=\"ts\"/>};", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* 440GX has a proprietary PIRQ router -- don't use it */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pci_dev_present\">pci_dev_present</a>(<a class=\"id\" href=\"#pirq_440gx\">pirq_440gx</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#device\">device</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82371FB_0\">PCI_DEVICE_ID_INTEL_82371FB_0</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82371SB_0\">PCI_DEVICE_ID_INTEL_82371SB_0</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82371AB_0\">PCI_DEVICE_ID_INTEL_82371AB_0</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82371MX\">PCI_DEVICE_ID_INTEL_82371MX</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82443MX_0\">PCI_DEVICE_ID_INTEL_82443MX_0</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82801AA_0\">PCI_DEVICE_ID_INTEL_82801AA_0</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82801AB_0\">PCI_DEVICE_ID_INTEL_82801AB_0</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82801BA_0\">PCI_DEVICE_ID_INTEL_82801BA_0</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82801BA_10\">PCI_DEVICE_ID_INTEL_82801BA_10</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82801CA_0\">PCI_DEVICE_ID_INTEL_82801CA_0</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82801CA_12\">PCI_DEVICE_ID_INTEL_82801CA_12</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82801DB_0\">PCI_DEVICE_ID_INTEL_82801DB_0</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82801E_0\">PCI_DEVICE_ID_INTEL_82801E_0</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_82801EB_0\">PCI_DEVICE_ID_INTEL_82801EB_0</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ESB_1\">PCI_DEVICE_ID_INTEL_ESB_1</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH6_0\">PCI_DEVICE_ID_INTEL_ICH6_0</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH6_1\">PCI_DEVICE_ID_INTEL_ICH6_1</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH7_0\">PCI_DEVICE_ID_INTEL_ICH7_0</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH7_1\">PCI_DEVICE_ID_INTEL_ICH7_1</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH7_30\">PCI_DEVICE_ID_INTEL_ICH7_30</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH7_31\">PCI_DEVICE_ID_INTEL_ICH7_31</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_TGP_LPC\">PCI_DEVICE_ID_INTEL_TGP_LPC</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ESB2_0\">PCI_DEVICE_ID_INTEL_ESB2_0</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH8_0\">PCI_DEVICE_ID_INTEL_ICH8_0</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH8_1\">PCI_DEVICE_ID_INTEL_ICH8_1</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH8_2\">PCI_DEVICE_ID_INTEL_ICH8_2</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH8_3\">PCI_DEVICE_ID_INTEL_ICH8_3</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH8_4\">PCI_DEVICE_ID_INTEL_ICH8_4</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH9_0\">PCI_DEVICE_ID_INTEL_ICH9_0</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH9_1\">PCI_DEVICE_ID_INTEL_ICH9_1</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH9_2\">PCI_DEVICE_ID_INTEL_ICH9_2</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH9_3\">PCI_DEVICE_ID_INTEL_ICH9_3</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH9_4\">PCI_DEVICE_ID_INTEL_ICH9_4</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH9_5\">PCI_DEVICE_ID_INTEL_ICH9_5</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_TOLAPAI_0\">PCI_DEVICE_ID_INTEL_TOLAPAI_0</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH10_0\">PCI_DEVICE_ID_INTEL_ICH10_0</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH10_1\">PCI_DEVICE_ID_INTEL_ICH10_1</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH10_2\">PCI_DEVICE_ID_INTEL_ICH10_2</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_ICH10_3\">PCI_DEVICE_ID_INTEL_ICH10_3</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a> = \"PIIX/ICH\";", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#get\">get</a> = <a class=\"id\" href=\"#pirq_piix_get\">pirq_piix_get</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#pirq_piix_set\">pirq_piix_set</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#device\">device</a> >= <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_PCH_LPC_MIN\">PCI_DEVICE_ID_INTEL_PCH_LPC_MIN</a>) && ", 
"<span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#device\">device</a> <= <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_PCH_LPC_MAX\">PCI_DEVICE_ID_INTEL_PCH_LPC_MAX</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a> = \"PIIX/ICH\";", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#get\">get</a> = <a class=\"id\" href=\"#pirq_piix_get\">pirq_piix_get</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#pirq_piix_set\">pirq_piix_set</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#device\">device</a> >= <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_CPT_LPC_MIN\">PCI_DEVICE_ID_INTEL_CPT_LPC_MIN</a>) && ", 
"<span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#device\">device</a> <= <a class=\"id\" href=\"#PCI_DEVICE_ID_INTEL_CPT_LPC_MAX\">PCI_DEVICE_ID_INTEL_CPT_LPC_MAX</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a> = \"PIIX/ICH\";", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#get\">get</a> = <a class=\"id\" href=\"#pirq_piix_get\">pirq_piix_get</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#pirq_piix_set\">pirq_piix_set</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#__init\">__init</a> int <a class=\"id\" href=\"#via_router_probe\">via_router_probe</a>(struct <a class=\"id\" href=\"#irq_router\">irq_router</a> *<a class=\"id\" href=\"#r\">r</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, <a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#device\">device</a>)", 
"{", 
"<span class=\"ts\"/><span class=\"comment\">/* FIXME: We should move some of the quirk fixup stuff here */</span>", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * workarounds for some buggy BIOSes</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#device\">device</a> == <a class=\"id\" href=\"#PCI_DEVICE_ID_VIA_82C586_0\">PCI_DEVICE_ID_VIA_82C586_0</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>switch (<a class=\"id\" href=\"#router\">router</a>-><a class=\"id\" href=\"#device\">device</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_VIA_82C686\">PCI_DEVICE_ID_VIA_82C686</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * Asus k7m bios wrongly reports 82C686A</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * as 586-compatible</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#device\">device</a> = <a class=\"id\" href=\"#PCI_DEVICE_ID_VIA_82C686\">PCI_DEVICE_ID_VIA_82C686</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_VIA_8235\">PCI_DEVICE_ID_VIA_8235</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/**</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * Asus a7v-x bios wrongly reports 8235</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * as 586-compatible</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#device\">device</a> = <a class=\"id\" href=\"#PCI_DEVICE_ID_VIA_8235\">PCI_DEVICE_ID_VIA_8235</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_VIA_8237\">PCI_DEVICE_ID_VIA_8237</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/**</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * Asus a7v600 bios wrongly reports 8237</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * as 586-compatible</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#device\">device</a> = <a class=\"id\" href=\"#PCI_DEVICE_ID_VIA_8237\">PCI_DEVICE_ID_VIA_8237</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#device\">device</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_VIA_82C586_0\">PCI_DEVICE_ID_VIA_82C586_0</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a> = \"VIA\";", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#get\">get</a> = <a class=\"id\" href=\"#pirq_via586_get\">pirq_via586_get</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#pirq_via586_set\">pirq_via586_set</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_VIA_82C596\">PCI_DEVICE_ID_VIA_82C596</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_VIA_82C686\">PCI_DEVICE_ID_VIA_82C686</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_VIA_8231\">PCI_DEVICE_ID_VIA_8231</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_VIA_8233A\">PCI_DEVICE_ID_VIA_8233A</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_VIA_8235\">PCI_DEVICE_ID_VIA_8235</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_VIA_8237\">PCI_DEVICE_ID_VIA_8237</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* FIXME: add new ones for 8233/5 */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a> = \"VIA\";", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#get\">get</a> = <a class=\"id\" href=\"#pirq_via_get\">pirq_via_get</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#pirq_via_set\">pirq_via_set</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#__init\">__init</a> int <a class=\"id\" href=\"#vlsi_router_probe\">vlsi_router_probe</a>(struct <a class=\"id\" href=\"#irq_router\">irq_router</a> *<a class=\"id\" href=\"#r\">r</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, <a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#device\">device</a>)", 
"{", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#device\">device</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_VLSI_82C534\">PCI_DEVICE_ID_VLSI_82C534</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a> = \"VLSI 82C534\";", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#get\">get</a> = <a class=\"id\" href=\"#pirq_vlsi_get\">pirq_vlsi_get</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#pirq_vlsi_set\">pirq_vlsi_set</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"", 
"static <a class=\"id\" href=\"#__init\">__init</a> int <a class=\"id\" href=\"#serverworks_router_probe\">serverworks_router_probe</a>(struct <a class=\"id\" href=\"#irq_router\">irq_router</a> *<a class=\"id\" href=\"#r\">r</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, <a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#device\">device</a>)", 
"{", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#device\">device</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_SERVERWORKS_OSB4\">PCI_DEVICE_ID_SERVERWORKS_OSB4</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_SERVERWORKS_CSB5\">PCI_DEVICE_ID_SERVERWORKS_CSB5</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a> = \"ServerWorks\";", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#get\">get</a> = <a class=\"id\" href=\"#pirq_serverworks_get\">pirq_serverworks_get</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#pirq_serverworks_set\">pirq_serverworks_set</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#__init\">__init</a> int <a class=\"id\" href=\"#sis_router_probe\">sis_router_probe</a>(struct <a class=\"id\" href=\"#irq_router\">irq_router</a> *<a class=\"id\" href=\"#r\">r</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, <a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#device\">device</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#device\">device</a> != <a class=\"id\" href=\"#PCI_DEVICE_ID_SI_503\">PCI_DEVICE_ID_SI_503</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a> = \"SIS\";", 
"<span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#get\">get</a> = <a class=\"id\" href=\"#pirq_sis_get\">pirq_sis_get</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#pirq_sis_set\">pirq_sis_set</a>;", 
"<span class=\"ts\"/>return 1;", 
"}", 
"", 
"static <a class=\"id\" href=\"#__init\">__init</a> int <a class=\"id\" href=\"#cyrix_router_probe\">cyrix_router_probe</a>(struct <a class=\"id\" href=\"#irq_router\">irq_router</a> *<a class=\"id\" href=\"#r\">r</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, <a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#device\">device</a>)", 
"{", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#device\">device</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_CYRIX_5520\">PCI_DEVICE_ID_CYRIX_5520</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a> = \"NatSemi\";", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#get\">get</a> = <a class=\"id\" href=\"#pirq_cyrix_get\">pirq_cyrix_get</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#pirq_cyrix_set\">pirq_cyrix_set</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#__init\">__init</a> int <a class=\"id\" href=\"#opti_router_probe\">opti_router_probe</a>(struct <a class=\"id\" href=\"#irq_router\">irq_router</a> *<a class=\"id\" href=\"#r\">r</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, <a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#device\">device</a>)", 
"{", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#device\">device</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_OPTI_82C700\">PCI_DEVICE_ID_OPTI_82C700</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a> = \"OPTI\";", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#get\">get</a> = <a class=\"id\" href=\"#pirq_opti_get\">pirq_opti_get</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#pirq_opti_set\">pirq_opti_set</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#__init\">__init</a> int <a class=\"id\" href=\"#ite_router_probe\">ite_router_probe</a>(struct <a class=\"id\" href=\"#irq_router\">irq_router</a> *<a class=\"id\" href=\"#r\">r</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, <a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#device\">device</a>)", 
"{", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#device\">device</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_ITE_IT8330G_0\">PCI_DEVICE_ID_ITE_IT8330G_0</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a> = \"ITE\";", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#get\">get</a> = <a class=\"id\" href=\"#pirq_ite_get\">pirq_ite_get</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#pirq_ite_set\">pirq_ite_set</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#__init\">__init</a> int <a class=\"id\" href=\"#ali_router_probe\">ali_router_probe</a>(struct <a class=\"id\" href=\"#irq_router\">irq_router</a> *<a class=\"id\" href=\"#r\">r</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, <a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#device\">device</a>)", 
"{", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#device\">device</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_AL_M1533\">PCI_DEVICE_ID_AL_M1533</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_AL_M1563\">PCI_DEVICE_ID_AL_M1563</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a> = \"ALI\";", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#get\">get</a> = <a class=\"id\" href=\"#pirq_ali_get\">pirq_ali_get</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#pirq_ali_set\">pirq_ali_set</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#__init\">__init</a> int <a class=\"id\" href=\"#amd_router_probe\">amd_router_probe</a>(struct <a class=\"id\" href=\"#irq_router\">irq_router</a> *<a class=\"id\" href=\"#r\">r</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, <a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#device\">device</a>)", 
"{", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#device\">device</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_AMD_VIPER_740B\">PCI_DEVICE_ID_AMD_VIPER_740B</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a> = \"AMD756\";", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_AMD_VIPER_7413\">PCI_DEVICE_ID_AMD_VIPER_7413</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a> = \"AMD766\";", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_AMD_VIPER_7443\">PCI_DEVICE_ID_AMD_VIPER_7443</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a> = \"AMD768\";", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#get\">get</a> = <a class=\"id\" href=\"#pirq_amd756_get\">pirq_amd756_get</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#pirq_amd756_set\">pirq_amd756_set</a>;", 
"<span class=\"ts\"/>return 1;", 
"}", 
"", 
"static <a class=\"id\" href=\"#__init\">__init</a> int <a class=\"id\" href=\"#pico_router_probe\">pico_router_probe</a>(struct <a class=\"id\" href=\"#irq_router\">irq_router</a> *<a class=\"id\" href=\"#r\">r</a>, struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#router\">router</a>, <a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#device\">device</a>)", 
"{", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#device\">device</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_PICOPOWER_PT86C523\">PCI_DEVICE_ID_PICOPOWER_PT86C523</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a> = \"PicoPower PT86C523\";", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#get\">get</a> = <a class=\"id\" href=\"#pirq_pico_get\">pirq_pico_get</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#pirq_pico_set\">pirq_pico_set</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#PCI_DEVICE_ID_PICOPOWER_PT86C523BBP\">PCI_DEVICE_ID_PICOPOWER_PT86C523BBP</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a> = \"PicoPower PT86C523 rev. BB+\";", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#get\">get</a> = <a class=\"id\" href=\"#pirq_pico_get\">pirq_pico_get</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#pirq_pico_set\">pirq_pico_set</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#__initdata\">__initdata</a> struct <a class=\"id\" href=\"#irq_router_handler\">irq_router_handler</a> <a class=\"id\" href=\"#pirq_routers\">pirq_routers</a>[] = {", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_VENDOR_ID_INTEL\">PCI_VENDOR_ID_INTEL</a>, <a class=\"id\" href=\"#intel_router_probe\">intel_router_probe</a> },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_VENDOR_ID_AL\">PCI_VENDOR_ID_AL</a>, <a class=\"id\" href=\"#ali_router_probe\">ali_router_probe</a> },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_VENDOR_ID_ITE\">PCI_VENDOR_ID_ITE</a>, <a class=\"id\" href=\"#ite_router_probe\">ite_router_probe</a> },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_VENDOR_ID_VIA\">PCI_VENDOR_ID_VIA</a>, <a class=\"id\" href=\"#via_router_probe\">via_router_probe</a> },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_VENDOR_ID_OPTI\">PCI_VENDOR_ID_OPTI</a>, <a class=\"id\" href=\"#opti_router_probe\">opti_router_probe</a> },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_VENDOR_ID_SI\">PCI_VENDOR_ID_SI</a>, <a class=\"id\" href=\"#sis_router_probe\">sis_router_probe</a> },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_VENDOR_ID_CYRIX\">PCI_VENDOR_ID_CYRIX</a>, <a class=\"id\" href=\"#cyrix_router_probe\">cyrix_router_probe</a> },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_VENDOR_ID_VLSI\">PCI_VENDOR_ID_VLSI</a>, <a class=\"id\" href=\"#vlsi_router_probe\">vlsi_router_probe</a> },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_VENDOR_ID_SERVERWORKS\">PCI_VENDOR_ID_SERVERWORKS</a>, <a class=\"id\" href=\"#serverworks_router_probe\">serverworks_router_probe</a> },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_VENDOR_ID_AMD\">PCI_VENDOR_ID_AMD</a>, <a class=\"id\" href=\"#amd_router_probe\">amd_router_probe</a> },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_VENDOR_ID_PICOPOWER\">PCI_VENDOR_ID_PICOPOWER</a>, <a class=\"id\" href=\"#pico_router_probe\">pico_router_probe</a> },", 
"<span class=\"ts\"/><span class=\"comment\">/* Someone with docs needs to add the ATI Radeon IGP */</span>", 
"<span class=\"ts\"/>{ 0, <a class=\"id\" href=\"#NULL\">NULL</a> }", 
"};", 
"static struct <a class=\"id\" href=\"#irq_router\">irq_router</a> <a class=\"id\" href=\"#pirq_router\">pirq_router</a>;", 
"static struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#pirq_router_dev\">pirq_router_dev</a>;", 
"", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>FIXME: should we have an option to say \"generic for</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>chipset\" ?</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static void <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#pirq_find_router\">pirq_find_router</a>(struct <a class=\"id\" href=\"#irq_router\">irq_router</a> *<a class=\"id\" href=\"#r\">r</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#irq_routing_table\">irq_routing_table</a> *<a class=\"id\" href=\"#rt\">rt</a> = <a class=\"id\" href=\"#pirq_table\">pirq_table</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#irq_router_handler\">irq_router_handler</a> *<a class=\"id\" href=\"#h\">h</a>;", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_PCI_BIOS\">CONFIG_PCI_BIOS</a>", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#rt\">rt</a>-><a class=\"id\" href=\"#signature\">signature</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"PCI: Using BIOS for IRQ routing\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#pirq_bios_set\">pirq_bios_set</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a> = \"BIOS\";", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Default unless a driver reloads it */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#name\">name</a> = \"default\";", 
"<span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#get\">get</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#DBG\">DBG</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a> \"PCI: Attempting to find IRQ router for [%04x:%04x]\\n\",", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#rt\">rt</a>-><a class=\"id\" href=\"#rtr_vendor\">rtr_vendor</a>, <a class=\"id\" href=\"#rt\">rt</a>-><a class=\"id\" href=\"#rtr_device\">rtr_device</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pirq_router_dev\">pirq_router_dev</a> = <a class=\"id\" href=\"#pci_get_bus_and_slot\">pci_get_bus_and_slot</a>(<a class=\"id\" href=\"#rt\">rt</a>-><a class=\"id\" href=\"#rtr_bus\">rtr_bus</a>, <a class=\"id\" href=\"#rt\">rt</a>-><a class=\"id\" href=\"#rtr_devfn\">rtr_devfn</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#pirq_router_dev\">pirq_router_dev</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#DBG\">DBG</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a> \"PCI: Interrupt router not found at \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"%02x:%02x\\n\", <a class=\"id\" href=\"#rt\">rt</a>-><a class=\"id\" href=\"#rtr_bus\">rtr_bus</a>, <a class=\"id\" href=\"#rt\">rt</a>-><a class=\"id\" href=\"#rtr_devfn\">rtr_devfn</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#h\">h</a> = <a class=\"id\" href=\"#pirq_routers\">pirq_routers</a>; <a class=\"id\" href=\"#h\">h</a>-><a class=\"id\" href=\"#vendor\">vendor</a>; <a class=\"id\" href=\"#h\">h</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* First look for a router match */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rt\">rt</a>-><a class=\"id\" href=\"#rtr_vendor\">rtr_vendor</a> == <a class=\"id\" href=\"#h\">h</a>-><a class=\"id\" href=\"#vendor\">vendor</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#h\">h</a>-><a class=\"id\" href=\"#probe\">probe</a>(<a class=\"id\" href=\"#r\">r</a>, <a class=\"id\" href=\"#pirq_router_dev\">pirq_router_dev</a>, <a class=\"id\" href=\"#rt\">rt</a>-><a class=\"id\" href=\"#rtr_device\">rtr_device</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Fall back to a device match */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#pirq_router_dev\">pirq_router_dev</a>-><a class=\"id\" href=\"#vendor\">vendor</a> == <a class=\"id\" href=\"#h\">h</a>-><a class=\"id\" href=\"#vendor\">vendor</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#h\">h</a>-><a class=\"id\" href=\"#probe\">probe</a>(<a class=\"id\" href=\"#r\">r</a>, <a class=\"id\" href=\"#pirq_router_dev\">pirq_router_dev</a>, <a class=\"id\" href=\"#pirq_router_dev\">pirq_router_dev</a>-><a class=\"id\" href=\"#device\">device</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_info\">dev_info</a>(&amp;<a class=\"id\" href=\"#pirq_router_dev\">pirq_router_dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"%s IRQ router [%04x:%04x]\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#pirq_router\">pirq_router</a>.<a class=\"id\" href=\"#name\">name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#pirq_router_dev\">pirq_router_dev</a>-><a class=\"id\" href=\"#vendor\">vendor</a>, <a class=\"id\" href=\"#pirq_router_dev\">pirq_router_dev</a>-><a class=\"id\" href=\"#device\">device</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* The device remains referenced for the kernel lifetime */</span>", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#irq_info\">irq_info</a> *<a class=\"id\" href=\"#pirq_get_info\">pirq_get_info</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#irq_routing_table\">irq_routing_table</a> *<a class=\"id\" href=\"#rt\">rt</a> = <a class=\"id\" href=\"#pirq_table\">pirq_table</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#entries\">entries</a> = (<a class=\"id\" href=\"#rt\">rt</a>-><a class=\"id\" href=\"#size\">size</a> - sizeof(struct <a class=\"id\" href=\"#irq_routing_table\">irq_routing_table</a>)) /", 
"<span class=\"ts\"/><span class=\"ts\"/>sizeof(struct <a class=\"id\" href=\"#irq_info\">irq_info</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#irq_info\">irq_info</a> *<a class=\"id\" href=\"#info\">info</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#info\">info</a> = <a class=\"id\" href=\"#rt\">rt</a>-><a class=\"id\" href=\"#slots\">slots</a>; <a class=\"id\" href=\"#entries\">entries</a>--; <a class=\"id\" href=\"#info\">info</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#bus\">bus</a> == <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#bus\">bus</a>-><a class=\"id\" href=\"#number\">number</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#PCI_SLOT\">PCI_SLOT</a>(<a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#devfn\">devfn</a>) == <a class=\"id\" href=\"#PCI_SLOT\">PCI_SLOT</a>(<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#devfn\">devfn</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#info\">info</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#pcibios_lookup_irq\">pcibios_lookup_irq</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>, int <a class=\"id\" href=\"#assign\">assign</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#pin\">pin</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#irq_info\">irq_info</a> *<a class=\"id\" href=\"#info\">info</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#pirq\">pirq</a>, <a class=\"id\" href=\"#newirq\">newirq</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#irq\">irq</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#mask\">mask</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#irq_router\">irq_router</a> *<a class=\"id\" href=\"#r\">r</a> = &amp;<a class=\"id\" href=\"#pirq_router\">pirq_router</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev2\">dev2</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#msg\">msg</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Find IRQ pin */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_read_config_byte\">pci_read_config_byte</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#PCI_INTERRUPT_PIN\">PCI_INTERRUPT_PIN</a>, &amp;<a class=\"id\" href=\"#pin\">pin</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#pin\">pin</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_dbg\">dev_dbg</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"no interrupt pin\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#io_apic_assign_pci_irqs\">io_apic_assign_pci_irqs</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Find IRQ routing entry */</span>", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#pirq_table\">pirq_table</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a> = <a class=\"id\" href=\"#pirq_get_info\">pirq_get_info</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#info\">info</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_dbg\">dev_dbg</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"PCI INT %c not found in routing table\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>'A' + <a class=\"id\" href=\"#pin\">pin</a> - 1);", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pirq\">pirq</a> = <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#irq\">irq</a>[<a class=\"id\" href=\"#pin\">pin</a> - 1].<a class=\"id\" href=\"#link\">link</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mask\">mask</a> = <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#irq\">irq</a>[<a class=\"id\" href=\"#pin\">pin</a> - 1].<a class=\"id\" href=\"#bitmap\">bitmap</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#pirq\">pirq</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_dbg\">dev_dbg</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"PCI INT %c not routed\\n\", 'A' + <a class=\"id\" href=\"#pin\">pin</a> - 1);", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_dbg\">dev_dbg</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"PCI INT %c -> PIRQ %02x, mask %04x, excl %04x\",", 
"<span class=\"ts\"/><span class=\"ts\"/>'A' + <a class=\"id\" href=\"#pin\">pin</a> - 1, <a class=\"id\" href=\"#pirq\">pirq</a>, <a class=\"id\" href=\"#mask\">mask</a>, <a class=\"id\" href=\"#pirq_table\">pirq_table</a>-><a class=\"id\" href=\"#exclusive_irqs\">exclusive_irqs</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mask\">mask</a> &= <a class=\"id\" href=\"#pcibios_irq_mask\">pcibios_irq_mask</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Work around broken HP Pavilion Notebooks which assign USB to</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   IRQ 9 even though it is actually wired to IRQ 11 */</span>", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#broken_hp_bios_irq9\">broken_hp_bios_irq9</a> && <a class=\"id\" href=\"#pirq\">pirq</a> == 0x59 && <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#irq\">irq</a> == 9) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#irq\">irq</a> = 11;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pci_write_config_byte\">pci_write_config_byte</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#PCI_INTERRUPT_LINE\">PCI_INTERRUPT_LINE</a>, 11);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#set\">set</a>(<a class=\"id\" href=\"#pirq_router_dev\">pirq_router_dev</a>, <a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#pirq\">pirq</a>, 11);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* same for Acer Travelmate 360, but with CB and irq 11 -&gt; 10 */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#acer_tm360_irqrouting\">acer_tm360_irqrouting</a> && <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#irq\">irq</a> == 11 &&", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#vendor\">vendor</a> == <a class=\"id\" href=\"#PCI_VENDOR_ID_O2\">PCI_VENDOR_ID_O2</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pirq\">pirq</a> = 0x68;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mask\">mask</a> = 0x400;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#irq\">irq</a> = <a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#get\">get</a>(<a class=\"id\" href=\"#pirq_router_dev\">pirq_router_dev</a>, <a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#pirq\">pirq</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pci_write_config_byte\">pci_write_config_byte</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#PCI_INTERRUPT_LINE\">PCI_INTERRUPT_LINE</a>, <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Find the best IRQ to assign: use the one</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * reported by the device if possible.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#newirq\">newirq</a> = <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#irq\">irq</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#newirq\">newirq</a> && !((1 << <a class=\"id\" href=\"#newirq\">newirq</a>) &amp; <a class=\"id\" href=\"#mask\">mask</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#pci_probe\">pci_probe</a> &amp; <a class=\"id\" href=\"#PCI_USE_PIRQ_MASK\">PCI_USE_PIRQ_MASK</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#newirq\">newirq</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_warn\">dev_warn</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"IRQ %d doesn't match PIRQ mask \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> \"%#x; try pci=usepirqmask\\n\", <a class=\"id\" href=\"#newirq\">newirq</a>, <a class=\"id\" href=\"#mask\">mask</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#newirq\">newirq</a> && <a class=\"id\" href=\"#assign\">assign</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; 16; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!(<a class=\"id\" href=\"#mask\">mask</a> &amp; (1 << <a class=\"id\" href=\"#i\">i</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#pirq_penalty\">pirq_penalty</a>[<a class=\"id\" href=\"#i\">i</a>] &lt; <a class=\"id\" href=\"#pirq_penalty\">pirq_penalty</a>[<a class=\"id\" href=\"#newirq\">newirq</a>] &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#can_request_irq\">can_request_irq</a>(<a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#IRQF_SHARED\">IRQF_SHARED</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#newirq\">newirq</a> = <a class=\"id\" href=\"#i\">i</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_dbg\">dev_dbg</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"PCI INT %c -> newirq %d\", 'A' + <a class=\"id\" href=\"#pin\">pin</a> - 1, <a class=\"id\" href=\"#newirq\">newirq</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Check if it is hardcoded */</span>", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#pirq\">pirq</a> &amp; 0xf0) == 0xf0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irq\">irq</a> = <a class=\"id\" href=\"#pirq\">pirq</a> &amp; 0xf;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#msg\">msg</a> = \"hardcoded\";", 
"<span class=\"ts\"/>} else if (<a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#get\">get</a> && (<a class=\"id\" href=\"#irq\">irq</a> = <a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#get\">get</a>(<a class=\"id\" href=\"#pirq_router_dev\">pirq_router_dev</a>, <a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#pirq\">pirq</a>)) && \\", 
"<span class=\"ts\"/>((!(<a class=\"id\" href=\"#pci_probe\">pci_probe</a> &amp; <a class=\"id\" href=\"#PCI_USE_PIRQ_MASK\">PCI_USE_PIRQ_MASK</a>)) || ((1 << <a class=\"id\" href=\"#irq\">irq</a>) &amp; <a class=\"id\" href=\"#mask\">mask</a>))) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#msg\">msg</a> = \"found\";", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#eisa_set_level_irq\">eisa_set_level_irq</a>(<a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/>} else if (<a class=\"id\" href=\"#newirq\">newirq</a> && <a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#set\">set</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#class\">class</a> >> 8) != <a class=\"id\" href=\"#PCI_CLASS_DISPLAY_VGA\">PCI_CLASS_DISPLAY_VGA</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#r\">r</a>-><a class=\"id\" href=\"#set\">set</a>(<a class=\"id\" href=\"#pirq_router_dev\">pirq_router_dev</a>, <a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#pirq\">pirq</a>, <a class=\"id\" href=\"#newirq\">newirq</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#eisa_set_level_irq\">eisa_set_level_irq</a>(<a class=\"id\" href=\"#newirq\">newirq</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#msg\">msg</a> = \"assigned\";", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irq\">irq</a> = <a class=\"id\" href=\"#newirq\">newirq</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#irq\">irq</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#newirq\">newirq</a> && <a class=\"id\" href=\"#mask\">mask</a> == (1 << <a class=\"id\" href=\"#newirq\">newirq</a>)) {", 
];
xr_frag_insert('l/be/44e797266aed1608c10f2d1bb60e1a14d8d216.xr', __xr_tmp);
