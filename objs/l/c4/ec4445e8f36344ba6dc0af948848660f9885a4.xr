var __xr_tmp = [
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device_remove_file\">device_remove_file</a>(<a class=\"id\" href=\"#hwmon\">hwmon</a>-><a class=\"id\" href=\"#device\">device</a>, &amp;<a class=\"id\" href=\"#dev_attr_name\">dev_attr_name</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#hwmon_device_unregister\">hwmon_device_unregister</a>(<a class=\"id\" href=\"#hwmon\">hwmon</a>-><a class=\"id\" href=\"#device\">device</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#hwmon\">hwmon</a>);", 
"}", 
"#else", 
"static int", 
"<a class=\"id\" href=\"#thermal_add_hwmon_sysfs\">thermal_add_hwmon_sysfs</a>(struct <a class=\"id\" href=\"#thermal_zone_device\">thermal_zone_device</a> *<a class=\"id\" href=\"#tz\">tz</a>)", 
"{", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static void", 
"<a class=\"id\" href=\"#thermal_remove_hwmon_sysfs\">thermal_remove_hwmon_sysfs</a>(struct <a class=\"id\" href=\"#thermal_zone_device\">thermal_zone_device</a> *<a class=\"id\" href=\"#tz\">tz</a>)", 
"{", 
"}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"static void <a class=\"id\" href=\"#thermal_zone_device_set_polling\">thermal_zone_device_set_polling</a>(struct <a class=\"id\" href=\"#thermal_zone_device\">thermal_zone_device</a> *<a class=\"id\" href=\"#tz\">tz</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    int <a class=\"id\" href=\"#delay\">delay</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cancel_delayed_work\">cancel_delayed_work</a>(&amp;(<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#poll_queue\">poll_queue</a>));", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#delay\">delay</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#delay\">delay</a> &gt; 1000)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#schedule_delayed_work\">schedule_delayed_work</a>(&amp;(<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#poll_queue\">poll_queue</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#round_jiffies\">round_jiffies</a>(<a class=\"id\" href=\"#msecs_to_jiffies\">msecs_to_jiffies</a>(<a class=\"id\" href=\"#delay\">delay</a>)));", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#schedule_delayed_work\">schedule_delayed_work</a>(&amp;(<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#poll_queue\">poll_queue</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#msecs_to_jiffies\">msecs_to_jiffies</a>(<a class=\"id\" href=\"#delay\">delay</a>));", 
"}", 
"", 
"static void <a class=\"id\" href=\"#thermal_zone_device_passive\">thermal_zone_device_passive</a>(struct <a class=\"id\" href=\"#thermal_zone_device\">thermal_zone_device</a> *<a class=\"id\" href=\"#tz\">tz</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#temp\">temp</a>, int <a class=\"id\" href=\"#trip_temp\">trip_temp</a>, int <a class=\"id\" href=\"#trip\">trip</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#trend\">trend</a> = 0;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#thermal_cooling_device_instance\">thermal_cooling_device_instance</a> *<a class=\"id\" href=\"#instance\">instance</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#thermal_cooling_device\">thermal_cooling_device</a> *<a class=\"id\" href=\"#cdev\">cdev</a>;", 
"<span class=\"ts\"/>long <a class=\"id\" href=\"#state\">state</a>, <a class=\"id\" href=\"#max_state\">max_state</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Above Trip?</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * -----------</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Calculate the thermal trend (using the passive cooling equation)</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * and modify the performance limit for all passive cooling devices</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * accordingly.  Note that we assume symmetry.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#temp\">temp</a> >= <a class=\"id\" href=\"#trip_temp\">trip_temp</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#passive\">passive</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#trend\">trend</a> = (<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#tc1\">tc1</a> * (<a class=\"id\" href=\"#temp\">temp</a> - <a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#last_temperature\">last_temperature</a>)) +", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#tc2\">tc2</a> * (<a class=\"id\" href=\"#temp\">temp</a> - <a class=\"id\" href=\"#trip_temp\">trip_temp</a>));", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Heating up? */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#trend\">trend</a> &gt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#instance\">instance</a>, &amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#cooling_devices\">cooling_devices</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#node\">node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#instance\">instance</a>-><a class=\"id\" href=\"#trip\">trip</a> != <a class=\"id\" href=\"#trip\">trip</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cdev\">cdev</a> = <a class=\"id\" href=\"#instance\">instance</a>-><a class=\"id\" href=\"#cdev\">cdev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#get_cur_state\">get_cur_state</a>(<a class=\"id\" href=\"#cdev\">cdev</a>, &amp;<a class=\"id\" href=\"#state\">state</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#get_max_state\">get_max_state</a>(<a class=\"id\" href=\"#cdev\">cdev</a>, &amp;<a class=\"id\" href=\"#max_state\">max_state</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#state\">state</a>++ &lt; <a class=\"id\" href=\"#max_state\">max_state</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#set_cur_state\">set_cur_state</a>(<a class=\"id\" href=\"#cdev\">cdev</a>, <a class=\"id\" href=\"#state\">state</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>} else if (<a class=\"id\" href=\"#trend\">trend</a> &lt; 0) { <span class=\"comment\">/* Cooling off? */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#instance\">instance</a>, &amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#cooling_devices\">cooling_devices</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#node\">node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#instance\">instance</a>-><a class=\"id\" href=\"#trip\">trip</a> != <a class=\"id\" href=\"#trip\">trip</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cdev\">cdev</a> = <a class=\"id\" href=\"#instance\">instance</a>-><a class=\"id\" href=\"#cdev\">cdev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#get_cur_state\">get_cur_state</a>(<a class=\"id\" href=\"#cdev\">cdev</a>, &amp;<a class=\"id\" href=\"#state\">state</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#get_max_state\">get_max_state</a>(<a class=\"id\" href=\"#cdev\">cdev</a>, &amp;<a class=\"id\" href=\"#max_state\">max_state</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#state\">state</a> &gt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#set_cur_state\">set_cur_state</a>(<a class=\"id\" href=\"#cdev\">cdev</a>, --<a class=\"id\" href=\"#state\">state</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Below Trip?</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * -----------</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Implement passive cooling hysteresis to slowly increase performance</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * and avoid thrashing around the passive trip point.  Note that we</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * assume symmetry.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#instance\">instance</a>, &amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#cooling_devices\">cooling_devices</a>, <a class=\"id\" href=\"#node\">node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#instance\">instance</a>-><a class=\"id\" href=\"#trip\">trip</a> != <a class=\"id\" href=\"#trip\">trip</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cdev\">cdev</a> = <a class=\"id\" href=\"#instance\">instance</a>-><a class=\"id\" href=\"#cdev\">cdev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#get_cur_state\">get_cur_state</a>(<a class=\"id\" href=\"#cdev\">cdev</a>, &amp;<a class=\"id\" href=\"#state\">state</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#get_max_state\">get_max_state</a>(<a class=\"id\" href=\"#cdev\">cdev</a>, &amp;<a class=\"id\" href=\"#max_state\">max_state</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#state\">state</a> &gt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#set_cur_state\">set_cur_state</a>(<a class=\"id\" href=\"#cdev\">cdev</a>, --<a class=\"id\" href=\"#state\">state</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#state\">state</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#passive\">passive</a> = <a class=\"id\" href=\"#false\">false</a>;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static void <a class=\"id\" href=\"#thermal_zone_device_check\">thermal_zone_device_check</a>(struct <a class=\"id\" href=\"#work_struct\">work_struct</a> *<a class=\"id\" href=\"#work\">work</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#thermal_zone_device\">thermal_zone_device</a> *<a class=\"id\" href=\"#tz\">tz</a> = <a class=\"id\" href=\"#container_of\">container_of</a>(<a class=\"id\" href=\"#work\">work</a>, struct", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#thermal_zone_device\">thermal_zone_device</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#poll_queue\">poll_queue</a>.<a class=\"id\" href=\"#work\">work</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#thermal_zone_device_update\">thermal_zone_device_update</a>(<a class=\"id\" href=\"#tz\">tz</a>);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * thermal_zone_bind_cooling_device - bind a cooling device to a thermal zone</span>", 
"<span class=\"comment\"> * @tz:<span class=\"ts\"/><span class=\"ts\"/>thermal zone device</span>", 
"<span class=\"comment\"> * @trip:<span class=\"ts\"/>indicates which trip point the cooling devices is</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/>associated with in this thermal zone.</span>", 
"<span class=\"comment\"> * @cdev:<span class=\"ts\"/>thermal cooling device</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This function is usually called in the thermal zone device .bind callback.</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#thermal_zone_bind_cooling_device\">thermal_zone_bind_cooling_device</a>(struct <a class=\"id\" href=\"#thermal_zone_device\">thermal_zone_device</a> *<a class=\"id\" href=\"#tz\">tz</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     int <a class=\"id\" href=\"#trip\">trip</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     struct <a class=\"id\" href=\"#thermal_cooling_device\">thermal_cooling_device</a> *<a class=\"id\" href=\"#cdev\">cdev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#thermal_cooling_device_instance\">thermal_cooling_device_instance</a> *<a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#thermal_cooling_device_instance\">thermal_cooling_device_instance</a> *<a class=\"id\" href=\"#pos\">pos</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#thermal_zone_device\">thermal_zone_device</a> *<a class=\"id\" href=\"#pos1\">pos1</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#thermal_cooling_device\">thermal_cooling_device</a> *<a class=\"id\" href=\"#pos2\">pos2</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#result\">result</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#trip\">trip</a> >= <a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#trips\">trips</a> || (<a class=\"id\" href=\"#trip\">trip</a> &lt; 0 && <a class=\"id\" href=\"#trip\">trip</a> != <a class=\"id\" href=\"#THERMAL_TRIPS_NONE\">THERMAL_TRIPS_NONE</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#pos1\">pos1</a>, &amp;<a class=\"id\" href=\"#thermal_tz_list\">thermal_tz_list</a>, <a class=\"id\" href=\"#node\">node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#pos1\">pos1</a> == <a class=\"id\" href=\"#tz\">tz</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#pos2\">pos2</a>, &amp;<a class=\"id\" href=\"#thermal_cdev_list\">thermal_cdev_list</a>, <a class=\"id\" href=\"#node\">node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#pos2\">pos2</a> == <a class=\"id\" href=\"#cdev\">cdev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tz\">tz</a> != <a class=\"id\" href=\"#pos1\">pos1</a> || <a class=\"id\" href=\"#cdev\">cdev</a> != <a class=\"id\" href=\"#pos2\">pos2</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a> =", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof(struct <a class=\"id\" href=\"#thermal_cooling_device_instance\">thermal_cooling_device_instance</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#dev\">dev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#tz\">tz</a> = <a class=\"id\" href=\"#tz\">tz</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#cdev\">cdev</a> = <a class=\"id\" href=\"#cdev\">cdev</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#trip\">trip</a> = <a class=\"id\" href=\"#trip\">trip</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#get_idr\">get_idr</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#idr\">idr</a>, &amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#lock\">lock</a>, &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#free_mem\">free_mem</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#name\">name</a>, \"cdev%d\", <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> =", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#sysfs_create_link\">sysfs_create_link</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#device\">device</a>.<a class=\"id\" href=\"#kobj\">kobj</a>, &amp;<a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#device\">device</a>.<a class=\"id\" href=\"#kobj\">kobj</a>, <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#release_idr\">release_idr</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#attr_name\">attr_name</a>, \"cdev%d_trip_point\", <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_attr_init\">sysfs_attr_init</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#attr\">attr</a>.<a class=\"id\" href=\"#attr\">attr</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#attr\">attr</a>.<a class=\"id\" href=\"#attr\">attr</a>.<a class=\"id\" href=\"#name\">name</a> = <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#attr_name\">attr_name</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#attr\">attr</a>.<a class=\"id\" href=\"#attr\">attr</a>.<a class=\"id\" href=\"#mode\">mode</a> = 0444;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#attr\">attr</a>.<a class=\"id\" href=\"#show\">show</a> = <a class=\"id\" href=\"#thermal_cooling_device_trip_point_show\">thermal_cooling_device_trip_point_show</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#device_create_file\">device_create_file</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#device\">device</a>, &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#attr\">attr</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#remove_symbol_link\">remove_symbol_link</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#lock\">lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#pos\">pos</a>, &amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#cooling_devices\">cooling_devices</a>, <a class=\"id\" href=\"#node\">node</a>)", 
"<span class=\"ts\"/>    if (<a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#tz\">tz</a> == <a class=\"id\" href=\"#tz\">tz</a> && <a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#trip\">trip</a> == <a class=\"id\" href=\"#trip\">trip</a> && <a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#cdev\">cdev</a> == <a class=\"id\" href=\"#cdev\">cdev</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = -<a class=\"id\" href=\"#EEXIST\">EEXIST</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_add_tail\">list_add_tail</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#node\">node</a>, &amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#cooling_devices\">cooling_devices</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#lock\">lock</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device_remove_file\">device_remove_file</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#device\">device</a>, &amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#attr\">attr</a>);", 
"      <a class=\"id\" href=\"#remove_symbol_link\">remove_symbol_link</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_remove_link\">sysfs_remove_link</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#device\">device</a>.<a class=\"id\" href=\"#kobj\">kobj</a>, <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#name\">name</a>);", 
"      <a class=\"id\" href=\"#release_idr\">release_idr</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#release_idr\">release_idr</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#idr\">idr</a>, &amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#lock\">lock</a>, <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#id\">id</a>);", 
"      <a class=\"id\" href=\"#free_mem\">free_mem</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#result\">result</a>;", 
"}", 
"", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#thermal_zone_bind_cooling_device\">thermal_zone_bind_cooling_device</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * thermal_zone_unbind_cooling_device - unbind a cooling device from a thermal zone</span>", 
"<span class=\"comment\"> * @tz:<span class=\"ts\"/><span class=\"ts\"/>thermal zone device</span>", 
"<span class=\"comment\"> * @trip:<span class=\"ts\"/>indicates which trip point the cooling devices is</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/>associated with in this thermal zone.</span>", 
"<span class=\"comment\"> * @cdev:<span class=\"ts\"/>thermal cooling device</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This function is usually called in the thermal zone device .unbind callback.</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#thermal_zone_unbind_cooling_device\">thermal_zone_unbind_cooling_device</a>(struct <a class=\"id\" href=\"#thermal_zone_device\">thermal_zone_device</a> *<a class=\"id\" href=\"#tz\">tz</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       int <a class=\"id\" href=\"#trip\">trip</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       struct <a class=\"id\" href=\"#thermal_cooling_device\">thermal_cooling_device</a> *<a class=\"id\" href=\"#cdev\">cdev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#thermal_cooling_device_instance\">thermal_cooling_device_instance</a> *<a class=\"id\" href=\"#pos\">pos</a>, *<a class=\"id\" href=\"#next\">next</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#lock\">lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry_safe\">list_for_each_entry_safe</a>(<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#next\">next</a>, &amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#cooling_devices\">cooling_devices</a>, <a class=\"id\" href=\"#node\">node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#tz\">tz</a> == <a class=\"id\" href=\"#tz\">tz</a> && <a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#trip\">trip</a> == <a class=\"id\" href=\"#trip\">trip</a> && <a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#cdev\">cdev</a> == <a class=\"id\" href=\"#cdev\">cdev</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_del\">list_del</a>(&amp;<a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#node\">node</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#lock\">lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#unbind\">unbind</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#lock\">lock</a>);", 
"", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"      <a class=\"id\" href=\"#unbind\">unbind</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device_remove_file\">device_remove_file</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#device\">device</a>, &amp;<a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#attr\">attr</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_remove_link\">sysfs_remove_link</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#device\">device</a>.<a class=\"id\" href=\"#kobj\">kobj</a>, <a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#release_idr\">release_idr</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#idr\">idr</a>, &amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#lock\">lock</a>, <a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#pos\">pos</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#thermal_zone_unbind_cooling_device\">thermal_zone_unbind_cooling_device</a>);", 
"", 
"static void <a class=\"id\" href=\"#thermal_release\">thermal_release</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#thermal_zone_device\">thermal_zone_device</a> *<a class=\"id\" href=\"#tz\">tz</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#thermal_cooling_device\">thermal_cooling_device</a> *<a class=\"id\" href=\"#cdev\">cdev</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#dev_name\">dev_name</a>(<a class=\"id\" href=\"#dev\">dev</a>), \"thermal_zone\", sizeof \"thermal_zone\" - 1)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tz\">tz</a> = <a class=\"id\" href=\"#to_thermal_zone\">to_thermal_zone</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#tz\">tz</a>);", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cdev\">cdev</a> = <a class=\"id\" href=\"#to_cooling_device\">to_cooling_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#cdev\">cdev</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#class\">class</a> <a class=\"id\" href=\"#thermal_class\">thermal_class</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a> = \"thermal\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#dev_release\">dev_release</a> = <a class=\"id\" href=\"#thermal_release\">thermal_release</a>,", 
"};", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * thermal_cooling_device_register - register a new thermal cooling device</span>", 
"<span class=\"comment\"> * @type:<span class=\"ts\"/>the thermal cooling device type.</span>", 
"<span class=\"comment\"> * @devdata:<span class=\"ts\"/>device private data.</span>", 
"<span class=\"comment\"> * @ops:<span class=\"ts\"/><span class=\"ts\"/>standard thermal cooling devices callbacks.</span>", 
"<span class=\"comment\"> */</span>", 
"struct <a class=\"id\" href=\"#thermal_cooling_device\">thermal_cooling_device</a> *<a class=\"id\" href=\"#thermal_cooling_device_register\">thermal_cooling_device_register</a>(char *<a class=\"id\" href=\"#type\">type</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       void *<a class=\"id\" href=\"#devdata\">devdata</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       struct", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#thermal_cooling_device_ops\">thermal_cooling_device_ops</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       *<a class=\"id\" href=\"#ops\">ops</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#thermal_cooling_device\">thermal_cooling_device</a> *<a class=\"id\" href=\"#cdev\">cdev</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#thermal_zone_device\">thermal_zone_device</a> *<a class=\"id\" href=\"#pos\">pos</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#result\">result</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#strlen\">strlen</a>(<a class=\"id\" href=\"#type\">type</a>) >= <a class=\"id\" href=\"#THERMAL_NAME_LENGTH\">THERMAL_NAME_LENGTH</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(-<a class=\"id\" href=\"#EINVAL\">EINVAL</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#ops\">ops</a> || !<a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#get_max_state\">get_max_state</a> || !<a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#get_cur_state\">get_cur_state</a> ||", 
"<span class=\"ts\"/>    !<a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#set_cur_state\">set_cur_state</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(-<a class=\"id\" href=\"#EINVAL\">EINVAL</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdev\">cdev</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof(struct <a class=\"id\" href=\"#thermal_cooling_device\">thermal_cooling_device</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#cdev\">cdev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(-<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#get_idr\">get_idr</a>(&amp;<a class=\"id\" href=\"#thermal_cdev_idr\">thermal_cdev_idr</a>, &amp;<a class=\"id\" href=\"#thermal_idr_lock\">thermal_idr_lock</a>, &amp;<a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#cdev\">cdev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(<a class=\"id\" href=\"#result\">result</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#strcpy\">strcpy</a>(<a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#type\">type</a>, <a class=\"id\" href=\"#type\">type</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#ops\">ops</a> = <a class=\"id\" href=\"#ops\">ops</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#device\">device</a>.<a class=\"id\" href=\"#class\">class</a> = &amp;<a class=\"id\" href=\"#thermal_class\">thermal_class</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#devdata\">devdata</a> = <a class=\"id\" href=\"#devdata\">devdata</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_set_name\">dev_set_name</a>(&amp;<a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#device\">device</a>, \"cooling_device%d\", <a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#device_register\">device_register</a>(&amp;<a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#device\">device</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#release_idr\">release_idr</a>(&amp;<a class=\"id\" href=\"#thermal_cdev_idr\">thermal_cdev_idr</a>, &amp;<a class=\"id\" href=\"#thermal_idr_lock\">thermal_idr_lock</a>, <a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#cdev\">cdev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(<a class=\"id\" href=\"#result\">result</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* sys I/F */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#type\">type</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#device_create_file\">device_create_file</a>(&amp;<a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#device\">device</a>, &amp;<a class=\"id\" href=\"#dev_attr_cdev_type\">dev_attr_cdev_type</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#unregister\">unregister</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#device_create_file\">device_create_file</a>(&amp;<a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#device\">device</a>, &amp;<a class=\"id\" href=\"#dev_attr_max_state\">dev_attr_max_state</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#unregister\">unregister</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#device_create_file\">device_create_file</a>(&amp;<a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#device\">device</a>, &amp;<a class=\"id\" href=\"#dev_attr_cur_state\">dev_attr_cur_state</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#unregister\">unregister</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#thermal_list_lock\">thermal_list_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_add\">list_add</a>(&amp;<a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#node\">node</a>, &amp;<a class=\"id\" href=\"#thermal_cdev_list\">thermal_cdev_list</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#pos\">pos</a>, &amp;<a class=\"id\" href=\"#thermal_tz_list\">thermal_tz_list</a>, <a class=\"id\" href=\"#node\">node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#bind\">bind</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#pos\">pos</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#bind\">bind</a>(<a class=\"id\" href=\"#pos\">pos</a>, <a class=\"id\" href=\"#cdev\">cdev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#thermal_list_lock\">thermal_list_lock</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cdev\">cdev</a>;", 
"", 
"      <a class=\"id\" href=\"#unregister\">unregister</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#release_idr\">release_idr</a>(&amp;<a class=\"id\" href=\"#thermal_cdev_idr\">thermal_cdev_idr</a>, &amp;<a class=\"id\" href=\"#thermal_idr_lock\">thermal_idr_lock</a>, <a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device_unregister\">device_unregister</a>(&amp;<a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#device\">device</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(<a class=\"id\" href=\"#result\">result</a>);", 
"}", 
"", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#thermal_cooling_device_register\">thermal_cooling_device_register</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * thermal_cooling_device_unregister - removes the registered thermal cooling device</span>", 
"<span class=\"comment\"> * @cdev:<span class=\"ts\"/>the thermal cooling device to remove.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * thermal_cooling_device_unregister() must be called when the device is no</span>", 
"<span class=\"comment\"> * longer needed.</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#thermal_cooling_device_unregister\">thermal_cooling_device_unregister</a>(struct", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#thermal_cooling_device\">thermal_cooling_device</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       *<a class=\"id\" href=\"#cdev\">cdev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#thermal_zone_device\">thermal_zone_device</a> *<a class=\"id\" href=\"#tz\">tz</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#thermal_cooling_device\">thermal_cooling_device</a> *<a class=\"id\" href=\"#pos\">pos</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#cdev\">cdev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#thermal_list_lock\">thermal_list_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#pos\">pos</a>, &amp;<a class=\"id\" href=\"#thermal_cdev_list\">thermal_cdev_list</a>, <a class=\"id\" href=\"#node\">node</a>)", 
"<span class=\"ts\"/>    if (<a class=\"id\" href=\"#pos\">pos</a> == <a class=\"id\" href=\"#cdev\">cdev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pos\">pos</a> != <a class=\"id\" href=\"#cdev\">cdev</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* thermal cooling device not found */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#thermal_list_lock\">thermal_list_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_del\">list_del</a>(&amp;<a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#node\">node</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#tz\">tz</a>, &amp;<a class=\"id\" href=\"#thermal_tz_list\">thermal_tz_list</a>, <a class=\"id\" href=\"#node\">node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#unbind\">unbind</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#unbind\">unbind</a>(<a class=\"id\" href=\"#tz\">tz</a>, <a class=\"id\" href=\"#cdev\">cdev</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#thermal_list_lock\">thermal_list_lock</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#type\">type</a>[0])", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#device_remove_file\">device_remove_file</a>(&amp;<a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#device\">device</a>, &amp;<a class=\"id\" href=\"#dev_attr_cdev_type\">dev_attr_cdev_type</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device_remove_file\">device_remove_file</a>(&amp;<a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#device\">device</a>, &amp;<a class=\"id\" href=\"#dev_attr_max_state\">dev_attr_max_state</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device_remove_file\">device_remove_file</a>(&amp;<a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#device\">device</a>, &amp;<a class=\"id\" href=\"#dev_attr_cur_state\">dev_attr_cur_state</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#release_idr\">release_idr</a>(&amp;<a class=\"id\" href=\"#thermal_cdev_idr\">thermal_cdev_idr</a>, &amp;<a class=\"id\" href=\"#thermal_idr_lock\">thermal_idr_lock</a>, <a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device_unregister\">device_unregister</a>(&amp;<a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#device\">device</a>);", 
"<span class=\"ts\"/>return;", 
"}", 
"", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#thermal_cooling_device_unregister\">thermal_cooling_device_unregister</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * thermal_zone_device_update - force an update of a thermal zone's state</span>", 
"<span class=\"comment\"> * @ttz:<span class=\"ts\"/>the thermal zone to update</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"void <a class=\"id\" href=\"#thermal_zone_device_update\">thermal_zone_device_update</a>(struct <a class=\"id\" href=\"#thermal_zone_device\">thermal_zone_device</a> *<a class=\"id\" href=\"#tz\">tz</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#count\">count</a>, <a class=\"id\" href=\"#ret\">ret</a> = 0;", 
"<span class=\"ts\"/>long <a class=\"id\" href=\"#temp\">temp</a>, <a class=\"id\" href=\"#trip_temp\">trip_temp</a>;", 
"<span class=\"ts\"/>enum <a class=\"id\" href=\"#thermal_trip_type\">thermal_trip_type</a> <a class=\"id\" href=\"#trip_type\">trip_type</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#thermal_cooling_device_instance\">thermal_cooling_device_instance</a> *<a class=\"id\" href=\"#instance\">instance</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#thermal_cooling_device\">thermal_cooling_device</a> *<a class=\"id\" href=\"#cdev\">cdev</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#lock\">lock</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#get_temp\">get_temp</a>(<a class=\"id\" href=\"#tz\">tz</a>, &amp;<a class=\"id\" href=\"#temp\">temp</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* get_temp failed - retry it later */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"failed to read out thermal zone \"", 
"<span class=\"ts\"/><span class=\"ts\"/>       \"%d\\n\", <a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#leave\">leave</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#count\">count</a> = 0; <a class=\"id\" href=\"#count\">count</a> &lt; <a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#trips\">trips</a>; <a class=\"id\" href=\"#count\">count</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#get_trip_type\">get_trip_type</a>(<a class=\"id\" href=\"#tz\">tz</a>, <a class=\"id\" href=\"#count\">count</a>, &amp;<a class=\"id\" href=\"#trip_type\">trip_type</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#get_trip_temp\">get_trip_temp</a>(<a class=\"id\" href=\"#tz\">tz</a>, <a class=\"id\" href=\"#count\">count</a>, &amp;<a class=\"id\" href=\"#trip_temp\">trip_temp</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>switch (<a class=\"id\" href=\"#trip_type\">trip_type</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#THERMAL_TRIP_CRITICAL\">THERMAL_TRIP_CRITICAL</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#temp\">temp</a> >= <a class=\"id\" href=\"#trip_temp\">trip_temp</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#notify\">notify</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#notify\">notify</a>(<a class=\"id\" href=\"#tz\">tz</a>, <a class=\"id\" href=\"#count\">count</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#trip_type\">trip_type</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#ret\">ret</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_EMERG\">KERN_EMERG</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       \"Critical temperature reached (%ld C), shutting down.\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#temp\">temp</a>/1000);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#orderly_poweroff\">orderly_poweroff</a>(<a class=\"id\" href=\"#true\">true</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#THERMAL_TRIP_HOT\">THERMAL_TRIP_HOT</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#temp\">temp</a> >= <a class=\"id\" href=\"#trip_temp\">trip_temp</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#notify\">notify</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#notify\">notify</a>(<a class=\"id\" href=\"#tz\">tz</a>, <a class=\"id\" href=\"#count\">count</a>, <a class=\"id\" href=\"#trip_type\">trip_type</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#THERMAL_TRIP_ACTIVE\">THERMAL_TRIP_ACTIVE</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#instance\">instance</a>, &amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#cooling_devices\">cooling_devices</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#node\">node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#instance\">instance</a>-><a class=\"id\" href=\"#trip\">trip</a> != <a class=\"id\" href=\"#count\">count</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cdev\">cdev</a> = <a class=\"id\" href=\"#instance\">instance</a>-><a class=\"id\" href=\"#cdev\">cdev</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#temp\">temp</a> >= <a class=\"id\" href=\"#trip_temp\">trip_temp</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#set_cur_state\">set_cur_state</a>(<a class=\"id\" href=\"#cdev\">cdev</a>, 1);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cdev\">cdev</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#set_cur_state\">set_cur_state</a>(<a class=\"id\" href=\"#cdev\">cdev</a>, 0);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#THERMAL_TRIP_PASSIVE\">THERMAL_TRIP_PASSIVE</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#temp\">temp</a> >= <a class=\"id\" href=\"#trip_temp\">trip_temp</a> || <a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#passive\">passive</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#thermal_zone_device_passive\">thermal_zone_device_passive</a>(<a class=\"id\" href=\"#tz\">tz</a>, <a class=\"id\" href=\"#temp\">temp</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#trip_temp\">trip_temp</a>, <a class=\"id\" href=\"#count\">count</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#forced_passive\">forced_passive</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#thermal_zone_device_passive\">thermal_zone_device_passive</a>(<a class=\"id\" href=\"#tz\">tz</a>, <a class=\"id\" href=\"#temp\">temp</a>, <a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#forced_passive\">forced_passive</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#THERMAL_TRIPS_NONE\">THERMAL_TRIPS_NONE</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#last_temperature\">last_temperature</a> = <a class=\"id\" href=\"#temp\">temp</a>;", 
"", 
"      <a class=\"id\" href=\"#leave\">leave</a>:", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#passive\">passive</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#thermal_zone_device_set_polling\">thermal_zone_device_set_polling</a>(<a class=\"id\" href=\"#tz\">tz</a>, <a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#passive_delay\">passive_delay</a>);", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#polling_delay\">polling_delay</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#thermal_zone_device_set_polling\">thermal_zone_device_set_polling</a>(<a class=\"id\" href=\"#tz\">tz</a>, <a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#polling_delay\">polling_delay</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#thermal_zone_device_set_polling\">thermal_zone_device_set_polling</a>(<a class=\"id\" href=\"#tz\">tz</a>, 0);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#lock\">lock</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#thermal_zone_device_update\">thermal_zone_device_update</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * thermal_zone_device_register - register a new thermal zone device</span>", 
"<span class=\"comment\"> * @type:<span class=\"ts\"/>the thermal zone device type</span>", 
"<span class=\"comment\"> * @trips:<span class=\"ts\"/>the number of trip points the thermal zone support</span>", 
"<span class=\"comment\"> * @devdata:<span class=\"ts\"/>private device data</span>", 
"<span class=\"comment\"> * @ops:<span class=\"ts\"/>standard thermal zone device callbacks</span>", 
"<span class=\"comment\"> * @tc1:<span class=\"ts\"/>thermal coefficient 1 for passive calculations</span>", 
"<span class=\"comment\"> * @tc2:<span class=\"ts\"/>thermal coefficient 2 for passive calculations</span>", 
"<span class=\"comment\"> * @passive_delay: number of milliseconds to wait between polls when</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/>   performing passive cooling</span>", 
"<span class=\"comment\"> * @polling_delay: number of milliseconds to wait between polls when checking</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/>   whether trip points have been crossed (0 for interrupt</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/>   driven systems)</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * thermal_zone_device_unregister() must be called when the device is no</span>", 
"<span class=\"comment\"> * longer needed. The passive cooling formula uses tc1 and tc2 as described in</span>", 
"<span class=\"comment\"> * section 11.1.5.1 of the ACPI specification 3.0.</span>", 
"<span class=\"comment\"> */</span>", 
"struct <a class=\"id\" href=\"#thermal_zone_device\">thermal_zone_device</a> *<a class=\"id\" href=\"#thermal_zone_device_register\">thermal_zone_device_register</a>(char *<a class=\"id\" href=\"#type\">type</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> int <a class=\"id\" href=\"#trips\">trips</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> void *<a class=\"id\" href=\"#devdata\">devdata</a>, struct", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#thermal_zone_device_ops\">thermal_zone_device_ops</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> *<a class=\"id\" href=\"#ops\">ops</a>, int <a class=\"id\" href=\"#tc1\">tc1</a>, int", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#tc2\">tc2</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> int <a class=\"id\" href=\"#passive_delay\">passive_delay</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> int <a class=\"id\" href=\"#polling_delay\">polling_delay</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#thermal_zone_device\">thermal_zone_device</a> *<a class=\"id\" href=\"#tz\">tz</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#thermal_cooling_device\">thermal_cooling_device</a> *<a class=\"id\" href=\"#pos\">pos</a>;", 
"<span class=\"ts\"/>enum <a class=\"id\" href=\"#thermal_trip_type\">thermal_trip_type</a> <a class=\"id\" href=\"#trip_type\">trip_type</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#result\">result</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#count\">count</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#passive\">passive</a> = 0;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#strlen\">strlen</a>(<a class=\"id\" href=\"#type\">type</a>) >= <a class=\"id\" href=\"#THERMAL_NAME_LENGTH\">THERMAL_NAME_LENGTH</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(-<a class=\"id\" href=\"#EINVAL\">EINVAL</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#trips\">trips</a> &gt; <a class=\"id\" href=\"#THERMAL_MAX_TRIPS\">THERMAL_MAX_TRIPS</a> || <a class=\"id\" href=\"#trips\">trips</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(-<a class=\"id\" href=\"#EINVAL\">EINVAL</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#ops\">ops</a> || !<a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#get_temp\">get_temp</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(-<a class=\"id\" href=\"#EINVAL\">EINVAL</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tz\">tz</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof(struct <a class=\"id\" href=\"#thermal_zone_device\">thermal_zone_device</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#tz\">tz</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(-<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#INIT_LIST_HEAD\">INIT_LIST_HEAD</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#cooling_devices\">cooling_devices</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#idr_init\">idr_init</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#idr\">idr</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_init\">mutex_init</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#lock\">lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#get_idr\">get_idr</a>(&amp;<a class=\"id\" href=\"#thermal_tz_idr\">thermal_tz_idr</a>, &amp;<a class=\"id\" href=\"#thermal_idr_lock\">thermal_idr_lock</a>, &amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#tz\">tz</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(<a class=\"id\" href=\"#result\">result</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#strcpy\">strcpy</a>(<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#type\">type</a>, <a class=\"id\" href=\"#type\">type</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#ops\">ops</a> = <a class=\"id\" href=\"#ops\">ops</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#device\">device</a>.<a class=\"id\" href=\"#class\">class</a> = &amp;<a class=\"id\" href=\"#thermal_class\">thermal_class</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#devdata\">devdata</a> = <a class=\"id\" href=\"#devdata\">devdata</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#trips\">trips</a> = <a class=\"id\" href=\"#trips\">trips</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#tc1\">tc1</a> = <a class=\"id\" href=\"#tc1\">tc1</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#tc2\">tc2</a> = <a class=\"id\" href=\"#tc2\">tc2</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#passive_delay\">passive_delay</a> = <a class=\"id\" href=\"#passive_delay\">passive_delay</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#polling_delay\">polling_delay</a> = <a class=\"id\" href=\"#polling_delay\">polling_delay</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_set_name\">dev_set_name</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#device\">device</a>, \"thermal_zone%d\", <a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#device_register\">device_register</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#device\">device</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#release_idr\">release_idr</a>(&amp;<a class=\"id\" href=\"#thermal_tz_idr\">thermal_tz_idr</a>, &amp;<a class=\"id\" href=\"#thermal_idr_lock\">thermal_idr_lock</a>, <a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#tz\">tz</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(<a class=\"id\" href=\"#result\">result</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* sys I/F */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#type\">type</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#device_create_file\">device_create_file</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#device\">device</a>, &amp;<a class=\"id\" href=\"#dev_attr_type\">dev_attr_type</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#unregister\">unregister</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#device_create_file\">device_create_file</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#device\">device</a>, &amp;<a class=\"id\" href=\"#dev_attr_temp\">dev_attr_temp</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#unregister\">unregister</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#get_mode\">get_mode</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#device_create_file\">device_create_file</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#device\">device</a>, &amp;<a class=\"id\" href=\"#dev_attr_mode\">dev_attr_mode</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#unregister\">unregister</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#count\">count</a> = 0; <a class=\"id\" href=\"#count\">count</a> &lt; <a class=\"id\" href=\"#trips\">trips</a>; <a class=\"id\" href=\"#count\">count</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#TRIP_POINT_ATTR_ADD\">TRIP_POINT_ATTR_ADD</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#device\">device</a>, <a class=\"id\" href=\"#count\">count</a>, <a class=\"id\" href=\"#result\">result</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#unregister\">unregister</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#get_trip_type\">get_trip_type</a>(<a class=\"id\" href=\"#tz\">tz</a>, <a class=\"id\" href=\"#count\">count</a>, &amp;<a class=\"id\" href=\"#trip_type\">trip_type</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#trip_type\">trip_type</a> == <a class=\"id\" href=\"#THERMAL_TRIP_PASSIVE\">THERMAL_TRIP_PASSIVE</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#passive\">passive</a> = 1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#passive\">passive</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#device_create_file\">device_create_file</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#device\">device</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    &amp;<a class=\"id\" href=\"#dev_attr_passive\">dev_attr_passive</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#unregister\">unregister</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#thermal_add_hwmon_sysfs\">thermal_add_hwmon_sysfs</a>(<a class=\"id\" href=\"#tz\">tz</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#unregister\">unregister</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#thermal_list_lock\">thermal_list_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_add_tail\">list_add_tail</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#node\">node</a>, &amp;<a class=\"id\" href=\"#thermal_tz_list\">thermal_tz_list</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#bind\">bind</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#pos\">pos</a>, &amp;<a class=\"id\" href=\"#thermal_cdev_list\">thermal_cdev_list</a>, <a class=\"id\" href=\"#node\">node</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#bind\">bind</a>(<a class=\"id\" href=\"#tz\">tz</a>, <a class=\"id\" href=\"#pos\">pos</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#thermal_list_lock\">thermal_list_lock</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#INIT_DELAYED_WORK\">INIT_DELAYED_WORK</a>(&amp;(<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#poll_queue\">poll_queue</a>), <a class=\"id\" href=\"#thermal_zone_device_check\">thermal_zone_device_check</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#thermal_zone_device_update\">thermal_zone_device_update</a>(<a class=\"id\" href=\"#tz\">tz</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#tz\">tz</a>;", 
"", 
"      <a class=\"id\" href=\"#unregister\">unregister</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#release_idr\">release_idr</a>(&amp;<a class=\"id\" href=\"#thermal_tz_idr\">thermal_tz_idr</a>, &amp;<a class=\"id\" href=\"#thermal_idr_lock\">thermal_idr_lock</a>, <a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device_unregister\">device_unregister</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#device\">device</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(<a class=\"id\" href=\"#result\">result</a>);", 
"}", 
"", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#thermal_zone_device_register\">thermal_zone_device_register</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * thermal_device_unregister - removes the registered thermal zone device</span>", 
"<span class=\"comment\"> * @tz: the thermal zone device to remove</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#thermal_zone_device_unregister\">thermal_zone_device_unregister</a>(struct <a class=\"id\" href=\"#thermal_zone_device\">thermal_zone_device</a> *<a class=\"id\" href=\"#tz\">tz</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#thermal_cooling_device\">thermal_cooling_device</a> *<a class=\"id\" href=\"#cdev\">cdev</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#thermal_zone_device\">thermal_zone_device</a> *<a class=\"id\" href=\"#pos\">pos</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#count\">count</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#tz\">tz</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#thermal_list_lock\">thermal_list_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#pos\">pos</a>, &amp;<a class=\"id\" href=\"#thermal_tz_list\">thermal_tz_list</a>, <a class=\"id\" href=\"#node\">node</a>)", 
"<span class=\"ts\"/>    if (<a class=\"id\" href=\"#pos\">pos</a> == <a class=\"id\" href=\"#tz\">tz</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pos\">pos</a> != <a class=\"id\" href=\"#tz\">tz</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* thermal zone device not found */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#thermal_list_lock\">thermal_list_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_del\">list_del</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#node\">node</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#unbind\">unbind</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#cdev\">cdev</a>, &amp;<a class=\"id\" href=\"#thermal_cdev_list\">thermal_cdev_list</a>, <a class=\"id\" href=\"#node\">node</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#unbind\">unbind</a>(<a class=\"id\" href=\"#tz\">tz</a>, <a class=\"id\" href=\"#cdev\">cdev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#thermal_list_lock\">thermal_list_lock</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#thermal_zone_device_set_polling\">thermal_zone_device_set_polling</a>(<a class=\"id\" href=\"#tz\">tz</a>, 0);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#type\">type</a>[0])", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#device_remove_file\">device_remove_file</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#device\">device</a>, &amp;<a class=\"id\" href=\"#dev_attr_type\">dev_attr_type</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device_remove_file\">device_remove_file</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#device\">device</a>, &amp;<a class=\"id\" href=\"#dev_attr_temp\">dev_attr_temp</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#get_mode\">get_mode</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#device_remove_file\">device_remove_file</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#device\">device</a>, &amp;<a class=\"id\" href=\"#dev_attr_mode\">dev_attr_mode</a>);", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#count\">count</a> = 0; <a class=\"id\" href=\"#count\">count</a> &lt; <a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#trips\">trips</a>; <a class=\"id\" href=\"#count\">count</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#TRIP_POINT_ATTR_REMOVE\">TRIP_POINT_ATTR_REMOVE</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#device\">device</a>, <a class=\"id\" href=\"#count\">count</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#thermal_remove_hwmon_sysfs\">thermal_remove_hwmon_sysfs</a>(<a class=\"id\" href=\"#tz\">tz</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#release_idr\">release_idr</a>(&amp;<a class=\"id\" href=\"#thermal_tz_idr\">thermal_tz_idr</a>, &amp;<a class=\"id\" href=\"#thermal_idr_lock\">thermal_idr_lock</a>, <a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#id\">id</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#idr_destroy\">idr_destroy</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#idr\">idr</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_destroy\">mutex_destroy</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#lock\">lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#device_unregister\">device_unregister</a>(&amp;<a class=\"id\" href=\"#tz\">tz</a>-><a class=\"id\" href=\"#device\">device</a>);", 
"<span class=\"ts\"/>return;", 
"}", 
"", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#thermal_zone_device_unregister\">thermal_zone_device_unregister</a>);", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#thermal_init\">thermal_init</a>(void)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#result\">result</a> = 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#class_register\">class_register</a>(&amp;<a class=\"id\" href=\"#thermal_class\">thermal_class</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#idr_destroy\">idr_destroy</a>(&amp;<a class=\"id\" href=\"#thermal_tz_idr\">thermal_tz_idr</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#idr_destroy\">idr_destroy</a>(&amp;<a class=\"id\" href=\"#thermal_cdev_idr\">thermal_cdev_idr</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_destroy\">mutex_destroy</a>(&amp;<a class=\"id\" href=\"#thermal_idr_lock\">thermal_idr_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mutex_destroy\">mutex_destroy</a>(&amp;<a class=\"id\" href=\"#thermal_list_lock\">thermal_list_lock</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#result\">result</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#__exit\">__exit</a> <a class=\"id\" href=\"#thermal_exit\">thermal_exit</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#class_unregister\">class_unregister</a>(&amp;<a class=\"id\" href=\"#thermal_class\">thermal_class</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#idr_destroy\">idr_destroy</a>(&amp;<a class=\"id\" href=\"#thermal_tz_idr\">thermal_tz_idr</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#idr_destroy\">idr_destroy</a>(&amp;<a class=\"id\" href=\"#thermal_cdev_idr\">thermal_cdev_idr</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_destroy\">mutex_destroy</a>(&amp;<a class=\"id\" href=\"#thermal_idr_lock\">thermal_idr_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_destroy\">mutex_destroy</a>(&amp;<a class=\"id\" href=\"#thermal_list_lock\">thermal_list_lock</a>);", 
"}", 
"", 
"<a class=\"id\" href=\"#subsys_initcall\">subsys_initcall</a>(<a class=\"id\" href=\"#thermal_init\">thermal_init</a>);", 
"<a class=\"id\" href=\"#module_exit\">module_exit</a>(<a class=\"id\" href=\"#thermal_exit\">thermal_exit</a>);", 
];
xr_frag_insert('l/c4/ec4445e8f36344ba6dc0af948848660f9885a4.xr', __xr_tmp);
