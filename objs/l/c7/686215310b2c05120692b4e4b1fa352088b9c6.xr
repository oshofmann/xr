var __xr_tmp = [
"<span class=\"ts\"/>},", 
"", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#read\">read</a><span class=\"ts\"/>= <a class=\"id\" href=\"#cmos_nvram_read\">cmos_nvram_read</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#write\">write</a><span class=\"ts\"/>= <a class=\"id\" href=\"#cmos_nvram_write\">cmos_nvram_write</a>,", 
"<span class=\"ts\"/><span class=\"comment\">/* size gets set up later */</span>", 
"};", 
"", 
"<span class=\"comment\">/*----------------------------------------------------------------*/</span>", 
"", 
"static struct <a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a><span class=\"ts\"/><a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>;", 
"", 
"static <a class=\"id\" href=\"#irqreturn_t\">irqreturn_t</a> <a class=\"id\" href=\"#cmos_interrupt\">cmos_interrupt</a>(int <a class=\"id\" href=\"#irq\">irq</a>, void *<a class=\"id\" href=\"#p\">p</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irqstat\">irqstat</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc_control\">rtc_control</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock\">spin_lock</a>(&amp;<a class=\"id\" href=\"#rtc_lock\">rtc_lock</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* When the HPET interrupt handler calls us, the interrupt</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * status is passed as arg1 instead of the irq number.  But</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * always clear irq status, even when HPET is in the way.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Note that HPET and RTC are almost certainly out of phase,</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * giving different IRQ status ...</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#irqstat\">irqstat</a> = <a class=\"id\" href=\"#CMOS_READ\">CMOS_READ</a>(<a class=\"id\" href=\"#RTC_INTR_FLAGS\">RTC_INTR_FLAGS</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc_control\">rtc_control</a> = <a class=\"id\" href=\"#CMOS_READ\">CMOS_READ</a>(<a class=\"id\" href=\"#RTC_CONTROL\">RTC_CONTROL</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#is_hpet_enabled\">is_hpet_enabled</a>())", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irqstat\">irqstat</a> = (unsigned long)<a class=\"id\" href=\"#irq\">irq</a> &amp; 0xF0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#irqstat\">irqstat</a> &= (<a class=\"id\" href=\"#rtc_control\">rtc_control</a> &amp; <a class=\"id\" href=\"#RTC_IRQMASK\">RTC_IRQMASK</a>) | <a class=\"id\" href=\"#RTC_IRQF\">RTC_IRQF</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* All Linux RTC alarms should be treated as if they were oneshot.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Similar code may be needed in system wakeup paths, in case the</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * alarm woke the system.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irqstat\">irqstat</a> &amp; <a class=\"id\" href=\"#RTC_AIE\">RTC_AIE</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc_control\">rtc_control</a> &= ~<a class=\"id\" href=\"#RTC_AIE\">RTC_AIE</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#CMOS_WRITE\">CMOS_WRITE</a>(<a class=\"id\" href=\"#rtc_control\">rtc_control</a>, <a class=\"id\" href=\"#RTC_CONTROL\">RTC_CONTROL</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hpet_mask_rtc_irq_bit\">hpet_mask_rtc_irq_bit</a>(<a class=\"id\" href=\"#RTC_AIE\">RTC_AIE</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#CMOS_READ\">CMOS_READ</a>(<a class=\"id\" href=\"#RTC_INTR_FLAGS\">RTC_INTR_FLAGS</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock\">spin_unlock</a>(&amp;<a class=\"id\" href=\"#rtc_lock\">rtc_lock</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#is_intr\">is_intr</a>(<a class=\"id\" href=\"#irqstat\">irqstat</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc_update_irq\">rtc_update_irq</a>(<a class=\"id\" href=\"#p\">p</a>, 1, <a class=\"id\" href=\"#irqstat\">irqstat</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#IRQ_HANDLED\">IRQ_HANDLED</a>;", 
"<span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#IRQ_NONE\">IRQ_NONE</a>;", 
"}", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a><span class=\"ts\"/><a class=\"id\" href=\"#CONFIG_PNP\">CONFIG_PNP</a>", 
"#<a class=\"id\" href=\"#define\">define</a><span class=\"ts\"/><a class=\"id\" href=\"#INITSECTION\">INITSECTION</a>", 
"", 
"#else", 
"#<a class=\"id\" href=\"#define\">define</a><span class=\"ts\"/><a class=\"id\" href=\"#INITSECTION\">INITSECTION</a><span class=\"ts\"/><a class=\"id\" href=\"#__init\">__init</a>", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"static int <a class=\"id\" href=\"#INITSECTION\">INITSECTION</a>", 
"<a class=\"id\" href=\"#cmos_do_probe\">cmos_do_probe</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, struct <a class=\"id\" href=\"#resource\">resource</a> *<a class=\"id\" href=\"#ports\">ports</a>, int <a class=\"id\" href=\"#rtc_irq\">rtc_irq</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cmos_rtc_board_info\">cmos_rtc_board_info</a><span class=\"ts\"/>*<a class=\"id\" href=\"#info\">info</a> = <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#platform_data\">platform_data</a>;", 
"<span class=\"ts\"/>int<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = 0;", 
"<span class=\"ts\"/>unsigned char<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc_control\">rtc_control</a>;", 
"<span class=\"ts\"/>unsigned<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#address_space\">address_space</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* there can be only one ... */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#dev\">dev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EBUSY\">EBUSY</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#ports\">ports</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Claim I/O ports ASAP, minimizing conflict with legacy driver.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * REVISIT non-x86 systems may instead use memory space resources</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * (needing ioremap etc), not i/o space resources like this ...</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ports\">ports</a> = <a class=\"id\" href=\"#request_region\">request_region</a>(<a class=\"id\" href=\"#ports\">ports</a>-><a class=\"id\" href=\"#start\">start</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ports\">ports</a>-><a class=\"id\" href=\"#end\">end</a> + 1 - <a class=\"id\" href=\"#ports\">ports</a>-><a class=\"id\" href=\"#start\">start</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#driver_name\">driver_name</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#ports\">ports</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_dbg\">dev_dbg</a>(<a class=\"id\" href=\"#dev\">dev</a>, \"i/o registers already in use\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EBUSY\">EBUSY</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#irq\">irq</a> = <a class=\"id\" href=\"#rtc_irq\">rtc_irq</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#iomem\">iomem</a> = <a class=\"id\" href=\"#ports\">ports</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Heuristic to deduce NVRAM size ... do what the legacy NVRAM</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * driver did, but don't reject unknown configs.   Old hardware</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * won't address 128 bytes.  Newer chips have multiple banks,</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * though they may not be listed in one I/O resource.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"#if<span class=\"ts\"/><a class=\"id\" href=\"#defined\">defined</a>(<a class=\"id\" href=\"#CONFIG_ATARI\">CONFIG_ATARI</a>)", 
"<span class=\"ts\"/><a class=\"id\" href=\"#address_space\">address_space</a> = 64;", 
"#<a class=\"id\" href=\"#elif\">elif</a> <a class=\"id\" href=\"#defined\">defined</a>(<a class=\"id\" href=\"#__i386__\">__i386__</a>) || <a class=\"id\" href=\"#defined\">defined</a>(<a class=\"id\" href=\"#__x86_64__\">__x86_64__</a>) || <a class=\"id\" href=\"#defined\">defined</a>(<a class=\"id\" href=\"#__arm__\">__arm__</a>) \\", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>|| <a class=\"id\" href=\"#defined\">defined</a>(<a class=\"id\" href=\"#__sparc__\">__sparc__</a>) || <a class=\"id\" href=\"#defined\">defined</a>(<a class=\"id\" href=\"#__mips__\">__mips__</a>)", 
"<span class=\"ts\"/><a class=\"id\" href=\"#address_space\">address_space</a> = 128;", 
"#else", 
"#<a class=\"id\" href=\"#warning\">warning</a> <a class=\"id\" href=\"#Assuming\">Assuming</a> 128 <a class=\"id\" href=\"#bytes\">bytes</a> <a class=\"id\" href=\"#of\">of</a> <a class=\"id\" href=\"#RTC\">RTC</a>+<a class=\"id\" href=\"#NVRAM\">NVRAM</a> <a class=\"id\" href=\"#address\">address</a> <a class=\"id\" href=\"#space\">space</a>, <a class=\"id\" href=\"#not\">not</a> 64 <a class=\"id\" href=\"#bytes\">bytes</a>.", 
"<span class=\"ts\"/><a class=\"id\" href=\"#address_space\">address_space</a> = 128;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#can_bank2\">can_bank2</a> && <a class=\"id\" href=\"#ports\">ports</a>-><a class=\"id\" href=\"#end\">end</a> &gt; (<a class=\"id\" href=\"#ports\">ports</a>-><a class=\"id\" href=\"#start\">start</a> + 1))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#address_space\">address_space</a> = 256;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* For ACPI systems extension info comes from the FADT.  On others,</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * board specific setup provides it as appropriate.  Systems where</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * the alarm IRQ isn't automatically a wakeup IRQ (like ACPI, and</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * some almost-clones) can provide hooks to make that behave.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Note that ACPI doesn't preclude putting these registers into</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * \"extended\" areas of the chip, including some that we won't yet</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * expect CMOS_READ and friends to handle.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#info\">info</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#rtc_day_alarm\">rtc_day_alarm</a> && <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#rtc_day_alarm\">rtc_day_alarm</a> &lt; 128)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#day_alrm\">day_alrm</a> = <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#rtc_day_alarm\">rtc_day_alarm</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#rtc_mon_alarm\">rtc_mon_alarm</a> && <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#rtc_mon_alarm\">rtc_mon_alarm</a> &lt; 128)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#mon_alrm\">mon_alrm</a> = <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#rtc_mon_alarm\">rtc_mon_alarm</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#rtc_century\">rtc_century</a> && <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#rtc_century\">rtc_century</a> &lt; 128)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#century\">century</a> = <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#rtc_century\">rtc_century</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#wake_on\">wake_on</a> && <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#wake_off\">wake_off</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#wake_on\">wake_on</a> = <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#wake_on\">wake_on</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#wake_off\">wake_off</a> = <a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#wake_off\">wake_off</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_set_drvdata\">dev_set_drvdata</a>(<a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#rtc\">rtc</a> = <a class=\"id\" href=\"#rtc_device_register\">rtc_device_register</a>(<a class=\"id\" href=\"#driver_name\">driver_name</a>, <a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>&amp;<a class=\"id\" href=\"#cmos_rtc_ops\">cmos_rtc_ops</a>, <a class=\"id\" href=\"#THIS_MODULE\">THIS_MODULE</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#IS_ERR\">IS_ERR</a>(<a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#rtc\">rtc</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#PTR_ERR\">PTR_ERR</a>(<a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#rtc\">rtc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#cleanup0\">cleanup0</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rename_region\">rename_region</a>(<a class=\"id\" href=\"#ports\">ports</a>, <a class=\"id\" href=\"#dev_name\">dev_name</a>(&amp;<a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>));", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irq\">spin_lock_irq</a>(&amp;<a class=\"id\" href=\"#rtc_lock\">rtc_lock</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* force periodic irq to CMOS reset default of 1024Hz;</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * REVISIT it's been reported that at least one x86_64 ALI mobo</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * doesn't use 32KHz here ... for portability we might need to</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * do something about other clock frequencies.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_freq\">irq_freq</a> = 1024;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#hpet_set_periodic_freq\">hpet_set_periodic_freq</a>(<a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#irq_freq\">irq_freq</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#CMOS_WRITE\">CMOS_WRITE</a>(<a class=\"id\" href=\"#RTC_REF_CLCK_32KHZ\">RTC_REF_CLCK_32KHZ</a> | 0x06, <a class=\"id\" href=\"#RTC_FREQ_SELECT\">RTC_FREQ_SELECT</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* disable irqs */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmos_irq_disable\">cmos_irq_disable</a>(&amp;<a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>, <a class=\"id\" href=\"#RTC_PIE\">RTC_PIE</a> | <a class=\"id\" href=\"#RTC_AIE\">RTC_AIE</a> | <a class=\"id\" href=\"#RTC_UIE\">RTC_UIE</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc_control\">rtc_control</a> = <a class=\"id\" href=\"#CMOS_READ\">CMOS_READ</a>(<a class=\"id\" href=\"#RTC_CONTROL\">RTC_CONTROL</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irq\">spin_unlock_irq</a>(&amp;<a class=\"id\" href=\"#rtc_lock\">rtc_lock</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* FIXME:</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * &lt;asm-generic/rtc.h&gt; doesn't know 12-hour mode either.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"       if (<a class=\"id\" href=\"#is_valid_irq\">is_valid_irq</a>(<a class=\"id\" href=\"#rtc_irq\">rtc_irq</a>) && !(<a class=\"id\" href=\"#rtc_control\">rtc_control</a> &amp; <a class=\"id\" href=\"#RTC_24H\">RTC_24H</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_warn\">dev_warn</a>(<a class=\"id\" href=\"#dev\">dev</a>, \"only 24-hr supported\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = -<a class=\"id\" href=\"#ENXIO\">ENXIO</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#cleanup1\">cleanup1</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#is_valid_irq\">is_valid_irq</a>(<a class=\"id\" href=\"#rtc_irq\">rtc_irq</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irq_handler_t\">irq_handler_t</a> <a class=\"id\" href=\"#rtc_cmos_int_handler\">rtc_cmos_int_handler</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#is_hpet_enabled\">is_hpet_enabled</a>()) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc_cmos_int_handler\">rtc_cmos_int_handler</a> = <a class=\"id\" href=\"#hpet_rtc_interrupt\">hpet_rtc_interrupt</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#hpet_register_irq_handler\">hpet_register_irq_handler</a>(<a class=\"id\" href=\"#cmos_interrupt\">cmos_interrupt</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> != 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> \"hpet_register_irq_handler \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\" failed in rtc_init().\");", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#cleanup1\">cleanup1</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc_cmos_int_handler\">rtc_cmos_int_handler</a> = <a class=\"id\" href=\"#cmos_interrupt\">cmos_interrupt</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#request_irq\">request_irq</a>(<a class=\"id\" href=\"#rtc_irq\">rtc_irq</a>, <a class=\"id\" href=\"#rtc_cmos_int_handler\">rtc_cmos_int_handler</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#IRQF_DISABLED\">IRQF_DISABLED</a>, <a class=\"id\" href=\"#dev_name\">dev_name</a>(&amp;<a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#rtc\">rtc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a> &lt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_dbg\">dev_dbg</a>(<a class=\"id\" href=\"#dev\">dev</a>, \"IRQ %d is already in use\\n\", <a class=\"id\" href=\"#rtc_irq\">rtc_irq</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#cleanup1\">cleanup1</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#hpet_rtc_timer_init\">hpet_rtc_timer_init</a>();", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* export at least the first block of NVRAM */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#nvram\">nvram</a>.<a class=\"id\" href=\"#size\">size</a> = <a class=\"id\" href=\"#address_space\">address_space</a> - <a class=\"id\" href=\"#NVRAM_OFFSET\">NVRAM_OFFSET</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#sysfs_create_bin_file\">sysfs_create_bin_file</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#kobj\">kobj</a>, &amp;<a class=\"id\" href=\"#nvram\">nvram</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a> &lt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_dbg\">dev_dbg</a>(<a class=\"id\" href=\"#dev\">dev</a>, \"can't create nvram file? %d\\n\", <a class=\"id\" href=\"#retval\">retval</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#cleanup2\">cleanup2</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pr_info\">pr_info</a>(\"%s: %s%s, %zd bytes nvram%s\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_name\">dev_name</a>(&amp;<a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/>!<a class=\"id\" href=\"#is_valid_irq\">is_valid_irq</a>(<a class=\"id\" href=\"#rtc_irq\">rtc_irq</a>) ? \"no alarms\" :", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#mon_alrm\">mon_alrm</a> ? \"alarms up to one year\" :", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#day_alrm\">day_alrm</a> ? \"alarms up to one month\" :", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"alarms up to one day\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#century\">century</a> ? \", y3k\" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#nvram\">nvram</a>.<a class=\"id\" href=\"#size\">size</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#is_hpet_enabled\">is_hpet_enabled</a>() ? \", hpet irqs\" : \"\");", 
"", 
"<span class=\"ts\"/>return 0;", 
"", 
"<a class=\"id\" href=\"#cleanup2\">cleanup2</a>:", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#is_valid_irq\">is_valid_irq</a>(<a class=\"id\" href=\"#rtc_irq\">rtc_irq</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#free_irq\">free_irq</a>(<a class=\"id\" href=\"#rtc_irq\">rtc_irq</a>, <a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#rtc\">rtc</a>);", 
"<a class=\"id\" href=\"#cleanup1\">cleanup1</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc_device_unregister\">rtc_device_unregister</a>(<a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#rtc\">rtc</a>);", 
"<a class=\"id\" href=\"#cleanup0\">cleanup0</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#release_region\">release_region</a>(<a class=\"id\" href=\"#ports\">ports</a>-><a class=\"id\" href=\"#start\">start</a>, <a class=\"id\" href=\"#ports\">ports</a>-><a class=\"id\" href=\"#end\">end</a> + 1 - <a class=\"id\" href=\"#ports\">ports</a>-><a class=\"id\" href=\"#start\">start</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#cmos_do_shutdown\">cmos_do_shutdown</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irq\">spin_lock_irq</a>(&amp;<a class=\"id\" href=\"#rtc_lock\">rtc_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmos_irq_disable\">cmos_irq_disable</a>(&amp;<a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>, <a class=\"id\" href=\"#RTC_IRQMASK\">RTC_IRQMASK</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irq\">spin_unlock_irq</a>(&amp;<a class=\"id\" href=\"#rtc_lock\">rtc_lock</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#__exit\">__exit</a> <a class=\"id\" href=\"#cmos_do_remove\">cmos_do_remove</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a><span class=\"ts\"/>*<a class=\"id\" href=\"#cmos\">cmos</a> = <a class=\"id\" href=\"#dev_get_drvdata\">dev_get_drvdata</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#resource\">resource</a> *<a class=\"id\" href=\"#ports\">ports</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmos_do_shutdown\">cmos_do_shutdown</a>();", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_remove_bin_file\">sysfs_remove_bin_file</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#kobj\">kobj</a>, &amp;<a class=\"id\" href=\"#nvram\">nvram</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#is_valid_irq\">is_valid_irq</a>(<a class=\"id\" href=\"#cmos\">cmos</a>-><a class=\"id\" href=\"#irq\">irq</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#free_irq\">free_irq</a>(<a class=\"id\" href=\"#cmos\">cmos</a>-><a class=\"id\" href=\"#irq\">irq</a>, <a class=\"id\" href=\"#cmos\">cmos</a>-><a class=\"id\" href=\"#rtc\">rtc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hpet_unregister_irq_handler\">hpet_unregister_irq_handler</a>(<a class=\"id\" href=\"#cmos_interrupt\">cmos_interrupt</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rtc_device_unregister\">rtc_device_unregister</a>(<a class=\"id\" href=\"#cmos\">cmos</a>-><a class=\"id\" href=\"#rtc\">rtc</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmos\">cmos</a>-><a class=\"id\" href=\"#rtc\">rtc</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ports\">ports</a> = <a class=\"id\" href=\"#cmos\">cmos</a>-><a class=\"id\" href=\"#iomem\">iomem</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#release_region\">release_region</a>(<a class=\"id\" href=\"#ports\">ports</a>-><a class=\"id\" href=\"#start\">start</a>, <a class=\"id\" href=\"#ports\">ports</a>-><a class=\"id\" href=\"#end\">end</a> + 1 - <a class=\"id\" href=\"#ports\">ports</a>-><a class=\"id\" href=\"#start\">start</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmos\">cmos</a>-><a class=\"id\" href=\"#iomem\">iomem</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmos\">cmos</a>-><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_set_drvdata\">dev_set_drvdata</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"}", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a><span class=\"ts\"/><a class=\"id\" href=\"#CONFIG_PM\">CONFIG_PM</a>", 
"", 
"static int <a class=\"id\" href=\"#cmos_suspend\">cmos_suspend</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#pm_message_t\">pm_message_t</a> <a class=\"id\" href=\"#mesg\">mesg</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a><span class=\"ts\"/>*<a class=\"id\" href=\"#cmos\">cmos</a> = <a class=\"id\" href=\"#dev_get_drvdata\">dev_get_drvdata</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>unsigned char<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* only the alarm might be a wakeup event source */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irq\">spin_lock_irq</a>(&amp;<a class=\"id\" href=\"#rtc_lock\">rtc_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmos\">cmos</a>-><a class=\"id\" href=\"#suspend_ctrl\">suspend_ctrl</a> = <a class=\"id\" href=\"#tmp\">tmp</a> = <a class=\"id\" href=\"#CMOS_READ\">CMOS_READ</a>(<a class=\"id\" href=\"#RTC_CONTROL\">RTC_CONTROL</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tmp\">tmp</a> &amp; (<a class=\"id\" href=\"#RTC_PIE\">RTC_PIE</a>|<a class=\"id\" href=\"#RTC_AIE\">RTC_AIE</a>|<a class=\"id\" href=\"#RTC_UIE\">RTC_UIE</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>unsigned char<span class=\"ts\"/><a class=\"id\" href=\"#mask\">mask</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#device_may_wakeup\">device_may_wakeup</a>(<a class=\"id\" href=\"#dev\">dev</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mask\">mask</a> = <a class=\"id\" href=\"#RTC_IRQMASK\">RTC_IRQMASK</a> &amp; ~<a class=\"id\" href=\"#RTC_AIE\">RTC_AIE</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mask\">mask</a> = <a class=\"id\" href=\"#RTC_IRQMASK\">RTC_IRQMASK</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> &= ~<a class=\"id\" href=\"#mask\">mask</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#CMOS_WRITE\">CMOS_WRITE</a>(<a class=\"id\" href=\"#tmp\">tmp</a>, <a class=\"id\" href=\"#RTC_CONTROL\">RTC_CONTROL</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* shut down hpet emulation - we don't need it for alarm */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hpet_mask_rtc_irq_bit\">hpet_mask_rtc_irq_bit</a>(<a class=\"id\" href=\"#RTC_PIE\">RTC_PIE</a>|<a class=\"id\" href=\"#RTC_AIE\">RTC_AIE</a>|<a class=\"id\" href=\"#RTC_UIE\">RTC_UIE</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cmos_checkintr\">cmos_checkintr</a>(<a class=\"id\" href=\"#cmos\">cmos</a>, <a class=\"id\" href=\"#tmp\">tmp</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irq\">spin_unlock_irq</a>(&amp;<a class=\"id\" href=\"#rtc_lock\">rtc_lock</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tmp\">tmp</a> &amp; <a class=\"id\" href=\"#RTC_AIE\">RTC_AIE</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cmos\">cmos</a>-><a class=\"id\" href=\"#enabled_wake\">enabled_wake</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#cmos\">cmos</a>-><a class=\"id\" href=\"#wake_on\">wake_on</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cmos\">cmos</a>-><a class=\"id\" href=\"#wake_on\">wake_on</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#enable_irq_wake\">enable_irq_wake</a>(<a class=\"id\" href=\"#cmos\">cmos</a>-><a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pr_debug\">pr_debug</a>(\"%s: suspend%s, ctrl %02x\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_name\">dev_name</a>(&amp;<a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a>.<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(<a class=\"id\" href=\"#tmp\">tmp</a> &amp; <a class=\"id\" href=\"#RTC_AIE\">RTC_AIE</a>) ? \", alarm may wake\" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/* We want RTC alarms to wake us from e.g. ACPI G2/S5 \"soft off\", even</span>", 
"<span class=\"comment\"> * after a detour through G3 \"mechanical off\", although the ACPI spec</span>", 
"<span class=\"comment\"> * says wakeup should only work from G1/S4 \"hibernate\".  To most users,</span>", 
"<span class=\"comment\"> * distinctions between S4 and S5 are pointless.  So when the hardware</span>", 
"<span class=\"comment\"> * allows, don't draw that distinction.</span>", 
"<span class=\"comment\"> */</span>", 
"static <a class=\"id\" href=\"#inline\">inline</a> int <a class=\"id\" href=\"#cmos_poweroff\">cmos_poweroff</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#cmos_suspend\">cmos_suspend</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#PMSG_HIBERNATE\">PMSG_HIBERNATE</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#cmos_resume\">cmos_resume</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cmos_rtc\">cmos_rtc</a><span class=\"ts\"/>*<a class=\"id\" href=\"#cmos\">cmos</a> = <a class=\"id\" href=\"#dev_get_drvdata\">dev_get_drvdata</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>unsigned char<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> = <a class=\"id\" href=\"#cmos\">cmos</a>-><a class=\"id\" href=\"#suspend_ctrl\">suspend_ctrl</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* re-enable any irqs previously active */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tmp\">tmp</a> &amp; <a class=\"id\" href=\"#RTC_IRQMASK\">RTC_IRQMASK</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>unsigned char<span class=\"ts\"/><a class=\"id\" href=\"#mask\">mask</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#cmos\">cmos</a>-><a class=\"id\" href=\"#enabled_wake\">enabled_wake</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#cmos\">cmos</a>-><a class=\"id\" href=\"#wake_off\">wake_off</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cmos\">cmos</a>-><a class=\"id\" href=\"#wake_off\">wake_off</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#disable_irq_wake\">disable_irq_wake</a>(<a class=\"id\" href=\"#cmos\">cmos</a>-><a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cmos\">cmos</a>-><a class=\"id\" href=\"#enabled_wake\">enabled_wake</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irq\">spin_lock_irq</a>(&amp;<a class=\"id\" href=\"#rtc_lock\">rtc_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>do {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#CMOS_WRITE\">CMOS_WRITE</a>(<a class=\"id\" href=\"#tmp\">tmp</a>, <a class=\"id\" href=\"#RTC_CONTROL\">RTC_CONTROL</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hpet_set_rtc_irq_bit\">hpet_set_rtc_irq_bit</a>(<a class=\"id\" href=\"#tmp\">tmp</a> &amp; <a class=\"id\" href=\"#RTC_IRQMASK\">RTC_IRQMASK</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mask\">mask</a> = <a class=\"id\" href=\"#CMOS_READ\">CMOS_READ</a>(<a class=\"id\" href=\"#RTC_INTR_FLAGS\">RTC_INTR_FLAGS</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mask\">mask</a> &= (<a class=\"id\" href=\"#tmp\">tmp</a> &amp; <a class=\"id\" href=\"#RTC_IRQMASK\">RTC_IRQMASK</a>) | <a class=\"id\" href=\"#RTC_IRQF\">RTC_IRQF</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#is_hpet_enabled\">is_hpet_enabled</a>() || !<a class=\"id\" href=\"#is_intr\">is_intr</a>(<a class=\"id\" href=\"#mask\">mask</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* force one-shot behavior if HPET blocked</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * the wake alarm's irq</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rtc_update_irq\">rtc_update_irq</a>(<a class=\"id\" href=\"#cmos\">cmos</a>-><a class=\"id\" href=\"#rtc\">rtc</a>, 1, <a class=\"id\" href=\"#mask\">mask</a>);", 
];
xr_frag_insert('l/c7/686215310b2c05120692b4e4b1fa352088b9c6.xr', __xr_tmp);
