var __xr_tmp = [
"static unsigned int <a class=\"id\" href=\"#sil24_qc_issue\">sil24_qc_issue</a>(struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>);", 
"static <a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#sil24_qc_fill_rtf\">sil24_qc_fill_rtf</a>(struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>);", 
"static void <a class=\"id\" href=\"#sil24_pmp_attach\">sil24_pmp_attach</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>);", 
"static void <a class=\"id\" href=\"#sil24_pmp_detach\">sil24_pmp_detach</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>);", 
"static void <a class=\"id\" href=\"#sil24_freeze\">sil24_freeze</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>);", 
"static void <a class=\"id\" href=\"#sil24_thaw\">sil24_thaw</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>);", 
"static int <a class=\"id\" href=\"#sil24_softreset\">sil24_softreset</a>(struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a>, unsigned int *<a class=\"id\" href=\"#class\">class</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   unsigned long <a class=\"id\" href=\"#deadline\">deadline</a>);", 
"static int <a class=\"id\" href=\"#sil24_hardreset\">sil24_hardreset</a>(struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a>, unsigned int *<a class=\"id\" href=\"#class\">class</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   unsigned long <a class=\"id\" href=\"#deadline\">deadline</a>);", 
"static int <a class=\"id\" href=\"#sil24_pmp_hardreset\">sil24_pmp_hardreset</a>(struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a>, unsigned int *<a class=\"id\" href=\"#class\">class</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       unsigned long <a class=\"id\" href=\"#deadline\">deadline</a>);", 
"static void <a class=\"id\" href=\"#sil24_error_handler\">sil24_error_handler</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>);", 
"static void <a class=\"id\" href=\"#sil24_post_internal_cmd\">sil24_post_internal_cmd</a>(struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>);", 
"static int <a class=\"id\" href=\"#sil24_port_start\">sil24_port_start</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>);", 
"static int <a class=\"id\" href=\"#sil24_init_one\">sil24_init_one</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#pdev\">pdev</a>, const struct <a class=\"id\" href=\"#pci_device_id\">pci_device_id</a> *<a class=\"id\" href=\"#ent\">ent</a>);", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_PM\">CONFIG_PM</a>", 
"static int <a class=\"id\" href=\"#sil24_pci_device_resume\">sil24_pci_device_resume</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#pdev\">pdev</a>);", 
"static int <a class=\"id\" href=\"#sil24_port_resume\">sil24_port_resume</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>);", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"static const struct <a class=\"id\" href=\"#pci_device_id\">pci_device_id</a> <a class=\"id\" href=\"#sil24_pci_tbl\">sil24_pci_tbl</a>[] = {", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_VDEVICE\">PCI_VDEVICE</a>(<a class=\"id\" href=\"#CMD\">CMD</a>, 0x3124), <a class=\"id\" href=\"#BID_SIL3124\">BID_SIL3124</a> },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_VDEVICE\">PCI_VDEVICE</a>(<a class=\"id\" href=\"#INTEL\">INTEL</a>, 0x3124), <a class=\"id\" href=\"#BID_SIL3124\">BID_SIL3124</a> },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_VDEVICE\">PCI_VDEVICE</a>(<a class=\"id\" href=\"#CMD\">CMD</a>, 0x3132), <a class=\"id\" href=\"#BID_SIL3132\">BID_SIL3132</a> },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_VDEVICE\">PCI_VDEVICE</a>(<a class=\"id\" href=\"#CMD\">CMD</a>, 0x0242), <a class=\"id\" href=\"#BID_SIL3132\">BID_SIL3132</a> },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_VDEVICE\">PCI_VDEVICE</a>(<a class=\"id\" href=\"#CMD\">CMD</a>, 0x0244), <a class=\"id\" href=\"#BID_SIL3132\">BID_SIL3132</a> },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_VDEVICE\">PCI_VDEVICE</a>(<a class=\"id\" href=\"#CMD\">CMD</a>, 0x3131), <a class=\"id\" href=\"#BID_SIL3131\">BID_SIL3131</a> },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#PCI_VDEVICE\">PCI_VDEVICE</a>(<a class=\"id\" href=\"#CMD\">CMD</a>, 0x3531), <a class=\"id\" href=\"#BID_SIL3131\">BID_SIL3131</a> },", 
"", 
"<span class=\"ts\"/>{ } <span class=\"comment\">/* terminate list */</span>", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#pci_driver\">pci_driver</a> <a class=\"id\" href=\"#sil24_pci_driver\">sil24_pci_driver</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#DRV_NAME\">DRV_NAME</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#id_table\">id_table</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_pci_tbl\">sil24_pci_tbl</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#probe\">probe</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_init_one\">sil24_init_one</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#remove\">remove</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ata_pci_remove_one\">ata_pci_remove_one</a>,", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_PM\">CONFIG_PM</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#suspend\">suspend</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ata_pci_device_suspend\">ata_pci_device_suspend</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#resume\">resume</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_pci_device_resume\">sil24_pci_device_resume</a>,", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#scsi_host_template\">scsi_host_template</a> <a class=\"id\" href=\"#sil24_sht\">sil24_sht</a> = {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ATA_NCQ_SHT\">ATA_NCQ_SHT</a>(<a class=\"id\" href=\"#DRV_NAME\">DRV_NAME</a>),", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#can_queue\">can_queue</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#SIL24_MAX_CMDS\">SIL24_MAX_CMDS</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#sg_tablesize\">sg_tablesize</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#SIL24_MAX_SGE\">SIL24_MAX_SGE</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#dma_boundary\">dma_boundary</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ATA_DMA_BOUNDARY\">ATA_DMA_BOUNDARY</a>,", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#ata_port_operations\">ata_port_operations</a> <a class=\"id\" href=\"#sil24_ops\">sil24_ops</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#inherits\">inherits</a><span class=\"ts\"/><span class=\"ts\"/>= &amp;<a class=\"id\" href=\"#sata_pmp_port_ops\">sata_pmp_port_ops</a>,", 
"", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#qc_defer\">qc_defer</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_qc_defer\">sil24_qc_defer</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#qc_prep\">qc_prep</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_qc_prep\">sil24_qc_prep</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#qc_issue\">qc_issue</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_qc_issue\">sil24_qc_issue</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#qc_fill_rtf\">qc_fill_rtf</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_qc_fill_rtf\">sil24_qc_fill_rtf</a>,", 
"", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#freeze\">freeze</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_freeze\">sil24_freeze</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#thaw\">thaw</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_thaw\">sil24_thaw</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#softreset\">softreset</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_softreset\">sil24_softreset</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#hardreset\">hardreset</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_hardreset\">sil24_hardreset</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#pmp_softreset\">pmp_softreset</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_softreset\">sil24_softreset</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#pmp_hardreset\">pmp_hardreset</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_pmp_hardreset\">sil24_pmp_hardreset</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#error_handler\">error_handler</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_error_handler\">sil24_error_handler</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#post_internal_cmd\">post_internal_cmd</a><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_post_internal_cmd\">sil24_post_internal_cmd</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#dev_config\">dev_config</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_dev_config\">sil24_dev_config</a>,", 
"", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#scr_read\">scr_read</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_scr_read\">sil24_scr_read</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#scr_write\">scr_write</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_scr_write\">sil24_scr_write</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#pmp_attach\">pmp_attach</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_pmp_attach\">sil24_pmp_attach</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#pmp_detach\">pmp_detach</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_pmp_detach\">sil24_pmp_detach</a>,", 
"", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#port_start\">port_start</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_port_start\">sil24_port_start</a>,", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_PM\">CONFIG_PM</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#port_resume\">port_resume</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#sil24_port_resume\">sil24_port_resume</a>,", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"};", 
"", 
"static int <a class=\"id\" href=\"#sata_sil24_msi\">sata_sil24_msi</a>;    <span class=\"comment\">/* Disable MSI */</span>", 
"<a class=\"id\" href=\"#module_param_named\">module_param_named</a>(<a class=\"id\" href=\"#msi\">msi</a>, <a class=\"id\" href=\"#sata_sil24_msi\">sata_sil24_msi</a>, <a class=\"id\" href=\"#bool\">bool</a>, <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>);", 
"<a class=\"id\" href=\"#MODULE_PARM_DESC\">MODULE_PARM_DESC</a>(<a class=\"id\" href=\"#msi\">msi</a>, \"Enable MSI (Default: false)\");", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Use bits 30-31 of port_flags to encode available port numbers.</span>", 
"<span class=\"comment\"> * Current maxium is 4.</span>", 
"<span class=\"comment\"> */</span>", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#SIL24_NPORTS2FLAG\">SIL24_NPORTS2FLAG</a>(<a class=\"id\" href=\"#nports\">nports</a>)<span class=\"ts\"/>((((unsigned)(<a class=\"id\" href=\"#nports\">nports</a>) - 1) &amp; 0x3) << 30)", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#SIL24_FLAG2NPORTS\">SIL24_FLAG2NPORTS</a>(<a class=\"id\" href=\"#flag\">flag</a>)<span class=\"ts\"/><span class=\"ts\"/>((((<a class=\"id\" href=\"#flag\">flag</a>) >> 30) &amp; 0x3) + 1)", 
"", 
"static const struct <a class=\"id\" href=\"#ata_port_info\">ata_port_info</a> <a class=\"id\" href=\"#sil24_port_info\">sil24_port_info</a>[] = {", 
"<span class=\"ts\"/><span class=\"comment\">/* sil_3124 */</span>", 
"<span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#flags\">flags</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#SIL24_COMMON_FLAGS\">SIL24_COMMON_FLAGS</a> | <a class=\"id\" href=\"#SIL24_NPORTS2FLAG\">SIL24_NPORTS2FLAG</a>(4) |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#SIL24_FLAG_PCIX_IRQ_WOC\">SIL24_FLAG_PCIX_IRQ_WOC</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#pio_mask\">pio_mask</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ATA_PIO4\">ATA_PIO4</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#mwdma_mask\">mwdma_mask</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ATA_MWDMA2\">ATA_MWDMA2</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#udma_mask\">udma_mask</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ATA_UDMA5\">ATA_UDMA5</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#port_ops\">port_ops</a><span class=\"ts\"/>= &amp;<a class=\"id\" href=\"#sil24_ops\">sil24_ops</a>,", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/><span class=\"comment\">/* sil_3132 */</span>", 
"<span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#flags\">flags</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#SIL24_COMMON_FLAGS\">SIL24_COMMON_FLAGS</a> | <a class=\"id\" href=\"#SIL24_NPORTS2FLAG\">SIL24_NPORTS2FLAG</a>(2),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#pio_mask\">pio_mask</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ATA_PIO4\">ATA_PIO4</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#mwdma_mask\">mwdma_mask</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ATA_MWDMA2\">ATA_MWDMA2</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#udma_mask\">udma_mask</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ATA_UDMA5\">ATA_UDMA5</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#port_ops\">port_ops</a><span class=\"ts\"/>= &amp;<a class=\"id\" href=\"#sil24_ops\">sil24_ops</a>,", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/><span class=\"comment\">/* sil_3131/sil_3531 */</span>", 
"<span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#flags\">flags</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#SIL24_COMMON_FLAGS\">SIL24_COMMON_FLAGS</a> | <a class=\"id\" href=\"#SIL24_NPORTS2FLAG\">SIL24_NPORTS2FLAG</a>(1),", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#pio_mask\">pio_mask</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ATA_PIO4\">ATA_PIO4</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#mwdma_mask\">mwdma_mask</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ATA_MWDMA2\">ATA_MWDMA2</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#udma_mask\">udma_mask</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ATA_UDMA5\">ATA_UDMA5</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#port_ops\">port_ops</a><span class=\"ts\"/>= &amp;<a class=\"id\" href=\"#sil24_ops\">sil24_ops</a>,", 
"<span class=\"ts\"/>},", 
"};", 
"", 
"static int <a class=\"id\" href=\"#sil24_tag\">sil24_tag</a>(int <a class=\"id\" href=\"#tag\">tag</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(<a class=\"id\" href=\"#ata_tag_internal\">ata_tag_internal</a>(<a class=\"id\" href=\"#tag\">tag</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#tag\">tag</a>;", 
"}", 
"", 
"static unsigned long <a class=\"id\" href=\"#sil24_port_offset\">sil24_port_offset</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#port_no\">port_no</a> * <a class=\"id\" href=\"#PORT_REGS_SIZE\">PORT_REGS_SIZE</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#sil24_port_base\">sil24_port_base</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#iomap\">iomap</a>[<a class=\"id\" href=\"#SIL24_PORT_BAR\">SIL24_PORT_BAR</a>] + <a class=\"id\" href=\"#sil24_port_offset\">sil24_port_offset</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#sil24_dev_config\">sil24_dev_config</a>(struct <a class=\"id\" href=\"#ata_device\">ata_device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port\">port</a> = <a class=\"id\" href=\"#sil24_port_base\">sil24_port_base</a>(<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#ap\">ap</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#cdb_len\">cdb_len</a> == 16)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#PORT_CS_CDB16\">PORT_CS_CDB16</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CTRL_STAT\">PORT_CTRL_STAT</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#PORT_CS_CDB16\">PORT_CS_CDB16</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CTRL_CLR\">PORT_CTRL_CLR</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#sil24_read_tf\">sil24_read_tf</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>, int <a class=\"id\" href=\"#tag\">tag</a>, struct <a class=\"id\" href=\"#ata_taskfile\">ata_taskfile</a> *<a class=\"id\" href=\"#tf\">tf</a>)", 
"{", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port\">port</a> = <a class=\"id\" href=\"#sil24_port_base\">sil24_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sil24_prb\">sil24_prb</a> <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#prb\">prb</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#fis\">fis</a>[6 * 4];", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#prb\">prb</a> = <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_LRAM\">PORT_LRAM</a> + <a class=\"id\" href=\"#sil24_tag\">sil24_tag</a>(<a class=\"id\" href=\"#tag\">tag</a>) * <a class=\"id\" href=\"#PORT_LRAM_SLOT_SZ\">PORT_LRAM_SLOT_SZ</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memcpy_fromio\">memcpy_fromio</a>(<a class=\"id\" href=\"#fis\">fis</a>, <a class=\"id\" href=\"#prb\">prb</a>-><a class=\"id\" href=\"#fis\">fis</a>, sizeof(<a class=\"id\" href=\"#fis\">fis</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_tf_from_fis\">ata_tf_from_fis</a>(<a class=\"id\" href=\"#fis\">fis</a>, <a class=\"id\" href=\"#tf\">tf</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#sil24_scr_map\">sil24_scr_map</a>[] = {", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#SCR_CONTROL\">SCR_CONTROL</a>]<span class=\"ts\"/>= 0,", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#SCR_STATUS\">SCR_STATUS</a>]<span class=\"ts\"/>= 1,", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#SCR_ERROR\">SCR_ERROR</a>]<span class=\"ts\"/>= 2,", 
"<span class=\"ts\"/>[<a class=\"id\" href=\"#SCR_ACTIVE\">SCR_ACTIVE</a>]<span class=\"ts\"/>= 3,", 
"};", 
"", 
"static int <a class=\"id\" href=\"#sil24_scr_read\">sil24_scr_read</a>(struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a>, unsigned <a class=\"id\" href=\"#sc_reg\">sc_reg</a>, <a class=\"id\" href=\"#u32\">u32</a> *<a class=\"id\" href=\"#val\">val</a>)", 
"{", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#scr_addr\">scr_addr</a> = <a class=\"id\" href=\"#sil24_port_base\">sil24_port_base</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#ap\">ap</a>) + <a class=\"id\" href=\"#PORT_SCONTROL\">PORT_SCONTROL</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sc_reg\">sc_reg</a> &lt; <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#sil24_scr_map\">sil24_scr_map</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#addr\">addr</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#addr\">addr</a> = <a class=\"id\" href=\"#scr_addr\">scr_addr</a> + <a class=\"id\" href=\"#sil24_scr_map\">sil24_scr_map</a>[<a class=\"id\" href=\"#sc_reg\">sc_reg</a>] * 4;", 
"<span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#val\">val</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#scr_addr\">scr_addr</a> + <a class=\"id\" href=\"#sil24_scr_map\">sil24_scr_map</a>[<a class=\"id\" href=\"#sc_reg\">sc_reg</a>] * 4);", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#sil24_scr_write\">sil24_scr_write</a>(struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a>, unsigned <a class=\"id\" href=\"#sc_reg\">sc_reg</a>, <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#val\">val</a>)", 
"{", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#scr_addr\">scr_addr</a> = <a class=\"id\" href=\"#sil24_port_base\">sil24_port_base</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#ap\">ap</a>) + <a class=\"id\" href=\"#PORT_SCONTROL\">PORT_SCONTROL</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sc_reg\">sc_reg</a> &lt; <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#sil24_scr_map\">sil24_scr_map</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#addr\">addr</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#addr\">addr</a> = <a class=\"id\" href=\"#scr_addr\">scr_addr</a> + <a class=\"id\" href=\"#sil24_scr_map\">sil24_scr_map</a>[<a class=\"id\" href=\"#sc_reg\">sc_reg</a>] * 4;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#val\">val</a>, <a class=\"id\" href=\"#scr_addr\">scr_addr</a> + <a class=\"id\" href=\"#sil24_scr_map\">sil24_scr_map</a>[<a class=\"id\" href=\"#sc_reg\">sc_reg</a>] * 4);", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#sil24_config_port\">sil24_config_port</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port\">port</a> = <a class=\"id\" href=\"#sil24_port_base\">sil24_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* configure IRQ WoC */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#SIL24_FLAG_PCIX_IRQ_WOC\">SIL24_FLAG_PCIX_IRQ_WOC</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#PORT_CS_IRQ_WOC\">PORT_CS_IRQ_WOC</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CTRL_STAT\">PORT_CTRL_STAT</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#PORT_CS_IRQ_WOC\">PORT_CS_IRQ_WOC</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CTRL_CLR\">PORT_CTRL_CLR</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* zero error counters. */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writew\">writew</a>(0x8000, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_DECODE_ERR_THRESH\">PORT_DECODE_ERR_THRESH</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writew\">writew</a>(0x8000, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CRC_ERR_THRESH\">PORT_CRC_ERR_THRESH</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writew\">writew</a>(0x8000, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_HSHK_ERR_THRESH\">PORT_HSHK_ERR_THRESH</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writew\">writew</a>(0x0000, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_DECODE_ERR_CNT\">PORT_DECODE_ERR_CNT</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writew\">writew</a>(0x0000, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CRC_ERR_CNT\">PORT_CRC_ERR_CNT</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writew\">writew</a>(0x0000, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_HSHK_ERR_CNT\">PORT_HSHK_ERR_CNT</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* always use 64bit activation */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#PORT_CS_32BIT_ACTV\">PORT_CS_32BIT_ACTV</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CTRL_CLR\">PORT_CTRL_CLR</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* clear port multiplier enable and resume bits */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#PORT_CS_PMP_EN\">PORT_CS_PMP_EN</a> | <a class=\"id\" href=\"#PORT_CS_PMP_RESUME\">PORT_CS_PMP_RESUME</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CTRL_CLR\">PORT_CTRL_CLR</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#sil24_config_pmp\">sil24_config_pmp</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>, int <a class=\"id\" href=\"#attached\">attached</a>)", 
"{", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port\">port</a> = <a class=\"id\" href=\"#sil24_port_base\">sil24_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#attached\">attached</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#PORT_CS_PMP_EN\">PORT_CS_PMP_EN</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CTRL_STAT\">PORT_CTRL_STAT</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#PORT_CS_PMP_EN\">PORT_CS_PMP_EN</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CTRL_CLR\">PORT_CTRL_CLR</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#sil24_clear_pmp\">sil24_clear_pmp</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port\">port</a> = <a class=\"id\" href=\"#sil24_port_base\">sil24_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#PORT_CS_PMP_RESUME\">PORT_CS_PMP_RESUME</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CTRL_CLR\">PORT_CTRL_CLR</a>);", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#SATA_PMP_MAX_PORTS\">SATA_PMP_MAX_PORTS</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#pmp_base\">pmp_base</a> = <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_PMP\">PORT_PMP</a> + <a class=\"id\" href=\"#i\">i</a> * <a class=\"id\" href=\"#PORT_PMP_SIZE\">PORT_PMP_SIZE</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(0, <a class=\"id\" href=\"#pmp_base\">pmp_base</a> + <a class=\"id\" href=\"#PORT_PMP_STATUS\">PORT_PMP_STATUS</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(0, <a class=\"id\" href=\"#pmp_base\">pmp_base</a> + <a class=\"id\" href=\"#PORT_PMP_QACTIVE\">PORT_PMP_QACTIVE</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static int <a class=\"id\" href=\"#sil24_init_port\">sil24_init_port</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port\">port</a> = <a class=\"id\" href=\"#sil24_port_base\">sil24_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sil24_port_priv\">sil24_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#tmp\">tmp</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* clear PMP error status */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sata_pmp_attached\">sata_pmp_attached</a>(<a class=\"id\" href=\"#ap\">ap</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sil24_clear_pmp\">sil24_clear_pmp</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#PORT_CS_INIT\">PORT_CS_INIT</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CTRL_STAT\">PORT_CTRL_STAT</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_wait_register\">ata_wait_register</a>(<a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CTRL_STAT\">PORT_CTRL_STAT</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#PORT_CS_INIT\">PORT_CS_INIT</a>, <a class=\"id\" href=\"#PORT_CS_INIT\">PORT_CS_INIT</a>, 10, 100);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> = <a class=\"id\" href=\"#ata_wait_register\">ata_wait_register</a>(<a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CTRL_STAT\">PORT_CTRL_STAT</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#PORT_CS_RDY\">PORT_CS_RDY</a>, 0, 10, 100);", 
"", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#tmp\">tmp</a> &amp; (<a class=\"id\" href=\"#PORT_CS_INIT\">PORT_CS_INIT</a> | <a class=\"id\" href=\"#PORT_CS_RDY\">PORT_CS_RDY</a>)) != <a class=\"id\" href=\"#PORT_CS_RDY\">PORT_CS_RDY</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#do_port_rst\">do_port_rst</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#link\">link</a>.<a class=\"id\" href=\"#eh_context\">eh_context</a>.<a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#sil24_exec_polled_cmd\">sil24_exec_polled_cmd</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>, int <a class=\"id\" href=\"#pmp\">pmp</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> const struct <a class=\"id\" href=\"#ata_taskfile\">ata_taskfile</a> *<a class=\"id\" href=\"#tf\">tf</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> int <a class=\"id\" href=\"#is_cmd\">is_cmd</a>, <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#ctrl\">ctrl</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> unsigned long <a class=\"id\" href=\"#timeout_msec\">timeout_msec</a>)", 
"{", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port\">port</a> = <a class=\"id\" href=\"#sil24_port_base\">sil24_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sil24_port_priv\">sil24_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sil24_prb\">sil24_prb</a> *<a class=\"id\" href=\"#prb\">prb</a> = &amp;<a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#cmd_block\">cmd_block</a>[0].<a class=\"id\" href=\"#ata\">ata</a>.<a class=\"id\" href=\"#prb\">prb</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dma_addr_t\">dma_addr_t</a> <a class=\"id\" href=\"#paddr\">paddr</a> = <a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#cmd_block_dma\">cmd_block_dma</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#irq_enabled\">irq_enabled</a>, <a class=\"id\" href=\"#irq_mask\">irq_mask</a>, <a class=\"id\" href=\"#irq_stat\">irq_stat</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rc\">rc</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#prb\">prb</a>-><a class=\"id\" href=\"#ctrl\">ctrl</a> = <a class=\"id\" href=\"#cpu_to_le16\">cpu_to_le16</a>(<a class=\"id\" href=\"#ctrl\">ctrl</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_tf_to_fis\">ata_tf_to_fis</a>(<a class=\"id\" href=\"#tf\">tf</a>, <a class=\"id\" href=\"#pmp\">pmp</a>, <a class=\"id\" href=\"#is_cmd\">is_cmd</a>, <a class=\"id\" href=\"#prb\">prb</a>-><a class=\"id\" href=\"#fis\">fis</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* temporarily plug completion and error interrupts */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#irq_enabled\">irq_enabled</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_IRQ_ENABLE_SET\">PORT_IRQ_ENABLE_SET</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#PORT_IRQ_COMPLETE\">PORT_IRQ_COMPLETE</a> | <a class=\"id\" href=\"#PORT_IRQ_ERROR\">PORT_IRQ_ERROR</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_IRQ_ENABLE_CLR\">PORT_IRQ_ENABLE_CLR</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * The barrier is required to ensure that writes to cmd_block reach</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * the memory before the write to PORT_CMD_ACTIVATE.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#wmb\">wmb</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>((<a class=\"id\" href=\"#u32\">u32</a>)<a class=\"id\" href=\"#paddr\">paddr</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CMD_ACTIVATE\">PORT_CMD_ACTIVATE</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>((<a class=\"id\" href=\"#u64\">u64</a>)<a class=\"id\" href=\"#paddr\">paddr</a> >> 32, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CMD_ACTIVATE\">PORT_CMD_ACTIVATE</a> + 4);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#irq_mask\">irq_mask</a> = (<a class=\"id\" href=\"#PORT_IRQ_COMPLETE\">PORT_IRQ_COMPLETE</a> | <a class=\"id\" href=\"#PORT_IRQ_ERROR\">PORT_IRQ_ERROR</a>) << <a class=\"id\" href=\"#PORT_IRQ_RAW_SHIFT\">PORT_IRQ_RAW_SHIFT</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#irq_stat\">irq_stat</a> = <a class=\"id\" href=\"#ata_wait_register\">ata_wait_register</a>(<a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_IRQ_STAT\">PORT_IRQ_STAT</a>, <a class=\"id\" href=\"#irq_mask\">irq_mask</a>, 0x0,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     10, <a class=\"id\" href=\"#timeout_msec\">timeout_msec</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#irq_mask\">irq_mask</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_IRQ_STAT\">PORT_IRQ_STAT</a>); <span class=\"comment\">/* clear IRQs */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#irq_stat\">irq_stat</a> >>= <a class=\"id\" href=\"#PORT_IRQ_RAW_SHIFT\">PORT_IRQ_RAW_SHIFT</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irq_stat\">irq_stat</a> &amp; <a class=\"id\" href=\"#PORT_IRQ_COMPLETE\">PORT_IRQ_COMPLETE</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = 0;", 
"<span class=\"ts\"/>else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* force port into known state */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sil24_init_port\">sil24_init_port</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#irq_stat\">irq_stat</a> &amp; <a class=\"id\" href=\"#PORT_IRQ_ERROR\">PORT_IRQ_ERROR</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = -<a class=\"id\" href=\"#EBUSY\">EBUSY</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* restore IRQ enabled */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#irq_enabled\">irq_enabled</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_IRQ_ENABLE_SET\">PORT_IRQ_ENABLE_SET</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#rc\">rc</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#sil24_softreset\">sil24_softreset</a>(struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a>, unsigned int *<a class=\"id\" href=\"#class\">class</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   unsigned long <a class=\"id\" href=\"#deadline\">deadline</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#ap\">ap</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#pmp\">pmp</a> = <a class=\"id\" href=\"#sata_srst_pmp\">sata_srst_pmp</a>(<a class=\"id\" href=\"#link\">link</a>);", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#timeout_msec\">timeout_msec</a> = 0;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_taskfile\">ata_taskfile</a> <a class=\"id\" href=\"#tf\">tf</a>;", 
"<span class=\"ts\"/>const char *<a class=\"id\" href=\"#reason\">reason</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rc\">rc</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#DPRINTK\">DPRINTK</a>(\"ENTER\\n\");", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* put the port into known state */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sil24_init_port\">sil24_init_port</a>(<a class=\"id\" href=\"#ap\">ap</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#reason\">reason</a> = \"port not ready\";", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* do SRST */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#time_after\">time_after</a>(<a class=\"id\" href=\"#deadline\">deadline</a>, <a class=\"id\" href=\"#jiffies\">jiffies</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#timeout_msec\">timeout_msec</a> = <a class=\"id\" href=\"#jiffies_to_msecs\">jiffies_to_msecs</a>(<a class=\"id\" href=\"#deadline\">deadline</a> - <a class=\"id\" href=\"#jiffies\">jiffies</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_tf_init\">ata_tf_init</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>, &amp;<a class=\"id\" href=\"#tf\">tf</a>);<span class=\"ts\"/><span class=\"comment\">/* doesn't really matter */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#sil24_exec_polled_cmd\">sil24_exec_polled_cmd</a>(<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#pmp\">pmp</a>, &amp;<a class=\"id\" href=\"#tf\">tf</a>, 0, <a class=\"id\" href=\"#PRB_CTRL_SRST\">PRB_CTRL_SRST</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#timeout_msec\">timeout_msec</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a> == -<a class=\"id\" href=\"#EBUSY\">EBUSY</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#reason\">reason</a> = \"timeout\";", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/>} else if (<a class=\"id\" href=\"#rc\">rc</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#reason\">reason</a> = \"SRST command error\";", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sil24_read_tf\">sil24_read_tf</a>(<a class=\"id\" href=\"#ap\">ap</a>, 0, &amp;<a class=\"id\" href=\"#tf\">tf</a>);", 
"<span class=\"ts\"/>*<a class=\"id\" href=\"#class\">class</a> = <a class=\"id\" href=\"#ata_dev_classify\">ata_dev_classify</a>(&amp;<a class=\"id\" href=\"#tf\">tf</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#DPRINTK\">DPRINTK</a>(\"EXIT, class=%u\\n\", *<a class=\"id\" href=\"#class\">class</a>);", 
"<span class=\"ts\"/>return 0;", 
"", 
" <a class=\"id\" href=\"#err\">err</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_link_printk\">ata_link_printk</a>(<a class=\"id\" href=\"#link\">link</a>, <a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a>, \"softreset failed (%s)\\n\", <a class=\"id\" href=\"#reason\">reason</a>);", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#sil24_hardreset\">sil24_hardreset</a>(struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a>, unsigned int *<a class=\"id\" href=\"#class\">class</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   unsigned long <a class=\"id\" href=\"#deadline\">deadline</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#ap\">ap</a>;", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port\">port</a> = <a class=\"id\" href=\"#sil24_port_base\">sil24_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sil24_port_priv\">sil24_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#did_port_rst\">did_port_rst</a> = 0;", 
"<span class=\"ts\"/>const char *<a class=\"id\" href=\"#reason\">reason</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#tout_msec\">tout_msec</a>, <a class=\"id\" href=\"#rc\">rc</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#tmp\">tmp</a>;", 
"", 
" <a class=\"id\" href=\"#retry\">retry</a>:", 
"<span class=\"ts\"/><span class=\"comment\">/* Sometimes, DEV_RST is not enough to recover the controller.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * This happens often after PM DMA CS errata.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#do_port_rst\">do_port_rst</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_port_printk\">ata_port_printk</a>(<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a>, \"controller in dubious \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"state, performing PORT_RST\\n\");", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#PORT_CS_PORT_RST\">PORT_CS_PORT_RST</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CTRL_STAT\">PORT_CTRL_STAT</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#msleep\">msleep</a>(10);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#PORT_CS_PORT_RST\">PORT_CS_PORT_RST</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CTRL_CLR\">PORT_CTRL_CLR</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_wait_register\">ata_wait_register</a>(<a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CTRL_STAT\">PORT_CTRL_STAT</a>, <a class=\"id\" href=\"#PORT_CS_RDY\">PORT_CS_RDY</a>, 0,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  10, 5000);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* restore port configuration */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sil24_config_port\">sil24_config_port</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sil24_config_pmp\">sil24_config_pmp</a>(<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#nr_pmp_links\">nr_pmp_links</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#do_port_rst\">do_port_rst</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#did_port_rst\">did_port_rst</a> = 1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* sil24 does the right thing(tm) without any protection */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sata_set_spd\">sata_set_spd</a>(<a class=\"id\" href=\"#link\">link</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tout_msec\">tout_msec</a> = 100;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ata_link_online\">ata_link_online</a>(<a class=\"id\" href=\"#link\">link</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tout_msec\">tout_msec</a> = 5000;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#PORT_CS_DEV_RST\">PORT_CS_DEV_RST</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CTRL_STAT\">PORT_CTRL_STAT</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> = <a class=\"id\" href=\"#ata_wait_register\">ata_wait_register</a>(<a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CTRL_STAT\">PORT_CTRL_STAT</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#PORT_CS_DEV_RST\">PORT_CS_DEV_RST</a>, <a class=\"id\" href=\"#PORT_CS_DEV_RST\">PORT_CS_DEV_RST</a>, 10,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tout_msec\">tout_msec</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* SStatus oscillates between zero and valid status after</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * DEV_RST, debounce it.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#sata_link_debounce\">sata_link_debounce</a>(<a class=\"id\" href=\"#link\">link</a>, <a class=\"id\" href=\"#sata_deb_timing_long\">sata_deb_timing_long</a>, <a class=\"id\" href=\"#deadline\">deadline</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#reason\">reason</a> = \"PHY debouncing failed\";", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tmp\">tmp</a> &amp; <a class=\"id\" href=\"#PORT_CS_DEV_RST\">PORT_CS_DEV_RST</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ata_link_offline\">ata_link_offline</a>(<a class=\"id\" href=\"#link\">link</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#reason\">reason</a> = \"link not ready\";", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Sil24 doesn't store signature FIS after hardreset, so we</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * can't wait for BSY to clear.  Some devices take a long time</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * to get ready and those devices will choke if we don't wait</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * for BSY clearance here.  Tell libata to perform follow-up</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * softreset.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#EAGAIN\">EAGAIN</a>;", 
"", 
" <a class=\"id\" href=\"#err\">err</a>:", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#did_port_rst\">did_port_rst</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#do_port_rst\">do_port_rst</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#retry\">retry</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_link_printk\">ata_link_printk</a>(<a class=\"id\" href=\"#link\">link</a>, <a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a>, \"hardreset failed (%s)\\n\", <a class=\"id\" href=\"#reason\">reason</a>);", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> void <a class=\"id\" href=\"#sil24_fill_sg\">sil24_fill_sg</a>(struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> struct <a class=\"id\" href=\"#sil24_sge\">sil24_sge</a> *<a class=\"id\" href=\"#sge\">sge</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#scatterlist\">scatterlist</a> *<a class=\"id\" href=\"#sg\">sg</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sil24_sge\">sil24_sge</a> *<a class=\"id\" href=\"#last_sge\">last_sge</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#si\">si</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#for_each_sg\">for_each_sg</a>(<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#sg\">sg</a>, <a class=\"id\" href=\"#sg\">sg</a>, <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#n_elem\">n_elem</a>, <a class=\"id\" href=\"#si\">si</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sge\">sge</a>-><a class=\"id\" href=\"#addr\">addr</a> = <a class=\"id\" href=\"#cpu_to_le64\">cpu_to_le64</a>(<a class=\"id\" href=\"#sg_dma_address\">sg_dma_address</a>(<a class=\"id\" href=\"#sg\">sg</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sge\">sge</a>-><a class=\"id\" href=\"#cnt\">cnt</a> = <a class=\"id\" href=\"#cpu_to_le32\">cpu_to_le32</a>(<a class=\"id\" href=\"#sg_dma_len\">sg_dma_len</a>(<a class=\"id\" href=\"#sg\">sg</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sge\">sge</a>-><a class=\"id\" href=\"#flags\">flags</a> = 0;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#last_sge\">last_sge</a> = <a class=\"id\" href=\"#sge\">sge</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sge\">sge</a>++;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#last_sge\">last_sge</a>-><a class=\"id\" href=\"#flags\">flags</a> = <a class=\"id\" href=\"#cpu_to_le32\">cpu_to_le32</a>(<a class=\"id\" href=\"#SGE_TRM\">SGE_TRM</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#sil24_qc_defer\">sil24_qc_defer</a>(struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a> = <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#link\">link</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#ap\">ap</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#prot\">prot</a> = <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#protocol\">protocol</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * There is a bug in the chip:</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Port LRAM Causes the PRB/SGT Data to be Corrupted</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * If the host issues a read request for LRAM and SActive registers</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * while active commands are available in the port, PRB/SGT data in</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * the LRAM can become corrupted. This issue applies only when</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * reading from, but not writing to, the LRAM.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Therefore, reading LRAM when there is no particular error [and</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * other commands may be outstanding] is prohibited.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * To avoid this bug there are two situations where a command must run</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * exclusive of any other commands on the port:</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * - ATAPI commands which check the sense data</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * - Passthrough ATA commands which always have ATA_QCFLAG_RESULT_TF</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *   set.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"> <span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#is_excl\">is_excl</a> = (<a class=\"id\" href=\"#ata_is_atapi\">ata_is_atapi</a>(<a class=\"id\" href=\"#prot\">prot</a>) ||", 
"<span class=\"ts\"/><span class=\"ts\"/>       (<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#ATA_QCFLAG_RESULT_TF\">ATA_QCFLAG_RESULT_TF</a>));", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#excl_link\">excl_link</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#link\">link</a> == <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#excl_link\">excl_link</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#nr_active_links\">nr_active_links</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ATA_DEFER_PORT\">ATA_DEFER_PORT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#flags\">flags</a> |= <a class=\"id\" href=\"#ATA_QCFLAG_CLEAR_EXCL\">ATA_QCFLAG_CLEAR_EXCL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ATA_DEFER_PORT\">ATA_DEFER_PORT</a>;", 
"<span class=\"ts\"/>} else if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(<a class=\"id\" href=\"#is_excl\">is_excl</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#excl_link\">excl_link</a> = <a class=\"id\" href=\"#link\">link</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#nr_active_links\">nr_active_links</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ATA_DEFER_PORT\">ATA_DEFER_PORT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#flags\">flags</a> |= <a class=\"id\" href=\"#ATA_QCFLAG_CLEAR_EXCL\">ATA_QCFLAG_CLEAR_EXCL</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ata_std_qc_defer\">ata_std_qc_defer</a>(<a class=\"id\" href=\"#qc\">qc</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#sil24_qc_prep\">sil24_qc_prep</a>(struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#ap\">ap</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sil24_port_priv\">sil24_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>union <a class=\"id\" href=\"#sil24_cmd_block\">sil24_cmd_block</a> *<a class=\"id\" href=\"#cb\">cb</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sil24_prb\">sil24_prb</a> *<a class=\"id\" href=\"#prb\">prb</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sil24_sge\">sil24_sge</a> *<a class=\"id\" href=\"#sge\">sge</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#ctrl\">ctrl</a> = 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cb\">cb</a> = &amp;<a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#cmd_block\">cmd_block</a>[<a class=\"id\" href=\"#sil24_tag\">sil24_tag</a>(<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#tag\">tag</a>)];", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#ata_is_atapi\">ata_is_atapi</a>(<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#protocol\">protocol</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#prb\">prb</a> = &amp;<a class=\"id\" href=\"#cb\">cb</a>-><a class=\"id\" href=\"#ata\">ata</a>.<a class=\"id\" href=\"#prb\">prb</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sge\">sge</a> = <a class=\"id\" href=\"#cb\">cb</a>-><a class=\"id\" href=\"#ata\">ata</a>.<a class=\"id\" href=\"#sge\">sge</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ata_is_data\">ata_is_data</a>(<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#protocol\">protocol</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#prot\">prot</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ctrl\">ctrl</a> = <a class=\"id\" href=\"#PRB_CTRL_PROTOCOL\">PRB_CTRL_PROTOCOL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ata_is_ncq\">ata_is_ncq</a>(<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#protocol\">protocol</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#prot\">prot</a> |= <a class=\"id\" href=\"#PRB_PROT_NCQ\">PRB_PROT_NCQ</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#ATA_TFLAG_WRITE\">ATA_TFLAG_WRITE</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#prot\">prot</a> |= <a class=\"id\" href=\"#PRB_PROT_WRITE\">PRB_PROT_WRITE</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#prot\">prot</a> |= <a class=\"id\" href=\"#PRB_PROT_READ\">PRB_PROT_READ</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#prb\">prb</a>-><a class=\"id\" href=\"#prot\">prot</a> = <a class=\"id\" href=\"#cpu_to_le16\">cpu_to_le16</a>(<a class=\"id\" href=\"#prot\">prot</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#prb\">prb</a> = &amp;<a class=\"id\" href=\"#cb\">cb</a>-><a class=\"id\" href=\"#atapi\">atapi</a>.<a class=\"id\" href=\"#prb\">prb</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sge\">sge</a> = <a class=\"id\" href=\"#cb\">cb</a>-><a class=\"id\" href=\"#atapi\">atapi</a>.<a class=\"id\" href=\"#sge\">sge</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(<a class=\"id\" href=\"#cb\">cb</a>-><a class=\"id\" href=\"#atapi\">atapi</a>.<a class=\"id\" href=\"#cdb\">cdb</a>, 0, sizeof(<a class=\"id\" href=\"#cb\">cb</a>-><a class=\"id\" href=\"#atapi\">atapi</a>.<a class=\"id\" href=\"#cdb\">cdb</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>(<a class=\"id\" href=\"#cb\">cb</a>-><a class=\"id\" href=\"#atapi\">atapi</a>.<a class=\"id\" href=\"#cdb\">cdb</a>, <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#cdb\">cdb</a>, <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#cdb_len\">cdb_len</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ata_is_data\">ata_is_data</a>(<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#protocol\">protocol</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#ATA_TFLAG_WRITE\">ATA_TFLAG_WRITE</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ctrl\">ctrl</a> = <a class=\"id\" href=\"#PRB_CTRL_PACKET_WRITE\">PRB_CTRL_PACKET_WRITE</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ctrl\">ctrl</a> = <a class=\"id\" href=\"#PRB_CTRL_PACKET_READ\">PRB_CTRL_PACKET_READ</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#prb\">prb</a>-><a class=\"id\" href=\"#ctrl\">ctrl</a> = <a class=\"id\" href=\"#cpu_to_le16\">cpu_to_le16</a>(<a class=\"id\" href=\"#ctrl\">ctrl</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_tf_to_fis\">ata_tf_to_fis</a>(&amp;<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#tf\">tf</a>, <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#pmp\">pmp</a>, 1, <a class=\"id\" href=\"#prb\">prb</a>-><a class=\"id\" href=\"#fis\">fis</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#ATA_QCFLAG_DMAMAP\">ATA_QCFLAG_DMAMAP</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sil24_fill_sg\">sil24_fill_sg</a>(<a class=\"id\" href=\"#qc\">qc</a>, <a class=\"id\" href=\"#sge\">sge</a>);", 
"}", 
"", 
"static unsigned int <a class=\"id\" href=\"#sil24_qc_issue\">sil24_qc_issue</a>(struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#ap\">ap</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sil24_port_priv\">sil24_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port\">port</a> = <a class=\"id\" href=\"#sil24_port_base\">sil24_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#tag\">tag</a> = <a class=\"id\" href=\"#sil24_tag\">sil24_tag</a>(<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#tag\">tag</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dma_addr_t\">dma_addr_t</a> <a class=\"id\" href=\"#paddr\">paddr</a>;", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#activate\">activate</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#paddr\">paddr</a> = <a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#cmd_block_dma\">cmd_block_dma</a> + <a class=\"id\" href=\"#tag\">tag</a> * sizeof(*<a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#cmd_block\">cmd_block</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#activate\">activate</a> = <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CMD_ACTIVATE\">PORT_CMD_ACTIVATE</a> + <a class=\"id\" href=\"#tag\">tag</a> * 8;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * The barrier is required to ensure that writes to cmd_block reach</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * the memory before the write to PORT_CMD_ACTIVATE.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#wmb\">wmb</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>((<a class=\"id\" href=\"#u32\">u32</a>)<a class=\"id\" href=\"#paddr\">paddr</a>, <a class=\"id\" href=\"#activate\">activate</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>((<a class=\"id\" href=\"#u64\">u64</a>)<a class=\"id\" href=\"#paddr\">paddr</a> >> 32, <a class=\"id\" href=\"#activate\">activate</a> + 4);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#sil24_qc_fill_rtf\">sil24_qc_fill_rtf</a>(struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sil24_read_tf\">sil24_read_tf</a>(<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#tag\">tag</a>, &amp;<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#result_tf\">result_tf</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#true\">true</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#sil24_pmp_attach\">sil24_pmp_attach</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> *<a class=\"id\" href=\"#gscr\">gscr</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#link\">link</a>.<a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#gscr\">gscr</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sil24_config_pmp\">sil24_config_pmp</a>(<a class=\"id\" href=\"#ap\">ap</a>, 1);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sil24_init_port\">sil24_init_port</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sata_pmp_gscr_vendor\">sata_pmp_gscr_vendor</a>(<a class=\"id\" href=\"#gscr\">gscr</a>) == 0x11ab &&", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#sata_pmp_gscr_devid\">sata_pmp_gscr_devid</a>(<a class=\"id\" href=\"#gscr\">gscr</a>) == 0x4140) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_port_printk\">ata_port_printk</a>(<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"disabling NCQ support due to sil24-mv4140 quirk\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#flags\">flags</a> &= ~<a class=\"id\" href=\"#ATA_FLAG_NCQ\">ATA_FLAG_NCQ</a>;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static void <a class=\"id\" href=\"#sil24_pmp_detach\">sil24_pmp_detach</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sil24_init_port\">sil24_init_port</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sil24_config_pmp\">sil24_config_pmp</a>(<a class=\"id\" href=\"#ap\">ap</a>, 0);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#flags\">flags</a> |= <a class=\"id\" href=\"#ATA_FLAG_NCQ\">ATA_FLAG_NCQ</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#sil24_pmp_hardreset\">sil24_pmp_hardreset</a>(struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a>, unsigned int *<a class=\"id\" href=\"#class\">class</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       unsigned long <a class=\"id\" href=\"#deadline\">deadline</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rc\">rc</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#sil24_init_port\">sil24_init_port</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_link_printk\">ata_link_printk</a>(<a class=\"id\" href=\"#link\">link</a>, <a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"hardreset failed (port not ready)\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#rc\">rc</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sata_std_hardreset\">sata_std_hardreset</a>(<a class=\"id\" href=\"#link\">link</a>, <a class=\"id\" href=\"#class\">class</a>, <a class=\"id\" href=\"#deadline\">deadline</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#sil24_freeze\">sil24_freeze</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port\">port</a> = <a class=\"id\" href=\"#sil24_port_base\">sil24_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Port-wide IRQ mask in HOST_CTRL doesn't really work, clear</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * PORT_IRQ_ENABLE instead.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(0xffff, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_IRQ_ENABLE_CLR\">PORT_IRQ_ENABLE_CLR</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#sil24_thaw\">sil24_thaw</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port\">port</a> = <a class=\"id\" href=\"#sil24_port_base\">sil24_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#tmp\">tmp</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* clear IRQ */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_IRQ_STAT\">PORT_IRQ_STAT</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#tmp\">tmp</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_IRQ_STAT\">PORT_IRQ_STAT</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* turn IRQ back on */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#DEF_PORT_IRQ\">DEF_PORT_IRQ</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_IRQ_ENABLE_SET\">PORT_IRQ_ENABLE_SET</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#sil24_error_intr\">sil24_error_intr</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port\">port</a> = <a class=\"id\" href=\"#sil24_port_base\">sil24_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sil24_port_priv\">sil24_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_eh_info\">ata_eh_info</a> *<a class=\"id\" href=\"#ehi\">ehi</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#abort\">abort</a> = 0, <a class=\"id\" href=\"#freeze\">freeze</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#irq_stat\">irq_stat</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* on error, we need to clear IRQ explicitly */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#irq_stat\">irq_stat</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_IRQ_STAT\">PORT_IRQ_STAT</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#irq_stat\">irq_stat</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_IRQ_STAT\">PORT_IRQ_STAT</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* first, analyze and record host port events */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a> = &amp;<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#link\">link</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ehi\">ehi</a> = &amp;<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#eh_info\">eh_info</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_ehi_clear_desc\">ata_ehi_clear_desc</a>(<a class=\"id\" href=\"#ehi\">ehi</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_ehi_push_desc\">ata_ehi_push_desc</a>(<a class=\"id\" href=\"#ehi\">ehi</a>, \"irq_stat 0x%08x\", <a class=\"id\" href=\"#irq_stat\">irq_stat</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irq_stat\">irq_stat</a> &amp; <a class=\"id\" href=\"#PORT_IRQ_SDB_NOTIFY\">PORT_IRQ_SDB_NOTIFY</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_ehi_push_desc\">ata_ehi_push_desc</a>(<a class=\"id\" href=\"#ehi\">ehi</a>, \"SDB notify\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sata_async_notification\">sata_async_notification</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irq_stat\">irq_stat</a> &amp; (<a class=\"id\" href=\"#PORT_IRQ_PHYRDY_CHG\">PORT_IRQ_PHYRDY_CHG</a> | <a class=\"id\" href=\"#PORT_IRQ_DEV_XCHG\">PORT_IRQ_DEV_XCHG</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_ehi_hotplugged\">ata_ehi_hotplugged</a>(<a class=\"id\" href=\"#ehi\">ehi</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_ehi_push_desc\">ata_ehi_push_desc</a>(<a class=\"id\" href=\"#ehi\">ehi</a>, \"%s\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#irq_stat\">irq_stat</a> &amp; <a class=\"id\" href=\"#PORT_IRQ_PHYRDY_CHG\">PORT_IRQ_PHYRDY_CHG</a> ?", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  \"PHY RDY changed\" : \"device exchanged\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#freeze\">freeze</a> = 1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irq_stat\">irq_stat</a> &amp; <a class=\"id\" href=\"#PORT_IRQ_UNK_FIS\">PORT_IRQ_UNK_FIS</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehi\">ehi</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_HSM\">AC_ERR_HSM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehi\">ehi</a>-><a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_ehi_push_desc\">ata_ehi_push_desc</a>(<a class=\"id\" href=\"#ehi\">ehi</a>, \"unknown FIS\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#freeze\">freeze</a> = 1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* deal with command error */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irq_stat\">irq_stat</a> &amp; <a class=\"id\" href=\"#PORT_IRQ_ERROR\">PORT_IRQ_ERROR</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#sil24_cerr_info\">sil24_cerr_info</a> *<a class=\"id\" href=\"#ci\">ci</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#err_mask\">err_mask</a> = 0, <a class=\"id\" href=\"#action\">action</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#context\">context</a>, <a class=\"id\" href=\"#cerr\">cerr</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#pmp\">pmp</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#abort\">abort</a> = 1;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* DMA Context Switch Failure in Port Multiplier Mode</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * errata.  If we have active commands to 3 or more</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * devices, any error condition on active devices can</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * corrupt DMA context switching.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#nr_active_links\">nr_active_links</a> >= 3) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehi\">ehi</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_OTHER\">AC_ERR_OTHER</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehi\">ehi</a>-><a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_ehi_push_desc\">ata_ehi_push_desc</a>(<a class=\"id\" href=\"#ehi\">ehi</a>, \"PMP DMA CS errata\");", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#do_port_rst\">do_port_rst</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#freeze\">freeze</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* find out the offending link and qc */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#sata_pmp_attached\">sata_pmp_attached</a>(<a class=\"id\" href=\"#ap\">ap</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#context\">context</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CONTEXT\">PORT_CONTEXT</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pmp\">pmp</a> = (<a class=\"id\" href=\"#context\">context</a> >> 5) &amp; 0xf;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#pmp\">pmp</a> &lt; <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#nr_pmp_links\">nr_pmp_links</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#link\">link</a> = &amp;<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#pmp_link\">pmp_link</a>[<a class=\"id\" href=\"#pmp\">pmp</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehi\">ehi</a> = &amp;<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#eh_info\">eh_info</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a> = <a class=\"id\" href=\"#ata_qc_from_tag\">ata_qc_from_tag</a>(<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#active_tag\">active_tag</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_ehi_clear_desc\">ata_ehi_clear_desc</a>(<a class=\"id\" href=\"#ehi\">ehi</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_ehi_push_desc\">ata_ehi_push_desc</a>(<a class=\"id\" href=\"#ehi\">ehi</a>, \"irq_stat 0x%08x\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#irq_stat\">irq_stat</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_HSM\">AC_ERR_HSM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#freeze\">freeze</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a> = <a class=\"id\" href=\"#ata_qc_from_tag\">ata_qc_from_tag</a>(<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#active_tag\">active_tag</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* analyze CMD_ERR */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cerr\">cerr</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CMD_ERR\">PORT_CMD_ERR</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#cerr\">cerr</a> &lt; <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#sil24_cerr_db\">sil24_cerr_db</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ci\">ci</a> = &amp;<a class=\"id\" href=\"#sil24_cerr_db\">sil24_cerr_db</a>[<a class=\"id\" href=\"#cerr\">cerr</a>];", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ci\">ci</a> && <a class=\"id\" href=\"#ci\">ci</a>-><a class=\"id\" href=\"#desc\">desc</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#ci\">ci</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ci\">ci</a>-><a class=\"id\" href=\"#action\">action</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#action\">action</a> &amp; <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#freeze\">freeze</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_ehi_push_desc\">ata_ehi_push_desc</a>(<a class=\"id\" href=\"#ehi\">ehi</a>, \"%s\", <a class=\"id\" href=\"#ci\">ci</a>-><a class=\"id\" href=\"#desc\">desc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_OTHER\">AC_ERR_OTHER</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#freeze\">freeze</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_ehi_push_desc\">ata_ehi_push_desc</a>(<a class=\"id\" href=\"#ehi\">ehi</a>, \"unknown command error %d\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#cerr\">cerr</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* record error info */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#qc\">qc</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#err_mask\">err_mask</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehi\">ehi</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#err_mask\">err_mask</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehi\">ehi</a>-><a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#action\">action</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* if PMP, resume */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#sata_pmp_attached\">sata_pmp_attached</a>(<a class=\"id\" href=\"#ap\">ap</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#PORT_CS_PMP_RESUME\">PORT_CS_PMP_RESUME</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CTRL_STAT\">PORT_CTRL_STAT</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* freeze or abort */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#freeze\">freeze</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_port_freeze\">ata_port_freeze</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>else if (<a class=\"id\" href=\"#abort\">abort</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#qc\">qc</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_link_abort\">ata_link_abort</a>(<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#link\">link</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_port_abort\">ata_port_abort</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> void <a class=\"id\" href=\"#sil24_host_intr\">sil24_host_intr</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port\">port</a> = <a class=\"id\" href=\"#sil24_port_base\">sil24_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#slot_stat\">slot_stat</a>, <a class=\"id\" href=\"#qc_active\">qc_active</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rc\">rc</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* If PCIX_IRQ_WOC, there's an inherent race window between</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * clearing IRQ pending status and reading PORT_SLOT_STAT</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * which may cause spurious interrupts afterwards.  This is</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * unavoidable and much better than losing interrupts which</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * happens if IRQ pending is cleared after reading</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * PORT_SLOT_STAT.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#SIL24_FLAG_PCIX_IRQ_WOC\">SIL24_FLAG_PCIX_IRQ_WOC</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#PORT_IRQ_COMPLETE\">PORT_IRQ_COMPLETE</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_IRQ_STAT\">PORT_IRQ_STAT</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#slot_stat\">slot_stat</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_SLOT_STAT\">PORT_SLOT_STAT</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(<a class=\"id\" href=\"#slot_stat\">slot_stat</a> &amp; <a class=\"id\" href=\"#HOST_SSTAT_ATTN\">HOST_SSTAT_ATTN</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sil24_error_intr\">sil24_error_intr</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#qc_active\">qc_active</a> = <a class=\"id\" href=\"#slot_stat\">slot_stat</a> &amp; ~<a class=\"id\" href=\"#HOST_SSTAT_ATTN\">HOST_SSTAT_ATTN</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#ata_qc_complete_multiple\">ata_qc_complete_multiple</a>(<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#qc_active\">qc_active</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a> &gt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a> &lt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_eh_info\">ata_eh_info</a> *<a class=\"id\" href=\"#ehi\">ehi</a> = &amp;<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#link\">link</a>.<a class=\"id\" href=\"#eh_info\">eh_info</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehi\">ehi</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_HSM\">AC_ERR_HSM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehi\">ehi</a>-><a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_port_freeze\">ata_port_freeze</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* spurious interrupts are expected if PCIX_IRQ_WOC */</span>", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#SIL24_FLAG_PCIX_IRQ_WOC\">SIL24_FLAG_PCIX_IRQ_WOC</a>) && <a class=\"id\" href=\"#ata_ratelimit\">ata_ratelimit</a>())", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_port_printk\">ata_port_printk</a>(<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a>, \"spurious interrupt \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"(slot_stat 0x%x active_tag %d sactive 0x%x)\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#slot_stat\">slot_stat</a>, <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#link\">link</a>.<a class=\"id\" href=\"#active_tag\">active_tag</a>, <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#link\">link</a>.<a class=\"id\" href=\"#sactive\">sactive</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#irqreturn_t\">irqreturn_t</a> <a class=\"id\" href=\"#sil24_interrupt\">sil24_interrupt</a>(int <a class=\"id\" href=\"#irq\">irq</a>, void *<a class=\"id\" href=\"#dev_instance\">dev_instance</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_host\">ata_host</a> *<a class=\"id\" href=\"#host\">host</a> = <a class=\"id\" href=\"#dev_instance\">dev_instance</a>;", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#host_base\">host_base</a> = <a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#iomap\">iomap</a>[<a class=\"id\" href=\"#SIL24_HOST_BAR\">SIL24_HOST_BAR</a>];", 
"<span class=\"ts\"/>unsigned <a class=\"id\" href=\"#handled\">handled</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#status\">status</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#host_base\">host_base</a> + <a class=\"id\" href=\"#HOST_IRQ_STAT\">HOST_IRQ_STAT</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a> == 0xffffffff) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> <a class=\"id\" href=\"#DRV_NAME\">DRV_NAME</a> \": IRQ status == 0xffffffff, \"", 
"<span class=\"ts\"/><span class=\"ts\"/>       \"PCI fault or device removal?\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#status\">status</a> &amp; <a class=\"id\" href=\"#IRQ_STAT_4PORTS\">IRQ_STAT_4PORTS</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock\">spin_lock</a>(&amp;<a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#lock\">lock</a>);", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#n_ports\">n_ports</a>; <a class=\"id\" href=\"#i\">i</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a> &amp; (1 << <a class=\"id\" href=\"#i\">i</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sil24_host_intr\">sil24_host_intr</a>(<a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#ports\">ports</a>[<a class=\"id\" href=\"#i\">i</a>]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#handled\">handled</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock\">spin_unlock</a>(&amp;<a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#lock\">lock</a>);", 
" <a class=\"id\" href=\"#out\">out</a>:", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#IRQ_RETVAL\">IRQ_RETVAL</a>(<a class=\"id\" href=\"#handled\">handled</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#sil24_error_handler\">sil24_error_handler</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sil24_port_priv\">sil24_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sil24_init_port\">sil24_init_port</a>(<a class=\"id\" href=\"#ap\">ap</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_eh_freeze_port\">ata_eh_freeze_port</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sata_pmp_error_handler\">sata_pmp_error_handler</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#do_port_rst\">do_port_rst</a> = 0;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#sil24_post_internal_cmd\">sil24_post_internal_cmd</a>(struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#ap\">ap</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* make DMA engine forget about the failed command */</span>", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#ATA_QCFLAG_FAILED\">ATA_QCFLAG_FAILED</a>) && <a class=\"id\" href=\"#sil24_init_port\">sil24_init_port</a>(<a class=\"id\" href=\"#ap\">ap</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_eh_freeze_port\">ata_eh_freeze_port</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#sil24_port_start\">sil24_port_start</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sil24_port_priv\">sil24_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a>;", 
"<span class=\"ts\"/>union <a class=\"id\" href=\"#sil24_cmd_block\">sil24_cmd_block</a> *<a class=\"id\" href=\"#cb\">cb</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#cb_size\">cb_size</a> = sizeof(*<a class=\"id\" href=\"#cb\">cb</a>) * <a class=\"id\" href=\"#SIL24_MAX_CMDS\">SIL24_MAX_CMDS</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dma_addr_t\">dma_addr_t</a> <a class=\"id\" href=\"#cb_dma\">cb_dma</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a> = <a class=\"id\" href=\"#devm_kzalloc\">devm_kzalloc</a>(<a class=\"id\" href=\"#dev\">dev</a>, sizeof(*<a class=\"id\" href=\"#pp\">pp</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#pp\">pp</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cb\">cb</a> = <a class=\"id\" href=\"#dmam_alloc_coherent\">dmam_alloc_coherent</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#cb_size\">cb_size</a>, &amp;<a class=\"id\" href=\"#cb_dma\">cb_dma</a>, <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#cb\">cb</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(<a class=\"id\" href=\"#cb\">cb</a>, 0, <a class=\"id\" href=\"#cb_size\">cb_size</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#cmd_block\">cmd_block</a> = <a class=\"id\" href=\"#cb\">cb</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pp\">pp</a>-><a class=\"id\" href=\"#cmd_block_dma\">cmd_block_dma</a> = <a class=\"id\" href=\"#cb_dma\">cb_dma</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#private_data\">private_data</a> = <a class=\"id\" href=\"#pp\">pp</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_port_pbar_desc\">ata_port_pbar_desc</a>(<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#SIL24_HOST_BAR\">SIL24_HOST_BAR</a>, -1, \"host\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_port_pbar_desc\">ata_port_pbar_desc</a>(<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#SIL24_PORT_BAR\">SIL24_PORT_BAR</a>, <a class=\"id\" href=\"#sil24_port_offset\">sil24_port_offset</a>(<a class=\"id\" href=\"#ap\">ap</a>), \"port\");", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#sil24_init_controller\">sil24_init_controller</a>(struct <a class=\"id\" href=\"#ata_host\">ata_host</a> *<a class=\"id\" href=\"#host\">host</a>)", 
"{", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#host_base\">host_base</a> = <a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#iomap\">iomap</a>[<a class=\"id\" href=\"#SIL24_HOST_BAR\">SIL24_HOST_BAR</a>];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#tmp\">tmp</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* GPIO off */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(0, <a class=\"id\" href=\"#host_base\">host_base</a> + <a class=\"id\" href=\"#HOST_FLASH_CMD\">HOST_FLASH_CMD</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* clear global reset &amp; mask interrupts during initialization */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(0, <a class=\"id\" href=\"#host_base\">host_base</a> + <a class=\"id\" href=\"#HOST_CTRL\">HOST_CTRL</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* init ports */</span>", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#n_ports\">n_ports</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#ports\">ports</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port\">port</a> = <a class=\"id\" href=\"#sil24_port_base\">sil24_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Initial PHY setting */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(0x20c, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_PHY_CFG\">PORT_PHY_CFG</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Clear port RST */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CTRL_STAT\">PORT_CTRL_STAT</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#tmp\">tmp</a> &amp; <a class=\"id\" href=\"#PORT_CS_PORT_RST\">PORT_CS_PORT_RST</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#PORT_CS_PORT_RST\">PORT_CS_PORT_RST</a>, <a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CTRL_CLR\">PORT_CTRL_CLR</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> = <a class=\"id\" href=\"#ata_wait_register\">ata_wait_register</a>(<a class=\"id\" href=\"#port\">port</a> + <a class=\"id\" href=\"#PORT_CTRL_STAT\">PORT_CTRL_STAT</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#PORT_CS_PORT_RST\">PORT_CS_PORT_RST</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#PORT_CS_PORT_RST\">PORT_CS_PORT_RST</a>, 10, 100);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#tmp\">tmp</a> &amp; <a class=\"id\" href=\"#PORT_CS_PORT_RST\">PORT_CS_PORT_RST</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a>, <a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   \"failed to clear port RST\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* configure port */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sil24_config_port\">sil24_config_port</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Turn on interrupts */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#IRQ_STAT_4PORTS\">IRQ_STAT_4PORTS</a>, <a class=\"id\" href=\"#host_base\">host_base</a> + <a class=\"id\" href=\"#HOST_CTRL\">HOST_CTRL</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#sil24_init_one\">sil24_init_one</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#pdev\">pdev</a>, const struct <a class=\"id\" href=\"#pci_device_id\">pci_device_id</a> *<a class=\"id\" href=\"#ent\">ent</a>)", 
"{", 
"<span class=\"ts\"/>extern int <a class=\"id\" href=\"#__MARKER__sil24_cmd_block_is_sized_wrongly\">__MARKER__sil24_cmd_block_is_sized_wrongly</a>;", 
"<span class=\"ts\"/>static int <a class=\"id\" href=\"#printed_version\">printed_version</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port_info\">ata_port_info</a> <a class=\"id\" href=\"#pi\">pi</a> = <a class=\"id\" href=\"#sil24_port_info\">sil24_port_info</a>[<a class=\"id\" href=\"#ent\">ent</a>-><a class=\"id\" href=\"#driver_data\">driver_data</a>];", 
"<span class=\"ts\"/>const struct <a class=\"id\" href=\"#ata_port_info\">ata_port_info</a> *<a class=\"id\" href=\"#ppi\">ppi</a>[] = { &amp;<a class=\"id\" href=\"#pi\">pi</a>, <a class=\"id\" href=\"#NULL\">NULL</a> };", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> * const *<a class=\"id\" href=\"#iomap\">iomap</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_host\">ata_host</a> *<a class=\"id\" href=\"#host\">host</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rc\">rc</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#tmp\">tmp</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* cause link error if sil24_cmd_block is sized wrongly */</span>", 
"<span class=\"ts\"/>if (sizeof(union <a class=\"id\" href=\"#sil24_cmd_block\">sil24_cmd_block</a>) != <a class=\"id\" href=\"#PAGE_SIZE\">PAGE_SIZE</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__MARKER__sil24_cmd_block_is_sized_wrongly\">__MARKER__sil24_cmd_block_is_sized_wrongly</a> = 1;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#printed_version\">printed_version</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a>, &amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"version \" <a class=\"id\" href=\"#DRV_VERSION\">DRV_VERSION</a> \"\\n\");", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* acquire resources */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#pcim_enable_device\">pcim_enable_device</a>(<a class=\"id\" href=\"#pdev\">pdev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#rc\">rc</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#pcim_iomap_regions\">pcim_iomap_regions</a>(<a class=\"id\" href=\"#pdev\">pdev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(1 << <a class=\"id\" href=\"#SIL24_HOST_BAR\">SIL24_HOST_BAR</a>) | (1 << <a class=\"id\" href=\"#SIL24_PORT_BAR\">SIL24_PORT_BAR</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#DRV_NAME\">DRV_NAME</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#rc\">rc</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#iomap\">iomap</a> = <a class=\"id\" href=\"#pcim_iomap_table\">pcim_iomap_table</a>(<a class=\"id\" href=\"#pdev\">pdev</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* apply workaround for completion IRQ loss on PCI-X errata */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pi\">pi</a>.<a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#SIL24_FLAG_PCIX_IRQ_WOC\">SIL24_FLAG_PCIX_IRQ_WOC</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#iomap\">iomap</a>[<a class=\"id\" href=\"#SIL24_HOST_BAR\">SIL24_HOST_BAR</a>] + <a class=\"id\" href=\"#HOST_CTRL\">HOST_CTRL</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#tmp\">tmp</a> &amp; (<a class=\"id\" href=\"#HOST_CTRL_TRDY\">HOST_CTRL_TRDY</a> | <a class=\"id\" href=\"#HOST_CTRL_STOP\">HOST_CTRL_STOP</a> | <a class=\"id\" href=\"#HOST_CTRL_DEVSEL\">HOST_CTRL_DEVSEL</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a>, &amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   \"Applying completion IRQ loss on PCI-X \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   \"errata fix\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pi\">pi</a>.<a class=\"id\" href=\"#flags\">flags</a> &= ~<a class=\"id\" href=\"#SIL24_FLAG_PCIX_IRQ_WOC\">SIL24_FLAG_PCIX_IRQ_WOC</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* allocate and fill host */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#host\">host</a> = <a class=\"id\" href=\"#ata_host_alloc_pinfo\">ata_host_alloc_pinfo</a>(&amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#ppi\">ppi</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#SIL24_FLAG2NPORTS\">SIL24_FLAG2NPORTS</a>(<a class=\"id\" href=\"#ppi\">ppi</a>[0]-><a class=\"id\" href=\"#flags\">flags</a>));", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#host\">host</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#iomap\">iomap</a> = <a class=\"id\" href=\"#iomap\">iomap</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* configure and activate the device */</span>", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#pci_set_dma_mask\">pci_set_dma_mask</a>(<a class=\"id\" href=\"#pdev\">pdev</a>, <a class=\"id\" href=\"#DMA_BIT_MASK\">DMA_BIT_MASK</a>(64))) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#pci_set_consistent_dma_mask\">pci_set_consistent_dma_mask</a>(<a class=\"id\" href=\"#pdev\">pdev</a>, <a class=\"id\" href=\"#DMA_BIT_MASK\">DMA_BIT_MASK</a>(64));", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#pci_set_consistent_dma_mask\">pci_set_consistent_dma_mask</a>(<a class=\"id\" href=\"#pdev\">pdev</a>, <a class=\"id\" href=\"#DMA_BIT_MASK\">DMA_BIT_MASK</a>(32));", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a>, &amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   \"64-bit DMA enable failed\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#rc\">rc</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#pci_set_dma_mask\">pci_set_dma_mask</a>(<a class=\"id\" href=\"#pdev\">pdev</a>, <a class=\"id\" href=\"#DMA_BIT_MASK\">DMA_BIT_MASK</a>(32));", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a>, &amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   \"32-bit DMA enable failed\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#rc\">rc</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#pci_set_consistent_dma_mask\">pci_set_consistent_dma_mask</a>(<a class=\"id\" href=\"#pdev\">pdev</a>, <a class=\"id\" href=\"#DMA_BIT_MASK\">DMA_BIT_MASK</a>(32));", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a>, &amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   \"32-bit consistent DMA enable failed\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#rc\">rc</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Set max read request size to 4096.  This slightly increases</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * write throughput for pci-e variants.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pcie_set_readrq\">pcie_set_readrq</a>(<a class=\"id\" href=\"#pdev\">pdev</a>, 4096);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sil24_init_controller\">sil24_init_controller</a>(<a class=\"id\" href=\"#host\">host</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sata_sil24_msi\">sata_sil24_msi</a> && !<a class=\"id\" href=\"#pci_enable_msi\">pci_enable_msi</a>(<a class=\"id\" href=\"#pdev\">pdev</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a>, &amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"Using MSI\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pci_intx\">pci_intx</a>(<a class=\"id\" href=\"#pdev\">pdev</a>, 0);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_set_master\">pci_set_master</a>(<a class=\"id\" href=\"#pdev\">pdev</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ata_host_activate\">ata_host_activate</a>(<a class=\"id\" href=\"#host\">host</a>, <a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#irq\">irq</a>, <a class=\"id\" href=\"#sil24_interrupt\">sil24_interrupt</a>, <a class=\"id\" href=\"#IRQF_SHARED\">IRQF_SHARED</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> &amp;<a class=\"id\" href=\"#sil24_sht\">sil24_sht</a>);", 
"}", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_PM\">CONFIG_PM</a>", 
"static int <a class=\"id\" href=\"#sil24_pci_device_resume\">sil24_pci_device_resume</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#pdev\">pdev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_host\">ata_host</a> *<a class=\"id\" href=\"#host\">host</a> = <a class=\"id\" href=\"#dev_get_drvdata\">dev_get_drvdata</a>(&amp;<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#host_base\">host_base</a> = <a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#iomap\">iomap</a>[<a class=\"id\" href=\"#SIL24_HOST_BAR\">SIL24_HOST_BAR</a>];", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rc\">rc</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#ata_pci_device_do_resume\">ata_pci_device_do_resume</a>(<a class=\"id\" href=\"#pdev\">pdev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#rc\">rc</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pdev\">pdev</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#power\">power</a>.<a class=\"id\" href=\"#power_state\">power_state</a>.<a class=\"id\" href=\"#event\">event</a> == <a class=\"id\" href=\"#PM_EVENT_SUSPEND\">PM_EVENT_SUSPEND</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#HOST_CTRL_GLOBAL_RST\">HOST_CTRL_GLOBAL_RST</a>, <a class=\"id\" href=\"#host_base\">host_base</a> + <a class=\"id\" href=\"#HOST_CTRL\">HOST_CTRL</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sil24_init_controller\">sil24_init_controller</a>(<a class=\"id\" href=\"#host\">host</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_host_resume\">ata_host_resume</a>(<a class=\"id\" href=\"#host\">host</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#sil24_port_resume\">sil24_port_resume</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sil24_config_pmp\">sil24_config_pmp</a>(<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#nr_pmp_links\">nr_pmp_links</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#sil24_init\">sil24_init</a>(void)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#pci_register_driver\">pci_register_driver</a>(&amp;<a class=\"id\" href=\"#sil24_pci_driver\">sil24_pci_driver</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#__exit\">__exit</a> <a class=\"id\" href=\"#sil24_exit\">sil24_exit</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_unregister_driver\">pci_unregister_driver</a>(&amp;<a class=\"id\" href=\"#sil24_pci_driver\">sil24_pci_driver</a>);", 
"}", 
"", 
"<a class=\"id\" href=\"#MODULE_AUTHOR\">MODULE_AUTHOR</a>(\"Tejun Heo\");", 
"<a class=\"id\" href=\"#MODULE_DESCRIPTION\">MODULE_DESCRIPTION</a>(\"Silicon Image 3124/3132 SATA low-level driver\");", 
"<a class=\"id\" href=\"#MODULE_LICENSE\">MODULE_LICENSE</a>(\"GPL\");", 
"<a class=\"id\" href=\"#MODULE_DEVICE_TABLE\">MODULE_DEVICE_TABLE</a>(<a class=\"id\" href=\"#pci\">pci</a>, <a class=\"id\" href=\"#sil24_pci_tbl\">sil24_pci_tbl</a>);", 
"", 
"<a class=\"id\" href=\"#module_init\">module_init</a>(<a class=\"id\" href=\"#sil24_init\">sil24_init</a>);", 
"<a class=\"id\" href=\"#module_exit\">module_exit</a>(<a class=\"id\" href=\"#sil24_exit\">sil24_exit</a>);", 
];
xr_frag_insert('l/ca/2c72c818856197db9e96a0c804baa49673efac.xr', __xr_tmp);
