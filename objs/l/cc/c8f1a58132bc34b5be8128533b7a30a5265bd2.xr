var __xr_tmp = [
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out1\">out1</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#security_sb_pivotroot\">security_sb_pivotroot</a>(&amp;<a class=\"id\" href=\"#old\">old</a>, &amp;<a class=\"id\" href=\"#new\">new</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#path_put\">path_put</a>(&amp;<a class=\"id\" href=\"#old\">old</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out1\">out1</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#get_fs_root\">get_fs_root</a>(<a class=\"id\" href=\"#current\">current</a>-><a class=\"id\" href=\"#fs\">fs</a>, &amp;<a class=\"id\" href=\"#root\">root</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#down_write\">down_write</a>(&amp;<a class=\"id\" href=\"#namespace_sem\">namespace_sem</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#old\">old</a>.<a class=\"id\" href=\"#dentry\">dentry</a>-><a class=\"id\" href=\"#d_inode\">d_inode</a>-><a class=\"id\" href=\"#i_mutex\">i_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#IS_MNT_SHARED\">IS_MNT_SHARED</a>(<a class=\"id\" href=\"#old\">old</a>.<a class=\"id\" href=\"#mnt\">mnt</a>) ||", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#IS_MNT_SHARED\">IS_MNT_SHARED</a>(<a class=\"id\" href=\"#new\">new</a>.<a class=\"id\" href=\"#mnt\">mnt</a>-><a class=\"id\" href=\"#mnt_parent\">mnt_parent</a>) ||", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#IS_MNT_SHARED\">IS_MNT_SHARED</a>(<a class=\"id\" href=\"#root\">root</a>.<a class=\"id\" href=\"#mnt\">mnt</a>-><a class=\"id\" href=\"#mnt_parent\">mnt_parent</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out2\">out2</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#check_mnt\">check_mnt</a>(<a class=\"id\" href=\"#root\">root</a>.<a class=\"id\" href=\"#mnt\">mnt</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out2\">out2</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = -<a class=\"id\" href=\"#ENOENT\">ENOENT</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cant_mount\">cant_mount</a>(<a class=\"id\" href=\"#old\">old</a>.<a class=\"id\" href=\"#dentry\">dentry</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out2\">out2</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#d_unlinked\">d_unlinked</a>(<a class=\"id\" href=\"#new\">new</a>.<a class=\"id\" href=\"#dentry\">dentry</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out2\">out2</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#d_unlinked\">d_unlinked</a>(<a class=\"id\" href=\"#old\">old</a>.<a class=\"id\" href=\"#dentry\">dentry</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out2\">out2</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = -<a class=\"id\" href=\"#EBUSY\">EBUSY</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#new\">new</a>.<a class=\"id\" href=\"#mnt\">mnt</a> == <a class=\"id\" href=\"#root\">root</a>.<a class=\"id\" href=\"#mnt\">mnt</a> ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#old\">old</a>.<a class=\"id\" href=\"#mnt\">mnt</a> == <a class=\"id\" href=\"#root\">root</a>.<a class=\"id\" href=\"#mnt\">mnt</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out2\">out2</a>; <span class=\"comment\">/* loop, on the same file system  */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#root\">root</a>.<a class=\"id\" href=\"#mnt\">mnt</a>-><a class=\"id\" href=\"#mnt_root\">mnt_root</a> != <a class=\"id\" href=\"#root\">root</a>.<a class=\"id\" href=\"#dentry\">dentry</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out2\">out2</a>; <span class=\"comment\">/* not a mountpoint */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#root\">root</a>.<a class=\"id\" href=\"#mnt\">mnt</a>-><a class=\"id\" href=\"#mnt_parent\">mnt_parent</a> == <a class=\"id\" href=\"#root\">root</a>.<a class=\"id\" href=\"#mnt\">mnt</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out2\">out2</a>; <span class=\"comment\">/* not attached */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#new\">new</a>.<a class=\"id\" href=\"#mnt\">mnt</a>-><a class=\"id\" href=\"#mnt_root\">mnt_root</a> != <a class=\"id\" href=\"#new\">new</a>.<a class=\"id\" href=\"#dentry\">dentry</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out2\">out2</a>; <span class=\"comment\">/* not a mountpoint */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#new\">new</a>.<a class=\"id\" href=\"#mnt\">mnt</a>-><a class=\"id\" href=\"#mnt_parent\">mnt_parent</a> == <a class=\"id\" href=\"#new\">new</a>.<a class=\"id\" href=\"#mnt\">mnt</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out2\">out2</a>; <span class=\"comment\">/* not attached */</span>", 
"<span class=\"ts\"/><span class=\"comment\">/* make sure we can reach put_old from new_root */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> = <a class=\"id\" href=\"#old\">old</a>.<a class=\"id\" href=\"#mnt\">mnt</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#br_write_lock\">br_write_lock</a>(<a class=\"id\" href=\"#vfsmount_lock\">vfsmount_lock</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tmp\">tmp</a> != <a class=\"id\" href=\"#new\">new</a>.<a class=\"id\" href=\"#mnt\">mnt</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>for (;;) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#tmp\">tmp</a>-><a class=\"id\" href=\"#mnt_parent\">mnt_parent</a> == <a class=\"id\" href=\"#tmp\">tmp</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out3\">out3</a>; <span class=\"comment\">/* already mounted on put_old */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#tmp\">tmp</a>-><a class=\"id\" href=\"#mnt_parent\">mnt_parent</a> == <a class=\"id\" href=\"#new\">new</a>.<a class=\"id\" href=\"#mnt\">mnt</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> = <a class=\"id\" href=\"#tmp\">tmp</a>-><a class=\"id\" href=\"#mnt_parent\">mnt_parent</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#is_subdir\">is_subdir</a>(<a class=\"id\" href=\"#tmp\">tmp</a>-><a class=\"id\" href=\"#mnt_mountpoint\">mnt_mountpoint</a>, <a class=\"id\" href=\"#new\">new</a>.<a class=\"id\" href=\"#dentry\">dentry</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out3\">out3</a>;", 
"<span class=\"ts\"/>} else if (!<a class=\"id\" href=\"#is_subdir\">is_subdir</a>(<a class=\"id\" href=\"#old\">old</a>.<a class=\"id\" href=\"#dentry\">dentry</a>, <a class=\"id\" href=\"#new\">new</a>.<a class=\"id\" href=\"#dentry\">dentry</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out3\">out3</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#detach_mnt\">detach_mnt</a>(<a class=\"id\" href=\"#new\">new</a>.<a class=\"id\" href=\"#mnt\">mnt</a>, &amp;<a class=\"id\" href=\"#parent_path\">parent_path</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#detach_mnt\">detach_mnt</a>(<a class=\"id\" href=\"#root\">root</a>.<a class=\"id\" href=\"#mnt\">mnt</a>, &amp;<a class=\"id\" href=\"#root_parent\">root_parent</a>);", 
"<span class=\"ts\"/><span class=\"comment\">/* mount old root on put_old */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#attach_mnt\">attach_mnt</a>(<a class=\"id\" href=\"#root\">root</a>.<a class=\"id\" href=\"#mnt\">mnt</a>, &amp;<a class=\"id\" href=\"#old\">old</a>);", 
"<span class=\"ts\"/><span class=\"comment\">/* mount new_root on / */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#attach_mnt\">attach_mnt</a>(<a class=\"id\" href=\"#new\">new</a>.<a class=\"id\" href=\"#mnt\">mnt</a>, &amp;<a class=\"id\" href=\"#root_parent\">root_parent</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#touch_mnt_namespace\">touch_mnt_namespace</a>(<a class=\"id\" href=\"#current\">current</a>-><a class=\"id\" href=\"#nsproxy\">nsproxy</a>-><a class=\"id\" href=\"#mnt_ns\">mnt_ns</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#br_write_unlock\">br_write_unlock</a>(<a class=\"id\" href=\"#vfsmount_lock\">vfsmount_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#chroot_fs_refs\">chroot_fs_refs</a>(&amp;<a class=\"id\" href=\"#root\">root</a>, &amp;<a class=\"id\" href=\"#new\">new</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#path_put\">path_put</a>(&amp;<a class=\"id\" href=\"#root_parent\">root_parent</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#path_put\">path_put</a>(&amp;<a class=\"id\" href=\"#parent_path\">parent_path</a>);", 
"<a class=\"id\" href=\"#out2\">out2</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#old\">old</a>.<a class=\"id\" href=\"#dentry\">dentry</a>-><a class=\"id\" href=\"#d_inode\">d_inode</a>-><a class=\"id\" href=\"#i_mutex\">i_mutex</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#up_write\">up_write</a>(&amp;<a class=\"id\" href=\"#namespace_sem\">namespace_sem</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#path_put\">path_put</a>(&amp;<a class=\"id\" href=\"#root\">root</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#path_put\">path_put</a>(&amp;<a class=\"id\" href=\"#old\">old</a>);", 
"<a class=\"id\" href=\"#out1\">out1</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#path_put\">path_put</a>(&amp;<a class=\"id\" href=\"#new\">new</a>);", 
"<a class=\"id\" href=\"#out0\">out0</a>:", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"<a class=\"id\" href=\"#out3\">out3</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#br_write_unlock\">br_write_unlock</a>(<a class=\"id\" href=\"#vfsmount_lock\">vfsmount_lock</a>);", 
"<span class=\"ts\"/>goto <a class=\"id\" href=\"#out2\">out2</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#init_mount_tree\">init_mount_tree</a>(void)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#vfsmount\">vfsmount</a> *<a class=\"id\" href=\"#mnt\">mnt</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mnt_namespace\">mnt_namespace</a> *<a class=\"id\" href=\"#ns\">ns</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#path\">path</a> <a class=\"id\" href=\"#root\">root</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mnt\">mnt</a> = <a class=\"id\" href=\"#do_kern_mount\">do_kern_mount</a>(\"rootfs\", 0, \"rootfs\", <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#IS_ERR\">IS_ERR</a>(<a class=\"id\" href=\"#mnt\">mnt</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#panic\">panic</a>(\"Can't create rootfs\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ns\">ns</a> = <a class=\"id\" href=\"#create_mnt_ns\">create_mnt_ns</a>(<a class=\"id\" href=\"#mnt\">mnt</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#IS_ERR\">IS_ERR</a>(<a class=\"id\" href=\"#ns\">ns</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#panic\">panic</a>(\"Can't allocate initial namespace\");", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#init_task\">init_task</a>.<a class=\"id\" href=\"#nsproxy\">nsproxy</a>-><a class=\"id\" href=\"#mnt_ns\">mnt_ns</a> = <a class=\"id\" href=\"#ns\">ns</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#get_mnt_ns\">get_mnt_ns</a>(<a class=\"id\" href=\"#ns\">ns</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#root\">root</a>.<a class=\"id\" href=\"#mnt\">mnt</a> = <a class=\"id\" href=\"#ns\">ns</a>-><a class=\"id\" href=\"#root\">root</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#root\">root</a>.<a class=\"id\" href=\"#dentry\">dentry</a> = <a class=\"id\" href=\"#ns\">ns</a>-><a class=\"id\" href=\"#root\">root</a>-><a class=\"id\" href=\"#mnt_root\">mnt_root</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#set_fs_pwd\">set_fs_pwd</a>(<a class=\"id\" href=\"#current\">current</a>-><a class=\"id\" href=\"#fs\">fs</a>, &amp;<a class=\"id\" href=\"#root\">root</a>);", 
];
xr_frag_insert('l/cc/c8f1a58132bc34b5be8128533b7a30a5265bd2.xr', __xr_tmp);
