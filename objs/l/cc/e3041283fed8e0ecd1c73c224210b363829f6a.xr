var __xr_tmp = [
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_status_t\">efi_status_t</a> <a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#EFI_NOT_FOUND\">EFI_NOT_FOUND</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_guid_t\">efi_guid_t</a> <a class=\"id\" href=\"#vendor_guid\">vendor_guid</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_char16_t\">efi_char16_t</a> *<a class=\"id\" href=\"#variable_name\">variable_name</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#variable_name_size\">variable_name_size</a> = 1024;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a> = 0;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#efi_enabled\">efi_enabled</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#variable_name\">variable_name</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(<a class=\"id\" href=\"#variable_name_size\">variable_name_size</a>, <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#variable_name\">variable_name</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"efivars: Memory allocation failed.\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"EFI Variables Facility v%s %s\\n\", <a class=\"id\" href=\"#EFIVARS_VERSION\">EFIVARS_VERSION</a>,", 
"<span class=\"ts\"/>       <a class=\"id\" href=\"#EFIVARS_DATE\">EFIVARS_DATE</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* For now we'll register the efi directory at /sys/firmware/efi */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#efi_kobj\">efi_kobj</a> = <a class=\"id\" href=\"#kobject_create_and_add\">kobject_create_and_add</a>(\"efi\", <a class=\"id\" href=\"#firmware_kobj\">firmware_kobj</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#efi_kobj\">efi_kobj</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"efivars: Firmware registration failed.\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out_free\">out_free</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vars_kset\">vars_kset</a> = <a class=\"id\" href=\"#kset_create_and_add\">kset_create_and_add</a>(\"vars\", <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#efi_kobj\">efi_kobj</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#vars_kset\">vars_kset</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"efivars: Subsystem registration failed.\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out_firmware_unregister\">out_firmware_unregister</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Per EFI spec, the maximum storage allocated for both</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * the variable name and variable data is 1024 bytes.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"", 
"<span class=\"ts\"/>do {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#variable_name_size\">variable_name_size</a> = 1024;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#efi\">efi</a>.<a class=\"id\" href=\"#get_next_variable\">get_next_variable</a>(&amp;<a class=\"id\" href=\"#variable_name_size\">variable_name_size</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#variable_name\">variable_name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>&amp;<a class=\"id\" href=\"#vendor_guid\">vendor_guid</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>switch (<a class=\"id\" href=\"#status\">status</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#EFI_SUCCESS\">EFI_SUCCESS</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#efivar_create_sysfs_entry\">efivar_create_sysfs_entry</a>(<a class=\"id\" href=\"#variable_name_size\">variable_name_size</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#variable_name\">variable_name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>&amp;<a class=\"id\" href=\"#vendor_guid\">vendor_guid</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>case <a class=\"id\" href=\"#EFI_NOT_FOUND\">EFI_NOT_FOUND</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> \"efivars: get_next_variable: status=%lx\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#EFI_NOT_FOUND\">EFI_NOT_FOUND</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>} while (<a class=\"id\" href=\"#status\">status</a> != <a class=\"id\" href=\"#EFI_NOT_FOUND\">EFI_NOT_FOUND</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Now add attributes to allow creation of new vars</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * and deletion of existing ones...</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#sysfs_create_bin_file\">sysfs_create_bin_file</a>(&amp;<a class=\"id\" href=\"#vars_kset\">vars_kset</a>-><a class=\"id\" href=\"#kobj\">kobj</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      &amp;<a class=\"id\" href=\"#var_subsys_attr_new_var\">var_subsys_attr_new_var</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"efivars: unable to create new_var sysfs file\"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\" due to error %d\\n\", <a class=\"id\" href=\"#error\">error</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#sysfs_create_bin_file\">sysfs_create_bin_file</a>(&amp;<a class=\"id\" href=\"#vars_kset\">vars_kset</a>-><a class=\"id\" href=\"#kobj\">kobj</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      &amp;<a class=\"id\" href=\"#var_subsys_attr_del_var\">var_subsys_attr_del_var</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"efivars: unable to create del_var sysfs file\"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\" due to error %d\\n\", <a class=\"id\" href=\"#error\">error</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Don't forget the systab entry */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#sysfs_create_group\">sysfs_create_group</a>(<a class=\"id\" href=\"#efi_kobj\">efi_kobj</a>, &amp;<a class=\"id\" href=\"#efi_subsys_attr_group\">efi_subsys_attr_group</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"efivars: Sysfs attribute export failed with error %d.\\n\", <a class=\"id\" href=\"#error\">error</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out_free\">out_free</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kset_unregister\">kset_unregister</a>(<a class=\"id\" href=\"#vars_kset\">vars_kset</a>);", 
"", 
"<a class=\"id\" href=\"#out_firmware_unregister\">out_firmware_unregister</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kobject_put\">kobject_put</a>(<a class=\"id\" href=\"#efi_kobj\">efi_kobj</a>);", 
"", 
"<a class=\"id\" href=\"#out_free\">out_free</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#variable_name\">variable_name</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#__exit\">__exit</a>", 
"<a class=\"id\" href=\"#efivars_exit\">efivars_exit</a>(void)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#efivar_entry\">efivar_entry</a> *<a class=\"id\" href=\"#entry\">entry</a>, *<a class=\"id\" href=\"#n\">n</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry_safe\">list_for_each_entry_safe</a>(<a class=\"id\" href=\"#entry\">entry</a>, <a class=\"id\" href=\"#n\">n</a>, &amp;<a class=\"id\" href=\"#efivar_list\">efivar_list</a>, <a class=\"id\" href=\"#list\">list</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_lock\">spin_lock</a>(&amp;<a class=\"id\" href=\"#efivars_lock\">efivars_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_del\">list_del</a>(&amp;<a class=\"id\" href=\"#entry\">entry</a>-><a class=\"id\" href=\"#list\">list</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock\">spin_unlock</a>(&amp;<a class=\"id\" href=\"#efivars_lock\">efivars_lock</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#efivar_unregister\">efivar_unregister</a>(<a class=\"id\" href=\"#entry\">entry</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kset_unregister\">kset_unregister</a>(<a class=\"id\" href=\"#vars_kset\">vars_kset</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kobject_put\">kobject_put</a>(<a class=\"id\" href=\"#efi_kobj\">efi_kobj</a>);", 
"}", 
"", 
"<a class=\"id\" href=\"#module_init\">module_init</a>(<a class=\"id\" href=\"#efivars_init\">efivars_init</a>);", 
"<a class=\"id\" href=\"#module_exit\">module_exit</a>(<a class=\"id\" href=\"#efivars_exit\">efivars_exit</a>);", 
"", 
];
xr_frag_insert('l/cc/e3041283fed8e0ecd1c73c224210b363829f6a.xr', __xr_tmp);
