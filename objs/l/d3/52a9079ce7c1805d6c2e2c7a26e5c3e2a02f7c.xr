var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * RTC subsystem, proc interface</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Copyright (C) 2005-06 Tower Technologies</span>", 
"<span class=\"comment\"> * Author: Alessandro Zummo &lt;a.zummo@towertech.it&gt;</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * based on arch/arm/common/rtctime.c</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This program is free software; you can redistribute it and/or modify</span>", 
"<span class=\"comment\"> * it under the terms of the GNU General Public License version 2 as</span>", 
"<span class=\"comment\"> * published by the Free Software Foundation.</span>", 
"<span class=\"comment\">*/</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#rtc\">rtc</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#proc_fs\">proc_fs</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#seq_file\">seq_file</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> \"rtc-core.h\"", 
"", 
"", 
"static int <a class=\"id\" href=\"#rtc_proc_show\">rtc_proc_show</a>(struct <a class=\"id\" href=\"#seq_file\">seq_file</a> *<a class=\"id\" href=\"#seq\">seq</a>, void *<a class=\"id\" href=\"#offset\">offset</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc\">rtc</a> = <a class=\"id\" href=\"#seq\">seq</a>-><a class=\"id\" href=\"#private\">private</a>;", 
"<span class=\"ts\"/>const struct <a class=\"id\" href=\"#rtc_class_ops\">rtc_class_ops</a> *<a class=\"id\" href=\"#ops\">ops</a> = <a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#ops\">ops</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_wkalrm\">rtc_wkalrm</a> <a class=\"id\" href=\"#alrm\">alrm</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_time\">rtc_time</a> <a class=\"id\" href=\"#tm\">tm</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#rtc_read_time\">rtc_read_time</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, &amp;<a class=\"id\" href=\"#tm\">tm</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> == 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"rtc_time\\t: %02d:%02d:%02d\\n\"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"rtc_date\\t: %04d-%02d-%02d\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tm\">tm</a>.<a class=\"id\" href=\"#tm_hour\">tm_hour</a>, <a class=\"id\" href=\"#tm\">tm</a>.<a class=\"id\" href=\"#tm_min\">tm_min</a>, <a class=\"id\" href=\"#tm\">tm</a>.<a class=\"id\" href=\"#tm_sec\">tm_sec</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tm\">tm</a>.<a class=\"id\" href=\"#tm_year\">tm_year</a> + 1900, <a class=\"id\" href=\"#tm\">tm</a>.<a class=\"id\" href=\"#tm_mon\">tm_mon</a> + 1, <a class=\"id\" href=\"#tm\">tm</a>.<a class=\"id\" href=\"#tm_mday\">tm_mday</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#rtc_read_alarm\">rtc_read_alarm</a>(<a class=\"id\" href=\"#rtc\">rtc</a>, &amp;<a class=\"id\" href=\"#alrm\">alrm</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> == 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"alrm_time\\t: \");", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((unsigned int)<a class=\"id\" href=\"#alrm\">alrm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_hour\">tm_hour</a> <= 24)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"%02d:\", <a class=\"id\" href=\"#alrm\">alrm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_hour\">tm_hour</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"**:\");", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((unsigned int)<a class=\"id\" href=\"#alrm\">alrm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_min\">tm_min</a> <= 59)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"%02d:\", <a class=\"id\" href=\"#alrm\">alrm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_min\">tm_min</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"**:\");", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((unsigned int)<a class=\"id\" href=\"#alrm\">alrm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_sec\">tm_sec</a> <= 59)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"%02d\\n\", <a class=\"id\" href=\"#alrm\">alrm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_sec\">tm_sec</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"**\\n\");", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"alrm_date\\t: \");", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((unsigned int)<a class=\"id\" href=\"#alrm\">alrm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_year\">tm_year</a> <= 200)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"%04d-\", <a class=\"id\" href=\"#alrm\">alrm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_year\">tm_year</a> + 1900);", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"****-\");", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((unsigned int)<a class=\"id\" href=\"#alrm\">alrm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_mon\">tm_mon</a> <= 11)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"%02d-\", <a class=\"id\" href=\"#alrm\">alrm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_mon\">tm_mon</a> + 1);", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"**-\");", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#alrm\">alrm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_mday\">tm_mday</a> && (unsigned int)<a class=\"id\" href=\"#alrm\">alrm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_mday\">tm_mday</a> <= 31)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"%02d\\n\", <a class=\"id\" href=\"#alrm\">alrm</a>.<a class=\"id\" href=\"#time\">time</a>.<a class=\"id\" href=\"#tm_mday\">tm_mday</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"**\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"alarm_IRQ\\t: %s\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#alrm\">alrm</a>.<a class=\"id\" href=\"#enabled\">enabled</a> ? \"yes\" : \"no\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"alrm_pending\\t: %s\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#alrm\">alrm</a>.<a class=\"id\" href=\"#pending\">pending</a> ? \"yes\" : \"no\");", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#seq_printf\">seq_printf</a>(<a class=\"id\" href=\"#seq\">seq</a>, \"24hr\\t\\t: yes\\n\");", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#proc\">proc</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#proc\">proc</a>(<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#parent\">parent</a>, <a class=\"id\" href=\"#seq\">seq</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#rtc_proc_open\">rtc_proc_open</a>(struct <a class=\"id\" href=\"#inode\">inode</a> *<a class=\"id\" href=\"#inode\">inode</a>, struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc\">rtc</a> = <a class=\"id\" href=\"#PDE\">PDE</a>(<a class=\"id\" href=\"#inode\">inode</a>)-><a class=\"id\" href=\"#data\">data</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#try_module_get\">try_module_get</a>(<a class=\"id\" href=\"#THIS_MODULE\">THIS_MODULE</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#single_open\">single_open</a>(<a class=\"id\" href=\"#file\">file</a>, <a class=\"id\" href=\"#rtc_proc_show\">rtc_proc_show</a>, <a class=\"id\" href=\"#rtc\">rtc</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#rtc_proc_release\">rtc_proc_release</a>(struct <a class=\"id\" href=\"#inode\">inode</a> *<a class=\"id\" href=\"#inode\">inode</a>, struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#res\">res</a> = <a class=\"id\" href=\"#single_release\">single_release</a>(<a class=\"id\" href=\"#inode\">inode</a>, <a class=\"id\" href=\"#file\">file</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#module_put\">module_put</a>(<a class=\"id\" href=\"#THIS_MODULE\">THIS_MODULE</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#res\">res</a>;", 
"}", 
"", 
"static const struct <a class=\"id\" href=\"#file_operations\">file_operations</a> <a class=\"id\" href=\"#rtc_proc_fops\">rtc_proc_fops</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#open\">open</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#rtc_proc_open\">rtc_proc_open</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#read\">read</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#seq_read\">seq_read</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#llseek\">llseek</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#seq_lseek\">seq_lseek</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#release\">release</a><span class=\"ts\"/>= <a class=\"id\" href=\"#rtc_proc_release\">rtc_proc_release</a>,", 
"};", 
"", 
"void <a class=\"id\" href=\"#rtc_proc_add_device\">rtc_proc_add_device</a>(struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc\">rtc</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#id\">id</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#proc_create_data\">proc_create_data</a>(\"driver/rtc\", 0, <a class=\"id\" href=\"#NULL\">NULL</a>, &amp;<a class=\"id\" href=\"#rtc_proc_fops\">rtc_proc_fops</a>, <a class=\"id\" href=\"#rtc\">rtc</a>);", 
"}", 
"", 
"void <a class=\"id\" href=\"#rtc_proc_del_device\">rtc_proc_del_device</a>(struct <a class=\"id\" href=\"#rtc_device\">rtc_device</a> *<a class=\"id\" href=\"#rtc\">rtc</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rtc\">rtc</a>-><a class=\"id\" href=\"#id\">id</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#remove_proc_entry\">remove_proc_entry</a>(\"driver/rtc\", <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"}", 
];
xr_frag_insert('l/d3/52a9079ce7c1805d6c2e2c7a26e5c3e2a02f7c.xr', __xr_tmp);
