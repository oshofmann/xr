var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * CompactPCI Hot Plug Driver</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Copyright (C) 2002,2005 SOMA Networks, Inc.</span>", 
"<span class=\"comment\"> * Copyright (C) 2001 Greg Kroah-Hartman (greg@kroah.com)</span>", 
"<span class=\"comment\"> * Copyright (C) 2001 IBM Corp.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * All rights reserved.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This program is free software; you can redistribute it and/or modify</span>", 
"<span class=\"comment\"> * it under the terms of the GNU General Public License as published by</span>", 
"<span class=\"comment\"> * the Free Software Foundation; either version 2 of the License, or (at</span>", 
"<span class=\"comment\"> * your option) any later version.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This program is distributed in the hope that it will be useful, but</span>", 
"<span class=\"comment\"> * WITHOUT ANY WARRANTY; without even the implied warranty of</span>", 
"<span class=\"comment\"> * MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE, GOOD TITLE or</span>", 
"<span class=\"comment\"> * NON INFRINGEMENT.  See the GNU General Public License for more</span>", 
"<span class=\"comment\"> * details.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * You should have received a copy of the GNU General Public License</span>", 
"<span class=\"comment\"> * along with this program; if not, write to the Free Software</span>", 
"<span class=\"comment\"> * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Send feedback to &lt;scottm@somanetworks.com&gt;</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kernel\">kernel</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#slab\">slab</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#pci\">pci</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#pci_hotplug\">pci_hotplug</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#init\">init</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#interrupt\">interrupt</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#atomic\">atomic</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#delay\">delay</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kthread\">kthread</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> \"cpci_hotplug.h\"", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#DRIVER_AUTHOR\">DRIVER_AUTHOR</a><span class=\"ts\"/>\"Scott Murray <scottm@somanetworks.com>\"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#DRIVER_DESC\">DRIVER_DESC</a><span class=\"ts\"/>\"CompactPCI Hot Plug Core\"", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#MY_NAME\">MY_NAME</a><span class=\"ts\"/>\"cpci_hotplug\"", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#dbg\">dbg</a>(<a class=\"id\" href=\"#format\">format</a>, <a class=\"id\" href=\"#arg\">arg</a>...)<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/>do {<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#cpci_debug\">cpci_debug</a>)<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a> (<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a> \"%s: \" <a class=\"id\" href=\"#format\">format</a> \"\\n\",<span class=\"ts\"/>\\", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#MY_NAME\">MY_NAME</a> , ## <a class=\"id\" href=\"#arg\">arg</a>); <span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/>} while (0)", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#err\">err</a>(<a class=\"id\" href=\"#format\">format</a>, <a class=\"id\" href=\"#arg\">arg</a>...) <a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"%s: \" <a class=\"id\" href=\"#format\">format</a> \"\\n\", <a class=\"id\" href=\"#MY_NAME\">MY_NAME</a> , ## <a class=\"id\" href=\"#arg\">arg</a>)", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#info\">info</a>(<a class=\"id\" href=\"#format\">format</a>, <a class=\"id\" href=\"#arg\">arg</a>...) <a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"%s: \" <a class=\"id\" href=\"#format\">format</a> \"\\n\", <a class=\"id\" href=\"#MY_NAME\">MY_NAME</a> , ## <a class=\"id\" href=\"#arg\">arg</a>)", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#warn\">warn</a>(<a class=\"id\" href=\"#format\">format</a>, <a class=\"id\" href=\"#arg\">arg</a>...) <a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> \"%s: \" <a class=\"id\" href=\"#format\">format</a> \"\\n\", <a class=\"id\" href=\"#MY_NAME\">MY_NAME</a> , ## <a class=\"id\" href=\"#arg\">arg</a>)", 
"", 
"<span class=\"comment\">/* local variables */</span>", 
"static <a class=\"id\" href=\"#DECLARE_RWSEM\">DECLARE_RWSEM</a>(<a class=\"id\" href=\"#list_rwsem\">list_rwsem</a>);", 
"static <a class=\"id\" href=\"#LIST_HEAD\">LIST_HEAD</a>(<a class=\"id\" href=\"#slot_list\">slot_list</a>);", 
"static int <a class=\"id\" href=\"#slots\">slots</a>;", 
"static <a class=\"id\" href=\"#atomic_t\">atomic_t</a> <a class=\"id\" href=\"#extracting\">extracting</a>;", 
"int <a class=\"id\" href=\"#cpci_debug\">cpci_debug</a>;", 
"static struct <a class=\"id\" href=\"#cpci_hp_controller\">cpci_hp_controller</a> *<a class=\"id\" href=\"#controller\">controller</a>;", 
"static struct <a class=\"id\" href=\"#task_struct\">task_struct</a> *<a class=\"id\" href=\"#cpci_thread\">cpci_thread</a>;", 
"static int <a class=\"id\" href=\"#thread_finished\">thread_finished</a>;", 
"", 
"static int <a class=\"id\" href=\"#enable_slot\">enable_slot</a>(struct <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a> *<a class=\"id\" href=\"#slot\">slot</a>);", 
"static int <a class=\"id\" href=\"#disable_slot\">disable_slot</a>(struct <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a> *<a class=\"id\" href=\"#slot\">slot</a>);", 
"static int <a class=\"id\" href=\"#set_attention_status\">set_attention_status</a>(struct <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a> *<a class=\"id\" href=\"#slot\">slot</a>, <a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#value\">value</a>);", 
"static int <a class=\"id\" href=\"#get_power_status\">get_power_status</a>(struct <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a> *<a class=\"id\" href=\"#slot\">slot</a>, <a class=\"id\" href=\"#u8\">u8</a> * <a class=\"id\" href=\"#value\">value</a>);", 
"static int <a class=\"id\" href=\"#get_attention_status\">get_attention_status</a>(struct <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a> *<a class=\"id\" href=\"#slot\">slot</a>, <a class=\"id\" href=\"#u8\">u8</a> * <a class=\"id\" href=\"#value\">value</a>);", 
"static int <a class=\"id\" href=\"#get_adapter_status\">get_adapter_status</a>(struct <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a> *<a class=\"id\" href=\"#slot\">slot</a>, <a class=\"id\" href=\"#u8\">u8</a> * <a class=\"id\" href=\"#value\">value</a>);", 
"static int <a class=\"id\" href=\"#get_latch_status\">get_latch_status</a>(struct <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a> *<a class=\"id\" href=\"#slot\">slot</a>, <a class=\"id\" href=\"#u8\">u8</a> * <a class=\"id\" href=\"#value\">value</a>);", 
"", 
"static struct <a class=\"id\" href=\"#hotplug_slot_ops\">hotplug_slot_ops</a> <a class=\"id\" href=\"#cpci_hotplug_slot_ops\">cpci_hotplug_slot_ops</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#enable_slot\">enable_slot</a> = <a class=\"id\" href=\"#enable_slot\">enable_slot</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#disable_slot\">disable_slot</a> = <a class=\"id\" href=\"#disable_slot\">disable_slot</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#set_attention_status\">set_attention_status</a> = <a class=\"id\" href=\"#set_attention_status\">set_attention_status</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#get_power_status\">get_power_status</a> = <a class=\"id\" href=\"#get_power_status\">get_power_status</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#get_attention_status\">get_attention_status</a> = <a class=\"id\" href=\"#get_attention_status\">get_attention_status</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#get_adapter_status\">get_adapter_status</a> = <a class=\"id\" href=\"#get_adapter_status\">get_adapter_status</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#get_latch_status\">get_latch_status</a> = <a class=\"id\" href=\"#get_latch_status\">get_latch_status</a>,", 
"};", 
"", 
"static int", 
"<a class=\"id\" href=\"#update_latch_status\">update_latch_status</a>(struct <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a> *<a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>, <a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#value\">value</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#hotplug_slot_info\">hotplug_slot_info</a> <a class=\"id\" href=\"#info\">info</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>(&amp;<a class=\"id\" href=\"#info\">info</a>, <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>-><a class=\"id\" href=\"#info\">info</a>, sizeof(struct <a class=\"id\" href=\"#hotplug_slot_info\">hotplug_slot_info</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a>.<a class=\"id\" href=\"#latch_status\">latch_status</a> = <a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#pci_hp_change_slot_info\">pci_hp_change_slot_info</a>(<a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>, &amp;<a class=\"id\" href=\"#info\">info</a>);", 
"}", 
"", 
"static int", 
"<a class=\"id\" href=\"#update_adapter_status\">update_adapter_status</a>(struct <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a> *<a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>, <a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#value\">value</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#hotplug_slot_info\">hotplug_slot_info</a> <a class=\"id\" href=\"#info\">info</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>(&amp;<a class=\"id\" href=\"#info\">info</a>, <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>-><a class=\"id\" href=\"#info\">info</a>, sizeof(struct <a class=\"id\" href=\"#hotplug_slot_info\">hotplug_slot_info</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a>.<a class=\"id\" href=\"#adapter_status\">adapter_status</a> = <a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#pci_hp_change_slot_info\">pci_hp_change_slot_info</a>(<a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>, &amp;<a class=\"id\" href=\"#info\">info</a>);", 
"}", 
"", 
"static int", 
"<a class=\"id\" href=\"#enable_slot\">enable_slot</a>(struct <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a> *<a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#slot\">slot</a> *<a class=\"id\" href=\"#slot\">slot</a> = <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>-><a class=\"id\" href=\"#private\">private</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a> = 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - physical_slot = %s\", <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>));", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#controller\">controller</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#set_power\">set_power</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#controller\">controller</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#set_power\">set_power</a>(<a class=\"id\" href=\"#slot\">slot</a>, 1);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"}", 
"", 
"static int", 
"<a class=\"id\" href=\"#disable_slot\">disable_slot</a>(struct <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a> *<a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#slot\">slot</a> *<a class=\"id\" href=\"#slot\">slot</a> = <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>-><a class=\"id\" href=\"#private\">private</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a> = 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - physical_slot = %s\", <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>));", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#down_write\">down_write</a>(&amp;<a class=\"id\" href=\"#list_rwsem\">list_rwsem</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Unconfigure device */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - unconfiguring slot %s\", <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>));", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#cpci_unconfigure_slot\">cpci_unconfigure_slot</a>(<a class=\"id\" href=\"#slot\">slot</a>))) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a>(\"%s - could not unconfigure slot %s\",", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#disable_error\">disable_error</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - finished unconfiguring slot %s\", <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>));", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Clear EXT (by setting it) */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cpci_clear_ext\">cpci_clear_ext</a>(<a class=\"id\" href=\"#slot\">slot</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a>(\"%s - could not clear EXT for slot %s\",", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#disable_error\">disable_error</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cpci_led_on\">cpci_led_on</a>(<a class=\"id\" href=\"#slot\">slot</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#controller\">controller</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#set_power\">set_power</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((<a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#controller\">controller</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#set_power\">set_power</a>(<a class=\"id\" href=\"#slot\">slot</a>, 0)))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#disable_error\">disable_error</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#update_adapter_status\">update_adapter_status</a>(<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>, 0))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#warn\">warn</a>(\"failure to update adapter file\");", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#extracting\">extracting</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#extracting\">extracting</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atomic_dec\">atomic_dec</a>(&amp;<a class=\"id\" href=\"#extracting\">extracting</a>);", 
"<span class=\"ts\"/>}", 
"<a class=\"id\" href=\"#disable_error\">disable_error</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#up_write\">up_write</a>(&amp;<a class=\"id\" href=\"#list_rwsem\">list_rwsem</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#u8\">u8</a>", 
"<a class=\"id\" href=\"#cpci_get_power_status\">cpci_get_power_status</a>(struct <a class=\"id\" href=\"#slot\">slot</a> *<a class=\"id\" href=\"#slot\">slot</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#power\">power</a> = 1;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#controller\">controller</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#get_power\">get_power</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#power\">power</a> = <a class=\"id\" href=\"#controller\">controller</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#get_power\">get_power</a>(<a class=\"id\" href=\"#slot\">slot</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#power\">power</a>;", 
"}", 
"", 
"static int", 
"<a class=\"id\" href=\"#get_power_status\">get_power_status</a>(struct <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a> *<a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>, <a class=\"id\" href=\"#u8\">u8</a> * <a class=\"id\" href=\"#value\">value</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#slot\">slot</a> *<a class=\"id\" href=\"#slot\">slot</a> = <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>-><a class=\"id\" href=\"#private\">private</a>;", 
"", 
"<span class=\"ts\"/>*<a class=\"id\" href=\"#value\">value</a> = <a class=\"id\" href=\"#cpci_get_power_status\">cpci_get_power_status</a>(<a class=\"id\" href=\"#slot\">slot</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int", 
"<a class=\"id\" href=\"#get_attention_status\">get_attention_status</a>(struct <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a> *<a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>, <a class=\"id\" href=\"#u8\">u8</a> * <a class=\"id\" href=\"#value\">value</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#slot\">slot</a> *<a class=\"id\" href=\"#slot\">slot</a> = <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>-><a class=\"id\" href=\"#private\">private</a>;", 
"", 
"<span class=\"ts\"/>*<a class=\"id\" href=\"#value\">value</a> = <a class=\"id\" href=\"#cpci_get_attention_status\">cpci_get_attention_status</a>(<a class=\"id\" href=\"#slot\">slot</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int", 
"<a class=\"id\" href=\"#set_attention_status\">set_attention_status</a>(struct <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a> *<a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>, <a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#status\">status</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#cpci_set_attention_status\">cpci_set_attention_status</a>(<a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>-><a class=\"id\" href=\"#private\">private</a>, <a class=\"id\" href=\"#status\">status</a>);", 
"}", 
"", 
"static int", 
"<a class=\"id\" href=\"#get_adapter_status\">get_adapter_status</a>(struct <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a> *<a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>, <a class=\"id\" href=\"#u8\">u8</a> * <a class=\"id\" href=\"#value\">value</a>)", 
"{", 
"<span class=\"ts\"/>*<a class=\"id\" href=\"#value\">value</a> = <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>-><a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#adapter_status\">adapter_status</a>;", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int", 
"<a class=\"id\" href=\"#get_latch_status\">get_latch_status</a>(struct <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a> *<a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>, <a class=\"id\" href=\"#u8\">u8</a> * <a class=\"id\" href=\"#value\">value</a>)", 
"{", 
"<span class=\"ts\"/>*<a class=\"id\" href=\"#value\">value</a> = <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>-><a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#latch_status\">latch_status</a>;", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#release_slot\">release_slot</a>(struct <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a> *<a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#slot\">slot</a> *<a class=\"id\" href=\"#slot\">slot</a> = <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>-><a class=\"id\" href=\"#private\">private</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>-><a class=\"id\" href=\"#info\">info</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#dev\">dev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pci_dev_put\">pci_dev_put</a>(<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#slot\">slot</a>);", 
"}", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#SLOT_NAME_SIZE\">SLOT_NAME_SIZE</a><span class=\"ts\"/>6", 
"", 
"int", 
"<a class=\"id\" href=\"#cpci_hp_register_bus\">cpci_hp_register_bus</a>(struct <a class=\"id\" href=\"#pci_bus\">pci_bus</a> *<a class=\"id\" href=\"#bus\">bus</a>, <a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#first\">first</a>, <a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#last\">last</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#slot\">slot</a> *<a class=\"id\" href=\"#slot\">slot</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a> *<a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#hotplug_slot_info\">hotplug_slot_info</a> *<a class=\"id\" href=\"#info\">info</a>;", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#name\">name</a>[<a class=\"id\" href=\"#SLOT_NAME_SIZE\">SLOT_NAME_SIZE</a>];", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#status\">status</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#controller\">controller</a> && <a class=\"id\" href=\"#bus\">bus</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Create a structure for each slot, and register that slot</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * with the pci_hotplug subsystem.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = <a class=\"id\" href=\"#first\">first</a>; <a class=\"id\" href=\"#i\">i</a> <= <a class=\"id\" href=\"#last\">last</a>; ++<a class=\"id\" href=\"#i\">i</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#slot\">slot</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof (struct <a class=\"id\" href=\"#slot\">slot</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#slot\">slot</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof (struct <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#error_slot\">error_slot</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a> = <a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof (struct <a class=\"id\" href=\"#hotplug_slot_info\">hotplug_slot_info</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#info\">info</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#error_hpslot\">error_hpslot</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>-><a class=\"id\" href=\"#info\">info</a> = <a class=\"id\" href=\"#info\">info</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#bus\">bus</a> = <a class=\"id\" href=\"#bus\">bus</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#number\">number</a> = <a class=\"id\" href=\"#i\">i</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#devfn\">devfn</a> = <a class=\"id\" href=\"#PCI_DEVFN\">PCI_DEVFN</a>(<a class=\"id\" href=\"#i\">i</a>, 0);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#snprintf\">snprintf</a>(<a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#SLOT_NAME_SIZE\">SLOT_NAME_SIZE</a>, \"%02x:%02x\", <a class=\"id\" href=\"#bus\">bus</a>-><a class=\"id\" href=\"#number\">number</a>, <a class=\"id\" href=\"#i\">i</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>-><a class=\"id\" href=\"#private\">private</a> = <a class=\"id\" href=\"#slot\">slot</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>-><a class=\"id\" href=\"#release\">release</a> = &amp;<a class=\"id\" href=\"#release_slot\">release_slot</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>-><a class=\"id\" href=\"#ops\">ops</a> = &amp;<a class=\"id\" href=\"#cpci_hotplug_slot_ops\">cpci_hotplug_slot_ops</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * Initialize the slot info structure with some known</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * good values.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"initializing slot %s\", <a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#power_status\">power_status</a> = <a class=\"id\" href=\"#cpci_get_power_status\">cpci_get_power_status</a>(<a class=\"id\" href=\"#slot\">slot</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#info\">info</a>-><a class=\"id\" href=\"#attention_status\">attention_status</a> = <a class=\"id\" href=\"#cpci_get_attention_status\">cpci_get_attention_status</a>(<a class=\"id\" href=\"#slot\">slot</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"registering slot %s\", <a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#pci_hp_register\">pci_hp_register</a>(<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>, <a class=\"id\" href=\"#bus\">bus</a>, <a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a>(\"pci_hp_register failed with error %d\", <a class=\"id\" href=\"#status\">status</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#error_info\">error_info</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"slot registered with name: %s\", <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>));", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Add slot to our internal list */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#down_write\">down_write</a>(&amp;<a class=\"id\" href=\"#list_rwsem\">list_rwsem</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_add\">list_add</a>(&amp;<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#slot_list\">slot_list</a>, &amp;<a class=\"id\" href=\"#slot_list\">slot_list</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#slots\">slots</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#up_write\">up_write</a>(&amp;<a class=\"id\" href=\"#list_rwsem\">list_rwsem</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"<a class=\"id\" href=\"#error_info\">error_info</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#info\">info</a>);", 
"<a class=\"id\" href=\"#error_hpslot\">error_hpslot</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>);", 
"<a class=\"id\" href=\"#error_slot\">error_slot</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#slot\">slot</a>);", 
"<a class=\"id\" href=\"#error\">error</a>:", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"}", 
"", 
"int", 
"<a class=\"id\" href=\"#cpci_hp_unregister_bus\">cpci_hp_unregister_bus</a>(struct <a class=\"id\" href=\"#pci_bus\">pci_bus</a> *<a class=\"id\" href=\"#bus\">bus</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#slot\">slot</a> *<a class=\"id\" href=\"#slot\">slot</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#slot\">slot</a> *<a class=\"id\" href=\"#tmp\">tmp</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#status\">status</a> = 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#down_write\">down_write</a>(&amp;<a class=\"id\" href=\"#list_rwsem\">list_rwsem</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#slots\">slots</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#up_write\">up_write</a>(&amp;<a class=\"id\" href=\"#list_rwsem\">list_rwsem</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry_safe\">list_for_each_entry_safe</a>(<a class=\"id\" href=\"#slot\">slot</a>, <a class=\"id\" href=\"#tmp\">tmp</a>, &amp;<a class=\"id\" href=\"#slot_list\">slot_list</a>, <a class=\"id\" href=\"#slot_list\">slot_list</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#bus\">bus</a> == <a class=\"id\" href=\"#bus\">bus</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_del\">list_del</a>(&amp;<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#slot_list\">slot_list</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#slots\">slots</a>--;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"deregistering slot %s\", <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#pci_hp_deregister\">pci_hp_deregister</a>(<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a>(\"pci_hp_deregister failed with error %d\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#status\">status</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#up_write\">up_write</a>(&amp;<a class=\"id\" href=\"#list_rwsem\">list_rwsem</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"}", 
"", 
"<span class=\"comment\">/* This is the interrupt mode interrupt handler */</span>", 
"static <a class=\"id\" href=\"#irqreturn_t\">irqreturn_t</a>", 
"<a class=\"id\" href=\"#cpci_hp_intr\">cpci_hp_intr</a>(int <a class=\"id\" href=\"#irq\">irq</a>, void *<a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"entered cpci_hp_intr\");", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Check to see if it was our interrupt */</span>", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#controller\">controller</a>-><a class=\"id\" href=\"#irq_flags\">irq_flags</a> &amp; <a class=\"id\" href=\"#IRQF_SHARED\">IRQF_SHARED</a>) &&", 
"<span class=\"ts\"/>    !<a class=\"id\" href=\"#controller\">controller</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#check_irq\">check_irq</a>(<a class=\"id\" href=\"#controller\">controller</a>-><a class=\"id\" href=\"#dev_id\">dev_id</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"exited cpci_hp_intr, not our interrupt\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#IRQ_NONE\">IRQ_NONE</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Disable ENUM interrupt */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#controller\">controller</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#disable_irq\">disable_irq</a>();", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Trigger processing by the event thread */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#wake_up_process\">wake_up_process</a>(<a class=\"id\" href=\"#cpci_thread\">cpci_thread</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#IRQ_HANDLED\">IRQ_HANDLED</a>;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * According to PICMG 2.1 R2.0, section 6.3.2, upon</span>", 
"<span class=\"comment\"> * initialization, the system driver shall clear the</span>", 
"<span class=\"comment\"> * INS bits of the cold-inserted devices.</span>", 
"<span class=\"comment\"> */</span>", 
"static int", 
"<a class=\"id\" href=\"#init_slots\">init_slots</a>(int <a class=\"id\" href=\"#clear_ins\">clear_ins</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#slot\">slot</a> *<a class=\"id\" href=\"#slot\">slot</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a>* <a class=\"id\" href=\"#dev\">dev</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - enter\", <a class=\"id\" href=\"#__func__\">__func__</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#down_read\">down_read</a>(&amp;<a class=\"id\" href=\"#list_rwsem\">list_rwsem</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#slots\">slots</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#up_read\">up_read</a>(&amp;<a class=\"id\" href=\"#list_rwsem\">list_rwsem</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#slot\">slot</a>, &amp;<a class=\"id\" href=\"#slot_list\">slot_list</a>, <a class=\"id\" href=\"#slot_list\">slot_list</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - looking at slot %s\", <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#clear_ins\">clear_ins</a> && <a class=\"id\" href=\"#cpci_check_and_clear_ins\">cpci_check_and_clear_ins</a>(<a class=\"id\" href=\"#slot\">slot</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - cleared INS for slot %s\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#pci_get_slot\">pci_get_slot</a>(<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#bus\">bus</a>, <a class=\"id\" href=\"#PCI_DEVFN\">PCI_DEVFN</a>(<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#number\">number</a>, 0));", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#dev\">dev</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#update_adapter_status\">update_adapter_status</a>(<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>, 1))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#warn\">warn</a>(\"failure to update adapter file\");", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#update_latch_status\">update_latch_status</a>(<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>, 1))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#warn\">warn</a>(\"failure to update latch file\");", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#up_read\">up_read</a>(&amp;<a class=\"id\" href=\"#list_rwsem\">list_rwsem</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - exit\", <a class=\"id\" href=\"#__func__\">__func__</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int", 
"<a class=\"id\" href=\"#check_slots\">check_slots</a>(void)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#slot\">slot</a> *<a class=\"id\" href=\"#slot\">slot</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#extracted\">extracted</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#inserted\">inserted</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#hs_csr\">hs_csr</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#down_read\">down_read</a>(&amp;<a class=\"id\" href=\"#list_rwsem\">list_rwsem</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#slots\">slots</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#up_read\">up_read</a>(&amp;<a class=\"id\" href=\"#list_rwsem\">list_rwsem</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a>(\"no slots registered, shutting down\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#extracted\">extracted</a> = <a class=\"id\" href=\"#inserted\">inserted</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#slot\">slot</a>, &amp;<a class=\"id\" href=\"#slot_list\">slot_list</a>, <a class=\"id\" href=\"#slot_list\">slot_list</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - looking at slot %s\", <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#cpci_check_and_clear_ins\">cpci_check_and_clear_ins</a>(<a class=\"id\" href=\"#slot\">slot</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * Some broken hardware (e.g. PLX 9054AB) asserts</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * ENUM# twice...</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#dev\">dev</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#warn\">warn</a>(\"slot %s already inserted\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#inserted\">inserted</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Process insertion */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - slot %s inserted\", <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>));", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* GSM, debug */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hs_csr\">hs_csr</a> = <a class=\"id\" href=\"#cpci_get_hs_csr\">cpci_get_hs_csr</a>(<a class=\"id\" href=\"#slot\">slot</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - slot %s HS_CSR (1) = %04x\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>), <a class=\"id\" href=\"#hs_csr\">hs_csr</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Configure device */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - configuring slot %s\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#cpci_configure_slot\">cpci_configure_slot</a>(<a class=\"id\" href=\"#slot\">slot</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a>(\"%s - could not configure slot %s\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - finished configuring slot %s\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>));", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* GSM, debug */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hs_csr\">hs_csr</a> = <a class=\"id\" href=\"#cpci_get_hs_csr\">cpci_get_hs_csr</a>(<a class=\"id\" href=\"#slot\">slot</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - slot %s HS_CSR (2) = %04x\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>), <a class=\"id\" href=\"#hs_csr\">hs_csr</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#update_latch_status\">update_latch_status</a>(<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>, 1))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#warn\">warn</a>(\"failure to update latch file\");", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#update_adapter_status\">update_adapter_status</a>(<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>, 1))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#warn\">warn</a>(\"failure to update adapter file\");", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cpci_led_off\">cpci_led_off</a>(<a class=\"id\" href=\"#slot\">slot</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* GSM, debug */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hs_csr\">hs_csr</a> = <a class=\"id\" href=\"#cpci_get_hs_csr\">cpci_get_hs_csr</a>(<a class=\"id\" href=\"#slot\">slot</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - slot %s HS_CSR (3) = %04x\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>), <a class=\"id\" href=\"#hs_csr\">hs_csr</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#inserted\">inserted</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/>} else if (<a class=\"id\" href=\"#cpci_check_ext\">cpci_check_ext</a>(<a class=\"id\" href=\"#slot\">slot</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Process extraction request */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - slot %s extracted\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>));", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* GSM, debug */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hs_csr\">hs_csr</a> = <a class=\"id\" href=\"#cpci_get_hs_csr\">cpci_get_hs_csr</a>(<a class=\"id\" href=\"#slot\">slot</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - slot %s HS_CSR = %04x\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>), <a class=\"id\" href=\"#hs_csr\">hs_csr</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#extracting\">extracting</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#update_latch_status\">update_latch_status</a>(<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>, 0)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#warn\">warn</a>(\"failure to update latch file\");", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#extracting\">extracting</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atomic_inc\">atomic_inc</a>(&amp;<a class=\"id\" href=\"#extracting\">extracting</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#extracted\">extracted</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/>} else if (<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#extracting\">extracting</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hs_csr\">hs_csr</a> = <a class=\"id\" href=\"#cpci_get_hs_csr\">cpci_get_hs_csr</a>(<a class=\"id\" href=\"#slot\">slot</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#hs_csr\">hs_csr</a> == 0xffff) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * Hmmm, we're likely hosed at this point, should we</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * bother trying to tell the driver or not?</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a>(\"card in slot %s was improperly removed\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#slot_name\">slot_name</a>(<a class=\"id\" href=\"#slot\">slot</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#update_adapter_status\">update_adapter_status</a>(<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>, 0))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#warn\">warn</a>(\"failure to update adapter file\");", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#extracting\">extracting</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atomic_dec\">atomic_dec</a>(&amp;<a class=\"id\" href=\"#extracting\">extracting</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#up_read\">up_read</a>(&amp;<a class=\"id\" href=\"#list_rwsem\">list_rwsem</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"inserted=%d, extracted=%d, extracting=%d\",", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#inserted\">inserted</a>, <a class=\"id\" href=\"#extracted\">extracted</a>, <a class=\"id\" href=\"#atomic_read\">atomic_read</a>(&amp;<a class=\"id\" href=\"#extracting\">extracting</a>));", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#inserted\">inserted</a> || <a class=\"id\" href=\"#extracted\">extracted</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#extracted\">extracted</a>;", 
"<span class=\"ts\"/>else if (!<a class=\"id\" href=\"#atomic_read\">atomic_read</a>(&amp;<a class=\"id\" href=\"#extracting\">extracting</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a>(\"cannot find ENUM# source, shutting down\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/* This is the interrupt mode worker thread body */</span>", 
"static int", 
"<a class=\"id\" href=\"#event_thread\">event_thread</a>(void *<a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rc\">rc</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - event thread started\", <a class=\"id\" href=\"#__func__\">__func__</a>);", 
"<span class=\"ts\"/>while (1) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"event thread sleeping\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_current_state\">set_current_state</a>(<a class=\"id\" href=\"#TASK_INTERRUPTIBLE\">TASK_INTERRUPTIBLE</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#schedule\">schedule</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#kthread_should_stop\">kthread_should_stop</a>())", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>do {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#check_slots\">check_slots</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a> &gt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Give userspace a chance to handle extraction */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#msleep\">msleep</a>(500);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>} else if (<a class=\"id\" href=\"#rc\">rc</a> &lt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - error checking slots\", <a class=\"id\" href=\"#__func__\">__func__</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#thread_finished\">thread_finished</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>} while (<a class=\"id\" href=\"#atomic_read\">atomic_read</a>(&amp;<a class=\"id\" href=\"#extracting\">extracting</a>) && !<a class=\"id\" href=\"#kthread_should_stop\">kthread_should_stop</a>());", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#kthread_should_stop\">kthread_should_stop</a>())", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Re-enable ENUM# interrupt */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - re-enabling irq\", <a class=\"id\" href=\"#__func__\">__func__</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#controller\">controller</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#enable_irq\">enable_irq</a>();", 
"<span class=\"ts\"/>}", 
" <a class=\"id\" href=\"#out\">out</a>:", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/* This is the polling mode worker thread body */</span>", 
"static int", 
"<a class=\"id\" href=\"#poll_thread\">poll_thread</a>(void *<a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rc\">rc</a>;", 
"", 
"<span class=\"ts\"/>while (1) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#kthread_should_stop\">kthread_should_stop</a>() || <a class=\"id\" href=\"#signal_pending\">signal_pending</a>(<a class=\"id\" href=\"#current\">current</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#controller\">controller</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#query_enum\">query_enum</a>()) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>do {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#check_slots\">check_slots</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a> &gt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Give userspace a chance to handle extraction */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#msleep\">msleep</a>(500);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>} else if (<a class=\"id\" href=\"#rc\">rc</a> &lt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - error checking slots\", <a class=\"id\" href=\"#__func__\">__func__</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#thread_finished\">thread_finished</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>} while (<a class=\"id\" href=\"#atomic_read\">atomic_read</a>(&amp;<a class=\"id\" href=\"#extracting\">extracting</a>) && !<a class=\"id\" href=\"#kthread_should_stop\">kthread_should_stop</a>());", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#msleep\">msleep</a>(100);", 
"<span class=\"ts\"/>}", 
" <a class=\"id\" href=\"#out\">out</a>:", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int", 
"<a class=\"id\" href=\"#cpci_start_thread\">cpci_start_thread</a>(void)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#controller\">controller</a>-><a class=\"id\" href=\"#irq\">irq</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cpci_thread\">cpci_thread</a> = <a class=\"id\" href=\"#kthread_run\">kthread_run</a>(<a class=\"id\" href=\"#event_thread\">event_thread</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, \"cpci_hp_eventd\");", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cpci_thread\">cpci_thread</a> = <a class=\"id\" href=\"#kthread_run\">kthread_run</a>(<a class=\"id\" href=\"#poll_thread\">poll_thread</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, \"cpci_hp_polld\");", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#IS_ERR\">IS_ERR</a>(<a class=\"id\" href=\"#cpci_thread\">cpci_thread</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a>(\"Can't start up our thread\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#PTR_ERR\">PTR_ERR</a>(<a class=\"id\" href=\"#cpci_thread\">cpci_thread</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#thread_finished\">thread_finished</a> = 0;", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static void", 
"<a class=\"id\" href=\"#cpci_stop_thread\">cpci_stop_thread</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kthread_stop\">kthread_stop</a>(<a class=\"id\" href=\"#cpci_thread\">cpci_thread</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#thread_finished\">thread_finished</a> = 1;", 
"}", 
"", 
"int", 
"<a class=\"id\" href=\"#cpci_hp_register_controller\">cpci_hp_register_controller</a>(struct <a class=\"id\" href=\"#cpci_hp_controller\">cpci_hp_controller</a> *<a class=\"id\" href=\"#new_controller\">new_controller</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#status\">status</a> = 0;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#controller\">controller</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#new_controller\">new_controller</a> && <a class=\"id\" href=\"#new_controller\">new_controller</a>-><a class=\"id\" href=\"#ops\">ops</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#new_controller\">new_controller</a>-><a class=\"id\" href=\"#irq\">irq</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!(<a class=\"id\" href=\"#new_controller\">new_controller</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#enable_irq\">enable_irq</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/>     <a class=\"id\" href=\"#new_controller\">new_controller</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#disable_irq\">disable_irq</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#request_irq\">request_irq</a>(<a class=\"id\" href=\"#new_controller\">new_controller</a>-><a class=\"id\" href=\"#irq\">irq</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#cpci_hp_intr\">cpci_hp_intr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#new_controller\">new_controller</a>-><a class=\"id\" href=\"#irq_flags\">irq_flags</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#MY_NAME\">MY_NAME</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#new_controller\">new_controller</a>-><a class=\"id\" href=\"#dev_id\">dev_id</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a>(\"Can't get irq %d for the hotplug cPCI controller\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#new_controller\">new_controller</a>-><a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - acquired controller irq %d\",", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#__func__\">__func__</a>, <a class=\"id\" href=\"#new_controller\">new_controller</a>-><a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#status\">status</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#controller\">controller</a> = <a class=\"id\" href=\"#new_controller\">new_controller</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"}", 
"", 
"static void", 
"<a class=\"id\" href=\"#cleanup_slots\">cleanup_slots</a>(void)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#slot\">slot</a> *<a class=\"id\" href=\"#slot\">slot</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#slot\">slot</a> *<a class=\"id\" href=\"#tmp\">tmp</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Unregister all of our slots with the pci_hotplug subsystem,</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * and free up all memory that we had allocated.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#down_write\">down_write</a>(&amp;<a class=\"id\" href=\"#list_rwsem\">list_rwsem</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#slots\">slots</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#cleanup_null\">cleanup_null</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry_safe\">list_for_each_entry_safe</a>(<a class=\"id\" href=\"#slot\">slot</a>, <a class=\"id\" href=\"#tmp\">tmp</a>, &amp;<a class=\"id\" href=\"#slot_list\">slot_list</a>, <a class=\"id\" href=\"#slot_list\">slot_list</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_del\">list_del</a>(&amp;<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#slot_list\">slot_list</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pci_hp_deregister\">pci_hp_deregister</a>(<a class=\"id\" href=\"#slot\">slot</a>-><a class=\"id\" href=\"#hotplug_slot\">hotplug_slot</a>);", 
"<span class=\"ts\"/>}", 
"<a class=\"id\" href=\"#cleanup_null\">cleanup_null</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#up_write\">up_write</a>(&amp;<a class=\"id\" href=\"#list_rwsem\">list_rwsem</a>);", 
"<span class=\"ts\"/>return;", 
"}", 
"", 
"int", 
"<a class=\"id\" href=\"#cpci_hp_unregister_controller\">cpci_hp_unregister_controller</a>(struct <a class=\"id\" href=\"#cpci_hp_controller\">cpci_hp_controller</a> *<a class=\"id\" href=\"#old_controller\">old_controller</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#status\">status</a> = 0;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#controller\">controller</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#thread_finished\">thread_finished</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cpci_stop_thread\">cpci_stop_thread</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#controller\">controller</a>-><a class=\"id\" href=\"#irq\">irq</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#free_irq\">free_irq</a>(<a class=\"id\" href=\"#controller\">controller</a>-><a class=\"id\" href=\"#irq\">irq</a>, <a class=\"id\" href=\"#controller\">controller</a>-><a class=\"id\" href=\"#dev_id\">dev_id</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#controller\">controller</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cleanup_slots\">cleanup_slots</a>();", 
"<span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"}", 
"", 
"int", 
"<a class=\"id\" href=\"#cpci_hp_start\">cpci_hp_start</a>(void)", 
"{", 
"<span class=\"ts\"/>static int <a class=\"id\" href=\"#first\">first</a> = 1;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#status\">status</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - enter\", <a class=\"id\" href=\"#__func__\">__func__</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#controller\">controller</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#down_read\">down_read</a>(&amp;<a class=\"id\" href=\"#list_rwsem\">list_rwsem</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#list_empty\">list_empty</a>(&amp;<a class=\"id\" href=\"#slot_list\">slot_list</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#up_read\">up_read</a>(&amp;<a class=\"id\" href=\"#list_rwsem\">list_rwsem</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#up_read\">up_read</a>(&amp;<a class=\"id\" href=\"#list_rwsem\">list_rwsem</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#init_slots\">init_slots</a>(<a class=\"id\" href=\"#first\">first</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#first\">first</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#first\">first</a> = 0;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#cpci_start_thread\">cpci_start_thread</a>();", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - thread started\", <a class=\"id\" href=\"#__func__\">__func__</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#controller\">controller</a>-><a class=\"id\" href=\"#irq\">irq</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Start enum interrupt processing */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - enabling irq\", <a class=\"id\" href=\"#__func__\">__func__</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#controller\">controller</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#enable_irq\">enable_irq</a>();", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - exit\", <a class=\"id\" href=\"#__func__\">__func__</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"int", 
"<a class=\"id\" href=\"#cpci_hp_stop\">cpci_hp_stop</a>(void)", 
"{", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#controller\">controller</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#controller\">controller</a>-><a class=\"id\" href=\"#irq\">irq</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Stop enum interrupt processing */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dbg\">dbg</a>(\"%s - disabling irq\", <a class=\"id\" href=\"#__func__\">__func__</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#controller\">controller</a>-><a class=\"id\" href=\"#ops\">ops</a>-><a class=\"id\" href=\"#disable_irq\">disable_irq</a>();", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cpci_stop_thread\">cpci_stop_thread</a>();", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"int <a class=\"id\" href=\"#__init\">__init</a>", 
"<a class=\"id\" href=\"#cpci_hotplug_init\">cpci_hotplug_init</a>(int <a class=\"id\" href=\"#debug\">debug</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cpci_debug\">cpci_debug</a> = <a class=\"id\" href=\"#debug\">debug</a>;", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"void <a class=\"id\" href=\"#__exit\">__exit</a>", 
"<a class=\"id\" href=\"#cpci_hotplug_exit\">cpci_hotplug_exit</a>(void)", 
"{", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Clean everything up.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cpci_hp_stop\">cpci_hp_stop</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cpci_hp_unregister_controller\">cpci_hp_unregister_controller</a>(<a class=\"id\" href=\"#controller\">controller</a>);", 
"}", 
"", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#cpci_hp_register_controller\">cpci_hp_register_controller</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#cpci_hp_unregister_controller\">cpci_hp_unregister_controller</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#cpci_hp_register_bus\">cpci_hp_register_bus</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#cpci_hp_unregister_bus\">cpci_hp_unregister_bus</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#cpci_hp_start\">cpci_hp_start</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#cpci_hp_stop\">cpci_hp_stop</a>);", 
];
xr_frag_insert('l/d3/59632b603013f1bf8a1768b2c36970ff2f7d70.xr', __xr_tmp);
