var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * 32bit Socket syscall emulation. Based on arch/sparc64/kernel/sys_sparc32.c.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Copyright (C) 2000<span class=\"ts\"/><span class=\"ts\"/>VA Linux Co</span>", 
"<span class=\"comment\"> * Copyright (C) 2000<span class=\"ts\"/><span class=\"ts\"/>Don Dugger &lt;n0ano@valinux.com&gt;</span>", 
"<span class=\"comment\"> * Copyright (C) 1999 <span class=\"ts\"/><span class=\"ts\"/>Arun Sharma &lt;arun.sharma@intel.com&gt;</span>", 
"<span class=\"comment\"> * Copyright (C) 1997,1998 <span class=\"ts\"/>Jakub Jelinek (jj@sunsite.mff.cuni.cz)</span>", 
"<span class=\"comment\"> * Copyright (C) 1997 <span class=\"ts\"/><span class=\"ts\"/>David S. Miller (davem@caip.rutgers.edu)</span>", 
"<span class=\"comment\"> * Copyright (C) 2000<span class=\"ts\"/><span class=\"ts\"/>Hewlett-Packard Co.</span>", 
"<span class=\"comment\"> * Copyright (C) 2000<span class=\"ts\"/><span class=\"ts\"/>David Mosberger-Tang &lt;davidm@hpl.hp.com&gt;</span>", 
"<span class=\"comment\"> * Copyright (C) 2000,2001<span class=\"ts\"/>Andi Kleen, SuSE Labs</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kernel\">kernel</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#gfp\">gfp</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#fs\">fs</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#types\">types</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#file\">file</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#icmpv6\">icmpv6</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#socket\">socket</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#syscalls\">syscalls</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#filter\">filter</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#compat\">compat</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#security\">security</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#net\">net</a>/<a class=\"id\" href=\"#scm\">scm</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#net\">net</a>/<a class=\"id\" href=\"#sock\">sock</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#net\">net</a>/<a class=\"id\" href=\"#ip\">ip</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#net\">net</a>/<a class=\"id\" href=\"#ipv6\">ipv6</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#uaccess\">uaccess</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#net\">net</a>/<a class=\"id\" href=\"#compat\">compat</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> int <a class=\"id\" href=\"#iov_from_user_compat_to_kern\">iov_from_user_compat_to_kern</a>(struct <a class=\"id\" href=\"#iovec\">iovec</a> *<a class=\"id\" href=\"#kiov\">kiov</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  struct <a class=\"id\" href=\"#compat_iovec\">compat_iovec</a> <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#uiov32\">uiov32</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  int <a class=\"id\" href=\"#niov\">niov</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#tot_len\">tot_len</a> = 0;", 
"", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#niov\">niov</a> &gt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#compat_uptr_t\">compat_uptr_t</a> <a class=\"id\" href=\"#buf\">buf</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#compat_size_t\">compat_size_t</a> <a class=\"id\" href=\"#len\">len</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#get_user\">get_user</a>(<a class=\"id\" href=\"#len\">len</a>, &amp;<a class=\"id\" href=\"#uiov32\">uiov32</a>-><a class=\"id\" href=\"#iov_len\">iov_len</a>) ||", 
"<span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#get_user\">get_user</a>(<a class=\"id\" href=\"#buf\">buf</a>, &amp;<a class=\"id\" href=\"#uiov32\">uiov32</a>-><a class=\"id\" href=\"#iov_base\">iov_base</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tot_len\">tot_len</a> = -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tot_len\">tot_len</a> += <a class=\"id\" href=\"#len\">len</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kiov\">kiov</a>-><a class=\"id\" href=\"#iov_base\">iov_base</a> = <a class=\"id\" href=\"#compat_ptr\">compat_ptr</a>(<a class=\"id\" href=\"#buf\">buf</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kiov\">kiov</a>-><a class=\"id\" href=\"#iov_len\">iov_len</a> = (<a class=\"id\" href=\"#__kernel_size_t\">__kernel_size_t</a>) <a class=\"id\" href=\"#len\">len</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#uiov32\">uiov32</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kiov\">kiov</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#niov\">niov</a>--;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#tot_len\">tot_len</a>;", 
"}", 
"", 
"int <a class=\"id\" href=\"#get_compat_msghdr\">get_compat_msghdr</a>(struct <a class=\"id\" href=\"#msghdr\">msghdr</a> *<a class=\"id\" href=\"#kmsg\">kmsg</a>, struct <a class=\"id\" href=\"#compat_msghdr\">compat_msghdr</a> <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#umsg\">umsg</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#compat_uptr_t\">compat_uptr_t</a> <a class=\"id\" href=\"#tmp1\">tmp1</a>, <a class=\"id\" href=\"#tmp2\">tmp2</a>, <a class=\"id\" href=\"#tmp3\">tmp3</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#access_ok\">access_ok</a>(<a class=\"id\" href=\"#VERIFY_READ\">VERIFY_READ</a>, <a class=\"id\" href=\"#umsg\">umsg</a>, sizeof(*<a class=\"id\" href=\"#umsg\">umsg</a>)) ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#__get_user\">__get_user</a>(<a class=\"id\" href=\"#tmp1\">tmp1</a>, &amp;<a class=\"id\" href=\"#umsg\">umsg</a>-><a class=\"id\" href=\"#msg_name\">msg_name</a>) ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#__get_user\">__get_user</a>(<a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_namelen\">msg_namelen</a>, &amp;<a class=\"id\" href=\"#umsg\">umsg</a>-><a class=\"id\" href=\"#msg_namelen\">msg_namelen</a>) ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#__get_user\">__get_user</a>(<a class=\"id\" href=\"#tmp2\">tmp2</a>, &amp;<a class=\"id\" href=\"#umsg\">umsg</a>-><a class=\"id\" href=\"#msg_iov\">msg_iov</a>) ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#__get_user\">__get_user</a>(<a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_iovlen\">msg_iovlen</a>, &amp;<a class=\"id\" href=\"#umsg\">umsg</a>-><a class=\"id\" href=\"#msg_iovlen\">msg_iovlen</a>) ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#__get_user\">__get_user</a>(<a class=\"id\" href=\"#tmp3\">tmp3</a>, &amp;<a class=\"id\" href=\"#umsg\">umsg</a>-><a class=\"id\" href=\"#msg_control\">msg_control</a>) ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#__get_user\">__get_user</a>(<a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_controllen\">msg_controllen</a>, &amp;<a class=\"id\" href=\"#umsg\">umsg</a>-><a class=\"id\" href=\"#msg_controllen\">msg_controllen</a>) ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#__get_user\">__get_user</a>(<a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_flags\">msg_flags</a>, &amp;<a class=\"id\" href=\"#umsg\">umsg</a>-><a class=\"id\" href=\"#msg_flags\">msg_flags</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_name\">msg_name</a> = <a class=\"id\" href=\"#compat_ptr\">compat_ptr</a>(<a class=\"id\" href=\"#tmp1\">tmp1</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_iov\">msg_iov</a> = <a class=\"id\" href=\"#compat_ptr\">compat_ptr</a>(<a class=\"id\" href=\"#tmp2\">tmp2</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_control\">msg_control</a> = <a class=\"id\" href=\"#compat_ptr\">compat_ptr</a>(<a class=\"id\" href=\"#tmp3\">tmp3</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/* I've named the args so it is easy to tell whose space the pointers are in. */</span>", 
"int <a class=\"id\" href=\"#verify_compat_iovec\">verify_compat_iovec</a>(struct <a class=\"id\" href=\"#msghdr\">msghdr</a> *<a class=\"id\" href=\"#kern_msg\">kern_msg</a>, struct <a class=\"id\" href=\"#iovec\">iovec</a> *<a class=\"id\" href=\"#kern_iov\">kern_iov</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>   struct <a class=\"id\" href=\"#sockaddr\">sockaddr</a> *<a class=\"id\" href=\"#kern_address\">kern_address</a>, int <a class=\"id\" href=\"#mode\">mode</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#tot_len\">tot_len</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#kern_msg\">kern_msg</a>-><a class=\"id\" href=\"#msg_namelen\">msg_namelen</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#mode\">mode</a> == <a class=\"id\" href=\"#VERIFY_READ\">VERIFY_READ</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#move_addr_to_kernel\">move_addr_to_kernel</a>(<a class=\"id\" href=\"#kern_msg\">kern_msg</a>-><a class=\"id\" href=\"#msg_name\">msg_name</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#kern_msg\">kern_msg</a>-><a class=\"id\" href=\"#msg_namelen\">msg_namelen</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#kern_address\">kern_address</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kern_msg\">kern_msg</a>-><a class=\"id\" href=\"#msg_name\">msg_name</a> = <a class=\"id\" href=\"#kern_address\">kern_address</a>;", 
"<span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kern_msg\">kern_msg</a>-><a class=\"id\" href=\"#msg_name\">msg_name</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tot_len\">tot_len</a> = <a class=\"id\" href=\"#iov_from_user_compat_to_kern\">iov_from_user_compat_to_kern</a>(<a class=\"id\" href=\"#kern_iov\">kern_iov</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  (struct <a class=\"id\" href=\"#compat_iovec\">compat_iovec</a> <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#kern_msg\">kern_msg</a>-><a class=\"id\" href=\"#msg_iov\">msg_iov</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#kern_msg\">kern_msg</a>-><a class=\"id\" href=\"#msg_iovlen\">msg_iovlen</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tot_len\">tot_len</a> >= 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kern_msg\">kern_msg</a>-><a class=\"id\" href=\"#msg_iov\">msg_iov</a> = <a class=\"id\" href=\"#kern_iov\">kern_iov</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#tot_len\">tot_len</a>;", 
"}", 
"", 
"<span class=\"comment\">/* Bleech... */</span>", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#CMSG_COMPAT_ALIGN\">CMSG_COMPAT_ALIGN</a>(<a class=\"id\" href=\"#len\">len</a>)<span class=\"ts\"/><a class=\"id\" href=\"#ALIGN\">ALIGN</a>((<a class=\"id\" href=\"#len\">len</a>), sizeof(<a class=\"id\" href=\"#s32\">s32</a>))", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#CMSG_COMPAT_DATA\">CMSG_COMPAT_DATA</a>(<a class=\"id\" href=\"#cmsg\">cmsg</a>)<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/>((void <a class=\"id\" href=\"#__user\">__user</a> *)((char <a class=\"id\" href=\"#__user\">__user</a> *)(<a class=\"id\" href=\"#cmsg\">cmsg</a>) + <a class=\"id\" href=\"#CMSG_COMPAT_ALIGN\">CMSG_COMPAT_ALIGN</a>(sizeof(struct <a class=\"id\" href=\"#compat_cmsghdr\">compat_cmsghdr</a>))))", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#CMSG_COMPAT_SPACE\">CMSG_COMPAT_SPACE</a>(<a class=\"id\" href=\"#len\">len</a>)<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/>(<a class=\"id\" href=\"#CMSG_COMPAT_ALIGN\">CMSG_COMPAT_ALIGN</a>(sizeof(struct <a class=\"id\" href=\"#compat_cmsghdr\">compat_cmsghdr</a>)) + <a class=\"id\" href=\"#CMSG_COMPAT_ALIGN\">CMSG_COMPAT_ALIGN</a>(<a class=\"id\" href=\"#len\">len</a>))", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#CMSG_COMPAT_LEN\">CMSG_COMPAT_LEN</a>(<a class=\"id\" href=\"#len\">len</a>)<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/>(<a class=\"id\" href=\"#CMSG_COMPAT_ALIGN\">CMSG_COMPAT_ALIGN</a>(sizeof(struct <a class=\"id\" href=\"#compat_cmsghdr\">compat_cmsghdr</a>)) + (<a class=\"id\" href=\"#len\">len</a>))", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#CMSG_COMPAT_FIRSTHDR\">CMSG_COMPAT_FIRSTHDR</a>(<a class=\"id\" href=\"#msg\">msg</a>)<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/>(((<a class=\"id\" href=\"#msg\">msg</a>)-><a class=\"id\" href=\"#msg_controllen\">msg_controllen</a>) >= sizeof(struct <a class=\"id\" href=\"#compat_cmsghdr\">compat_cmsghdr</a>) ?<span class=\"ts\"/>\\", 
"<span class=\"ts\"/> (struct <a class=\"id\" href=\"#compat_cmsghdr\">compat_cmsghdr</a> <a class=\"id\" href=\"#__user\">__user</a> *)((<a class=\"id\" href=\"#msg\">msg</a>)-><a class=\"id\" href=\"#msg_control\">msg_control</a>) :<span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/> (struct <a class=\"id\" href=\"#compat_cmsghdr\">compat_cmsghdr</a> <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#NULL\">NULL</a>)", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#CMSG_COMPAT_OK\">CMSG_COMPAT_OK</a>(<a class=\"id\" href=\"#ucmlen\">ucmlen</a>, <a class=\"id\" href=\"#ucmsg\">ucmsg</a>, <a class=\"id\" href=\"#mhdr\">mhdr</a>) \\", 
"<span class=\"ts\"/>((<a class=\"id\" href=\"#ucmlen\">ucmlen</a>) >= sizeof(struct <a class=\"id\" href=\"#compat_cmsghdr\">compat_cmsghdr</a>) && \\", 
"<span class=\"ts\"/> (<a class=\"id\" href=\"#ucmlen\">ucmlen</a>) <= (unsigned long) \\", 
"<span class=\"ts\"/> ((<a class=\"id\" href=\"#mhdr\">mhdr</a>)-><a class=\"id\" href=\"#msg_controllen\">msg_controllen</a> - \\", 
"<span class=\"ts\"/>  ((char *)(<a class=\"id\" href=\"#ucmsg\">ucmsg</a>) - (char *)(<a class=\"id\" href=\"#mhdr\">mhdr</a>)-><a class=\"id\" href=\"#msg_control\">msg_control</a>)))", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> struct <a class=\"id\" href=\"#compat_cmsghdr\">compat_cmsghdr</a> <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#cmsg_compat_nxthdr\">cmsg_compat_nxthdr</a>(struct <a class=\"id\" href=\"#msghdr\">msghdr</a> *<a class=\"id\" href=\"#msg\">msg</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#compat_cmsghdr\">compat_cmsghdr</a> <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#cmsg\">cmsg</a>, int <a class=\"id\" href=\"#cmsg_len\">cmsg_len</a>)", 
"{", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#ptr\">ptr</a> = (char <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#cmsg\">cmsg</a> + <a class=\"id\" href=\"#CMSG_COMPAT_ALIGN\">CMSG_COMPAT_ALIGN</a>(<a class=\"id\" href=\"#cmsg_len\">cmsg_len</a>);", 
"<span class=\"ts\"/>if ((unsigned long)(<a class=\"id\" href=\"#ptr\">ptr</a> + 1 - (char <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#msg\">msg</a>-><a class=\"id\" href=\"#msg_control\">msg_control</a>) &gt;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#msg\">msg</a>-><a class=\"id\" href=\"#msg_controllen\">msg_controllen</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>return (struct <a class=\"id\" href=\"#compat_cmsghdr\">compat_cmsghdr</a> <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#ptr\">ptr</a>;", 
"}", 
"", 
"<span class=\"comment\">/* There is a lot of hair here because the alignment rules (and</span>", 
"<span class=\"comment\"> * thus placement) of cmsg headers and length are different for</span>", 
"<span class=\"comment\"> * 32-bit apps.  -DaveM</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#cmsghdr_from_user_compat_to_kern\">cmsghdr_from_user_compat_to_kern</a>(struct <a class=\"id\" href=\"#msghdr\">msghdr</a> *<a class=\"id\" href=\"#kmsg\">kmsg</a>, struct <a class=\"id\" href=\"#sock\">sock</a> *<a class=\"id\" href=\"#sk\">sk</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       unsigned char *<a class=\"id\" href=\"#stackbuf\">stackbuf</a>, int <a class=\"id\" href=\"#stackbuf_size\">stackbuf_size</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#compat_cmsghdr\">compat_cmsghdr</a> <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#ucmsg\">ucmsg</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cmsghdr\">cmsghdr</a> *<a class=\"id\" href=\"#kcmsg\">kcmsg</a>, *<a class=\"id\" href=\"#kcmsg_base\">kcmsg_base</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#compat_size_t\">compat_size_t</a> <a class=\"id\" href=\"#ucmlen\">ucmlen</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__kernel_size_t\">__kernel_size_t</a> <a class=\"id\" href=\"#kcmlen\">kcmlen</a>, <a class=\"id\" href=\"#tmp\">tmp</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kcmlen\">kcmlen</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kcmsg_base\">kcmsg_base</a> = <a class=\"id\" href=\"#kcmsg\">kcmsg</a> = (struct <a class=\"id\" href=\"#cmsghdr\">cmsghdr</a> *)<a class=\"id\" href=\"#stackbuf\">stackbuf</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ucmsg\">ucmsg</a> = <a class=\"id\" href=\"#CMSG_COMPAT_FIRSTHDR\">CMSG_COMPAT_FIRSTHDR</a>(<a class=\"id\" href=\"#kmsg\">kmsg</a>);", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#ucmsg\">ucmsg</a> != <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#get_user\">get_user</a>(<a class=\"id\" href=\"#ucmlen\">ucmlen</a>, &amp;<a class=\"id\" href=\"#ucmsg\">ucmsg</a>-><a class=\"id\" href=\"#cmsg_len\">cmsg_len</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Catch bogons. */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#CMSG_COMPAT_OK\">CMSG_COMPAT_OK</a>(<a class=\"id\" href=\"#ucmlen\">ucmlen</a>, <a class=\"id\" href=\"#ucmsg\">ucmsg</a>, <a class=\"id\" href=\"#kmsg\">kmsg</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> = ((<a class=\"id\" href=\"#ucmlen\">ucmlen</a> - <a class=\"id\" href=\"#CMSG_COMPAT_ALIGN\">CMSG_COMPAT_ALIGN</a>(sizeof(*<a class=\"id\" href=\"#ucmsg\">ucmsg</a>))) +", 
"<span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#CMSG_ALIGN\">CMSG_ALIGN</a>(sizeof(struct <a class=\"id\" href=\"#cmsghdr\">cmsghdr</a>)));", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> = <a class=\"id\" href=\"#CMSG_ALIGN\">CMSG_ALIGN</a>(<a class=\"id\" href=\"#tmp\">tmp</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kcmlen\">kcmlen</a> += <a class=\"id\" href=\"#tmp\">tmp</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ucmsg\">ucmsg</a> = <a class=\"id\" href=\"#cmsg_compat_nxthdr\">cmsg_compat_nxthdr</a>(<a class=\"id\" href=\"#kmsg\">kmsg</a>, <a class=\"id\" href=\"#ucmsg\">ucmsg</a>, <a class=\"id\" href=\"#ucmlen\">ucmlen</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#kcmlen\">kcmlen</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* The kcmlen holds the 64-bit version of the control length.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * It may not be modified as we do not stick it into the kmsg</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * until we have successfully copied over all of the data</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * from the user.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#kcmlen\">kcmlen</a> &gt; <a class=\"id\" href=\"#stackbuf_size\">stackbuf_size</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kcmsg_base\">kcmsg_base</a> = <a class=\"id\" href=\"#kcmsg\">kcmsg</a> = <a class=\"id\" href=\"#sock_kmalloc\">sock_kmalloc</a>(<a class=\"id\" href=\"#sk\">sk</a>, <a class=\"id\" href=\"#kcmlen\">kcmlen</a>, <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#kcmsg\">kcmsg</a> == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOBUFS\">ENOBUFS</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Now copy them over neatly. */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(<a class=\"id\" href=\"#kcmsg\">kcmsg</a>, 0, <a class=\"id\" href=\"#kcmlen\">kcmlen</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ucmsg\">ucmsg</a> = <a class=\"id\" href=\"#CMSG_COMPAT_FIRSTHDR\">CMSG_COMPAT_FIRSTHDR</a>(<a class=\"id\" href=\"#kmsg\">kmsg</a>);", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#ucmsg\">ucmsg</a> != <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#__get_user\">__get_user</a>(<a class=\"id\" href=\"#ucmlen\">ucmlen</a>, &amp;<a class=\"id\" href=\"#ucmsg\">ucmsg</a>-><a class=\"id\" href=\"#cmsg_len\">cmsg_len</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#Efault\">Efault</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#CMSG_COMPAT_OK\">CMSG_COMPAT_OK</a>(<a class=\"id\" href=\"#ucmlen\">ucmlen</a>, <a class=\"id\" href=\"#ucmsg\">ucmsg</a>, <a class=\"id\" href=\"#kmsg\">kmsg</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#Einval\">Einval</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> = ((<a class=\"id\" href=\"#ucmlen\">ucmlen</a> - <a class=\"id\" href=\"#CMSG_COMPAT_ALIGN\">CMSG_COMPAT_ALIGN</a>(sizeof(*<a class=\"id\" href=\"#ucmsg\">ucmsg</a>))) +", 
"<span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#CMSG_ALIGN\">CMSG_ALIGN</a>(sizeof(struct <a class=\"id\" href=\"#cmsghdr\">cmsghdr</a>)));", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((char *)<a class=\"id\" href=\"#kcmsg_base\">kcmsg_base</a> + <a class=\"id\" href=\"#kcmlen\">kcmlen</a> - (char *)<a class=\"id\" href=\"#kcmsg\">kcmsg</a> &lt; <a class=\"id\" href=\"#CMSG_ALIGN\">CMSG_ALIGN</a>(<a class=\"id\" href=\"#tmp\">tmp</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#Einval\">Einval</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kcmsg\">kcmsg</a>-><a class=\"id\" href=\"#cmsg_len\">cmsg_len</a> = <a class=\"id\" href=\"#tmp\">tmp</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> = <a class=\"id\" href=\"#CMSG_ALIGN\">CMSG_ALIGN</a>(<a class=\"id\" href=\"#tmp\">tmp</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#__get_user\">__get_user</a>(<a class=\"id\" href=\"#kcmsg\">kcmsg</a>-><a class=\"id\" href=\"#cmsg_level\">cmsg_level</a>, &amp;<a class=\"id\" href=\"#ucmsg\">ucmsg</a>-><a class=\"id\" href=\"#cmsg_level\">cmsg_level</a>) ||", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#__get_user\">__get_user</a>(<a class=\"id\" href=\"#kcmsg\">kcmsg</a>-><a class=\"id\" href=\"#cmsg_type\">cmsg_type</a>, &amp;<a class=\"id\" href=\"#ucmsg\">ucmsg</a>-><a class=\"id\" href=\"#cmsg_type\">cmsg_type</a>) ||", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(<a class=\"id\" href=\"#CMSG_DATA\">CMSG_DATA</a>(<a class=\"id\" href=\"#kcmsg\">kcmsg</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#CMSG_COMPAT_DATA\">CMSG_COMPAT_DATA</a>(<a class=\"id\" href=\"#ucmsg\">ucmsg</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   (<a class=\"id\" href=\"#ucmlen\">ucmlen</a> - <a class=\"id\" href=\"#CMSG_COMPAT_ALIGN\">CMSG_COMPAT_ALIGN</a>(sizeof(*<a class=\"id\" href=\"#ucmsg\">ucmsg</a>)))))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#Efault\">Efault</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Advance. */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kcmsg\">kcmsg</a> = (struct <a class=\"id\" href=\"#cmsghdr\">cmsghdr</a> *)((char *)<a class=\"id\" href=\"#kcmsg\">kcmsg</a> + <a class=\"id\" href=\"#tmp\">tmp</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ucmsg\">ucmsg</a> = <a class=\"id\" href=\"#cmsg_compat_nxthdr\">cmsg_compat_nxthdr</a>(<a class=\"id\" href=\"#kmsg\">kmsg</a>, <a class=\"id\" href=\"#ucmsg\">ucmsg</a>, <a class=\"id\" href=\"#ucmlen\">ucmlen</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Ok, looks like we made it.  Hook it up and return success. */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_control\">msg_control</a> = <a class=\"id\" href=\"#kcmsg_base\">kcmsg_base</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_controllen\">msg_controllen</a> = <a class=\"id\" href=\"#kcmlen\">kcmlen</a>;", 
"<span class=\"ts\"/>return 0;", 
"", 
"<a class=\"id\" href=\"#Einval\">Einval</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<a class=\"id\" href=\"#Efault\">Efault</a>:", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#kcmsg_base\">kcmsg_base</a> != (struct <a class=\"id\" href=\"#cmsghdr\">cmsghdr</a> *)<a class=\"id\" href=\"#stackbuf\">stackbuf</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sock_kfree_s\">sock_kfree_s</a>(<a class=\"id\" href=\"#sk\">sk</a>, <a class=\"id\" href=\"#kcmsg_base\">kcmsg_base</a>, <a class=\"id\" href=\"#kcmlen\">kcmlen</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"}", 
"", 
"int <a class=\"id\" href=\"#put_cmsg_compat\">put_cmsg_compat</a>(struct <a class=\"id\" href=\"#msghdr\">msghdr</a> *<a class=\"id\" href=\"#kmsg\">kmsg</a>, int <a class=\"id\" href=\"#level\">level</a>, int <a class=\"id\" href=\"#type\">type</a>, int <a class=\"id\" href=\"#len\">len</a>, void *<a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#compat_timeval\">compat_timeval</a> <a class=\"id\" href=\"#ctv\">ctv</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#compat_timespec\">compat_timespec</a> <a class=\"id\" href=\"#cts\">cts</a>[3];", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#compat_cmsghdr\">compat_cmsghdr</a> <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#cm\">cm</a> = (struct <a class=\"id\" href=\"#compat_cmsghdr\">compat_cmsghdr</a> <a class=\"id\" href=\"#__user\">__user</a> *) <a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_control\">msg_control</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#compat_cmsghdr\">compat_cmsghdr</a> <a class=\"id\" href=\"#cmhdr\">cmhdr</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#cmlen\">cmlen</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cm\">cm</a> == <a class=\"id\" href=\"#NULL\">NULL</a> || <a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_controllen\">msg_controllen</a> &lt; sizeof(*<a class=\"id\" href=\"#cm\">cm</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_flags\">msg_flags</a> |= <a class=\"id\" href=\"#MSG_CTRUNC\">MSG_CTRUNC</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0; <span class=\"comment\">/* XXX: return error? check spec. */</span>", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#level\">level</a> == <a class=\"id\" href=\"#SOL_SOCKET\">SOL_SOCKET</a> && <a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#SCM_TIMESTAMP\">SCM_TIMESTAMP</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#timeval\">timeval</a> *<a class=\"id\" href=\"#tv\">tv</a> = (struct <a class=\"id\" href=\"#timeval\">timeval</a> *)<a class=\"id\" href=\"#data\">data</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ctv\">ctv</a>.<a class=\"id\" href=\"#tv_sec\">tv_sec</a> = <a class=\"id\" href=\"#tv\">tv</a>-><a class=\"id\" href=\"#tv_sec\">tv_sec</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ctv\">ctv</a>.<a class=\"id\" href=\"#tv_usec\">tv_usec</a> = <a class=\"id\" href=\"#tv\">tv</a>-><a class=\"id\" href=\"#tv_usec\">tv_usec</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#data\">data</a> = &amp;<a class=\"id\" href=\"#ctv\">ctv</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a> = sizeof(<a class=\"id\" href=\"#ctv\">ctv</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#level\">level</a> == <a class=\"id\" href=\"#SOL_SOCKET\">SOL_SOCKET</a> &&", 
"<span class=\"ts\"/>    (<a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#SCM_TIMESTAMPNS\">SCM_TIMESTAMPNS</a> || <a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#SCM_TIMESTAMPING\">SCM_TIMESTAMPING</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#count\">count</a> = <a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#SCM_TIMESTAMPNS\">SCM_TIMESTAMPNS</a> ? 1 : 3;", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#timespec\">timespec</a> *<a class=\"id\" href=\"#ts\">ts</a> = (struct <a class=\"id\" href=\"#timespec\">timespec</a> *)<a class=\"id\" href=\"#data\">data</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#count\">count</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cts\">cts</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#tv_sec\">tv_sec</a> = <a class=\"id\" href=\"#ts\">ts</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#tv_sec\">tv_sec</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cts\">cts</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#tv_nsec\">tv_nsec</a> = <a class=\"id\" href=\"#ts\">ts</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#tv_nsec\">tv_nsec</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#data\">data</a> = &amp;<a class=\"id\" href=\"#cts\">cts</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a> = sizeof(<a class=\"id\" href=\"#cts\">cts</a>[0]) * <a class=\"id\" href=\"#count\">count</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmlen\">cmlen</a> = <a class=\"id\" href=\"#CMSG_COMPAT_LEN\">CMSG_COMPAT_LEN</a>(<a class=\"id\" href=\"#len\">len</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_controllen\">msg_controllen</a> &lt; <a class=\"id\" href=\"#cmlen\">cmlen</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_flags\">msg_flags</a> |= <a class=\"id\" href=\"#MSG_CTRUNC\">MSG_CTRUNC</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cmlen\">cmlen</a> = <a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_controllen\">msg_controllen</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmhdr\">cmhdr</a>.<a class=\"id\" href=\"#cmsg_level\">cmsg_level</a> = <a class=\"id\" href=\"#level\">level</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmhdr\">cmhdr</a>.<a class=\"id\" href=\"#cmsg_type\">cmsg_type</a> = <a class=\"id\" href=\"#type\">type</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmhdr\">cmhdr</a>.<a class=\"id\" href=\"#cmsg_len\">cmsg_len</a> = <a class=\"id\" href=\"#cmlen\">cmlen</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#cm\">cm</a>, &amp;<a class=\"id\" href=\"#cmhdr\">cmhdr</a>, sizeof <a class=\"id\" href=\"#cmhdr\">cmhdr</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#CMSG_COMPAT_DATA\">CMSG_COMPAT_DATA</a>(<a class=\"id\" href=\"#cm\">cm</a>), <a class=\"id\" href=\"#data\">data</a>, <a class=\"id\" href=\"#cmlen\">cmlen</a> - sizeof(struct <a class=\"id\" href=\"#compat_cmsghdr\">compat_cmsghdr</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cmlen\">cmlen</a> = <a class=\"id\" href=\"#CMSG_COMPAT_SPACE\">CMSG_COMPAT_SPACE</a>(<a class=\"id\" href=\"#len\">len</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_controllen\">msg_controllen</a> &lt; <a class=\"id\" href=\"#cmlen\">cmlen</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cmlen\">cmlen</a> = <a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_controllen\">msg_controllen</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_control\">msg_control</a> += <a class=\"id\" href=\"#cmlen\">cmlen</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_controllen\">msg_controllen</a> -= <a class=\"id\" href=\"#cmlen\">cmlen</a>;", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"void <a class=\"id\" href=\"#scm_detach_fds_compat\">scm_detach_fds_compat</a>(struct <a class=\"id\" href=\"#msghdr\">msghdr</a> *<a class=\"id\" href=\"#kmsg\">kmsg</a>, struct <a class=\"id\" href=\"#scm_cookie\">scm_cookie</a> *<a class=\"id\" href=\"#scm\">scm</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#compat_cmsghdr\">compat_cmsghdr</a> <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#cm\">cm</a> = (struct <a class=\"id\" href=\"#compat_cmsghdr\">compat_cmsghdr</a> <a class=\"id\" href=\"#__user\">__user</a> *) <a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_control\">msg_control</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#fdmax\">fdmax</a> = (<a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_controllen\">msg_controllen</a> - sizeof(struct <a class=\"id\" href=\"#compat_cmsghdr\">compat_cmsghdr</a>)) / sizeof(int);", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#fdnum\">fdnum</a> = <a class=\"id\" href=\"#scm\">scm</a>-><a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#count\">count</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#file\">file</a> **<a class=\"id\" href=\"#fp\">fp</a> = <a class=\"id\" href=\"#scm\">scm</a>-><a class=\"id\" href=\"#fp\">fp</a>-><a class=\"id\" href=\"#fp\">fp</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#cmfptr\">cmfptr</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a> = 0, <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#fdnum\">fdnum</a> &lt; <a class=\"id\" href=\"#fdmax\">fdmax</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#fdmax\">fdmax</a> = <a class=\"id\" href=\"#fdnum\">fdnum</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0, <a class=\"id\" href=\"#cmfptr\">cmfptr</a> = (int <a class=\"id\" href=\"#__user\">__user</a> *) <a class=\"id\" href=\"#CMSG_COMPAT_DATA\">CMSG_COMPAT_DATA</a>(<a class=\"id\" href=\"#cm\">cm</a>); <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#fdmax\">fdmax</a>; <a class=\"id\" href=\"#i\">i</a>++, <a class=\"id\" href=\"#cmfptr\">cmfptr</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#new_fd\">new_fd</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#security_file_receive\">security_file_receive</a>(<a class=\"id\" href=\"#fp\">fp</a>[<a class=\"id\" href=\"#i\">i</a>]);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#get_unused_fd_flags\">get_unused_fd_flags</a>(<a class=\"id\" href=\"#MSG_CMSG_CLOEXEC\">MSG_CMSG_CLOEXEC</a> &amp; <a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_flags\">msg_flags</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  ? <a class=\"id\" href=\"#O_CLOEXEC\">O_CLOEXEC</a> : 0);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_fd\">new_fd</a> = <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#put_user\">put_user</a>(<a class=\"id\" href=\"#new_fd\">new_fd</a>, <a class=\"id\" href=\"#cmfptr\">cmfptr</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#put_unused_fd\">put_unused_fd</a>(<a class=\"id\" href=\"#new_fd\">new_fd</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Bump the usage count and install the file. */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#get_file\">get_file</a>(<a class=\"id\" href=\"#fp\">fp</a>[<a class=\"id\" href=\"#i\">i</a>]);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#fd_install\">fd_install</a>(<a class=\"id\" href=\"#new_fd\">new_fd</a>, <a class=\"id\" href=\"#fp\">fp</a>[<a class=\"id\" href=\"#i\">i</a>]);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#i\">i</a> &gt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#cmlen\">cmlen</a> = <a class=\"id\" href=\"#CMSG_COMPAT_LEN\">CMSG_COMPAT_LEN</a>(<a class=\"id\" href=\"#i\">i</a> * sizeof(int));", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#put_user\">put_user</a>(<a class=\"id\" href=\"#SOL_SOCKET\">SOL_SOCKET</a>, &amp;<a class=\"id\" href=\"#cm\">cm</a>-><a class=\"id\" href=\"#cmsg_level\">cmsg_level</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#err\">err</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#put_user\">put_user</a>(<a class=\"id\" href=\"#SCM_RIGHTS\">SCM_RIGHTS</a>, &amp;<a class=\"id\" href=\"#cm\">cm</a>-><a class=\"id\" href=\"#cmsg_type\">cmsg_type</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#err\">err</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#put_user\">put_user</a>(<a class=\"id\" href=\"#cmlen\">cmlen</a>, &amp;<a class=\"id\" href=\"#cm\">cm</a>-><a class=\"id\" href=\"#cmsg_len\">cmsg_len</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#err\">err</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cmlen\">cmlen</a> = <a class=\"id\" href=\"#CMSG_COMPAT_SPACE\">CMSG_COMPAT_SPACE</a>(<a class=\"id\" href=\"#i\">i</a> * sizeof(int));", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_control\">msg_control</a> += <a class=\"id\" href=\"#cmlen\">cmlen</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_controllen\">msg_controllen</a> -= <a class=\"id\" href=\"#cmlen\">cmlen</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#fdnum\">fdnum</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kmsg\">kmsg</a>-><a class=\"id\" href=\"#msg_flags\">msg_flags</a> |= <a class=\"id\" href=\"#MSG_CTRUNC\">MSG_CTRUNC</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * All of the files that fit in the message have had their</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * usage counts incremented, so we just free the list.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__scm_destroy\">__scm_destroy</a>(<a class=\"id\" href=\"#scm\">scm</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * A struct sock_filter is architecture independent.</span>", 
"<span class=\"comment\"> */</span>", 
"struct <a class=\"id\" href=\"#compat_sock_fprog\">compat_sock_fprog</a> {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u16\">u16</a><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#compat_uptr_t\">compat_uptr_t</a><span class=\"ts\"/><a class=\"id\" href=\"#filter\">filter</a>;<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* struct sock_filter * */</span>", 
"};", 
"", 
"static int <a class=\"id\" href=\"#do_set_attach_filter\">do_set_attach_filter</a>(struct <a class=\"id\" href=\"#socket\">socket</a> *<a class=\"id\" href=\"#sock\">sock</a>, int <a class=\"id\" href=\"#level\">level</a>, int <a class=\"id\" href=\"#optname\">optname</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>char <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#optval\">optval</a>, unsigned int <a class=\"id\" href=\"#optlen\">optlen</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#compat_sock_fprog\">compat_sock_fprog</a> <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#fprog32\">fprog32</a> = (struct <a class=\"id\" href=\"#compat_sock_fprog\">compat_sock_fprog</a> <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#optval\">optval</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sock_fprog\">sock_fprog</a> <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#kfprog\">kfprog</a> = <a class=\"id\" href=\"#compat_alloc_user_space\">compat_alloc_user_space</a>(sizeof(struct <a class=\"id\" href=\"#sock_fprog\">sock_fprog</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#compat_uptr_t\">compat_uptr_t</a> <a class=\"id\" href=\"#ptr\">ptr</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u16\">u16</a> <a class=\"id\" href=\"#len\">len</a>;", 
"", 
];
xr_frag_insert('l/d3/b1fb18968294c12f092b5b2e34999a657bb84f.xr', __xr_tmp);
