var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * mmconfig-shared.c - Low-level direct PCI config space access via</span>", 
"<span class=\"comment\"> *                     MMCONFIG - common code between i386 and x86-64.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This code does:</span>", 
"<span class=\"comment\"> * - known chipset handling</span>", 
"<span class=\"comment\"> * - ACPI decoding and validation</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Per-architecture code takes care of the mappings and accesses</span>", 
"<span class=\"comment\"> * themselves.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#pci\">pci</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#init\">init</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#acpi\">acpi</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#sfi_acpi\">sfi_acpi</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#bitmap\">bitmap</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#dmi\">dmi</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#slab\">slab</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#e820\">e820</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#pci_x86\">pci_x86</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#acpi\">acpi</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"PCI: \"", 
"", 
"<span class=\"comment\">/* Indicate if the mmcfg resources have been placed into the resource table. */</span>", 
"static int <a class=\"id\" href=\"#__initdata\">__initdata</a> <a class=\"id\" href=\"#pci_mmcfg_resources_inserted\">pci_mmcfg_resources_inserted</a>;", 
"", 
"<a class=\"id\" href=\"#LIST_HEAD\">LIST_HEAD</a>(<a class=\"id\" href=\"#pci_mmcfg_list\">pci_mmcfg_list</a>);", 
"", 
"static <a class=\"id\" href=\"#__init\">__init</a> void <a class=\"id\" href=\"#pci_mmconfig_remove\">pci_mmconfig_remove</a>(struct <a class=\"id\" href=\"#pci_mmcfg_region\">pci_mmcfg_region</a> *<a class=\"id\" href=\"#cfg\">cfg</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#res\">res</a>.<a class=\"id\" href=\"#parent\">parent</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#release_resource\">release_resource</a>(&amp;<a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#res\">res</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_del\">list_del</a>(&amp;<a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#list\">list</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#cfg\">cfg</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#__init\">__init</a> void <a class=\"id\" href=\"#free_all_mmcfg\">free_all_mmcfg</a>(void)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_mmcfg_region\">pci_mmcfg_region</a> *<a class=\"id\" href=\"#cfg\">cfg</a>, *<a class=\"id\" href=\"#tmp\">tmp</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_mmcfg_arch_free\">pci_mmcfg_arch_free</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry_safe\">list_for_each_entry_safe</a>(<a class=\"id\" href=\"#cfg\">cfg</a>, <a class=\"id\" href=\"#tmp\">tmp</a>, &amp;<a class=\"id\" href=\"#pci_mmcfg_list\">pci_mmcfg_list</a>, <a class=\"id\" href=\"#list\">list</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pci_mmconfig_remove\">pci_mmconfig_remove</a>(<a class=\"id\" href=\"#cfg\">cfg</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#__init\">__init</a> void <a class=\"id\" href=\"#list_add_sorted\">list_add_sorted</a>(struct <a class=\"id\" href=\"#pci_mmcfg_region\">pci_mmcfg_region</a> *<a class=\"id\" href=\"#new\">new</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_mmcfg_region\">pci_mmcfg_region</a> *<a class=\"id\" href=\"#cfg\">cfg</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* keep list sorted by segment and starting bus number */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#cfg\">cfg</a>, &amp;<a class=\"id\" href=\"#pci_mmcfg_list\">pci_mmcfg_list</a>, <a class=\"id\" href=\"#list\">list</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#segment\">segment</a> &gt; <a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#segment\">segment</a> ||", 
"<span class=\"ts\"/><span class=\"ts\"/>    (<a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#segment\">segment</a> == <a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#segment\">segment</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/>     <a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#start_bus\">start_bus</a> >= <a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#start_bus\">start_bus</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_add_tail\">list_add_tail</a>(&amp;<a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#list\">list</a>, &amp;<a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#list\">list</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_add_tail\">list_add_tail</a>(&amp;<a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#list\">list</a>, &amp;<a class=\"id\" href=\"#pci_mmcfg_list\">pci_mmcfg_list</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#__init\">__init</a> struct <a class=\"id\" href=\"#pci_mmcfg_region\">pci_mmcfg_region</a> *<a class=\"id\" href=\"#pci_mmconfig_add\">pci_mmconfig_add</a>(int <a class=\"id\" href=\"#segment\">segment</a>, int <a class=\"id\" href=\"#start\">start</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#end\">end</a>, <a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#addr\">addr</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_mmcfg_region\">pci_mmcfg_region</a> *<a class=\"id\" href=\"#new\">new</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#num_buses\">num_buses</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#resource\">resource</a> *<a class=\"id\" href=\"#res\">res</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#addr\">addr</a> == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#new\">new</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof(*<a class=\"id\" href=\"#new\">new</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#new\">new</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#address\">address</a> = <a class=\"id\" href=\"#addr\">addr</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#segment\">segment</a> = <a class=\"id\" href=\"#segment\">segment</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#start_bus\">start_bus</a> = <a class=\"id\" href=\"#start\">start</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#end_bus\">end_bus</a> = <a class=\"id\" href=\"#end\">end</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_add_sorted\">list_add_sorted</a>(<a class=\"id\" href=\"#new\">new</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#num_buses\">num_buses</a> = <a class=\"id\" href=\"#end\">end</a> - <a class=\"id\" href=\"#start\">start</a> + 1;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#res\">res</a> = &amp;<a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#res\">res</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#res\">res</a>-><a class=\"id\" href=\"#start\">start</a> = <a class=\"id\" href=\"#addr\">addr</a> + <a class=\"id\" href=\"#PCI_MMCFG_BUS_OFFSET\">PCI_MMCFG_BUS_OFFSET</a>(<a class=\"id\" href=\"#start\">start</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#res\">res</a>-><a class=\"id\" href=\"#end\">end</a> = <a class=\"id\" href=\"#addr\">addr</a> + <a class=\"id\" href=\"#PCI_MMCFG_BUS_OFFSET\">PCI_MMCFG_BUS_OFFSET</a>(<a class=\"id\" href=\"#num_buses\">num_buses</a>) - 1;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#res\">res</a>-><a class=\"id\" href=\"#flags\">flags</a> = <a class=\"id\" href=\"#IORESOURCE_MEM\">IORESOURCE_MEM</a> | <a class=\"id\" href=\"#IORESOURCE_BUSY\">IORESOURCE_BUSY</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#snprintf\">snprintf</a>(<a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#PCI_MMCFG_RESOURCE_NAME_LEN\">PCI_MMCFG_RESOURCE_NAME_LEN</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/> \"PCI MMCONFIG %04x [bus %02x-%02x]\", <a class=\"id\" href=\"#segment\">segment</a>, <a class=\"id\" href=\"#start\">start</a>, <a class=\"id\" href=\"#end\">end</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#res\">res</a>-><a class=\"id\" href=\"#name\">name</a> = <a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#name\">name</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a> \"MMCONFIG for domain %04x [bus %02x-%02x] at \"", 
"<span class=\"ts\"/>       \"%pR (base %#lx)\\n\", <a class=\"id\" href=\"#segment\">segment</a>, <a class=\"id\" href=\"#start\">start</a>, <a class=\"id\" href=\"#end\">end</a>, &amp;<a class=\"id\" href=\"#new\">new</a>-><a class=\"id\" href=\"#res\">res</a>,", 
"<span class=\"ts\"/>       (unsigned long) <a class=\"id\" href=\"#addr\">addr</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#new\">new</a>;", 
"}", 
"", 
"struct <a class=\"id\" href=\"#pci_mmcfg_region\">pci_mmcfg_region</a> *<a class=\"id\" href=\"#pci_mmconfig_lookup\">pci_mmconfig_lookup</a>(int <a class=\"id\" href=\"#segment\">segment</a>, int <a class=\"id\" href=\"#bus\">bus</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pci_mmcfg_region\">pci_mmcfg_region</a> *<a class=\"id\" href=\"#cfg\">cfg</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#cfg\">cfg</a>, &amp;<a class=\"id\" href=\"#pci_mmcfg_list\">pci_mmcfg_list</a>, <a class=\"id\" href=\"#list\">list</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#segment\">segment</a> == <a class=\"id\" href=\"#segment\">segment</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#start_bus\">start_bus</a> <= <a class=\"id\" href=\"#bus\">bus</a> && <a class=\"id\" href=\"#bus\">bus</a> <= <a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#end_bus\">end_bus</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#cfg\">cfg</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"}", 
"", 
"static const char <a class=\"id\" href=\"#__init\">__init</a> *<a class=\"id\" href=\"#pci_mmcfg_e7520\">pci_mmcfg_e7520</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#win\">win</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_pci_ops\">raw_pci_ops</a>-><a class=\"id\" href=\"#read\">read</a>(0, 0, <a class=\"id\" href=\"#PCI_DEVFN\">PCI_DEVFN</a>(0, 0), 0xce, 2, &amp;<a class=\"id\" href=\"#win\">win</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#win\">win</a> = <a class=\"id\" href=\"#win\">win</a> &amp; 0xf000;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#win\">win</a> == 0x0000 || <a class=\"id\" href=\"#win\">win</a> == 0xf000)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pci_mmconfig_add\">pci_mmconfig_add</a>(0, 0, 255, <a class=\"id\" href=\"#win\">win</a> << 16) == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/>return \"Intel Corporation E7520 Memory Controller Hub\";", 
"}", 
"", 
"static const char <a class=\"id\" href=\"#__init\">__init</a> *<a class=\"id\" href=\"#pci_mmcfg_intel_945\">pci_mmcfg_intel_945</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#pciexbar\">pciexbar</a>, <a class=\"id\" href=\"#mask\">mask</a> = 0, <a class=\"id\" href=\"#len\">len</a> = 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_pci_ops\">raw_pci_ops</a>-><a class=\"id\" href=\"#read\">read</a>(0, 0, <a class=\"id\" href=\"#PCI_DEVFN\">PCI_DEVFN</a>(0, 0), 0x48, 4, &amp;<a class=\"id\" href=\"#pciexbar\">pciexbar</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Enable bit */</span>", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#pciexbar\">pciexbar</a> &amp; 1))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Size bits */</span>", 
"<span class=\"ts\"/>switch ((<a class=\"id\" href=\"#pciexbar\">pciexbar</a> >> 1) &amp; 3) {", 
"<span class=\"ts\"/>case 0:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mask\">mask</a> = 0xf0000000U;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a>  = 0x10000000U;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case 1:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mask\">mask</a> = 0xf8000000U;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a>  = 0x08000000U;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case 2:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mask\">mask</a> = 0xfc000000U;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a>  = 0x04000000U;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Errata #2, things break when not aligned on a 256Mb boundary */</span>", 
"<span class=\"ts\"/><span class=\"comment\">/* Can only happen in 64M/128M mode */</span>", 
"", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#pciexbar\">pciexbar</a> &amp; <a class=\"id\" href=\"#mask\">mask</a>) &amp; 0x0fffffffU)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Don't hit the APIC registers and their friends */</span>", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#pciexbar\">pciexbar</a> &amp; <a class=\"id\" href=\"#mask\">mask</a>) >= 0xf0000000U)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#pci_mmconfig_add\">pci_mmconfig_add</a>(0, 0, (<a class=\"id\" href=\"#len\">len</a> >> 20) - 1, <a class=\"id\" href=\"#pciexbar\">pciexbar</a> &amp; <a class=\"id\" href=\"#mask\">mask</a>) == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/>return \"Intel Corporation 945G/GZ/P/PL Express Memory Controller Hub\";", 
"}", 
"", 
"static const char <a class=\"id\" href=\"#__init\">__init</a> *<a class=\"id\" href=\"#pci_mmcfg_amd_fam10h\">pci_mmcfg_amd_fam10h</a>(void)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#low\">low</a>, <a class=\"id\" href=\"#high\">high</a>, <a class=\"id\" href=\"#address\">address</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#base\">base</a>, <a class=\"id\" href=\"#msr\">msr</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"<span class=\"ts\"/>unsigned <a class=\"id\" href=\"#segnbits\">segnbits</a> = 0, <a class=\"id\" href=\"#busnbits\">busnbits</a>, <a class=\"id\" href=\"#end_bus\">end_bus</a>;", 
"", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#pci_probe\">pci_probe</a> &amp; <a class=\"id\" href=\"#PCI_CHECK_ENABLE_AMD_MMCONF\">PCI_CHECK_ENABLE_AMD_MMCONF</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#address\">address</a> = <a class=\"id\" href=\"#MSR_FAM10H_MMIO_CONF_BASE\">MSR_FAM10H_MMIO_CONF_BASE</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rdmsr_safe\">rdmsr_safe</a>(<a class=\"id\" href=\"#address\">address</a>, &amp;<a class=\"id\" href=\"#low\">low</a>, &amp;<a class=\"id\" href=\"#high\">high</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#msr\">msr</a> = <a class=\"id\" href=\"#high\">high</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#msr\">msr</a> <<= 32;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#msr\">msr</a> |= <a class=\"id\" href=\"#low\">low</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* mmconfig is not enable */</span>", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#msr\">msr</a> &amp; <a class=\"id\" href=\"#FAM10H_MMIO_CONF_ENABLE\">FAM10H_MMIO_CONF_ENABLE</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#base\">base</a> = <a class=\"id\" href=\"#msr\">msr</a> &amp; (<a class=\"id\" href=\"#FAM10H_MMIO_CONF_BASE_MASK\">FAM10H_MMIO_CONF_BASE_MASK</a><<<a class=\"id\" href=\"#FAM10H_MMIO_CONF_BASE_SHIFT\">FAM10H_MMIO_CONF_BASE_SHIFT</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#busnbits\">busnbits</a> = (<a class=\"id\" href=\"#msr\">msr</a> >> <a class=\"id\" href=\"#FAM10H_MMIO_CONF_BUSRANGE_SHIFT\">FAM10H_MMIO_CONF_BUSRANGE_SHIFT</a>) &amp;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#FAM10H_MMIO_CONF_BUSRANGE_MASK\">FAM10H_MMIO_CONF_BUSRANGE_MASK</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * only handle bus 0 ?</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * need to skip it</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#busnbits\">busnbits</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#busnbits\">busnbits</a> &gt; 8) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#segnbits\">segnbits</a> = <a class=\"id\" href=\"#busnbits\">busnbits</a> - 8;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#busnbits\">busnbits</a> = 8;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#end_bus\">end_bus</a> = (1 << <a class=\"id\" href=\"#busnbits\">busnbits</a>) - 1;", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; (1 << <a class=\"id\" href=\"#segnbits\">segnbits</a>); <a class=\"id\" href=\"#i\">i</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#pci_mmconfig_add\">pci_mmconfig_add</a>(<a class=\"id\" href=\"#i\">i</a>, 0, <a class=\"id\" href=\"#end_bus\">end_bus</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     <a class=\"id\" href=\"#base\">base</a> + (1<<28) * <a class=\"id\" href=\"#i\">i</a>) == <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#free_all_mmcfg\">free_all_mmcfg</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return \"AMD Family 10h NB\";", 
"}", 
"", 
"static <a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#__initdata\">__initdata</a> <a class=\"id\" href=\"#mcp55_checked\">mcp55_checked</a>;", 
"static const char <a class=\"id\" href=\"#__init\">__init</a> *<a class=\"id\" href=\"#pci_mmcfg_nvidia_mcp55\">pci_mmcfg_nvidia_mcp55</a>(void)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#bus\">bus</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#mcp55_mmconf_found\">mcp55_mmconf_found</a> = 0;", 
"", 
];
xr_frag_insert('l/d5/2037fdbb222fb4703e1b95085079da1555074c.xr', __xr_tmp);
