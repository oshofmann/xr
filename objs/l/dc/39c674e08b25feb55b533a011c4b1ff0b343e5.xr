var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * sys.c - pseudo-bus for system 'devices' (cpus, PICs, timers, etc)</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Copyright (c) 2002-3 Patrick Mochel</span>", 
"<span class=\"comment\"> *               2002-3 Open Source Development Lab</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This file is released under the GPLv2</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This exports a 'system' bus type.</span>", 
"<span class=\"comment\"> * By default, a 'sys' bus gets added to the root of the system. There will</span>", 
"<span class=\"comment\"> * always be core system devices. Devices can use sysdev_register() to</span>", 
"<span class=\"comment\"> * add themselves as children of the system bus.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#sysdev\">sysdev</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#err\">err</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kernel\">kernel</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#init\">init</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#string\">string</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#pm\">pm</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#device\">device</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#mutex\">mutex</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#interrupt\">interrupt</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> \"base.h\"", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#to_sysdev\">to_sysdev</a>(<a class=\"id\" href=\"#k\">k</a>) <a class=\"id\" href=\"#container_of\">container_of</a>(<a class=\"id\" href=\"#k\">k</a>, struct <a class=\"id\" href=\"#sys_device\">sys_device</a>, <a class=\"id\" href=\"#kobj\">kobj</a>)", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#to_sysdev_attr\">to_sysdev_attr</a>(<a class=\"id\" href=\"#a\">a</a>) <a class=\"id\" href=\"#container_of\">container_of</a>(<a class=\"id\" href=\"#a\">a</a>, struct <a class=\"id\" href=\"#sysdev_attribute\">sysdev_attribute</a>, <a class=\"id\" href=\"#attr\">attr</a>)", 
"", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a>", 
"<a class=\"id\" href=\"#sysdev_show\">sysdev_show</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>, struct <a class=\"id\" href=\"#attribute\">attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buffer\">buffer</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sys_device\">sys_device</a> *<a class=\"id\" href=\"#sysdev\">sysdev</a> = <a class=\"id\" href=\"#to_sysdev\">to_sysdev</a>(<a class=\"id\" href=\"#kobj\">kobj</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysdev_attribute\">sysdev_attribute</a> *<a class=\"id\" href=\"#sysdev_attr\">sysdev_attr</a> = <a class=\"id\" href=\"#to_sysdev_attr\">to_sysdev_attr</a>(<a class=\"id\" href=\"#attr\">attr</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sysdev_attr\">sysdev_attr</a>-><a class=\"id\" href=\"#show\">show</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#sysdev_attr\">sysdev_attr</a>-><a class=\"id\" href=\"#show\">show</a>(<a class=\"id\" href=\"#sysdev\">sysdev</a>, <a class=\"id\" href=\"#sysdev_attr\">sysdev_attr</a>, <a class=\"id\" href=\"#buffer\">buffer</a>);", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"}", 
"", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a>", 
"<a class=\"id\" href=\"#sysdev_store\">sysdev_store</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>, struct <a class=\"id\" href=\"#attribute\">attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/>     const char *<a class=\"id\" href=\"#buffer\">buffer</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sys_device\">sys_device</a> *<a class=\"id\" href=\"#sysdev\">sysdev</a> = <a class=\"id\" href=\"#to_sysdev\">to_sysdev</a>(<a class=\"id\" href=\"#kobj\">kobj</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysdev_attribute\">sysdev_attribute</a> *<a class=\"id\" href=\"#sysdev_attr\">sysdev_attr</a> = <a class=\"id\" href=\"#to_sysdev_attr\">to_sysdev_attr</a>(<a class=\"id\" href=\"#attr\">attr</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sysdev_attr\">sysdev_attr</a>-><a class=\"id\" href=\"#store\">store</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#sysdev_attr\">sysdev_attr</a>-><a class=\"id\" href=\"#store\">store</a>(<a class=\"id\" href=\"#sysdev\">sysdev</a>, <a class=\"id\" href=\"#sysdev_attr\">sysdev_attr</a>, <a class=\"id\" href=\"#buffer\">buffer</a>, <a class=\"id\" href=\"#count\">count</a>);", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"}", 
"", 
"static const struct <a class=\"id\" href=\"#sysfs_ops\">sysfs_ops</a> <a class=\"id\" href=\"#sysfs_ops\">sysfs_ops</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#show\">show</a><span class=\"ts\"/>= <a class=\"id\" href=\"#sysdev_show\">sysdev_show</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#store\">store</a><span class=\"ts\"/>= <a class=\"id\" href=\"#sysdev_store\">sysdev_store</a>,", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#kobj_type\">kobj_type</a> <a class=\"id\" href=\"#ktype_sysdev\">ktype_sysdev</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#sysfs_ops\">sysfs_ops</a><span class=\"ts\"/>= &amp;<a class=\"id\" href=\"#sysfs_ops\">sysfs_ops</a>,", 
"};", 
"", 
"", 
"int <a class=\"id\" href=\"#sysdev_create_file\">sysdev_create_file</a>(struct <a class=\"id\" href=\"#sys_device\">sys_device</a> *<a class=\"id\" href=\"#s\">s</a>, struct <a class=\"id\" href=\"#sysdev_attribute\">sysdev_attribute</a> *<a class=\"id\" href=\"#a\">a</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sysfs_create_file\">sysfs_create_file</a>(&amp;<a class=\"id\" href=\"#s\">s</a>-><a class=\"id\" href=\"#kobj\">kobj</a>, &amp;<a class=\"id\" href=\"#a\">a</a>-><a class=\"id\" href=\"#attr\">attr</a>);", 
"}", 
"", 
"", 
"void <a class=\"id\" href=\"#sysdev_remove_file\">sysdev_remove_file</a>(struct <a class=\"id\" href=\"#sys_device\">sys_device</a> *<a class=\"id\" href=\"#s\">s</a>, struct <a class=\"id\" href=\"#sysdev_attribute\">sysdev_attribute</a> *<a class=\"id\" href=\"#a\">a</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_remove_file\">sysfs_remove_file</a>(&amp;<a class=\"id\" href=\"#s\">s</a>-><a class=\"id\" href=\"#kobj\">kobj</a>, &amp;<a class=\"id\" href=\"#a\">a</a>-><a class=\"id\" href=\"#attr\">attr</a>);", 
"}", 
"", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#sysdev_create_file\">sysdev_create_file</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#sysdev_remove_file\">sysdev_remove_file</a>);", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#to_sysdev_class\">to_sysdev_class</a>(<a class=\"id\" href=\"#k\">k</a>) <a class=\"id\" href=\"#container_of\">container_of</a>(<a class=\"id\" href=\"#k\">k</a>, struct <a class=\"id\" href=\"#sysdev_class\">sysdev_class</a>, <a class=\"id\" href=\"#kset\">kset</a>.<a class=\"id\" href=\"#kobj\">kobj</a>)", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#to_sysdev_class_attr\">to_sysdev_class_attr</a>(<a class=\"id\" href=\"#a\">a</a>) <a class=\"id\" href=\"#container_of\">container_of</a>(<a class=\"id\" href=\"#a\">a</a>, \\", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysdev_class_attribute\">sysdev_class_attribute</a>, <a class=\"id\" href=\"#attr\">attr</a>)", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#sysdev_class_show\">sysdev_class_show</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>, struct <a class=\"id\" href=\"#attribute\">attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> char *<a class=\"id\" href=\"#buffer\">buffer</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysdev_class\">sysdev_class</a> *<a class=\"id\" href=\"#class\">class</a> = <a class=\"id\" href=\"#to_sysdev_class\">to_sysdev_class</a>(<a class=\"id\" href=\"#kobj\">kobj</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysdev_class_attribute\">sysdev_class_attribute</a> *<a class=\"id\" href=\"#class_attr\">class_attr</a> = <a class=\"id\" href=\"#to_sysdev_class_attr\">to_sysdev_class_attr</a>(<a class=\"id\" href=\"#attr\">attr</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#class_attr\">class_attr</a>-><a class=\"id\" href=\"#show\">show</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#class_attr\">class_attr</a>-><a class=\"id\" href=\"#show\">show</a>(<a class=\"id\" href=\"#class\">class</a>, <a class=\"id\" href=\"#class_attr\">class_attr</a>, <a class=\"id\" href=\"#buffer\">buffer</a>);", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#sysdev_class_store\">sysdev_class_store</a>(struct <a class=\"id\" href=\"#kobject\">kobject</a> *<a class=\"id\" href=\"#kobj\">kobj</a>, struct <a class=\"id\" href=\"#attribute\">attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  const char *<a class=\"id\" href=\"#buffer\">buffer</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysdev_class\">sysdev_class</a> *<a class=\"id\" href=\"#class\">class</a> = <a class=\"id\" href=\"#to_sysdev_class\">to_sysdev_class</a>(<a class=\"id\" href=\"#kobj\">kobj</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysdev_class_attribute\">sysdev_class_attribute</a> *<a class=\"id\" href=\"#class_attr\">class_attr</a> = <a class=\"id\" href=\"#to_sysdev_class_attr\">to_sysdev_class_attr</a>(<a class=\"id\" href=\"#attr\">attr</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#class_attr\">class_attr</a>-><a class=\"id\" href=\"#store\">store</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#class_attr\">class_attr</a>-><a class=\"id\" href=\"#store\">store</a>(<a class=\"id\" href=\"#class\">class</a>, <a class=\"id\" href=\"#class_attr\">class_attr</a>, <a class=\"id\" href=\"#buffer\">buffer</a>, <a class=\"id\" href=\"#count\">count</a>);", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"}", 
"", 
"static const struct <a class=\"id\" href=\"#sysfs_ops\">sysfs_ops</a> <a class=\"id\" href=\"#sysfs_class_ops\">sysfs_class_ops</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#show\">show</a><span class=\"ts\"/>= <a class=\"id\" href=\"#sysdev_class_show\">sysdev_class_show</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#store\">store</a><span class=\"ts\"/>= <a class=\"id\" href=\"#sysdev_class_store\">sysdev_class_store</a>,", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#kobj_type\">kobj_type</a> <a class=\"id\" href=\"#ktype_sysdev_class\">ktype_sysdev_class</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#sysfs_ops\">sysfs_ops</a><span class=\"ts\"/>= &amp;<a class=\"id\" href=\"#sysfs_class_ops\">sysfs_class_ops</a>,", 
"};", 
"", 
"int <a class=\"id\" href=\"#sysdev_class_create_file\">sysdev_class_create_file</a>(struct <a class=\"id\" href=\"#sysdev_class\">sysdev_class</a> *<a class=\"id\" href=\"#c\">c</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     struct <a class=\"id\" href=\"#sysdev_class_attribute\">sysdev_class_attribute</a> *<a class=\"id\" href=\"#a\">a</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sysfs_create_file\">sysfs_create_file</a>(&amp;<a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#kset\">kset</a>.<a class=\"id\" href=\"#kobj\">kobj</a>, &amp;<a class=\"id\" href=\"#a\">a</a>-><a class=\"id\" href=\"#attr\">attr</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#sysdev_class_create_file\">sysdev_class_create_file</a>);", 
"", 
"void <a class=\"id\" href=\"#sysdev_class_remove_file\">sysdev_class_remove_file</a>(struct <a class=\"id\" href=\"#sysdev_class\">sysdev_class</a> *<a class=\"id\" href=\"#c\">c</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      struct <a class=\"id\" href=\"#sysdev_class_attribute\">sysdev_class_attribute</a> *<a class=\"id\" href=\"#a\">a</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_remove_file\">sysfs_remove_file</a>(&amp;<a class=\"id\" href=\"#c\">c</a>-><a class=\"id\" href=\"#kset\">kset</a>.<a class=\"id\" href=\"#kobj\">kobj</a>, &amp;<a class=\"id\" href=\"#a\">a</a>-><a class=\"id\" href=\"#attr\">attr</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#sysdev_class_remove_file\">sysdev_class_remove_file</a>);", 
"", 
"static struct <a class=\"id\" href=\"#kset\">kset</a> *<a class=\"id\" href=\"#system_kset\">system_kset</a>;", 
"", 
"int <a class=\"id\" href=\"#sysdev_class_register\">sysdev_class_register</a>(struct <a class=\"id\" href=\"#sysdev_class\">sysdev_class</a> *<a class=\"id\" href=\"#cls\">cls</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pr_debug\">pr_debug</a>(\"Registering sysdev class '%s'\\n\", <a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#name\">name</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#INIT_LIST_HEAD\">INIT_LIST_HEAD</a>(&amp;<a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#drivers\">drivers</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(&amp;<a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#kset\">kset</a>.<a class=\"id\" href=\"#kobj\">kobj</a>, 0x00, sizeof(struct <a class=\"id\" href=\"#kobject\">kobject</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#kset\">kset</a>.<a class=\"id\" href=\"#kobj\">kobj</a>.<a class=\"id\" href=\"#parent\">parent</a> = &amp;<a class=\"id\" href=\"#system_kset\">system_kset</a>-><a class=\"id\" href=\"#kobj\">kobj</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#kset\">kset</a>.<a class=\"id\" href=\"#kobj\">kobj</a>.<a class=\"id\" href=\"#ktype\">ktype</a> = &amp;<a class=\"id\" href=\"#ktype_sysdev_class\">ktype_sysdev_class</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#kset\">kset</a>.<a class=\"id\" href=\"#kobj\">kobj</a>.<a class=\"id\" href=\"#kset\">kset</a> = <a class=\"id\" href=\"#system_kset\">system_kset</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#kobject_set_name\">kobject_set_name</a>(&amp;<a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#kset\">kset</a>.<a class=\"id\" href=\"#kobj\">kobj</a>, \"%s\", <a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#kset_register\">kset_register</a>(&amp;<a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#kset\">kset</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#retval\">retval</a> && <a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#attrs\">attrs</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#sysfs_create_files\">sysfs_create_files</a>(&amp;<a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#kset\">kset</a>.<a class=\"id\" href=\"#kobj\">kobj</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    (const struct <a class=\"id\" href=\"#attribute\">attribute</a> **)<a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#attrs\">attrs</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"}", 
"", 
"void <a class=\"id\" href=\"#sysdev_class_unregister\">sysdev_class_unregister</a>(struct <a class=\"id\" href=\"#sysdev_class\">sysdev_class</a> *<a class=\"id\" href=\"#cls\">cls</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pr_debug\">pr_debug</a>(\"Unregistering sysdev class '%s'\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#kobject_name\">kobject_name</a>(&amp;<a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#kset\">kset</a>.<a class=\"id\" href=\"#kobj\">kobj</a>));", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#attrs\">attrs</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sysfs_remove_files\">sysfs_remove_files</a>(&amp;<a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#kset\">kset</a>.<a class=\"id\" href=\"#kobj\">kobj</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   (const struct <a class=\"id\" href=\"#attribute\">attribute</a> **)<a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#attrs\">attrs</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kset_unregister\">kset_unregister</a>(&amp;<a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#kset\">kset</a>);", 
"}", 
"", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#sysdev_class_register\">sysdev_class_register</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#sysdev_class_unregister\">sysdev_class_unregister</a>);", 
"", 
"static <a class=\"id\" href=\"#DEFINE_MUTEX\">DEFINE_MUTEX</a>(<a class=\"id\" href=\"#sysdev_drivers_lock\">sysdev_drivers_lock</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>sysdev_driver_register - Register auxillary driver</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@cls:<span class=\"ts\"/>Device class driver belongs to.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@drv:<span class=\"ts\"/>Driver.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@drv is inserted into @cls-&gt;drivers to be</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>called on each operation on devices of that class. The refcount</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>of @cls is incremented.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"int <a class=\"id\" href=\"#sysdev_driver_register\">sysdev_driver_register</a>(struct <a class=\"id\" href=\"#sysdev_class\">sysdev_class</a> *<a class=\"id\" href=\"#cls\">cls</a>, struct <a class=\"id\" href=\"#sysdev_driver\">sysdev_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a> = 0;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#cls\">cls</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#WARN\">WARN</a>(1, <a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> \"sysdev: invalid class passed to \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"sysdev_driver_register!\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Check whether this driver has already been added to a class. */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#entry\">entry</a>.<a class=\"id\" href=\"#next\">next</a> && !<a class=\"id\" href=\"#list_empty\">list_empty</a>(&amp;<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#entry\">entry</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#WARN\">WARN</a>(1, <a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> \"sysdev: class %s: driver (%p) has already\"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\" been registered to a class, something is wrong, but \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"will forge on!\\n\", <a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#drv\">drv</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#sysdev_drivers_lock\">sysdev_drivers_lock</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cls\">cls</a> && <a class=\"id\" href=\"#kset_get\">kset_get</a>(&amp;<a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#kset\">kset</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_add_tail\">list_add_tail</a>(&amp;<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#entry\">entry</a>, &amp;<a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#drivers\">drivers</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* If devices of this class already exist, tell the driver */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#add\">add</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#sys_device\">sys_device</a> *<a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#kset\">kset</a>.<a class=\"id\" href=\"#list\">list</a>, <a class=\"id\" href=\"#kobj\">kobj</a>.<a class=\"id\" href=\"#entry\">entry</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#add\">add</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#WARN\">WARN</a>(1, <a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"%s: invalid device class\\n\", <a class=\"id\" href=\"#__func__\">__func__</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#sysdev_drivers_lock\">sysdev_drivers_lock</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"}", 
"", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>sysdev_driver_unregister - Remove an auxillary driver.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@cls:<span class=\"ts\"/>Class driver belongs to.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@drv:<span class=\"ts\"/>Driver.</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#sysdev_driver_unregister\">sysdev_driver_unregister</a>(struct <a class=\"id\" href=\"#sysdev_class\">sysdev_class</a> *<a class=\"id\" href=\"#cls\">cls</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      struct <a class=\"id\" href=\"#sysdev_driver\">sysdev_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#sysdev_drivers_lock\">sysdev_drivers_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#list_del_init\">list_del_init</a>(&amp;<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#entry\">entry</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cls\">cls</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#remove\">remove</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#sys_device\">sys_device</a> *<a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry\">list_for_each_entry</a>(<a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#kset\">kset</a>.<a class=\"id\" href=\"#list\">list</a>, <a class=\"id\" href=\"#kobj\">kobj</a>.<a class=\"id\" href=\"#entry\">entry</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#drv\">drv</a>-><a class=\"id\" href=\"#remove\">remove</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kset_put\">kset_put</a>(&amp;<a class=\"id\" href=\"#cls\">cls</a>-><a class=\"id\" href=\"#kset\">kset</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#sysdev_drivers_lock\">sysdev_drivers_lock</a>);", 
"}", 
"", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#sysdev_driver_register\">sysdev_driver_register</a>);", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#sysdev_driver_unregister\">sysdev_driver_unregister</a>);", 
"", 
"", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>sysdev_register - add a system device to the tree</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@sysdev:<span class=\"ts\"/>device in question</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> */</span>", 
"int <a class=\"id\" href=\"#sysdev_register\">sysdev_register</a>(struct <a class=\"id\" href=\"#sys_device\">sys_device</a> *<a class=\"id\" href=\"#sysdev\">sysdev</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sysdev_class\">sysdev_class</a> *<a class=\"id\" href=\"#cls\">cls</a> = <a class=\"id\" href=\"#sysdev\">sysdev</a>-><a class=\"id\" href=\"#cls\">cls</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#cls\">cls</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pr_debug\">pr_debug</a>(\"Registering sys device of class '%s'\\n\",", 
];
xr_frag_insert('l/dc/39c674e08b25feb55b533a011c4b1ff0b343e5.xr', __xr_tmp);
