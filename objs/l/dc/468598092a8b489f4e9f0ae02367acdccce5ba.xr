var __xr_tmp = [
"<a class=\"id\" href=\"#module_param_named\">module_param_named</a>(<a class=\"id\" href=\"#scroll\">scroll</a>, <a class=\"id\" href=\"#atkbd_scroll\">atkbd_scroll</a>, <a class=\"id\" href=\"#bool\">bool</a>, 0);", 
"<a class=\"id\" href=\"#MODULE_PARM_DESC\">MODULE_PARM_DESC</a>(<a class=\"id\" href=\"#scroll\">scroll</a>, \"Enable scroll-wheel on MS Office and similar keyboards\");", 
"", 
"static <a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#atkbd_extra\">atkbd_extra</a>;", 
"<a class=\"id\" href=\"#module_param_named\">module_param_named</a>(<a class=\"id\" href=\"#extra\">extra</a>, <a class=\"id\" href=\"#atkbd_extra\">atkbd_extra</a>, <a class=\"id\" href=\"#bool\">bool</a>, 0);", 
"<a class=\"id\" href=\"#MODULE_PARM_DESC\">MODULE_PARM_DESC</a>(<a class=\"id\" href=\"#extra\">extra</a>, \"Enable extra LEDs and keys on IBM RapidAcces, EzKey and similar keyboards\");", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Scancode to keycode tables. These are just the default setting, and</span>", 
"<span class=\"comment\"> * are loadable via a userland utility.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_KEYMAP_SIZE\">ATKBD_KEYMAP_SIZE</a><span class=\"ts\"/>512", 
"", 
"static const unsigned short <a class=\"id\" href=\"#atkbd_set2_keycode\">atkbd_set2_keycode</a>[<a class=\"id\" href=\"#ATKBD_KEYMAP_SIZE\">ATKBD_KEYMAP_SIZE</a>] = {", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_KEYBOARD_ATKBD_HP_KEYCODES\">CONFIG_KEYBOARD_ATKBD_HP_KEYCODES</a>", 
"", 
"<span class=\"comment\">/* XXX: need a more general approach */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> \"hpps2atkbd.h\"<span class=\"ts\"/><span class=\"comment\">/* include the keyboard scancodes */</span>", 
"", 
"#else", 
"<span class=\"ts\"/>  0, 67, 65, 63, 61, 59, 60, 88,  0, 68, 66, 64, 62, 15, 41,117,", 
"<span class=\"ts\"/>  0, 56, 42, 93, 29, 16,  2,  0,  0,  0, 44, 31, 30, 17,  3,  0,", 
"<span class=\"ts\"/>  0, 46, 45, 32, 18,  5,  4, 95,  0, 57, 47, 33, 20, 19,  6,183,", 
"<span class=\"ts\"/>  0, 49, 48, 35, 34, 21,  7,184,  0,  0, 50, 36, 22,  8,  9,185,", 
"<span class=\"ts\"/>  0, 51, 37, 23, 24, 11, 10,  0,  0, 52, 53, 38, 39, 25, 12,  0,", 
"<span class=\"ts\"/>  0, 89, 40,  0, 26, 13,  0,  0, 58, 54, 28, 27,  0, 43,  0, 85,", 
"<span class=\"ts\"/>  0, 86, 91, 90, 92,  0, 14, 94,  0, 79,124, 75, 71,121,  0,  0,", 
"<span class=\"ts\"/> 82, 83, 80, 76, 77, 72,  1, 69, 87, 78, 81, 74, 55, 73, 70, 99,", 
"", 
"<span class=\"ts\"/>  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,", 
"<span class=\"ts\"/>217,100,255,  0, 97,165,  0,  0,156,  0,  0,  0,  0,  0,  0,125,", 
"<span class=\"ts\"/>173,114,  0,113,  0,  0,  0,126,128,  0,  0,140,  0,  0,  0,127,", 
"<span class=\"ts\"/>159,  0,115,  0,164,  0,  0,116,158,  0,172,166,  0,  0,  0,142,", 
"<span class=\"ts\"/>157,  0,  0,  0,  0,  0,  0,  0,155,  0, 98,  0,  0,163,  0,  0,", 
"<span class=\"ts\"/>226,  0,  0,  0,  0,  0,  0,  0,  0,255, 96,  0,  0,  0,143,  0,", 
"<span class=\"ts\"/>  0,  0,  0,  0,  0,  0,  0,  0,  0,107,  0,105,102,  0,  0,112,", 
"<span class=\"ts\"/>110,111,108,112,106,103,  0,119,  0,118,109,  0, 99,104,119,  0,", 
"", 
"<span class=\"ts\"/>  0,  0,  0, 65, 99,", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"};", 
"", 
"static const unsigned short <a class=\"id\" href=\"#atkbd_set3_keycode\">atkbd_set3_keycode</a>[<a class=\"id\" href=\"#ATKBD_KEYMAP_SIZE\">ATKBD_KEYMAP_SIZE</a>] = {", 
"", 
"<span class=\"ts\"/>  0,  0,  0,  0,  0,  0,  0, 59,  1,138,128,129,130, 15, 41, 60,", 
"<span class=\"ts\"/>131, 29, 42, 86, 58, 16,  2, 61,133, 56, 44, 31, 30, 17,  3, 62,", 
"<span class=\"ts\"/>134, 46, 45, 32, 18,  5,  4, 63,135, 57, 47, 33, 20, 19,  6, 64,", 
"<span class=\"ts\"/>136, 49, 48, 35, 34, 21,  7, 65,137,100, 50, 36, 22,  8,  9, 66,", 
"<span class=\"ts\"/>125, 51, 37, 23, 24, 11, 10, 67,126, 52, 53, 38, 39, 25, 12, 68,", 
"<span class=\"ts\"/>113,114, 40, 43, 26, 13, 87, 99, 97, 54, 28, 27, 43, 43, 88, 70,", 
"<span class=\"ts\"/>108,105,119,103,111,107, 14,110,  0, 79,106, 75, 71,109,102,104,", 
"<span class=\"ts\"/> 82, 83, 80, 76, 77, 72, 69, 98,  0, 96, 81,  0, 78, 73, 55,183,", 
"", 
"<span class=\"ts\"/>184,185,186,187, 74, 94, 92, 93,  0,  0,  0,125,126,127,112,  0,", 
"<span class=\"ts\"/>  0,139,172,163,165,115,152,172,166,140,160,154,113,114,167,168,", 
"<span class=\"ts\"/>148,149,147,140", 
"};", 
"", 
"static const unsigned short <a class=\"id\" href=\"#atkbd_unxlate_table\">atkbd_unxlate_table</a>[128] = {", 
"          0,118, 22, 30, 38, 37, 46, 54, 61, 62, 70, 69, 78, 85,102, 13,", 
"         21, 29, 36, 45, 44, 53, 60, 67, 68, 77, 84, 91, 90, 20, 28, 27,", 
"         35, 43, 52, 51, 59, 66, 75, 76, 82, 14, 18, 93, 26, 34, 33, 42,", 
"         50, 49, 58, 65, 73, 74, 89,124, 17, 41, 88,  5,  6,  4, 12,  3,", 
"         11,  2, 10,  1,  9,119,126,108,117,125,123,107,115,116,121,105,", 
"        114,122,112,113,127, 96, 97,120,  7, 15, 23, 31, 39, 47, 55, 63,", 
"         71, 79, 86, 94,  8, 16, 24, 32, 40, 48, 56, 64, 72, 80, 87,111,", 
"         19, 25, 57, 81, 83, 92, 95, 98, 99,100,101,103,104,106,109,110", 
"};", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_CMD_SETLEDS\">ATKBD_CMD_SETLEDS</a><span class=\"ts\"/>0x10ed", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_CMD_GSCANSET\">ATKBD_CMD_GSCANSET</a><span class=\"ts\"/>0x11f0", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_CMD_SSCANSET\">ATKBD_CMD_SSCANSET</a><span class=\"ts\"/>0x10f0", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_CMD_GETID\">ATKBD_CMD_GETID</a><span class=\"ts\"/><span class=\"ts\"/>0x02f2", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_CMD_SETREP\">ATKBD_CMD_SETREP</a><span class=\"ts\"/>0x10f3", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_CMD_ENABLE\">ATKBD_CMD_ENABLE</a><span class=\"ts\"/>0x00f4", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_CMD_RESET_DIS\">ATKBD_CMD_RESET_DIS</a><span class=\"ts\"/>0x00f5<span class=\"ts\"/><span class=\"comment\">/* Reset to defaults and disable */</span>", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_CMD_RESET_DEF\">ATKBD_CMD_RESET_DEF</a><span class=\"ts\"/>0x00f6<span class=\"ts\"/><span class=\"comment\">/* Reset to defaults */</span>", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_CMD_SETALL_MBR\">ATKBD_CMD_SETALL_MBR</a><span class=\"ts\"/>0x00fa", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_CMD_RESET_BAT\">ATKBD_CMD_RESET_BAT</a><span class=\"ts\"/>0x02ff", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_CMD_RESEND\">ATKBD_CMD_RESEND</a><span class=\"ts\"/>0x00fe", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_CMD_EX_ENABLE\">ATKBD_CMD_EX_ENABLE</a><span class=\"ts\"/>0x10ea", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_CMD_EX_SETLEDS\">ATKBD_CMD_EX_SETLEDS</a><span class=\"ts\"/>0x20eb", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_CMD_OK_GETID\">ATKBD_CMD_OK_GETID</a><span class=\"ts\"/>0x02e8", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_RET_ACK\">ATKBD_RET_ACK</a><span class=\"ts\"/><span class=\"ts\"/>0xfa", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_RET_NAK\">ATKBD_RET_NAK</a><span class=\"ts\"/><span class=\"ts\"/>0xfe", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_RET_BAT\">ATKBD_RET_BAT</a><span class=\"ts\"/><span class=\"ts\"/>0xaa", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_RET_EMUL0\">ATKBD_RET_EMUL0</a><span class=\"ts\"/><span class=\"ts\"/>0xe0", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_RET_EMUL1\">ATKBD_RET_EMUL1</a><span class=\"ts\"/><span class=\"ts\"/>0xe1", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_RET_RELEASE\">ATKBD_RET_RELEASE</a><span class=\"ts\"/>0xf0", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_RET_HANJA\">ATKBD_RET_HANJA</a><span class=\"ts\"/><span class=\"ts\"/>0xf1", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_RET_HANGEUL\">ATKBD_RET_HANGEUL</a><span class=\"ts\"/>0xf2", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_RET_ERR\">ATKBD_RET_ERR</a><span class=\"ts\"/><span class=\"ts\"/>0xff", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_KEY_UNKNOWN\">ATKBD_KEY_UNKNOWN</a><span class=\"ts\"/>0", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_KEY_NULL\">ATKBD_KEY_NULL</a><span class=\"ts\"/><span class=\"ts\"/>255", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_SCR_1\">ATKBD_SCR_1</a><span class=\"ts\"/><span class=\"ts\"/>0xfffe", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_SCR_2\">ATKBD_SCR_2</a><span class=\"ts\"/><span class=\"ts\"/>0xfffd", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_SCR_4\">ATKBD_SCR_4</a><span class=\"ts\"/><span class=\"ts\"/>0xfffc", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_SCR_8\">ATKBD_SCR_8</a><span class=\"ts\"/><span class=\"ts\"/>0xfffb", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_SCR_CLICK\">ATKBD_SCR_CLICK</a><span class=\"ts\"/><span class=\"ts\"/>0xfffa", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_SCR_LEFT\">ATKBD_SCR_LEFT</a><span class=\"ts\"/><span class=\"ts\"/>0xfff9", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_SCR_RIGHT\">ATKBD_SCR_RIGHT</a><span class=\"ts\"/><span class=\"ts\"/>0xfff8", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_SPECIAL\">ATKBD_SPECIAL</a><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ATKBD_SCR_RIGHT\">ATKBD_SCR_RIGHT</a>", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_LED_EVENT_BIT\">ATKBD_LED_EVENT_BIT</a><span class=\"ts\"/>0", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_REP_EVENT_BIT\">ATKBD_REP_EVENT_BIT</a><span class=\"ts\"/>1", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_XL_ERR\">ATKBD_XL_ERR</a><span class=\"ts\"/><span class=\"ts\"/>0x01", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_XL_BAT\">ATKBD_XL_BAT</a><span class=\"ts\"/><span class=\"ts\"/>0x02", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_XL_ACK\">ATKBD_XL_ACK</a><span class=\"ts\"/><span class=\"ts\"/>0x04", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_XL_NAK\">ATKBD_XL_NAK</a><span class=\"ts\"/><span class=\"ts\"/>0x08", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_XL_HANGEUL\">ATKBD_XL_HANGEUL</a><span class=\"ts\"/>0x10", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_XL_HANJA\">ATKBD_XL_HANJA</a><span class=\"ts\"/><span class=\"ts\"/>0x20", 
"", 
"static const struct {", 
"<span class=\"ts\"/>unsigned short <a class=\"id\" href=\"#keycode\">keycode</a>;", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#set2\">set2</a>;", 
"} <a class=\"id\" href=\"#atkbd_scroll_keys\">atkbd_scroll_keys</a>[] = {", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#ATKBD_SCR_1\">ATKBD_SCR_1</a>,     0xc5 },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#ATKBD_SCR_2\">ATKBD_SCR_2</a>,     0x9d },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#ATKBD_SCR_4\">ATKBD_SCR_4</a>,     0xa4 },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#ATKBD_SCR_8\">ATKBD_SCR_8</a>,     0x9b },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#ATKBD_SCR_CLICK\">ATKBD_SCR_CLICK</a>, 0xe0 },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#ATKBD_SCR_LEFT\">ATKBD_SCR_LEFT</a>,  0xcb },", 
"<span class=\"ts\"/>{ <a class=\"id\" href=\"#ATKBD_SCR_RIGHT\">ATKBD_SCR_RIGHT</a>, 0xd2 },", 
"};", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * The atkbd control structure</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"struct <a class=\"id\" href=\"#atkbd\">atkbd</a> {", 
"", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ps2dev\">ps2dev</a> <a class=\"id\" href=\"#ps2dev\">ps2dev</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#input_dev\">input_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Written only during init */</span>", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#name\">name</a>[64];", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#phys\">phys</a>[32];", 
"", 
"<span class=\"ts\"/>unsigned short <a class=\"id\" href=\"#id\">id</a>;", 
"<span class=\"ts\"/>unsigned short <a class=\"id\" href=\"#keycode\">keycode</a>[<a class=\"id\" href=\"#ATKBD_KEYMAP_SIZE\">ATKBD_KEYMAP_SIZE</a>];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#DECLARE_BITMAP\">DECLARE_BITMAP</a>(<a class=\"id\" href=\"#force_release_mask\">force_release_mask</a>, <a class=\"id\" href=\"#ATKBD_KEYMAP_SIZE\">ATKBD_KEYMAP_SIZE</a>);", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#set\">set</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#translated\">translated</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#extra\">extra</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#write\">write</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#softrepeat\">softrepeat</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#softraw\">softraw</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#scroll\">scroll</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#enabled\">enabled</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Accessed only from interrupt */</span>", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#emul\">emul</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#resend\">resend</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#release\">release</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#xl_bit\">xl_bit</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#last\">last</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#time\">time</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#err_count\">err_count</a>;", 
"", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#delayed_work\">delayed_work</a> <a class=\"id\" href=\"#event_work\">event_work</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#event_jiffies\">event_jiffies</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#event_mask\">event_mask</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Serializes reconnect(), attr-&gt;set() and event work */</span>", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#mutex\">mutex</a> <a class=\"id\" href=\"#mutex\">mutex</a>;", 
"};", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * System-specific keymap fixup routine</span>", 
"<span class=\"comment\"> */</span>", 
"static void (*<a class=\"id\" href=\"#atkbd_platform_fixup\">atkbd_platform_fixup</a>)(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *, const void *<a class=\"id\" href=\"#data\">data</a>);", 
"static void *<a class=\"id\" href=\"#atkbd_platform_fixup_data\">atkbd_platform_fixup_data</a>;", 
"static unsigned int (*<a class=\"id\" href=\"#atkbd_platform_scancode_fixup\">atkbd_platform_scancode_fixup</a>)(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *, unsigned int);", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#atkbd_attr_show_helper\">atkbd_attr_show_helper</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, char *<a class=\"id\" href=\"#buf\">buf</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ssize_t\">ssize_t</a> (*<a class=\"id\" href=\"#handler\">handler</a>)(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *, char *));", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#atkbd_attr_set_helper\">atkbd_attr_set_helper</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, const char *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ssize_t\">ssize_t</a> (*<a class=\"id\" href=\"#handler\">handler</a>)(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *, const char *, <a class=\"id\" href=\"#size_t\">size_t</a>));", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_DEFINE_ATTR\">ATKBD_DEFINE_ATTR</a>(<a class=\"id\" href=\"#_name\">_name</a>)<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#atkbd_show_\">atkbd_show_</a>##<a class=\"id\" href=\"#_name\">_name</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *, char *);<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#atkbd_set_\">atkbd_set_</a>##<a class=\"id\" href=\"#_name\">_name</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *, const char *, <a class=\"id\" href=\"#size_t\">size_t</a>);<span class=\"ts\"/><span class=\"ts\"/>\\", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#atkbd_do_show_\">atkbd_do_show_</a>##<a class=\"id\" href=\"#_name\">_name</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#d\">d</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#b\">b</a>)<span class=\"ts\"/><span class=\"ts\"/>\\", 
"{<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#atkbd_attr_show_helper\">atkbd_attr_show_helper</a>(<a class=\"id\" href=\"#d\">d</a>, <a class=\"id\" href=\"#b\">b</a>, <a class=\"id\" href=\"#atkbd_show_\">atkbd_show_</a>##<a class=\"id\" href=\"#_name\">_name</a>);<span class=\"ts\"/><span class=\"ts\"/>\\", 
"}<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#atkbd_do_set_\">atkbd_do_set_</a>##<a class=\"id\" href=\"#_name\">_name</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#d\">d</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, const char *<a class=\"id\" href=\"#b\">b</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#s\">s</a>)<span class=\"ts\"/>\\", 
"{<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#atkbd_attr_set_helper\">atkbd_attr_set_helper</a>(<a class=\"id\" href=\"#d\">d</a>, <a class=\"id\" href=\"#b\">b</a>, <a class=\"id\" href=\"#s\">s</a>, <a class=\"id\" href=\"#atkbd_set_\">atkbd_set_</a>##<a class=\"id\" href=\"#_name\">_name</a>);<span class=\"ts\"/><span class=\"ts\"/>\\", 
"}<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"static struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> <a class=\"id\" href=\"#atkbd_attr_\">atkbd_attr_</a>##<a class=\"id\" href=\"#_name\">_name</a> =<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__ATTR\">__ATTR</a>(<a class=\"id\" href=\"#_name\">_name</a>, <a class=\"id\" href=\"#S_IWUSR\">S_IWUSR</a> | <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>, <a class=\"id\" href=\"#atkbd_do_show_\">atkbd_do_show_</a>##<a class=\"id\" href=\"#_name\">_name</a>, <a class=\"id\" href=\"#atkbd_do_set_\">atkbd_do_set_</a>##<a class=\"id\" href=\"#_name\">_name</a>);", 
"", 
"<a class=\"id\" href=\"#ATKBD_DEFINE_ATTR\">ATKBD_DEFINE_ATTR</a>(<a class=\"id\" href=\"#extra\">extra</a>);", 
"<a class=\"id\" href=\"#ATKBD_DEFINE_ATTR\">ATKBD_DEFINE_ATTR</a>(<a class=\"id\" href=\"#force_release\">force_release</a>);", 
"<a class=\"id\" href=\"#ATKBD_DEFINE_ATTR\">ATKBD_DEFINE_ATTR</a>(<a class=\"id\" href=\"#scroll\">scroll</a>);", 
"<a class=\"id\" href=\"#ATKBD_DEFINE_ATTR\">ATKBD_DEFINE_ATTR</a>(<a class=\"id\" href=\"#set\">set</a>);", 
"<a class=\"id\" href=\"#ATKBD_DEFINE_ATTR\">ATKBD_DEFINE_ATTR</a>(<a class=\"id\" href=\"#softrepeat\">softrepeat</a>);", 
"<a class=\"id\" href=\"#ATKBD_DEFINE_ATTR\">ATKBD_DEFINE_ATTR</a>(<a class=\"id\" href=\"#softraw\">softraw</a>);", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ATKBD_DEFINE_RO_ATTR\">ATKBD_DEFINE_RO_ATTR</a>(<a class=\"id\" href=\"#_name\">_name</a>)<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#atkbd_show_\">atkbd_show_</a>##<a class=\"id\" href=\"#_name\">_name</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *, char *);<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#atkbd_do_show_\">atkbd_do_show_</a>##<a class=\"id\" href=\"#_name\">_name</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#d\">d</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#b\">b</a>)<span class=\"ts\"/><span class=\"ts\"/>\\", 
"{<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#atkbd_attr_show_helper\">atkbd_attr_show_helper</a>(<a class=\"id\" href=\"#d\">d</a>, <a class=\"id\" href=\"#b\">b</a>, <a class=\"id\" href=\"#atkbd_show_\">atkbd_show_</a>##<a class=\"id\" href=\"#_name\">_name</a>);<span class=\"ts\"/><span class=\"ts\"/>\\", 
"}<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"static struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> <a class=\"id\" href=\"#atkbd_attr_\">atkbd_attr_</a>##<a class=\"id\" href=\"#_name\">_name</a> =<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\\", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__ATTR\">__ATTR</a>(<a class=\"id\" href=\"#_name\">_name</a>, <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>, <a class=\"id\" href=\"#atkbd_do_show_\">atkbd_do_show_</a>##<a class=\"id\" href=\"#_name\">_name</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"", 
"<a class=\"id\" href=\"#ATKBD_DEFINE_RO_ATTR\">ATKBD_DEFINE_RO_ATTR</a>(<a class=\"id\" href=\"#err_count\">err_count</a>);", 
"", 
"static struct <a class=\"id\" href=\"#attribute\">attribute</a> *<a class=\"id\" href=\"#atkbd_attributes\">atkbd_attributes</a>[] = {", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#atkbd_attr_extra\">atkbd_attr_extra</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#atkbd_attr_force_release\">atkbd_attr_force_release</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#atkbd_attr_scroll\">atkbd_attr_scroll</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#atkbd_attr_set\">atkbd_attr_set</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#atkbd_attr_softrepeat\">atkbd_attr_softrepeat</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#atkbd_attr_softraw\">atkbd_attr_softraw</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#atkbd_attr_err_count\">atkbd_attr_err_count</a>.<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#NULL\">NULL</a>", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#attribute_group\">attribute_group</a> <a class=\"id\" href=\"#atkbd_attribute_group\">atkbd_attribute_group</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#attrs\">attrs</a><span class=\"ts\"/>= <a class=\"id\" href=\"#atkbd_attributes\">atkbd_attributes</a>,", 
"};", 
"", 
"static const unsigned int <a class=\"id\" href=\"#xl_table\">xl_table</a>[] = {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ATKBD_RET_BAT\">ATKBD_RET_BAT</a>, <a class=\"id\" href=\"#ATKBD_RET_ERR\">ATKBD_RET_ERR</a>, <a class=\"id\" href=\"#ATKBD_RET_ACK\">ATKBD_RET_ACK</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ATKBD_RET_NAK\">ATKBD_RET_NAK</a>, <a class=\"id\" href=\"#ATKBD_RET_HANJA\">ATKBD_RET_HANJA</a>, <a class=\"id\" href=\"#ATKBD_RET_HANGEUL\">ATKBD_RET_HANGEUL</a>,", 
"};", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Checks if we should mangle the scancode to extract 'release' bit</span>", 
"<span class=\"comment\"> * in translated mode.</span>", 
"<span class=\"comment\"> */</span>", 
"static <a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#atkbd_need_xlate\">atkbd_need_xlate</a>(unsigned long <a class=\"id\" href=\"#xl_bit\">xl_bit</a>, unsigned char <a class=\"id\" href=\"#code\">code</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#code\">code</a> == <a class=\"id\" href=\"#ATKBD_RET_EMUL0\">ATKBD_RET_EMUL0</a> || <a class=\"id\" href=\"#code\">code</a> == <a class=\"id\" href=\"#ATKBD_RET_EMUL1\">ATKBD_RET_EMUL1</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#false\">false</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#xl_table\">xl_table</a>); <a class=\"id\" href=\"#i\">i</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#code\">code</a> == <a class=\"id\" href=\"#xl_table\">xl_table</a>[<a class=\"id\" href=\"#i\">i</a>])", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#i\">i</a>, &amp;<a class=\"id\" href=\"#xl_bit\">xl_bit</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#true\">true</a>;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Calculates new value of xl_bit so the driver can distinguish</span>", 
"<span class=\"comment\"> * between make/break pair of scancodes for select keys and PS/2</span>", 
"<span class=\"comment\"> * protocol responses.</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#atkbd_calculate_xl_bit\">atkbd_calculate_xl_bit</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>, unsigned char <a class=\"id\" href=\"#code\">code</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#xl_table\">xl_table</a>); <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!((<a class=\"id\" href=\"#code\">code</a> ^ <a class=\"id\" href=\"#xl_table\">xl_table</a>[<a class=\"id\" href=\"#i\">i</a>]) &amp; 0x7f)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#code\">code</a> &amp; 0x80)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__clear_bit\">__clear_bit</a>(<a class=\"id\" href=\"#i\">i</a>, &amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#xl_bit\">xl_bit</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__set_bit\">__set_bit</a>(<a class=\"id\" href=\"#i\">i</a>, &amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#xl_bit\">xl_bit</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Encode the scancode, 0xe0 prefix, and high bit into a single integer,</span>", 
"<span class=\"comment\"> * keeping kernel 2.4 compatibility for set 2</span>", 
"<span class=\"comment\"> */</span>", 
"static unsigned int <a class=\"id\" href=\"#atkbd_compat_scancode\">atkbd_compat_scancode</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>, unsigned int <a class=\"id\" href=\"#code\">code</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#set\">set</a> == 3) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#emul\">emul</a> == 1)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#code\">code</a> |= 0x100;", 
"        } else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#code\">code</a> = (<a class=\"id\" href=\"#code\">code</a> &amp; 0x7f) | ((<a class=\"id\" href=\"#code\">code</a> &amp; 0x80) << 1);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#emul\">emul</a> == 1)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#code\">code</a> |= 0x80;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#code\">code</a>;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * atkbd_interrupt(). Here takes place processing of data received from</span>", 
"<span class=\"comment\"> * the keyboard into events.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static <a class=\"id\" href=\"#irqreturn_t\">irqreturn_t</a> <a class=\"id\" href=\"#atkbd_interrupt\">atkbd_interrupt</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>, unsigned char <a class=\"id\" href=\"#data\">data</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   unsigned int <a class=\"id\" href=\"#flags\">flags</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a> = <a class=\"id\" href=\"#serio_get_drvdata\">serio_get_drvdata</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#input_dev\">input_dev</a> *<a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#code\">code</a> = <a class=\"id\" href=\"#data\">data</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#scroll\">scroll</a> = 0, <a class=\"id\" href=\"#hscroll\">hscroll</a> = 0, <a class=\"id\" href=\"#click\">click</a> = -1;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/>unsigned short <a class=\"id\" href=\"#keycode\">keycode</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev_dbg\">dev_dbg</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"Received %02x flags %02x\\n\", <a class=\"id\" href=\"#data\">data</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"#if !<a class=\"id\" href=\"#defined\">defined</a>(<a class=\"id\" href=\"#__i386__\">__i386__</a>) && !<a class=\"id\" href=\"#defined\">defined</a> (<a class=\"id\" href=\"#__x86_64__\">__x86_64__</a>)", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#flags\">flags</a> &amp; (<a class=\"id\" href=\"#SERIO_FRAME\">SERIO_FRAME</a> | <a class=\"id\" href=\"#SERIO_PARITY\">SERIO_PARITY</a>)) && (~<a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#SERIO_TIMEOUT\">SERIO_TIMEOUT</a>) && !<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#resend\">resend</a> && <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#write\">write</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_warn\">dev_warn</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"Frame/parity error: %02x\\n\", <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_write\">serio_write</a>(<a class=\"id\" href=\"#serio\">serio</a>, <a class=\"id\" href=\"#ATKBD_CMD_RESEND\">ATKBD_CMD_RESEND</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#resend\">resend</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#flags\">flags</a> && <a class=\"id\" href=\"#data\">data</a> == <a class=\"id\" href=\"#ATKBD_RET_ACK\">ATKBD_RET_ACK</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#resend\">resend</a> = <a class=\"id\" href=\"#false\">false</a>;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#ps2dev\">ps2dev</a>.<a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#PS2_FLAG_ACK\">PS2_FLAG_ACK</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>if  (<a class=\"id\" href=\"#ps2_handle_ack\">ps2_handle_ack</a>(&amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#ps2dev\">ps2dev</a>, <a class=\"id\" href=\"#data\">data</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#unlikely\">unlikely</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#ps2dev\">ps2dev</a>.<a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#PS2_FLAG_CMD\">PS2_FLAG_CMD</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>if  (<a class=\"id\" href=\"#ps2_handle_response\">ps2_handle_response</a>(&amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#ps2dev\">ps2dev</a>, <a class=\"id\" href=\"#data\">data</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#enabled\">enabled</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#input_event\">input_event</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#EV_MSC\">EV_MSC</a>, <a class=\"id\" href=\"#MSC_RAW\">MSC_RAW</a>, <a class=\"id\" href=\"#code\">code</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd_platform_scancode_fixup\">atkbd_platform_scancode_fixup</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#code\">code</a> = <a class=\"id\" href=\"#atkbd_platform_scancode_fixup\">atkbd_platform_scancode_fixup</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>, <a class=\"id\" href=\"#code\">code</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#translated\">translated</a>) {", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#emul\">emul</a> || <a class=\"id\" href=\"#atkbd_need_xlate\">atkbd_need_xlate</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#xl_bit\">xl_bit</a>, <a class=\"id\" href=\"#code\">code</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#release\">release</a> = <a class=\"id\" href=\"#code\">code</a> >> 7;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#code\">code</a> &= 0x7f;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#emul\">emul</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_calculate_xl_bit\">atkbd_calculate_xl_bit</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>, <a class=\"id\" href=\"#data\">data</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#code\">code</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ATKBD_RET_BAT\">ATKBD_RET_BAT</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#enabled\">enabled</a> = <a class=\"id\" href=\"#false\">false</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio_reconnect\">serio_reconnect</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#ps2dev\">ps2dev</a>.<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ATKBD_RET_EMUL0\">ATKBD_RET_EMUL0</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#emul\">emul</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ATKBD_RET_EMUL1\">ATKBD_RET_EMUL1</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#emul\">emul</a> = 2;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ATKBD_RET_RELEASE\">ATKBD_RET_RELEASE</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#release\">release</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ATKBD_RET_ACK\">ATKBD_RET_ACK</a>:", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ATKBD_RET_NAK\">ATKBD_RET_NAK</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#printk_ratelimit\">printk_ratelimit</a>())", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_warn\">dev_warn</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> \"Spurious %s on %s. \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> \"Some program might be trying access hardware directly.\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#data\">data</a> == <a class=\"id\" href=\"#ATKBD_RET_ACK\">ATKBD_RET_ACK</a> ? \"ACK\" : \"NAK\", <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#phys\">phys</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ATKBD_RET_ERR\">ATKBD_RET_ERR</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#err_count\">err_count</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_dbg\">dev_dbg</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"Keyboard on %s reports too many keys pressed.\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#phys\">phys</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#code\">code</a> = <a class=\"id\" href=\"#atkbd_compat_scancode\">atkbd_compat_scancode</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>, <a class=\"id\" href=\"#code\">code</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#emul\">emul</a> && --<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#emul\">emul</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#keycode\">keycode</a> = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#keycode\">keycode</a>[<a class=\"id\" href=\"#code\">code</a>];", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#keycode\">keycode</a> != <a class=\"id\" href=\"#ATKBD_KEY_NULL\">ATKBD_KEY_NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_event\">input_event</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#EV_MSC\">EV_MSC</a>, <a class=\"id\" href=\"#MSC_SCAN\">MSC_SCAN</a>, <a class=\"id\" href=\"#code\">code</a>);", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#keycode\">keycode</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ATKBD_KEY_NULL\">ATKBD_KEY_NULL</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ATKBD_KEY_UNKNOWN\">ATKBD_KEY_UNKNOWN</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_warn\">dev_warn</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> \"Unknown key %s (%s set %d, code %#x on %s).\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#release\">release</a> ? \"released\" : \"pressed\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#translated\">translated</a> ? \"translated\" : \"raw\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#set\">set</a>, <a class=\"id\" href=\"#code\">code</a>, <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#phys\">phys</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_warn\">dev_warn</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> \"Use 'setkeycodes %s%02x <keycode>' to make it known.\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#code\">code</a> &amp; 0x80 ? \"e0\" : \"\", <a class=\"id\" href=\"#code\">code</a> &amp; 0x7f);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_sync\">input_sync</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ATKBD_SCR_1\">ATKBD_SCR_1</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#scroll\">scroll</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ATKBD_SCR_2\">ATKBD_SCR_2</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#scroll\">scroll</a> = 2;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ATKBD_SCR_4\">ATKBD_SCR_4</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#scroll\">scroll</a> = 4;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ATKBD_SCR_8\">ATKBD_SCR_8</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#scroll\">scroll</a> = 8;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ATKBD_SCR_CLICK\">ATKBD_SCR_CLICK</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#click\">click</a> = !<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#release\">release</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ATKBD_SCR_LEFT\">ATKBD_SCR_LEFT</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hscroll\">hscroll</a> = -1;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ATKBD_SCR_RIGHT\">ATKBD_SCR_RIGHT</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hscroll\">hscroll</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#release\">release</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#value\">value</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#last\">last</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>} else if (!<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#softrepeat\">softrepeat</a> && <a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#keycode\">keycode</a>, <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#key\">key</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Workaround Toshiba laptop multiple keypress */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#value\">value</a> = <a class=\"id\" href=\"#time_before\">time_before</a>(<a class=\"id\" href=\"#jiffies\">jiffies</a>, <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#time\">time</a>) && <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#last\">last</a> == <a class=\"id\" href=\"#code\">code</a> ? 1 : 2;", 
"<span class=\"ts\"/><span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#value\">value</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#last\">last</a> = <a class=\"id\" href=\"#code\">code</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#time\">time</a> = <a class=\"id\" href=\"#jiffies\">jiffies</a> + <a class=\"id\" href=\"#msecs_to_jiffies\">msecs_to_jiffies</a>(<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#rep\">rep</a>[<a class=\"id\" href=\"#REP_DELAY\">REP_DELAY</a>]) / 2;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_event\">input_event</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#EV_KEY\">EV_KEY</a>, <a class=\"id\" href=\"#keycode\">keycode</a>, <a class=\"id\" href=\"#value\">value</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_sync\">input_sync</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#value\">value</a> && <a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#code\">code</a>, <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#force_release_mask\">force_release_mask</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_report_key\">input_report_key</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#keycode\">keycode</a>, 0);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_sync\">input_sync</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#scroll\">scroll</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#click\">click</a> != -1)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_report_key\">input_report_key</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#BTN_MIDDLE\">BTN_MIDDLE</a>, <a class=\"id\" href=\"#click\">click</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_report_rel\">input_report_rel</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#REL_WHEEL\">REL_WHEEL</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#release\">release</a> ? -<a class=\"id\" href=\"#scroll\">scroll</a> : <a class=\"id\" href=\"#scroll\">scroll</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_report_rel\">input_report_rel</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#REL_HWHEEL\">REL_HWHEEL</a>, <a class=\"id\" href=\"#hscroll\">hscroll</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_sync\">input_sync</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#release\">release</a> = <a class=\"id\" href=\"#false\">false</a>;", 
"<a class=\"id\" href=\"#out\">out</a>:", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#IRQ_HANDLED\">IRQ_HANDLED</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#atkbd_set_repeat_rate\">atkbd_set_repeat_rate</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>)", 
"{", 
"<span class=\"ts\"/>const short <a class=\"id\" href=\"#period\">period</a>[32] =", 
"<span class=\"ts\"/><span class=\"ts\"/>{ 33,  37,  42,  46,  50,  54,  58,  63,  67,  75,  83,  92, 100, 109, 116, 125,", 
"<span class=\"ts\"/><span class=\"ts\"/> 133, 149, 167, 182, 200, 217, 232, 250, 270, 303, 333, 370, 400, 435, 470, 500 };", 
"<span class=\"ts\"/>const short <a class=\"id\" href=\"#delay\">delay</a>[4] =", 
"<span class=\"ts\"/><span class=\"ts\"/>{ 250, 500, 750, 1000 };", 
"", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#input_dev\">input_dev</a> *<a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#param\">param</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a> = 0, <a class=\"id\" href=\"#j\">j</a> = 0;", 
"", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#period\">period</a>) - 1 && <a class=\"id\" href=\"#period\">period</a>[<a class=\"id\" href=\"#i\">i</a>] &lt; <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#rep\">rep</a>[<a class=\"id\" href=\"#REP_PERIOD\">REP_PERIOD</a>])", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#i\">i</a>++;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#rep\">rep</a>[<a class=\"id\" href=\"#REP_PERIOD\">REP_PERIOD</a>] = <a class=\"id\" href=\"#period\">period</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#j\">j</a> &lt; <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#delay\">delay</a>) - 1 && <a class=\"id\" href=\"#delay\">delay</a>[<a class=\"id\" href=\"#j\">j</a>] &lt; <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#rep\">rep</a>[<a class=\"id\" href=\"#REP_DELAY\">REP_DELAY</a>])", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#j\">j</a>++;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#rep\">rep</a>[<a class=\"id\" href=\"#REP_DELAY\">REP_DELAY</a>] = <a class=\"id\" href=\"#delay\">delay</a>[<a class=\"id\" href=\"#j\">j</a>];", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#param\">param</a> = <a class=\"id\" href=\"#i\">i</a> | (<a class=\"id\" href=\"#j\">j</a> << 5);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ps2_command\">ps2_command</a>(&amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#ps2dev\">ps2dev</a>, &amp;<a class=\"id\" href=\"#param\">param</a>, <a class=\"id\" href=\"#ATKBD_CMD_SETREP\">ATKBD_CMD_SETREP</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#atkbd_set_leds\">atkbd_set_leds</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#input_dev\">input_dev</a> *<a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#param\">param</a>[2];", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#param\">param</a>[0] = (<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#LED_SCROLLL\">LED_SCROLLL</a>, <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#led\">led</a>) ? 1 : 0)", 
"<span class=\"ts\"/><span class=\"ts\"/> | (<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#LED_NUML\">LED_NUML</a>,    <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#led\">led</a>) ? 2 : 0)", 
"<span class=\"ts\"/><span class=\"ts\"/> | (<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#LED_CAPSL\">LED_CAPSL</a>,   <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#led\">led</a>) ? 4 : 0);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ps2_command\">ps2_command</a>(&amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#ps2dev\">ps2dev</a>, <a class=\"id\" href=\"#param\">param</a>, <a class=\"id\" href=\"#ATKBD_CMD_SETLEDS\">ATKBD_CMD_SETLEDS</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#extra\">extra</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#param\">param</a>[0] = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#param\">param</a>[1] = (<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#LED_COMPOSE\">LED_COMPOSE</a>, <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#led\">led</a>) ? 0x01 : 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> | (<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#LED_SLEEP\">LED_SLEEP</a>,   <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#led\">led</a>) ? 0x02 : 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> | (<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#LED_SUSPEND\">LED_SUSPEND</a>, <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#led\">led</a>) ? 0x04 : 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> | (<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#LED_MISC\">LED_MISC</a>,    <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#led\">led</a>) ? 0x10 : 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> | (<a class=\"id\" href=\"#test_bit\">test_bit</a>(<a class=\"id\" href=\"#LED_MUTE\">LED_MUTE</a>,    <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#led\">led</a>) ? 0x20 : 0);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ps2_command\">ps2_command</a>(&amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#ps2dev\">ps2dev</a>, <a class=\"id\" href=\"#param\">param</a>, <a class=\"id\" href=\"#ATKBD_CMD_EX_SETLEDS\">ATKBD_CMD_EX_SETLEDS</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * atkbd_event_work() is used to complete processing of events that</span>", 
"<span class=\"comment\"> * can not be processed by input_event() which is often called from</span>", 
"<span class=\"comment\"> * interrupt context.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static void <a class=\"id\" href=\"#atkbd_event_work\">atkbd_event_work</a>(struct <a class=\"id\" href=\"#work_struct\">work_struct</a> *<a class=\"id\" href=\"#work\">work</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a> = <a class=\"id\" href=\"#container_of\">container_of</a>(<a class=\"id\" href=\"#work\">work</a>, struct <a class=\"id\" href=\"#atkbd\">atkbd</a>, <a class=\"id\" href=\"#event_work\">event_work</a>.<a class=\"id\" href=\"#work\">work</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#mutex\">mutex</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#enabled\">enabled</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * Serio ports are resumed asynchronously so while driver core</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * thinks that device is already fully operational in reality</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * it may not be ready yet. In this case we need to keep</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * rescheduling till reconnect completes.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#schedule_delayed_work\">schedule_delayed_work</a>(&amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#event_work\">event_work</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#msecs_to_jiffies\">msecs_to_jiffies</a>(100));", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#test_and_clear_bit\">test_and_clear_bit</a>(<a class=\"id\" href=\"#ATKBD_LED_EVENT_BIT\">ATKBD_LED_EVENT_BIT</a>, &amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#event_mask\">event_mask</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_set_leds\">atkbd_set_leds</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#test_and_clear_bit\">test_and_clear_bit</a>(<a class=\"id\" href=\"#ATKBD_REP_EVENT_BIT\">ATKBD_REP_EVENT_BIT</a>, &amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#event_mask\">event_mask</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_set_repeat_rate\">atkbd_set_repeat_rate</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#mutex\">mutex</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Schedule switch for execution. We need to throttle requests,</span>", 
"<span class=\"comment\"> * otherwise keyboard may become unresponsive.</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#atkbd_schedule_event_work\">atkbd_schedule_event_work</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>, int <a class=\"id\" href=\"#event_bit\">event_bit</a>)", 
"{", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#delay\">delay</a> = <a class=\"id\" href=\"#msecs_to_jiffies\">msecs_to_jiffies</a>(50);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#time_after\">time_after</a>(<a class=\"id\" href=\"#jiffies\">jiffies</a>, <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#event_jiffies\">event_jiffies</a> + <a class=\"id\" href=\"#delay\">delay</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#delay\">delay</a> = 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#event_jiffies\">event_jiffies</a> = <a class=\"id\" href=\"#jiffies\">jiffies</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#set_bit\">set_bit</a>(<a class=\"id\" href=\"#event_bit\">event_bit</a>, &amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#event_mask\">event_mask</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mb\">mb</a>();", 
"<span class=\"ts\"/><a class=\"id\" href=\"#schedule_delayed_work\">schedule_delayed_work</a>(&amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#event_work\">event_work</a>, <a class=\"id\" href=\"#delay\">delay</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Event callback from the input module. Events that change the state of</span>", 
"<span class=\"comment\"> * the hardware are processed here. If action can not be performed in</span>", 
"<span class=\"comment\"> * interrupt context it is offloaded to atkbd_event_work.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static int <a class=\"id\" href=\"#atkbd_event\">atkbd_event</a>(struct <a class=\"id\" href=\"#input_dev\">input_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#type\">type</a>, unsigned int <a class=\"id\" href=\"#code\">code</a>, int <a class=\"id\" href=\"#value\">value</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a> = <a class=\"id\" href=\"#input_get_drvdata\">input_get_drvdata</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#write\">write</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#type\">type</a>) {", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#EV_LED\">EV_LED</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_schedule_event_work\">atkbd_schedule_event_work</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>, <a class=\"id\" href=\"#ATKBD_LED_EVENT_BIT\">ATKBD_LED_EVENT_BIT</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#EV_REP\">EV_REP</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#softrepeat\">softrepeat</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_schedule_event_work\">atkbd_schedule_event_work</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>, <a class=\"id\" href=\"#ATKBD_REP_EVENT_BIT\">ATKBD_REP_EVENT_BIT</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * atkbd_enable() signals that interrupt handler is allowed to</span>", 
"<span class=\"comment\"> * generate input events.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> void <a class=\"id\" href=\"#atkbd_enable\">atkbd_enable</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_pause_rx\">serio_pause_rx</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#ps2dev\">ps2dev</a>.<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#enabled\">enabled</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_continue_rx\">serio_continue_rx</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#ps2dev\">ps2dev</a>.<a class=\"id\" href=\"#serio\">serio</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * atkbd_disable() tells input handler that all incoming data except</span>", 
"<span class=\"comment\"> * for ACKs and command response should be dropped.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> void <a class=\"id\" href=\"#atkbd_disable\">atkbd_disable</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_pause_rx\">serio_pause_rx</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#ps2dev\">ps2dev</a>.<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#enabled\">enabled</a> = <a class=\"id\" href=\"#false\">false</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_continue_rx\">serio_continue_rx</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#ps2dev\">ps2dev</a>.<a class=\"id\" href=\"#serio\">serio</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * atkbd_probe() probes for an AT keyboard on a serio port.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static int <a class=\"id\" href=\"#atkbd_probe\">atkbd_probe</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ps2dev\">ps2dev</a> *<a class=\"id\" href=\"#ps2dev\">ps2dev</a> = &amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#ps2dev\">ps2dev</a>;", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#param\">param</a>[2];", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Some systems, where the bit-twiddling when testing the io-lines of the</span>", 
"<span class=\"comment\"> * controller may confuse the keyboard need a full reset of the keyboard. On</span>", 
"<span class=\"comment\"> * these systems the BIOS also usually doesn't do it for us.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd_reset\">atkbd_reset</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ps2_command\">ps2_command</a>(<a class=\"id\" href=\"#ps2dev\">ps2dev</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#ATKBD_CMD_RESET_BAT\">ATKBD_CMD_RESET_BAT</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_warn\">dev_warn</a>(&amp;<a class=\"id\" href=\"#ps2dev\">ps2dev</a>-><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> \"keyboard reset failed on %s\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#ps2dev\">ps2dev</a>-><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#phys\">phys</a>);", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Then we check the keyboard ID. We should get 0xab83 under normal conditions.</span>", 
"<span class=\"comment\"> * Some keyboards report different values, but the first byte is always 0xab or</span>", 
"<span class=\"comment\"> * 0xac. Some old AT keyboards don't report anything. If a mouse is connected, this</span>", 
"<span class=\"comment\"> * should make sure we don't try to set the LEDs on it.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#param\">param</a>[0] = <a class=\"id\" href=\"#param\">param</a>[1] = 0xa5;<span class=\"ts\"/><span class=\"comment\">/* initialize with invalid values */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ps2_command\">ps2_command</a>(<a class=\"id\" href=\"#ps2dev\">ps2dev</a>, <a class=\"id\" href=\"#param\">param</a>, <a class=\"id\" href=\"#ATKBD_CMD_GETID\">ATKBD_CMD_GETID</a>)) {", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * If the get ID command failed, we check if we can at least set the LEDs on</span>", 
"<span class=\"comment\"> * the keyboard. This should work on every keyboard out there. It also turns</span>", 
"<span class=\"comment\"> * the LEDs off, which we want anyway.</span>", 
"<span class=\"comment\"> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#param\">param</a>[0] = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ps2_command\">ps2_command</a>(<a class=\"id\" href=\"#ps2dev\">ps2dev</a>, <a class=\"id\" href=\"#param\">param</a>, <a class=\"id\" href=\"#ATKBD_CMD_SETLEDS\">ATKBD_CMD_SETLEDS</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#id\">id</a> = 0xabba;", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#ps2_is_keyboard_id\">ps2_is_keyboard_id</a>(<a class=\"id\" href=\"#param\">param</a>[0]))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#id\">id</a> = (<a class=\"id\" href=\"#param\">param</a>[0] << 8) | <a class=\"id\" href=\"#param\">param</a>[1];", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#id\">id</a> == 0xaca1 && <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#translated\">translated</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_err\">dev_err</a>(&amp;<a class=\"id\" href=\"#ps2dev\">ps2dev</a>-><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"NCD terminal keyboards are only supported on non-translating controlelrs. \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"Use i8042.direct=1 to disable translation.\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * atkbd_select_set checks if a keyboard has a working Set 3 support, and</span>", 
"<span class=\"comment\"> * sets it into that. Unfortunately there are keyboards that can be switched</span>", 
"<span class=\"comment\"> * to Set 3, but don't work well in that (BTC Multimedia ...)</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static int <a class=\"id\" href=\"#atkbd_select_set\">atkbd_select_set</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>, int <a class=\"id\" href=\"#target_set\">target_set</a>, int <a class=\"id\" href=\"#allow_extra\">allow_extra</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ps2dev\">ps2dev</a> *<a class=\"id\" href=\"#ps2dev\">ps2dev</a> = &amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#ps2dev\">ps2dev</a>;", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#param\">param</a>[2];", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#extra\">extra</a> = <a class=\"id\" href=\"#false\">false</a>;", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * For known special keyboards we can go ahead and set the correct set.</span>", 
"<span class=\"comment\"> * We check for NCD PS/2 Sun, NorthGate OmniKey 101 and</span>", 
"<span class=\"comment\"> * IBM RapidAccess / IBM EzButton / Chicony KBP-8993 keyboards.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#translated\">translated</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 2;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#id\">id</a> == 0xaca1) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#param\">param</a>[0] = 3;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ps2_command\">ps2_command</a>(<a class=\"id\" href=\"#ps2dev\">ps2dev</a>, <a class=\"id\" href=\"#param\">param</a>, <a class=\"id\" href=\"#ATKBD_CMD_SSCANSET\">ATKBD_CMD_SSCANSET</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return 3;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#allow_extra\">allow_extra</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#param\">param</a>[0] = 0x71;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#ps2_command\">ps2_command</a>(<a class=\"id\" href=\"#ps2dev\">ps2dev</a>, <a class=\"id\" href=\"#param\">param</a>, <a class=\"id\" href=\"#ATKBD_CMD_EX_ENABLE\">ATKBD_CMD_EX_ENABLE</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#extra\">extra</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return 2;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#target_set\">target_set</a> != 3)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 2;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#ps2_command\">ps2_command</a>(<a class=\"id\" href=\"#ps2dev\">ps2dev</a>, <a class=\"id\" href=\"#param\">param</a>, <a class=\"id\" href=\"#ATKBD_CMD_OK_GETID\">ATKBD_CMD_OK_GETID</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#id\">id</a> = <a class=\"id\" href=\"#param\">param</a>[0] << 8 | <a class=\"id\" href=\"#param\">param</a>[1];", 
"<span class=\"ts\"/><span class=\"ts\"/>return 2;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#param\">param</a>[0] = 3;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ps2_command\">ps2_command</a>(<a class=\"id\" href=\"#ps2dev\">ps2dev</a>, <a class=\"id\" href=\"#param\">param</a>, <a class=\"id\" href=\"#ATKBD_CMD_SSCANSET\">ATKBD_CMD_SSCANSET</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return 2;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#param\">param</a>[0] = 0;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ps2_command\">ps2_command</a>(<a class=\"id\" href=\"#ps2dev\">ps2dev</a>, <a class=\"id\" href=\"#param\">param</a>, <a class=\"id\" href=\"#ATKBD_CMD_GSCANSET\">ATKBD_CMD_GSCANSET</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return 2;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#param\">param</a>[0] != 3) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#param\">param</a>[0] = 2;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ps2_command\">ps2_command</a>(<a class=\"id\" href=\"#ps2dev\">ps2dev</a>, <a class=\"id\" href=\"#param\">param</a>, <a class=\"id\" href=\"#ATKBD_CMD_SSCANSET\">ATKBD_CMD_SSCANSET</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return 2;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ps2_command\">ps2_command</a>(<a class=\"id\" href=\"#ps2dev\">ps2dev</a>, <a class=\"id\" href=\"#param\">param</a>, <a class=\"id\" href=\"#ATKBD_CMD_SETALL_MBR\">ATKBD_CMD_SETALL_MBR</a>);", 
"", 
"<span class=\"ts\"/>return 3;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#atkbd_reset_state\">atkbd_reset_state</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>)", 
"{", 
"        struct <a class=\"id\" href=\"#ps2dev\">ps2dev</a> *<a class=\"id\" href=\"#ps2dev\">ps2dev</a> = &amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#ps2dev\">ps2dev</a>;", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#param\">param</a>[1];", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Set the LEDs to a predefined state (all off).</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#param\">param</a>[0] = 0;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ps2_command\">ps2_command</a>(<a class=\"id\" href=\"#ps2dev\">ps2dev</a>, <a class=\"id\" href=\"#param\">param</a>, <a class=\"id\" href=\"#ATKBD_CMD_SETLEDS\">ATKBD_CMD_SETLEDS</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Set autorepeat to fastest possible.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#param\">param</a>[0] = 0;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ps2_command\">ps2_command</a>(<a class=\"id\" href=\"#ps2dev\">ps2dev</a>, <a class=\"id\" href=\"#param\">param</a>, <a class=\"id\" href=\"#ATKBD_CMD_SETREP\">ATKBD_CMD_SETREP</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#atkbd_activate\">atkbd_activate</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ps2dev\">ps2dev</a> *<a class=\"id\" href=\"#ps2dev\">ps2dev</a> = &amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#ps2dev\">ps2dev</a>;", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Enable the keyboard to receive keystrokes.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ps2_command\">ps2_command</a>(<a class=\"id\" href=\"#ps2dev\">ps2dev</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#ATKBD_CMD_ENABLE\">ATKBD_CMD_ENABLE</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_err\">dev_err</a>(&amp;<a class=\"id\" href=\"#ps2dev\">ps2dev</a>-><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"Failed to enable keyboard on %s\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ps2dev\">ps2dev</a>-><a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#phys\">phys</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * atkbd_cleanup() restores the keyboard state so that BIOS is happy after a</span>", 
"<span class=\"comment\"> * reboot.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static void <a class=\"id\" href=\"#atkbd_cleanup\">atkbd_cleanup</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a> = <a class=\"id\" href=\"#serio_get_drvdata\">serio_get_drvdata</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd_disable\">atkbd_disable</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ps2_command\">ps2_command</a>(&amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#ps2dev\">ps2dev</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#ATKBD_CMD_RESET_DEF\">ATKBD_CMD_RESET_DEF</a>);", 
"}", 
"", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * atkbd_disconnect() closes and frees.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static void <a class=\"id\" href=\"#atkbd_disconnect\">atkbd_disconnect</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a> = <a class=\"id\" href=\"#serio_get_drvdata\">serio_get_drvdata</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sysfs_remove_group\">sysfs_remove_group</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#kobj\">kobj</a>, &amp;<a class=\"id\" href=\"#atkbd_attribute_group\">atkbd_attribute_group</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd_disable\">atkbd_disable</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#input_unregister_device\">input_unregister_device</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Make sure we don't have a command in flight.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Note that since atkbd-&gt;enabled is false event work will keep</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * rescheduling itself until it gets canceled and will not try</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * accessing freed input device or serio port.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cancel_delayed_work_sync\">cancel_delayed_work_sync</a>(&amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#event_work\">event_work</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_close\">serio_close</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_set_drvdata\">serio_set_drvdata</a>(<a class=\"id\" href=\"#serio\">serio</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * generate release events for the keycodes given in data</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#atkbd_apply_forced_release_keylist\">atkbd_apply_forced_release_keylist</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a>* <a class=\"id\" href=\"#atkbd\">atkbd</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>const void *<a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/>const unsigned int *<a class=\"id\" href=\"#keys\">keys</a> = <a class=\"id\" href=\"#data\">data</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#set\">set</a> == 2)", 
"<span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#keys\">keys</a>[<a class=\"id\" href=\"#i\">i</a>] != -1U; <a class=\"id\" href=\"#i\">i</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__set_bit\">__set_bit</a>(<a class=\"id\" href=\"#keys\">keys</a>[<a class=\"id\" href=\"#i\">i</a>], <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#force_release_mask\">force_release_mask</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Most special keys (Fn+F?) on Dell laptops do not generate release</span>", 
"<span class=\"comment\"> * events so we have to do it ourselves.</span>", 
"<span class=\"comment\"> */</span>", 
"static unsigned int <a class=\"id\" href=\"#atkbd_dell_laptop_forced_release_keys\">atkbd_dell_laptop_forced_release_keys</a>[] = {", 
"<span class=\"ts\"/>0x85, 0x86, 0x87, 0x88, 0x89, 0x8a, 0x8b, 0x8f, 0x93, -1U", 
"};", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Perform fixup for HP system that doesn't generate release</span>", 
"<span class=\"comment\"> * for its video switch</span>", 
"<span class=\"comment\"> */</span>", 
"static unsigned int <a class=\"id\" href=\"#atkbd_hp_forced_release_keys\">atkbd_hp_forced_release_keys</a>[] = {", 
"<span class=\"ts\"/>0x94, -1U", 
"};", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Samsung NC10,NC20 with Fn+F? key release not working</span>", 
"<span class=\"comment\"> */</span>", 
"static unsigned int <a class=\"id\" href=\"#atkbd_samsung_forced_release_keys\">atkbd_samsung_forced_release_keys</a>[] = {", 
"<span class=\"ts\"/>0x82, 0x83, 0x84, 0x86, 0x88, 0x89, 0xb3, 0xf7, 0xf9, -1U", 
"};", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Amilo Pi 3525 key release for Fn+Volume keys not working</span>", 
"<span class=\"comment\"> */</span>", 
"static unsigned int <a class=\"id\" href=\"#atkbd_amilo_pi3525_forced_release_keys\">atkbd_amilo_pi3525_forced_release_keys</a>[] = {", 
"<span class=\"ts\"/>0x20, 0xa0, 0x2e, 0xae, 0x30, 0xb0, -1U", 
"};", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Amilo Xi 3650 key release for light touch bar not working</span>", 
"<span class=\"comment\"> */</span>", 
"static unsigned int <a class=\"id\" href=\"#atkbd_amilo_xi3650_forced_release_keys\">atkbd_amilo_xi3650_forced_release_keys</a>[] = {", 
"<span class=\"ts\"/>0x67, 0xed, 0x90, 0xa2, 0x99, 0xa4, 0xae, 0xb0, -1U", 
"};", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Soltech TA12 system with broken key release on volume keys and mute key</span>", 
"<span class=\"comment\"> */</span>", 
"static unsigned int <a class=\"id\" href=\"#atkdb_soltech_ta12_forced_release_keys\">atkdb_soltech_ta12_forced_release_keys</a>[] = {", 
"<span class=\"ts\"/>0xa0, 0xae, 0xb0, -1U", 
"};", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Many notebooks don't send key release event for volume up/down</span>", 
"<span class=\"comment\"> * keys, with key list below common among them</span>", 
"<span class=\"comment\"> */</span>", 
"static unsigned int <a class=\"id\" href=\"#atkbd_volume_forced_release_keys\">atkbd_volume_forced_release_keys</a>[] = {", 
"<span class=\"ts\"/>0xae, 0xb0, -1U", 
"};", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * OQO 01+ multimedia keys (64--66) generate e0 6x upon release whereas</span>", 
"<span class=\"comment\"> * they should be generating e4-e6 (0x80 | code).</span>", 
"<span class=\"comment\"> */</span>", 
"static unsigned int <a class=\"id\" href=\"#atkbd_oqo_01plus_scancode_fixup\">atkbd_oqo_01plus_scancode_fixup</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    unsigned int <a class=\"id\" href=\"#code\">code</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#translated\">translated</a> && <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#emul\">emul</a> == 1 &&", 
"<span class=\"ts\"/>    (<a class=\"id\" href=\"#code\">code</a> == 0x64 || <a class=\"id\" href=\"#code\">code</a> == 0x65 || <a class=\"id\" href=\"#code\">code</a> == 0x66)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#emul\">emul</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#code\">code</a> |= 0x80;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#code\">code</a>;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * atkbd_set_keycode_table() initializes keyboard's keycode table</span>", 
"<span class=\"comment\"> * according to the selected scancode set</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static void <a class=\"id\" href=\"#atkbd_set_keycode_table\">atkbd_set_keycode_table</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>)", 
"{", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#scancode\">scancode</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#j\">j</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#keycode\">keycode</a>, 0, sizeof(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#keycode\">keycode</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bitmap_zero\">bitmap_zero</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#force_release_mask\">force_release_mask</a>, <a class=\"id\" href=\"#ATKBD_KEYMAP_SIZE\">ATKBD_KEYMAP_SIZE</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#translated\">translated</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; 128; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#scancode\">scancode</a> = <a class=\"id\" href=\"#atkbd_unxlate_table\">atkbd_unxlate_table</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#keycode\">keycode</a>[<a class=\"id\" href=\"#i\">i</a>] = <a class=\"id\" href=\"#atkbd_set2_keycode\">atkbd_set2_keycode</a>[<a class=\"id\" href=\"#scancode\">scancode</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#keycode\">keycode</a>[<a class=\"id\" href=\"#i\">i</a> | 0x80] = <a class=\"id\" href=\"#atkbd_set2_keycode\">atkbd_set2_keycode</a>[<a class=\"id\" href=\"#scancode\">scancode</a> | 0x80];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#scroll\">scroll</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#j\">j</a> = 0; <a class=\"id\" href=\"#j\">j</a> &lt; <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#atkbd_scroll_keys\">atkbd_scroll_keys</a>); <a class=\"id\" href=\"#j\">j</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if ((<a class=\"id\" href=\"#scancode\">scancode</a> | 0x80) == <a class=\"id\" href=\"#atkbd_scroll_keys\">atkbd_scroll_keys</a>[<a class=\"id\" href=\"#j\">j</a>].<a class=\"id\" href=\"#set2\">set2</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#keycode\">keycode</a>[<a class=\"id\" href=\"#i\">i</a> | 0x80] = <a class=\"id\" href=\"#atkbd_scroll_keys\">atkbd_scroll_keys</a>[<a class=\"id\" href=\"#j\">j</a>].<a class=\"id\" href=\"#keycode\">keycode</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>} else if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#set\">set</a> == 3) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#keycode\">keycode</a>, <a class=\"id\" href=\"#atkbd_set3_keycode\">atkbd_set3_keycode</a>, sizeof(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#keycode\">keycode</a>));", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#keycode\">keycode</a>, <a class=\"id\" href=\"#atkbd_set2_keycode\">atkbd_set2_keycode</a>, sizeof(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#keycode\">keycode</a>));", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#scroll\">scroll</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#atkbd_scroll_keys\">atkbd_scroll_keys</a>); <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#scancode\">scancode</a> = <a class=\"id\" href=\"#atkbd_scroll_keys\">atkbd_scroll_keys</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#set2\">set2</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#keycode\">keycode</a>[<a class=\"id\" href=\"#scancode\">scancode</a>] = <a class=\"id\" href=\"#atkbd_scroll_keys\">atkbd_scroll_keys</a>[<a class=\"id\" href=\"#i\">i</a>].<a class=\"id\" href=\"#keycode\">keycode</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * HANGEUL and HANJA keys do not send release events so we need to</span>", 
"<span class=\"comment\"> * generate such events ourselves</span>", 
"<span class=\"comment\"> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#scancode\">scancode</a> = <a class=\"id\" href=\"#atkbd_compat_scancode\">atkbd_compat_scancode</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>, <a class=\"id\" href=\"#ATKBD_RET_HANGEUL\">ATKBD_RET_HANGEUL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#keycode\">keycode</a>[<a class=\"id\" href=\"#scancode\">scancode</a>] = <a class=\"id\" href=\"#KEY_HANGEUL\">KEY_HANGEUL</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__set_bit\">__set_bit</a>(<a class=\"id\" href=\"#scancode\">scancode</a>, <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#force_release_mask\">force_release_mask</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#scancode\">scancode</a> = <a class=\"id\" href=\"#atkbd_compat_scancode\">atkbd_compat_scancode</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>, <a class=\"id\" href=\"#ATKBD_RET_HANJA\">ATKBD_RET_HANJA</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#keycode\">keycode</a>[<a class=\"id\" href=\"#scancode\">scancode</a>] = <a class=\"id\" href=\"#KEY_HANJA\">KEY_HANJA</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__set_bit\">__set_bit</a>(<a class=\"id\" href=\"#scancode\">scancode</a>, <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#force_release_mask\">force_release_mask</a>);", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Perform additional fixups</span>", 
"<span class=\"comment\"> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd_platform_fixup\">atkbd_platform_fixup</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_platform_fixup\">atkbd_platform_fixup</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>, <a class=\"id\" href=\"#atkbd_platform_fixup_data\">atkbd_platform_fixup_data</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * atkbd_set_device_attrs() sets up keyboard's input device structure</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static void <a class=\"id\" href=\"#atkbd_set_device_attrs\">atkbd_set_device_attrs</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#input_dev\">input_dev</a> *<a class=\"id\" href=\"#input_dev\">input_dev</a> = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#extra\">extra</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#snprintf\">snprintf</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#name\">name</a>, sizeof(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#name\">name</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> \"AT Set 2 Extra keyboard\");", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#snprintf\">snprintf</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#name\">name</a>, sizeof(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#name\">name</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> \"AT %s Set %d keyboard\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#translated\">translated</a> ? \"Translated\" : \"Raw\", <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#set\">set</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#snprintf\">snprintf</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#phys\">phys</a>, sizeof(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#phys\">phys</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/> \"%s/input0\", <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#ps2dev\">ps2dev</a>.<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#phys\">phys</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#name\">name</a> = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#name\">name</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#phys\">phys</a> = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#phys\">phys</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#bustype\">bustype</a> = <a class=\"id\" href=\"#BUS_I8042\">BUS_I8042</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#vendor\">vendor</a> = 0x0001;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#product\">product</a> = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#translated\">translated</a> ? 1 : <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#set\">set</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#version\">version</a> = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#id\">id</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#event\">event</a> = <a class=\"id\" href=\"#atkbd_event\">atkbd_event</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#parent\">parent</a> = &amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#ps2dev\">ps2dev</a>.<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#input_set_drvdata\">input_set_drvdata</a>(<a class=\"id\" href=\"#input_dev\">input_dev</a>, <a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#evbit\">evbit</a>[0] = <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#EV_KEY\">EV_KEY</a>) | <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#EV_REP\">EV_REP</a>) |", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#EV_MSC\">EV_MSC</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#write\">write</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#evbit\">evbit</a>[0] |= <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#EV_LED\">EV_LED</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#ledbit\">ledbit</a>[0] = <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#LED_NUML\">LED_NUML</a>) |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#LED_CAPSL\">LED_CAPSL</a>) | <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#LED_SCROLLL\">LED_SCROLLL</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#extra\">extra</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#ledbit\">ledbit</a>[0] |= <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#LED_COMPOSE\">LED_COMPOSE</a>) |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#LED_SUSPEND\">LED_SUSPEND</a>) | <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#LED_SLEEP\">LED_SLEEP</a>) |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#LED_MUTE\">LED_MUTE</a>) | <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#LED_MISC\">LED_MISC</a>);", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#softrepeat\">softrepeat</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#rep\">rep</a>[<a class=\"id\" href=\"#REP_DELAY\">REP_DELAY</a>] = 250;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#rep\">rep</a>[<a class=\"id\" href=\"#REP_PERIOD\">REP_PERIOD</a>] = 33;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#mscbit\">mscbit</a>[0] = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#softraw\">softraw</a> ? <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#MSC_SCAN\">MSC_SCAN</a>) :", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#MSC_RAW\">MSC_RAW</a>) | <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#MSC_SCAN\">MSC_SCAN</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#scroll\">scroll</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#evbit\">evbit</a>[0] |= <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#EV_REL\">EV_REL</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#relbit\">relbit</a>[0] = <a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#REL_WHEEL\">REL_WHEEL</a>) |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#BIT_MASK\">BIT_MASK</a>(<a class=\"id\" href=\"#REL_HWHEEL\">REL_HWHEEL</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__set_bit\">__set_bit</a>(<a class=\"id\" href=\"#BTN_MIDDLE\">BTN_MIDDLE</a>, <a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#keybit\">keybit</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#keycode\">keycode</a> = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#keycode\">keycode</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#keycodesize\">keycodesize</a> = sizeof(unsigned short);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#keycodemax\">keycodemax</a> = <a class=\"id\" href=\"#ARRAY_SIZE\">ARRAY_SIZE</a>(<a class=\"id\" href=\"#atkbd_set2_keycode\">atkbd_set2_keycode</a>);", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#ATKBD_KEYMAP_SIZE\">ATKBD_KEYMAP_SIZE</a>; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#keycode\">keycode</a>[<a class=\"id\" href=\"#i\">i</a>] != <a class=\"id\" href=\"#KEY_RESERVED\">KEY_RESERVED</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#keycode\">keycode</a>[<a class=\"id\" href=\"#i\">i</a>] != <a class=\"id\" href=\"#ATKBD_KEY_NULL\">ATKBD_KEY_NULL</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#keycode\">keycode</a>[<a class=\"id\" href=\"#i\">i</a>] &lt; <a class=\"id\" href=\"#ATKBD_SPECIAL\">ATKBD_SPECIAL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__set_bit\">__set_bit</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#keycode\">keycode</a>[<a class=\"id\" href=\"#i\">i</a>], <a class=\"id\" href=\"#input_dev\">input_dev</a>-><a class=\"id\" href=\"#keybit\">keybit</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * atkbd_connect() is called when the serio module finds an interface</span>", 
"<span class=\"comment\"> * that isn't handled yet by an appropriate device driver. We check if</span>", 
"<span class=\"comment\"> * there is an AT keyboard out there and if yes, we register ourselves</span>", 
"<span class=\"comment\"> * to the input module.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static int <a class=\"id\" href=\"#atkbd_connect\">atkbd_connect</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>, struct <a class=\"id\" href=\"#serio_driver\">serio_driver</a> *<a class=\"id\" href=\"#drv\">drv</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#input_dev\">input_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof(struct <a class=\"id\" href=\"#atkbd\">atkbd</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#input_allocate_device\">input_allocate_device</a>();", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#atkbd\">atkbd</a> || !<a class=\"id\" href=\"#dev\">dev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#fail1\">fail1</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ps2_init\">ps2_init</a>(&amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#ps2dev\">ps2dev</a>, <a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#INIT_DELAYED_WORK\">INIT_DELAYED_WORK</a>(&amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#event_work\">event_work</a>, <a class=\"id\" href=\"#atkbd_event_work\">atkbd_event_work</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_init\">mutex_init</a>(&amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#mutex\">mutex</a>);", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#id\">id</a>.<a class=\"id\" href=\"#type\">type</a>) {", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#SERIO_8042_XL\">SERIO_8042_XL</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#translated\">translated</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Fall through */</span>", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#SERIO_8042\">SERIO_8042</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#write\">write</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#write\">write</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#softraw\">softraw</a> = <a class=\"id\" href=\"#atkbd_softraw\">atkbd_softraw</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#softrepeat\">softrepeat</a> = <a class=\"id\" href=\"#atkbd_softrepeat\">atkbd_softrepeat</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#scroll\">scroll</a> = <a class=\"id\" href=\"#atkbd_scroll\">atkbd_scroll</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#softrepeat\">softrepeat</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#softraw\">softraw</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serio_set_drvdata\">serio_set_drvdata</a>(<a class=\"id\" href=\"#serio\">serio</a>, <a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#serio_open\">serio_open</a>(<a class=\"id\" href=\"#serio\">serio</a>, <a class=\"id\" href=\"#drv\">drv</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#fail2\">fail2</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#write\">write</a>) {", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd_probe\">atkbd_probe</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#fail3\">fail3</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#atkbd_select_set\">atkbd_select_set</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>, <a class=\"id\" href=\"#atkbd_set\">atkbd_set</a>, <a class=\"id\" href=\"#atkbd_extra\">atkbd_extra</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_reset_state\">atkbd_reset_state</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_activate\">atkbd_activate</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#set\">set</a> = 2;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#id\">id</a> = 0xab00;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd_set_keycode_table\">atkbd_set_keycode_table</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd_set_device_attrs\">atkbd_set_device_attrs</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#sysfs_create_group\">sysfs_create_group</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#kobj\">kobj</a>, &amp;<a class=\"id\" href=\"#atkbd_attribute_group\">atkbd_attribute_group</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#fail3\">fail3</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd_enable\">atkbd_enable</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#input_register_device\">input_register_device</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#fail4\">fail4</a>;", 
"", 
"<span class=\"ts\"/>return 0;", 
"", 
" <a class=\"id\" href=\"#fail4\">fail4</a>: <a class=\"id\" href=\"#sysfs_remove_group\">sysfs_remove_group</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>.<a class=\"id\" href=\"#kobj\">kobj</a>, &amp;<a class=\"id\" href=\"#atkbd_attribute_group\">atkbd_attribute_group</a>);", 
" <a class=\"id\" href=\"#fail3\">fail3</a>:<span class=\"ts\"/><a class=\"id\" href=\"#serio_close\">serio_close</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
" <a class=\"id\" href=\"#fail2\">fail2</a>:<span class=\"ts\"/><a class=\"id\" href=\"#serio_set_drvdata\">serio_set_drvdata</a>(<a class=\"id\" href=\"#serio\">serio</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
" <a class=\"id\" href=\"#fail1\">fail1</a>:<span class=\"ts\"/><a class=\"id\" href=\"#input_free_device\">input_free_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * atkbd_reconnect() tries to restore keyboard into a sane state and is</span>", 
"<span class=\"comment\"> * most likely called on resume.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static int <a class=\"id\" href=\"#atkbd_reconnect\">atkbd_reconnect</a>(struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a> = <a class=\"id\" href=\"#serio_get_drvdata\">serio_get_drvdata</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio_driver\">serio_driver</a> *<a class=\"id\" href=\"#drv\">drv</a> = <a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#drv\">drv</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a> = -1;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#atkbd\">atkbd</a> || !<a class=\"id\" href=\"#drv\">drv</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_dbg\">dev_dbg</a>(&amp;<a class=\"id\" href=\"#serio\">serio</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"reconnect request, but serio is disconnected, ignoring...\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_lock\">mutex_lock</a>(&amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#mutex\">mutex</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd_disable\">atkbd_disable</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#write\">write</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd_probe\">atkbd_probe</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#set\">set</a> != <a class=\"id\" href=\"#atkbd_select_set\">atkbd_select_set</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>, <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#set\">set</a>, <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#extra\">extra</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out\">out</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_activate\">atkbd_activate</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * Restore LED state and repeat rate. While input core</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * will do this for us at resume time reconnect may happen</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * because user requested it via sysfs or simply because</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * keyboard was unplugged and plugged in again so we need</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * to do it ourselves here.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_set_leds\">atkbd_set_leds</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#softrepeat\">softrepeat</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_set_repeat_rate\">atkbd_set_repeat_rate</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd_enable\">atkbd_enable</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = 0;", 
"", 
" <a class=\"id\" href=\"#out\">out</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#mutex\">mutex</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#serio_device_id\">serio_device_id</a> <a class=\"id\" href=\"#atkbd_serio_ids\">atkbd_serio_ids</a>[] = {", 
"<span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#type\">type</a><span class=\"ts\"/>= <a class=\"id\" href=\"#SERIO_8042\">SERIO_8042</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#proto\">proto</a><span class=\"ts\"/>= <a class=\"id\" href=\"#SERIO_ANY\">SERIO_ANY</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#id\">id</a><span class=\"ts\"/>= <a class=\"id\" href=\"#SERIO_ANY\">SERIO_ANY</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#extra\">extra</a><span class=\"ts\"/>= <a class=\"id\" href=\"#SERIO_ANY\">SERIO_ANY</a>,", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#type\">type</a><span class=\"ts\"/>= <a class=\"id\" href=\"#SERIO_8042_XL\">SERIO_8042_XL</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#proto\">proto</a><span class=\"ts\"/>= <a class=\"id\" href=\"#SERIO_ANY\">SERIO_ANY</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#id\">id</a><span class=\"ts\"/>= <a class=\"id\" href=\"#SERIO_ANY\">SERIO_ANY</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#extra\">extra</a><span class=\"ts\"/>= <a class=\"id\" href=\"#SERIO_ANY\">SERIO_ANY</a>,", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#type\">type</a><span class=\"ts\"/>= <a class=\"id\" href=\"#SERIO_RS232\">SERIO_RS232</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#proto\">proto</a><span class=\"ts\"/>= <a class=\"id\" href=\"#SERIO_PS2SER\">SERIO_PS2SER</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#id\">id</a><span class=\"ts\"/>= <a class=\"id\" href=\"#SERIO_ANY\">SERIO_ANY</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#extra\">extra</a><span class=\"ts\"/>= <a class=\"id\" href=\"#SERIO_ANY\">SERIO_ANY</a>,", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>{ 0 }", 
"};", 
"", 
"<a class=\"id\" href=\"#MODULE_DEVICE_TABLE\">MODULE_DEVICE_TABLE</a>(<a class=\"id\" href=\"#serio\">serio</a>, <a class=\"id\" href=\"#atkbd_serio_ids\">atkbd_serio_ids</a>);", 
"", 
"static struct <a class=\"id\" href=\"#serio_driver\">serio_driver</a> <a class=\"id\" href=\"#atkbd_drv\">atkbd_drv</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#driver\">driver</a><span class=\"ts\"/><span class=\"ts\"/>= {", 
"<span class=\"ts\"/><span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a><span class=\"ts\"/>= \"atkbd\",", 
"<span class=\"ts\"/>},", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#description\">description</a><span class=\"ts\"/>= <a class=\"id\" href=\"#DRIVER_DESC\">DRIVER_DESC</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#id_table\">id_table</a><span class=\"ts\"/>= <a class=\"id\" href=\"#atkbd_serio_ids\">atkbd_serio_ids</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#interrupt\">interrupt</a><span class=\"ts\"/>= <a class=\"id\" href=\"#atkbd_interrupt\">atkbd_interrupt</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#connect\">connect</a><span class=\"ts\"/>= <a class=\"id\" href=\"#atkbd_connect\">atkbd_connect</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#reconnect\">reconnect</a><span class=\"ts\"/>= <a class=\"id\" href=\"#atkbd_reconnect\">atkbd_reconnect</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#disconnect\">disconnect</a><span class=\"ts\"/>= <a class=\"id\" href=\"#atkbd_disconnect\">atkbd_disconnect</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#cleanup\">cleanup</a><span class=\"ts\"/>= <a class=\"id\" href=\"#atkbd_cleanup\">atkbd_cleanup</a>,", 
"};", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#atkbd_attr_show_helper\">atkbd_attr_show_helper</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, char *<a class=\"id\" href=\"#buf\">buf</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ssize_t\">ssize_t</a> (*<a class=\"id\" href=\"#handler\">handler</a>)(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *, char *))", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a> = <a class=\"id\" href=\"#to_serio_port\">to_serio_port</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a> = <a class=\"id\" href=\"#serio_get_drvdata\">serio_get_drvdata</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#handler\">handler</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>, <a class=\"id\" href=\"#buf\">buf</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#atkbd_attr_set_helper\">atkbd_attr_set_helper</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>, const char *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ssize_t\">ssize_t</a> (*<a class=\"id\" href=\"#handler\">handler</a>)(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *, const char *, <a class=\"id\" href=\"#size_t\">size_t</a>))", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#serio\">serio</a> *<a class=\"id\" href=\"#serio\">serio</a> = <a class=\"id\" href=\"#to_serio_port\">to_serio_port</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a> = <a class=\"id\" href=\"#serio_get_drvdata\">serio_get_drvdata</a>(<a class=\"id\" href=\"#serio\">serio</a>);", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#mutex_lock_interruptible\">mutex_lock_interruptible</a>(&amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#mutex\">mutex</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd_disable\">atkbd_disable</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#handler\">handler</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>, <a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#count\">count</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#atkbd_enable\">atkbd_enable</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mutex_unlock\">mutex_unlock</a>(&amp;<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#mutex\">mutex</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#atkbd_show_extra\">atkbd_show_extra</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%d\\n\", <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#extra\">extra</a> ? 1 : 0);", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#atkbd_set_extra\">atkbd_set_extra</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>, const char *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#input_dev\">input_dev</a> *<a class=\"id\" href=\"#old_dev\">old_dev</a>, *<a class=\"id\" href=\"#new_dev\">new_dev</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#old_extra\">old_extra</a>;", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#old_set\">old_set</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#write\">write</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#strict_strtoul\">strict_strtoul</a>(<a class=\"id\" href=\"#buf\">buf</a>, 10, &amp;<a class=\"id\" href=\"#value\">value</a>) || <a class=\"id\" href=\"#value\">value</a> &gt; 1)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#extra\">extra</a> != <a class=\"id\" href=\"#value\">value</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * Since device's properties will change we need to</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * unregister old device. But allocate and register</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * new one first to make sure we have it.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#old_dev\">old_dev</a> = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#old_extra\">old_extra</a> = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#extra\">extra</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#old_set\">old_set</a> = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#set\">set</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_dev\">new_dev</a> = <a class=\"id\" href=\"#input_allocate_device\">input_allocate_device</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#new_dev\">new_dev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#new_dev\">new_dev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#atkbd_select_set\">atkbd_select_set</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>, <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#set\">set</a>, <a class=\"id\" href=\"#value\">value</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_reset_state\">atkbd_reset_state</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_activate\">atkbd_activate</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_set_keycode_table\">atkbd_set_keycode_table</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_set_device_attrs\">atkbd_set_device_attrs</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#input_register_device\">input_register_device</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_free_device\">input_free_device</a>(<a class=\"id\" href=\"#new_dev\">new_dev</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#old_dev\">old_dev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#atkbd_select_set\">atkbd_select_set</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>, <a class=\"id\" href=\"#old_set\">old_set</a>, <a class=\"id\" href=\"#old_extra\">old_extra</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_set_keycode_table\">atkbd_set_keycode_table</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_set_device_attrs\">atkbd_set_device_attrs</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_unregister_device\">input_unregister_device</a>(<a class=\"id\" href=\"#old_dev\">old_dev</a>);", 
"", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#count\">count</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#atkbd_show_force_release\">atkbd_show_force_release</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#len\">len</a> = <a class=\"id\" href=\"#bitmap_scnlistprintf\">bitmap_scnlistprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#PAGE_SIZE\">PAGE_SIZE</a> - 2,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#force_release_mask\">force_release_mask</a>, <a class=\"id\" href=\"#ATKBD_KEYMAP_SIZE\">ATKBD_KEYMAP_SIZE</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#buf\">buf</a>[<a class=\"id\" href=\"#len\">len</a>++] = '\\n';", 
"<span class=\"ts\"/><a class=\"id\" href=\"#buf\">buf</a>[<a class=\"id\" href=\"#len\">len</a>] = '\\0';", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#len\">len</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#atkbd_set_force_release\">atkbd_set_force_release</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>const char *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>)", 
"{", 
"<span class=\"ts\"/><span class=\"comment\">/* 64 bytes on stack should be acceptable */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#DECLARE_BITMAP\">DECLARE_BITMAP</a>(<a class=\"id\" href=\"#new_mask\">new_mask</a>, <a class=\"id\" href=\"#ATKBD_KEYMAP_SIZE\">ATKBD_KEYMAP_SIZE</a>);", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#bitmap_parselist\">bitmap_parselist</a>(<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#new_mask\">new_mask</a>, <a class=\"id\" href=\"#ATKBD_KEYMAP_SIZE\">ATKBD_KEYMAP_SIZE</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#force_release_mask\">force_release_mask</a>, <a class=\"id\" href=\"#new_mask\">new_mask</a>, sizeof(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#force_release_mask\">force_release_mask</a>));", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#count\">count</a>;", 
"}", 
"", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#atkbd_show_scroll\">atkbd_show_scroll</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%d\\n\", <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#scroll\">scroll</a> ? 1 : 0);", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#atkbd_set_scroll\">atkbd_set_scroll</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>, const char *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#input_dev\">input_dev</a> *<a class=\"id\" href=\"#old_dev\">old_dev</a>, *<a class=\"id\" href=\"#new_dev\">new_dev</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#old_scroll\">old_scroll</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#strict_strtoul\">strict_strtoul</a>(<a class=\"id\" href=\"#buf\">buf</a>, 10, &amp;<a class=\"id\" href=\"#value\">value</a>) || <a class=\"id\" href=\"#value\">value</a> &gt; 1)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#scroll\">scroll</a> != <a class=\"id\" href=\"#value\">value</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#old_dev\">old_dev</a> = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#old_scroll\">old_scroll</a> = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#scroll\">scroll</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_dev\">new_dev</a> = <a class=\"id\" href=\"#input_allocate_device\">input_allocate_device</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#new_dev\">new_dev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#new_dev\">new_dev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#scroll\">scroll</a> = <a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_set_keycode_table\">atkbd_set_keycode_table</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_set_device_attrs\">atkbd_set_device_attrs</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#input_register_device\">input_register_device</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_free_device\">input_free_device</a>(<a class=\"id\" href=\"#new_dev\">new_dev</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#scroll\">scroll</a> = <a class=\"id\" href=\"#old_scroll\">old_scroll</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#old_dev\">old_dev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_set_keycode_table\">atkbd_set_keycode_table</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_set_device_attrs\">atkbd_set_device_attrs</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_unregister_device\">input_unregister_device</a>(<a class=\"id\" href=\"#old_dev\">old_dev</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#count\">count</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#atkbd_show_set\">atkbd_show_set</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%d\\n\", <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#set\">set</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#atkbd_set_set\">atkbd_set_set</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>, const char *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#input_dev\">input_dev</a> *<a class=\"id\" href=\"#old_dev\">old_dev</a>, *<a class=\"id\" href=\"#new_dev\">new_dev</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#old_set\">old_set</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#old_extra\">old_extra</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#write\">write</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#strict_strtoul\">strict_strtoul</a>(<a class=\"id\" href=\"#buf\">buf</a>, 10, &amp;<a class=\"id\" href=\"#value\">value</a>) || (<a class=\"id\" href=\"#value\">value</a> != 2 && <a class=\"id\" href=\"#value\">value</a> != 3))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#set\">set</a> != <a class=\"id\" href=\"#value\">value</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#old_dev\">old_dev</a> = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#old_extra\">old_extra</a> = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#extra\">extra</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#old_set\">old_set</a> = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#set\">set</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_dev\">new_dev</a> = <a class=\"id\" href=\"#input_allocate_device\">input_allocate_device</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#new_dev\">new_dev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#new_dev\">new_dev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#atkbd_select_set\">atkbd_select_set</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>, <a class=\"id\" href=\"#value\">value</a>, <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#extra\">extra</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_reset_state\">atkbd_reset_state</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_activate\">atkbd_activate</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_set_keycode_table\">atkbd_set_keycode_table</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_set_device_attrs\">atkbd_set_device_attrs</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#input_register_device\">input_register_device</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_free_device\">input_free_device</a>(<a class=\"id\" href=\"#new_dev\">new_dev</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#old_dev\">old_dev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#set\">set</a> = <a class=\"id\" href=\"#atkbd_select_set\">atkbd_select_set</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>, <a class=\"id\" href=\"#old_set\">old_set</a>, <a class=\"id\" href=\"#old_extra\">old_extra</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_set_keycode_table\">atkbd_set_keycode_table</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_set_device_attrs\">atkbd_set_device_attrs</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_unregister_device\">input_unregister_device</a>(<a class=\"id\" href=\"#old_dev\">old_dev</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#count\">count</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#atkbd_show_softrepeat\">atkbd_show_softrepeat</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%d\\n\", <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#softrepeat\">softrepeat</a> ? 1 : 0);", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#atkbd_set_softrepeat\">atkbd_set_softrepeat</a>(struct <a class=\"id\" href=\"#atkbd\">atkbd</a> *<a class=\"id\" href=\"#atkbd\">atkbd</a>, const char *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#input_dev\">input_dev</a> *<a class=\"id\" href=\"#old_dev\">old_dev</a>, *<a class=\"id\" href=\"#new_dev\">new_dev</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#old_softrepeat\">old_softrepeat</a>, <a class=\"id\" href=\"#old_softraw\">old_softraw</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#write\">write</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#strict_strtoul\">strict_strtoul</a>(<a class=\"id\" href=\"#buf\">buf</a>, 10, &amp;<a class=\"id\" href=\"#value\">value</a>) || <a class=\"id\" href=\"#value\">value</a> &gt; 1)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#softrepeat\">softrepeat</a> != <a class=\"id\" href=\"#value\">value</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#old_dev\">old_dev</a> = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#old_softrepeat\">old_softrepeat</a> = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#softrepeat\">softrepeat</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#old_softraw\">old_softraw</a> = <a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#softraw\">softraw</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#new_dev\">new_dev</a> = <a class=\"id\" href=\"#input_allocate_device\">input_allocate_device</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#new_dev\">new_dev</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#new_dev\">new_dev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#softrepeat\">softrepeat</a> = <a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#softrepeat\">softrepeat</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#softraw\">softraw</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_set_device_attrs\">atkbd_set_device_attrs</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#input_register_device\">input_register_device</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_free_device\">input_free_device</a>(<a class=\"id\" href=\"#new_dev\">new_dev</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#old_dev\">old_dev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#softrepeat\">softrepeat</a> = <a class=\"id\" href=\"#old_softrepeat\">old_softrepeat</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd\">atkbd</a>-><a class=\"id\" href=\"#softraw\">softraw</a> = <a class=\"id\" href=\"#old_softraw\">old_softraw</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atkbd_set_device_attrs\">atkbd_set_device_attrs</a>(<a class=\"id\" href=\"#atkbd\">atkbd</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#input_unregister_device\">input_unregister_device</a>(<a class=\"id\" href=\"#old_dev\">old_dev</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#count\">count</a>;", 
"}", 
"", 
"", 
];
xr_frag_insert('l/dc/468598092a8b489f4e9f0ae02367acdccce5ba.xr', __xr_tmp);
