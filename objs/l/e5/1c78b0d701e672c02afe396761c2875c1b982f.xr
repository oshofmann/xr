var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * event.c - exporting ACPI events via procfs</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *  Copyright (C) 2001, 2002 Andy Grover &lt;andrew.grover@intel.com&gt;</span>", 
"<span class=\"comment\"> *  Copyright (C) 2001, 2002 Paul Diefenbaugh &lt;paul.s.diefenbaugh@intel.com&gt;</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#spinlock\">spinlock</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#proc_fs\">proc_fs</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#init\">init</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#poll\">poll</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#gfp\">gfp</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#acpi\">acpi</a>/<a class=\"id\" href=\"#acpi_drivers\">acpi_drivers</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#net\">net</a>/<a class=\"id\" href=\"#netlink\">netlink</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#net\">net</a>/<a class=\"id\" href=\"#genetlink\">genetlink</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> \"internal.h\"", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#_COMPONENT\">_COMPONENT</a><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ACPI_SYSTEM_COMPONENT\">ACPI_SYSTEM_COMPONENT</a>", 
"<a class=\"id\" href=\"#ACPI_MODULE_NAME\">ACPI_MODULE_NAME</a>(\"event\");", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_ACPI_PROC_EVENT\">CONFIG_ACPI_PROC_EVENT</a>", 
"<span class=\"comment\">/* Global vars for handling event proc entry */</span>", 
"static <a class=\"id\" href=\"#DEFINE_SPINLOCK\">DEFINE_SPINLOCK</a>(<a class=\"id\" href=\"#acpi_system_event_lock\">acpi_system_event_lock</a>);", 
"int <a class=\"id\" href=\"#event_is_open\">event_is_open</a> = 0;", 
"extern struct <a class=\"id\" href=\"#list_head\">list_head</a> <a class=\"id\" href=\"#acpi_bus_event_list\">acpi_bus_event_list</a>;", 
"extern <a class=\"id\" href=\"#wait_queue_head_t\">wait_queue_head_t</a> <a class=\"id\" href=\"#acpi_bus_event_queue\">acpi_bus_event_queue</a>;", 
"", 
"static int <a class=\"id\" href=\"#acpi_system_open_event\">acpi_system_open_event</a>(struct <a class=\"id\" href=\"#inode\">inode</a> *<a class=\"id\" href=\"#inode\">inode</a>, struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irq\">spin_lock_irq</a>(&amp;<a class=\"id\" href=\"#acpi_system_event_lock\">acpi_system_event_lock</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#event_is_open\">event_is_open</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out_busy\">out_busy</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#event_is_open\">event_is_open</a> = 1;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irq\">spin_unlock_irq</a>(&amp;<a class=\"id\" href=\"#acpi_system_event_lock\">acpi_system_event_lock</a>);", 
"<span class=\"ts\"/>return 0;", 
"", 
"      <a class=\"id\" href=\"#out_busy\">out_busy</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irq\">spin_unlock_irq</a>(&amp;<a class=\"id\" href=\"#acpi_system_event_lock\">acpi_system_event_lock</a>);", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#EBUSY\">EBUSY</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a>", 
"<a class=\"id\" href=\"#acpi_system_read_event\">acpi_system_read_event</a>(struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>, char <a class=\"id\" href=\"#__user\">__user</a> * <a class=\"id\" href=\"#buffer\">buffer</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#loff_t\">loff_t</a> * <a class=\"id\" href=\"#ppos\">ppos</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#result\">result</a> = 0;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_bus_event\">acpi_bus_event</a> <a class=\"id\" href=\"#event\">event</a>;", 
"<span class=\"ts\"/>static char <a class=\"id\" href=\"#str\">str</a>[<a class=\"id\" href=\"#ACPI_MAX_STRING\">ACPI_MAX_STRING</a>];", 
"<span class=\"ts\"/>static int <a class=\"id\" href=\"#chars_remaining\">chars_remaining</a> = 0;", 
"<span class=\"ts\"/>static char *<a class=\"id\" href=\"#ptr\">ptr</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#chars_remaining\">chars_remaining</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(&amp;<a class=\"id\" href=\"#event\">event</a>, 0, sizeof(struct <a class=\"id\" href=\"#acpi_bus_event\">acpi_bus_event</a>));", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((<a class=\"id\" href=\"#file\">file</a>-><a class=\"id\" href=\"#f_flags\">f_flags</a> &amp; <a class=\"id\" href=\"#O_NONBLOCK\">O_NONBLOCK</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>    && (<a class=\"id\" href=\"#list_empty\">list_empty</a>(&amp;<a class=\"id\" href=\"#acpi_bus_event_list\">acpi_bus_event_list</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EAGAIN\">EAGAIN</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#acpi_bus_receive_event\">acpi_bus_receive_event</a>(&amp;<a class=\"id\" href=\"#event\">event</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#result\">result</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#chars_remaining\">chars_remaining</a> = <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#str\">str</a>, \"%s %s %08x %08x\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#event\">event</a>.<a class=\"id\" href=\"#device_class\">device_class</a> ? <a class=\"id\" href=\"#event\">event</a>.", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#device_class\">device_class</a> : \"<unknown>\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#event\">event</a>.<a class=\"id\" href=\"#bus_id\">bus_id</a> ? <a class=\"id\" href=\"#event\">event</a>.", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#bus_id\">bus_id</a> : \"<unknown>\", <a class=\"id\" href=\"#event\">event</a>.<a class=\"id\" href=\"#type\">type</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#event\">event</a>.<a class=\"id\" href=\"#data\">data</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ptr\">ptr</a> = <a class=\"id\" href=\"#str\">str</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#chars_remaining\">chars_remaining</a> &lt; <a class=\"id\" href=\"#count\">count</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#count\">count</a> = <a class=\"id\" href=\"#chars_remaining\">chars_remaining</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#buffer\">buffer</a>, <a class=\"id\" href=\"#ptr\">ptr</a>, <a class=\"id\" href=\"#count\">count</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"", 
"<span class=\"ts\"/>*<a class=\"id\" href=\"#ppos\">ppos</a> += <a class=\"id\" href=\"#count\">count</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#chars_remaining\">chars_remaining</a> -= <a class=\"id\" href=\"#count\">count</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ptr\">ptr</a> += <a class=\"id\" href=\"#count\">count</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#count\">count</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#acpi_system_close_event\">acpi_system_close_event</a>(struct <a class=\"id\" href=\"#inode\">inode</a> *<a class=\"id\" href=\"#inode\">inode</a>, struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irq\">spin_lock_irq</a>(&amp;<a class=\"id\" href=\"#acpi_system_event_lock\">acpi_system_event_lock</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#event_is_open\">event_is_open</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irq\">spin_unlock_irq</a>(&amp;<a class=\"id\" href=\"#acpi_system_event_lock\">acpi_system_event_lock</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static unsigned int <a class=\"id\" href=\"#acpi_system_poll_event\">acpi_system_poll_event</a>(struct <a class=\"id\" href=\"#file\">file</a> *<a class=\"id\" href=\"#file\">file</a>, <a class=\"id\" href=\"#poll_table\">poll_table</a> * <a class=\"id\" href=\"#wait\">wait</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#poll_wait\">poll_wait</a>(<a class=\"id\" href=\"#file\">file</a>, &amp;<a class=\"id\" href=\"#acpi_bus_event_queue\">acpi_bus_event_queue</a>, <a class=\"id\" href=\"#wait\">wait</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#list_empty\">list_empty</a>(&amp;<a class=\"id\" href=\"#acpi_bus_event_list\">acpi_bus_event_list</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#POLLIN\">POLLIN</a> | <a class=\"id\" href=\"#POLLRDNORM\">POLLRDNORM</a>;", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static const struct <a class=\"id\" href=\"#file_operations\">file_operations</a> <a class=\"id\" href=\"#acpi_system_event_ops\">acpi_system_event_ops</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#owner\">owner</a> = <a class=\"id\" href=\"#THIS_MODULE\">THIS_MODULE</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#open\">open</a> = <a class=\"id\" href=\"#acpi_system_open_event\">acpi_system_open_event</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#read\">read</a> = <a class=\"id\" href=\"#acpi_system_read_event\">acpi_system_read_event</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#release\">release</a> = <a class=\"id\" href=\"#acpi_system_close_event\">acpi_system_close_event</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#poll\">poll</a> = <a class=\"id\" href=\"#acpi_system_poll_event\">acpi_system_poll_event</a>,", 
"};", 
"#<a class=\"id\" href=\"#endif\">endif</a><span class=\"ts\"/><span class=\"comment\">/* CONFIG_ACPI_PROC_EVENT */</span>", 
"", 
"<span class=\"comment\">/* ACPI notifier chain */</span>", 
"static <a class=\"id\" href=\"#BLOCKING_NOTIFIER_HEAD\">BLOCKING_NOTIFIER_HEAD</a>(<a class=\"id\" href=\"#acpi_chain_head\">acpi_chain_head</a>);", 
"", 
"int <a class=\"id\" href=\"#acpi_notifier_call_chain\">acpi_notifier_call_chain</a>(struct <a class=\"id\" href=\"#acpi_device\">acpi_device</a> *<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#type\">type</a>, <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_bus_event\">acpi_bus_event</a> <a class=\"id\" href=\"#event\">event</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#strcpy\">strcpy</a>(<a class=\"id\" href=\"#event\">event</a>.<a class=\"id\" href=\"#device_class\">device_class</a>, <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#pnp\">pnp</a>.<a class=\"id\" href=\"#device_class\">device_class</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#strcpy\">strcpy</a>(<a class=\"id\" href=\"#event\">event</a>.<a class=\"id\" href=\"#bus_id\">bus_id</a>, <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#pnp\">pnp</a>.<a class=\"id\" href=\"#bus_id\">bus_id</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#event\">event</a>.<a class=\"id\" href=\"#type\">type</a> = <a class=\"id\" href=\"#type\">type</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#event\">event</a>.<a class=\"id\" href=\"#data\">data</a> = <a class=\"id\" href=\"#data\">data</a>;", 
"<span class=\"ts\"/>return (<a class=\"id\" href=\"#blocking_notifier_call_chain\">blocking_notifier_call_chain</a>(&amp;<a class=\"id\" href=\"#acpi_chain_head\">acpi_chain_head</a>, 0, (void *)&amp;<a class=\"id\" href=\"#event\">event</a>)", 
"                        == <a class=\"id\" href=\"#NOTIFY_BAD\">NOTIFY_BAD</a>) ? -<a class=\"id\" href=\"#EINVAL\">EINVAL</a> : 0;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#acpi_notifier_call_chain\">acpi_notifier_call_chain</a>);", 
"", 
"int <a class=\"id\" href=\"#register_acpi_notifier\">register_acpi_notifier</a>(struct <a class=\"id\" href=\"#notifier_block\">notifier_block</a> *<a class=\"id\" href=\"#nb\">nb</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#blocking_notifier_chain_register\">blocking_notifier_chain_register</a>(&amp;<a class=\"id\" href=\"#acpi_chain_head\">acpi_chain_head</a>, <a class=\"id\" href=\"#nb\">nb</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#register_acpi_notifier\">register_acpi_notifier</a>);", 
"", 
"int <a class=\"id\" href=\"#unregister_acpi_notifier\">unregister_acpi_notifier</a>(struct <a class=\"id\" href=\"#notifier_block\">notifier_block</a> *<a class=\"id\" href=\"#nb\">nb</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#blocking_notifier_chain_unregister\">blocking_notifier_chain_unregister</a>(&amp;<a class=\"id\" href=\"#acpi_chain_head\">acpi_chain_head</a>, <a class=\"id\" href=\"#nb\">nb</a>);", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#unregister_acpi_notifier\">unregister_acpi_notifier</a>);", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_NET\">CONFIG_NET</a>", 
"static unsigned int <a class=\"id\" href=\"#acpi_event_seqnum\">acpi_event_seqnum</a>;", 
"struct <a class=\"id\" href=\"#acpi_genl_event\">acpi_genl_event</a> {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#acpi_device_class\">acpi_device_class</a> <a class=\"id\" href=\"#device_class\">device_class</a>;", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#bus_id\">bus_id</a>[15];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#type\">type</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#data\">data</a>;", 
"};", 
"", 
"<span class=\"comment\">/* attributes of acpi_genl_family */</span>", 
"enum {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ACPI_GENL_ATTR_UNSPEC\">ACPI_GENL_ATTR_UNSPEC</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ACPI_GENL_ATTR_EVENT\">ACPI_GENL_ATTR_EVENT</a>,<span class=\"ts\"/><span class=\"comment\">/* ACPI event info needed by user space */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__ACPI_GENL_ATTR_MAX\">__ACPI_GENL_ATTR_MAX</a>,", 
"};", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ACPI_GENL_ATTR_MAX\">ACPI_GENL_ATTR_MAX</a> (<a class=\"id\" href=\"#__ACPI_GENL_ATTR_MAX\">__ACPI_GENL_ATTR_MAX</a> - 1)", 
"", 
"<span class=\"comment\">/* commands supported by the acpi_genl_family */</span>", 
"enum {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ACPI_GENL_CMD_UNSPEC\">ACPI_GENL_CMD_UNSPEC</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ACPI_GENL_CMD_EVENT\">ACPI_GENL_CMD_EVENT</a>,<span class=\"ts\"/><span class=\"comment\">/* kernel-&gt;user notifications for ACPI events */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__ACPI_GENL_CMD_MAX\">__ACPI_GENL_CMD_MAX</a>,", 
"};", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ACPI_GENL_CMD_MAX\">ACPI_GENL_CMD_MAX</a> (<a class=\"id\" href=\"#__ACPI_GENL_CMD_MAX\">__ACPI_GENL_CMD_MAX</a> - 1)", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ACPI_GENL_FAMILY_NAME\">ACPI_GENL_FAMILY_NAME</a><span class=\"ts\"/><span class=\"ts\"/>\"acpi_event\"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ACPI_GENL_VERSION\">ACPI_GENL_VERSION</a><span class=\"ts\"/><span class=\"ts\"/>0x01", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#ACPI_GENL_MCAST_GROUP_NAME\">ACPI_GENL_MCAST_GROUP_NAME</a> <span class=\"ts\"/>\"acpi_mc_group\"", 
"", 
"static struct <a class=\"id\" href=\"#genl_family\">genl_family</a> <a class=\"id\" href=\"#acpi_event_genl_family\">acpi_event_genl_family</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#id\">id</a> = <a class=\"id\" href=\"#GENL_ID_GENERATE\">GENL_ID_GENERATE</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a> = <a class=\"id\" href=\"#ACPI_GENL_FAMILY_NAME\">ACPI_GENL_FAMILY_NAME</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#version\">version</a> = <a class=\"id\" href=\"#ACPI_GENL_VERSION\">ACPI_GENL_VERSION</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#maxattr\">maxattr</a> = <a class=\"id\" href=\"#ACPI_GENL_ATTR_MAX\">ACPI_GENL_ATTR_MAX</a>,", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#genl_multicast_group\">genl_multicast_group</a> <a class=\"id\" href=\"#acpi_event_mcgrp\">acpi_event_mcgrp</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a> = <a class=\"id\" href=\"#ACPI_GENL_MCAST_GROUP_NAME\">ACPI_GENL_MCAST_GROUP_NAME</a>,", 
"};", 
"", 
"int <a class=\"id\" href=\"#acpi_bus_generate_netlink_event\">acpi_bus_generate_netlink_event</a>(const char *<a class=\"id\" href=\"#device_class\">device_class</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      const char *<a class=\"id\" href=\"#bus_id\">bus_id</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#type\">type</a>, int <a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#sk_buff\">sk_buff</a> *<a class=\"id\" href=\"#skb\">skb</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#nlattr\">nlattr</a> *<a class=\"id\" href=\"#attr\">attr</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#acpi_genl_event\">acpi_genl_event</a> *<a class=\"id\" href=\"#event\">event</a>;", 
"<span class=\"ts\"/>void *<a class=\"id\" href=\"#msg_header\">msg_header</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#size\">size</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#result\">result</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* allocate memory */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#size\">size</a> = <a class=\"id\" href=\"#nla_total_size\">nla_total_size</a>(sizeof(struct <a class=\"id\" href=\"#acpi_genl_event\">acpi_genl_event</a>)) +", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#nla_total_size\">nla_total_size</a>(0);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#skb\">skb</a> = <a class=\"id\" href=\"#genlmsg_new\">genlmsg_new</a>(<a class=\"id\" href=\"#size\">size</a>, <a class=\"id\" href=\"#GFP_ATOMIC\">GFP_ATOMIC</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#skb\">skb</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* add the genetlink message header */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#msg_header\">msg_header</a> = <a class=\"id\" href=\"#genlmsg_put\">genlmsg_put</a>(<a class=\"id\" href=\"#skb\">skb</a>, 0, <a class=\"id\" href=\"#acpi_event_seqnum\">acpi_event_seqnum</a>++,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> &amp;<a class=\"id\" href=\"#acpi_event_genl_family\">acpi_event_genl_family</a>, 0,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#ACPI_GENL_CMD_EVENT\">ACPI_GENL_CMD_EVENT</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#msg_header\">msg_header</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#nlmsg_free\">nlmsg_free</a>(<a class=\"id\" href=\"#skb\">skb</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* fill the data */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#attr\">attr</a> =", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#nla_reserve\">nla_reserve</a>(<a class=\"id\" href=\"#skb\">skb</a>, <a class=\"id\" href=\"#ACPI_GENL_ATTR_EVENT\">ACPI_GENL_ATTR_EVENT</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>sizeof(struct <a class=\"id\" href=\"#acpi_genl_event\">acpi_genl_event</a>));", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#attr\">attr</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#nlmsg_free\">nlmsg_free</a>(<a class=\"id\" href=\"#skb\">skb</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#event\">event</a> = <a class=\"id\" href=\"#nla_data\">nla_data</a>(<a class=\"id\" href=\"#attr\">attr</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#event\">event</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#nlmsg_free\">nlmsg_free</a>(<a class=\"id\" href=\"#skb\">skb</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(<a class=\"id\" href=\"#event\">event</a>, 0, sizeof(struct <a class=\"id\" href=\"#acpi_genl_event\">acpi_genl_event</a>));", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#strcpy\">strcpy</a>(<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#device_class\">device_class</a>, <a class=\"id\" href=\"#device_class\">device_class</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#strcpy\">strcpy</a>(<a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#bus_id\">bus_id</a>, <a class=\"id\" href=\"#bus_id\">bus_id</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#type\">type</a> = <a class=\"id\" href=\"#type\">type</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#event\">event</a>-><a class=\"id\" href=\"#data\">data</a> = <a class=\"id\" href=\"#data\">data</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* send multicast genetlink message */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#genlmsg_end\">genlmsg_end</a>(<a class=\"id\" href=\"#skb\">skb</a>, <a class=\"id\" href=\"#msg_header\">msg_header</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a> &lt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#nlmsg_free\">nlmsg_free</a>(<a class=\"id\" href=\"#skb\">skb</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#result\">result</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#genlmsg_multicast\">genlmsg_multicast</a>(<a class=\"id\" href=\"#skb\">skb</a>, 0, <a class=\"id\" href=\"#acpi_event_mcgrp\">acpi_event_mcgrp</a>.<a class=\"id\" href=\"#id\">id</a>, <a class=\"id\" href=\"#GFP_ATOMIC\">GFP_ATOMIC</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#acpi_bus_generate_netlink_event\">acpi_bus_generate_netlink_event</a>);", 
"", 
"static int <a class=\"id\" href=\"#acpi_event_genetlink_init\">acpi_event_genetlink_init</a>(void)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#result\">result</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#genl_register_family\">genl_register_family</a>(&amp;<a class=\"id\" href=\"#acpi_event_genl_family\">acpi_event_genl_family</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#result\">result</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#genl_register_mc_group\">genl_register_mc_group</a>(&amp;<a class=\"id\" href=\"#acpi_event_genl_family\">acpi_event_genl_family</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>&amp;<a class=\"id\" href=\"#acpi_event_mcgrp\">acpi_event_mcgrp</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#result\">result</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#genl_unregister_family\">genl_unregister_family</a>(&amp;<a class=\"id\" href=\"#acpi_event_genl_family\">acpi_event_genl_family</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#result\">result</a>;", 
"}", 
"", 
"#else", 
"int <a class=\"id\" href=\"#acpi_bus_generate_netlink_event\">acpi_bus_generate_netlink_event</a>(const char *<a class=\"id\" href=\"#device_class\">device_class</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      const char *<a class=\"id\" href=\"#bus_id\">bus_id</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#type\">type</a>, int <a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL\">EXPORT_SYMBOL</a>(<a class=\"id\" href=\"#acpi_bus_generate_netlink_event\">acpi_bus_generate_netlink_event</a>);", 
"", 
"static int <a class=\"id\" href=\"#acpi_event_genetlink_init\">acpi_event_genetlink_init</a>(void)", 
"{", 
"<span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#acpi_event_init\">acpi_event_init</a>(void)", 
"{", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_ACPI_PROC_EVENT\">CONFIG_ACPI_PROC_EVENT</a>", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#proc_dir_entry\">proc_dir_entry</a> *<a class=\"id\" href=\"#entry\">entry</a>;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a> = 0;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#acpi_disabled\">acpi_disabled</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* create genetlink for acpi event */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#acpi_event_genetlink_init\">acpi_event_genetlink_init</a>();", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#error\">error</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a> <a class=\"id\" href=\"#PREFIX\">PREFIX</a>", 
"<span class=\"ts\"/><span class=\"ts\"/>       \"Failed to create genetlink family for ACPI event\\n\");", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_ACPI_PROC_EVENT\">CONFIG_ACPI_PROC_EVENT</a>", 
"<span class=\"ts\"/><span class=\"comment\">/* 'event' [R] */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#entry\">entry</a> = <a class=\"id\" href=\"#proc_create\">proc_create</a>(\"event\", <a class=\"id\" href=\"#S_IRUSR\">S_IRUSR</a>, <a class=\"id\" href=\"#acpi_root_dir\">acpi_root_dir</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    &amp;<a class=\"id\" href=\"#acpi_system_event_ops\">acpi_system_event_ops</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#entry\">entry</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<a class=\"id\" href=\"#fs_initcall\">fs_initcall</a>(<a class=\"id\" href=\"#acpi_event_init\">acpi_event_init</a>);", 
];
xr_frag_insert('l/e5/1c78b0d701e672c02afe396761c2875c1b982f.xr', __xr_tmp);
