var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> *  libahci.c - Common AHCI SATA low-level routines</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *  Maintained by:  Jeff Garzik &lt;jgarzik@pobox.com&gt;</span>", 
"<span class=\"comment\"> *    <span class=\"ts\"/><span class=\"ts\"/>    Please ALWAYS copy linux-ide@vger.kernel.org</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/>    on emails.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *  Copyright 2004-2005 Red Hat, Inc.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *  This program is free software; you can redistribute it and/or modify</span>", 
"<span class=\"comment\"> *  it under the terms of the GNU General Public License as published by</span>", 
"<span class=\"comment\"> *  the Free Software Foundation; either version 2, or (at your option)</span>", 
"<span class=\"comment\"> *  any later version.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *  This program is distributed in the hope that it will be useful,</span>", 
"<span class=\"comment\"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>", 
"<span class=\"comment\"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>", 
"<span class=\"comment\"> *  GNU General Public License for more details.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *  You should have received a copy of the GNU General Public License</span>", 
"<span class=\"comment\"> *  along with this program; see the file COPYING.  If not, write to</span>", 
"<span class=\"comment\"> *  the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * libata documentation is available via 'make {ps|pdf}docs',</span>", 
"<span class=\"comment\"> * as Documentation/DocBook/libata.*</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * AHCI hardware documentation:</span>", 
"<span class=\"comment\"> * http://www.intel.com/technology/serialata/pdf/rev1_0.pdf</span>", 
"<span class=\"comment\"> * http://www.intel.com/technology/serialata/pdf/rev1_1.pdf</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kernel\">kernel</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#gfp\">gfp</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#init\">init</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#blkdev\">blkdev</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#delay\">delay</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#interrupt\">interrupt</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#dma\">dma</a>-<a class=\"id\" href=\"#mapping\">mapping</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#device\">device</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#scsi\">scsi</a>/<a class=\"id\" href=\"#scsi_host\">scsi_host</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#scsi\">scsi</a>/<a class=\"id\" href=\"#scsi_cmnd\">scsi_cmnd</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#libata\">libata</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> \"ahci.h\"", 
"", 
"static int <a class=\"id\" href=\"#ahci_skip_host_reset\">ahci_skip_host_reset</a>;", 
"int <a class=\"id\" href=\"#ahci_ignore_sss\">ahci_ignore_sss</a>;", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#ahci_ignore_sss\">ahci_ignore_sss</a>);", 
"", 
"<a class=\"id\" href=\"#module_param_named\">module_param_named</a>(<a class=\"id\" href=\"#skip_host_reset\">skip_host_reset</a>, <a class=\"id\" href=\"#ahci_skip_host_reset\">ahci_skip_host_reset</a>, int, 0444);", 
"<a class=\"id\" href=\"#MODULE_PARM_DESC\">MODULE_PARM_DESC</a>(<a class=\"id\" href=\"#skip_host_reset\">skip_host_reset</a>, \"skip global host reset (0=don't skip, 1=skip)\");", 
"", 
"<a class=\"id\" href=\"#module_param_named\">module_param_named</a>(<a class=\"id\" href=\"#ignore_sss\">ignore_sss</a>, <a class=\"id\" href=\"#ahci_ignore_sss\">ahci_ignore_sss</a>, int, 0444);", 
"<a class=\"id\" href=\"#MODULE_PARM_DESC\">MODULE_PARM_DESC</a>(<a class=\"id\" href=\"#ignore_sss\">ignore_sss</a>, \"Ignore staggered spinup flag (0=don't ignore, 1=ignore)\");", 
"", 
"static int <a class=\"id\" href=\"#ahci_enable_alpm\">ahci_enable_alpm</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>enum <a class=\"id\" href=\"#link_pm\">link_pm</a> <a class=\"id\" href=\"#policy\">policy</a>);", 
"static void <a class=\"id\" href=\"#ahci_disable_alpm\">ahci_disable_alpm</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>);", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#ahci_led_show\">ahci_led_show</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>, char *<a class=\"id\" href=\"#buf\">buf</a>);", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#ahci_led_store\">ahci_led_store</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>, const char *<a class=\"id\" href=\"#buf\">buf</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#size\">size</a>);", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#ahci_transmit_led_message\">ahci_transmit_led_message</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#state\">state</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#size\">size</a>);", 
"", 
"", 
"", 
"static int <a class=\"id\" href=\"#ahci_scr_read\">ahci_scr_read</a>(struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a>, unsigned int <a class=\"id\" href=\"#sc_reg\">sc_reg</a>, <a class=\"id\" href=\"#u32\">u32</a> *<a class=\"id\" href=\"#val\">val</a>);", 
"static int <a class=\"id\" href=\"#ahci_scr_write\">ahci_scr_write</a>(struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a>, unsigned int <a class=\"id\" href=\"#sc_reg\">sc_reg</a>, <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#val\">val</a>);", 
"static unsigned int <a class=\"id\" href=\"#ahci_qc_issue\">ahci_qc_issue</a>(struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>);", 
"static <a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#ahci_qc_fill_rtf\">ahci_qc_fill_rtf</a>(struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>);", 
"static int <a class=\"id\" href=\"#ahci_port_start\">ahci_port_start</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>);", 
"static void <a class=\"id\" href=\"#ahci_port_stop\">ahci_port_stop</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>);", 
"static void <a class=\"id\" href=\"#ahci_qc_prep\">ahci_qc_prep</a>(struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>);", 
"static int <a class=\"id\" href=\"#ahci_pmp_qc_defer\">ahci_pmp_qc_defer</a>(struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>);", 
"static void <a class=\"id\" href=\"#ahci_freeze\">ahci_freeze</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>);", 
"static void <a class=\"id\" href=\"#ahci_thaw\">ahci_thaw</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>);", 
"static void <a class=\"id\" href=\"#ahci_enable_fbs\">ahci_enable_fbs</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>);", 
"static void <a class=\"id\" href=\"#ahci_disable_fbs\">ahci_disable_fbs</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>);", 
"static void <a class=\"id\" href=\"#ahci_pmp_attach\">ahci_pmp_attach</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>);", 
"static void <a class=\"id\" href=\"#ahci_pmp_detach\">ahci_pmp_detach</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>);", 
"static int <a class=\"id\" href=\"#ahci_softreset\">ahci_softreset</a>(struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a>, unsigned int *<a class=\"id\" href=\"#class\">class</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  unsigned long <a class=\"id\" href=\"#deadline\">deadline</a>);", 
"static int <a class=\"id\" href=\"#ahci_hardreset\">ahci_hardreset</a>(struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a>, unsigned int *<a class=\"id\" href=\"#class\">class</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  unsigned long <a class=\"id\" href=\"#deadline\">deadline</a>);", 
"static void <a class=\"id\" href=\"#ahci_postreset\">ahci_postreset</a>(struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a>, unsigned int *<a class=\"id\" href=\"#class\">class</a>);", 
"static void <a class=\"id\" href=\"#ahci_error_handler\">ahci_error_handler</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>);", 
"static void <a class=\"id\" href=\"#ahci_post_internal_cmd\">ahci_post_internal_cmd</a>(struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>);", 
"static int <a class=\"id\" href=\"#ahci_port_resume\">ahci_port_resume</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>);", 
"static void <a class=\"id\" href=\"#ahci_dev_config\">ahci_dev_config</a>(struct <a class=\"id\" href=\"#ata_device\">ata_device</a> *<a class=\"id\" href=\"#dev\">dev</a>);", 
"static void <a class=\"id\" href=\"#ahci_fill_cmd_slot\">ahci_fill_cmd_slot</a>(struct <a class=\"id\" href=\"#ahci_port_priv\">ahci_port_priv</a> *<a class=\"id\" href=\"#pp\">pp</a>, unsigned int <a class=\"id\" href=\"#tag\">tag</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#opts\">opts</a>);", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_PM\">CONFIG_PM</a>", 
"static int <a class=\"id\" href=\"#ahci_port_suspend\">ahci_port_suspend</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#pm_message_t\">pm_message_t</a> <a class=\"id\" href=\"#mesg\">mesg</a>);", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#ahci_activity_show\">ahci_activity_show</a>(struct <a class=\"id\" href=\"#ata_device\">ata_device</a> *<a class=\"id\" href=\"#dev\">dev</a>, char *<a class=\"id\" href=\"#buf\">buf</a>);", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#ahci_activity_store\">ahci_activity_store</a>(struct <a class=\"id\" href=\"#ata_device\">ata_device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   enum <a class=\"id\" href=\"#sw_activity\">sw_activity</a> <a class=\"id\" href=\"#val\">val</a>);", 
"static void <a class=\"id\" href=\"#ahci_init_sw_activity\">ahci_init_sw_activity</a>(struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a>);", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#ahci_show_host_caps\">ahci_show_host_caps</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>);", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#ahci_show_host_cap2\">ahci_show_host_cap2</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>);", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#ahci_show_host_version\">ahci_show_host_version</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>);", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#ahci_show_port_cmd\">ahci_show_port_cmd</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>);", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#ahci_read_em_buffer\">ahci_read_em_buffer</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>);", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#ahci_store_em_buffer\">ahci_store_em_buffer</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    const char *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#size\">size</a>);", 
"", 
"static <a class=\"id\" href=\"#DEVICE_ATTR\">DEVICE_ATTR</a>(<a class=\"id\" href=\"#ahci_host_caps\">ahci_host_caps</a>, <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>, <a class=\"id\" href=\"#ahci_show_host_caps\">ahci_show_host_caps</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"static <a class=\"id\" href=\"#DEVICE_ATTR\">DEVICE_ATTR</a>(<a class=\"id\" href=\"#ahci_host_cap2\">ahci_host_cap2</a>, <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>, <a class=\"id\" href=\"#ahci_show_host_cap2\">ahci_show_host_cap2</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"static <a class=\"id\" href=\"#DEVICE_ATTR\">DEVICE_ATTR</a>(<a class=\"id\" href=\"#ahci_host_version\">ahci_host_version</a>, <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>, <a class=\"id\" href=\"#ahci_show_host_version\">ahci_show_host_version</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"static <a class=\"id\" href=\"#DEVICE_ATTR\">DEVICE_ATTR</a>(<a class=\"id\" href=\"#ahci_port_cmd\">ahci_port_cmd</a>, <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>, <a class=\"id\" href=\"#ahci_show_port_cmd\">ahci_show_port_cmd</a>, <a class=\"id\" href=\"#NULL\">NULL</a>);", 
"static <a class=\"id\" href=\"#DEVICE_ATTR\">DEVICE_ATTR</a>(<a class=\"id\" href=\"#em_buffer\">em_buffer</a>, <a class=\"id\" href=\"#S_IWUSR\">S_IWUSR</a> | <a class=\"id\" href=\"#S_IRUGO\">S_IRUGO</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#ahci_read_em_buffer\">ahci_read_em_buffer</a>, <a class=\"id\" href=\"#ahci_store_em_buffer\">ahci_store_em_buffer</a>);", 
"", 
"struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#ahci_shost_attrs\">ahci_shost_attrs</a>[] = {", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_link_power_management_policy\">dev_attr_link_power_management_policy</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_em_message_type\">dev_attr_em_message_type</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_em_message\">dev_attr_em_message</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_ahci_host_caps\">dev_attr_ahci_host_caps</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_ahci_host_cap2\">dev_attr_ahci_host_cap2</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_ahci_host_version\">dev_attr_ahci_host_version</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_ahci_port_cmd\">dev_attr_ahci_port_cmd</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_em_buffer\">dev_attr_em_buffer</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#NULL\">NULL</a>", 
"};", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#ahci_shost_attrs\">ahci_shost_attrs</a>);", 
"", 
"struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#ahci_sdev_attrs\">ahci_sdev_attrs</a>[] = {", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_sw_activity\">dev_attr_sw_activity</a>,", 
"<span class=\"ts\"/>&amp;<a class=\"id\" href=\"#dev_attr_unload_heads\">dev_attr_unload_heads</a>,", 
"<span class=\"ts\"/><a class=\"id\" href=\"#NULL\">NULL</a>", 
"};", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#ahci_sdev_attrs\">ahci_sdev_attrs</a>);", 
"", 
"struct <a class=\"id\" href=\"#ata_port_operations\">ata_port_operations</a> <a class=\"id\" href=\"#ahci_ops\">ahci_ops</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#inherits\">inherits</a><span class=\"ts\"/><span class=\"ts\"/>= &amp;<a class=\"id\" href=\"#sata_pmp_port_ops\">sata_pmp_port_ops</a>,", 
"", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#qc_defer\">qc_defer</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_pmp_qc_defer\">ahci_pmp_qc_defer</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#qc_prep\">qc_prep</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_qc_prep\">ahci_qc_prep</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#qc_issue\">qc_issue</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_qc_issue\">ahci_qc_issue</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#qc_fill_rtf\">qc_fill_rtf</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_qc_fill_rtf\">ahci_qc_fill_rtf</a>,", 
"", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#freeze\">freeze</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_freeze\">ahci_freeze</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#thaw\">thaw</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_thaw\">ahci_thaw</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#softreset\">softreset</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_softreset\">ahci_softreset</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#hardreset\">hardreset</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_hardreset\">ahci_hardreset</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#postreset\">postreset</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_postreset\">ahci_postreset</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#pmp_softreset\">pmp_softreset</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_softreset\">ahci_softreset</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#error_handler\">error_handler</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_error_handler\">ahci_error_handler</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#post_internal_cmd\">post_internal_cmd</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_post_internal_cmd\">ahci_post_internal_cmd</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#dev_config\">dev_config</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_dev_config\">ahci_dev_config</a>,", 
"", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#scr_read\">scr_read</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_scr_read\">ahci_scr_read</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#scr_write\">scr_write</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_scr_write\">ahci_scr_write</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#pmp_attach\">pmp_attach</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_pmp_attach\">ahci_pmp_attach</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#pmp_detach\">pmp_detach</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_pmp_detach\">ahci_pmp_detach</a>,", 
"", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#enable_pm\">enable_pm</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_enable_alpm\">ahci_enable_alpm</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#disable_pm\">disable_pm</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_disable_alpm\">ahci_disable_alpm</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#em_show\">em_show</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_led_show\">ahci_led_show</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#em_store\">em_store</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_led_store\">ahci_led_store</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#sw_activity_show\">sw_activity_show</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_activity_show\">ahci_activity_show</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#sw_activity_store\">sw_activity_store</a><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_activity_store\">ahci_activity_store</a>,", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_PM\">CONFIG_PM</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#port_suspend\">port_suspend</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_port_suspend\">ahci_port_suspend</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#port_resume\">port_resume</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_port_resume\">ahci_port_resume</a>,", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#port_start\">port_start</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_port_start\">ahci_port_start</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#port_stop\">port_stop</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ahci_port_stop\">ahci_port_stop</a>,", 
"};", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#ahci_ops\">ahci_ops</a>);", 
"", 
"int <a class=\"id\" href=\"#ahci_em_messages\">ahci_em_messages</a> = 1;", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#ahci_em_messages\">ahci_em_messages</a>);", 
"<a class=\"id\" href=\"#module_param\">module_param</a>(<a class=\"id\" href=\"#ahci_em_messages\">ahci_em_messages</a>, int, 0444);", 
"<span class=\"comment\">/* add other LED protocol types when they become supported */</span>", 
"<a class=\"id\" href=\"#MODULE_PARM_DESC\">MODULE_PARM_DESC</a>(<a class=\"id\" href=\"#ahci_em_messages\">ahci_em_messages</a>,", 
"<span class=\"ts\"/>\"AHCI Enclosure Management Message control (0 = off, 1 = on)\");", 
"", 
"static void <a class=\"id\" href=\"#ahci_enable_ahci\">ahci_enable_ahci</a>(void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#mmio\">mmio</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#tmp\">tmp</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* turn on AHCI_EN */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#mmio\">mmio</a> + <a class=\"id\" href=\"#HOST_CTL\">HOST_CTL</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#tmp\">tmp</a> &amp; <a class=\"id\" href=\"#HOST_AHCI_EN\">HOST_AHCI_EN</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Some controllers need AHCI_EN to be written multiple times.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Try a few times before giving up.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; 5; <a class=\"id\" href=\"#i\">i</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> |= <a class=\"id\" href=\"#HOST_AHCI_EN\">HOST_AHCI_EN</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#tmp\">tmp</a>, <a class=\"id\" href=\"#mmio\">mmio</a> + <a class=\"id\" href=\"#HOST_CTL\">HOST_CTL</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#mmio\">mmio</a> + <a class=\"id\" href=\"#HOST_CTL\">HOST_CTL</a>);<span class=\"ts\"/><span class=\"comment\">/* flush &amp;&amp; sanity check */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#tmp\">tmp</a> &amp; <a class=\"id\" href=\"#HOST_AHCI_EN\">HOST_AHCI_EN</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#msleep\">msleep</a>(10);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#WARN_ON\">WARN_ON</a>(1);", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#ahci_show_host_caps\">ahci_show_host_caps</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#Scsi_Host\">Scsi_Host</a> *<a class=\"id\" href=\"#shost\">shost</a> = <a class=\"id\" href=\"#class_to_shost\">class_to_shost</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#ata_shost_to_port\">ata_shost_to_port</a>(<a class=\"id\" href=\"#shost\">shost</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_host_priv\">ahci_host_priv</a> *<a class=\"id\" href=\"#hpriv\">hpriv</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%x\\n\", <a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#cap\">cap</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#ahci_show_host_cap2\">ahci_show_host_cap2</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#Scsi_Host\">Scsi_Host</a> *<a class=\"id\" href=\"#shost\">shost</a> = <a class=\"id\" href=\"#class_to_shost\">class_to_shost</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#ata_shost_to_port\">ata_shost_to_port</a>(<a class=\"id\" href=\"#shost\">shost</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_host_priv\">ahci_host_priv</a> *<a class=\"id\" href=\"#hpriv\">hpriv</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%x\\n\", <a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#cap2\">cap2</a>);", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#ahci_show_host_version\">ahci_show_host_version</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#Scsi_Host\">Scsi_Host</a> *<a class=\"id\" href=\"#shost\">shost</a> = <a class=\"id\" href=\"#class_to_shost\">class_to_shost</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#ata_shost_to_port\">ata_shost_to_port</a>(<a class=\"id\" href=\"#shost\">shost</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_host_priv\">ahci_host_priv</a> *<a class=\"id\" href=\"#hpriv\">hpriv</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#mmio\">mmio</a> = <a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#mmio\">mmio</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%x\\n\", <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#mmio\">mmio</a> + <a class=\"id\" href=\"#HOST_VERSION\">HOST_VERSION</a>));", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#ahci_show_port_cmd\">ahci_show_port_cmd</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#Scsi_Host\">Scsi_Host</a> *<a class=\"id\" href=\"#shost\">shost</a> = <a class=\"id\" href=\"#class_to_shost\">class_to_shost</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#ata_shost_to_port\">ata_shost_to_port</a>(<a class=\"id\" href=\"#shost\">shost</a>);", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#port_mmio\">port_mmio</a> = <a class=\"id\" href=\"#ahci_port_base\">ahci_port_base</a>(<a class=\"id\" href=\"#ap\">ap</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#sprintf\">sprintf</a>(<a class=\"id\" href=\"#buf\">buf</a>, \"%x\\n\", <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port_mmio\">port_mmio</a> + <a class=\"id\" href=\"#PORT_CMD\">PORT_CMD</a>));", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#ahci_read_em_buffer\">ahci_read_em_buffer</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>, char *<a class=\"id\" href=\"#buf\">buf</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#Scsi_Host\">Scsi_Host</a> *<a class=\"id\" href=\"#shost\">shost</a> = <a class=\"id\" href=\"#class_to_shost\">class_to_shost</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#ata_shost_to_port\">ata_shost_to_port</a>(<a class=\"id\" href=\"#shost\">shost</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_host_priv\">ahci_host_priv</a> *<a class=\"id\" href=\"#hpriv\">hpriv</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#mmio\">mmio</a> = <a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#mmio\">mmio</a>;", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#em_mmio\">em_mmio</a> = <a class=\"id\" href=\"#mmio\">mmio</a> + <a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#em_loc\">em_loc</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#em_ctl\">em_ctl</a>, <a class=\"id\" href=\"#msg\">msg</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#count\">count</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irqsave\">spin_lock_irqsave</a>(<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#lock\">lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#em_ctl\">em_ctl</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#mmio\">mmio</a> + <a class=\"id\" href=\"#HOST_EM_CTL\">HOST_EM_CTL</a>);", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#ATA_FLAG_EM\">ATA_FLAG_EM</a>) || <a class=\"id\" href=\"#em_ctl\">em_ctl</a> &amp; <a class=\"id\" href=\"#EM_CTL_XMT\">EM_CTL_XMT</a> ||", 
"<span class=\"ts\"/>    !(<a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#em_msg_type\">em_msg_type</a> &amp; <a class=\"id\" href=\"#EM_MSG_TYPE_SGPIO\">EM_MSG_TYPE_SGPIO</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irqrestore\">spin_unlock_irqrestore</a>(<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#lock\">lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#em_ctl\">em_ctl</a> &amp; <a class=\"id\" href=\"#EM_CTL_MR\">EM_CTL_MR</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irqrestore\">spin_unlock_irqrestore</a>(<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#lock\">lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EAGAIN\">EAGAIN</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#em_ctl\">em_ctl</a> &amp; <a class=\"id\" href=\"#EM_CTL_SMB\">EM_CTL_SMB</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#em_mmio\">em_mmio</a> += <a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#em_buf_sz\">em_buf_sz</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#count\">count</a> = <a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#em_buf_sz\">em_buf_sz</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* the count should not be larger than PAGE_SIZE */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#count\">count</a> &gt; <a class=\"id\" href=\"#PAGE_SIZE\">PAGE_SIZE</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#printk_ratelimit\">printk_ratelimit</a>())", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_port_printk\">ata_port_printk</a>(<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"EM read buffer size too large: \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"buffer size %u, page size %lu\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#em_buf_sz\">em_buf_sz</a>, <a class=\"id\" href=\"#PAGE_SIZE\">PAGE_SIZE</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#count\">count</a> = <a class=\"id\" href=\"#PAGE_SIZE\">PAGE_SIZE</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#count\">count</a>; <a class=\"id\" href=\"#i\">i</a> += 4) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#msg\">msg</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#em_mmio\">em_mmio</a> + <a class=\"id\" href=\"#i\">i</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#buf\">buf</a>[<a class=\"id\" href=\"#i\">i</a>] = <a class=\"id\" href=\"#msg\">msg</a> &amp; 0xff;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#buf\">buf</a>[<a class=\"id\" href=\"#i\">i</a> + 1] = (<a class=\"id\" href=\"#msg\">msg</a> >> 8) &amp; 0xff;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#buf\">buf</a>[<a class=\"id\" href=\"#i\">i</a> + 2] = (<a class=\"id\" href=\"#msg\">msg</a> >> 16) &amp; 0xff;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#buf\">buf</a>[<a class=\"id\" href=\"#i\">i</a> + 3] = (<a class=\"id\" href=\"#msg\">msg</a> >> 24) &amp; 0xff;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irqrestore\">spin_unlock_irqrestore</a>(<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#lock\">lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#i\">i</a>;", 
"}", 
"", 
"static <a class=\"id\" href=\"#ssize_t\">ssize_t</a> <a class=\"id\" href=\"#ahci_store_em_buffer\">ahci_store_em_buffer</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    struct <a class=\"id\" href=\"#device_attribute\">device_attribute</a> *<a class=\"id\" href=\"#attr\">attr</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    const char *<a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#size_t\">size_t</a> <a class=\"id\" href=\"#size\">size</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#Scsi_Host\">Scsi_Host</a> *<a class=\"id\" href=\"#shost\">shost</a> = <a class=\"id\" href=\"#class_to_shost\">class_to_shost</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#ata_shost_to_port\">ata_shost_to_port</a>(<a class=\"id\" href=\"#shost\">shost</a>);", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ahci_host_priv\">ahci_host_priv</a> *<a class=\"id\" href=\"#hpriv\">hpriv</a> = <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#host\">host</a>-><a class=\"id\" href=\"#private_data\">private_data</a>;", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#mmio\">mmio</a> = <a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#mmio\">mmio</a>;", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#em_mmio\">em_mmio</a> = <a class=\"id\" href=\"#mmio\">mmio</a> + <a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#em_loc\">em_loc</a>;", 
"<span class=\"ts\"/>const unsigned char *<a class=\"id\" href=\"#msg_buf\">msg_buf</a> = <a class=\"id\" href=\"#buf\">buf</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#em_ctl\">em_ctl</a>, <a class=\"id\" href=\"#msg\">msg</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* check size validity */</span>", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#ATA_FLAG_EM\">ATA_FLAG_EM</a>) ||", 
"<span class=\"ts\"/>    !(<a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#em_msg_type\">em_msg_type</a> &amp; <a class=\"id\" href=\"#EM_MSG_TYPE_SGPIO\">EM_MSG_TYPE_SGPIO</a>) ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#size\">size</a> % 4 || <a class=\"id\" href=\"#size\">size</a> &gt; <a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#em_buf_sz\">em_buf_sz</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irqsave\">spin_lock_irqsave</a>(<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#lock\">lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#em_ctl\">em_ctl</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#mmio\">mmio</a> + <a class=\"id\" href=\"#HOST_EM_CTL\">HOST_EM_CTL</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#em_ctl\">em_ctl</a> &amp; <a class=\"id\" href=\"#EM_CTL_TM\">EM_CTL_TM</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irqrestore\">spin_unlock_irqrestore</a>(<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#lock\">lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EBUSY\">EBUSY</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#size\">size</a>; <a class=\"id\" href=\"#i\">i</a> += 4) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#msg\">msg</a> = <a class=\"id\" href=\"#msg_buf\">msg_buf</a>[<a class=\"id\" href=\"#i\">i</a>] | <a class=\"id\" href=\"#msg_buf\">msg_buf</a>[<a class=\"id\" href=\"#i\">i</a> + 1] << 8 |", 
"<span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#msg_buf\">msg_buf</a>[<a class=\"id\" href=\"#i\">i</a> + 2] << 16 | <a class=\"id\" href=\"#msg_buf\">msg_buf</a>[<a class=\"id\" href=\"#i\">i</a> + 3] << 24;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#msg\">msg</a>, <a class=\"id\" href=\"#em_mmio\">em_mmio</a> + <a class=\"id\" href=\"#i\">i</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#em_ctl\">em_ctl</a> | <a class=\"id\" href=\"#EM_CTL_TM\">EM_CTL_TM</a>, <a class=\"id\" href=\"#mmio\">mmio</a> + <a class=\"id\" href=\"#HOST_EM_CTL\">HOST_EM_CTL</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irqrestore\">spin_unlock_irqrestore</a>(<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#lock\">lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#size\">size</a>;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ahci_save_initial_config - Save and fixup initial config values</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@dev: target AHCI device</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@hpriv: host private area to store config values</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@force_port_map: force port map to a specified value</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@mask_port_map: mask out particular bits from port map</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Some registers containing configuration info might be setup by</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>BIOS and might be cleared on reset.  This function saves the</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>initial values of those registers into @hpriv such that they</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>can be restored after controller reset.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>If inconsistent, config values are fixed up by this function.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>LOCKING:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>None.</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#ahci_save_initial_config\">ahci_save_initial_config</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      struct <a class=\"id\" href=\"#ahci_host_priv\">ahci_host_priv</a> *<a class=\"id\" href=\"#hpriv\">hpriv</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      unsigned int <a class=\"id\" href=\"#force_port_map\">force_port_map</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      unsigned int <a class=\"id\" href=\"#mask_port_map\">mask_port_map</a>)", 
"{", 
"<span class=\"ts\"/>void <a class=\"id\" href=\"#__iomem\">__iomem</a> *<a class=\"id\" href=\"#mmio\">mmio</a> = <a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#mmio\">mmio</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#cap\">cap</a>, <a class=\"id\" href=\"#cap2\">cap2</a>, <a class=\"id\" href=\"#vers\">vers</a>, <a class=\"id\" href=\"#port_map\">port_map</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* make sure AHCI mode is enabled before accessing CAP */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ahci_enable_ahci\">ahci_enable_ahci</a>(<a class=\"id\" href=\"#mmio\">mmio</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Values prefixed with saved_ are written back to host after</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * reset.  Values without are used for driver operation.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#saved_cap\">saved_cap</a> = <a class=\"id\" href=\"#cap\">cap</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#mmio\">mmio</a> + <a class=\"id\" href=\"#HOST_CAP\">HOST_CAP</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#saved_port_map\">saved_port_map</a> = <a class=\"id\" href=\"#port_map\">port_map</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#mmio\">mmio</a> + <a class=\"id\" href=\"#HOST_PORTS_IMPL\">HOST_PORTS_IMPL</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* CAP2 register is only defined for AHCI 1.2 and later */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vers\">vers</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#mmio\">mmio</a> + <a class=\"id\" href=\"#HOST_VERSION\">HOST_VERSION</a>);", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#vers\">vers</a> >> 16) &gt; 1 ||", 
"<span class=\"ts\"/>   ((<a class=\"id\" href=\"#vers\">vers</a> >> 16) == 1 && (<a class=\"id\" href=\"#vers\">vers</a> &amp; 0xFFFF) >= 0x200))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#saved_cap2\">saved_cap2</a> = <a class=\"id\" href=\"#cap2\">cap2</a> = <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#mmio\">mmio</a> + <a class=\"id\" href=\"#HOST_CAP2\">HOST_CAP2</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#saved_cap2\">saved_cap2</a> = <a class=\"id\" href=\"#cap2\">cap2</a> = 0;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* some chips have errata preventing 64bit use */</span>", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_64\">HOST_CAP_64</a>) && (<a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#AHCI_HFLAG_32BIT_ONLY\">AHCI_HFLAG_32BIT_ONLY</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a>, <a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   \"controller can't do 64bit DMA, forcing 32bit\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> &= ~<a class=\"id\" href=\"#HOST_CAP_64\">HOST_CAP_64</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_NCQ\">HOST_CAP_NCQ</a>) && (<a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#AHCI_HFLAG_NO_NCQ\">AHCI_HFLAG_NO_NCQ</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a>, <a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   \"controller can't do NCQ, turning off CAP_NCQ\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> &= ~<a class=\"id\" href=\"#HOST_CAP_NCQ\">HOST_CAP_NCQ</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_NCQ\">HOST_CAP_NCQ</a>) && (<a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#AHCI_HFLAG_YES_NCQ\">AHCI_HFLAG_YES_NCQ</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a>, <a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   \"controller can do NCQ, turning on CAP_NCQ\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> |= <a class=\"id\" href=\"#HOST_CAP_NCQ\">HOST_CAP_NCQ</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_PMP\">HOST_CAP_PMP</a>) && (<a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#AHCI_HFLAG_NO_PMP\">AHCI_HFLAG_NO_PMP</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a>, <a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   \"controller can't do PMP, turning off CAP_PMP\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> &= ~<a class=\"id\" href=\"#HOST_CAP_PMP\">HOST_CAP_PMP</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_SNTF\">HOST_CAP_SNTF</a>) && (<a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#AHCI_HFLAG_NO_SNTF\">AHCI_HFLAG_NO_SNTF</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a>, <a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   \"controller can't do SNTF, turning off CAP_SNTF\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> &= ~<a class=\"id\" href=\"#HOST_CAP_SNTF\">HOST_CAP_SNTF</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#cap\">cap</a> &amp; <a class=\"id\" href=\"#HOST_CAP_FBS\">HOST_CAP_FBS</a>) && (<a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#AHCI_HFLAG_YES_FBS\">AHCI_HFLAG_YES_FBS</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a>, <a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   \"controller can do FBS, turning on CAP_FBS\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cap\">cap</a> |= <a class=\"id\" href=\"#HOST_CAP_FBS\">HOST_CAP_FBS</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#force_port_map\">force_port_map</a> && <a class=\"id\" href=\"#port_map\">port_map</a> != <a class=\"id\" href=\"#force_port_map\">force_port_map</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a>, <a class=\"id\" href=\"#dev\">dev</a>, \"forcing port_map 0x%x -> 0x%x\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#port_map\">port_map</a>, <a class=\"id\" href=\"#force_port_map\">force_port_map</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#port_map\">port_map</a> = <a class=\"id\" href=\"#force_port_map\">force_port_map</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#mask_port_map\">mask_port_map</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a>, <a class=\"id\" href=\"#dev\">dev</a>, \"masking port_map 0x%x -> 0x%x\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#port_map\">port_map</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#port_map\">port_map</a> &amp; <a class=\"id\" href=\"#mask_port_map\">mask_port_map</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#port_map\">port_map</a> &= <a class=\"id\" href=\"#mask_port_map\">mask_port_map</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* cross check port_map and cap.n_ports */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#port_map\">port_map</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#map_ports\">map_ports</a> = 0;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#AHCI_MAX_PORTS\">AHCI_MAX_PORTS</a>; <a class=\"id\" href=\"#i\">i</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#port_map\">port_map</a> &amp; (1 << <a class=\"id\" href=\"#i\">i</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#map_ports\">map_ports</a>++;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* If PI has more ports than n_ports, whine, clear</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * port_map and let it be generated from n_ports.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#map_ports\">map_ports</a> &gt; <a class=\"id\" href=\"#ahci_nr_ports\">ahci_nr_ports</a>(<a class=\"id\" href=\"#cap\">cap</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a>, <a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   \"implemented port map (0x%x) contains more \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   \"ports than nr_ports (%u), using nr_ports\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#port_map\">port_map</a>, <a class=\"id\" href=\"#ahci_nr_ports\">ahci_nr_ports</a>(<a class=\"id\" href=\"#cap\">cap</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#port_map\">port_map</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* fabricate port_map from cap.nr_ports */</span>", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#port_map\">port_map</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#port_map\">port_map</a> = (1 << <a class=\"id\" href=\"#ahci_nr_ports\">ahci_nr_ports</a>(<a class=\"id\" href=\"#cap\">cap</a>)) - 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_printk\">dev_printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a>, <a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   \"forcing PORTS_IMPL to 0x%x\\n\", <a class=\"id\" href=\"#port_map\">port_map</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* write the fixed up value to the PI register */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#saved_port_map\">saved_port_map</a> = <a class=\"id\" href=\"#port_map\">port_map</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* record values to use during operation */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#cap\">cap</a> = <a class=\"id\" href=\"#cap\">cap</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#cap2\">cap2</a> = <a class=\"id\" href=\"#cap2\">cap2</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#hpriv\">hpriv</a>-><a class=\"id\" href=\"#port_map\">port_map</a> = <a class=\"id\" href=\"#port_map\">port_map</a>;", 
"}", 
"<a class=\"id\" href=\"#EXPORT_SYMBOL_GPL\">EXPORT_SYMBOL_GPL</a>(<a class=\"id\" href=\"#ahci_save_initial_config\">ahci_save_initial_config</a>);", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ahci_restore_initial_config - Restore initial config</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@host: target ATA host</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Restore initial config stored by ahci_save_initial_config().</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>LOCKING:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>None.</span>", 
];
xr_frag_insert('l/e6/138be53936b99008abbd76f73bbe6d2df49372.xr', __xr_tmp);
