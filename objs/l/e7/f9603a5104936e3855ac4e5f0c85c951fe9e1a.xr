var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * File:<span class=\"ts\"/>portdrv_pci.c</span>", 
"<span class=\"comment\"> * Purpose:<span class=\"ts\"/>PCI Express Port Bus Driver</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Copyright (C) 2004 Intel</span>", 
"<span class=\"comment\"> * Copyright (C) Tom Long Nguyen (tom.l.nguyen@intel.com)</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#pci\">pci</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kernel\">kernel</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#errno\">errno</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#pm\">pm</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#init\">init</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#pcieport_if\">pcieport_if</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#aer\">aer</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#dmi\">dmi</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#pci\">pci</a>-<a class=\"id\" href=\"#aspm\">aspm</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> \"portdrv.h\"", 
"#<a class=\"id\" href=\"#include\">include</a> \"aer/aerdrv.h\"", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Version Information</span>", 
"<span class=\"comment\"> */</span>", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#DRIVER_VERSION\">DRIVER_VERSION</a> \"v1.0\"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#DRIVER_AUTHOR\">DRIVER_AUTHOR</a> \"tom.l.nguyen@intel.com\"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#DRIVER_DESC\">DRIVER_DESC</a> \"PCIe Port Bus Driver\"", 
"<a class=\"id\" href=\"#MODULE_AUTHOR\">MODULE_AUTHOR</a>(<a class=\"id\" href=\"#DRIVER_AUTHOR\">DRIVER_AUTHOR</a>);", 
"<a class=\"id\" href=\"#MODULE_DESCRIPTION\">MODULE_DESCRIPTION</a>(<a class=\"id\" href=\"#DRIVER_DESC\">DRIVER_DESC</a>);", 
"<a class=\"id\" href=\"#MODULE_LICENSE\">MODULE_LICENSE</a>(\"GPL\");", 
"", 
"<span class=\"comment\">/* If this switch is set, PCIe port native services should not be enabled. */</span>", 
"<a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#pcie_ports_disabled\">pcie_ports_disabled</a>;", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * If this switch is set, ACPI _OSC will be used to determine whether or not to</span>", 
"<span class=\"comment\"> * enable PCIe port native services.</span>", 
"<span class=\"comment\"> */</span>", 
"<a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#pcie_ports_auto\">pcie_ports_auto</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#pcie_port_setup\">pcie_port_setup</a>(char *<a class=\"id\" href=\"#str\">str</a>)", 
"{", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#str\">str</a>, \"compat\", 6)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pcie_ports_disabled\">pcie_ports_disabled</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/>} else if (!<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#str\">str</a>, \"native\", 6)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pcie_ports_disabled\">pcie_ports_disabled</a> = <a class=\"id\" href=\"#false\">false</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pcie_ports_auto\">pcie_ports_auto</a> = <a class=\"id\" href=\"#false\">false</a>;", 
"<span class=\"ts\"/>} else if (!<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#str\">str</a>, \"auto\", 4)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pcie_ports_disabled\">pcie_ports_disabled</a> = <a class=\"id\" href=\"#false\">false</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pcie_ports_auto\">pcie_ports_auto</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return 1;", 
"}", 
"<a class=\"id\" href=\"#__setup\">__setup</a>(\"pcie_ports=\", <a class=\"id\" href=\"#pcie_port_setup\">pcie_port_setup</a>);", 
"", 
"<span class=\"comment\">/* global data */</span>", 
"", 
"static int <a class=\"id\" href=\"#pcie_portdrv_restore_config\">pcie_portdrv_restore_config</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#pci_enable_device\">pci_enable_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#retval\">retval</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#retval\">retval</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_set_master\">pci_set_master</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_PM\">CONFIG_PM</a>", 
"static const struct <a class=\"id\" href=\"#dev_pm_ops\">dev_pm_ops</a> <a class=\"id\" href=\"#pcie_portdrv_pm_ops\">pcie_portdrv_pm_ops</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#suspend\">suspend</a><span class=\"ts\"/>= <a class=\"id\" href=\"#pcie_port_device_suspend\">pcie_port_device_suspend</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#resume\">resume</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#pcie_port_device_resume\">pcie_port_device_resume</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#freeze\">freeze</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#pcie_port_device_suspend\">pcie_port_device_suspend</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#thaw\">thaw</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#pcie_port_device_resume\">pcie_port_device_resume</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#poweroff\">poweroff</a><span class=\"ts\"/>= <a class=\"id\" href=\"#pcie_port_device_suspend\">pcie_port_device_suspend</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#restore\">restore</a><span class=\"ts\"/>= <a class=\"id\" href=\"#pcie_port_device_resume\">pcie_port_device_resume</a>,", 
"};", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#PCIE_PORTDRV_PM_OPS\">PCIE_PORTDRV_PM_OPS</a><span class=\"ts\"/>(&amp;<a class=\"id\" href=\"#pcie_portdrv_pm_ops\">pcie_portdrv_pm_ops</a>)", 
"", 
"#else <span class=\"comment\">/* !PM */</span>", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#PCIE_PORTDRV_PM_OPS\">PCIE_PORTDRV_PM_OPS</a><span class=\"ts\"/><a class=\"id\" href=\"#NULL\">NULL</a>", 
"#<a class=\"id\" href=\"#endif\">endif</a> <span class=\"comment\">/* !PM */</span>", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * pcie_portdrv_probe - Probe PCI-Express port devices</span>", 
"<span class=\"comment\"> * @dev: PCI-Express port device being probed</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * If detected invokes the pcie_port_device_register() method for</span>", 
"<span class=\"comment\"> * this port device.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#__devinit\">__devinit</a> <a class=\"id\" href=\"#pcie_portdrv_probe\">pcie_portdrv_probe</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>const struct <a class=\"id\" href=\"#pci_device_id\">pci_device_id</a> *<a class=\"id\" href=\"#id\">id</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#status\">status</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#pci_is_pcie\">pci_is_pcie</a>(<a class=\"id\" href=\"#dev\">dev</a>) ||", 
"<span class=\"ts\"/>    ((<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#pcie_type\">pcie_type</a> != <a class=\"id\" href=\"#PCI_EXP_TYPE_ROOT_PORT\">PCI_EXP_TYPE_ROOT_PORT</a>) &&", 
"<span class=\"ts\"/>     (<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#pcie_type\">pcie_type</a> != <a class=\"id\" href=\"#PCI_EXP_TYPE_UPSTREAM\">PCI_EXP_TYPE_UPSTREAM</a>) &&", 
"<span class=\"ts\"/>     (<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#pcie_type\">pcie_type</a> != <a class=\"id\" href=\"#PCI_EXP_TYPE_DOWNSTREAM\">PCI_EXP_TYPE_DOWNSTREAM</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#irq\">irq</a> && <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#pin\">pin</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev_warn\">dev_warn</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, \"device [%04x:%04x] has invalid IRQ; \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> \"check vendor BIOS\\n\", <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#vendor\">vendor</a>, <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#device\">device</a>);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#pcie_port_device_register\">pcie_port_device_register</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#status\">status</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_save_state\">pci_save_state</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#pcie_portdrv_remove\">pcie_portdrv_remove</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pcie_port_device_remove\">pcie_port_device_remove</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_disable_device\">pci_disable_device</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#error_detected_iter\">error_detected_iter</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#device\">device</a>, void *<a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pcie_device\">pcie_device</a> *<a class=\"id\" href=\"#pcie_device\">pcie_device</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pcie_port_service_driver\">pcie_port_service_driver</a> *<a class=\"id\" href=\"#driver\">driver</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#aer_broadcast_data\">aer_broadcast_data</a> *<a class=\"id\" href=\"#result_data\">result_data</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_ers_result_t\">pci_ers_result_t</a> <a class=\"id\" href=\"#status\">status</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result_data\">result_data</a> = (struct <a class=\"id\" href=\"#aer_broadcast_data\">aer_broadcast_data</a> *) <a class=\"id\" href=\"#data\">data</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#bus\">bus</a> == &amp;<a class=\"id\" href=\"#pcie_port_bus_type\">pcie_port_bus_type</a> && <a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#driver\">driver</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#driver\">driver</a> = <a class=\"id\" href=\"#to_service_driver\">to_service_driver</a>(<a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#driver\">driver</a> ||", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>!<a class=\"id\" href=\"#driver\">driver</a>-><a class=\"id\" href=\"#err_handler\">err_handler</a> ||", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>!<a class=\"id\" href=\"#driver\">driver</a>-><a class=\"id\" href=\"#err_handler\">err_handler</a>-><a class=\"id\" href=\"#error_detected\">error_detected</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pcie_device\">pcie_device</a> = <a class=\"id\" href=\"#to_pcie_device\">to_pcie_device</a>(<a class=\"id\" href=\"#device\">device</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Forward error detected message to service drivers */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#driver\">driver</a>-><a class=\"id\" href=\"#err_handler\">err_handler</a>-><a class=\"id\" href=\"#error_detected\">error_detected</a>(", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pcie_device\">pcie_device</a>-><a class=\"id\" href=\"#port\">port</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#result_data\">result_data</a>-><a class=\"id\" href=\"#state\">state</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#result_data\">result_data</a>-><a class=\"id\" href=\"#result\">result</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#merge_result\">merge_result</a>(<a class=\"id\" href=\"#result_data\">result_data</a>-><a class=\"id\" href=\"#result\">result</a>, <a class=\"id\" href=\"#status\">status</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#pci_ers_result_t\">pci_ers_result_t</a> <a class=\"id\" href=\"#pcie_portdrv_error_detected\">pcie_portdrv_error_detected</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>enum <a class=\"id\" href=\"#pci_channel_state\">pci_channel_state</a> <a class=\"id\" href=\"#error\">error</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#aer_broadcast_data\">aer_broadcast_data</a> <a class=\"id\" href=\"#data\">data</a> = {<a class=\"id\" href=\"#error\">error</a>, <a class=\"id\" href=\"#PCI_ERS_RESULT_CAN_RECOVER\">PCI_ERS_RESULT_CAN_RECOVER</a>};", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* can not fail */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#device_for_each_child\">device_for_each_child</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#data\">data</a>, <a class=\"id\" href=\"#error_detected_iter\">error_detected_iter</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#data\">data</a>.<a class=\"id\" href=\"#result\">result</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#mmio_enabled_iter\">mmio_enabled_iter</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#device\">device</a>, void *<a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pcie_device\">pcie_device</a> *<a class=\"id\" href=\"#pcie_device\">pcie_device</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pcie_port_service_driver\">pcie_port_service_driver</a> *<a class=\"id\" href=\"#driver\">driver</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_ers_result_t\">pci_ers_result_t</a> <a class=\"id\" href=\"#status\">status</a>, *<a class=\"id\" href=\"#result\">result</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = (<a class=\"id\" href=\"#pci_ers_result_t\">pci_ers_result_t</a> *) <a class=\"id\" href=\"#data\">data</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#bus\">bus</a> == &amp;<a class=\"id\" href=\"#pcie_port_bus_type\">pcie_port_bus_type</a> && <a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#driver\">driver</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#driver\">driver</a> = <a class=\"id\" href=\"#to_service_driver\">to_service_driver</a>(<a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#driver\">driver</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#driver\">driver</a>-><a class=\"id\" href=\"#err_handler\">err_handler</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#driver\">driver</a>-><a class=\"id\" href=\"#err_handler\">err_handler</a>-><a class=\"id\" href=\"#mmio_enabled\">mmio_enabled</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pcie_device\">pcie_device</a> = <a class=\"id\" href=\"#to_pcie_device\">to_pcie_device</a>(<a class=\"id\" href=\"#device\">device</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Forward error message to service drivers */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#driver\">driver</a>-><a class=\"id\" href=\"#err_handler\">err_handler</a>-><a class=\"id\" href=\"#mmio_enabled\">mmio_enabled</a>(", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pcie_device\">pcie_device</a>-><a class=\"id\" href=\"#port\">port</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#merge_result\">merge_result</a>(*<a class=\"id\" href=\"#result\">result</a>, <a class=\"id\" href=\"#status\">status</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#pci_ers_result_t\">pci_ers_result_t</a> <a class=\"id\" href=\"#pcie_portdrv_mmio_enabled\">pcie_portdrv_mmio_enabled</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_ers_result_t\">pci_ers_result_t</a> <a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#PCI_ERS_RESULT_RECOVERED\">PCI_ERS_RESULT_RECOVERED</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* get true return value from &amp;status */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#device_for_each_child\">device_for_each_child</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#status\">status</a>, <a class=\"id\" href=\"#mmio_enabled_iter\">mmio_enabled_iter</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#slot_reset_iter\">slot_reset_iter</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#device\">device</a>, void *<a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pcie_device\">pcie_device</a> *<a class=\"id\" href=\"#pcie_device\">pcie_device</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pcie_port_service_driver\">pcie_port_service_driver</a> *<a class=\"id\" href=\"#driver\">driver</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_ers_result_t\">pci_ers_result_t</a> <a class=\"id\" href=\"#status\">status</a>, *<a class=\"id\" href=\"#result\">result</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#result\">result</a> = (<a class=\"id\" href=\"#pci_ers_result_t\">pci_ers_result_t</a> *) <a class=\"id\" href=\"#data\">data</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#bus\">bus</a> == &amp;<a class=\"id\" href=\"#pcie_port_bus_type\">pcie_port_bus_type</a> && <a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#driver\">driver</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#driver\">driver</a> = <a class=\"id\" href=\"#to_service_driver\">to_service_driver</a>(<a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#driver\">driver</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#driver\">driver</a>-><a class=\"id\" href=\"#err_handler\">err_handler</a> &&", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#driver\">driver</a>-><a class=\"id\" href=\"#err_handler\">err_handler</a>-><a class=\"id\" href=\"#slot_reset\">slot_reset</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pcie_device\">pcie_device</a> = <a class=\"id\" href=\"#to_pcie_device\">to_pcie_device</a>(<a class=\"id\" href=\"#device\">device</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Forward error message to service drivers */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#driver\">driver</a>-><a class=\"id\" href=\"#err_handler\">err_handler</a>-><a class=\"id\" href=\"#slot_reset\">slot_reset</a>(", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pcie_device\">pcie_device</a>-><a class=\"id\" href=\"#port\">port</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#result\">result</a> = <a class=\"id\" href=\"#merge_result\">merge_result</a>(*<a class=\"id\" href=\"#result\">result</a>, <a class=\"id\" href=\"#status\">status</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static <a class=\"id\" href=\"#pci_ers_result_t\">pci_ers_result_t</a> <a class=\"id\" href=\"#pcie_portdrv_slot_reset\">pcie_portdrv_slot_reset</a>(struct <a class=\"id\" href=\"#pci_dev\">pci_dev</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pci_ers_result_t\">pci_ers_result_t</a> <a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#PCI_ERS_RESULT_RECOVERED\">PCI_ERS_RESULT_RECOVERED</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#retval\">retval</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* If fatal, restore cfg space for possible link reset at upstream */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#error_state\">error_state</a> == <a class=\"id\" href=\"#pci_channel_io_frozen\">pci_channel_io_frozen</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#state_saved\">state_saved</a> = <a class=\"id\" href=\"#true\">true</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pci_restore_state\">pci_restore_state</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pcie_portdrv_restore_config\">pcie_portdrv_restore_config</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pci_enable_pcie_error_reporting\">pci_enable_pcie_error_reporting</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* get true return value from &amp;status */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#retval\">retval</a> = <a class=\"id\" href=\"#device_for_each_child\">device_for_each_child</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#status\">status</a>, <a class=\"id\" href=\"#slot_reset_iter\">slot_reset_iter</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#status\">status</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#resume_iter\">resume_iter</a>(struct <a class=\"id\" href=\"#device\">device</a> *<a class=\"id\" href=\"#device\">device</a>, void *<a class=\"id\" href=\"#data\">data</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pcie_device\">pcie_device</a> *<a class=\"id\" href=\"#pcie_device\">pcie_device</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#pcie_port_service_driver\">pcie_port_service_driver</a> *<a class=\"id\" href=\"#driver\">driver</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#bus\">bus</a> == &amp;<a class=\"id\" href=\"#pcie_port_bus_type\">pcie_port_bus_type</a> && <a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#driver\">driver</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#driver\">driver</a> = <a class=\"id\" href=\"#to_service_driver\">to_service_driver</a>(<a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#driver\">driver</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#driver\">driver</a> &&", 
];
xr_frag_insert('l/e7/f9603a5104936e3855ac4e5f0c85c951fe9e1a.xr', __xr_tmp);
