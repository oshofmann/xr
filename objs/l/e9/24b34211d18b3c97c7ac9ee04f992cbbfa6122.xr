var __xr_tmp = [
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ata_eh_qc_retry - Tell midlayer to retry an ATA command after EH</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@qc: Command to retry</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Indicate to the mid and upper layers that an ATA command</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>should be retried.  To be used from EH.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>SCSI midlayer limits the number of retries to scmd-&gt;allowed.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>scmd-&gt;retries is decremented for commands which get retried</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>due to unrelated failures (qc-&gt;err_mask is zero).</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#ata_eh_qc_retry\">ata_eh_qc_retry</a>(struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#scsi_cmnd\">scsi_cmnd</a> *<a class=\"id\" href=\"#scmd\">scmd</a> = <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#scsicmd\">scsicmd</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> && <a class=\"id\" href=\"#scmd\">scmd</a>-><a class=\"id\" href=\"#retries\">retries</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#scmd\">scmd</a>-><a class=\"id\" href=\"#retries\">retries</a>--;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#__ata_eh_qc_complete\">__ata_eh_qc_complete</a>(<a class=\"id\" href=\"#qc\">qc</a>);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ata_dev_disable - disable ATA device</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@dev: ATA device to disable</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Disable @dev.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Locking:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>EH context.</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#ata_dev_disable\">ata_dev_disable</a>(struct <a class=\"id\" href=\"#ata_device\">ata_device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#ata_dev_enabled\">ata_dev_enabled</a>(<a class=\"id\" href=\"#dev\">dev</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ata_msg_drv\">ata_msg_drv</a>(<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#ap\">ap</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_dev_printk\">ata_dev_printk</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a>, \"disabled\\n\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_acpi_on_disable\">ata_acpi_on_disable</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_down_xfermask_limit\">ata_down_xfermask_limit</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#ATA_DNXFER_FORCE_PIO0\">ATA_DNXFER_FORCE_PIO0</a> | <a class=\"id\" href=\"#ATA_DNXFER_QUIET\">ATA_DNXFER_QUIET</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#class\">class</a>++;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* From now till the next successful probe, ering is used to</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * track probe failures.  Clear accumulated device error info.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_ering_clear\">ata_ering_clear</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#ering\">ering</a>);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ata_eh_detach_dev - detach ATA device</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@dev: ATA device to detach</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Detach @dev.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>LOCKING:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>None.</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#ata_eh_detach_dev\">ata_eh_detach_dev</a>(struct <a class=\"id\" href=\"#ata_device\">ata_device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a> = <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#link\">link</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#ap\">ap</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_eh_context\">ata_eh_context</a> *<a class=\"id\" href=\"#ehc\">ehc</a> = &amp;<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#eh_context\">eh_context</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_dev_disable\">ata_dev_disable</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irqsave\">spin_lock_irqsave</a>(<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#lock\">lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#flags\">flags</a> &= ~<a class=\"id\" href=\"#ATA_DFLAG_DETACH\">ATA_DFLAG_DETACH</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ata_scsi_offline_dev\">ata_scsi_offline_dev</a>(<a class=\"id\" href=\"#dev\">dev</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#flags\">flags</a> |= <a class=\"id\" href=\"#ATA_DFLAG_DETACHED\">ATA_DFLAG_DETACHED</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#pflags\">pflags</a> |= <a class=\"id\" href=\"#ATA_PFLAG_SCSI_HOTPLUG\">ATA_PFLAG_SCSI_HOTPLUG</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* clear per-dev EH info */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_eh_clear_action\">ata_eh_clear_action</a>(<a class=\"id\" href=\"#link\">link</a>, <a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#eh_info\">eh_info</a>, <a class=\"id\" href=\"#ATA_EH_PERDEV_MASK\">ATA_EH_PERDEV_MASK</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_eh_clear_action\">ata_eh_clear_action</a>(<a class=\"id\" href=\"#link\">link</a>, <a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#eh_context\">eh_context</a>.<a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#ATA_EH_PERDEV_MASK\">ATA_EH_PERDEV_MASK</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#saved_xfer_mode\">saved_xfer_mode</a>[<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#devno\">devno</a>] = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#saved_ncq_enabled\">saved_ncq_enabled</a> &= ~(1 << <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#devno\">devno</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irqrestore\">spin_unlock_irqrestore</a>(<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#lock\">lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ata_eh_about_to_do - about to perform eh_action</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@link: target ATA link</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@dev: target ATA dev for per-dev action (can be NULL)</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@action: action about to be performed</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Called just before performing EH actions to clear related bits</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>in @link-&gt;eh_info such that eh actions are not unnecessarily</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>repeated.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>LOCKING:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>None.</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#ata_eh_about_to_do\">ata_eh_about_to_do</a>(struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a>, struct <a class=\"id\" href=\"#ata_device\">ata_device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#action\">action</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#ap\">ap</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_eh_info\">ata_eh_info</a> *<a class=\"id\" href=\"#ehi\">ehi</a> = &amp;<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#eh_info\">eh_info</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_eh_context\">ata_eh_context</a> *<a class=\"id\" href=\"#ehc\">ehc</a> = &amp;<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#eh_context\">eh_context</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_lock_irqsave\">spin_lock_irqsave</a>(<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#lock\">lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_eh_clear_action\">ata_eh_clear_action</a>(<a class=\"id\" href=\"#link\">link</a>, <a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#ehi\">ehi</a>, <a class=\"id\" href=\"#action\">action</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* About to take EH action, set RECOVERED.  Ignore actions on</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * slave links as master will do them again.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#ATA_EHI_QUIET\">ATA_EHI_QUIET</a>) && <a class=\"id\" href=\"#link\">link</a> != <a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#slave_link\">slave_link</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#pflags\">pflags</a> |= <a class=\"id\" href=\"#ATA_PFLAG_RECOVERED\">ATA_PFLAG_RECOVERED</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#spin_unlock_irqrestore\">spin_unlock_irqrestore</a>(<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#lock\">lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ata_eh_done - EH action complete</span>", 
"<span class=\"comment\">*<span class=\"ts\"/>@ap: target ATA port</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@dev: target ATA dev for per-dev action (can be NULL)</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@action: action just completed</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Called right after performing EH actions to clear related bits</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>in @link-&gt;eh_context.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>LOCKING:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>None.</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#ata_eh_done\">ata_eh_done</a>(struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a>, struct <a class=\"id\" href=\"#ata_device\">ata_device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/> unsigned int <a class=\"id\" href=\"#action\">action</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_eh_context\">ata_eh_context</a> *<a class=\"id\" href=\"#ehc\">ehc</a> = &amp;<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#eh_context\">eh_context</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_eh_clear_action\">ata_eh_clear_action</a>(<a class=\"id\" href=\"#link\">link</a>, <a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>, <a class=\"id\" href=\"#action\">action</a>);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ata_err_string - convert err_mask to descriptive string</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@err_mask: error mask to convert to string</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Convert @err_mask to descriptive string.  Errors are</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>prioritized according to severity and only the most severe</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>error is reported.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>LOCKING:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>None.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>RETURNS:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Descriptive string for @err_mask</span>", 
"<span class=\"comment\"> */</span>", 
"static const char *<a class=\"id\" href=\"#ata_err_string\">ata_err_string</a>(unsigned int <a class=\"id\" href=\"#err_mask\">err_mask</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err_mask\">err_mask</a> &amp; <a class=\"id\" href=\"#AC_ERR_HOST_BUS\">AC_ERR_HOST_BUS</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return \"host bus error\";", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err_mask\">err_mask</a> &amp; <a class=\"id\" href=\"#AC_ERR_ATA_BUS\">AC_ERR_ATA_BUS</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return \"ATA bus error\";", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err_mask\">err_mask</a> &amp; <a class=\"id\" href=\"#AC_ERR_TIMEOUT\">AC_ERR_TIMEOUT</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return \"timeout\";", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err_mask\">err_mask</a> &amp; <a class=\"id\" href=\"#AC_ERR_HSM\">AC_ERR_HSM</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return \"HSM violation\";", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err_mask\">err_mask</a> &amp; <a class=\"id\" href=\"#AC_ERR_SYSTEM\">AC_ERR_SYSTEM</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return \"internal error\";", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err_mask\">err_mask</a> &amp; <a class=\"id\" href=\"#AC_ERR_MEDIA\">AC_ERR_MEDIA</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return \"media error\";", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err_mask\">err_mask</a> &amp; <a class=\"id\" href=\"#AC_ERR_INVALID\">AC_ERR_INVALID</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return \"invalid argument\";", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err_mask\">err_mask</a> &amp; <a class=\"id\" href=\"#AC_ERR_DEV\">AC_ERR_DEV</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return \"device error\";", 
"<span class=\"ts\"/>return \"unknown error\";", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ata_read_log_page - read a specific log page</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@dev: target device</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@page: page to read</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@buf: buffer to store read page</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@sectors: number of sectors to read</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Read log page using READ_LOG_EXT command.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>LOCKING:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Kernel thread context (may sleep).</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>RETURNS:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>0 on success, AC_ERR_* mask otherwise.</span>", 
"<span class=\"comment\"> */</span>", 
"static unsigned int <a class=\"id\" href=\"#ata_read_log_page\">ata_read_log_page</a>(struct <a class=\"id\" href=\"#ata_device\">ata_device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#page\">page</a>, void *<a class=\"id\" href=\"#buf\">buf</a>, unsigned int <a class=\"id\" href=\"#sectors\">sectors</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_taskfile\">ata_taskfile</a> <a class=\"id\" href=\"#tf\">tf</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#err_mask\">err_mask</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#DPRINTK\">DPRINTK</a>(\"read log page - page %d\\n\", <a class=\"id\" href=\"#page\">page</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_tf_init\">ata_tf_init</a>(<a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#tf\">tf</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#command\">command</a> = <a class=\"id\" href=\"#ATA_CMD_READ_LOG_EXT\">ATA_CMD_READ_LOG_EXT</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#lbal\">lbal</a> = <a class=\"id\" href=\"#page\">page</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#nsect\">nsect</a> = <a class=\"id\" href=\"#sectors\">sectors</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#hob_nsect\">hob_nsect</a> = <a class=\"id\" href=\"#sectors\">sectors</a> >> 8;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#flags\">flags</a> |= <a class=\"id\" href=\"#ATA_TFLAG_ISADDR\">ATA_TFLAG_ISADDR</a> | <a class=\"id\" href=\"#ATA_TFLAG_LBA48\">ATA_TFLAG_LBA48</a> | <a class=\"id\" href=\"#ATA_TFLAG_DEVICE\">ATA_TFLAG_DEVICE</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#protocol\">protocol</a> = <a class=\"id\" href=\"#ATA_PROT_PIO\">ATA_PROT_PIO</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err_mask\">err_mask</a> = <a class=\"id\" href=\"#ata_exec_internal\">ata_exec_internal</a>(<a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#tf\">tf</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#DMA_FROM_DEVICE\">DMA_FROM_DEVICE</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     <a class=\"id\" href=\"#buf\">buf</a>, <a class=\"id\" href=\"#sectors\">sectors</a> * <a class=\"id\" href=\"#ATA_SECT_SIZE\">ATA_SECT_SIZE</a>, 0);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#DPRINTK\">DPRINTK</a>(\"EXIT, err_mask=%x\\n\", <a class=\"id\" href=\"#err_mask\">err_mask</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#err_mask\">err_mask</a>;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ata_eh_read_log_10h - Read log page 10h for NCQ error details</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@dev: Device to read log page 10h from</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@tag: Resulting tag of the failed command</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@tf: Resulting taskfile registers of the failed command</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Read log page 10h to obtain NCQ error details and clear error</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>condition.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>LOCKING:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Kernel thread context (may sleep).</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>RETURNS:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>0 on success, -errno otherwise.</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#ata_eh_read_log_10h\">ata_eh_read_log_10h</a>(struct <a class=\"id\" href=\"#ata_device\">ata_device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       int *<a class=\"id\" href=\"#tag\">tag</a>, struct <a class=\"id\" href=\"#ata_taskfile\">ata_taskfile</a> *<a class=\"id\" href=\"#tf\">tf</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> *<a class=\"id\" href=\"#buf\">buf</a> = <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#sector_buf\">sector_buf</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#err_mask\">err_mask</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#csum\">csum</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#i\">i</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err_mask\">err_mask</a> = <a class=\"id\" href=\"#ata_read_log_page\">ata_read_log_page</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#ATA_LOG_SATA_NCQ\">ATA_LOG_SATA_NCQ</a>, <a class=\"id\" href=\"#buf\">buf</a>, 1);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err_mask\">err_mask</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EIO\">EIO</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#csum\">csum</a> = 0;", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#i\">i</a> = 0; <a class=\"id\" href=\"#i\">i</a> &lt; <a class=\"id\" href=\"#ATA_SECT_SIZE\">ATA_SECT_SIZE</a>; <a class=\"id\" href=\"#i\">i</a>++)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#csum\">csum</a> += <a class=\"id\" href=\"#buf\">buf</a>[<a class=\"id\" href=\"#i\">i</a>];", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#csum\">csum</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_dev_printk\">ata_dev_printk</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       \"invalid checksum 0x%x on log page 10h\\n\", <a class=\"id\" href=\"#csum\">csum</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#buf\">buf</a>[0] &amp; 0x80)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOENT\">ENOENT</a>;", 
"", 
"<span class=\"ts\"/>*<a class=\"id\" href=\"#tag\">tag</a> = <a class=\"id\" href=\"#buf\">buf</a>[0] &amp; 0x1f;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>-><a class=\"id\" href=\"#command\">command</a> = <a class=\"id\" href=\"#buf\">buf</a>[2];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>-><a class=\"id\" href=\"#feature\">feature</a> = <a class=\"id\" href=\"#buf\">buf</a>[3];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>-><a class=\"id\" href=\"#lbal\">lbal</a> = <a class=\"id\" href=\"#buf\">buf</a>[4];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>-><a class=\"id\" href=\"#lbam\">lbam</a> = <a class=\"id\" href=\"#buf\">buf</a>[5];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>-><a class=\"id\" href=\"#lbah\">lbah</a> = <a class=\"id\" href=\"#buf\">buf</a>[6];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>-><a class=\"id\" href=\"#device\">device</a> = <a class=\"id\" href=\"#buf\">buf</a>[7];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>-><a class=\"id\" href=\"#hob_lbal\">hob_lbal</a> = <a class=\"id\" href=\"#buf\">buf</a>[8];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>-><a class=\"id\" href=\"#hob_lbam\">hob_lbam</a> = <a class=\"id\" href=\"#buf\">buf</a>[9];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>-><a class=\"id\" href=\"#hob_lbah\">hob_lbah</a> = <a class=\"id\" href=\"#buf\">buf</a>[10];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>-><a class=\"id\" href=\"#nsect\">nsect</a> = <a class=\"id\" href=\"#buf\">buf</a>[12];", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>-><a class=\"id\" href=\"#hob_nsect\">hob_nsect</a> = <a class=\"id\" href=\"#buf\">buf</a>[13];", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>atapi_eh_tur - perform ATAPI TEST_UNIT_READY</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@dev: target ATAPI device</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@r_sense_key: out parameter for sense_key</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Perform ATAPI TEST_UNIT_READY.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>LOCKING:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>EH context (may sleep).</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>RETURNS:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>0 on success, AC_ERR_* mask on failure.</span>", 
"<span class=\"comment\"> */</span>", 
"static unsigned int <a class=\"id\" href=\"#atapi_eh_tur\">atapi_eh_tur</a>(struct <a class=\"id\" href=\"#ata_device\">ata_device</a> *<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#u8\">u8</a> *<a class=\"id\" href=\"#r_sense_key\">r_sense_key</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#cdb\">cdb</a>[<a class=\"id\" href=\"#ATAPI_CDB_LEN\">ATAPI_CDB_LEN</a>] = { <a class=\"id\" href=\"#TEST_UNIT_READY\">TEST_UNIT_READY</a>, 0, 0, 0, 0, 0 };", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_taskfile\">ata_taskfile</a> <a class=\"id\" href=\"#tf\">tf</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#err_mask\">err_mask</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_tf_init\">ata_tf_init</a>(<a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#tf\">tf</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#flags\">flags</a> |= <a class=\"id\" href=\"#ATA_TFLAG_ISADDR\">ATA_TFLAG_ISADDR</a> | <a class=\"id\" href=\"#ATA_TFLAG_DEVICE\">ATA_TFLAG_DEVICE</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#command\">command</a> = <a class=\"id\" href=\"#ATA_CMD_PACKET\">ATA_CMD_PACKET</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#protocol\">protocol</a> = <a class=\"id\" href=\"#ATAPI_PROT_NODATA\">ATAPI_PROT_NODATA</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err_mask\">err_mask</a> = <a class=\"id\" href=\"#ata_exec_internal\">ata_exec_internal</a>(<a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#tf\">tf</a>, <a class=\"id\" href=\"#cdb\">cdb</a>, <a class=\"id\" href=\"#DMA_NONE\">DMA_NONE</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, 0, 0);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err_mask\">err_mask</a> == <a class=\"id\" href=\"#AC_ERR_DEV\">AC_ERR_DEV</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#r_sense_key\">r_sense_key</a> = <a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#feature\">feature</a> >> 4;", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#err_mask\">err_mask</a>;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>atapi_eh_request_sense - perform ATAPI REQUEST_SENSE</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@dev: device to perform REQUEST_SENSE to</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@sense_buf: result sense data buffer (SCSI_SENSE_BUFFERSIZE bytes long)</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@dfl_sense_key: default sense key to use</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Perform ATAPI REQUEST_SENSE after the device reported CHECK</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>SENSE.  This function is EH helper.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>LOCKING:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Kernel thread context (may sleep).</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>RETURNS:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>0 on success, AC_ERR_* mask on failure</span>", 
"<span class=\"comment\"> */</span>", 
"static unsigned int <a class=\"id\" href=\"#atapi_eh_request_sense\">atapi_eh_request_sense</a>(struct <a class=\"id\" href=\"#ata_device\">ata_device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#u8\">u8</a> *<a class=\"id\" href=\"#sense_buf\">sense_buf</a>, <a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#dfl_sense_key\">dfl_sense_key</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#cdb\">cdb</a>[<a class=\"id\" href=\"#ATAPI_CDB_LEN\">ATAPI_CDB_LEN</a>] =", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#REQUEST_SENSE\">REQUEST_SENSE</a>, 0, 0, 0, <a class=\"id\" href=\"#SCSI_SENSE_BUFFERSIZE\">SCSI_SENSE_BUFFERSIZE</a>, 0 };", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#ap\">ap</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_taskfile\">ata_taskfile</a> <a class=\"id\" href=\"#tf\">tf</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#DPRINTK\">DPRINTK</a>(\"ATAPI request sense\\n\");", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* FIXME: is this needed? */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(<a class=\"id\" href=\"#sense_buf\">sense_buf</a>, 0, <a class=\"id\" href=\"#SCSI_SENSE_BUFFERSIZE\">SCSI_SENSE_BUFFERSIZE</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* initialize sense_buf with the error register,</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * for the case where they are -not- overwritten</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sense_buf\">sense_buf</a>[0] = 0x70;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sense_buf\">sense_buf</a>[2] = <a class=\"id\" href=\"#dfl_sense_key\">dfl_sense_key</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* some devices time out if garbage left in tf */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_tf_init\">ata_tf_init</a>(<a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#tf\">tf</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#flags\">flags</a> |= <a class=\"id\" href=\"#ATA_TFLAG_ISADDR\">ATA_TFLAG_ISADDR</a> | <a class=\"id\" href=\"#ATA_TFLAG_DEVICE\">ATA_TFLAG_DEVICE</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#command\">command</a> = <a class=\"id\" href=\"#ATA_CMD_PACKET\">ATA_CMD_PACKET</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* is it pointless to prefer PIO for \"safety reasons\"? */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#ATA_FLAG_PIO_DMA\">ATA_FLAG_PIO_DMA</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#protocol\">protocol</a> = <a class=\"id\" href=\"#ATAPI_PROT_DMA\">ATAPI_PROT_DMA</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#feature\">feature</a> |= <a class=\"id\" href=\"#ATAPI_PKT_DMA\">ATAPI_PKT_DMA</a>;", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#protocol\">protocol</a> = <a class=\"id\" href=\"#ATAPI_PROT_PIO\">ATAPI_PROT_PIO</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#lbam\">lbam</a> = <a class=\"id\" href=\"#SCSI_SENSE_BUFFERSIZE\">SCSI_SENSE_BUFFERSIZE</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tf\">tf</a>.<a class=\"id\" href=\"#lbah\">lbah</a> = 0;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ata_exec_internal\">ata_exec_internal</a>(<a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#tf\">tf</a>, <a class=\"id\" href=\"#cdb\">cdb</a>, <a class=\"id\" href=\"#DMA_FROM_DEVICE\">DMA_FROM_DEVICE</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#sense_buf\">sense_buf</a>, <a class=\"id\" href=\"#SCSI_SENSE_BUFFERSIZE\">SCSI_SENSE_BUFFERSIZE</a>, 0);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ata_eh_analyze_serror - analyze SError for a failed port</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@link: ATA link to analyze SError for</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Analyze SError if available and further determine cause of</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>failure.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>LOCKING:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>None.</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#ata_eh_analyze_serror\">ata_eh_analyze_serror</a>(struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_eh_context\">ata_eh_context</a> *<a class=\"id\" href=\"#ehc\">ehc</a> = &amp;<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#eh_context\">eh_context</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#serror\">serror</a> = <a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#serror\">serror</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#err_mask\">err_mask</a> = 0, <a class=\"id\" href=\"#action\">action</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#hotplug_mask\">hotplug_mask</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#serror\">serror</a> &amp; (<a class=\"id\" href=\"#SERR_PERSISTENT\">SERR_PERSISTENT</a> | <a class=\"id\" href=\"#SERR_DATA\">SERR_DATA</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_ATA_BUS\">AC_ERR_ATA_BUS</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#serror\">serror</a> &amp; <a class=\"id\" href=\"#SERR_PROTOCOL\">SERR_PROTOCOL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_HSM\">AC_ERR_HSM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#serror\">serror</a> &amp; <a class=\"id\" href=\"#SERR_INTERNAL\">SERR_INTERNAL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_SYSTEM\">AC_ERR_SYSTEM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Determine whether a hotplug event has occurred.  Both</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * SError.N/X are considered hotplug events for enabled or</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * host links.  For disabled PMP links, only N bit is</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * considered as X bit is left at 1 for link plugging.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#hotplug_mask\">hotplug_mask</a> = 0;", 
"", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#ATA_LFLAG_DISABLED\">ATA_LFLAG_DISABLED</a>) || <a class=\"id\" href=\"#ata_is_host_link\">ata_is_host_link</a>(<a class=\"id\" href=\"#link\">link</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hotplug_mask\">hotplug_mask</a> = <a class=\"id\" href=\"#SERR_PHYRDY_CHG\">SERR_PHYRDY_CHG</a> | <a class=\"id\" href=\"#SERR_DEV_XCHG\">SERR_DEV_XCHG</a>;", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#hotplug_mask\">hotplug_mask</a> = <a class=\"id\" href=\"#SERR_PHYRDY_CHG\">SERR_PHYRDY_CHG</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#serror\">serror</a> &amp; <a class=\"id\" href=\"#hotplug_mask\">hotplug_mask</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_ehi_hotplugged\">ata_ehi_hotplugged</a>(&amp;<a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#err_mask\">err_mask</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#action\">action</a>;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ata_eh_analyze_ncq_error - analyze NCQ error</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@link: ATA link to analyze NCQ error for</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Read log page 10h, determine the offending qc and acquire</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>error status TF.  For NCQ device errors, all LLDDs have to do</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>is setting AC_ERR_DEV in ehi-&gt;err_mask.  This function takes</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>care of the rest.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>LOCKING:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Kernel thread context (may sleep).</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#ata_eh_analyze_ncq_error\">ata_eh_analyze_ncq_error</a>(struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#ap\">ap</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_eh_context\">ata_eh_context</a> *<a class=\"id\" href=\"#ehc\">ehc</a> = &amp;<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#eh_context\">eh_context</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_device\">ata_device</a> *<a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_taskfile\">ata_taskfile</a> <a class=\"id\" href=\"#tf\">tf</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#tag\">tag</a>, <a class=\"id\" href=\"#rc\">rc</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* if frozen, we can't do much */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#pflags\">pflags</a> &amp; <a class=\"id\" href=\"#ATA_PFLAG_FROZEN\">ATA_PFLAG_FROZEN</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* is it NCQ device error? */</span>", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#sactive\">sactive</a> || !(<a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#err_mask\">err_mask</a> &amp; <a class=\"id\" href=\"#AC_ERR_DEV\">AC_ERR_DEV</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* has LLDD analyzed already? */</span>", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#tag\">tag</a> = 0; <a class=\"id\" href=\"#tag\">tag</a> &lt; <a class=\"id\" href=\"#ATA_MAX_QUEUE\">ATA_MAX_QUEUE</a>; <a class=\"id\" href=\"#tag\">tag</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a> = <a class=\"id\" href=\"#__ata_qc_from_tag\">__ata_qc_from_tag</a>(<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#tag\">tag</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!(<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#ATA_QCFLAG_FAILED\">ATA_QCFLAG_FAILED</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* okay, this error is ours */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(&amp;<a class=\"id\" href=\"#tf\">tf</a>, 0, sizeof(<a class=\"id\" href=\"#tf\">tf</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#ata_eh_read_log_10h\">ata_eh_read_log_10h</a>(<a class=\"id\" href=\"#dev\">dev</a>, &amp;<a class=\"id\" href=\"#tag\">tag</a>, &amp;<a class=\"id\" href=\"#tf\">tf</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_link_printk\">ata_link_printk</a>(<a class=\"id\" href=\"#link\">link</a>, <a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a>, \"failed to read log page 10h \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"(errno=%d)\\n\", <a class=\"id\" href=\"#rc\">rc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#sactive\">sactive</a> &amp; (1 << <a class=\"id\" href=\"#tag\">tag</a>))) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_link_printk\">ata_link_printk</a>(<a class=\"id\" href=\"#link\">link</a>, <a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a>, \"log page 10h reported \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"inactive tag %d\\n\", <a class=\"id\" href=\"#tag\">tag</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* we've got the perpetrator, condemn it */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a> = <a class=\"id\" href=\"#__ata_qc_from_tag\">__ata_qc_from_tag</a>(<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#tag\">tag</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memcpy\">memcpy</a>(&amp;<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#result_tf\">result_tf</a>, &amp;<a class=\"id\" href=\"#tf\">tf</a>, sizeof(<a class=\"id\" href=\"#tf\">tf</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#result_tf\">result_tf</a>.<a class=\"id\" href=\"#flags\">flags</a> = <a class=\"id\" href=\"#ATA_TFLAG_ISADDR\">ATA_TFLAG_ISADDR</a> | <a class=\"id\" href=\"#ATA_TFLAG_LBA\">ATA_TFLAG_LBA</a> | <a class=\"id\" href=\"#ATA_TFLAG_LBA48\">ATA_TFLAG_LBA48</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_DEV\">AC_ERR_DEV</a> | <a class=\"id\" href=\"#AC_ERR_NCQ\">AC_ERR_NCQ</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#err_mask\">err_mask</a> &= ~<a class=\"id\" href=\"#AC_ERR_DEV\">AC_ERR_DEV</a>;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ata_eh_analyze_tf - analyze taskfile of a failed qc</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@qc: qc to analyze</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@tf: Taskfile registers to analyze</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Analyze taskfile of @qc and further determine cause of</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>failure.  This function also requests ATAPI sense data if</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>avaliable.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>LOCKING:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Kernel thread context (may sleep).</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>RETURNS:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Determined recovery action</span>", 
"<span class=\"comment\"> */</span>", 
"static unsigned int <a class=\"id\" href=\"#ata_eh_analyze_tf\">ata_eh_analyze_tf</a>(struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      const struct <a class=\"id\" href=\"#ata_taskfile\">ata_taskfile</a> *<a class=\"id\" href=\"#tf\">tf</a>)", 
"{", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#tmp\">tmp</a>, <a class=\"id\" href=\"#action\">action</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#stat\">stat</a> = <a class=\"id\" href=\"#tf\">tf</a>-><a class=\"id\" href=\"#command\">command</a>, <a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#tf\">tf</a>-><a class=\"id\" href=\"#feature\">feature</a>;", 
"", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#stat\">stat</a> &amp; (<a class=\"id\" href=\"#ATA_BUSY\">ATA_BUSY</a> | <a class=\"id\" href=\"#ATA_DRQ\">ATA_DRQ</a> | <a class=\"id\" href=\"#ATA_DRDY\">ATA_DRDY</a>)) != <a class=\"id\" href=\"#ATA_DRDY\">ATA_DRDY</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_HSM\">AC_ERR_HSM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#stat\">stat</a> &amp; (<a class=\"id\" href=\"#ATA_ERR\">ATA_ERR</a> | <a class=\"id\" href=\"#ATA_DF\">ATA_DF</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_DEV\">AC_ERR_DEV</a>;", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#class\">class</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ATA_DEV_ATA\">ATA_DEV_ATA</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> &amp; <a class=\"id\" href=\"#ATA_ICRC\">ATA_ICRC</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_ATA_BUS\">AC_ERR_ATA_BUS</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> &amp; <a class=\"id\" href=\"#ATA_UNC\">ATA_UNC</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_MEDIA\">AC_ERR_MEDIA</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> &amp; <a class=\"id\" href=\"#ATA_IDNF\">ATA_IDNF</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_INVALID\">AC_ERR_INVALID</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#ATA_DEV_ATAPI\">ATA_DEV_ATAPI</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!(<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#pflags\">pflags</a> &amp; <a class=\"id\" href=\"#ATA_PFLAG_FROZEN\">ATA_PFLAG_FROZEN</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#tmp\">tmp</a> = <a class=\"id\" href=\"#atapi_eh_request_sense\">atapi_eh_request_sense</a>(<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#scsicmd\">scsicmd</a>-><a class=\"id\" href=\"#sense_buffer\">sense_buffer</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#result_tf\">result_tf</a>.<a class=\"id\" href=\"#feature\">feature</a> >> 4);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#tmp\">tmp</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* ATA_QCFLAG_SENSE_VALID is used to</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * tell atapi_qc_complete() that sense</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * data is already valid.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * TODO: interpret sense data and set</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * appropriate err_mask.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#flags\">flags</a> |= <a class=\"id\" href=\"#ATA_QCFLAG_SENSE_VALID\">ATA_QCFLAG_SENSE_VALID</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#tmp\">tmp</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> &amp; (<a class=\"id\" href=\"#AC_ERR_HSM\">AC_ERR_HSM</a> | <a class=\"id\" href=\"#AC_ERR_TIMEOUT\">AC_ERR_TIMEOUT</a> | <a class=\"id\" href=\"#AC_ERR_ATA_BUS\">AC_ERR_ATA_BUS</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#action\">action</a>;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#ata_eh_categorize_error\">ata_eh_categorize_error</a>(unsigned int <a class=\"id\" href=\"#eflags\">eflags</a>, unsigned int <a class=\"id\" href=\"#err_mask\">err_mask</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   int *<a class=\"id\" href=\"#xfer_ok\">xfer_ok</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#base\">base</a> = 0;", 
"", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#eflags\">eflags</a> &amp; <a class=\"id\" href=\"#ATA_EFLAG_DUBIOUS_XFER\">ATA_EFLAG_DUBIOUS_XFER</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#xfer_ok\">xfer_ok</a> = 1;", 
"", 
"<span class=\"ts\"/>if (!*<a class=\"id\" href=\"#xfer_ok\">xfer_ok</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#base\">base</a> = <a class=\"id\" href=\"#ATA_ECAT_DUBIOUS_NONE\">ATA_ECAT_DUBIOUS_NONE</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err_mask\">err_mask</a> &amp; <a class=\"id\" href=\"#AC_ERR_ATA_BUS\">AC_ERR_ATA_BUS</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#base\">base</a> + <a class=\"id\" href=\"#ATA_ECAT_ATA_BUS\">ATA_ECAT_ATA_BUS</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err_mask\">err_mask</a> &amp; <a class=\"id\" href=\"#AC_ERR_TIMEOUT\">AC_ERR_TIMEOUT</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#base\">base</a> + <a class=\"id\" href=\"#ATA_ECAT_TOUT_HSM\">ATA_ECAT_TOUT_HSM</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#eflags\">eflags</a> &amp; <a class=\"id\" href=\"#ATA_EFLAG_IS_IO\">ATA_EFLAG_IS_IO</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#err_mask\">err_mask</a> &amp; <a class=\"id\" href=\"#AC_ERR_HSM\">AC_ERR_HSM</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#base\">base</a> + <a class=\"id\" href=\"#ATA_ECAT_TOUT_HSM\">ATA_ECAT_TOUT_HSM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((<a class=\"id\" href=\"#err_mask\">err_mask</a> &amp;", 
"<span class=\"ts\"/><span class=\"ts\"/>     (<a class=\"id\" href=\"#AC_ERR_DEV\">AC_ERR_DEV</a>|<a class=\"id\" href=\"#AC_ERR_MEDIA\">AC_ERR_MEDIA</a>|<a class=\"id\" href=\"#AC_ERR_INVALID\">AC_ERR_INVALID</a>)) == <a class=\"id\" href=\"#AC_ERR_DEV\">AC_ERR_DEV</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#base\">base</a> + <a class=\"id\" href=\"#ATA_ECAT_UNK_DEV\">ATA_ECAT_UNK_DEV</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"struct <a class=\"id\" href=\"#speed_down_verdict_arg\">speed_down_verdict_arg</a> {", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#since\">since</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#xfer_ok\">xfer_ok</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#nr_errors\">nr_errors</a>[<a class=\"id\" href=\"#ATA_ECAT_NR\">ATA_ECAT_NR</a>];", 
"};", 
"", 
"static int <a class=\"id\" href=\"#speed_down_verdict_cb\">speed_down_verdict_cb</a>(struct <a class=\"id\" href=\"#ata_ering_entry\">ata_ering_entry</a> *<a class=\"id\" href=\"#ent\">ent</a>, void *<a class=\"id\" href=\"#void_arg\">void_arg</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#speed_down_verdict_arg\">speed_down_verdict_arg</a> *<a class=\"id\" href=\"#arg\">arg</a> = <a class=\"id\" href=\"#void_arg\">void_arg</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#cat\">cat</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ent\">ent</a>-><a class=\"id\" href=\"#timestamp\">timestamp</a> &lt; <a class=\"id\" href=\"#arg\">arg</a>-><a class=\"id\" href=\"#since\">since</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cat\">cat</a> = <a class=\"id\" href=\"#ata_eh_categorize_error\">ata_eh_categorize_error</a>(<a class=\"id\" href=\"#ent\">ent</a>-><a class=\"id\" href=\"#eflags\">eflags</a>, <a class=\"id\" href=\"#ent\">ent</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      &amp;<a class=\"id\" href=\"#arg\">arg</a>-><a class=\"id\" href=\"#xfer_ok\">xfer_ok</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#arg\">arg</a>-><a class=\"id\" href=\"#nr_errors\">nr_errors</a>[<a class=\"id\" href=\"#cat\">cat</a>]++;", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ata_eh_speed_down_verdict - Determine speed down verdict</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@dev: Device of interest</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>This function examines error ring of @dev and determines</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>whether NCQ needs to be turned off, transfer speed should be</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>stepped down, or falling back to PIO is necessary.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ECAT_ATA_BUS<span class=\"ts\"/>: ATA_BUS error for any command</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ECAT_TOUT_HSM<span class=\"ts\"/>: TIMEOUT for any command or HSM violation for</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  IO commands</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ECAT_UNK_DEV<span class=\"ts\"/>: Unknown DEV error for IO commands</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ECAT_DUBIOUS_*<span class=\"ts\"/>: Identical to above three but occurred while</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  data transfer hasn't been verified.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Verdicts are</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>NCQ_OFF<span class=\"ts\"/><span class=\"ts\"/>: Turn off NCQ.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>SPEED_DOWN<span class=\"ts\"/>: Speed down transfer speed but don't fall back</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  to PIO.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>FALLBACK_TO_PIO<span class=\"ts\"/>: Fall back to PIO.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Even if multiple verdicts are returned, only one action is</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>taken per error.  An action triggered by non-DUBIOUS errors</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>clears ering, while one triggered by DUBIOUS_* errors doesn't.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>This is to expedite speed down decisions right after device is</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>initially configured.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>The followings are speed down rules.  #1 and #2 deal with</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>DUBIOUS errors.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>1. If more than one DUBIOUS_ATA_BUS or DUBIOUS_TOUT_HSM errors</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>   occurred during last 5 mins, SPEED_DOWN and FALLBACK_TO_PIO.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>2. If more than one DUBIOUS_TOUT_HSM or DUBIOUS_UNK_DEV errors</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>   occurred during last 5 mins, NCQ_OFF.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>3. If more than 8 ATA_BUS, TOUT_HSM or UNK_DEV errors</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>   ocurred during last 5 mins, FALLBACK_TO_PIO</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>4. If more than 3 TOUT_HSM or UNK_DEV errors occurred</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>   during last 10 mins, NCQ_OFF.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>5. If more than 3 ATA_BUS or TOUT_HSM errors, or more than 6</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>   UNK_DEV errors occurred during last 10 mins, SPEED_DOWN.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>LOCKING:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Inherited from caller.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>RETURNS:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>OR of ATA_EH_SPDN_* flags.</span>", 
"<span class=\"comment\"> */</span>", 
"static unsigned int <a class=\"id\" href=\"#ata_eh_speed_down_verdict\">ata_eh_speed_down_verdict</a>(struct <a class=\"id\" href=\"#ata_device\">ata_device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/>const <a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#j5mins\">j5mins</a> = 5LLU * 60 * <a class=\"id\" href=\"#HZ\">HZ</a>, <a class=\"id\" href=\"#j10mins\">j10mins</a> = 10LLU * 60 * <a class=\"id\" href=\"#HZ\">HZ</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u64\">u64</a> <a class=\"id\" href=\"#j64\">j64</a> = <a class=\"id\" href=\"#get_jiffies_64\">get_jiffies_64</a>();", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#speed_down_verdict_arg\">speed_down_verdict_arg</a> <a class=\"id\" href=\"#arg\">arg</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#verdict\">verdict</a> = 0;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* scan past 5 mins of error history */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(&amp;<a class=\"id\" href=\"#arg\">arg</a>, 0, sizeof(<a class=\"id\" href=\"#arg\">arg</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#arg\">arg</a>.<a class=\"id\" href=\"#since\">since</a> = <a class=\"id\" href=\"#j64\">j64</a> - <a class=\"id\" href=\"#min\">min</a>(<a class=\"id\" href=\"#j64\">j64</a>, <a class=\"id\" href=\"#j5mins\">j5mins</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_ering_map\">ata_ering_map</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#ering\">ering</a>, <a class=\"id\" href=\"#speed_down_verdict_cb\">speed_down_verdict_cb</a>, &amp;<a class=\"id\" href=\"#arg\">arg</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#arg\">arg</a>.<a class=\"id\" href=\"#nr_errors\">nr_errors</a>[<a class=\"id\" href=\"#ATA_ECAT_DUBIOUS_ATA_BUS\">ATA_ECAT_DUBIOUS_ATA_BUS</a>] +", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#arg\">arg</a>.<a class=\"id\" href=\"#nr_errors\">nr_errors</a>[<a class=\"id\" href=\"#ATA_ECAT_DUBIOUS_TOUT_HSM\">ATA_ECAT_DUBIOUS_TOUT_HSM</a>] &gt; 1)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#verdict\">verdict</a> |= <a class=\"id\" href=\"#ATA_EH_SPDN_SPEED_DOWN\">ATA_EH_SPDN_SPEED_DOWN</a> |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ATA_EH_SPDN_FALLBACK_TO_PIO\">ATA_EH_SPDN_FALLBACK_TO_PIO</a> | <a class=\"id\" href=\"#ATA_EH_SPDN_KEEP_ERRORS\">ATA_EH_SPDN_KEEP_ERRORS</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#arg\">arg</a>.<a class=\"id\" href=\"#nr_errors\">nr_errors</a>[<a class=\"id\" href=\"#ATA_ECAT_DUBIOUS_TOUT_HSM\">ATA_ECAT_DUBIOUS_TOUT_HSM</a>] +", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#arg\">arg</a>.<a class=\"id\" href=\"#nr_errors\">nr_errors</a>[<a class=\"id\" href=\"#ATA_ECAT_DUBIOUS_UNK_DEV\">ATA_ECAT_DUBIOUS_UNK_DEV</a>] &gt; 1)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#verdict\">verdict</a> |= <a class=\"id\" href=\"#ATA_EH_SPDN_NCQ_OFF\">ATA_EH_SPDN_NCQ_OFF</a> | <a class=\"id\" href=\"#ATA_EH_SPDN_KEEP_ERRORS\">ATA_EH_SPDN_KEEP_ERRORS</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#arg\">arg</a>.<a class=\"id\" href=\"#nr_errors\">nr_errors</a>[<a class=\"id\" href=\"#ATA_ECAT_ATA_BUS\">ATA_ECAT_ATA_BUS</a>] +", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#arg\">arg</a>.<a class=\"id\" href=\"#nr_errors\">nr_errors</a>[<a class=\"id\" href=\"#ATA_ECAT_TOUT_HSM\">ATA_ECAT_TOUT_HSM</a>] +", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#arg\">arg</a>.<a class=\"id\" href=\"#nr_errors\">nr_errors</a>[<a class=\"id\" href=\"#ATA_ECAT_UNK_DEV\">ATA_ECAT_UNK_DEV</a>] &gt; 6)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#verdict\">verdict</a> |= <a class=\"id\" href=\"#ATA_EH_SPDN_FALLBACK_TO_PIO\">ATA_EH_SPDN_FALLBACK_TO_PIO</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* scan past 10 mins of error history */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(&amp;<a class=\"id\" href=\"#arg\">arg</a>, 0, sizeof(<a class=\"id\" href=\"#arg\">arg</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#arg\">arg</a>.<a class=\"id\" href=\"#since\">since</a> = <a class=\"id\" href=\"#j64\">j64</a> - <a class=\"id\" href=\"#min\">min</a>(<a class=\"id\" href=\"#j64\">j64</a>, <a class=\"id\" href=\"#j10mins\">j10mins</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_ering_map\">ata_ering_map</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#ering\">ering</a>, <a class=\"id\" href=\"#speed_down_verdict_cb\">speed_down_verdict_cb</a>, &amp;<a class=\"id\" href=\"#arg\">arg</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#arg\">arg</a>.<a class=\"id\" href=\"#nr_errors\">nr_errors</a>[<a class=\"id\" href=\"#ATA_ECAT_TOUT_HSM\">ATA_ECAT_TOUT_HSM</a>] +", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#arg\">arg</a>.<a class=\"id\" href=\"#nr_errors\">nr_errors</a>[<a class=\"id\" href=\"#ATA_ECAT_UNK_DEV\">ATA_ECAT_UNK_DEV</a>] &gt; 3)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#verdict\">verdict</a> |= <a class=\"id\" href=\"#ATA_EH_SPDN_NCQ_OFF\">ATA_EH_SPDN_NCQ_OFF</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#arg\">arg</a>.<a class=\"id\" href=\"#nr_errors\">nr_errors</a>[<a class=\"id\" href=\"#ATA_ECAT_ATA_BUS\">ATA_ECAT_ATA_BUS</a>] +", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#arg\">arg</a>.<a class=\"id\" href=\"#nr_errors\">nr_errors</a>[<a class=\"id\" href=\"#ATA_ECAT_TOUT_HSM\">ATA_ECAT_TOUT_HSM</a>] &gt; 3 ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#arg\">arg</a>.<a class=\"id\" href=\"#nr_errors\">nr_errors</a>[<a class=\"id\" href=\"#ATA_ECAT_UNK_DEV\">ATA_ECAT_UNK_DEV</a>] &gt; 6)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#verdict\">verdict</a> |= <a class=\"id\" href=\"#ATA_EH_SPDN_SPEED_DOWN\">ATA_EH_SPDN_SPEED_DOWN</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#verdict\">verdict</a>;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ata_eh_speed_down - record error and speed down if necessary</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@dev: Failed device</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@eflags: mask of ATA_EFLAG_* flags</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@err_mask: err_mask of the error</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Record error and examine error history to determine whether</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>adjusting transmission speed is necessary.  It also sets</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>transmission limits appropriately if such adjustment is</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>necessary.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>LOCKING:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Kernel thread context (may sleep).</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>RETURNS:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Determined recovery action.</span>", 
"<span class=\"comment\"> */</span>", 
"static unsigned int <a class=\"id\" href=\"#ata_eh_speed_down\">ata_eh_speed_down</a>(struct <a class=\"id\" href=\"#ata_device\">ata_device</a> *<a class=\"id\" href=\"#dev\">dev</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#eflags\">eflags</a>, unsigned int <a class=\"id\" href=\"#err_mask\">err_mask</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a> = <a class=\"id\" href=\"#ata_dev_phys_link\">ata_dev_phys_link</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#xfer_ok\">xfer_ok</a> = 0;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#verdict\">verdict</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#action\">action</a> = 0;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* don't bother if Cat-0 error */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ata_eh_categorize_error\">ata_eh_categorize_error</a>(<a class=\"id\" href=\"#eflags\">eflags</a>, <a class=\"id\" href=\"#err_mask\">err_mask</a>, &amp;<a class=\"id\" href=\"#xfer_ok\">xfer_ok</a>) == 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* record error and determine whether speed down is necessary */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_ering_record\">ata_ering_record</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#ering\">ering</a>, <a class=\"id\" href=\"#eflags\">eflags</a>, <a class=\"id\" href=\"#err_mask\">err_mask</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#verdict\">verdict</a> = <a class=\"id\" href=\"#ata_eh_speed_down_verdict\">ata_eh_speed_down_verdict</a>(<a class=\"id\" href=\"#dev\">dev</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* turn off NCQ? */</span>", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#verdict\">verdict</a> &amp; <a class=\"id\" href=\"#ATA_EH_SPDN_NCQ_OFF\">ATA_EH_SPDN_NCQ_OFF</a>) &&", 
"<span class=\"ts\"/>    (<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; (<a class=\"id\" href=\"#ATA_DFLAG_PIO\">ATA_DFLAG_PIO</a> | <a class=\"id\" href=\"#ATA_DFLAG_NCQ\">ATA_DFLAG_NCQ</a> |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   <a class=\"id\" href=\"#ATA_DFLAG_NCQ_OFF\">ATA_DFLAG_NCQ_OFF</a>)) == <a class=\"id\" href=\"#ATA_DFLAG_NCQ\">ATA_DFLAG_NCQ</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#flags\">flags</a> |= <a class=\"id\" href=\"#ATA_DFLAG_NCQ_OFF\">ATA_DFLAG_NCQ_OFF</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_dev_printk\">ata_dev_printk</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       \"NCQ disabled due to excessive errors\\n\");", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* speed down? */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#verdict\">verdict</a> &amp; <a class=\"id\" href=\"#ATA_EH_SPDN_SPEED_DOWN\">ATA_EH_SPDN_SPEED_DOWN</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* speed down SATA link speed if possible */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#sata_down_spd_limit\">sata_down_spd_limit</a>(<a class=\"id\" href=\"#link\">link</a>, 0) == 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* lower transfer mode */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#spdn_cnt\">spdn_cnt</a> &lt; 2) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>static const int <a class=\"id\" href=\"#dma_dnxfer_sel\">dma_dnxfer_sel</a>[] =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_DNXFER_DMA\">ATA_DNXFER_DMA</a>, <a class=\"id\" href=\"#ATA_DNXFER_40C\">ATA_DNXFER_40C</a> };", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>static const int <a class=\"id\" href=\"#pio_dnxfer_sel\">pio_dnxfer_sel</a>[] =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_DNXFER_PIO\">ATA_DNXFER_PIO</a>, <a class=\"id\" href=\"#ATA_DNXFER_FORCE_PIO0\">ATA_DNXFER_FORCE_PIO0</a> };", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#sel\">sel</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#xfer_shift\">xfer_shift</a> != <a class=\"id\" href=\"#ATA_SHIFT_PIO\">ATA_SHIFT_PIO</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sel\">sel</a> = <a class=\"id\" href=\"#dma_dnxfer_sel\">dma_dnxfer_sel</a>[<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#spdn_cnt\">spdn_cnt</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sel\">sel</a> = <a class=\"id\" href=\"#pio_dnxfer_sel\">pio_dnxfer_sel</a>[<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#spdn_cnt\">spdn_cnt</a>];", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#spdn_cnt\">spdn_cnt</a>++;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ata_down_xfermask_limit\">ata_down_xfermask_limit</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#sel\">sel</a>) == 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Fall back to PIO?  Slowing down to PIO is meaningless for</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * SATA ATA devices.  Consider it only for PATA and SATAPI.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#verdict\">verdict</a> &amp; <a class=\"id\" href=\"#ATA_EH_SPDN_FALLBACK_TO_PIO\">ATA_EH_SPDN_FALLBACK_TO_PIO</a>) && (<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#spdn_cnt\">spdn_cnt</a> >= 2) &&", 
"<span class=\"ts\"/>    (<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#cbl\">cbl</a> != <a class=\"id\" href=\"#ATA_CBL_SATA\">ATA_CBL_SATA</a> || <a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#class\">class</a> == <a class=\"id\" href=\"#ATA_DEV_ATAPI\">ATA_DEV_ATAPI</a>) &&", 
"<span class=\"ts\"/>    (<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#xfer_shift\">xfer_shift</a> != <a class=\"id\" href=\"#ATA_SHIFT_PIO\">ATA_SHIFT_PIO</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#ata_down_xfermask_limit\">ata_down_xfermask_limit</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#ATA_DNXFER_FORCE_PIO\">ATA_DNXFER_FORCE_PIO</a>) == 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#spdn_cnt\">spdn_cnt</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#done\">done</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return 0;", 
" <a class=\"id\" href=\"#done\">done</a>:", 
"<span class=\"ts\"/><span class=\"comment\">/* device has been slowed down, blow error history */</span>", 
"<span class=\"ts\"/>if (!(<a class=\"id\" href=\"#verdict\">verdict</a> &amp; <a class=\"id\" href=\"#ATA_EH_SPDN_KEEP_ERRORS\">ATA_EH_SPDN_KEEP_ERRORS</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_ering_clear\">ata_ering_clear</a>(&amp;<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#ering\">ering</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#action\">action</a>;", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ata_eh_link_autopsy - analyze error and determine recovery action</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@link: host link to perform autopsy on</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Analyze why @link failed and determine which recovery actions</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>are needed.  This function also sets more detailed AC_ERR_*</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>values and fills sense data for ATAPI CHECK SENSE.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>LOCKING:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Kernel thread context (may sleep).</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#ata_eh_link_autopsy\">ata_eh_link_autopsy</a>(struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a> = <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#ap\">ap</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_eh_context\">ata_eh_context</a> *<a class=\"id\" href=\"#ehc\">ehc</a> = &amp;<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#eh_context\">eh_context</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_device\">ata_device</a> *<a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#all_err_mask\">all_err_mask</a> = 0, <a class=\"id\" href=\"#eflags\">eflags</a> = 0;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#tag\">tag</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#u32\">u32</a> <a class=\"id\" href=\"#serror\">serror</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rc\">rc</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#DPRINTK\">DPRINTK</a>(\"ENTER\\n\");", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#ATA_EHI_NO_AUTOPSY\">ATA_EHI_NO_AUTOPSY</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* obtain and analyze SError */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#sata_scr_read\">sata_scr_read</a>(<a class=\"id\" href=\"#link\">link</a>, <a class=\"id\" href=\"#SCR_ERROR\">SCR_ERROR</a>, &amp;<a class=\"id\" href=\"#serror\">serror</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a> == 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#serror\">serror</a> |= <a class=\"id\" href=\"#serror\">serror</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_eh_analyze_serror\">ata_eh_analyze_serror</a>(<a class=\"id\" href=\"#link\">link</a>);", 
"<span class=\"ts\"/>} else if (<a class=\"id\" href=\"#rc\">rc</a> != -<a class=\"id\" href=\"#EOPNOTSUPP\">EOPNOTSUPP</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* SError read failed, force reset and probing */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#probe_mask\">probe_mask</a> |= <a class=\"id\" href=\"#ATA_ALL_DEVICES\">ATA_ALL_DEVICES</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_OTHER\">AC_ERR_OTHER</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* analyze NCQ failure */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_eh_analyze_ncq_error\">ata_eh_analyze_ncq_error</a>(<a class=\"id\" href=\"#link\">link</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* any real error trumps AC_ERR_OTHER */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#err_mask\">err_mask</a> &amp; ~<a class=\"id\" href=\"#AC_ERR_OTHER\">AC_ERR_OTHER</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#err_mask\">err_mask</a> &= ~<a class=\"id\" href=\"#AC_ERR_OTHER\">AC_ERR_OTHER</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#all_err_mask\">all_err_mask</a> |= <a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#err_mask\">err_mask</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#tag\">tag</a> = 0; <a class=\"id\" href=\"#tag\">tag</a> &lt; <a class=\"id\" href=\"#ATA_MAX_QUEUE\">ATA_MAX_QUEUE</a>; <a class=\"id\" href=\"#tag\">tag</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_queued_cmd\">ata_queued_cmd</a> *<a class=\"id\" href=\"#qc\">qc</a> = <a class=\"id\" href=\"#__ata_qc_from_tag\">__ata_qc_from_tag</a>(<a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#tag\">tag</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!(<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#ATA_QCFLAG_FAILED\">ATA_QCFLAG_FAILED</a>) ||", 
"<span class=\"ts\"/><span class=\"ts\"/>    <a class=\"id\" href=\"#ata_dev_phys_link\">ata_dev_phys_link</a>(<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#dev\">dev</a>) != <a class=\"id\" href=\"#link\">link</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* inherit upper level err_mask */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#err_mask\">err_mask</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* analyze TF */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ata_eh_analyze_tf\">ata_eh_analyze_tf</a>(<a class=\"id\" href=\"#qc\">qc</a>, &amp;<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#result_tf\">result_tf</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* DEV errors are probably spurious in case of ATA_BUS error */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> &amp; <a class=\"id\" href=\"#AC_ERR_ATA_BUS\">AC_ERR_ATA_BUS</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> &= ~(<a class=\"id\" href=\"#AC_ERR_DEV\">AC_ERR_DEV</a> | <a class=\"id\" href=\"#AC_ERR_MEDIA\">AC_ERR_MEDIA</a> |", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>  <a class=\"id\" href=\"#AC_ERR_INVALID\">AC_ERR_INVALID</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* any real error trumps unknown error */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> &amp; ~<a class=\"id\" href=\"#AC_ERR_OTHER\">AC_ERR_OTHER</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> &= ~<a class=\"id\" href=\"#AC_ERR_OTHER\">AC_ERR_OTHER</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* SENSE_VALID trumps dev/unknown error and revalidation */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#ATA_QCFLAG_SENSE_VALID\">ATA_QCFLAG_SENSE_VALID</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> &= ~(<a class=\"id\" href=\"#AC_ERR_DEV\">AC_ERR_DEV</a> | <a class=\"id\" href=\"#AC_ERR_OTHER\">AC_ERR_OTHER</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* determine whether the command is worth retrying */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#ATA_QCFLAG_IO\">ATA_QCFLAG_IO</a> ||", 
"<span class=\"ts\"/><span class=\"ts\"/>    (!(<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> &amp; <a class=\"id\" href=\"#AC_ERR_INVALID\">AC_ERR_INVALID</a>) &&", 
"<span class=\"ts\"/><span class=\"ts\"/>     <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a> != <a class=\"id\" href=\"#AC_ERR_DEV\">AC_ERR_DEV</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#flags\">flags</a> |= <a class=\"id\" href=\"#ATA_QCFLAG_RETRY\">ATA_QCFLAG_RETRY</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* accumulate error info */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#all_err_mask\">all_err_mask</a> |= <a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#err_mask\">err_mask</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#qc\">qc</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#ATA_QCFLAG_IO\">ATA_QCFLAG_IO</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#eflags\">eflags</a> |= <a class=\"id\" href=\"#ATA_EFLAG_IS_IO\">ATA_EFLAG_IS_IO</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* enforce default EH actions */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#pflags\">pflags</a> &amp; <a class=\"id\" href=\"#ATA_PFLAG_FROZEN\">ATA_PFLAG_FROZEN</a> ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#all_err_mask\">all_err_mask</a> &amp; (<a class=\"id\" href=\"#AC_ERR_HSM\">AC_ERR_HSM</a> | <a class=\"id\" href=\"#AC_ERR_TIMEOUT\">AC_ERR_TIMEOUT</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ATA_EH_RESET\">ATA_EH_RESET</a>;", 
"<span class=\"ts\"/>else if (((<a class=\"id\" href=\"#eflags\">eflags</a> &amp; <a class=\"id\" href=\"#ATA_EFLAG_IS_IO\">ATA_EFLAG_IS_IO</a>) && <a class=\"id\" href=\"#all_err_mask\">all_err_mask</a>) ||", 
"<span class=\"ts\"/><span class=\"ts\"/> (!(<a class=\"id\" href=\"#eflags\">eflags</a> &amp; <a class=\"id\" href=\"#ATA_EFLAG_IS_IO\">ATA_EFLAG_IS_IO</a>) && (<a class=\"id\" href=\"#all_err_mask\">all_err_mask</a> &amp; ~<a class=\"id\" href=\"#AC_ERR_DEV\">AC_ERR_DEV</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ATA_EH_REVALIDATE\">ATA_EH_REVALIDATE</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* If we have offending qcs and the associated failed device,</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * perform per-dev EH action only on the offending device.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#dev\">dev</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#dev_action\">dev_action</a>[<a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#devno\">devno</a>] |=", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#action\">action</a> &amp; <a class=\"id\" href=\"#ATA_EH_PERDEV_MASK\">ATA_EH_PERDEV_MASK</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#action\">action</a> &= ~<a class=\"id\" href=\"#ATA_EH_PERDEV_MASK\">ATA_EH_PERDEV_MASK</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* propagate timeout to host link */</span>", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#all_err_mask\">all_err_mask</a> &amp; <a class=\"id\" href=\"#AC_ERR_TIMEOUT\">AC_ERR_TIMEOUT</a>) && !<a class=\"id\" href=\"#ata_is_host_link\">ata_is_host_link</a>(<a class=\"id\" href=\"#link\">link</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#link\">link</a>.<a class=\"id\" href=\"#eh_context\">eh_context</a>.<a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#err_mask\">err_mask</a> |= <a class=\"id\" href=\"#AC_ERR_TIMEOUT\">AC_ERR_TIMEOUT</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* record error and consider speeding down */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#dev\">dev</a>;", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#dev\">dev</a> && ((<a class=\"id\" href=\"#ata_link_max_devices\">ata_link_max_devices</a>(<a class=\"id\" href=\"#link\">link</a>) == 1 &&", 
"<span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#ata_dev_enabled\">ata_dev_enabled</a>(<a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>))))", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#dev\">dev</a> = <a class=\"id\" href=\"#link\">link</a>-><a class=\"id\" href=\"#device\">device</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#dev\">dev</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#dev\">dev</a>-><a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#ATA_DFLAG_DUBIOUS_XFER\">ATA_DFLAG_DUBIOUS_XFER</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#eflags\">eflags</a> |= <a class=\"id\" href=\"#ATA_EFLAG_DUBIOUS_XFER\">ATA_EFLAG_DUBIOUS_XFER</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ehc\">ehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#action\">action</a> |= <a class=\"id\" href=\"#ata_eh_speed_down\">ata_eh_speed_down</a>(<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#eflags\">eflags</a>, <a class=\"id\" href=\"#all_err_mask\">all_err_mask</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#DPRINTK\">DPRINTK</a>(\"EXIT\\n\");", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ata_eh_autopsy - analyze error and determine recovery action</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@ap: host port to perform autopsy on</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Analyze all links of @ap and determine why they failed and</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>which recovery actions are needed.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>LOCKING:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Kernel thread context (may sleep).</span>", 
"<span class=\"comment\"> */</span>", 
"void <a class=\"id\" href=\"#ata_eh_autopsy\">ata_eh_autopsy</a>(struct <a class=\"id\" href=\"#ata_port\">ata_port</a> *<a class=\"id\" href=\"#ap\">ap</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_link\">ata_link</a> *<a class=\"id\" href=\"#link\">link</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ata_for_each_link\">ata_for_each_link</a>(<a class=\"id\" href=\"#link\">link</a>, <a class=\"id\" href=\"#ap\">ap</a>, <a class=\"id\" href=\"#EDGE\">EDGE</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_eh_link_autopsy\">ata_eh_link_autopsy</a>(<a class=\"id\" href=\"#link\">link</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Handle the frigging slave link.  Autopsy is done similarly</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * but actions and flags are transferred over to the master</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * link and handled from there.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#slave_link\">slave_link</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_eh_context\">ata_eh_context</a> *<a class=\"id\" href=\"#mehc\">mehc</a> = &amp;<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#link\">link</a>.<a class=\"id\" href=\"#eh_context\">eh_context</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#ata_eh_context\">ata_eh_context</a> *<a class=\"id\" href=\"#sehc\">sehc</a> = &amp;<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#slave_link\">slave_link</a>-><a class=\"id\" href=\"#eh_context\">eh_context</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* transfer control flags from master to slave */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sehc\">sehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#flags\">flags</a> |= <a class=\"id\" href=\"#mehc\">mehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#flags\">flags</a> &amp; <a class=\"id\" href=\"#ATA_EHI_TO_SLAVE_MASK\">ATA_EHI_TO_SLAVE_MASK</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* perform autopsy on the slave link */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_eh_link_autopsy\">ata_eh_link_autopsy</a>(<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#slave_link\">slave_link</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* transfer actions from slave to master and clear slave */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_eh_about_to_do\">ata_eh_about_to_do</a>(<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#slave_link\">slave_link</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#ATA_EH_ALL_ACTIONS\">ATA_EH_ALL_ACTIONS</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mehc\">mehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#action\">action</a><span class=\"ts\"/><span class=\"ts\"/>|= <a class=\"id\" href=\"#sehc\">sehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#action\">action</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mehc\">mehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#dev_action\">dev_action</a>[1]<span class=\"ts\"/>|= <a class=\"id\" href=\"#sehc\">sehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#dev_action\">dev_action</a>[1];", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mehc\">mehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#flags\">flags</a><span class=\"ts\"/><span class=\"ts\"/>|= <a class=\"id\" href=\"#sehc\">sehc</a>-><a class=\"id\" href=\"#i\">i</a>.<a class=\"id\" href=\"#flags\">flags</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_eh_done\">ata_eh_done</a>(<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#slave_link\">slave_link</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, <a class=\"id\" href=\"#ATA_EH_ALL_ACTIONS\">ATA_EH_ALL_ACTIONS</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Autopsy of fanout ports can affect host link autopsy.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Perform host link autopsy last.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sata_pmp_attached\">sata_pmp_attached</a>(<a class=\"id\" href=\"#ap\">ap</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ata_eh_link_autopsy\">ata_eh_link_autopsy</a>(&amp;<a class=\"id\" href=\"#ap\">ap</a>-><a class=\"id\" href=\"#link\">link</a>);", 
"}", 
"", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>ata_get_cmd_descript - get description for ATA command</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>@command: ATA command code to get description for</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Return a textual description of the given command, or NULL if the</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>command is not known.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>LOCKING:</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>None</span>", 
"<span class=\"comment\"> */</span>", 
"const char *<a class=\"id\" href=\"#ata_get_cmd_descript\">ata_get_cmd_descript</a>(<a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#command\">command</a>)", 
"{", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_ATA_VERBOSE_ERROR\">CONFIG_ATA_VERBOSE_ERROR</a>", 
"<span class=\"ts\"/>static const struct", 
"<span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#u8\">u8</a> <a class=\"id\" href=\"#command\">command</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>const char *<a class=\"id\" href=\"#text\">text</a>;", 
"<span class=\"ts\"/>} <a class=\"id\" href=\"#cmd_descr\">cmd_descr</a>[] = {", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_DEV_RESET\">ATA_CMD_DEV_RESET</a>,<span class=\"ts\"/><span class=\"ts\"/>\"DEVICE RESET\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_CHK_POWER\">ATA_CMD_CHK_POWER</a>, <span class=\"ts\"/><span class=\"ts\"/>\"CHECK POWER MODE\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_STANDBY\">ATA_CMD_STANDBY</a>, <span class=\"ts\"/><span class=\"ts\"/>\"STANDBY\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_IDLE\">ATA_CMD_IDLE</a>, <span class=\"ts\"/><span class=\"ts\"/>\"IDLE\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_EDD\">ATA_CMD_EDD</a>, <span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"EXECUTE DEVICE DIAGNOSTIC\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_DOWNLOAD_MICRO\">ATA_CMD_DOWNLOAD_MICRO</a>,   <span class=\"ts\"/>\"DOWNLOAD MICROCODE\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_NOP\">ATA_CMD_NOP</a>,<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>\"NOP\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_FLUSH\">ATA_CMD_FLUSH</a>, <span class=\"ts\"/><span class=\"ts\"/>\"FLUSH CACHE\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_FLUSH_EXT\">ATA_CMD_FLUSH_EXT</a>, <span class=\"ts\"/><span class=\"ts\"/>\"FLUSH CACHE EXT\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_ID_ATA\">ATA_CMD_ID_ATA</a>,  <span class=\"ts\"/><span class=\"ts\"/>\"IDENTIFY DEVICE\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_ID_ATAPI\">ATA_CMD_ID_ATAPI</a>, <span class=\"ts\"/><span class=\"ts\"/>\"IDENTIFY PACKET DEVICE\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_SERVICE\">ATA_CMD_SERVICE</a>, <span class=\"ts\"/><span class=\"ts\"/>\"SERVICE\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_READ\">ATA_CMD_READ</a>, <span class=\"ts\"/><span class=\"ts\"/>\"READ DMA\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_READ_EXT\">ATA_CMD_READ_EXT</a>, <span class=\"ts\"/><span class=\"ts\"/>\"READ DMA EXT\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_READ_QUEUED\">ATA_CMD_READ_QUEUED</a>, <span class=\"ts\"/><span class=\"ts\"/>\"READ DMA QUEUED\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_READ_STREAM_EXT\">ATA_CMD_READ_STREAM_EXT</a>, <span class=\"ts\"/>\"READ STREAM EXT\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_READ_STREAM_DMA_EXT\">ATA_CMD_READ_STREAM_DMA_EXT</a>,  \"READ STREAM DMA EXT\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_WRITE\">ATA_CMD_WRITE</a>, <span class=\"ts\"/><span class=\"ts\"/>\"WRITE DMA\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_WRITE_EXT\">ATA_CMD_WRITE_EXT</a>, <span class=\"ts\"/><span class=\"ts\"/>\"WRITE DMA EXT\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_WRITE_QUEUED\">ATA_CMD_WRITE_QUEUED</a>, <span class=\"ts\"/>\"WRITE DMA QUEUED EXT\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_WRITE_STREAM_EXT\">ATA_CMD_WRITE_STREAM_EXT</a>, <span class=\"ts\"/>\"WRITE STREAM EXT\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_WRITE_STREAM_DMA_EXT\">ATA_CMD_WRITE_STREAM_DMA_EXT</a>, \"WRITE STREAM DMA EXT\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_WRITE_FUA_EXT\">ATA_CMD_WRITE_FUA_EXT</a>,<span class=\"ts\"/>\"WRITE DMA FUA EXT\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_WRITE_QUEUED_FUA_EXT\">ATA_CMD_WRITE_QUEUED_FUA_EXT</a>, \"WRITE DMA QUEUED FUA EXT\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_FPDMA_READ\">ATA_CMD_FPDMA_READ</a>,<span class=\"ts\"/><span class=\"ts\"/>\"READ FPDMA QUEUED\" },", 
"<span class=\"ts\"/><span class=\"ts\"/>{ <a class=\"id\" href=\"#ATA_CMD_FPDMA_WRITE\">ATA_CMD_FPDMA_WRITE</a>,<span class=\"ts\"/><span class=\"ts\"/>\"WRITE FPDMA QUEUED\" },", 
];
xr_frag_insert('l/e9/24b34211d18b3c97c7ac9ee04f992cbbfa6122.xr', __xr_tmp);
