var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * ns_cgroup.c - namespace cgroup subsystem</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Copyright 2006, 2007 IBM Corp</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#module\">module</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#cgroup\">cgroup</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#fs\">fs</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#proc_fs\">proc_fs</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#slab\">slab</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#nsproxy\">nsproxy</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"struct <a class=\"id\" href=\"#ns_cgroup\">ns_cgroup</a> {", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#cgroup_subsys_state\">cgroup_subsys_state</a> <a class=\"id\" href=\"#css\">css</a>;", 
"};", 
"", 
"struct <a class=\"id\" href=\"#cgroup_subsys\">cgroup_subsys</a> <a class=\"id\" href=\"#ns_subsys\">ns_subsys</a>;", 
"", 
"static <a class=\"id\" href=\"#inline\">inline</a> struct <a class=\"id\" href=\"#ns_cgroup\">ns_cgroup</a> *<a class=\"id\" href=\"#cgroup_to_ns\">cgroup_to_ns</a>(", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#cgroup\">cgroup</a> *<a class=\"id\" href=\"#cgroup\">cgroup</a>)", 
"{", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#container_of\">container_of</a>(<a class=\"id\" href=\"#cgroup_subsys_state\">cgroup_subsys_state</a>(<a class=\"id\" href=\"#cgroup\">cgroup</a>, <a class=\"id\" href=\"#ns_subsys_id\">ns_subsys_id</a>),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>    struct <a class=\"id\" href=\"#ns_cgroup\">ns_cgroup</a>, <a class=\"id\" href=\"#css\">css</a>);", 
"}", 
"", 
"int <a class=\"id\" href=\"#ns_cgroup_clone\">ns_cgroup_clone</a>(struct <a class=\"id\" href=\"#task_struct\">task_struct</a> *<a class=\"id\" href=\"#task\">task</a>, struct <a class=\"id\" href=\"#pid\">pid</a> *<a class=\"id\" href=\"#pid\">pid</a>)", 
"{", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#name\">name</a>[<a class=\"id\" href=\"#PROC_NUMBUF\">PROC_NUMBUF</a>];", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#snprintf\">snprintf</a>(<a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#PROC_NUMBUF\">PROC_NUMBUF</a>, \"%d\", <a class=\"id\" href=\"#pid_vnr\">pid_vnr</a>(<a class=\"id\" href=\"#pid\">pid</a>));", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#cgroup_clone\">cgroup_clone</a>(<a class=\"id\" href=\"#task\">task</a>, &amp;<a class=\"id\" href=\"#ns_subsys\">ns_subsys</a>, <a class=\"id\" href=\"#name\">name</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Rules:</span>", 
"<span class=\"comment\"> *   1. you can only enter a cgroup which is a descendant of your current</span>", 
"<span class=\"comment\"> *     cgroup</span>", 
"<span class=\"comment\"> *   2. you can only place another process into a cgroup if</span>", 
"<span class=\"comment\"> *     a. you have CAP_SYS_ADMIN</span>", 
"<span class=\"comment\"> *     b. your cgroup is an ancestor of task's destination cgroup</span>", 
"<span class=\"comment\"> *       (hence either you are in the same cgroup as task, or in an</span>", 
"<span class=\"comment\"> *        ancestor cgroup thereof)</span>", 
"<span class=\"comment\"> */</span>", 
"static int <a class=\"id\" href=\"#ns_can_attach\">ns_can_attach</a>(struct <a class=\"id\" href=\"#cgroup_subsys\">cgroup_subsys</a> *<a class=\"id\" href=\"#ss\">ss</a>, struct <a class=\"id\" href=\"#cgroup\">cgroup</a> *<a class=\"id\" href=\"#new_cgroup\">new_cgroup</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> struct <a class=\"id\" href=\"#task_struct\">task_struct</a> *<a class=\"id\" href=\"#task\">task</a>, <a class=\"id\" href=\"#bool\">bool</a> <a class=\"id\" href=\"#threadgroup\">threadgroup</a>)", 
"{", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#current\">current</a> != <a class=\"id\" href=\"#task\">task</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#capable\">capable</a>(<a class=\"id\" href=\"#CAP_SYS_ADMIN\">CAP_SYS_ADMIN</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EPERM\">EPERM</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#cgroup_is_descendant\">cgroup_is_descendant</a>(<a class=\"id\" href=\"#new_cgroup\">new_cgroup</a>, <a class=\"id\" href=\"#current\">current</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EPERM\">EPERM</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#cgroup_is_descendant\">cgroup_is_descendant</a>(<a class=\"id\" href=\"#new_cgroup\">new_cgroup</a>, <a class=\"id\" href=\"#task\">task</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EPERM\">EPERM</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#threadgroup\">threadgroup</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#task_struct\">task_struct</a> *<a class=\"id\" href=\"#c\">c</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rcu_read_lock\">rcu_read_lock</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#list_for_each_entry_rcu\">list_for_each_entry_rcu</a>(<a class=\"id\" href=\"#c\">c</a>, &amp;<a class=\"id\" href=\"#task\">task</a>-><a class=\"id\" href=\"#thread_group\">thread_group</a>, <a class=\"id\" href=\"#thread_group\">thread_group</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#cgroup_is_descendant\">cgroup_is_descendant</a>(<a class=\"id\" href=\"#new_cgroup\">new_cgroup</a>, <a class=\"id\" href=\"#c\">c</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rcu_read_unlock\">rcu_read_unlock</a>();", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EPERM\">EPERM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rcu_read_unlock\">rcu_read_unlock</a>();", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Rules: you can only create a cgroup if</span>", 
"<span class=\"comment\"> *     1. you are capable(CAP_SYS_ADMIN)</span>", 
"<span class=\"comment\"> *     2. the target cgroup is a descendant of your own cgroup</span>", 
"<span class=\"comment\"> */</span>", 
"static struct <a class=\"id\" href=\"#cgroup_subsys_state\">cgroup_subsys_state</a> *<a class=\"id\" href=\"#ns_create\">ns_create</a>(struct <a class=\"id\" href=\"#cgroup_subsys\">cgroup_subsys</a> *<a class=\"id\" href=\"#ss\">ss</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#cgroup\">cgroup</a> *<a class=\"id\" href=\"#cgroup\">cgroup</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ns_cgroup\">ns_cgroup</a> *<a class=\"id\" href=\"#ns_cgroup\">ns_cgroup</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#capable\">capable</a>(<a class=\"id\" href=\"#CAP_SYS_ADMIN\">CAP_SYS_ADMIN</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(-<a class=\"id\" href=\"#EPERM\">EPERM</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#cgroup_is_descendant\">cgroup_is_descendant</a>(<a class=\"id\" href=\"#cgroup\">cgroup</a>, <a class=\"id\" href=\"#current\">current</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(-<a class=\"id\" href=\"#EPERM\">EPERM</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ns_cgroup\">ns_cgroup</a> = <a class=\"id\" href=\"#kzalloc\">kzalloc</a>(sizeof(*<a class=\"id\" href=\"#ns_cgroup\">ns_cgroup</a>), <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#ns_cgroup\">ns_cgroup</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(-<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>);", 
"<span class=\"ts\"/>return &amp;<a class=\"id\" href=\"#ns_cgroup\">ns_cgroup</a>-><a class=\"id\" href=\"#css\">css</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#ns_destroy\">ns_destroy</a>(struct <a class=\"id\" href=\"#cgroup_subsys\">cgroup_subsys</a> *<a class=\"id\" href=\"#ss\">ss</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#cgroup\">cgroup</a> *<a class=\"id\" href=\"#cgroup\">cgroup</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ns_cgroup\">ns_cgroup</a> *<a class=\"id\" href=\"#ns_cgroup\">ns_cgroup</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ns_cgroup\">ns_cgroup</a> = <a class=\"id\" href=\"#cgroup_to_ns\">cgroup_to_ns</a>(<a class=\"id\" href=\"#cgroup\">cgroup</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#ns_cgroup\">ns_cgroup</a>);", 
"}", 
"", 
"struct <a class=\"id\" href=\"#cgroup_subsys\">cgroup_subsys</a> <a class=\"id\" href=\"#ns_subsys\">ns_subsys</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a> = \"ns\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#can_attach\">can_attach</a> = <a class=\"id\" href=\"#ns_can_attach\">ns_can_attach</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#create\">create</a> = <a class=\"id\" href=\"#ns_create\">ns_create</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#destroy\">destroy</a>  = <a class=\"id\" href=\"#ns_destroy\">ns_destroy</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#subsys_id\">subsys_id</a> = <a class=\"id\" href=\"#ns_subsys_id\">ns_subsys_id</a>,", 
"};", 
];
xr_frag_insert('l/ea/54eda4bc1d349d81fcc8907611158c027e7a3f.xr', __xr_tmp);
