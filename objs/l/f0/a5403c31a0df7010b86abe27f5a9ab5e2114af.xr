var __xr_tmp = [
"<span class=\"comment\">/* -*-linux-c-*-</span>", 
"<span class=\"comment\"></span>", 
"<span class=\"comment\"> * vendor-specific code for SCSI CD-ROM's goes here.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This is needed becauce most of the new features (multisession and</span>", 
"<span class=\"comment\"> * the like) are too new to be included into the SCSI-II standard (to</span>", 
"<span class=\"comment\"> * be exact: there is'nt anything in my draft copy).</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Aug 1997: Ha! Got a SCSI-3 cdrom spec across my fingers. SCSI-3 does</span>", 
"<span class=\"comment\"> *           multisession using the READ TOC command (like SONY).</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *           Rearranged stuff here: SCSI-3 is included allways, support</span>", 
"<span class=\"comment\"> *           for NEC/TOSHIBA/HP commands is optional.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *   Gerd Knorr &lt;kraxel@cs.tu-berlin.de&gt; </span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * --------------------------------------------------------------------------</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * support for XA/multisession-CD's</span>", 
"<span class=\"comment\"> * </span>", 
"<span class=\"comment\"> *   - NEC:     Detection and support of multisession CD's.</span>", 
"<span class=\"comment\"> *     </span>", 
"<span class=\"comment\"> *   - TOSHIBA: Detection and support of multisession CD's.</span>", 
"<span class=\"comment\"> *              Some XA-Sector tweaking, required for older drives.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *   - SONY:    Detection and support of multisession CD's.</span>", 
"<span class=\"comment\"> *              added by Thomas Quinot &lt;thomas@cuivre.freenix.fr&gt;</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *   - PIONEER, HITACHI, PLEXTOR, MATSHITA, TEAC, PHILIPS: known to</span>", 
"<span class=\"comment\"> *              work with SONY (SCSI3 now)  code.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> *   - HP:      Much like SONY, but a little different... (Thomas)</span>", 
"<span class=\"comment\"> *              HP-Writers only ??? Maybe other CD-Writers work with this too ?</span>", 
"<span class=\"comment\"> *              HP 6020 writers now supported.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#cdrom\">cdrom</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#errno\">errno</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#string\">string</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#bcd\">bcd</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#blkdev\">blkdev</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#slab\">slab</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#scsi\">scsi</a>/<a class=\"id\" href=\"#scsi\">scsi</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#scsi\">scsi</a>/<a class=\"id\" href=\"#scsi_cmnd\">scsi_cmnd</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#scsi\">scsi</a>/<a class=\"id\" href=\"#scsi_device\">scsi_device</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#scsi\">scsi</a>/<a class=\"id\" href=\"#scsi_host\">scsi_host</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#scsi\">scsi</a>/<a class=\"id\" href=\"#scsi_ioctl\">scsi_ioctl</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> \"sr.h\"", 
"", 
"#if 0", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#DEBUG\">DEBUG</a>", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"<span class=\"comment\">/* here are some constants to sort the vendors into groups */</span>", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#VENDOR_SCSI3\">VENDOR_SCSI3</a>           1<span class=\"ts\"/><span class=\"comment\">/* default: scsi-3 mmc */</span>", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#VENDOR_NEC\">VENDOR_NEC</a>             2", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#VENDOR_TOSHIBA\">VENDOR_TOSHIBA</a>         3", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#VENDOR_WRITER\">VENDOR_WRITER</a>          4<span class=\"ts\"/><span class=\"comment\">/* pre-scsi3 writers */</span>", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#VENDOR_TIMEOUT\">VENDOR_TIMEOUT</a><span class=\"ts\"/>30*<a class=\"id\" href=\"#HZ\">HZ</a>", 
"", 
"void <a class=\"id\" href=\"#sr_vendor_init\">sr_vendor_init</a>(<a class=\"id\" href=\"#Scsi_CD\">Scsi_CD</a> *<a class=\"id\" href=\"#cd\">cd</a>)", 
"{", 
"#<a class=\"id\" href=\"#ifndef\">ifndef</a> <a class=\"id\" href=\"#CONFIG_BLK_DEV_SR_VENDOR\">CONFIG_BLK_DEV_SR_VENDOR</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#vendor\">vendor</a> = <a class=\"id\" href=\"#VENDOR_SCSI3\">VENDOR_SCSI3</a>;", 
"#else", 
"<span class=\"ts\"/>const char *<a class=\"id\" href=\"#vendor\">vendor</a> = <a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#vendor\">vendor</a>;", 
"<span class=\"ts\"/>const char *<a class=\"id\" href=\"#model\">model</a> = <a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#model\">model</a>;", 
"<span class=\"ts\"/>", 
"<span class=\"ts\"/><span class=\"comment\">/* default */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#vendor\">vendor</a> = <a class=\"id\" href=\"#VENDOR_SCSI3\">VENDOR_SCSI3</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#readcd_known\">readcd_known</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* this is true for scsi3/mmc drives - no more checks */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#type\">type</a> == <a class=\"id\" href=\"#TYPE_WORM\">TYPE_WORM</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#vendor\">vendor</a> = <a class=\"id\" href=\"#VENDOR_WRITER\">VENDOR_WRITER</a>;", 
"", 
"<span class=\"ts\"/>} else if (!<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#vendor\">vendor</a>, \"NEC\", 3)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#vendor\">vendor</a> = <a class=\"id\" href=\"#VENDOR_NEC\">VENDOR_NEC</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#model\">model</a>, \"CD-ROM DRIVE:25\", 15) ||", 
"<span class=\"ts\"/><span class=\"ts\"/>    !<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#model\">model</a>, \"CD-ROM DRIVE:36\", 15) ||", 
"<span class=\"ts\"/><span class=\"ts\"/>    !<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#model\">model</a>, \"CD-ROM DRIVE:83\", 15) ||", 
"<span class=\"ts\"/><span class=\"ts\"/>    !<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#model\">model</a>, \"CD-ROM DRIVE:84 \", 16)", 
"#if 0", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* my NEC 3x returns the read-raw data if a read-raw</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/>   is followed by a read for the same sector - aeb */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>    || !<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#model\">model</a>, \"CD-ROM DRIVE:500\", 16)", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/><span class=\"ts\"/>    )", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* these can't handle multisession, may hang */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#cdi\">cdi</a>.<a class=\"id\" href=\"#mask\">mask</a> |= <a class=\"id\" href=\"#CDC_MULTI_SESSION\">CDC_MULTI_SESSION</a>;", 
"", 
"<span class=\"ts\"/>} else if (!<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#vendor\">vendor</a>, \"TOSHIBA\", 7)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#vendor\">vendor</a> = <a class=\"id\" href=\"#VENDOR_TOSHIBA\">VENDOR_TOSHIBA</a>;", 
"", 
"<span class=\"ts\"/>}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"}", 
"", 
"", 
"<span class=\"comment\">/* small handy function for switching block length using MODE SELECT,</span>", 
"<span class=\"comment\"> * used by sr_read_sector() */</span>", 
"", 
"int <a class=\"id\" href=\"#sr_set_blocklength\">sr_set_blocklength</a>(<a class=\"id\" href=\"#Scsi_CD\">Scsi_CD</a> *<a class=\"id\" href=\"#cd\">cd</a>, int <a class=\"id\" href=\"#blocklength\">blocklength</a>)", 
"{", 
"<span class=\"ts\"/>unsigned char *<a class=\"id\" href=\"#buffer\">buffer</a>;<span class=\"ts\"/><span class=\"comment\">/* the buffer for the ioctl */</span>", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#packet_command\">packet_command</a> <a class=\"id\" href=\"#cgc\">cgc</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#ccs_modesel_head\">ccs_modesel_head</a> *<a class=\"id\" href=\"#modesel\">modesel</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rc\">rc</a>, <a class=\"id\" href=\"#density\">density</a> = 0;", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_BLK_DEV_SR_VENDOR\">CONFIG_BLK_DEV_SR_VENDOR</a>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#vendor\">vendor</a> == <a class=\"id\" href=\"#VENDOR_TOSHIBA\">VENDOR_TOSHIBA</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#density\">density</a> = (<a class=\"id\" href=\"#blocklength\">blocklength</a> &gt; 2048) ? 0x81 : 0x83;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#buffer\">buffer</a> = <a class=\"id\" href=\"#kmalloc\">kmalloc</a>(512, <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a> | <a class=\"id\" href=\"#GFP_DMA\">GFP_DMA</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#buffer\">buffer</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#DEBUG\">DEBUG</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\"%s: MODE SELECT 0x%x/%d\\n\", <a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#cdi\">cdi</a>.<a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#density\">density</a>, <a class=\"id\" href=\"#blocklength\">blocklength</a>);", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(&amp;<a class=\"id\" href=\"#cgc\">cgc</a>, 0, sizeof(struct <a class=\"id\" href=\"#packet_command\">packet_command</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[0] = <a class=\"id\" href=\"#MODE_SELECT\">MODE_SELECT</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[1] = (1 << 4);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[4] = 12;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#modesel\">modesel</a> = (struct <a class=\"id\" href=\"#ccs_modesel_head\">ccs_modesel_head</a> *) <a class=\"id\" href=\"#buffer\">buffer</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(<a class=\"id\" href=\"#modesel\">modesel</a>, 0, sizeof(*<a class=\"id\" href=\"#modesel\">modesel</a>));", 
"<span class=\"ts\"/><a class=\"id\" href=\"#modesel\">modesel</a>-><a class=\"id\" href=\"#block_desc_length\">block_desc_length</a> = 0x08;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#modesel\">modesel</a>-><a class=\"id\" href=\"#density\">density</a> = <a class=\"id\" href=\"#density\">density</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#modesel\">modesel</a>-><a class=\"id\" href=\"#block_length_med\">block_length_med</a> = (<a class=\"id\" href=\"#blocklength\">blocklength</a> >> 8) &amp; 0xff;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#modesel\">modesel</a>-><a class=\"id\" href=\"#block_length_lo\">block_length_lo</a> = <a class=\"id\" href=\"#blocklength\">blocklength</a> &amp; 0xff;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#buffer\">buffer</a> = <a class=\"id\" href=\"#buffer\">buffer</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#buflen\">buflen</a> = sizeof(*<a class=\"id\" href=\"#modesel\">modesel</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#data_direction\">data_direction</a> = <a class=\"id\" href=\"#DMA_TO_DEVICE\">DMA_TO_DEVICE</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#timeout\">timeout</a> = <a class=\"id\" href=\"#VENDOR_TIMEOUT\">VENDOR_TIMEOUT</a>;", 
"<span class=\"ts\"/>if (0 == (<a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#sr_do_ioctl\">sr_do_ioctl</a>(<a class=\"id\" href=\"#cd\">cd</a>, &amp;<a class=\"id\" href=\"#cgc\">cgc</a>))) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#sector_size\">sector_size</a> = <a class=\"id\" href=\"#blocklength\">blocklength</a>;", 
"<span class=\"ts\"/>}", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#DEBUG\">DEBUG</a>", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(\"%s: switching blocklength to %d bytes failed\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#cdi\">cdi</a>.<a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#blocklength\">blocklength</a>);", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#buffer\">buffer</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#rc\">rc</a>;", 
"}", 
"", 
"<span class=\"comment\">/* This function gets called after a media change. Checks if the CD is</span>", 
"<span class=\"comment\">   multisession, asks for offset etc. */</span>", 
"", 
"int <a class=\"id\" href=\"#sr_cd_check\">sr_cd_check</a>(struct <a class=\"id\" href=\"#cdrom_device_info\">cdrom_device_info</a> *<a class=\"id\" href=\"#cdi\">cdi</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#Scsi_CD\">Scsi_CD</a> *<a class=\"id\" href=\"#cd\">cd</a> = <a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#handle\">handle</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#sector\">sector</a>;", 
"<span class=\"ts\"/>unsigned char *<a class=\"id\" href=\"#buffer\">buffer</a>;<span class=\"ts\"/><span class=\"comment\">/* the buffer for the ioctl */</span>", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#packet_command\">packet_command</a> <a class=\"id\" href=\"#cgc\">cgc</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#rc\">rc</a>, <a class=\"id\" href=\"#no_multi\">no_multi</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#cdi\">cdi</a>.<a class=\"id\" href=\"#mask\">mask</a> &amp; <a class=\"id\" href=\"#CDC_MULTI_SESSION\">CDC_MULTI_SESSION</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#buffer\">buffer</a> = <a class=\"id\" href=\"#kmalloc\">kmalloc</a>(512, <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a> | <a class=\"id\" href=\"#GFP_DMA\">GFP_DMA</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#buffer\">buffer</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#sector\">sector</a> = 0;<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* the multisession sector offset goes here  */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#no_multi\">no_multi</a> = 0;<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* flag: the drive can't handle multisession */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(&amp;<a class=\"id\" href=\"#cgc\">cgc</a>, 0, sizeof(struct <a class=\"id\" href=\"#packet_command\">packet_command</a>));", 
"", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#vendor\">vendor</a>) {", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#VENDOR_SCSI3\">VENDOR_SCSI3</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[0] = <a class=\"id\" href=\"#READ_TOC\">READ_TOC</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[8] = 12;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[9] = 0x40;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#buffer\">buffer</a> = <a class=\"id\" href=\"#buffer\">buffer</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#buflen\">buflen</a> = 12;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#quiet\">quiet</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#data_direction\">data_direction</a> = <a class=\"id\" href=\"#DMA_FROM_DEVICE\">DMA_FROM_DEVICE</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#timeout\">timeout</a> = <a class=\"id\" href=\"#VENDOR_TIMEOUT\">VENDOR_TIMEOUT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#sr_do_ioctl\">sr_do_ioctl</a>(<a class=\"id\" href=\"#cd\">cd</a>, &amp;<a class=\"id\" href=\"#cgc\">cgc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a> != 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((<a class=\"id\" href=\"#buffer\">buffer</a>[0] << 8) + <a class=\"id\" href=\"#buffer\">buffer</a>[1] &lt; 0x0a) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"%s: Hmm, seems the drive \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>   \"doesn't support multisession CD's\\n\", <a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#cdi\">cdi</a>.<a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#no_multi\">no_multi</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sector\">sector</a> = <a class=\"id\" href=\"#buffer\">buffer</a>[11] + (<a class=\"id\" href=\"#buffer\">buffer</a>[10] << 8) +", 
"<span class=\"ts\"/><span class=\"ts\"/>    (<a class=\"id\" href=\"#buffer\">buffer</a>[9] << 16) + (<a class=\"id\" href=\"#buffer\">buffer</a>[8] << 24);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#buffer\">buffer</a>[6] <= 1) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* ignore sector offsets from first track */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sector\">sector</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_BLK_DEV_SR_VENDOR\">CONFIG_BLK_DEV_SR_VENDOR</a>", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#VENDOR_NEC\">VENDOR_NEC</a>:{", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#min\">min</a>, <a class=\"id\" href=\"#sec\">sec</a>, <a class=\"id\" href=\"#frame\">frame</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[0] = 0xde;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[1] = 0x03;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[2] = 0xb0;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#buffer\">buffer</a> = <a class=\"id\" href=\"#buffer\">buffer</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#buflen\">buflen</a> = 0x16;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#quiet\">quiet</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#data_direction\">data_direction</a> = <a class=\"id\" href=\"#DMA_FROM_DEVICE\">DMA_FROM_DEVICE</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#timeout\">timeout</a> = <a class=\"id\" href=\"#VENDOR_TIMEOUT\">VENDOR_TIMEOUT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#sr_do_ioctl\">sr_do_ioctl</a>(<a class=\"id\" href=\"#cd\">cd</a>, &amp;<a class=\"id\" href=\"#cgc\">cgc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a> != 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#buffer\">buffer</a>[14] != 0 && <a class=\"id\" href=\"#buffer\">buffer</a>[14] != 0xb0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"%s: Hmm, seems the cdrom \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       \"doesn't support multisession CD's\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#cdi\">cdi</a>.<a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#no_multi\">no_multi</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#min\">min</a> = <a class=\"id\" href=\"#bcd2bin\">bcd2bin</a>(<a class=\"id\" href=\"#buffer\">buffer</a>[15]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sec\">sec</a> = <a class=\"id\" href=\"#bcd2bin\">bcd2bin</a>(<a class=\"id\" href=\"#buffer\">buffer</a>[16]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#frame\">frame</a> = <a class=\"id\" href=\"#bcd2bin\">bcd2bin</a>(<a class=\"id\" href=\"#buffer\">buffer</a>[17]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sector\">sector</a> = <a class=\"id\" href=\"#min\">min</a> * <a class=\"id\" href=\"#CD_SECS\">CD_SECS</a> * <a class=\"id\" href=\"#CD_FRAMES\">CD_FRAMES</a> + <a class=\"id\" href=\"#sec\">sec</a> * <a class=\"id\" href=\"#CD_FRAMES\">CD_FRAMES</a> + <a class=\"id\" href=\"#frame\">frame</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#VENDOR_TOSHIBA\">VENDOR_TOSHIBA</a>:{", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#min\">min</a>, <a class=\"id\" href=\"#sec\">sec</a>, <a class=\"id\" href=\"#frame\">frame</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* we request some disc information (is it a XA-CD ?,</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> * where starts the last session ?) */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[0] = 0xc7;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[1] = 0x03;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#buffer\">buffer</a> = <a class=\"id\" href=\"#buffer\">buffer</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#buflen\">buflen</a> = 4;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#quiet\">quiet</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#data_direction\">data_direction</a> = <a class=\"id\" href=\"#DMA_FROM_DEVICE\">DMA_FROM_DEVICE</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#timeout\">timeout</a> = <a class=\"id\" href=\"#VENDOR_TIMEOUT\">VENDOR_TIMEOUT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#sr_do_ioctl\">sr_do_ioctl</a>(<a class=\"id\" href=\"#cd\">cd</a>, &amp;<a class=\"id\" href=\"#cgc\">cgc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a> == -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a> \"%s: Hmm, seems the drive \"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       \"doesn't support multisession CD's\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#cdi\">cdi</a>.<a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#no_multi\">no_multi</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a> != 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#min\">min</a> = <a class=\"id\" href=\"#bcd2bin\">bcd2bin</a>(<a class=\"id\" href=\"#buffer\">buffer</a>[1]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sec\">sec</a> = <a class=\"id\" href=\"#bcd2bin\">bcd2bin</a>(<a class=\"id\" href=\"#buffer\">buffer</a>[2]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#frame\">frame</a> = <a class=\"id\" href=\"#bcd2bin\">bcd2bin</a>(<a class=\"id\" href=\"#buffer\">buffer</a>[3]);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sector\">sector</a> = <a class=\"id\" href=\"#min\">min</a> * <a class=\"id\" href=\"#CD_SECS\">CD_SECS</a> * <a class=\"id\" href=\"#CD_FRAMES\">CD_FRAMES</a> + <a class=\"id\" href=\"#sec\">sec</a> * <a class=\"id\" href=\"#CD_FRAMES\">CD_FRAMES</a> + <a class=\"id\" href=\"#frame\">frame</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#sector\">sector</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sector\">sector</a> -= <a class=\"id\" href=\"#CD_MSF_OFFSET\">CD_MSF_OFFSET</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sr_set_blocklength\">sr_set_blocklength</a>(<a class=\"id\" href=\"#cd\">cd</a>, 2048);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#VENDOR_WRITER\">VENDOR_WRITER</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[0] = <a class=\"id\" href=\"#READ_TOC\">READ_TOC</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[8] = 0x04;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[9] = 0x40;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#buffer\">buffer</a> = <a class=\"id\" href=\"#buffer\">buffer</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#buflen\">buflen</a> = 0x04;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#quiet\">quiet</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#data_direction\">data_direction</a> = <a class=\"id\" href=\"#DMA_FROM_DEVICE\">DMA_FROM_DEVICE</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#timeout\">timeout</a> = <a class=\"id\" href=\"#VENDOR_TIMEOUT\">VENDOR_TIMEOUT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#sr_do_ioctl\">sr_do_ioctl</a>(<a class=\"id\" href=\"#cd\">cd</a>, &amp;<a class=\"id\" href=\"#cgc\">cgc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a> != 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((<a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#buffer\">buffer</a>[2]) == 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       \"%s: No finished session\\n\", <a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#cdi\">cdi</a>.<a class=\"id\" href=\"#name\">name</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[0] = <a class=\"id\" href=\"#READ_TOC\">READ_TOC</a>;<span class=\"ts\"/><span class=\"comment\">/* Read TOC */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[6] = <a class=\"id\" href=\"#rc\">rc</a> &amp; 0x7f;<span class=\"ts\"/><span class=\"comment\">/* number of last session */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[8] = 0x0c;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#cmd\">cmd</a>[9] = 0x40;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#buffer\">buffer</a> = <a class=\"id\" href=\"#buffer\">buffer</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#buflen\">buflen</a> = 12;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#quiet\">quiet</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#data_direction\">data_direction</a> = <a class=\"id\" href=\"#DMA_FROM_DEVICE\">DMA_FROM_DEVICE</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cgc\">cgc</a>.<a class=\"id\" href=\"#timeout\">timeout</a> = <a class=\"id\" href=\"#VENDOR_TIMEOUT\">VENDOR_TIMEOUT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#rc\">rc</a> = <a class=\"id\" href=\"#sr_do_ioctl\">sr_do_ioctl</a>(<a class=\"id\" href=\"#cd\">cd</a>, &amp;<a class=\"id\" href=\"#cgc\">cgc</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#rc\">rc</a> != 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sector\">sector</a> = <a class=\"id\" href=\"#buffer\">buffer</a>[11] + (<a class=\"id\" href=\"#buffer\">buffer</a>[10] << 8) +", 
"<span class=\"ts\"/><span class=\"ts\"/>    (<a class=\"id\" href=\"#buffer\">buffer</a>[9] << 16) + (<a class=\"id\" href=\"#buffer\">buffer</a>[8] << 24);", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"#<a class=\"id\" href=\"#endif\">endif</a><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* CONFIG_BLK_DEV_SR_VENDOR */</span>", 
"", 
"<span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* should not happen */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_WARNING\">KERN_WARNING</a>", 
"<span class=\"ts\"/><span class=\"ts\"/>   \"%s: unknown vendor code (%i), not initialized ?\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#cdi\">cdi</a>.<a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#vendor\">vendor</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sector\">sector</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#no_multi\">no_multi</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#ms_offset\">ms_offset</a> = <a class=\"id\" href=\"#sector\">sector</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#xa_flag\">xa_flag</a> = 0;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#CDS_AUDIO\">CDS_AUDIO</a> != <a class=\"id\" href=\"#sr_disk_status\">sr_disk_status</a>(<a class=\"id\" href=\"#cdi\">cdi</a>) && 1 == <a class=\"id\" href=\"#sr_is_xa\">sr_is_xa</a>(<a class=\"id\" href=\"#cd\">cd</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#xa_flag\">xa_flag</a> = 1;", 
"", 
"<span class=\"ts\"/>if (2048 != <a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#sector_size\">sector_size</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#sr_set_blocklength\">sr_set_blocklength</a>(<a class=\"id\" href=\"#cd\">cd</a>, 2048);", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#no_multi\">no_multi</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cdi\">cdi</a>-><a class=\"id\" href=\"#mask\">mask</a> |= <a class=\"id\" href=\"#CDC_MULTI_SESSION\">CDC_MULTI_SESSION</a>;", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#DEBUG\">DEBUG</a>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#sector\">sector</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a> \"%s: multisession offset=%lu\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/>       <a class=\"id\" href=\"#cd\">cd</a>-><a class=\"id\" href=\"#cdi\">cdi</a>.<a class=\"id\" href=\"#name\">name</a>, <a class=\"id\" href=\"#sector\">sector</a>);", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#buffer\">buffer</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#rc\">rc</a>;", 
"}", 
];
xr_frag_insert('l/f0/a5403c31a0df7010b86abe27f5a9ab5e2114af.xr', __xr_tmp);
