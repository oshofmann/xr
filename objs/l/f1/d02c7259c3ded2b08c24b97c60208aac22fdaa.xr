var __xr_tmp = [
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#free_cpumask_var\">free_cpumask_var</a>(<a class=\"id\" href=\"#tmp_mask\">tmp_mask</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"}", 
"", 
"int <a class=\"id\" href=\"#assign_irq_vector\">assign_irq_vector</a>(int <a class=\"id\" href=\"#irq\">irq</a>, struct <a class=\"id\" href=\"#irq_cfg\">irq_cfg</a> *<a class=\"id\" href=\"#cfg\">cfg</a>, const struct <a class=\"id\" href=\"#cpumask\">cpumask</a> *<a class=\"id\" href=\"#mask\">mask</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_spin_lock_irqsave\">raw_spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#vector_lock\">vector_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#__assign_irq_vector\">__assign_irq_vector</a>(<a class=\"id\" href=\"#irq\">irq</a>, <a class=\"id\" href=\"#cfg\">cfg</a>, <a class=\"id\" href=\"#mask\">mask</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_spin_unlock_irqrestore\">raw_spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#vector_lock\">vector_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#__clear_irq_vector\">__clear_irq_vector</a>(int <a class=\"id\" href=\"#irq\">irq</a>, struct <a class=\"id\" href=\"#irq_cfg\">irq_cfg</a> *<a class=\"id\" href=\"#cfg\">cfg</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#cpu\">cpu</a>, <a class=\"id\" href=\"#vector\">vector</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#BUG_ON\">BUG_ON</a>(!<a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#vector\">vector</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#vector\">vector</a> = <a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#vector\">vector</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#for_each_cpu_and\">for_each_cpu_and</a>(<a class=\"id\" href=\"#cpu\">cpu</a>, <a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#domain\">domain</a>, <a class=\"id\" href=\"#cpu_online_mask\">cpu_online_mask</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#per_cpu\">per_cpu</a>(<a class=\"id\" href=\"#vector_irq\">vector_irq</a>, <a class=\"id\" href=\"#cpu\">cpu</a>)[<a class=\"id\" href=\"#vector\">vector</a>] = -1;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#vector\">vector</a> = 0;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cpumask_clear\">cpumask_clear</a>(<a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#domain\">domain</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#likely\">likely</a>(!<a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#move_in_progress\">move_in_progress</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#for_each_cpu_and\">for_each_cpu_and</a>(<a class=\"id\" href=\"#cpu\">cpu</a>, <a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#old_domain\">old_domain</a>, <a class=\"id\" href=\"#cpu_online_mask\">cpu_online_mask</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#vector\">vector</a> = <a class=\"id\" href=\"#FIRST_EXTERNAL_VECTOR\">FIRST_EXTERNAL_VECTOR</a>; <a class=\"id\" href=\"#vector\">vector</a> &lt; <a class=\"id\" href=\"#NR_VECTORS\">NR_VECTORS</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vector\">vector</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#per_cpu\">per_cpu</a>(<a class=\"id\" href=\"#vector_irq\">vector_irq</a>, <a class=\"id\" href=\"#cpu\">cpu</a>)[<a class=\"id\" href=\"#vector\">vector</a>] != <a class=\"id\" href=\"#irq\">irq</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#per_cpu\">per_cpu</a>(<a class=\"id\" href=\"#vector_irq\">vector_irq</a>, <a class=\"id\" href=\"#cpu\">cpu</a>)[<a class=\"id\" href=\"#vector\">vector</a>] = -1;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#move_in_progress\">move_in_progress</a> = 0;", 
"}", 
"", 
"void <a class=\"id\" href=\"#__setup_vector_irq\">__setup_vector_irq</a>(int <a class=\"id\" href=\"#cpu\">cpu</a>)", 
"{", 
"<span class=\"ts\"/><span class=\"comment\">/* Initialize vector_irq on a new cpu */</span>", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#irq\">irq</a>, <a class=\"id\" href=\"#vector\">vector</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#irq_cfg\">irq_cfg</a> *<a class=\"id\" href=\"#cfg\">cfg</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#irq_desc\">irq_desc</a> *<a class=\"id\" href=\"#desc\">desc</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * vector_lock will make sure that we don't run into irq vector</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * assignments that might be happening on another cpu in parallel,</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * while we setup our initial vector to irq mappings.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_spin_lock\">raw_spin_lock</a>(&amp;<a class=\"id\" href=\"#vector_lock\">vector_lock</a>);", 
"<span class=\"ts\"/><span class=\"comment\">/* Mark the inuse vectors */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#for_each_irq_desc\">for_each_irq_desc</a>(<a class=\"id\" href=\"#irq\">irq</a>, <a class=\"id\" href=\"#desc\">desc</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cfg\">cfg</a> = <a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#chip_data\">chip_data</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * If it is a legacy IRQ handled by the legacy PIC, this cpu</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * will be part of the irq_cfg's domain.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#irq\">irq</a> &lt; <a class=\"id\" href=\"#legacy_pic\">legacy_pic</a>-><a class=\"id\" href=\"#nr_legacy_irqs\">nr_legacy_irqs</a> && !<a class=\"id\" href=\"#IO_APIC_IRQ\">IO_APIC_IRQ</a>(<a class=\"id\" href=\"#irq\">irq</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cpumask_set_cpu\">cpumask_set_cpu</a>(<a class=\"id\" href=\"#cpu\">cpu</a>, <a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#domain\">domain</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#cpumask_test_cpu\">cpumask_test_cpu</a>(<a class=\"id\" href=\"#cpu\">cpu</a>, <a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#domain\">domain</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#vector\">vector</a> = <a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#vector\">vector</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#per_cpu\">per_cpu</a>(<a class=\"id\" href=\"#vector_irq\">vector_irq</a>, <a class=\"id\" href=\"#cpu\">cpu</a>)[<a class=\"id\" href=\"#vector\">vector</a>] = <a class=\"id\" href=\"#irq\">irq</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"comment\">/* Mark the free vectors */</span>", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#vector\">vector</a> = 0; <a class=\"id\" href=\"#vector\">vector</a> &lt; <a class=\"id\" href=\"#NR_VECTORS\">NR_VECTORS</a>; ++<a class=\"id\" href=\"#vector\">vector</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irq\">irq</a> = <a class=\"id\" href=\"#per_cpu\">per_cpu</a>(<a class=\"id\" href=\"#vector_irq\">vector_irq</a>, <a class=\"id\" href=\"#cpu\">cpu</a>)[<a class=\"id\" href=\"#vector\">vector</a>];", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#irq\">irq</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>continue;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cfg\">cfg</a> = <a class=\"id\" href=\"#irq_cfg\">irq_cfg</a>(<a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#cpumask_test_cpu\">cpumask_test_cpu</a>(<a class=\"id\" href=\"#cpu\">cpu</a>, <a class=\"id\" href=\"#cfg\">cfg</a>-><a class=\"id\" href=\"#domain\">domain</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#per_cpu\">per_cpu</a>(<a class=\"id\" href=\"#vector_irq\">vector_irq</a>, <a class=\"id\" href=\"#cpu\">cpu</a>)[<a class=\"id\" href=\"#vector\">vector</a>] = -1;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_spin_unlock\">raw_spin_unlock</a>(&amp;<a class=\"id\" href=\"#vector_lock\">vector_lock</a>);", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#irq_chip\">irq_chip</a> <a class=\"id\" href=\"#ioapic_chip\">ioapic_chip</a>;", 
"static struct <a class=\"id\" href=\"#irq_chip\">irq_chip</a> <a class=\"id\" href=\"#ir_ioapic_chip\">ir_ioapic_chip</a>;", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#IOAPIC_AUTO\">IOAPIC_AUTO</a>     -1", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#IOAPIC_EDGE\">IOAPIC_EDGE</a>     0", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#IOAPIC_LEVEL\">IOAPIC_LEVEL</a>    1", 
"", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_X86_32\">CONFIG_X86_32</a>", 
"static <a class=\"id\" href=\"#inline\">inline</a> int <a class=\"id\" href=\"#IO_APIC_irq_trigger\">IO_APIC_irq_trigger</a>(int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#apic\">apic</a>, <a class=\"id\" href=\"#idx\">idx</a>, <a class=\"id\" href=\"#pin\">pin</a>;", 
"", 
"<span class=\"ts\"/>for (<a class=\"id\" href=\"#apic\">apic</a> = 0; <a class=\"id\" href=\"#apic\">apic</a> &lt; <a class=\"id\" href=\"#nr_ioapics\">nr_ioapics</a>; <a class=\"id\" href=\"#apic\">apic</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/>for (<a class=\"id\" href=\"#pin\">pin</a> = 0; <a class=\"id\" href=\"#pin\">pin</a> &lt; <a class=\"id\" href=\"#nr_ioapic_registers\">nr_ioapic_registers</a>[<a class=\"id\" href=\"#apic\">apic</a>]; <a class=\"id\" href=\"#pin\">pin</a>++) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#idx\">idx</a> = <a class=\"id\" href=\"#find_irq_entry\">find_irq_entry</a>(<a class=\"id\" href=\"#apic\">apic</a>, <a class=\"id\" href=\"#pin\">pin</a>, <a class=\"id\" href=\"#mp_INT\">mp_INT</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>if ((<a class=\"id\" href=\"#idx\">idx</a> != -1) && (<a class=\"id\" href=\"#irq\">irq</a> == <a class=\"id\" href=\"#pin_2_irq\">pin_2_irq</a>(<a class=\"id\" href=\"#idx\">idx</a>, <a class=\"id\" href=\"#apic\">apic</a>, <a class=\"id\" href=\"#pin\">pin</a>)))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#irq_trigger\">irq_trigger</a>(<a class=\"id\" href=\"#idx\">idx</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\">         * nonexistent IRQs are edge default</span>", 
"<span class=\"comment\">         */</span>", 
"<span class=\"ts\"/>return 0;", 
"}", 
"#else", 
"static <a class=\"id\" href=\"#inline\">inline</a> int <a class=\"id\" href=\"#IO_APIC_irq_trigger\">IO_APIC_irq_trigger</a>(int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/>return 1;", 
"}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"static void <a class=\"id\" href=\"#ioapic_register_intr\">ioapic_register_intr</a>(int <a class=\"id\" href=\"#irq\">irq</a>, struct <a class=\"id\" href=\"#irq_desc\">irq_desc</a> *<a class=\"id\" href=\"#desc\">desc</a>, unsigned long <a class=\"id\" href=\"#trigger\">trigger</a>)", 
"{", 
"", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#trigger\">trigger</a> == <a class=\"id\" href=\"#IOAPIC_AUTO\">IOAPIC_AUTO</a> && <a class=\"id\" href=\"#IO_APIC_irq_trigger\">IO_APIC_irq_trigger</a>(<a class=\"id\" href=\"#irq\">irq</a>)) ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#trigger\">trigger</a> == <a class=\"id\" href=\"#IOAPIC_LEVEL\">IOAPIC_LEVEL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#status\">status</a> |= <a class=\"id\" href=\"#IRQ_LEVEL\">IRQ_LEVEL</a>;", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#status\">status</a> &= ~<a class=\"id\" href=\"#IRQ_LEVEL\">IRQ_LEVEL</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irq_remapped\">irq_remapped</a>(<a class=\"id\" href=\"#irq\">irq</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#desc\">desc</a>-><a class=\"id\" href=\"#status\">status</a> |= <a class=\"id\" href=\"#IRQ_MOVE_PCNTXT\">IRQ_MOVE_PCNTXT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#trigger\">trigger</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_irq_chip_and_handler_name\">set_irq_chip_and_handler_name</a>(<a class=\"id\" href=\"#irq\">irq</a>, &amp;<a class=\"id\" href=\"#ir_ioapic_chip\">ir_ioapic_chip</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#handle_fasteoi_irq\">handle_fasteoi_irq</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     \"fasteoi\");", 
"<span class=\"ts\"/><span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_irq_chip_and_handler_name\">set_irq_chip_and_handler_name</a>(<a class=\"id\" href=\"#irq\">irq</a>, &amp;<a class=\"id\" href=\"#ir_ioapic_chip\">ir_ioapic_chip</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#handle_edge_irq\">handle_edge_irq</a>, \"edge\");", 
"<span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if ((<a class=\"id\" href=\"#trigger\">trigger</a> == <a class=\"id\" href=\"#IOAPIC_AUTO\">IOAPIC_AUTO</a> && <a class=\"id\" href=\"#IO_APIC_irq_trigger\">IO_APIC_irq_trigger</a>(<a class=\"id\" href=\"#irq\">irq</a>)) ||", 
"<span class=\"ts\"/>    <a class=\"id\" href=\"#trigger\">trigger</a> == <a class=\"id\" href=\"#IOAPIC_LEVEL\">IOAPIC_LEVEL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_irq_chip_and_handler_name\">set_irq_chip_and_handler_name</a>(<a class=\"id\" href=\"#irq\">irq</a>, &amp;<a class=\"id\" href=\"#ioapic_chip\">ioapic_chip</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#handle_fasteoi_irq\">handle_fasteoi_irq</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      \"fasteoi\");", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_irq_chip_and_handler_name\">set_irq_chip_and_handler_name</a>(<a class=\"id\" href=\"#irq\">irq</a>, &amp;<a class=\"id\" href=\"#ioapic_chip\">ioapic_chip</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      <a class=\"id\" href=\"#handle_edge_irq\">handle_edge_irq</a>, \"edge\");", 
"}", 
"", 
"int <a class=\"id\" href=\"#setup_ioapic_entry\">setup_ioapic_entry</a>(int <a class=\"id\" href=\"#apic_id\">apic_id</a>, int <a class=\"id\" href=\"#irq\">irq</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>       struct <a class=\"id\" href=\"#IO_APIC_route_entry\">IO_APIC_route_entry</a> *<a class=\"id\" href=\"#entry\">entry</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>       unsigned int <a class=\"id\" href=\"#destination\">destination</a>, int <a class=\"id\" href=\"#trigger\">trigger</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/>       int <a class=\"id\" href=\"#polarity\">polarity</a>, int <a class=\"id\" href=\"#vector\">vector</a>, int <a class=\"id\" href=\"#pin\">pin</a>)", 
"{", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * add it to the IO-APIC irq-routing table:</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(<a class=\"id\" href=\"#entry\">entry</a>,0,sizeof(*<a class=\"id\" href=\"#entry\">entry</a>));", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#intr_remapping_enabled\">intr_remapping_enabled</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#intel_iommu\">intel_iommu</a> *<a class=\"id\" href=\"#iommu\">iommu</a> = <a class=\"id\" href=\"#map_ioapic_to_ir\">map_ioapic_to_ir</a>(<a class=\"id\" href=\"#apic_id\">apic_id</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#irte\">irte</a> <a class=\"id\" href=\"#irte\">irte</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#IR_IO_APIC_route_entry\">IR_IO_APIC_route_entry</a> *<a class=\"id\" href=\"#ir_entry\">ir_entry</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(struct <a class=\"id\" href=\"#IR_IO_APIC_route_entry\">IR_IO_APIC_route_entry</a> *) <a class=\"id\" href=\"#entry\">entry</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>int <a class=\"id\" href=\"#index\">index</a>;", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#iommu\">iommu</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#panic\">panic</a>(\"No mapping iommu for ioapic %d\\n\", <a class=\"id\" href=\"#apic_id\">apic_id</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#index\">index</a> = <a class=\"id\" href=\"#alloc_irte\">alloc_irte</a>(<a class=\"id\" href=\"#iommu\">iommu</a>, <a class=\"id\" href=\"#irq\">irq</a>, 1);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#index\">index</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#panic\">panic</a>(\"Failed to allocate IRTE for ioapic %d\\n\", <a class=\"id\" href=\"#apic_id\">apic_id</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#memset\">memset</a>(&amp;<a class=\"id\" href=\"#irte\">irte</a>, 0, sizeof(<a class=\"id\" href=\"#irte\">irte</a>));", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irte\">irte</a>.<a class=\"id\" href=\"#present\">present</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irte\">irte</a>.<a class=\"id\" href=\"#dst_mode\">dst_mode</a> = <a class=\"id\" href=\"#apic\">apic</a>-><a class=\"id\" href=\"#irq_dest_mode\">irq_dest_mode</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * Trigger mode in the IRTE will always be edge, and the</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * actual level or edge trigger will be setup in the IO-APIC</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * RTE. This will help simplify level triggered irq migration.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * For more details, see the comments above explainig IO-APIC</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * irq migration in the presence of interrupt-remapping.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irte\">irte</a>.<a class=\"id\" href=\"#trigger_mode\">trigger_mode</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irte\">irte</a>.<a class=\"id\" href=\"#dlvry_mode\">dlvry_mode</a> = <a class=\"id\" href=\"#apic\">apic</a>-><a class=\"id\" href=\"#irq_delivery_mode\">irq_delivery_mode</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irte\">irte</a>.<a class=\"id\" href=\"#vector\">vector</a> = <a class=\"id\" href=\"#vector\">vector</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#irte\">irte</a>.<a class=\"id\" href=\"#dest_id\">dest_id</a> = <a class=\"id\" href=\"#IRTE_DEST\">IRTE_DEST</a>(<a class=\"id\" href=\"#destination\">destination</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* Set source-id of interrupt request */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_ioapic_sid\">set_ioapic_sid</a>(&amp;<a class=\"id\" href=\"#irte\">irte</a>, <a class=\"id\" href=\"#apic_id\">apic_id</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#modify_irte\">modify_irte</a>(<a class=\"id\" href=\"#irq\">irq</a>, &amp;<a class=\"id\" href=\"#irte\">irte</a>);", 
"", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ir_entry\">ir_entry</a>-><a class=\"id\" href=\"#index2\">index2</a> = (<a class=\"id\" href=\"#index\">index</a> >> 15) &amp; 0x1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ir_entry\">ir_entry</a>-><a class=\"id\" href=\"#zero\">zero</a> = 0;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ir_entry\">ir_entry</a>-><a class=\"id\" href=\"#format\">format</a> = 1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ir_entry\">ir_entry</a>-><a class=\"id\" href=\"#index\">index</a> = (<a class=\"id\" href=\"#index\">index</a> &amp; 0x7fff);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * IO-APIC RTE will be configured with virtual vector.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * irq handler will do the explicit EOI to the io-apic.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ir_entry\">ir_entry</a>-><a class=\"id\" href=\"#vector\">vector</a> = <a class=\"id\" href=\"#pin\">pin</a>;", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#entry\">entry</a>-><a class=\"id\" href=\"#delivery_mode\">delivery_mode</a> = <a class=\"id\" href=\"#apic\">apic</a>-><a class=\"id\" href=\"#irq_delivery_mode\">irq_delivery_mode</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#entry\">entry</a>-><a class=\"id\" href=\"#dest_mode\">dest_mode</a> = <a class=\"id\" href=\"#apic\">apic</a>-><a class=\"id\" href=\"#irq_dest_mode\">irq_dest_mode</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#entry\">entry</a>-><a class=\"id\" href=\"#dest\">dest</a> = <a class=\"id\" href=\"#destination\">destination</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#entry\">entry</a>-><a class=\"id\" href=\"#vector\">vector</a> = <a class=\"id\" href=\"#vector\">vector</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#entry\">entry</a>-><a class=\"id\" href=\"#mask\">mask</a> = 0;<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* enable IRQ */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#entry\">entry</a>-><a class=\"id\" href=\"#trigger\">trigger</a> = <a class=\"id\" href=\"#trigger\">trigger</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#entry\">entry</a>-><a class=\"id\" href=\"#polarity\">polarity</a> = <a class=\"id\" href=\"#polarity\">polarity</a>;", 
"", 
];
xr_frag_insert('l/f1/d02c7259c3ded2b08c24b97c60208aac22fdaa.xr', __xr_tmp);
