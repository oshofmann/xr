var __xr_tmp = [
"<span class=\"comment\"> * (at your option) any later version.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * See the file COPYING for more details.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#spinlock\">spinlock</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#init\">init</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#security\">security</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#slab\">slab</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#ipc\">ipc</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#ipc_namespace\">ipc_namespace</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#uaccess\">uaccess</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> \"util.h\"", 
"", 
"<a class=\"id\" href=\"#DEFINE_SPINLOCK\">DEFINE_SPINLOCK</a>(<a class=\"id\" href=\"#mq_lock\">mq_lock</a>);", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * The next 2 defines are here bc this is the only file</span>", 
"<span class=\"comment\"> * compiled when either CONFIG_SYSVIPC and CONFIG_POSIX_MQUEUE</span>", 
"<span class=\"comment\"> * and not CONFIG_IPC_NS.</span>", 
"<span class=\"comment\"> */</span>", 
"struct <a class=\"id\" href=\"#ipc_namespace\">ipc_namespace</a> <a class=\"id\" href=\"#init_ipc_ns\">init_ipc_ns</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#count\">count</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#ATOMIC_INIT\">ATOMIC_INIT</a>(1),", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_POSIX_MQUEUE\">CONFIG_POSIX_MQUEUE</a>", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#mq_queues_max\">mq_queues_max</a>   = <a class=\"id\" href=\"#DFLT_QUEUESMAX\">DFLT_QUEUESMAX</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#mq_msg_max\">mq_msg_max</a>      = <a class=\"id\" href=\"#DFLT_MSGMAX\">DFLT_MSGMAX</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#mq_msgsize_max\">mq_msgsize_max</a>  = <a class=\"id\" href=\"#DFLT_MSGSIZEMAX\">DFLT_MSGSIZEMAX</a>,", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"};", 
"", 
"<a class=\"id\" href=\"#atomic_t\">atomic_t</a> <a class=\"id\" href=\"#nr_ipc_ns\">nr_ipc_ns</a> = <a class=\"id\" href=\"#ATOMIC_INIT\">ATOMIC_INIT</a>(1);", 
"", 
"struct <a class=\"id\" href=\"#msg_msgseg\">msg_msgseg</a> {", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#msg_msgseg\">msg_msgseg</a>* <a class=\"id\" href=\"#next\">next</a>;", 
"<span class=\"ts\"/><span class=\"comment\">/* the next part of the message follows immediately */</span>", 
"};", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#DATALEN_MSG\">DATALEN_MSG</a><span class=\"ts\"/>(<a class=\"id\" href=\"#PAGE_SIZE\">PAGE_SIZE</a>-sizeof(struct <a class=\"id\" href=\"#msg_msg\">msg_msg</a>))", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#DATALEN_SEG\">DATALEN_SEG</a><span class=\"ts\"/>(<a class=\"id\" href=\"#PAGE_SIZE\">PAGE_SIZE</a>-sizeof(struct <a class=\"id\" href=\"#msg_msgseg\">msg_msgseg</a>))", 
"", 
"struct <a class=\"id\" href=\"#msg_msg\">msg_msg</a> *<a class=\"id\" href=\"#load_msg\">load_msg</a>(const void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#src\">src</a>, int <a class=\"id\" href=\"#len\">len</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#msg_msg\">msg_msg</a> *<a class=\"id\" href=\"#msg\">msg</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#msg_msgseg\">msg_msgseg</a> **<a class=\"id\" href=\"#pseg\">pseg</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#alen\">alen</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#alen\">alen</a> = <a class=\"id\" href=\"#len\">len</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#alen\">alen</a> &gt; <a class=\"id\" href=\"#DATALEN_MSG\">DATALEN_MSG</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#alen\">alen</a> = <a class=\"id\" href=\"#DATALEN_MSG\">DATALEN_MSG</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#msg\">msg</a> = <a class=\"id\" href=\"#kmalloc\">kmalloc</a>(sizeof(*<a class=\"id\" href=\"#msg\">msg</a>) + <a class=\"id\" href=\"#alen\">alen</a>, <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#msg\">msg</a> == <a class=\"id\" href=\"#NULL\">NULL</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(-<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#msg\">msg</a>-><a class=\"id\" href=\"#next\">next</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#msg\">msg</a>-><a class=\"id\" href=\"#security\">security</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(<a class=\"id\" href=\"#msg\">msg</a> + 1, <a class=\"id\" href=\"#src\">src</a>, <a class=\"id\" href=\"#alen\">alen</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out_err\">out_err</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a> -= <a class=\"id\" href=\"#alen\">alen</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#src\">src</a> = ((char <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#src\">src</a>) + <a class=\"id\" href=\"#alen\">alen</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#pseg\">pseg</a> = &amp;<a class=\"id\" href=\"#msg\">msg</a>-><a class=\"id\" href=\"#next\">next</a>;", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#len\">len</a> &gt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#msg_msgseg\">msg_msgseg</a> *<a class=\"id\" href=\"#seg\">seg</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#alen\">alen</a> = <a class=\"id\" href=\"#len\">len</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#alen\">alen</a> &gt; <a class=\"id\" href=\"#DATALEN_SEG\">DATALEN_SEG</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#alen\">alen</a> = <a class=\"id\" href=\"#DATALEN_SEG\">DATALEN_SEG</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seg\">seg</a> = <a class=\"id\" href=\"#kmalloc\">kmalloc</a>(sizeof(*<a class=\"id\" href=\"#seg\">seg</a>) + <a class=\"id\" href=\"#alen\">alen</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/> <a class=\"id\" href=\"#GFP_KERNEL\">GFP_KERNEL</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#seg\">seg</a> == <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out_err\">out_err</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/>*<a class=\"id\" href=\"#pseg\">pseg</a> = <a class=\"id\" href=\"#seg\">seg</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seg\">seg</a>-><a class=\"id\" href=\"#next\">next</a> = <a class=\"id\" href=\"#NULL\">NULL</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_from_user\">copy_from_user</a>(<a class=\"id\" href=\"#seg\">seg</a> + 1, <a class=\"id\" href=\"#src\">src</a>, <a class=\"id\" href=\"#alen\">alen</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = -<a class=\"id\" href=\"#EFAULT\">EFAULT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out_err\">out_err</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#pseg\">pseg</a> = &amp;<a class=\"id\" href=\"#seg\">seg</a>-><a class=\"id\" href=\"#next\">next</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a> -= <a class=\"id\" href=\"#alen\">alen</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#src\">src</a> = ((char <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#src\">src</a>) + <a class=\"id\" href=\"#alen\">alen</a>;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#security_msg_msg_alloc\">security_msg_msg_alloc</a>(<a class=\"id\" href=\"#msg\">msg</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#out_err\">out_err</a>;", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#msg\">msg</a>;", 
"", 
"<a class=\"id\" href=\"#out_err\">out_err</a>:", 
"<span class=\"ts\"/><a class=\"id\" href=\"#free_msg\">free_msg</a>(<a class=\"id\" href=\"#msg\">msg</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ERR_PTR\">ERR_PTR</a>(<a class=\"id\" href=\"#err\">err</a>);", 
"}", 
"", 
"int <a class=\"id\" href=\"#store_msg\">store_msg</a>(void <a class=\"id\" href=\"#__user\">__user</a> *<a class=\"id\" href=\"#dest\">dest</a>, struct <a class=\"id\" href=\"#msg_msg\">msg_msg</a> *<a class=\"id\" href=\"#msg\">msg</a>, int <a class=\"id\" href=\"#len\">len</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#alen\">alen</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#msg_msgseg\">msg_msgseg</a> *<a class=\"id\" href=\"#seg\">seg</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#alen\">alen</a> = <a class=\"id\" href=\"#len\">len</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#alen\">alen</a> &gt; <a class=\"id\" href=\"#DATALEN_MSG\">DATALEN_MSG</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#alen\">alen</a> = <a class=\"id\" href=\"#DATALEN_MSG\">DATALEN_MSG</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#dest\">dest</a>, <a class=\"id\" href=\"#msg\">msg</a> + 1, <a class=\"id\" href=\"#alen\">alen</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a> -= <a class=\"id\" href=\"#alen\">alen</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dest\">dest</a> = ((char <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#dest\">dest</a>) + <a class=\"id\" href=\"#alen\">alen</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#seg\">seg</a> = <a class=\"id\" href=\"#msg\">msg</a>-><a class=\"id\" href=\"#next\">next</a>;", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#len\">len</a> &gt; 0) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#alen\">alen</a> = <a class=\"id\" href=\"#len\">len</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#alen\">alen</a> &gt; <a class=\"id\" href=\"#DATALEN_SEG\">DATALEN_SEG</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#alen\">alen</a> = <a class=\"id\" href=\"#DATALEN_SEG\">DATALEN_SEG</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#copy_to_user\">copy_to_user</a>(<a class=\"id\" href=\"#dest\">dest</a>, <a class=\"id\" href=\"#seg\">seg</a> + 1, <a class=\"id\" href=\"#alen\">alen</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -1;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#len\">len</a> -= <a class=\"id\" href=\"#alen\">alen</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#dest\">dest</a> = ((char <a class=\"id\" href=\"#__user\">__user</a> *)<a class=\"id\" href=\"#dest\">dest</a>) + <a class=\"id\" href=\"#alen\">alen</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seg\">seg</a> = <a class=\"id\" href=\"#seg\">seg</a>-><a class=\"id\" href=\"#next\">next</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"void <a class=\"id\" href=\"#free_msg\">free_msg</a>(struct <a class=\"id\" href=\"#msg_msg\">msg_msg</a> *<a class=\"id\" href=\"#msg\">msg</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#msg_msgseg\">msg_msgseg</a> *<a class=\"id\" href=\"#seg\">seg</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#security_msg_msg_free\">security_msg_msg_free</a>(<a class=\"id\" href=\"#msg\">msg</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#seg\">seg</a> = <a class=\"id\" href=\"#msg\">msg</a>-><a class=\"id\" href=\"#next\">next</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#msg\">msg</a>);", 
"<span class=\"ts\"/>while (<a class=\"id\" href=\"#seg\">seg</a> != <a class=\"id\" href=\"#NULL\">NULL</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/>struct <a class=\"id\" href=\"#msg_msgseg\">msg_msgseg</a> *<a class=\"id\" href=\"#tmp\">tmp</a> = <a class=\"id\" href=\"#seg\">seg</a>-><a class=\"id\" href=\"#next\">next</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#kfree\">kfree</a>(<a class=\"id\" href=\"#seg\">seg</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#seg\">seg</a> = <a class=\"id\" href=\"#tmp\">tmp</a>;", 
"<span class=\"ts\"/>}", 
"}", 
];
xr_frag_insert('l/fa/3d563812b577d1ec062b07b814b979a7396c38.xr', __xr_tmp);
