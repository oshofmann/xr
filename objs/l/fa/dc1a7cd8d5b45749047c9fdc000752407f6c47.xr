var __xr_tmp = [
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#linkage\">linkage</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#errno\">errno</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#signal\">signal</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#sched\">sched</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#ioport\">ioport</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#interrupt\">interrupt</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#timex\">timex</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#random\">random</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#init\">init</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#kernel_stat\">kernel_stat</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#sysdev\">sysdev</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#bitops\">bitops</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#acpi\">acpi</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#io\">io</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#delay\">delay</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#atomic\">atomic</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#system\">system</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#timer\">timer</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#hw_irq\">hw_irq</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#pgtable\">pgtable</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#desc\">desc</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#apic\">apic</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#i8259\">i8259</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * This is the 'legacy' 8259A Programmable Interrupt Controller,</span>", 
"<span class=\"comment\"> * present in the majority of PC/AT boxes.</span>", 
"<span class=\"comment\"> * plus some generic x86 specific things if generic specifics makes</span>", 
"<span class=\"comment\"> * any sense at all.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static int <a class=\"id\" href=\"#i8259A_auto_eoi\">i8259A_auto_eoi</a>;", 
"<a class=\"id\" href=\"#DEFINE_RAW_SPINLOCK\">DEFINE_RAW_SPINLOCK</a>(<a class=\"id\" href=\"#i8259A_lock\">i8259A_lock</a>);", 
"static void <a class=\"id\" href=\"#mask_and_ack_8259A\">mask_and_ack_8259A</a>(unsigned int);", 
"static void <a class=\"id\" href=\"#mask_8259A\">mask_8259A</a>(void);", 
"static void <a class=\"id\" href=\"#unmask_8259A\">unmask_8259A</a>(void);", 
"static void <a class=\"id\" href=\"#disable_8259A_irq\">disable_8259A_irq</a>(unsigned int <a class=\"id\" href=\"#irq\">irq</a>);", 
"static void <a class=\"id\" href=\"#enable_8259A_irq\">enable_8259A_irq</a>(unsigned int <a class=\"id\" href=\"#irq\">irq</a>);", 
"static void <a class=\"id\" href=\"#init_8259A\">init_8259A</a>(int <a class=\"id\" href=\"#auto_eoi\">auto_eoi</a>);", 
"static int <a class=\"id\" href=\"#i8259A_irq_pending\">i8259A_irq_pending</a>(unsigned int <a class=\"id\" href=\"#irq\">irq</a>);", 
"", 
"struct <a class=\"id\" href=\"#irq_chip\">irq_chip</a> <a class=\"id\" href=\"#i8259A_chip\">i8259A_chip</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a><span class=\"ts\"/><span class=\"ts\"/>= \"XT-PIC\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#mask\">mask</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#disable_8259A_irq\">disable_8259A_irq</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#disable\">disable</a><span class=\"ts\"/>= <a class=\"id\" href=\"#disable_8259A_irq\">disable_8259A_irq</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#unmask\">unmask</a><span class=\"ts\"/><span class=\"ts\"/>= <a class=\"id\" href=\"#enable_8259A_irq\">enable_8259A_irq</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#mask_ack\">mask_ack</a><span class=\"ts\"/>= <a class=\"id\" href=\"#mask_and_ack_8259A\">mask_and_ack_8259A</a>,", 
"};", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * 8259A PIC functions to handle ISA devices:</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * This contains the irq mask for both 8259A irq controllers,</span>", 
"<span class=\"comment\"> */</span>", 
"unsigned int <a class=\"id\" href=\"#cached_irq_mask\">cached_irq_mask</a> = 0xffff;", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Not all IRQs can be routed through the IO-APIC, eg. on certain (older)</span>", 
"<span class=\"comment\"> * boards the timer interrupt is not really connected to any IO-APIC pin,</span>", 
"<span class=\"comment\"> * it's fed to the master 8259A's IR0 line only.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Any '1' bit in this mask means the IRQ is routed through the IO-APIC.</span>", 
"<span class=\"comment\"> * this 'mixed mode' IRQ handling costs nothing because it's only used</span>", 
"<span class=\"comment\"> * at IRQ setup time.</span>", 
"<span class=\"comment\"> */</span>", 
"unsigned long <a class=\"id\" href=\"#io_apic_irqs\">io_apic_irqs</a>;", 
"", 
"static void <a class=\"id\" href=\"#disable_8259A_irq\">disable_8259A_irq</a>(unsigned int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#mask\">mask</a> = 1 << <a class=\"id\" href=\"#irq\">irq</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_spin_lock_irqsave\">raw_spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#i8259A_lock\">i8259A_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cached_irq_mask\">cached_irq_mask</a> |= <a class=\"id\" href=\"#mask\">mask</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irq\">irq</a> &amp; 8)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#cached_slave_mask\">cached_slave_mask</a>, <a class=\"id\" href=\"#PIC_SLAVE_IMR\">PIC_SLAVE_IMR</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#cached_master_mask\">cached_master_mask</a>, <a class=\"id\" href=\"#PIC_MASTER_IMR\">PIC_MASTER_IMR</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_spin_unlock_irqrestore\">raw_spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#i8259A_lock\">i8259A_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#enable_8259A_irq\">enable_8259A_irq</a>(unsigned int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#mask\">mask</a> = ~(1 << <a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_spin_lock_irqsave\">raw_spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#i8259A_lock\">i8259A_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cached_irq_mask\">cached_irq_mask</a> &= <a class=\"id\" href=\"#mask\">mask</a>;", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irq\">irq</a> &amp; 8)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#cached_slave_mask\">cached_slave_mask</a>, <a class=\"id\" href=\"#PIC_SLAVE_IMR\">PIC_SLAVE_IMR</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#cached_master_mask\">cached_master_mask</a>, <a class=\"id\" href=\"#PIC_MASTER_IMR\">PIC_MASTER_IMR</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_spin_unlock_irqrestore\">raw_spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#i8259A_lock\">i8259A_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#i8259A_irq_pending\">i8259A_irq_pending</a>(unsigned int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#mask\">mask</a> = 1<<<a class=\"id\" href=\"#irq\">irq</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_spin_lock_irqsave\">raw_spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#i8259A_lock\">i8259A_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irq\">irq</a> &lt; 8)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#inb\">inb</a>(<a class=\"id\" href=\"#PIC_MASTER_CMD\">PIC_MASTER_CMD</a>) &amp; <a class=\"id\" href=\"#mask\">mask</a>;", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#inb\">inb</a>(<a class=\"id\" href=\"#PIC_SLAVE_CMD\">PIC_SLAVE_CMD</a>) &amp; (<a class=\"id\" href=\"#mask\">mask</a> >> 8);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_spin_unlock_irqrestore\">raw_spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#i8259A_lock\">i8259A_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#make_8259A_irq\">make_8259A_irq</a>(unsigned int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#disable_irq_nosync\">disable_irq_nosync</a>(<a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#io_apic_irqs\">io_apic_irqs</a> &= ~(1<<<a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#set_irq_chip_and_handler_name\">set_irq_chip_and_handler_name</a>(<a class=\"id\" href=\"#irq\">irq</a>, &amp;<a class=\"id\" href=\"#i8259A_chip\">i8259A_chip</a>, <a class=\"id\" href=\"#handle_level_irq\">handle_level_irq</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>      \"XT\");", 
"<span class=\"ts\"/><a class=\"id\" href=\"#enable_irq\">enable_irq</a>(<a class=\"id\" href=\"#irq\">irq</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * This function assumes to be called rarely. Switching between</span>", 
"<span class=\"comment\"> * 8259A registers is slow.</span>", 
"<span class=\"comment\"> * This has to be protected by the irq controller spinlock</span>", 
"<span class=\"comment\"> * before being called.</span>", 
"<span class=\"comment\"> */</span>", 
"static <a class=\"id\" href=\"#inline\">inline</a> int <a class=\"id\" href=\"#i8259A_irq_real\">i8259A_irq_real</a>(unsigned int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#irqmask\">irqmask</a> = 1<<<a class=\"id\" href=\"#irq\">irq</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irq\">irq</a> &lt; 8) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(0x0B, <a class=\"id\" href=\"#PIC_MASTER_CMD\">PIC_MASTER_CMD</a>);<span class=\"ts\"/><span class=\"comment\">/* ISR register */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#value\">value</a> = <a class=\"id\" href=\"#inb\">inb</a>(<a class=\"id\" href=\"#PIC_MASTER_CMD\">PIC_MASTER_CMD</a>) &amp; <a class=\"id\" href=\"#irqmask\">irqmask</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(0x0A, <a class=\"id\" href=\"#PIC_MASTER_CMD\">PIC_MASTER_CMD</a>);<span class=\"ts\"/><span class=\"comment\">/* back to the IRR register */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#value\">value</a>;", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(0x0B, <a class=\"id\" href=\"#PIC_SLAVE_CMD\">PIC_SLAVE_CMD</a>);<span class=\"ts\"/><span class=\"comment\">/* ISR register */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#value\">value</a> = <a class=\"id\" href=\"#inb\">inb</a>(<a class=\"id\" href=\"#PIC_SLAVE_CMD\">PIC_SLAVE_CMD</a>) &amp; (<a class=\"id\" href=\"#irqmask\">irqmask</a> >> 8);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(0x0A, <a class=\"id\" href=\"#PIC_SLAVE_CMD\">PIC_SLAVE_CMD</a>);<span class=\"ts\"/><span class=\"comment\">/* back to the IRR register */</span>", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#value\">value</a>;", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Careful! The 8259A is a fragile beast, it pretty</span>", 
"<span class=\"comment\"> * much _has_ to be done exactly like this (mask it</span>", 
"<span class=\"comment\"> * first, _then_ send the EOI, and the order of EOI</span>", 
"<span class=\"comment\"> * to the two 8259s is important!</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#mask_and_ack_8259A\">mask_and_ack_8259A</a>(unsigned int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#irqmask\">irqmask</a> = 1 << <a class=\"id\" href=\"#irq\">irq</a>;", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_spin_lock_irqsave\">raw_spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#i8259A_lock\">i8259A_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Lightweight spurious IRQ detection. We do not want</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * to overdo spurious IRQ handling - it's usually a sign</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * of hardware problems, so we only do the checks we can</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * do without slowing down good hardware unnecessarily.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> *</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * Note that IRQ7 and IRQ15 (the two spurious IRQs</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * usually resulting from the 8259A-1|2 PICs) occur</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * even if the IRQ is masked in the 8259A. Thus we</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * can check spurious 8259A IRQs without doing the</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * quite slow i8259A_irq_real() call for every IRQ.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * This does not cover 100% of spurious interrupts,</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * but should be enough to warn the user that there</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * is something bad going on ...</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#cached_irq_mask\">cached_irq_mask</a> &amp; <a class=\"id\" href=\"#irqmask\">irqmask</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#spurious_8259A_irq\">spurious_8259A_irq</a>;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#cached_irq_mask\">cached_irq_mask</a> |= <a class=\"id\" href=\"#irqmask\">irqmask</a>;", 
"", 
"<a class=\"id\" href=\"#handle_real_irq\">handle_real_irq</a>:", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#irq\">irq</a> &amp; 8) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#inb\">inb</a>(<a class=\"id\" href=\"#PIC_SLAVE_IMR\">PIC_SLAVE_IMR</a>);<span class=\"ts\"/><span class=\"comment\">/* DUMMY - (do we need this?) */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#cached_slave_mask\">cached_slave_mask</a>, <a class=\"id\" href=\"#PIC_SLAVE_IMR\">PIC_SLAVE_IMR</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* 'Specific EOI' to slave */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(0x60+(<a class=\"id\" href=\"#irq\">irq</a>&amp;7), <a class=\"id\" href=\"#PIC_SLAVE_CMD\">PIC_SLAVE_CMD</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/> <span class=\"comment\">/* 'Specific EOI' to master-IRQ2 */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(0x60+<a class=\"id\" href=\"#PIC_CASCADE_IR\">PIC_CASCADE_IR</a>, <a class=\"id\" href=\"#PIC_MASTER_CMD\">PIC_MASTER_CMD</a>);", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#inb\">inb</a>(<a class=\"id\" href=\"#PIC_MASTER_IMR\">PIC_MASTER_IMR</a>);<span class=\"ts\"/><span class=\"comment\">/* DUMMY - (do we need this?) */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#cached_master_mask\">cached_master_mask</a>, <a class=\"id\" href=\"#PIC_MASTER_IMR\">PIC_MASTER_IMR</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(0x60+<a class=\"id\" href=\"#irq\">irq</a>, <a class=\"id\" href=\"#PIC_MASTER_CMD\">PIC_MASTER_CMD</a>);<span class=\"ts\"/><span class=\"comment\">/* 'Specific EOI to master */</span>", 
"<span class=\"ts\"/>}", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_spin_unlock_irqrestore\">raw_spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#i8259A_lock\">i8259A_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"<span class=\"ts\"/>return;", 
"", 
"<a class=\"id\" href=\"#spurious_8259A_irq\">spurious_8259A_irq</a>:", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * this is the slow path - should happen rarely.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#i8259A_irq_real\">i8259A_irq_real</a>(<a class=\"id\" href=\"#irq\">irq</a>))", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * oops, the IRQ _is_ in service according to the</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * 8259A - not spurious, go handle it.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#handle_real_irq\">handle_real_irq</a>;", 
"", 
"<span class=\"ts\"/>{", 
"<span class=\"ts\"/><span class=\"ts\"/>static int <a class=\"id\" href=\"#spurious_irq_mask\">spurious_irq_mask</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * At this point we can be sure the IRQ is spurious,</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * lets ACK and report it. [once per IRQ]</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!(<a class=\"id\" href=\"#spurious_irq_mask\">spurious_irq_mask</a> &amp; <a class=\"id\" href=\"#irqmask\">irqmask</a>)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_DEBUG\">KERN_DEBUG</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       \"spurious 8259A interrupt: IRQ%d.\\n\", <a class=\"id\" href=\"#irq\">irq</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#spurious_irq_mask\">spurious_irq_mask</a> |= <a class=\"id\" href=\"#irqmask\">irqmask</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#atomic_inc\">atomic_inc</a>(&amp;<a class=\"id\" href=\"#irq_err_count\">irq_err_count</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * Theoretically we do not have to handle this IRQ,</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * but in Linux this does not cause problems and is</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * simpler for us.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/>goto <a class=\"id\" href=\"#handle_real_irq\">handle_real_irq</a>;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static char <a class=\"id\" href=\"#irq_trigger\">irq_trigger</a>[2];", 
"<span class=\"comment\">/**</span>", 
"<span class=\"comment\"> * ELCR registers (0x4d0, 0x4d1) control edge/level of IRQ</span>", 
"<span class=\"comment\"> */</span>", 
"static void <a class=\"id\" href=\"#restore_ELCR\">restore_ELCR</a>(char *<a class=\"id\" href=\"#trigger\">trigger</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#trigger\">trigger</a>[0], 0x4d0);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#trigger\">trigger</a>[1], 0x4d1);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#save_ELCR\">save_ELCR</a>(char *<a class=\"id\" href=\"#trigger\">trigger</a>)", 
"{", 
"<span class=\"ts\"/><span class=\"comment\">/* IRQ 0,1,2,8,13 are marked as reserved */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#trigger\">trigger</a>[0] = <a class=\"id\" href=\"#inb\">inb</a>(0x4d0) &amp; 0xF8;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#trigger\">trigger</a>[1] = <a class=\"id\" href=\"#inb\">inb</a>(0x4d1) &amp; 0xDE;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#i8259A_resume\">i8259A_resume</a>(struct <a class=\"id\" href=\"#sys_device\">sys_device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#init_8259A\">init_8259A</a>(<a class=\"id\" href=\"#i8259A_auto_eoi\">i8259A_auto_eoi</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#restore_ELCR\">restore_ELCR</a>(<a class=\"id\" href=\"#irq_trigger\">irq_trigger</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#i8259A_suspend\">i8259A_suspend</a>(struct <a class=\"id\" href=\"#sys_device\">sys_device</a> *<a class=\"id\" href=\"#dev\">dev</a>, <a class=\"id\" href=\"#pm_message_t\">pm_message_t</a> <a class=\"id\" href=\"#state\">state</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#save_ELCR\">save_ELCR</a>(<a class=\"id\" href=\"#irq_trigger\">irq_trigger</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static int <a class=\"id\" href=\"#i8259A_shutdown\">i8259A_shutdown</a>(struct <a class=\"id\" href=\"#sys_device\">sys_device</a> *<a class=\"id\" href=\"#dev\">dev</a>)", 
"{", 
"<span class=\"ts\"/><span class=\"comment\">/* Put the i8259A into a quiescent state that</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * the kernel initialization code can get it</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * out of.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(0xff, <a class=\"id\" href=\"#PIC_MASTER_IMR\">PIC_MASTER_IMR</a>);<span class=\"ts\"/><span class=\"comment\">/* mask all of 8259A-1 */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(0xff, <a class=\"id\" href=\"#PIC_SLAVE_IMR\">PIC_SLAVE_IMR</a>);<span class=\"ts\"/><span class=\"comment\">/* mask all of 8259A-1 */</span>", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#sysdev_class\">sysdev_class</a> <a class=\"id\" href=\"#i8259_sysdev_class\">i8259_sysdev_class</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a> = \"i8259\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#suspend\">suspend</a> = <a class=\"id\" href=\"#i8259A_suspend\">i8259A_suspend</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#resume\">resume</a> = <a class=\"id\" href=\"#i8259A_resume\">i8259A_resume</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#shutdown\">shutdown</a> = <a class=\"id\" href=\"#i8259A_shutdown\">i8259A_shutdown</a>,", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#sys_device\">sys_device</a> <a class=\"id\" href=\"#device_i8259A\">device_i8259A</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#id\">id</a><span class=\"ts\"/>= 0,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#cls\">cls</a><span class=\"ts\"/>= &amp;<a class=\"id\" href=\"#i8259_sysdev_class\">i8259_sysdev_class</a>,", 
"};", 
"", 
"static void <a class=\"id\" href=\"#mask_8259A\">mask_8259A</a>(void)", 
"{", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_spin_lock_irqsave\">raw_spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#i8259A_lock\">i8259A_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(0xff, <a class=\"id\" href=\"#PIC_MASTER_IMR\">PIC_MASTER_IMR</a>);<span class=\"ts\"/><span class=\"comment\">/* mask all of 8259A-1 */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(0xff, <a class=\"id\" href=\"#PIC_SLAVE_IMR\">PIC_SLAVE_IMR</a>);<span class=\"ts\"/><span class=\"comment\">/* mask all of 8259A-2 */</span>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_spin_unlock_irqrestore\">raw_spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#i8259A_lock\">i8259A_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#unmask_8259A\">unmask_8259A</a>(void)", 
"{", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_spin_lock_irqsave\">raw_spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#i8259A_lock\">i8259A_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#cached_master_mask\">cached_master_mask</a>, <a class=\"id\" href=\"#PIC_MASTER_IMR\">PIC_MASTER_IMR</a>); <span class=\"comment\">/* restore master IRQ mask */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#cached_slave_mask\">cached_slave_mask</a>, <a class=\"id\" href=\"#PIC_SLAVE_IMR\">PIC_SLAVE_IMR</a>);<span class=\"ts\"/>  <span class=\"comment\">/* restore slave IRQ mask */</span>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_spin_unlock_irqrestore\">raw_spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#i8259A_lock\">i8259A_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#init_8259A\">init_8259A</a>(int <a class=\"id\" href=\"#auto_eoi\">auto_eoi</a>)", 
"{", 
"<span class=\"ts\"/>unsigned long <a class=\"id\" href=\"#flags\">flags</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#i8259A_auto_eoi\">i8259A_auto_eoi</a> = <a class=\"id\" href=\"#auto_eoi\">auto_eoi</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_spin_lock_irqsave\">raw_spin_lock_irqsave</a>(&amp;<a class=\"id\" href=\"#i8259A_lock\">i8259A_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(0xff, <a class=\"id\" href=\"#PIC_MASTER_IMR\">PIC_MASTER_IMR</a>);<span class=\"ts\"/><span class=\"comment\">/* mask all of 8259A-1 */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(0xff, <a class=\"id\" href=\"#PIC_SLAVE_IMR\">PIC_SLAVE_IMR</a>);<span class=\"ts\"/><span class=\"comment\">/* mask all of 8259A-2 */</span>", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/> * outb_pic - this has to work on a wide range of PC hardware.</span>", 
"<span class=\"comment\"><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb_pic\">outb_pic</a>(0x11, <a class=\"id\" href=\"#PIC_MASTER_CMD\">PIC_MASTER_CMD</a>);<span class=\"ts\"/><span class=\"comment\">/* ICW1: select 8259A-1 init */</span>", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* ICW2: 8259A-1 IR0-7 mapped to 0x30-0x37 on x86-64,</span>", 
"<span class=\"comment\"><span class=\"ts\"/>   to 0x20-0x27 on i386 */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb_pic\">outb_pic</a>(<a class=\"id\" href=\"#IRQ0_VECTOR\">IRQ0_VECTOR</a>, <a class=\"id\" href=\"#PIC_MASTER_IMR\">PIC_MASTER_IMR</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* 8259A-1 (the master) has a slave on IR2 */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb_pic\">outb_pic</a>(1U << <a class=\"id\" href=\"#PIC_CASCADE_IR\">PIC_CASCADE_IR</a>, <a class=\"id\" href=\"#PIC_MASTER_IMR\">PIC_MASTER_IMR</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#auto_eoi\">auto_eoi</a>)<span class=\"ts\"/><span class=\"comment\">/* master does Auto EOI */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#outb_pic\">outb_pic</a>(<a class=\"id\" href=\"#MASTER_ICW4_DEFAULT\">MASTER_ICW4_DEFAULT</a> | <a class=\"id\" href=\"#PIC_ICW4_AEOI\">PIC_ICW4_AEOI</a>, <a class=\"id\" href=\"#PIC_MASTER_IMR\">PIC_MASTER_IMR</a>);", 
"<span class=\"ts\"/>else<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* master expects normal EOI */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#outb_pic\">outb_pic</a>(<a class=\"id\" href=\"#MASTER_ICW4_DEFAULT\">MASTER_ICW4_DEFAULT</a>, <a class=\"id\" href=\"#PIC_MASTER_IMR\">PIC_MASTER_IMR</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb_pic\">outb_pic</a>(0x11, <a class=\"id\" href=\"#PIC_SLAVE_CMD\">PIC_SLAVE_CMD</a>);<span class=\"ts\"/><span class=\"comment\">/* ICW1: select 8259A-2 init */</span>", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* ICW2: 8259A-2 IR0-7 mapped to IRQ8_VECTOR */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb_pic\">outb_pic</a>(<a class=\"id\" href=\"#IRQ8_VECTOR\">IRQ8_VECTOR</a>, <a class=\"id\" href=\"#PIC_SLAVE_IMR\">PIC_SLAVE_IMR</a>);", 
"<span class=\"ts\"/><span class=\"comment\">/* 8259A-2 is a slave on master's IR2 */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb_pic\">outb_pic</a>(<a class=\"id\" href=\"#PIC_CASCADE_IR\">PIC_CASCADE_IR</a>, <a class=\"id\" href=\"#PIC_SLAVE_IMR\">PIC_SLAVE_IMR</a>);", 
"<span class=\"ts\"/><span class=\"comment\">/* (slave's support for AEOI in flat mode is to be investigated) */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb_pic\">outb_pic</a>(<a class=\"id\" href=\"#SLAVE_ICW4_DEFAULT\">SLAVE_ICW4_DEFAULT</a>, <a class=\"id\" href=\"#PIC_SLAVE_IMR\">PIC_SLAVE_IMR</a>);", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#auto_eoi\">auto_eoi</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/*</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * In AEOI mode we just have to mask the interrupt</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> * when acking.</span>", 
"<span class=\"comment\"><span class=\"ts\"/><span class=\"ts\"/> */</span>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#i8259A_chip\">i8259A_chip</a>.<a class=\"id\" href=\"#mask_ack\">mask_ack</a> = <a class=\"id\" href=\"#disable_8259A_irq\">disable_8259A_irq</a>;", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#i8259A_chip\">i8259A_chip</a>.<a class=\"id\" href=\"#mask_ack\">mask_ack</a> = <a class=\"id\" href=\"#mask_and_ack_8259A\">mask_and_ack_8259A</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#udelay\">udelay</a>(100);<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* wait for 8259A to initialize */</span>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#cached_master_mask\">cached_master_mask</a>, <a class=\"id\" href=\"#PIC_MASTER_IMR\">PIC_MASTER_IMR</a>); <span class=\"comment\">/* restore master IRQ mask */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#cached_slave_mask\">cached_slave_mask</a>, <a class=\"id\" href=\"#PIC_SLAVE_IMR\">PIC_SLAVE_IMR</a>);<span class=\"ts\"/>  <span class=\"comment\">/* restore slave IRQ mask */</span>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#raw_spin_unlock_irqrestore\">raw_spin_unlock_irqrestore</a>(&amp;<a class=\"id\" href=\"#i8259A_lock\">i8259A_lock</a>, <a class=\"id\" href=\"#flags\">flags</a>);", 
"}", 
"", 
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * make i8259 a driver so that we can select pic functions at run time. the goal</span>", 
"<span class=\"comment\"> * is to make x86 binary compatible among pc compatible and non-pc compatible</span>", 
"<span class=\"comment\"> * platforms, such as x86 MID.</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"static void <a class=\"id\" href=\"#legacy_pic_noop\">legacy_pic_noop</a>(void) { };", 
"static void <a class=\"id\" href=\"#legacy_pic_uint_noop\">legacy_pic_uint_noop</a>(unsigned int <a class=\"id\" href=\"#unused\">unused</a>) { };", 
"static void <a class=\"id\" href=\"#legacy_pic_int_noop\">legacy_pic_int_noop</a>(int <a class=\"id\" href=\"#unused\">unused</a>) { };", 
"", 
"static struct <a class=\"id\" href=\"#irq_chip\">irq_chip</a> <a class=\"id\" href=\"#dummy_pic_chip\">dummy_pic_chip</a>  = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a> = \"dummy pic\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#mask\">mask</a> = <a class=\"id\" href=\"#legacy_pic_uint_noop\">legacy_pic_uint_noop</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#unmask\">unmask</a> = <a class=\"id\" href=\"#legacy_pic_uint_noop\">legacy_pic_uint_noop</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#disable\">disable</a> = <a class=\"id\" href=\"#legacy_pic_uint_noop\">legacy_pic_uint_noop</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#mask_ack\">mask_ack</a> = <a class=\"id\" href=\"#legacy_pic_uint_noop\">legacy_pic_uint_noop</a>,", 
"};", 
"static int <a class=\"id\" href=\"#legacy_pic_irq_pending_noop\">legacy_pic_irq_pending_noop</a>(unsigned int <a class=\"id\" href=\"#irq\">irq</a>)", 
"{", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"struct <a class=\"id\" href=\"#legacy_pic\">legacy_pic</a> <a class=\"id\" href=\"#null_legacy_pic\">null_legacy_pic</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#nr_legacy_irqs\">nr_legacy_irqs</a> = 0,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#chip\">chip</a> = &amp;<a class=\"id\" href=\"#dummy_pic_chip\">dummy_pic_chip</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#mask_all\">mask_all</a> = <a class=\"id\" href=\"#legacy_pic_noop\">legacy_pic_noop</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#restore_mask\">restore_mask</a> = <a class=\"id\" href=\"#legacy_pic_noop\">legacy_pic_noop</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#init\">init</a> = <a class=\"id\" href=\"#legacy_pic_int_noop\">legacy_pic_int_noop</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#irq_pending\">irq_pending</a> = <a class=\"id\" href=\"#legacy_pic_irq_pending_noop\">legacy_pic_irq_pending_noop</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#make_irq\">make_irq</a> = <a class=\"id\" href=\"#legacy_pic_uint_noop\">legacy_pic_uint_noop</a>,", 
"};", 
"", 
"struct <a class=\"id\" href=\"#legacy_pic\">legacy_pic</a> <a class=\"id\" href=\"#default_legacy_pic\">default_legacy_pic</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#nr_legacy_irqs\">nr_legacy_irqs</a> = <a class=\"id\" href=\"#NR_IRQS_LEGACY\">NR_IRQS_LEGACY</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#chip\">chip</a>  = &amp;<a class=\"id\" href=\"#i8259A_chip\">i8259A_chip</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#mask_all\">mask_all</a>  = <a class=\"id\" href=\"#mask_8259A\">mask_8259A</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#restore_mask\">restore_mask</a> = <a class=\"id\" href=\"#unmask_8259A\">unmask_8259A</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#init\">init</a> = <a class=\"id\" href=\"#init_8259A\">init_8259A</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#irq_pending\">irq_pending</a> = <a class=\"id\" href=\"#i8259A_irq_pending\">i8259A_irq_pending</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#make_irq\">make_irq</a> = <a class=\"id\" href=\"#make_8259A_irq\">make_8259A_irq</a>,", 
"};", 
"", 
"struct <a class=\"id\" href=\"#legacy_pic\">legacy_pic</a> *<a class=\"id\" href=\"#legacy_pic\">legacy_pic</a> = &amp;<a class=\"id\" href=\"#default_legacy_pic\">default_legacy_pic</a>;", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#i8259A_init_sysfs\">i8259A_init_sysfs</a>(void)", 
"{", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#error\">error</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#legacy_pic\">legacy_pic</a> != &amp;<a class=\"id\" href=\"#default_legacy_pic\">default_legacy_pic</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#sysdev_class_register\">sysdev_class_register</a>(&amp;<a class=\"id\" href=\"#i8259_sysdev_class\">i8259_sysdev_class</a>);", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#error\">error</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#error\">error</a> = <a class=\"id\" href=\"#sysdev_register\">sysdev_register</a>(&amp;<a class=\"id\" href=\"#device_i8259A\">device_i8259A</a>);", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#error\">error</a>;", 
"}", 
"", 
"<a class=\"id\" href=\"#device_initcall\">device_initcall</a>(<a class=\"id\" href=\"#i8259A_init_sysfs\">i8259A_init_sysfs</a>);", 
];
xr_frag_insert('l/fa/dc1a7cd8d5b45749047c9fdc000752407f6c47.xr', __xr_tmp);
