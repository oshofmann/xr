var __xr_tmp = [
"<span class=\"comment\">/*</span>", 
"<span class=\"comment\"> * Early serial console for 8250/16550 devices</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * (c) Copyright 2004 Hewlett-Packard Development Company, L.P.</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>Bjorn Helgaas &lt;bjorn.helgaas@hp.com&gt;</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This program is free software; you can redistribute it and/or modify</span>", 
"<span class=\"comment\"> * it under the terms of the GNU General Public License version 2 as</span>", 
"<span class=\"comment\"> * published by the Free Software Foundation.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * Based on the 8250.c serial driver, Copyright (C) 2001 Russell King,</span>", 
"<span class=\"comment\"> * and on early_printk.c by Andi Kleen.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * This is for use before the serial driver has initialized, in</span>", 
"<span class=\"comment\"> * particular, before the UARTs have been discovered and named.</span>", 
"<span class=\"comment\"> * Instead of specifying the console device as, e.g., \"ttyS0\",</span>", 
"<span class=\"comment\"> * we locate the device directly by its MMIO or I/O port address.</span>", 
"<span class=\"comment\"> *</span>", 
"<span class=\"comment\"> * The user can specify the device directly, e.g.,</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>earlycon=uart8250,io,0x3f8,9600n8</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>earlycon=uart8250,mmio,0xff5e0000,115200n8</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>earlycon=uart8250,mmio32,0xff5e0000,115200n8</span>", 
"<span class=\"comment\"> * or</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>console=uart8250,io,0x3f8,9600n8</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>console=uart8250,mmio,0xff5e0000,115200n8</span>", 
"<span class=\"comment\"> *<span class=\"ts\"/>console=uart8250,mmio32,0xff5e0000,115200n8</span>", 
"<span class=\"comment\"> */</span>", 
"", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#tty\">tty</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#init\">init</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#console\">console</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#serial_core\">serial_core</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#serial_reg\">serial_reg</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#serial\">serial</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#linux\">linux</a>/<a class=\"id\" href=\"#serial_8250\">serial_8250</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#io\">io</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#serial\">serial</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_FIX_EARLYCON_MEM\">CONFIG_FIX_EARLYCON_MEM</a>", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#pgtable\">pgtable</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#include\">include</a> &lt;<a class=\"id\" href=\"#asm\">asm</a>/<a class=\"id\" href=\"#fixmap\">fixmap</a>.<a class=\"id\" href=\"#h\">h</a>&gt;", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"", 
"struct <a class=\"id\" href=\"#early_serial8250_device\">early_serial8250_device</a> {", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#uart_port\">uart_port</a> <a class=\"id\" href=\"#port\">port</a>;", 
"<span class=\"ts\"/>char <a class=\"id\" href=\"#options\">options</a>[16];<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* e.g., 115200n8 */</span>", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#baud\">baud</a>;", 
"};", 
"", 
"static struct <a class=\"id\" href=\"#early_serial8250_device\">early_serial8250_device</a> <a class=\"id\" href=\"#early_device\">early_device</a>;", 
"", 
"static unsigned int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#serial_in\">serial_in</a>(struct <a class=\"id\" href=\"#uart_port\">uart_port</a> *<a class=\"id\" href=\"#port\">port</a>, int <a class=\"id\" href=\"#offset\">offset</a>)", 
"{", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#iotype\">iotype</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#UPIO_MEM\">UPIO_MEM</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#readb\">readb</a>(<a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#membase\">membase</a> + <a class=\"id\" href=\"#offset\">offset</a>);", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#UPIO_MEM32\">UPIO_MEM32</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#readl\">readl</a>(<a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#membase\">membase</a> + (<a class=\"id\" href=\"#offset\">offset</a> << 2));", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#UPIO_PORT\">UPIO_PORT</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#inb\">inb</a>(<a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#iobase\">iobase</a> + <a class=\"id\" href=\"#offset\">offset</a>);", 
"<span class=\"ts\"/>default:", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static void <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#serial_out\">serial_out</a>(struct <a class=\"id\" href=\"#uart_port\">uart_port</a> *<a class=\"id\" href=\"#port\">port</a>, int <a class=\"id\" href=\"#offset\">offset</a>, int <a class=\"id\" href=\"#value\">value</a>)", 
"{", 
"<span class=\"ts\"/>switch (<a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#iotype\">iotype</a>) {", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#UPIO_MEM\">UPIO_MEM</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writeb\">writeb</a>(<a class=\"id\" href=\"#value\">value</a>, <a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#membase\">membase</a> + <a class=\"id\" href=\"#offset\">offset</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#UPIO_MEM32\">UPIO_MEM32</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#writel\">writel</a>(<a class=\"id\" href=\"#value\">value</a>, <a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#membase\">membase</a> + (<a class=\"id\" href=\"#offset\">offset</a> << 2));", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>case <a class=\"id\" href=\"#UPIO_PORT\">UPIO_PORT</a>:", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#outb\">outb</a>(<a class=\"id\" href=\"#value\">value</a>, <a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#iobase\">iobase</a> + <a class=\"id\" href=\"#offset\">offset</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>break;", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"#<a class=\"id\" href=\"#define\">define</a> <a class=\"id\" href=\"#BOTH_EMPTY\">BOTH_EMPTY</a> (<a class=\"id\" href=\"#UART_LSR_TEMT\">UART_LSR_TEMT</a> | <a class=\"id\" href=\"#UART_LSR_THRE\">UART_LSR_THRE</a>)", 
"", 
"static void <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#wait_for_xmitr\">wait_for_xmitr</a>(struct <a class=\"id\" href=\"#uart_port\">uart_port</a> *<a class=\"id\" href=\"#port\">port</a>)", 
"{", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#status\">status</a>;", 
"", 
"<span class=\"ts\"/>for (;;) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#status\">status</a> = <a class=\"id\" href=\"#serial_in\">serial_in</a>(<a class=\"id\" href=\"#port\">port</a>, <a class=\"id\" href=\"#UART_LSR\">UART_LSR</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/>if ((<a class=\"id\" href=\"#status\">status</a> &amp; <a class=\"id\" href=\"#BOTH_EMPTY\">BOTH_EMPTY</a>) == <a class=\"id\" href=\"#BOTH_EMPTY\">BOTH_EMPTY</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#cpu_relax\">cpu_relax</a>();", 
"<span class=\"ts\"/>}", 
"}", 
"", 
"static void <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#serial_putc\">serial_putc</a>(struct <a class=\"id\" href=\"#uart_port\">uart_port</a> *<a class=\"id\" href=\"#port\">port</a>, int <a class=\"id\" href=\"#c\">c</a>)", 
"{", 
"<span class=\"ts\"/><a class=\"id\" href=\"#wait_for_xmitr\">wait_for_xmitr</a>(<a class=\"id\" href=\"#port\">port</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serial_out\">serial_out</a>(<a class=\"id\" href=\"#port\">port</a>, <a class=\"id\" href=\"#UART_TX\">UART_TX</a>, <a class=\"id\" href=\"#c\">c</a>);", 
"}", 
"", 
"static void <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#early_serial8250_write\">early_serial8250_write</a>(struct <a class=\"id\" href=\"#console\">console</a> *<a class=\"id\" href=\"#console\">console</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>const char *<a class=\"id\" href=\"#s\">s</a>, unsigned int <a class=\"id\" href=\"#count\">count</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#uart_port\">uart_port</a> *<a class=\"id\" href=\"#port\">port</a> = &amp;<a class=\"id\" href=\"#early_device\">early_device</a>.<a class=\"id\" href=\"#port\">port</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#ier\">ier</a>;", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Save the IER and disable interrupts */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ier\">ier</a> = <a class=\"id\" href=\"#serial_in\">serial_in</a>(<a class=\"id\" href=\"#port\">port</a>, <a class=\"id\" href=\"#UART_IER\">UART_IER</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serial_out\">serial_out</a>(<a class=\"id\" href=\"#port\">port</a>, <a class=\"id\" href=\"#UART_IER\">UART_IER</a>, 0);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#uart_console_write\">uart_console_write</a>(<a class=\"id\" href=\"#port\">port</a>, <a class=\"id\" href=\"#s\">s</a>, <a class=\"id\" href=\"#count\">count</a>, <a class=\"id\" href=\"#serial_putc\">serial_putc</a>);", 
"", 
"<span class=\"ts\"/><span class=\"comment\">/* Wait for transmitter to become empty and restore the IER */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#wait_for_xmitr\">wait_for_xmitr</a>(<a class=\"id\" href=\"#port\">port</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serial_out\">serial_out</a>(<a class=\"id\" href=\"#port\">port</a>, <a class=\"id\" href=\"#UART_IER\">UART_IER</a>, <a class=\"id\" href=\"#ier\">ier</a>);", 
"}", 
"", 
"static unsigned int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#probe_baud\">probe_baud</a>(struct <a class=\"id\" href=\"#uart_port\">uart_port</a> *<a class=\"id\" href=\"#port\">port</a>)", 
"{", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#lcr\">lcr</a>, <a class=\"id\" href=\"#dll\">dll</a>, <a class=\"id\" href=\"#dlm\">dlm</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#quot\">quot</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#lcr\">lcr</a> = <a class=\"id\" href=\"#serial_in\">serial_in</a>(<a class=\"id\" href=\"#port\">port</a>, <a class=\"id\" href=\"#UART_LCR\">UART_LCR</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serial_out\">serial_out</a>(<a class=\"id\" href=\"#port\">port</a>, <a class=\"id\" href=\"#UART_LCR\">UART_LCR</a>, <a class=\"id\" href=\"#lcr\">lcr</a> | <a class=\"id\" href=\"#UART_LCR_DLAB\">UART_LCR_DLAB</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dll\">dll</a> = <a class=\"id\" href=\"#serial_in\">serial_in</a>(<a class=\"id\" href=\"#port\">port</a>, <a class=\"id\" href=\"#UART_DLL\">UART_DLL</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#dlm\">dlm</a> = <a class=\"id\" href=\"#serial_in\">serial_in</a>(<a class=\"id\" href=\"#port\">port</a>, <a class=\"id\" href=\"#UART_DLM\">UART_DLM</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serial_out\">serial_out</a>(<a class=\"id\" href=\"#port\">port</a>, <a class=\"id\" href=\"#UART_LCR\">UART_LCR</a>, <a class=\"id\" href=\"#lcr\">lcr</a>);", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#quot\">quot</a> = (<a class=\"id\" href=\"#dlm\">dlm</a> << 8) | <a class=\"id\" href=\"#dll\">dll</a>;", 
"<span class=\"ts\"/>return (<a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#uartclk\">uartclk</a> / 16) / <a class=\"id\" href=\"#quot\">quot</a>;", 
"}", 
"", 
"static void <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#init_port\">init_port</a>(struct <a class=\"id\" href=\"#early_serial8250_device\">early_serial8250_device</a> *<a class=\"id\" href=\"#device\">device</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#uart_port\">uart_port</a> *<a class=\"id\" href=\"#port\">port</a> = &amp;<a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#port\">port</a>;", 
"<span class=\"ts\"/>unsigned int <a class=\"id\" href=\"#divisor\">divisor</a>;", 
"<span class=\"ts\"/>unsigned char <a class=\"id\" href=\"#c\">c</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serial_out\">serial_out</a>(<a class=\"id\" href=\"#port\">port</a>, <a class=\"id\" href=\"#UART_LCR\">UART_LCR</a>, 0x3);<span class=\"ts\"/><span class=\"comment\">/* 8n1 */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serial_out\">serial_out</a>(<a class=\"id\" href=\"#port\">port</a>, <a class=\"id\" href=\"#UART_IER\">UART_IER</a>, 0);<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* no interrupt */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serial_out\">serial_out</a>(<a class=\"id\" href=\"#port\">port</a>, <a class=\"id\" href=\"#UART_FCR\">UART_FCR</a>, 0);<span class=\"ts\"/><span class=\"ts\"/><span class=\"comment\">/* no fifo */</span>", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serial_out\">serial_out</a>(<a class=\"id\" href=\"#port\">port</a>, <a class=\"id\" href=\"#UART_MCR\">UART_MCR</a>, 0x3);<span class=\"ts\"/><span class=\"comment\">/* DTR + RTS */</span>", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#divisor\">divisor</a> = <a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#uartclk\">uartclk</a> / (16 * <a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#baud\">baud</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#c\">c</a> = <a class=\"id\" href=\"#serial_in\">serial_in</a>(<a class=\"id\" href=\"#port\">port</a>, <a class=\"id\" href=\"#UART_LCR\">UART_LCR</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serial_out\">serial_out</a>(<a class=\"id\" href=\"#port\">port</a>, <a class=\"id\" href=\"#UART_LCR\">UART_LCR</a>, <a class=\"id\" href=\"#c\">c</a> | <a class=\"id\" href=\"#UART_LCR_DLAB\">UART_LCR_DLAB</a>);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serial_out\">serial_out</a>(<a class=\"id\" href=\"#port\">port</a>, <a class=\"id\" href=\"#UART_DLL\">UART_DLL</a>, <a class=\"id\" href=\"#divisor\">divisor</a> &amp; 0xff);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serial_out\">serial_out</a>(<a class=\"id\" href=\"#port\">port</a>, <a class=\"id\" href=\"#UART_DLM\">UART_DLM</a>, (<a class=\"id\" href=\"#divisor\">divisor</a> >> 8) &amp; 0xff);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#serial_out\">serial_out</a>(<a class=\"id\" href=\"#port\">port</a>, <a class=\"id\" href=\"#UART_LCR\">UART_LCR</a>, <a class=\"id\" href=\"#c\">c</a> &amp; ~<a class=\"id\" href=\"#UART_LCR_DLAB\">UART_LCR_DLAB</a>);", 
"}", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#parse_options\">parse_options</a>(struct <a class=\"id\" href=\"#early_serial8250_device\">early_serial8250_device</a> *<a class=\"id\" href=\"#device\">device</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>char *<a class=\"id\" href=\"#options\">options</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#uart_port\">uart_port</a> *<a class=\"id\" href=\"#port\">port</a> = &amp;<a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#port\">port</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#mmio\">mmio</a>, <a class=\"id\" href=\"#mmio32\">mmio32</a>, <a class=\"id\" href=\"#length\">length</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#options\">options</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#uartclk\">uartclk</a> = <a class=\"id\" href=\"#BASE_BAUD\">BASE_BAUD</a> * 16;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mmio\">mmio</a> = !<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#options\">options</a>, \"mmio,\", 5);", 
"<span class=\"ts\"/><a class=\"id\" href=\"#mmio32\">mmio32</a> = !<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#options\">options</a>, \"mmio32,\", 7);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#mmio\">mmio</a> || <a class=\"id\" href=\"#mmio32\">mmio32</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#iotype\">iotype</a> = (<a class=\"id\" href=\"#mmio\">mmio</a> ? <a class=\"id\" href=\"#UPIO_MEM\">UPIO_MEM</a> : <a class=\"id\" href=\"#UPIO_MEM32\">UPIO_MEM32</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#mapbase\">mapbase</a> = <a class=\"id\" href=\"#simple_strtoul\">simple_strtoul</a>(<a class=\"id\" href=\"#options\">options</a> + (<a class=\"id\" href=\"#mmio\">mmio</a> ? 5 : 7),", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       &amp;<a class=\"id\" href=\"#options\">options</a>, 0);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (<a class=\"id\" href=\"#mmio32\">mmio32</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#regshift\">regshift</a> = 2;", 
"#<a class=\"id\" href=\"#ifdef\">ifdef</a> <a class=\"id\" href=\"#CONFIG_FIX_EARLYCON_MEM\">CONFIG_FIX_EARLYCON_MEM</a>", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#set_fixmap_nocache\">set_fixmap_nocache</a>(<a class=\"id\" href=\"#FIX_EARLYCON_MEM_BASE\">FIX_EARLYCON_MEM_BASE</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#mapbase\">mapbase</a> &amp; <a class=\"id\" href=\"#PAGE_MASK\">PAGE_MASK</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#membase\">membase</a> =", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(void <a class=\"id\" href=\"#__iomem\">__iomem</a> *)<a class=\"id\" href=\"#__fix_to_virt\">__fix_to_virt</a>(<a class=\"id\" href=\"#FIX_EARLYCON_MEM_BASE\">FIX_EARLYCON_MEM_BASE</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#membase\">membase</a> += <a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#mapbase\">mapbase</a> &amp; ~<a class=\"id\" href=\"#PAGE_MASK\">PAGE_MASK</a>;", 
"#else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#membase\">membase</a> = <a class=\"id\" href=\"#ioremap_nocache\">ioremap_nocache</a>(<a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#mapbase\">mapbase</a>, 64);", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#membase\">membase</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_ERR\">KERN_ERR</a> \"%s: Couldn't ioremap 0x%llx\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#__func__\">__func__</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>       (unsigned long long) <a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#mapbase\">mapbase</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENOMEM\">ENOMEM</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/>}", 
"#<a class=\"id\" href=\"#endif\">endif</a>", 
"<span class=\"ts\"/>} else if (!<a class=\"id\" href=\"#strncmp\">strncmp</a>(<a class=\"id\" href=\"#options\">options</a>, \"io,\", 3)) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#iotype\">iotype</a> = <a class=\"id\" href=\"#UPIO_PORT\">UPIO_PORT</a>;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#iobase\">iobase</a> = <a class=\"id\" href=\"#simple_strtoul\">simple_strtoul</a>(<a class=\"id\" href=\"#options\">options</a> + 3, &amp;<a class=\"id\" href=\"#options\">options</a>, 0);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mmio\">mmio</a> = 0;", 
"<span class=\"ts\"/>} else", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#EINVAL\">EINVAL</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#options\">options</a> = <a class=\"id\" href=\"#strchr\">strchr</a>(<a class=\"id\" href=\"#options\">options</a>, ',');", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#options\">options</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#options\">options</a>++;", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#baud\">baud</a> = <a class=\"id\" href=\"#simple_strtoul\">simple_strtoul</a>(<a class=\"id\" href=\"#options\">options</a>, <a class=\"id\" href=\"#NULL\">NULL</a>, 0);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#length\">length</a> = <a class=\"id\" href=\"#min\">min</a>(<a class=\"id\" href=\"#strcspn\">strcspn</a>(<a class=\"id\" href=\"#options\">options</a>, \" \"), sizeof(<a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#options\">options</a>));", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#strncpy\">strncpy</a>(<a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#options\">options</a>, <a class=\"id\" href=\"#options\">options</a>, <a class=\"id\" href=\"#length\">length</a>);", 
"<span class=\"ts\"/>} else {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#baud\">baud</a> = <a class=\"id\" href=\"#probe_baud\">probe_baud</a>(<a class=\"id\" href=\"#port\">port</a>);", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#snprintf\">snprintf</a>(<a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#options\">options</a>, sizeof(<a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#options\">options</a>), \"%u\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#baud\">baud</a>);", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#mmio\">mmio</a> || <a class=\"id\" href=\"#mmio32\">mmio32</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a>", 
"<span class=\"ts\"/><span class=\"ts\"/>       \"Early serial console at MMIO%s 0x%llx (options '%s')\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#mmio32\">mmio32</a> ? \"32\" : \"\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>(unsigned long long)<a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#mapbase\">mapbase</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#options\">options</a>);", 
"<span class=\"ts\"/>else", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#printk\">printk</a>(<a class=\"id\" href=\"#KERN_INFO\">KERN_INFO</a>", 
"<span class=\"ts\"/><span class=\"ts\"/>      \"Early serial console at I/O port 0x%lx (options '%s')\\n\",", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#port\">port</a>-><a class=\"id\" href=\"#iobase\">iobase</a>,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#options\">options</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"static struct <a class=\"id\" href=\"#console\">console</a> <a class=\"id\" href=\"#early_serial8250_console\">early_serial8250_console</a> <a class=\"id\" href=\"#__initdata\">__initdata</a> = {", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#name\">name</a><span class=\"ts\"/>= \"uart\",", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#write\">write</a><span class=\"ts\"/>= <a class=\"id\" href=\"#early_serial8250_write\">early_serial8250_write</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#flags\">flags</a><span class=\"ts\"/>= <a class=\"id\" href=\"#CON_PRINTBUFFER\">CON_PRINTBUFFER</a> | <a class=\"id\" href=\"#CON_BOOT\">CON_BOOT</a>,", 
"<span class=\"ts\"/>.<a class=\"id\" href=\"#index\">index</a><span class=\"ts\"/>= -1,", 
"};", 
"", 
"static int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#early_serial8250_setup\">early_serial8250_setup</a>(char *<a class=\"id\" href=\"#options\">options</a>)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#early_serial8250_device\">early_serial8250_device</a> *<a class=\"id\" href=\"#device\">device</a> = &amp;<a class=\"id\" href=\"#early_device\">early_device</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#port\">port</a>.<a class=\"id\" href=\"#membase\">membase</a> || <a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#port\">port</a>.<a class=\"id\" href=\"#iobase\">iobase</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#parse_options\">parse_options</a>(<a class=\"id\" href=\"#device\">device</a>, <a class=\"id\" href=\"#options\">options</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#init_port\">init_port</a>(<a class=\"id\" href=\"#device\">device</a>);", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"int <a class=\"id\" href=\"#__init\">__init</a> <a class=\"id\" href=\"#setup_early_serial8250_console\">setup_early_serial8250_console</a>(char *<a class=\"id\" href=\"#cmdline\">cmdline</a>)", 
"{", 
"<span class=\"ts\"/>char *<a class=\"id\" href=\"#options\">options</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#options\">options</a> = <a class=\"id\" href=\"#strstr\">strstr</a>(<a class=\"id\" href=\"#cmdline\">cmdline</a>, \"uart8250,\");", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#options\">options</a>) {", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#options\">options</a> = <a class=\"id\" href=\"#strstr\">strstr</a>(<a class=\"id\" href=\"#cmdline\">cmdline</a>, \"uart,\");", 
"<span class=\"ts\"/><span class=\"ts\"/>if (!<a class=\"id\" href=\"#options\">options</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>return 0;", 
"<span class=\"ts\"/>}", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#options\">options</a> = <a class=\"id\" href=\"#strchr\">strchr</a>(<a class=\"id\" href=\"#cmdline\">cmdline</a>, ',') + 1;", 
"<span class=\"ts\"/><a class=\"id\" href=\"#err\">err</a> = <a class=\"id\" href=\"#early_serial8250_setup\">early_serial8250_setup</a>(<a class=\"id\" href=\"#options\">options</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#err\">err</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return <a class=\"id\" href=\"#err\">err</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#register_console\">register_console</a>(&amp;<a class=\"id\" href=\"#early_serial8250_console\">early_serial8250_console</a>);", 
"", 
"<span class=\"ts\"/>return 0;", 
"}", 
"", 
"int <a class=\"id\" href=\"#serial8250_find_port_for_earlycon\">serial8250_find_port_for_earlycon</a>(void)", 
"{", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#early_serial8250_device\">early_serial8250_device</a> *<a class=\"id\" href=\"#device\">device</a> = &amp;<a class=\"id\" href=\"#early_device\">early_device</a>;", 
"<span class=\"ts\"/>struct <a class=\"id\" href=\"#uart_port\">uart_port</a> *<a class=\"id\" href=\"#port\">port</a> = &amp;<a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#port\">port</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#line\">line</a>;", 
"<span class=\"ts\"/>int <a class=\"id\" href=\"#ret\">ret</a>;", 
"", 
"<span class=\"ts\"/>if (!<a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#port\">port</a>.<a class=\"id\" href=\"#membase\">membase</a> && !<a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#port\">port</a>.<a class=\"id\" href=\"#iobase\">iobase</a>)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#line\">line</a> = <a class=\"id\" href=\"#serial8250_find_port\">serial8250_find_port</a>(<a class=\"id\" href=\"#port\">port</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#line\">line</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/>return -<a class=\"id\" href=\"#ENODEV\">ENODEV</a>;", 
"", 
"<span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#update_console_cmdline\">update_console_cmdline</a>(\"uart\", 8250,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     \"ttyS\", <a class=\"id\" href=\"#line\">line</a>, <a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#options\">options</a>);", 
"<span class=\"ts\"/>if (<a class=\"id\" href=\"#ret\">ret</a> &lt; 0)", 
"<span class=\"ts\"/><span class=\"ts\"/><a class=\"id\" href=\"#ret\">ret</a> = <a class=\"id\" href=\"#update_console_cmdline\">update_console_cmdline</a>(\"uart\", 0,", 
"<span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/><span class=\"ts\"/>     \"ttyS\", <a class=\"id\" href=\"#line\">line</a>, <a class=\"id\" href=\"#device\">device</a>-><a class=\"id\" href=\"#options\">options</a>);", 
"", 
"<span class=\"ts\"/>return <a class=\"id\" href=\"#ret\">ret</a>;", 
"}", 
"", 
"<a class=\"id\" href=\"#early_param\">early_param</a>(\"earlycon\", <a class=\"id\" href=\"#setup_early_serial8250_console\">setup_early_serial8250_console</a>);", 
];
xr_frag_insert('l/fb/27e70a49f9057c853f1852a231d092079beeb2.xr', __xr_tmp);
